
var DAIS = DAIS || {};

DAIS.createNS = function (namespace, classes) {
    /// <summary>
    /// Creates an Object following the specified namespace identifier and returns the most inner object of the namespace
    /// </summary>
    /// <param name="namespace" type="String">
    /// The namespace string
    /// </param>
    /// <param name="classes" type="Object" optional="true">
    ///  An object which properties will be added to the namespace
    /// </param>
    /// <returns >
    /// The most inner object of the namespace 
    /// </returns >


    var nsparts = namespace.split(".");
    var parent = window.DAIS;
    // we want to be able to include or exclude the root namespace so we strip
    // it if it's in the namespace
    if (nsparts[0] === "DAIS") {
        nsparts = nsparts.slice(1);
    }

    // loop through the parts and create a nested namespace if necessary
    for (var i = 0; i < nsparts.length; i++) {
        var partname = nsparts[i];
        // check if the current parent already has the namespace declared
        // if it isn't, then create it
        if (typeof parent[partname] === "undefined") {
            parent[partname] = {};
        }
        // get a reference to the deepest element in the hierarchy so far
        parent = parent[partname];
    }
    // the parent is now constructed with empty namespaces and can be used.
    // we return the outermost namespace

    //if we have clases add them to the namespace 
    if (classes) {
        for (var item in classes) {
            parent[item] = classes[item];
        }
    }

    return parent;
};

// html5shiv MIT @rem remysharp.com/html5-enabling-script
// iepp v1.6.2 MIT @jon_neal iecss.com/print-protector
/*@cc_on(function(m,c){var z="abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video";function n(d){for(var a=-1;++a<o;)d.createElement(i[a])}function p(d,a){for(var e=-1,b=d.length,j,q=[];++e<b;){j=d[e];if((a=j.media||a)!="screen")q.push(p(j.imports,a),j.cssText)}return q.join("")}var g=c.createElement("div");g.innerHTML="<z>i</z>";if(g.childNodes.length!==1){var i=z.split("|"),o=i.length,s=RegExp("(^|\\s)("+z+")",
"gi"),t=RegExp("<(/*)("+z+")","gi"),u=RegExp("(^|[^\\n]*?\\s)("+z+")([^\\n]*)({[\\n\\w\\W]*?})","gi"),r=c.createDocumentFragment(),k=c.documentElement;g=k.firstChild;var h=c.createElement("body"),l=c.createElement("style"),f;n(c);n(r);g.insertBefore(l,
g.firstChild);l.media="print";m.attachEvent("onbeforeprint",function(){var d=-1,a=p(c.styleSheets,"all"),e=[],b;for(f=f||c.body;(b=u.exec(a))!=null;)e.push((b[1]+b[2]+b[3]).replace(s,"$1.iepp_$2")+b[4]);for(l.styleSheet.cssText=e.join("\n");++d<o;){a=c.getElementsByTagName(i[d]);e=a.length;for(b=-1;++b<e;)if(a[b].className.indexOf("iepp_")<0)a[b].className+=" iepp_"+i[d]}r.appendChild(f);k.appendChild(h);h.className=f.className;h.innerHTML=f.innerHTML.replace(t,"<$1font")});m.attachEvent("onafterprint",
function(){h.innerHTML="";k.removeChild(h);k.appendChild(f);l.styleSheet.cssText=""})}})(this,document);@*/
/************************************************************
Coolmenus Beta 4.06 - Copyright Thomas Brattli - www.dhtmlcentral.com
Last updated: 11.13.02

v4.06 - with basic frame support
*************************************************************/
/*Browsercheck object*/
function cm_bwcheck(){
	//In theory we should use object detection, but this script needs work-arounds for almost every browser...
	this.ver=navigator.appVersion
	this.agent=navigator.userAgent.toLowerCase()
	this.dom=document.getElementById?1:0
	this.ns4=(!this.dom && document.layers)?1:0;
	this.op=window.opera 
	this.moz=(this.agent.indexOf("gecko")>-1 || window.sidebar)
	this.ie=this.agent.indexOf("msie")>-1 && !this.op
	if(this.op){
		this.op5=(this.agent.indexOf("opera 5")>-1 || this.agent.indexOf("opera/5")>-1)
		this.op6=(this.agent.indexOf("opera 6")>-1 || this.agent.indexOf("opera/6")>-1)
		this.op7=this.dom&&!this.op5&&!this.op6 //So all higher opera versions will use it
	}else if(this.moz) this.ns6 = 1
	else if(this.ie){
		this.ie4 = !this.dom && document.all
  	this.ie5 = (this.agent.indexOf("msie 5")>-1)
  	this.ie55 = (this.ie5 && this.agent.indexOf("msie 5.5")>-1)
  	this.ie6 = this.dom && !this.ie4 && !this.ie5 && ! this.ie55
	}
	this.mac=(this.agent.indexOf("mac")>-1)
	this.bw=(this.ie6 || this.ie5 || this.ie4 || this.ns4 || this.ns6 || this.op5 || this.op6 || this.op7)
  this.usedom= this.ns6||this.op7//Use dom creation
  this.reuse = this.ie||this.op7||this.usedom //Reuse layers
  this.px=this.dom&&!this.op5?"px":""
	return this
}
var bw=new cm_bwcheck()
/*Variable declaration*/
var cmpage
/*Crossbrowser objects functions*/
function cm_message(txt){alert(txt); return false}
function cm_makeObj(obj,nest,o,doc){ //Changed in v4.05
  if(!doc) doc=document 
  if(bw.usedom&&o) this.evnt=o
  else{nest=(!nest) ? "doc.":'doc.layers.'+nest+'.'
    this.evnt=bw.dom? doc.getElementById(obj):
    bw.ie4?doc.all[obj]:bw.ns4?eval(nest+"layers." +obj):0;
  }
  if(!this.evnt) return cm_message('The layer does not exist ('+obj+')' 
    +'- \nIf your using Netscape please check the nesting of your tags (on the entire page)\nNest:'+nest)
  this.css=bw.dom||bw.ie4?this.evnt.style:this.evnt; this.ok=0
  this.ref=bw.dom||bw.ie4?doc:this.css.document; 
  this.obj = obj + "Object"; 	eval(this.obj + "=this");
  this.x=0; this.y=0; this.w=0; this.h=0; this.vis=0; return this
}
cm_makeObj.prototype.moveIt = function(x,y){this.x=x;this.y=y; this.css.left=x+bw.px;this.css.top=y+bw.px}
cm_makeObj.prototype.showIt = function(o){this.css.visibility="visible"; this.vis=1; if(bw.op5&&this.arr){ this.arr.showIt(); }}//alert('showing arrow')}} 
cm_makeObj.prototype.hideIt = function(no){this.css.visibility="hidden"; this.vis=0;}
cm_makeObj.prototype.clipTo = function(t,r,b,l,setwidth){ 
this.w=r; this.h=b; if(bw.ns4){this.css.clip.top=t;this.css.clip.right=r; this.css.clip.bottom=b;this.css.clip.left=l
}else{if(t<0)t=0;if(r<0)r=0;if(b<0)b=0;if(b<0)b=0; this.css.clip="rect("+t+bw.px+","+r+bw.px+","+b+bw.px+","+l+bw.px+")";
if(setwidth){if(bw.op5||bw.op6){this.css.pixelWidth=r; this.css.pixelHeight=b;}else{this.css.width=r+bw.px; this.css.height=b+bw.px;}}}}
function cm_active(on,h){
	if(this.o.arr) on?this.o.arr.hideIt():bw.op5?this.o.arr.showIt():this.o.arr.css.visibility="inherit"
  if(bw.reuse||bw.usedom){
    if(!this.img2) this.o.evnt.className=on?this.cl2:this.cl
    else this.o.ref.images["img"+this.name].src=on?this.img2.src:this.img1.src; //Changed v4.05
    if(on && bw.ns6){this.o.hideIt(); this.o.css.visibility='inherit' }; //netscape 6 bug fix  
  }else{  
    if(!this.img2){ if(on) this.o.over.showIt(); else this.o.over.hideIt();
    }else this.o.ref.images["img"+this.name].src=on?this.img2.src:this.img1.src;
  }this.isactive=on?1:0
}
/***Pageobject **/
function cm_page(frame){ //Changed v4.05
  if(!frame) frame = self 
  this.x=0; this.x2 =(!bw.ie)?frame.innerWidth:frame.document.body.offsetWidth-20;
  this.y=0; this.orgy=this.y2= (!bw.ie)?frame.innerHeight:frame.document.body.offsetHeight-6;
  this.x50=this.x2/2; this.y50=this.y2/2; return this
}
/***check positions**/
function cm_cp(num,w,minus){
	if(num){if(num.toString().indexOf("%")!=-1){var t = w?cmpage.x2:cmpage.y2; num=parseInt((t*parseFloat(num)/100))
  if(minus) num-=minus }else num=eval(num);} else num=0; return num
}
/**Level object**/
function cm_makeLevel(){//changed 4.06
	var c=this, a=arguments; c.width=a[0]||null; c.height=a[1]||null; 
  c.regClass=a[2]||null; c.overClass=a[3]||null; c.borderX=a[4]>-1?a[4]:null; 
  c.borderY=a[5]>-1?a[5]:null; c.borderClass=a[6]||null; c.rows=a[7]>-1?a[7]:null; 
  c.align=a[8]||null; c.offsetX=a[9]||null; c.offsetY=a[10]||null; c.arrow=a[11]||null; 
  c.arrowWidth=a[12]||null; c.arrowHeight=a[13]||null; c.roundBorder=a[14]||null; return c
}
/***Making the main menu object**/
function makeCM(name){ //Changed v4.06
  var c=this; c.mc=0; c.name = name; c.m=new Array(); c.scrollY=-1; c.level=new Array(); c.l=new Array(); c.tim=100; c.isresized=0;
  c.isover=0; c.zIndex=100; c.frameStartLevel=1; c.bar=0; c.z=0; c.totw=0; c.toth=0; c.maxw=0; c.maxh=0; cmpage = new cm_page(); c.constructed = 0;
	return this
}//events
makeCM.prototype.onshow=""; makeCM.prototype.onhide=""; makeCM.prototype.onconstruct="";
/***Creating layers**/
function cm_divCreate(id,cl,txt,w,c,app,ex,txt2){
  if(bw.usedom){var div=document.createElement("DIV"); div.className=cl; div.id=id; 
    if(txt) div.innerHTML=txt; if(app){app.appendChild(div); return div}
    if(w) document.body.appendChild(div); return div
  }else{var dstr='<div id="'+id+'" class="'+cl+'"' 
    if(ex&&bw.reuse) dstr+=" "+ex; dstr+=">"+txt; ; if(txt2) dstr+=txt2; 
    if(c) dstr+='</div>'; if(w) document.write(dstr); else return dstr
  }return ""
}
/***Getting layer string for each menu**/
function cm_getLayerStr(m,app,name,fill,clb,arrow,ah,aw,root){
  var no=m.nolink,arrstr='',l=m.lev,str='',txt=m.txt,ev='', id=name + '_' + m.name,d1; if(app) d1=app
  if((!bw.reuse||l==0) && !no){
    ev=' onmouseover="'+name+'.showsub(\''+m.name+'\')"' 
    +' onmouseout="'+name+'.mout(\''+m.name+'\')"'
    +' onclick="'+name+'.onclck(\''+m.name+'\'); return false" '
  }
  if(bw.reuse&&l!=0) txt=''; if(l==0) str+=d1=cm_divCreate(id+'_0',clb,''); str+=m.d2=cm_divCreate(id,m.cl,txt,0,0,d1,ev)
  if(l==0&&bw.usedom){ 
    m.d2.onclick=new Function(name+'.onclck("'+m.name+'")'); 
    m.d1=d1; 
    m.d2.onmouseover=new Function(name+'.showsub("'+m.name+'")'); 
    m.d2.onmouseout=new Function(name+'.mout("'+m.name+'")')
  }if(!bw.reuse && !m.img1 && !no){
    str+=cm_divCreate(id+'_1',m.cl2,txt,0,1)
    str+=cm_divCreate(id+'_3',"clCMAbs",'<a href="#" '+ev+'><img alt="" src="'+root+fill+'" width="'+m.w+'" height="'+m.h+'" border="0" /></a>',0,1)
  }str+='</div>'; 
  if(l==0){if(arrow)str+=m.d3=cm_divCreate(id+'_a','clCMAbs','<img alt="" height="'+aw+'" width="'+ah+'" src="'+root+arrow+'" />',0,1,d1); str+="</div>"}
  str+="\n"; if(!bw.reuse){m.txt=null; m.d2=null; m.d3=null;}
  if(bw.usedom){ if(l==0) document.body.appendChild(d1); str=''}
  return str
}
/***get align num from text (better to evaluate numbers later)**/
function cm_checkalign(a){
  switch(a){
    case "right": return 1; break; case "left": return 2; break;
    case "bottom": return 3; break; case "top": return 4; break;
    case "righttop": return 5; break; case "lefttop": return 6; break;
    case "bottomleft": return 7; break; case "topleft": return 8; break;
  }return null
}
/**Making each individual menu **/
makeCM.prototype.makeMenu=function(name,parent,txt,lnk,targ,w,h,img1,img2,cl,cl2,align,rows,nolink,onclick,onmouseover,onmouseout){
  var c = this; if(!name) name = c.name+""+c.mc; var p = parent!=""&&parent&&c.m[parent]?parent:0;
  if(c.mc==0){
		//Added 4.07 - bug(?) in opera 7 - you cannot dom-add layers created in one document to another one (or so it seems) - so turn of usedom
		if(bw.op7 && this.frames)	bw.usedom=0
		var tmp=location.href;
    if(tmp.indexOf('file:')>-1||tmp.charAt(1)==':') c.root=c.offlineRoot; else c.root=c.onlineRoot
    if(c.useBar){if(!c.barBorderClass) c.barBorderClass=c.barClass; c.bar1 = cm_divCreate(c.name+'bbar_0',c.barClass,'',0,1);
      c.bar = cm_divCreate(c.name+'bbar',c.barBorderClass,'',1,1,0,0,c.bar1); if(bw.usedom) c.bar.appendChild(c.bar1);    
    }}var create=1,img,arrow; var m = c.m[name] = new Object(); m.name=name; m.subs=new Array(); m.parent=p; m.arnum=0; m.arr=0
  var l = m.lev = p?c.m[p].lev+1:0; c.mc++; m.hide=0;
  if(l>=c.l.length){
    var p1,p2=0; if(l>=c.level.length) p1=c.l[c.level.length-1];
    else p1=c.level[l]; c.l[l]=new Array(); if(!p2) p2=c.l[l-1]
    if(l!=0){ if(isNaN(p1.align)) p1["align"]=cm_checkalign(p1.align)
      for(var i in p1){if(i!="str"&&i!="m"){if(p1[i]==null) c.l[l][i]=p2[i]; else c.l[l][i]=p1[i] }}
    }else{c.l[l]=c.level[0]; c.l[l].align=cm_checkalign(c.l[l].align)}
    c.l[l]["str"]=''; c.l[l].m=new Array(); if(!c.l[l].borderClass) c.l[l].borderClass=c.l[l].regClass
    c.l[l].app=0; c.l[l].max=0; c.l[l].arnum=0; c.l[l].o=new Array(); c.l[l].arr=new Array()
    c.level[l]=p1=p2=null
    if(l!=0) c.l[l].str=c.l[l].app=cm_divCreate(c.name+ '_' +l+'_0',c.l[l].borderClass,'')
  }if(p){p = c.m[p]; p.subs[p.subs.length]=name; 
    if(p.subs.length==1&&c.l[l-1].arrow){ p.arr=1; 
      if(p.parent){c.m[p.parent].arnum++
        if(c.m[p.parent].arnum>c.l[l-1].arnum){
          c.l[l-1].str+=c.l[l-1].arr[c.l[l-1].arnum]=cm_divCreate(c.name+ '_a' +(l-1)+'_'+c.l[l-1].arnum,'clCMAbs','<img height="'+c.l[l-1].arrowHeight
            +'" width="'+c.l[l-1].arrowWidth+'" src="'+c.root+c.l[l-1].arrow+'" alt="" />',0,1,c.l[l-1].app); c.l[l-1].arnum++
        }}}if(bw.reuse) if(p.subs.length>c.l[l].max) c.l[l].max = p.subs.length; else create=0
  }m.rows=rows>-1?rows:c.l[l].rows; m.w=cm_cp(w||c.l[l].width,1); m.h=cm_cp(h||c.l[l].height,0); m.txt=txt; m.lnk=lnk; 
  if(align) align=cm_checkalign(align); m.align=align||c.l[l].align; m.cl=cl=cl||c.l[l].regClass; 
  m.targ=targ; m.cl2=cl2||c.l[l].overClass; m.create=create;  m.mover=onmouseover; m.mout=onmouseout; 
  m.onclck=onclick; m.active = cm_active; m.isactive=0; m.nolink=nolink
  if(create) c.l[l].m[c.l[l].m.length]=name
  if(img1){m.img1 = new Image(); m.img1.src=c.root+img1; if(!img2) img2=img1; m.img2 = new Image(); m.img2.src=c.root+img2;
    m.cl="clCMAbs"; m.txt=''; if(!bw.reuse&&!nolink) m.txt = '<a href="#" onmouseover="'+c.name+'.showsub(\''+name+'\')" onmouseout="'+c.name+'.mout(\''+name+'\')" onclick="'+c.name+'.onclck(\''+name+'\'); return false">';;
    m.txt+='<img alt="" src="'+c.root+img1+'" width="'+m.w+'" height="'+m.h+'" id="img'+m.name+'" '
    if(bw.dom&&!nolink) m.txt+='style="cursor:pointer; cursor:pointer"'; if(!bw.reuse){if(!bw.dom) m.txt+='name="img'+m.name+'"'; m.txt+=' border="0"'}; m.txt+=' />'; if(!bw.reuse&&!nolink) m.txt+='</a>'
  }else{m.img1=0; m.img2=0}; 
  if(l==0||create) c.l[l].str+=cm_getLayerStr(m,c.l[l].app,c.name,c.fillImg,c.l[l].borderClass,c.l[l].arrow,c.l[l].arrowWidth,c.l[l].arrowHeight,c.root)
  if(l==0){if(m.w>c.maxw) c.maxw=m.w; if(m.h>c.maxh) c.maxh=m.h; c.totw+=c.pxBetween+m.w+c.l[0].borderX;c.toth+=c.pxBetween+m.h+c.l[0].borderY}
  if(lnk && !onmouseover){
		var path=lnk.indexOf("mailto:")>-1||lnk.indexOf("http://")>-1?"":c.root
		m.mover="self.status='"+path+m.lnk+"'"
		if(!m.mout) m.mout=""; m.mout+=";self.status='';"
	}
}
/**Getting x/y coords for subs **/
makeCM.prototype.getcoords=function(m,bx,by,x,y,maxw,maxh,ox,oy){
  var a=m.align; x+=m.o.x; y+=m.o.y
  switch(a){
    case 1:  x+=m.w+bx; break; case 2:  x-=maxw+bx; break;
    case 3:  y+=m.h+by; break; case 4:  y-=maxh+by; break;
    case 5:  x-=maxw+bx; y-=maxh-m.h; break;
    case 6:  x+=m.w+bx; y-=maxh-m.h; break;
    case 7:  y+=m.h+by; x-=maxw-m.w; break;
    case 8:  y-=maxh+by; x-=maxw-m.w+bx; break;
  }//Added v4.05
  if(m.lev==this.frameStartLevel-1 && this.frames){
    switch(a){
      case 1:  x=0; break; 
      case 2:  x=this.cmpage.x2-maxw; break;
      case 3:  y=0; break; 
      case 4:  y-=maxh+by; break;
      case 5:  x-=maxw+bx; y-=maxh-m.h; break;
      case 6:  x+=m.w+bx; y-=maxh-m.h; break;
      case 7:  y+=m.h+by; x-=maxw-m.w; break;
      case 8:  y-=maxh+by; x-=maxw-m.w+bx; break;
    }
  }
  m.subx=x + ox; m.suby=y + oy
}
/**Showing sub elements**/
makeCM.prototype.showsub=function(el){ //Changed v4.06
  var c=this,pm=c.m[el],m,o,nl
  if(!pm.b||(c.isresized&&pm.lev>0)) pm.b=c.l[pm.lev].b; c.isover=1
  clearTimeout(c.tim);
  var ln=pm.subs.length,l=pm.lev+1
  if(c.l[pm.lev].a==el&&l!=c.l.length && !c.openOnClick){if(c.l[pm.lev+1].a) c.hidesub(l+1,el); return}
  c.hidesub(l,el); if(pm.mover) eval(pm.mover); if(!pm.isactive) pm.active(1);
  c.l[pm.lev].a = el; if(ln==0) return; 
	if(c.openOnClick && !c.clicked) return//Added v4.06
	if(!c.l[l].b) return //Added v4.05
  var b = c.l[l].b, bx=c.l[l].borderX, by=c.l[l].borderY, rows=pm.rows
	var rb=c.l[l].roundBorder;//added 4.06
  var x=bx+rb,y=by+rb,maxw=0,maxh=0,cn=0; b.hideIt()
  for(var i=0;i<c.l[l].m.length;i++){  
    if(!bw.reuse) m=c.m[c.l[l].m[i]]
    else m=c.m[c.m[el].subs[i]]
    if(m && m.parent==el&&!m.hide){
      if(!bw.reuse) o=m.o; else o=m.o=c.l[l].o[i]
      if(x!=o.x||y!=o.y) o.moveIt(x,y); nl=m.subs.length //changed 4.06
      if(bw.reuse){
        if(o.w!=m.w || o.h!=m.h) o.clipTo(0,m.w,m.h,0,1)
        if(o.evnt.className!=m.cl){ 
          m.isactive=0; o.evnt.className=m.cl
          if(bw.ns6){o.hideIt(); o.css.visibility='inherit'} //NS6 bugfix
        }if(bw.ie6) b.showIt()//IE6 bugfix (scrollbars)
        o.evnt.innerHTML=m.txt; if(bw.ie6) b.hideIt() 
				if(!m.nolink){
          o.evnt.onmouseover=new Function(c.name+".showsub('"+m.name+"')")
          o.evnt.onmouseout=new Function(c.name+".mout('"+m.name+"')") //Added v4.05
          o.evnt.onclick=new Function(c.name+".onclck('"+m.name+"')")
          if(o.oldcursor){o.css.cursor=o.oldcursor; o.oldcursor=0;}
        }else{o.evnt.onmouseover=''; o.evnt.onclick='';  if(o.css.cursor=='') o.oldcursor=bw.ns6?"pointer":"hand"; else o.oldcursor=o.css.cursor; o.css.cursor="auto"}        
      }if(m.arr){o.arr=c.l[l].arr[cn]; o.arr.moveIt(x + m.w-c.l[l].arrowWidth-3,y+m.h/2-(c.l[l].arrowHeight/2)); 
      o.arr.css.visibility="inherit"; cn++;} else o.arr=0
      if(!rows){y+=m.h+by; if(m.w>maxw) maxw=m.w; maxh=y}
      else{x+=m.w+bx; if(m.h>maxh) maxh=m.h; maxw=x;}
      o.css.visibility="inherit"; if(bw.op5||bw.op6) o.showIt()
    }else{o = c.m[c.l[l].m[i]].o; o.hideIt();} }
  if(!rows) maxw+=bx*2+rb; else maxh+=by*2+rb; //changed 4.06
	if(rb){maxw+=rb; maxh+=rb}//added 4.06
	b.clipTo(0,maxw,maxh,0,1)
	//Check frame scroll
	if(c.chkscroll) c.chkscroll() //Added v4.05 - not the best solution
  if(c.chkscroll||!pm.subx||!pm.suby||c.scrollY>-1||c.isresized) c.getcoords(pm,c.l[l-1].borderX,c.l[l-1].borderY,pm.b.x,pm.b.y,maxw,maxh,c.l[l-1].offsetX,c.l[l-1].offsetY) //Changed 4.06
	x=pm.subx; if(c.chkscroll&&l==c.frameStartLevel) pm.suby+=c.scrollY; y=pm.suby; b.moveIt(x,y); if(c.onshow) eval(c.onshow); b.showIt()
}
/**Hide sub elements **/
makeCM.prototype.hidesub=function(l,el){ //Changed v4.05
  var c = this,tmp,m,i,j,hide
  if(!l) {l=1; hide=1; c.clicked=0}
  for(i=l-1;i<c.l.length;i++){
    if(i>0&&i>l-1) if(c.l[i].b) c.l[i].b.hideIt()//Changed v4.05
    if(c.l[i].a&&c.l[i].a!=el){
      m=c.m[c.l[i].a]; m.active(0,1); if(m.mout) eval(m.mout); c.l[i].a=0
      if(i>0&&i>l-1) if(bw.op5||bw.op6) for(j=0;j<c.l[i].m.length;j++) c.m[c.l[i].m[j]].o.hideIt()
    }if(i>l){for(j=0;j<c.l[i-1].arnum;j++){c.l[i-1].arr[j].hideIt(); if(bw.op6) c.l[i-1].arr[j].moveIt(-1000,-1000)}} //opera bug
  }if(hide&&c.onhide) eval(c.onhide) //onhide event
}
/***Make all menu div objects**/
makeCM.prototype.makeObjects=function(nowrite,fromframe){ //Changed v4.06
  var c = this,oc,name,bx,by,w,h,l,no,ar,id,nest,st=0,en=c.l.length,bobj,o,m,i,j
  //Added v4.05
  if(fromframe){
    st = this.frameStartLevel
    this.body = fromframe.document.body
    this.doc = fromframe.document
    this.deftarget=fromframe
    this.cmpage = new cm_page(fromframe)
  }else{
    this.body=document.body
    this.doc=document
    if(this.frames) en = this.frameStartLevel
    this.deftarget=self
  }
  if(!nowrite){
    for(i=st;i<en;i++){ //changed 4.06
      if(!bw.usedom) this.doc.write(c.l[i].str)
      else if(i>0) this.body.appendChild(c.l[i].app)
      if(!this.frames) c.l[i].str=null
    }}c.z=c.zIndex+2
  for(i=st;i<en;i++){oc=0
    if(i!=0){bobj=c.l[i].b = new cm_makeObj(c.name + "_"+i+"_0","",c.l[i].app,this.doc); bobj.css.zIndex=c.z; 
    if(bw.dom) bobj.css.overflow='hidden'}; bx=c.l[i].borderX; by=c.l[i].borderY; c.l[i].max=0;
    for(j=0;j<c.l[i].m.length;j++){
      m = c.m[c.l[i].m[j]]; name=m.name; w=m.w; h=m.h; l=m.lev; no=m.nolink;
      if(i>0){m.b = bobj; nest=i}
      else{m.b = new cm_makeObj(c.name + "_"+name+"_0","",m.d1,this.doc); m.b.css.zIndex=c.z; m.b.clipTo(0,w+bx*2,h+by*2,0,1); nest=name}
      id = c.name + "_"+name; nest=c.name + "_"+nest;
      if(m.create){
        o=m.o=new cm_makeObj(id,nest+"_0",m.d2,this.doc); o.z=o.css.zIndex=c.z+1; if(bw.reuse){c.l[l].o[oc]=o; oc++}; 
        if(l==0&&m.img1) o.css.visibility='inherit'; if(bw.op5) o.showIt(); o.arr=0;
      }if(!bw.reuse||l==0) o.clipTo(0,w,h,0,1); o.moveIt(bx,by); o.z=o.css.zIndex=c.z+2
      if(j<c.l[i].arnum){
        c.l[i].arr[j]=new cm_makeObj(c.name+"_a"+i+"_"+j,nest+"_0",nowrite?0:c.l[i].arr[j],this.doc)
        c.l[i].arr[j].css.zIndex=c.z+30+j;
      }else if(l==0&&m.arr==1){
        o.arr=new cm_makeObj(id+"_a",nest+"_0",m.d3,this.doc)
        o.arr.moveIt(bx+m.w-c.l[i].arrowWidth-3,by+m.h/2-(c.l[i].arrowHeight/2)); 
        o.arr.css.zIndex=c.z+20;
      }if(!no && !bw.reuse && !m.img1){  
        o.over=new cm_makeObj(c.name + "_"+name+"_1",nest+"_0"+".document.layers."+id,"",this.doc)
        o.over.moveIt(0,0); o.over.hideIt(); o.over.clipTo(0,w,h,0,1); o.over.css.zIndex=c.z+3
        img=new cm_makeObj(c.name + "_"+name+"_3",nest+"_0"+".document.layers."+id,"",this.doc); img.moveIt(0,0)
        img.css.visibility="inherit"; img.css.zIndex=c.z+4; if(bw.op5) img.showIt()
      }c.z++; 
    }
  }
	if(fromframe){	///Set scroll vars - added v4.05
		c.chkscroll = function(){//changed 4.06
			if (bw.ie&&!bw.ie6) this.scrollY=this.body.scrollTop;
			else if (bw.ie6 || bw.op7){
				if (this.doc.compatMode && document.compatMode != "BackCompat")	this.scrollY=this.doc.documentElement.scrollTop
				else this.scrollY=this.body.scrollTop
			}else this.scrollY=this.deftarget.pageYOffset;
		}
	}
}
/**Onmouseout**/
makeCM.prototype.mout = function(){ //Changed v4.06
	var c = this; clearTimeout(c.tim); c.isover = 0; var f="if(!"+c.name+".isover)"+c.name+".hidesub()"
  if(!c.closeOnClick) c.tim = setTimeout(f,c.wait)
	else{
		if(bw.ns4){ document.captureEvents("Event.MOUSEDOWN"); document.onmousedown=new Function(f)}
		else document.onclick=new Function(f); 
		if(this.frames){
			if(bw.ns4){this.doc.captureEvents("Event.MOUSEDOWN"); this.doc.onmousedown=new Function(f)}
			else this.doc.onclick=new Function(f)
		}
	}
}
/**Constructing and initiating top items and bar**/
makeCM.prototype.construct=function(nowrite){ //Changed v4.06
  var c=this; if(!c.l[0]||c.l[0].m.length==0) return cm_message('No menus defined');
	 if(!nowrite){for(var i=1;i<c.l.length;i++){c.l[i].str+="</div>"}} //Added 4.06
  c.makeObjects(nowrite); cmpage = new cm_page(); 
  var mpa,o,maxw=c.maxw,maxh=c.maxh,i,totw=c.totw,toth=c.toth,m,px=c.pxBetween
  var bx=c.l[0].borderX,by=c.l[0].borderY,x=c.fromLeft,y=c.fromTop,mp=c.menuPlacement,rows=c.rows
  if(rows){toth=maxh+by*2; totw=totw-px+bx;}else{totw=maxw+bx*2; toth=toth-px+by;}
  switch(mp){
    case "center": x=cmpage.x2/2-totw/2; if(bw.ns4) x-=9; break;
    case "right": x=cmpage.x2-totw; break;
    case "bottom": case "bottomcenter": y=cmpage.y2-toth; if(mp=="bottomcenter") x=cmpage.x2/2-totw/2; break;
    default: if(mp.toString().indexOf(",")>-1) mpa=1; break;
  }for(var i=0;i<c.l[0].m.length;i++){
    m = c.m[c.l[0].m[i]]; o = m.b; if(mpa) rows?x=cm_cp(mp[i]):y=cm_cp(mp[i],0,0,1); 
    o.moveIt(x,y); o.showIt(); if(m.arr) m.o.arr.showIt(); o.oy=y; 
    if(!mpa) rows?x+=m.w+px+bx:y+=m.h+px+by
  }if(c.useBar==1){ //Background-Bar
    var bbx=c.barBorderX,bby=c.barBorderY; 
    var bar1=c.bar1= new cm_makeObj(c.name+'bbar_0',c.name+'bbar',nowrite?0:c.bar1,document)
    var bar=c.bar= new cm_makeObj(c.name+'bbar','',nowrite?0:c.bar,document); bar.css.zIndex=c.zIndex+1
    var barx=c.barX=="menu"?c.m[c.l[0].m[0]].b.x-bbx:cm_cp(c.barX,1);
    var bary=c.barY=="menu"?c.m[c.l[0].m[0]].b.y-bby:cm_cp(c.barY);
    var barw=c.barWidth=="menu"?totw:cm_cp(c.barWidth,1,bbx*2);
    var barh=c.barHeight=="menu"?toth:cm_cp(c.barHeight,0,bby*2);
    bar1.clipTo(0,barw,barh,0,1); bar1.moveIt(bbx,bby); bar1.showIt();
    bar.clipTo(0,barw+bbx*2,barh+bby*2,0,1); bar.moveIt(barx,bary); bar.showIt();
  }if(c.resizeCheck){ //Window resize code - updated 4.06 - stil sucks
    if(bw.ns4||bw.op5||bw.op6)setTimeout('window.onresize=new Function("'+c.name+'.resized()")',500)
		else window.onresize=new Function(c.name+".resized()")
    c.resized=cm_resized; if(bw.op5||bw.op6) document.onmousemove=new Function(c.name+".resized()")
  }if(c.onconstruct) eval(c.onconstruct) //onconstruct event
  c.constructed = 1 //Added v4.05
  return true
}
/**Capturing resize**/
var cm_inresize=0
function cm_resized(){
  if(cm_inresize) return
	page2=new cm_page(); var off=(bw.op6||bw.op5)?20:5
  if(page2.x2<cmpage.x2-off || page2.y2<cmpage.orgy-off || page2.x2>cmpage.x2+off || page2.y2>cmpage.orgy+off){
		if(bw.ie||bw.ns6||bw.op7||bw.ns4){
      cmpage=page2; this.isresized=1; 
      if(this.onresize) eval(this.onresize); this.construct(1);
      if(this.onafterresize) eval(this.onafterresize);
		}else{cm_inresize=1; location.reload()} 
  }
}
/**Onclick of an item**/
makeCM.prototype.onclck=function(m){ //Changed v4.06
  m = this.m[m]
  if(m.onclck) eval(m.onclck);
	if(this.openOnClick && m.subs.length>0){
		this.clicked = 1; this.showsub(m.name); return
	} 
 //alert(m.lnk);
  var re = new RegExp ('&amp;', 'gi') ;
  var lnk=m.lnk.replace(re,'&'), targ=m.targ
 // alert(lnk);
  if(lnk){
    if(lnk.indexOf("mailto")!=0 && lnk.indexOf("http")!=0) lnk=this.root+lnk
		if(String(targ)=="undefined" || targ=="" || targ==0 || targ=="_self"){
      if(this.frames){ //Turning of all level 1 + vars
        if(this.l[0].a){
          this.m[this.l[0].a].active(0,1)
          this.l[0].a =0
        }
        for(i=this.frameStartLevel;i<this.l.length;i++){
          if(this.l[i].b){
            this.l[i].b.hideIt()
            this.l[i].b = null
            for(j=0;j<this.l[i].m.length;j++){
              this.m[this.l[i].m[j]].b = null;
            }
          }
        }
        this.isover=0
      }
      this.deftarget.location.href=lnk 
    }
    else if(targ=="_blank") window.open(lnk)
    else if(targ=="_top" || targ=="window") top.location.href=lnk
    else if(top[targ]) top[targ].location.href=lnk
    else if(parent[targ]) parent[targ].location.href=lnk
  }else return false
}

/******************************************
CM_ADD-IN - hideselectboxes (last updated: 11/13/02)
IE5+ and NS6+ only - ignores the other browsers

Because of the selectbox bug in the browsers that makes 
selectboxes have the highest z-index whatever you do 
this script will check for selectboxes that interfear with
your menu items and then hide them. 

Just add this code to the coolmenus js file
or link the cm_addins.js file to your page as well.
*****************************************/
if(bw.dom&&!bw.op){
  makeCM.prototype.sel=0
  makeCM.prototype.onshow+=";this.hideselectboxes(pm,pm.subx,pm.suby,maxw,maxh,pm.lev)"
  makeCM.prototype.hideselectboxes=function(pm,x,y,w,h,l){
    var selx,sely,selw,selh,i
    if(!this.sel){
      this.sel=this.doc.getElementsByTagName("SELECT")
		  this.sel.level=0
    }
    var sel=this.sel
    for(i=0;i<sel.length;i++){
			selx=0; sely=0; var selp;
			if(sel[i].offsetParent){selp=sel[i]; while(selp.offsetParent){selp=selp.offsetParent; selx+=selp.offsetLeft; sely+=selp.offsetTop;}}
			selx+=sel[i].offsetLeft; sely+=sel[i].offsetTop
			selw=sel[i].offsetWidth; selh=sel[i].offsetHeight			
			if(selx+selw>x && selx<x+w && sely+selh>y && sely<y+h){
				if(sel[i].style.visibility!="hidden"){sel[i].level=l; sel[i].style.visibility="hidden"; if(pm){ if(!pm.mout) pm.mout=""; pm.mout+=this.name+".sel["+i+"].style.visibility='visible';"}}
      }else if(l<=sel[i].level && !(pm&&l==0)) sel[i].style.visibility="visible"
    }
  }
}

/*  Copyright Mihai Bazon, 2002  |  http://students.infoiasi.ro/~mishoo
 * ---------------------------------------------------------------------
 *
 * The DHTML Calendar, version 0.9.2 "The art of date selection"
 *
 * Details and latest version at:
 * http://students.infoiasi.ro/~mishoo/site/calendar.epl
 *
 * Feel free to use this script under the terms of the GNU Lesser General
 * Public License, as long as you do not remove or alter this notice.
 */
// $Id: calendar.js,v 1.2 2003/03/11 10:38:06 mishoo Exp $
//-----------------------------------------------------------------------------
//	09.10.2006 - plam  - dais software
//	an extra IFRAME is placed behind the main DIV to hide the covered part of windowed controls ( eg SELECT )
//	so they are no more with visibility=false 
//	changelog:
//		added this.shim
//		changed this.hideShowCovered
//	More information is available in this article:
//		http://dotnetjunkies.com/weblog/jking/archive/2003/07/21/488.aspx
//-----------------------------------------------------------------------------

/** The Calendar object constructor. */
Calendar = function (mondayFirst, dateStr, onSelected, onClose) {
	// member variables
	this.activeDiv = null;
	this.currentDateEl = null;
	this.checkDisabled = null;
	this.timeout = null;
	this.onSelected = onSelected || null;
	this.onClose = onClose || null;
	this.dragging = false;
	this.hidden = false;
	this.minYear = 1970;
	this.maxYear = 2050;
	this.dateFormat = Calendar._TT["DEF_DATE_FORMAT"];
	this.ttDateFormat = Calendar._TT["TT_DATE_FORMAT"];
	this.isPopup = true;
	this.weekNumbers = false;
	this.mondayFirst = mondayFirst;
	this.dateStr = dateStr;
	this.ar_days = null;
	// HTML elements
	this.table = null;
	this.shim = null
	this.element = null;
	this.tbody = null;
	this.firstdayname = null;
	// Combo boxes
	this.monthsCombo = null;
	this.yearsCombo = null;
	this.hilitedMonth = null;
	this.activeMonth = null;
	this.hilitedYear = null;
	this.activeYear = null;

	// one-time initializations
	if (!Calendar._DN3) {
		// table of short day names
		var ar = new Array();
		for (var i = 8; i > 0;) {
			ar[--i] = Calendar._DN[i].substr(0, 3);
		}
		Calendar._DN3 = ar;
		// table of short month names
		ar = new Array();
		for (var i = 12; i > 0;) {
			ar[--i] = Calendar._MN[i].substr(0, 3);
		}
		Calendar._MN3 = ar;
	}
};

// ** constants

/// "static", needed for event handlers.
Calendar._C = null;

/// detect a special case of "web browser"
Calendar.is_ie = ( (navigator.userAgent.toLowerCase().indexOf("msie") != -1) &&
		   (navigator.userAgent.toLowerCase().indexOf("opera") == -1) );

// short day names array (initialized at first constructor call)
Calendar._DN3 = null;

// short month names array (initialized at first constructor call)
Calendar._MN3 = null;

// BEGIN: UTILITY FUNCTIONS; beware that these might be moved into a separate
//        library, at some point.

Calendar.getAbsolutePos = function(el) {
	var r = { x: el.offsetLeft, y: el.offsetTop };
	if (el.offsetParent) {
		var tmp = Calendar.getAbsolutePos(el.offsetParent);
		r.x += tmp.x;
		r.y += tmp.y;
	}
	return r;
};

Calendar.isRelated = function (el, evt) {
	var related = evt.relatedTarget;
	if (!related) {
		var type = evt.type;
		if (type == "mouseover") {
			related = evt.fromElement;
		} else if (type == "mouseout") {
			related = evt.toElement;
		}
	}
	while (related) {
		if (related == el) {
			return true;
		}
		related = related.parentNode;
	}
	return false;
};

Calendar.removeClass = function(el, className) {
	if (!(el && el.className)) {
		return;
	}
	var cls = el.className.split(" ");
	var ar = new Array();
	for (var i = cls.length; i > 0;) {
		if (cls[--i] != className) {
			ar[ar.length] = cls[i];
		}
	}
	el.className = ar.join(" ");
};

Calendar.addClass = function(el, className) {
	Calendar.removeClass(el, className);
	el.className += " " + className;
};

Calendar.getElement = function(ev) {
	if (Calendar.is_ie) {
		return window.event.srcElement;
	} else {
		return ev.currentTarget;
	}
};

Calendar.getTargetElement = function(ev) {
	if (Calendar.is_ie) {
		return window.event.srcElement;
	} else {
		return ev.target;
	}
};

Calendar.stopEvent = function(ev) {
	if (Calendar.is_ie) {
		window.event.cancelBubble = true;
		window.event.returnValue = false;
	} else {
		ev.preventDefault();
		ev.stopPropagation();
	}
};

Calendar.addEvent = function(el, evname, func) {
	if (Calendar.is_ie) {
		el.attachEvent("on" + evname, func);
	} else {
		el.addEventListener(evname, func, true);
	}
};

Calendar.removeEvent = function(el, evname, func) {
	if (Calendar.is_ie) {
		el.detachEvent("on" + evname, func);
	} else {
		el.removeEventListener(evname, func, true);
	}
};

Calendar.createElement = function(type, parent) {
	var el = null;
	if (document.createElementNS) {
		// use the XHTML namespace; IE won't normally get here unless
		// _they_ "fix" the DOM2 implementation.
		el = document.createElementNS("http://www.w3.org/1999/xhtml", type);
	} else {
		el = document.createElement(type);
	}
	if (typeof parent != "undefined") {
		parent.appendChild(el);
	}
	return el;
};

// END: UTILITY FUNCTIONS

// BEGIN: CALENDAR STATIC FUNCTIONS

/** Internal -- adds a set of events to make some element behave like a button. */
Calendar._add_evs = function(el) {
	with (Calendar) {
		addEvent(el, "mouseover", dayMouseOver);
		addEvent(el, "mousedown", dayMouseDown);
		addEvent(el, "mouseout", dayMouseOut);
		if (is_ie) {
			addEvent(el, "dblclick", dayMouseDblClick);
			el.setAttribute("unselectable", true);
		}
	}
};

Calendar.findMonth = function(el) {
	if (typeof el.month != "undefined") {
		return el;
	} else if (typeof el.parentNode.month != "undefined") {
		return el.parentNode;
	}
	return null;
};

Calendar.findYear = function(el) {
	if (typeof el.year != "undefined") {
		return el;
	} else if (typeof el.parentNode.year != "undefined") {
		return el.parentNode;
	}
	return null;
};

Calendar.showMonthsCombo = function () {
	var cal = Calendar._C;
	if (!cal) {
		return false;
	}
	var cal = cal;
	var cd = cal.activeDiv;
	var mc = cal.monthsCombo;
	if (cal.hilitedMonth) {
		Calendar.removeClass(cal.hilitedMonth, "hilite");
	}
	if (cal.activeMonth) {
		Calendar.removeClass(cal.activeMonth, "active");
	}
	var mon = cal.monthsCombo.getElementsByTagName("div")[cal.date.getMonth()];
	Calendar.addClass(mon, "active");
	cal.activeMonth = mon;
	mc.style.left = cd.offsetLeft + "px";
	mc.style.top = (cd.offsetTop + cd.offsetHeight) + "px";
	mc.style.display = "block";
};

Calendar.showYearsCombo = function (fwd) {
	var cal = Calendar._C;
	if (!cal) {
		return false;
	}
	var cal = cal;
	var cd = cal.activeDiv;
	var yc = cal.yearsCombo;
	if (cal.hilitedYear) {
		Calendar.removeClass(cal.hilitedYear, "hilite");
	}
	if (cal.activeYear) {
		Calendar.removeClass(cal.activeYear, "active");
	}
	cal.activeYear = null;
	var Y = cal.date.getFullYear() + (fwd ? 1 : -1);
	var yr = yc.firstChild;
	var show = false;
	for (var i = 12; i > 0; --i) {
		if (Y >= cal.minYear && Y <= cal.maxYear) {
			yr.firstChild.data = Y;
			yr.year = Y;
			yr.style.display = "block";
			show = true;
		} else {
			yr.style.display = "none";
		}
		yr = yr.nextSibling;
		Y += fwd ? 2 : -2;
	}
	if (show) {
		yc.style.left = cd.offsetLeft + "px";
		yc.style.top = (cd.offsetTop + cd.offsetHeight) + "px";
		yc.style.display = "block";
	}
};

// event handlers

Calendar.tableMouseUp = function(ev) {
	var cal = Calendar._C;
	if (!cal) {
		return false;
	}
	if (cal.timeout) {
		clearTimeout(cal.timeout);
	}
	var el = cal.activeDiv;
	if (!el) {
		return false;
	}
	var target = Calendar.getTargetElement(ev);
	Calendar.removeClass(el, "active");
	if (target == el || target.parentNode == el) {
		Calendar.cellClick(el);
	}
	var mon = Calendar.findMonth(target);
	var date = null;
	if (mon) {
		date = new Date(cal.date);
		if (mon.month != date.getMonth()) {
			date.setMonth(mon.month);
			cal.setDate(date);
		}
	} else {
		var year = Calendar.findYear(target);
		if (year) {
			date = new Date(cal.date);
			if (year.year != date.getFullYear()) {
				date.setFullYear(year.year);
				cal.setDate(date);
			}
		}
	}
	with (Calendar) {
		removeEvent(document, "mouseup", tableMouseUp);
		removeEvent(document, "mouseover", tableMouseOver);
		removeEvent(document, "mousemove", tableMouseOver);
		cal._hideCombos();
		stopEvent(ev);
		_C = null;
	}
};

Calendar.tableMouseOver = function (ev) {
	var cal = Calendar._C;
	if (!cal) {
		return;
	}
	var el = cal.activeDiv;
	var target = Calendar.getTargetElement(ev);
	if (target == el || target.parentNode == el) {
		Calendar.addClass(el, "hilite active");
		Calendar.addClass(el.parentNode, "rowhilite");
	} else {
		Calendar.removeClass(el, "active");
		Calendar.removeClass(el, "hilite");
		Calendar.removeClass(el.parentNode, "rowhilite");
	}
	var mon = Calendar.findMonth(target);
	if (mon) {
		if (mon.month != cal.date.getMonth()) {
			if (cal.hilitedMonth) {
				Calendar.removeClass(cal.hilitedMonth, "hilite");
			}
			Calendar.addClass(mon, "hilite");
			cal.hilitedMonth = mon;
		} else if (cal.hilitedMonth) {
			Calendar.removeClass(cal.hilitedMonth, "hilite");
		}
	} else {
		var year = Calendar.findYear(target);
		if (year) {
			if (year.year != cal.date.getFullYear()) {
				if (cal.hilitedYear) {
					Calendar.removeClass(cal.hilitedYear, "hilite");
				}
				Calendar.addClass(year, "hilite");
				cal.hilitedYear = year;
			} else if (cal.hilitedYear) {
				Calendar.removeClass(cal.hilitedYear, "hilite");
			}
		}
	}
	Calendar.stopEvent(ev);
};

Calendar.tableMouseDown = function (ev) {
	if (Calendar.getTargetElement(ev) == Calendar.getElement(ev)) {
		Calendar.stopEvent(ev);
	}
};

Calendar.calDragIt = function (ev) {
	var cal = Calendar._C;
	if (!(cal && cal.dragging)) {
		return false;
	}
	var posX;
	var posY;
	if (Calendar.is_ie) {
		posY = window.event.clientY + document.body.scrollTop;
		posX = window.event.clientX + document.body.scrollLeft;
	} else {
		posX = ev.pageX;
		posY = ev.pageY;
	}
	cal.hideShowCovered();
	var st = cal.element.style;
	st.left = (posX - cal.xOffs) + "px";
	st.top = (posY - cal.yOffs) + "px";
	Calendar.stopEvent(ev);
};

Calendar.calDragEnd = function (ev) {
	var cal = Calendar._C;
	if (!cal) {
		return false;
	}
	cal.dragging = false;
	with (Calendar) {
		removeEvent(document, "mousemove", calDragIt);
		removeEvent(document, "mouseover", stopEvent);
		removeEvent(document, "mouseup", calDragEnd);
		tableMouseUp(ev);
	}
	cal.hideShowCovered();
};

Calendar.dayMouseDown = function(ev) {
	var el = Calendar.getElement(ev);
	if (el.disabled) {
		return false;
	}
	var cal = el.calendar;
	cal.activeDiv = el;
	Calendar._C = cal;
	if (el.navtype != 300) with (Calendar) {
		addClass(el, "hilite active");
		addEvent(document, "mouseover", tableMouseOver);
		addEvent(document, "mousemove", tableMouseOver);
		addEvent(document, "mouseup", tableMouseUp);
	} else if (cal.isPopup) {
		cal._dragStart(ev);
	}
	Calendar.stopEvent(ev);
	if (el.navtype == -1 || el.navtype == 1) {
		cal.timeout = setTimeout("Calendar.showMonthsCombo()", 250);
	} else if (el.navtype == -2 || el.navtype == 2) {
		cal.timeout = setTimeout((el.navtype > 0) ? "Calendar.showYearsCombo(true)" : "Calendar.showYearsCombo(false)", 250);
	} else {
		cal.timeout = null;
	}
};

Calendar.dayMouseDblClick = function(ev) {
	Calendar.cellClick(Calendar.getElement(ev));
	if (Calendar.is_ie) {
		document.selection.empty();
	}
};

Calendar.dayMouseOver = function(ev) {
	var el = Calendar.getElement(ev);
	if (Calendar.isRelated(el, ev) || Calendar._C || el.disabled) {
		return false;
	}
	if (el.ttip) {
		if (el.ttip.substr(0, 1) == "_") {
			var date = null;
			with (el.calendar.date) {
				date = new Date(getFullYear(), getMonth(), el.caldate);
			}
			el.ttip = date.print(el.calendar.ttDateFormat) + el.ttip.substr(1);
		}
		el.calendar.tooltips.firstChild.data = el.ttip;
	}
	if (el.navtype != 300) {
		Calendar.addClass(el, "hilite");
		if (el.caldate) {
			Calendar.addClass(el.parentNode, "rowhilite");
		}
	}
	Calendar.stopEvent(ev);
};

Calendar.dayMouseOut = function(ev) {
	with (Calendar) {
		var el = getElement(ev);
		if (isRelated(el, ev) || _C || el.disabled) {
			return false;
		}
		removeClass(el, "hilite");
		if (el.caldate) {
			removeClass(el.parentNode, "rowhilite");
		}
		el.calendar.tooltips.firstChild.data = _TT["SEL_DATE"];
		stopEvent(ev);
	}
};

/**
 *  A generic "click" handler :) handles all types of buttons defined in this
 *  calendar.
 */
Calendar.cellClick = function(el) {
	var cal = el.calendar;
	var closing = false;
	var newdate = false;
	var date = null;
	if (typeof el.navtype == "undefined") {
		Calendar.removeClass(cal.currentDateEl, "selected");
		Calendar.addClass(el, "selected");
		closing = (cal.currentDateEl == el);
		if (!closing) {
			cal.currentDateEl = el;
		}
		cal.date.setDate(el.caldate);
		date = cal.date;
		newdate = true;
	} else {
		if (el.navtype == 200) {
			Calendar.removeClass(el, "hilite");
			cal.callCloseHandler();
			return;
		}
		date = (el.navtype == 0) ? new Date() : new Date(cal.date);
		var year = date.getFullYear();
		var mon = date.getMonth();
		function setMonth(m) {
			var day = date.getDate();
			var max = date.getMonthDays(m);
			if (day > max) {
				date.setDate(max);
			}
			date.setMonth(m);
		};
		switch (el.navtype) {
		    case -2:
			if (year > cal.minYear) {
				date.setFullYear(year - 1);
			}
			break;
		    case -1:
			if (mon > 0) {
				setMonth(mon - 1);
			} else if (year-- > cal.minYear) {
				date.setFullYear(year);
				setMonth(11);
			}
			break;
		    case 1:
			if (mon < 11) {
				setMonth(mon + 1);
			} else if (year < cal.maxYear) {
				date.setFullYear(year + 1);
				setMonth(0);
			}
			break;
		    case 2:
			if (year < cal.maxYear) {
				date.setFullYear(year + 1);
			}
			break;
		    case 100:
			cal.setMondayFirst(!cal.mondayFirst);
			return;
		}
		if (!date.equalsTo(cal.date)) {
			cal.setDate(date);
			newdate = el.navtype == 0;
		}
	}
	if (newdate) {
		cal.callHandler();
	}
	if (closing) {
		Calendar.removeClass(el, "hilite");
		cal.callCloseHandler();
	}
};

// END: CALENDAR STATIC FUNCTIONS

// BEGIN: CALENDAR OBJECT FUNCTIONS

/**
 *  This function creates the calendar inside the given parent.  If _par is
 *  null than it creates a popup calendar inside the BODY element.  If _par is
 *  an element, be it BODY, then it creates a non-popup calendar (still
 *  hidden).  Some properties need to be set before calling this function.
 */
Calendar.prototype.create = function (_par) {
	var parent = null;
	if (! _par) {
		// default parent is the document body, in which case we create
		// a popup calendar.
		parent = document.getElementsByTagName("body")[0];
		this.isPopup = true;
	} else {
		parent = _par;
		this.isPopup = false;
	}
	this.date = this.dateStr ? new Date(this.dateStr) : new Date();

	var table = Calendar.createElement("table");
	this.table = table;
	table.cellSpacing = 0;
	table.cellPadding = 0;
	table.calendar = this;
	Calendar.addEvent(table, "mousedown", Calendar.tableMouseDown);

	this.shim = Calendar.createElement("iframe");
	this.shim.src="javascript:false";
	this.shim.style.position = "absolute";
	document.body.appendChild(this.shim);
                                      
	var div = Calendar.createElement("div");
	this.element = div;
	div.className = "calendar";
	if (this.isPopup) {
		div.style.position = "absolute";
		div.style.display = "none";
	}
	div.appendChild(table);

	var thead = Calendar.createElement("thead", table);
	var cell = null;
	var row = null;

	var cal = this;
	var hh = function (text, cs, navtype) {
		cell = Calendar.createElement("td", row);
		cell.colSpan = cs;
		cell.className = "button";
		Calendar._add_evs(cell);
		cell.calendar = cal;
		cell.navtype = navtype;
		if (text.substr(0, 1) != "&") {
			cell.appendChild(document.createTextNode(text));
		}
		else {
			// FIXME: dirty hack for entities
			cell.innerHTML = text;
		}
		return cell;
	};

	row = Calendar.createElement("tr", thead);
	var title_length = 7;
	(this.isPopup) && --title_length;
	(this.weekNumbers) && ++title_length;

	//hh("-", 1, 100)//.ttip = Calendar._TT["TOGGLE"];
	this.title = hh("", title_length, 300);
	this.title.className = "title";
	if (this.isPopup) {
		this.title.ttip = Calendar._TT["DRAG_TO_MOVE"];
		this.title.style.cursor = "move";
		hh("&#x00d7;", 1, 200).ttip = Calendar._TT["CLOSE"];
	}

	row = Calendar.createElement("tr", thead);
	row.className = "headrow";

	this._nav_py = hh("&#x00ab;", 1, -2);
	this._nav_py.ttip = Calendar._TT["PREV_YEAR"];

	this._nav_pm = hh("&#x2039;", 1, -1);
	this._nav_pm.ttip = Calendar._TT["PREV_MONTH"];

	this._nav_now = hh(Calendar._TT["TODAY"], this.weekNumbers ? 4 : 3, 0);
	this._nav_now.ttip = Calendar._TT["GO_TODAY"];

	this._nav_nm = hh("&#x203a;", 1, 1);
	this._nav_nm.ttip = Calendar._TT["NEXT_MONTH"];

	this._nav_ny = hh("&#x00bb;", 1, 2);
	this._nav_ny.ttip = Calendar._TT["NEXT_YEAR"]

	// day names
	row = Calendar.createElement("tr", thead);
	row.className = "daynames";
	if (this.weekNumbers) {
		cell = Calendar.createElement("td", row);
		cell.className = "name wn";
		cell.appendChild(document.createTextNode(Calendar._TT["WK"]));
	}
	for (var i = 7; i > 0; --i) {
		cell = Calendar.createElement("td", row);
		cell.appendChild(document.createTextNode(""));
		if (!i) {
			cell.navtype = 100;
			cell.calendar = this;
			Calendar._add_evs(cell);
		}
	}
	this.firstdayname = (this.weekNumbers) ? row.firstChild.nextSibling : row.firstChild;
	this._displayWeekdays();

	var tbody = Calendar.createElement("tbody", table);
	this.tbody = tbody;

	for (i = 6; i > 0; --i) {
		row = Calendar.createElement("tr", tbody);
		if (this.weekNumbers) {
			cell = Calendar.createElement("td", row);
			cell.appendChild(document.createTextNode(""));
		}
		for (var j = 7; j > 0; --j) {
			cell = Calendar.createElement("td", row);
			cell.appendChild(document.createTextNode(""));
			cell.calendar = this;
			Calendar._add_evs(cell);
		}
	}

	var tfoot = Calendar.createElement("tfoot", table);

	row = Calendar.createElement("tr", tfoot);
	row.className = "footrow";

	cell = hh(Calendar._TT["SEL_DATE"], this.weekNumbers ? 8 : 7, 300);
	cell.className = "ttip";
	if (this.isPopup) {
		cell.ttip = Calendar._TT["DRAG_TO_MOVE"];
		cell.style.cursor = "move";
	}
	this.tooltips = cell;

	div = Calendar.createElement("div", this.element);
	this.monthsCombo = div;
	div.className = "combo";
	for (i = 0; i < Calendar._MN.length; ++i) {
		var mn = Calendar.createElement("div");
		mn.className = "label";
		mn.month = i;
		mn.appendChild(document.createTextNode(Calendar._MN3[i]));
		div.appendChild(mn);
	}

	div = Calendar.createElement("div", this.element);
	this.yearsCombo = div;
	div.className = "combo";
	for (i = 12; i > 0; --i) {
		var yr = Calendar.createElement("div");
		yr.className = "label";
		yr.appendChild(document.createTextNode(""));
		div.appendChild(yr);
	}

	this._init(this.mondayFirst, this.date);
	parent.appendChild(this.element);
};

/** keyboard navigation, only for popup calendars */
Calendar._keyEvent = function(ev) {
	if (!window.calendar) {
		return false;
	}
	(Calendar.is_ie) && (ev = window.event);
	var cal = window.calendar;
	var act = (Calendar.is_ie || ev.type == "keypress");
	if (ev.ctrlKey) {
		switch (ev.keyCode) {
		    case 37: // KEY left
			act && Calendar.cellClick(cal._nav_pm);
			break;
		    case 38: // KEY up
			act && Calendar.cellClick(cal._nav_py);
			break;
		    case 39: // KEY right
			act && Calendar.cellClick(cal._nav_nm);
			break;
		    case 40: // KEY down
			act && Calendar.cellClick(cal._nav_ny);
			break;
		    default:
			return false;
		}
	} else switch (ev.keyCode) {
	    case 32: // KEY space (now)
		Calendar.cellClick(cal._nav_now);
		break;
	    case 27: // KEY esc
		act && cal.hide();
		break;
	    case 37: // KEY left
	    case 38: // KEY up
	    case 39: // KEY right
	    case 40: // KEY down
		if (act) {
			var date = cal.date.getDate() - 1;
			var el = cal.currentDateEl;
			var ne = null;
			var prev = (ev.keyCode == 37) || (ev.keyCode == 38);
			switch (ev.keyCode) {
			    case 37: // KEY left
				(--date >= 0) && (ne = cal.ar_days[date]);
				break;
			    case 38: // KEY up
				date -= 7;
				(date >= 0) && (ne = cal.ar_days[date]);
				break;
			    case 39: // KEY right
				(++date < cal.ar_days.length) && (ne = cal.ar_days[date]);
				break;
			    case 40: // KEY down
				date += 7;
				(date < cal.ar_days.length) && (ne = cal.ar_days[date]);
				break;
			}
			if (!ne) {
				if (prev) {
					Calendar.cellClick(cal._nav_pm);
				} else {
					Calendar.cellClick(cal._nav_nm);
				}
				date = (prev) ? cal.date.getMonthDays() : 1;
				el = cal.currentDateEl;
				ne = cal.ar_days[date - 1];
			}
			Calendar.removeClass(el, "selected");
			Calendar.addClass(ne, "selected");
			cal.date.setDate(ne.caldate);
			cal.currentDateEl = ne;
		}
		break;
	    case 13: // KEY enter
		if (act) {
			cal.callHandler();
			cal.hide();
		}
		break;
	    default:
		return false;
	}
	Calendar.stopEvent(ev);
};

/**
 *  (RE)Initializes the calendar to the given date and style (if mondayFirst is
 *  true it makes Monday the first day of week, otherwise the weeks start on
 *  Sunday.
 */
Calendar.prototype._init = function (mondayFirst, date) {
	var today = new Date();
	var year = date.getFullYear();
	if (year < this.minYear) {
		year = this.minYear;
		date.setFullYear(year);
	} else if (year > this.maxYear) {
		year = this.maxYear;
		date.setFullYear(year);
	}
	this.mondayFirst = mondayFirst;
	this.date = new Date(date);
	var month = date.getMonth();
	var mday = date.getDate();
	var no_days = date.getMonthDays();
	date.setDate(1);
	var wday = date.getDay();
	var MON = mondayFirst ? 1 : 0;
	var SAT = mondayFirst ? 5 : 6;
	var SUN = mondayFirst ? 6 : 0;
	if (mondayFirst) {
		wday = (wday > 0) ? (wday - 1) : 6;
	}
	var iday = 1;
	var row = this.tbody.firstChild;
	var MN = Calendar._MN3[month];
	var hasToday = ((today.getFullYear() == year) && (today.getMonth() == month));
	var todayDate = today.getDate();
	var week_number = date.getWeekNumber();
	var ar_days = new Array();
	for (var i = 0; i < 6; ++i) {
		if (iday > no_days) {
			row.className = "emptyrow";
			row = row.nextSibling;
			continue;
		}
		var cell = row.firstChild;
		if (this.weekNumbers) {
			cell.className = "day wn";
			cell.firstChild.data = week_number;
			cell = cell.nextSibling;
		}
		++week_number;
		row.className = "daysrow";
		for (var j = 0; j < 7; ++j) {
			cell.className = "day";
			if ((!i && j < wday) || iday > no_days) {
				// cell.className = "emptycell";
				cell.innerHTML = "&nbsp;";
				cell.disabled = true;
				cell = cell.nextSibling;
				continue;
			}
			cell.disabled = false;
			cell.firstChild.data = iday;
			if (typeof this.checkDisabled == "function") {
				date.setDate(iday);
				if (this.checkDisabled(date)) {
					cell.className += " disabled";
					cell.disabled = true;
				}
			}
			if (!cell.disabled) {
				ar_days[ar_days.length] = cell;
				cell.caldate = iday;
				cell.ttip = "_";
				if (iday == mday) {
					cell.className += " selected";
					this.currentDateEl = cell;
				}
				if (hasToday && (iday == todayDate)) {
					cell.className += " today";
					cell.ttip += Calendar._TT["PART_TODAY"];
				}
				if (wday == SAT || wday == SUN) {
					cell.className += " weekend";
				}
			}
			++iday;
			((++wday) ^ 7) || (wday = 0);
			cell = cell.nextSibling;
		}
		row = row.nextSibling;
	}
	this.ar_days = ar_days;
	this.title.firstChild.data = Calendar._MN[month] + ", " + year;
	// PROFILE
	// this.tooltips.firstChild.data = "Generated in " + ((new Date()) - today) + " ms";
};

/**
 *  Calls _init function above for going to a certain date (but only if the
 *  date is different than the currently selected one).
 */
Calendar.prototype.setDate = function (date) {
	if (!date.equalsTo(this.date)) {
		this._init(this.mondayFirst, date);
	}
};

/** Modifies the "mondayFirst" parameter (EU/US style). */
Calendar.prototype.setMondayFirst = function (mondayFirst) {
	this._init(mondayFirst, this.date);
	this._displayWeekdays();
};

/**
 *  Allows customization of what dates are enabled.  The "unaryFunction"
 *  parameter must be a function object that receives the date (as a JS Date
 *  object) and returns a boolean value.  If the returned value is true then
 *  the passed date will be marked as disabled.
 */
Calendar.prototype.setDisabledHandler = function (unaryFunction) {
	this.checkDisabled = unaryFunction;
};

/** Customization of allowed year range for the calendar. */
Calendar.prototype.setRange = function (a, z) {
	this.minYear = a;
	this.maxYear = z;
};

/** Calls the first user handler (selectedHandler). */
Calendar.prototype.callHandler = function () {
	if (this.onSelected) {
		this.onSelected(this, this.date.print(this.dateFormat));
	}
};

/** Calls the second user handler (closeHandler). */
Calendar.prototype.callCloseHandler = function () {
	if (this.onClose) {
		this.onClose(this);
	}
	this.hideShowCovered();
};

/** Removes the calendar object from the DOM tree and destroys it. */
Calendar.prototype.destroy = function () {
	var el = this.element.parentNode;
	el.removeChild(this.element);
	Calendar._C = null;
	delete el;
};

/**
 *  Moves the calendar element to a different section in the DOM tree (changes
 *  its parent).
 */
Calendar.prototype.reparent = function (new_parent) {
	var el = this.element;
	el.parentNode.removeChild(el);
	new_parent.appendChild(el);
};

// This gets called when the user presses a mouse button anywhere in the
// document, if the calendar is shown.  If the click was outside the open
// calendar this function closes it.
Calendar._checkCalendar = function(ev) {
	if (!window.calendar) {
		return false;
	}
	var el = Calendar.is_ie ? Calendar.getElement(ev) : Calendar.getTargetElement(ev);
	for (; el != null && el != calendar.element; el = el.parentNode);
	if (el == null) {
		// calls closeHandler which should hide the calendar.
		window.calendar.callCloseHandler();
		Calendar.stopEvent(ev);
	}
};

/** Shows the calendar. */
Calendar.prototype.show = function () {
	var rows = this.table.getElementsByTagName("tr");
	for (var i = rows.length; i > 0;) {
		var row = rows[--i];
		Calendar.removeClass(row, "rowhilite");
		var cells = row.getElementsByTagName("td");
		for (var j = cells.length; j > 0;) {
			var cell = cells[--j];
			Calendar.removeClass(cell, "hilite");
			Calendar.removeClass(cell, "active");
		}
	}
	this.shim.style.display = "block";
	this.element.style.display = "block";
	this.hidden = false;
	if (this.isPopup) {
		window.calendar = this;
		Calendar.addEvent(document, "keydown", Calendar._keyEvent);
		Calendar.addEvent(document, "keypress", Calendar._keyEvent);
		Calendar.addEvent(document, "mousedown", Calendar._checkCalendar);
	}
	this.hideShowCovered();
};

/**
 *  Hides the calendar.  Also removes any "hilite" from the class of any TD
 *  element.
 */
Calendar.prototype.hide = function () {
	if (this.isPopup) {
		Calendar.removeEvent(document, "keydown", Calendar._keyEvent);
		Calendar.removeEvent(document, "keypress", Calendar._keyEvent);
		Calendar.removeEvent(document, "mousedown", Calendar._checkCalendar);
	}
	this.shim.style.display = "none";
	this.element.style.display = "none";
	this.hidden = true;
	this.hideShowCovered();
};

/**
 *  Shows the calendar at a given absolute position (beware that, depending on
 *  the calendar element style -- position property -- this might be relative
 *  to the parent's containing rectangle).
 */
Calendar.prototype.showAt = function (x, y) {
	var s = this.element.style;
	s.left = x + "px";
	s.top = y + "px";
	this.show();
};

/** Shows the calendar near a given element. */
Calendar.prototype.showAtElement = function (el) {
	var p = Calendar.getAbsolutePos(el);
	this.showAt(p.x, p.y + el.offsetHeight);
};

/** Customizes the date format. */
Calendar.prototype.setDateFormat = function (str) {
	this.dateFormat = str;
};

/** Customizes the tooltip date format. */
Calendar.prototype.setTtDateFormat = function (str) {
	this.ttDateFormat = str;
};

/**
 *  Tries to identify the date represented in a string.  If successful it also
 *  calls this.setDate which moves the calendar to the given date.
 */
Calendar.prototype.parseDate = function (str, fmt) {
	var y = 0;
	var m = -1;
	var d = 0;
	var a = str.split(/\W+/);
	if (!fmt) {
		fmt = this.dateFormat;
	}
	var b = fmt.split(/\W+/);
	var i = 0, j = 0;
	for (i = 0; i < a.length; ++i) {
		if (b[i] == "D" || b[i] == "DD") {
			continue;
		}
		if (b[i] == "d" || b[i] == "dd") {
			d = parseInt(a[i], 10);
		}
		if (b[i] == "m" || b[i] == "mm") {
			m = parseInt(a[i], 10) - 1;
		}
		if (b[i] == "y") {
			y = parseInt(a[i], 10);
		}
		if (b[i] == "yy") {
			y = parseInt(a[i], 10) + 1900;
		}
		if (b[i] == "M" || b[i] == "MM") {
			for (j = 0; j < 12; ++j) {
				if (Calendar._MN[j].substr(0, a[i].length).toLowerCase() == a[i].toLowerCase()) { m = j; break; }
			}
		}
	}
	if (y != 0 && m != -1 && d != 0) {
		this.setDate(new Date(y, m, d));
		return;
	}
	y = 0; m = -1; d = 0;
	for (i = 0; i < a.length; ++i) {
		if (a[i].search(/[a-zA-Z]+/) != -1) {
			var t = -1;
			for (j = 0; j < 12; ++j) {
				if (Calendar._MN[j].substr(0, a[i].length).toLowerCase() == a[i].toLowerCase()) { t = j; break; }
			}
			if (t != -1) {
				if (m != -1) {
					d = m+1;
				}
				m = t;
			}
		} else if (parseInt(a[i], 10) <= 12 && m == -1) {
			m = a[i]-1;
		} else if (parseInt(a[i], 10) > 31 && y == 0) {
			y = a[i];
		} else if (d == 0) {
			d = a[i];
		}
	}
	if (y == 0) {
		var today = new Date();
		y = today.getFullYear();
	}
	if (m != -1 && d != 0) {
		this.setDate(new Date(y, m, d));
	}
	//tpetmezov 20090824 : if could not parse date set the current date 
	else
	{
	    this.setDate(new Date());
	}
};

Calendar.prototype.hideShowCovered = function () {
	var el = this.element;
	
	var p = Calendar.getAbsolutePos(el);
	var EX1 = p.x;
	var EX2 = el.offsetWidth + EX1;
	var EY1 = p.y;
	var EY2 = el.offsetHeight + EY1;
	
	var st = this.shim.style;
	st.left   = EX1 + "px";
	st.top    = EY1 + "px";
	st.width  = (EX2-EX1) + "px";
	st.height = (EY2-EY1) + "px";
};

/** Internal function; it displays the bar with the names of the weekday. */
Calendar.prototype._displayWeekdays = function () {
	var MON = this.mondayFirst ? 0 : 1;
	var SUN = this.mondayFirst ? 6 : 0;
	var SAT = this.mondayFirst ? 5 : 6;
	var cell = this.firstdayname;
	for (var i = 0; i < 7; ++i) {
		cell.className = "day name";
		if (!i) {
			cell.ttip = this.mondayFirst ? Calendar._TT["SUN_FIRST"] : Calendar._TT["MON_FIRST"];
			cell.navtype = 100;
			cell.calendar = this;
			Calendar._add_evs(cell);
		}
		if (i == SUN || i == SAT) {
			Calendar.addClass(cell, "weekend");
		}
		cell.firstChild.data = Calendar._DN3[i + 1 - MON];
		cell = cell.nextSibling;
	}
};

/** Internal function.  Hides all combo boxes that might be displayed. */
Calendar.prototype._hideCombos = function () {
	this.monthsCombo.style.display = "none";
	this.yearsCombo.style.display = "none";
};

/** Internal function.  Starts dragging the element. */
Calendar.prototype._dragStart = function (ev) {
	if (this.dragging) {
		return;
	}
	this.dragging = true;
	var posX;
	var posY;
	if (Calendar.is_ie) {
		posY = window.event.clientY + document.body.scrollTop;
		posX = window.event.clientX + document.body.scrollLeft;
	} else {
		posY = ev.clientY + window.scrollY;
		posX = ev.clientX + window.scrollX;
	}
	var st = this.element.style;
	this.xOffs = posX - parseInt(st.left);
	this.yOffs = posY - parseInt(st.top);
	with (Calendar) {
		addEvent(document, "mousemove", calDragIt);
		addEvent(document, "mouseover", stopEvent);
		addEvent(document, "mouseup", calDragEnd);
	}
};

// BEGIN: DATE OBJECT PATCHES

/** Adds the number of days array to the Date object. */
Date._MD = new Array(31,28,31,30,31,30,31,31,30,31,30,31);

/** Constants used for time computations */
Date.SECOND = 1000 /* milliseconds */;
Date.MINUTE = 60 * Date.SECOND;
Date.HOUR   = 60 * Date.MINUTE;
Date.DAY    = 24 * Date.HOUR;
Date.WEEK   =  7 * Date.DAY;

/** Returns the number of days in the current month */
Date.prototype.getMonthDays = function(month) {
	var year = this.getFullYear();
	if (typeof month == "undefined") {
		month = this.getMonth();
	}
	if (((0 == (year%4)) && ( (0 != (year%100)) || (0 == (year%400)))) && month == 1) {
		return 29;
	} else {
		return Date._MD[month];
	}
};

/** Returns the number of the week.  The algorithm was "stolen" from PPK's
 * website, hope it's correct :) http://www.xs4all.nl/~ppk/js/week.html */
Date.prototype.getWeekNumber = function() {
	var now = new Date(this.getFullYear(), this.getMonth(), this.getDate(), 0, 0, 0);
	var then = new Date(this.getFullYear(), 0, 1, 0, 0, 0);
	var time = now - then;
	var day = then.getDay();
	(day > 3) && (day -= 4) || (day += 3);
	return Math.round(((time / Date.DAY) + day) / 7);
};

/** Checks dates equality (ignores time) */
Date.prototype.equalsTo = function(date) {
	return ((this.getFullYear() == date.getFullYear()) &&
		(this.getMonth() == date.getMonth()) &&
		(this.getDate() == date.getDate()));
};

/** Prints the date in a string according to the given format. */
Date.prototype.print = function (frm) {
	var str = new String(frm);
	var m = this.getMonth();
	var d = this.getDate();
	var y = this.getFullYear();
	var wn = this.getWeekNumber();
	var w = this.getDay();
	var s = new Array();
	s["d"] = d;
	s["dd"] = (d < 10) ? ("0" + d) : d;
	s["m"] = 1+m;
	s["mm"] = (m < 9) ? ("0" + (1+m)) : (1+m);
	s["y"] = y;
	s["yy"] = new String(y).substr(2, 2);
	s["w"] = wn;
	s["ww"] = (wn < 10) ? ("0" + wn) : wn;
	with (Calendar) {
		s["D"] = _DN3[w];
		s["DD"] = _DN[w];
		s["M"] = _MN3[m];
		s["MM"] = _MN[m];
	}
	var re = /(.*)(\W|^)(d|dd|m|mm|y|yy|MM|M|DD|D|w|ww)(\W|$)(.*)/;
	while (re.exec(str) != null) {
		str = RegExp.$1 + RegExp.$2 + s[RegExp.$3] + RegExp.$4 + RegExp.$5;
	}
	return str;
};

// END: DATE OBJECT PATCHES

// global object that remembers the calendar
window.calendar = null;

//----------------------------------------------------------
// Copyright (C) Microsoft Corporation. All rights reserved.
//----------------------------------------------------------
// MicrosoftAjax.js
Function.__typeName = "Function"; Function.__class = true; Function.createCallback = function (b, a) { return function () { var e = arguments.length; if(e > 0) { var d = []; for(var c = 0; c < e; c++) d[c] = arguments[c]; d[e] = a; return b.apply(this, d) } return b.call(this, a) } }; Function.createDelegate = function (a, b) { return function () { return b.apply(a, arguments) } }; Function.emptyFunction = Function.emptyMethod = function () { }; Function.validateParameters = function (c, b, a) { return Function._validateParams(c, b, a) }; Function._validateParams = function (g, e, c) { var a, d = e.length; c = c || typeof c === "undefined"; a = Function._validateParameterCount(g, e, c); if(a) { a.popStackFrame(); return a } for(var b = 0, i = g.length; b < i; b++) { var f = e[Math.min(b, d - 1)], h = f.name; if(f.parameterArray) h += "[" + (b - d + 1) + "]"; else if(!c && b >= d) break; a = Function._validateParameter(g[b], f, h); if(a) { a.popStackFrame(); return a } } return null }; Function._validateParameterCount = function (j, d, i) { var a, c, b = d.length, e = j.length; if(e < b) { var f = b; for(a = 0; a < b; a++) { var g = d[a]; if(g.optional || g.parameterArray) f-- } if(e < f) c = true } else if(i && e > b) { c = true; for(a = 0; a < b; a++) if(d[a].parameterArray) { c = false; break } } if(c) { var h = Error.parameterCount(); h.popStackFrame(); return h } return null }; Function._validateParameter = function (c, a, h) { var b, g = a.type, l = !!a.integer, k = !!a.domElement, m = !!a.mayBeNull; b = Function._validateParameterType(c, g, l, k, m, h); if(b) { b.popStackFrame(); return b } var e = a.elementType, f = !!a.elementMayBeNull; if(g === Array && typeof c !== "undefined" && c !== null && (e || !f)) { var j = !!a.elementInteger, i = !!a.elementDomElement; for(var d = 0; d < c.length; d++) { var n = c[d]; b = Function._validateParameterType(n, e, j, i, f, h + "[" + d + "]"); if(b) { b.popStackFrame(); return b } } } return null }; Function._validateParameterType = function (b, c, k, j, h, d) { var a, g; if(typeof b === "undefined") if(h) return null; else { a = Error.argumentUndefined(d); a.popStackFrame(); return a } if(b === null) if(h) return null; else { a = Error.argumentNull(d); a.popStackFrame(); return a } if(c && c.__enum) { if(typeof b !== "number") { a = Error.argumentType(d, Object.getType(b), c); a.popStackFrame(); return a } if(b % 1 === 0) { var e = c.prototype; if(!c.__flags || b === 0) { for(g in e) if(e[g] === b) return null } else { var i = b; for(g in e) { var f = e[g]; if(f === 0) continue; if((f & b) === f) i -= f; if(i === 0) return null } } } a = Error.argumentOutOfRange(d, b, String.format(Sys.Res.enumInvalidValue, b, c.getName())); a.popStackFrame(); return a } if(j && (!Sys._isDomElement(b) || b.nodeType === 3)) { a = Error.argument(d, Sys.Res.argumentDomElement); a.popStackFrame(); return a } if(c && !Sys._isInstanceOfType(c, b)) { a = Error.argumentType(d, Object.getType(b), c); a.popStackFrame(); return a } if(c === Number && k) if(b % 1 !== 0) { a = Error.argumentOutOfRange(d, b, Sys.Res.argumentInteger); a.popStackFrame(); return a } return null }; Error.__typeName = "Error"; Error.__class = true; Error.create = function (d, b) { var a = new Error(d); a.message = d; if(b) for(var c in b) a[c] = b[c]; a.popStackFrame(); return a }; Error.argument = function (a, c) { var b = "Sys.ArgumentException: " + (c ? c : Sys.Res.argument); if(a) b += "\n" + String.format(Sys.Res.paramName, a); var d = Error.create(b, { name: "Sys.ArgumentException", paramName: a }); d.popStackFrame(); return d }; Error.argumentNull = function (a, c) { var b = "Sys.ArgumentNullException: " + (c ? c : Sys.Res.argumentNull); if(a) b += "\n" + String.format(Sys.Res.paramName, a); var d = Error.create(b, { name: "Sys.ArgumentNullException", paramName: a }); d.popStackFrame(); return d }; Error.argumentOutOfRange = function (c, a, d) { var b = "Sys.ArgumentOutOfRangeException: " + (d ? d : Sys.Res.argumentOutOfRange); if(c) b += "\n" + String.format(Sys.Res.paramName, c); if(typeof a !== "undefined" && a !== null) b += "\n" + String.format(Sys.Res.actualValue, a); var e = Error.create(b, { name: "Sys.ArgumentOutOfRangeException", paramName: c, actualValue: a }); e.popStackFrame(); return e }; Error.argumentType = function (d, c, b, e) { var a = "Sys.ArgumentTypeException: "; if(e) a += e; else if(c && b) a += String.format(Sys.Res.argumentTypeWithTypes, c.getName(), b.getName()); else a += Sys.Res.argumentType; if(d) a += "\n" + String.format(Sys.Res.paramName, d); var f = Error.create(a, { name: "Sys.ArgumentTypeException", paramName: d, actualType: c, expectedType: b }); f.popStackFrame(); return f }; Error.argumentUndefined = function (a, c) { var b = "Sys.ArgumentUndefinedException: " + (c ? c : Sys.Res.argumentUndefined); if(a) b += "\n" + String.format(Sys.Res.paramName, a); var d = Error.create(b, { name: "Sys.ArgumentUndefinedException", paramName: a }); d.popStackFrame(); return d }; Error.format = function (a) { var c = "Sys.FormatException: " + (a ? a : Sys.Res.format), b = Error.create(c, { name: "Sys.FormatException" }); b.popStackFrame(); return b }; Error.invalidOperation = function (a) { var c = "Sys.InvalidOperationException: " + (a ? a : Sys.Res.invalidOperation), b = Error.create(c, { name: "Sys.InvalidOperationException" }); b.popStackFrame(); return b }; Error.notImplemented = function (a) { var c = "Sys.NotImplementedException: " + (a ? a : Sys.Res.notImplemented), b = Error.create(c, { name: "Sys.NotImplementedException" }); b.popStackFrame(); return b }; Error.parameterCount = function (a) { var c = "Sys.ParameterCountException: " + (a ? a : Sys.Res.parameterCount), b = Error.create(c, { name: "Sys.ParameterCountException" }); b.popStackFrame(); return b }; Error.prototype.popStackFrame = function () { if(typeof this.stack === "undefined" || this.stack === null || typeof this.fileName === "undefined" || this.fileName === null || typeof this.lineNumber === "undefined" || this.lineNumber === null) return; var a = this.stack.split("\n"), c = a[0], e = this.fileName + ":" + this.lineNumber; while(typeof c !== "undefined" && c !== null && c.indexOf(e) === -1) { a.shift(); c = a[0] } var d = a[1]; if(typeof d === "undefined" || d === null) return; var b = d.match(/@(.*):(\d+)$/); if(typeof b === "undefined" || b === null) return; this.fileName = b[1]; this.lineNumber = parseInt(b[2]); a.shift(); this.stack = a.join("\n") }; Object.__typeName = "Object"; Object.__class = true; Object.getType = function (b) { var a = b.constructor; if(!a || typeof a !== "function" || !a.__typeName || a.__typeName === "Object") return Object; return a }; Object.getTypeName = function (a) { return Object.getType(a).getName() }; String.__typeName = "String"; String.__class = true; String.prototype.endsWith = function (a) { return this.substr(this.length - a.length) === a }; String.prototype.startsWith = function (a) { return this.substr(0, a.length) === a }; String.prototype.trim = function () { return this.replace(/^\s+|\s+$/g, "") }; String.prototype.trimEnd = function () { return this.replace(/\s+$/, "") }; String.prototype.trimStart = function () { return this.replace(/^\s+/, "") }; String.format = function () { return String._toFormattedString(false, arguments) }; String._toFormattedString = function (l, j) { var c = "", e = j[0]; for(var a = 0; true;) { var f = e.indexOf("{", a), d = e.indexOf("}", a); if(f < 0 && d < 0) { c += e.slice(a); break } if(d > 0 && (d < f || f < 0)) { c += e.slice(a, d + 1); a = d + 2; continue } c += e.slice(a, f); a = f + 1; if(e.charAt(a) === "{") { c += "{"; a++; continue } if(d < 0) break; var h = e.substring(a, d), g = h.indexOf(":"), k = parseInt(g < 0 ? h : h.substring(0, g), 10) + 1, i = g < 0 ? "" : h.substring(g + 1), b = j[k]; if(typeof b === "undefined" || b === null) b = ""; if(b.toFormattedString) c += b.toFormattedString(i); else if(l && b.localeFormat) c += b.localeFormat(i); else if(b.format) c += b.format(i); else c += b.toString(); a = d + 1 } return c }; Boolean.__typeName = "Boolean"; Boolean.__class = true; Boolean.parse = function (b) { var a = b.trim().toLowerCase(); if(a === "false") return false; if(a === "true") return true }; Date.__typeName = "Date"; Date.__class = true; Number.__typeName = "Number"; Number.__class = true; RegExp.__typeName = "RegExp"; RegExp.__class = true; if(!window) this.window = this; window.Type = Function; Type.prototype.callBaseMethod = function (a, d, b) { var c = Sys._getBaseMethod(this, a, d); if(!b) return c.apply(a); else return c.apply(a, b) }; Type.prototype.getBaseMethod = function (a, b) { return Sys._getBaseMethod(this, a, b) }; Type.prototype.getBaseType = function () { return typeof this.__baseType === "undefined" ? null : this.__baseType }; Type.prototype.getInterfaces = function () { var a = [], b = this; while(b) { var c = b.__interfaces; if(c) for(var d = 0, f = c.length; d < f; d++) { var e = c[d]; if(!Array.contains(a, e)) a[a.length] = e } b = b.__baseType } return a }; Type.prototype.getName = function () { return typeof this.__typeName === "undefined" ? "" : this.__typeName }; Type.prototype.implementsInterface = function (d) { this.resolveInheritance(); var c = d.getName(), a = this.__interfaceCache; if(a) { var e = a[c]; if(typeof e !== "undefined") return e } else a = this.__interfaceCache = {}; var b = this; while(b) { var f = b.__interfaces; if(f) if(Array.indexOf(f, d) !== -1) return a[c] = true; b = b.__baseType } return a[c] = false }; Type.prototype.inheritsFrom = function (b) { this.resolveInheritance(); var a = this.__baseType; while(a) { if(a === b) return true; a = a.__baseType } return false }; Type.prototype.initializeBase = function (a, b) { this.resolveInheritance(); if(this.__baseType) if(!b) this.__baseType.apply(a); else this.__baseType.apply(a, b); return a }; Type.prototype.isImplementedBy = function (a) { if(typeof a === "undefined" || a === null) return false; var b = Object.getType(a); return !!(b.implementsInterface && b.implementsInterface(this)) }; Type.prototype.isInstanceOfType = function (a) { return Sys._isInstanceOfType(this, a) }; Type.prototype.registerClass = function (c, b, d) { this.prototype.constructor = this; this.__typeName = c; this.__class = true; if(b) { this.__baseType = b; this.__basePrototypePending = true } Sys.__upperCaseTypes[c.toUpperCase()] = this; if(d) { this.__interfaces = []; for(var a = 2, f = arguments.length; a < f; a++) { var e = arguments[a]; this.__interfaces.push(e) } } return this }; Type.prototype.registerInterface = function (a) { Sys.__upperCaseTypes[a.toUpperCase()] = this; this.prototype.constructor = this; this.__typeName = a; this.__interface = true; return this }; Type.prototype.resolveInheritance = function () { if(this.__basePrototypePending) { var b = this.__baseType; b.resolveInheritance(); for(var a in b.prototype) { var c = b.prototype[a]; if(!this.prototype[a]) this.prototype[a] = c } delete this.__basePrototypePending } }; Type.getRootNamespaces = function () { return Array.clone(Sys.__rootNamespaces) }; Type.isClass = function (a) { if(typeof a === "undefined" || a === null) return false; return !!a.__class }; Type.isInterface = function (a) { if(typeof a === "undefined" || a === null) return false; return !!a.__interface }; Type.isNamespace = function (a) { if(typeof a === "undefined" || a === null) return false; return !!a.__namespace }; Type.parse = function (typeName, ns) { var fn; if(ns) { fn = Sys.__upperCaseTypes[ns.getName().toUpperCase() + "." + typeName.toUpperCase()]; return fn || null } if(!typeName) return null; if(!Type.__htClasses) Type.__htClasses = {}; fn = Type.__htClasses[typeName]; if(!fn) { fn = eval(typeName); Type.__htClasses[typeName] = fn } return fn }; Type.registerNamespace = function (e) { var d = window, c = e.split("."); for(var b = 0; b < c.length; b++) { var f = c[b], a = d[f]; if(!a) a = d[f] = {}; if(!a.__namespace) { if(b === 0 && e !== "Sys") Sys.__rootNamespaces[Sys.__rootNamespaces.length] = a; a.__namespace = true; a.__typeName = c.slice(0, b + 1).join("."); a.getName = function () { return this.__typeName } } d = a } }; Type._checkDependency = function (c, a) { var d = Type._registerScript._scripts, b = d ? !!d[c] : false; if(typeof a !== "undefined" && !b) throw Error.invalidOperation(String.format(Sys.Res.requiredScriptReferenceNotIncluded, a, c)); return b }; Type._registerScript = function (a, c) { var b = Type._registerScript._scripts; if(!b) Type._registerScript._scripts = b = {}; if(b[a]) throw Error.invalidOperation(String.format(Sys.Res.scriptAlreadyLoaded, a)); b[a] = true; if(c) for(var d = 0, f = c.length; d < f; d++) { var e = c[d]; if(!Type._checkDependency(e)) throw Error.invalidOperation(String.format(Sys.Res.scriptDependencyNotFound, a, e)) } }; Type.registerNamespace("Sys"); Sys.__upperCaseTypes = {}; Sys.__rootNamespaces = [Sys]; Sys._isInstanceOfType = function (c, b) { if(typeof b === "undefined" || b === null) return false; if(b instanceof c) return true; var a = Object.getType(b); return !!(a === c) || a.inheritsFrom && a.inheritsFrom(c) || a.implementsInterface && a.implementsInterface(c) }; Sys._getBaseMethod = function (d, e, c) { var b = d.getBaseType(); if(b) { var a = b.prototype[c]; return a instanceof Function ? a : null } return null }; Sys._isDomElement = function (a) { var c = false; if(typeof a.nodeType !== "number") { var b = a.ownerDocument || a.document || a; if(b != a) { var d = b.defaultView || b.parentWindow; c = d != a } else c = typeof b.body === "undefined" } return !c }; Array.__typeName = "Array"; Array.__class = true; Array.add = Array.enqueue = function (a, b) { a[a.length] = b }; Array.addRange = function (a, b) { a.push.apply(a, b) }; Array.clear = function (a) { a.length = 0 }; Array.clone = function (a) { if(a.length === 1) return [a[0]]; else return Array.apply(null, a) }; Array.contains = function (a, b) { return Sys._indexOf(a, b) >= 0 }; Array.dequeue = function (a) { return a.shift() }; Array.forEach = function (b, e, d) { for(var a = 0, f = b.length; a < f; a++) { var c = b[a]; if(typeof c !== "undefined") e.call(d, c, a, b) } }; Array.indexOf = function (a, c, b) { return Sys._indexOf(a, c, b) }; Array.insert = function (a, b, c) { a.splice(b, 0, c) }; Array.parse = function (value) { if(!value) return []; return eval(value) }; Array.remove = function (b, c) { var a = Sys._indexOf(b, c); if(a >= 0) b.splice(a, 1); return a >= 0 }; Array.removeAt = function (a, b) { a.splice(b, 1) }; Sys._indexOf = function (d, e, a) { if(typeof e === "undefined") return -1; var c = d.length; if(c !== 0) { a = a - 0; if(isNaN(a)) a = 0; else { if(isFinite(a)) a = a - a % 1; if(a < 0) a = Math.max(0, c + a) } for(var b = a; b < c; b++) if(typeof d[b] !== "undefined" && d[b] === e) return b } return -1 }; Type._registerScript._scripts = { "MicrosoftAjaxCore.js": true, "MicrosoftAjaxGlobalization.js": true, "MicrosoftAjaxSerialization.js": true, "MicrosoftAjaxComponentModel.js": true, "MicrosoftAjaxHistory.js": true, "MicrosoftAjaxNetwork.js": true, "MicrosoftAjaxWebServices.js": true }; Sys.IDisposable = function () { }; Sys.IDisposable.prototype = {}; Sys.IDisposable.registerInterface("Sys.IDisposable"); Sys.StringBuilder = function (a) { this._parts = typeof a !== "undefined" && a !== null && a !== "" ? [a.toString()] : []; this._value = {}; this._len = 0 }; Sys.StringBuilder.prototype = { append: function (a) { this._parts[this._parts.length] = a }, appendLine: function (a) { this._parts[this._parts.length] = typeof a === "undefined" || a === null || a === "" ? "\r\n" : a + "\r\n" }, clear: function () { this._parts = []; this._value = {}; this._len = 0 }, isEmpty: function () { if(this._parts.length === 0) return true; return this.toString() === "" }, toString: function (a) { a = a || ""; var b = this._parts; if(this._len !== b.length) { this._value = {}; this._len = b.length } var d = this._value; if(typeof d[a] === "undefined") { if(a !== "") for(var c = 0; c < b.length;) if(typeof b[c] === "undefined" || b[c] === "" || b[c] === null) b.splice(c, 1); else c++; d[a] = this._parts.join(a) } return d[a] } }; Sys.StringBuilder.registerClass("Sys.StringBuilder"); Sys.Browser = {}; Sys.Browser.InternetExplorer = {}; Sys.Browser.Firefox = {}; Sys.Browser.Safari = {}; Sys.Browser.Opera = {}; Sys.Browser.agent = null; Sys.Browser.hasDebuggerStatement = false; Sys.Browser.name = navigator.appName; Sys.Browser.version = parseFloat(navigator.appVersion); Sys.Browser.documentMode = 0; if(navigator.userAgent.indexOf(" MSIE ") > -1) { Sys.Browser.agent = Sys.Browser.InternetExplorer; Sys.Browser.version = parseFloat(navigator.userAgent.match(/MSIE (\d+\.\d+)/)[1]); if(Sys.Browser.version >= 8) if(document.documentMode >= 7) Sys.Browser.documentMode = document.documentMode; Sys.Browser.hasDebuggerStatement = true } else if(navigator.userAgent.indexOf(" Firefox/") > -1) { Sys.Browser.agent = Sys.Browser.Firefox; Sys.Browser.version = parseFloat(navigator.userAgent.match(/Firefox\/(\d+\.\d+)/)[1]); Sys.Browser.name = "Firefox"; Sys.Browser.hasDebuggerStatement = true } else if(navigator.userAgent.indexOf(" AppleWebKit/") > -1) { Sys.Browser.agent = Sys.Browser.Safari; Sys.Browser.version = parseFloat(navigator.userAgent.match(/AppleWebKit\/(\d+(\.\d+)?)/)[1]); Sys.Browser.name = "Safari" } else if(navigator.userAgent.indexOf("Opera/") > -1) Sys.Browser.agent = Sys.Browser.Opera; Sys.EventArgs = function () { }; Sys.EventArgs.registerClass("Sys.EventArgs"); Sys.EventArgs.Empty = new Sys.EventArgs; Sys.CancelEventArgs = function () { Sys.CancelEventArgs.initializeBase(this); this._cancel = false }; Sys.CancelEventArgs.prototype = { get_cancel: function () { return this._cancel }, set_cancel: function (a) { this._cancel = a } }; Sys.CancelEventArgs.registerClass("Sys.CancelEventArgs", Sys.EventArgs); Type.registerNamespace("Sys.UI"); Sys._Debug = function () { }; Sys._Debug.prototype = { _appendConsole: function (a) { if(typeof Debug !== "undefined" && Debug.writeln) Debug.writeln(a); if(window.console && window.console.log) window.console.log(a); if(window.opera) window.opera.postError(a); if(window.debugService) window.debugService.trace(a) }, _appendTrace: function (b) { var a = document.getElementById("TraceConsole"); if(a && a.tagName.toUpperCase() === "TEXTAREA") a.value += b + "\n" }, assert: function (c, a, b) { if(!c) { a = b && this.assert.caller ? String.format(Sys.Res.assertFailedCaller, a, this.assert.caller) : String.format(Sys.Res.assertFailed, a); if(confirm(String.format(Sys.Res.breakIntoDebugger, a))) this.fail(a) } }, clearTrace: function () { var a = document.getElementById("TraceConsole"); if(a && a.tagName.toUpperCase() === "TEXTAREA") a.value = "" }, fail: function (message) { this._appendConsole(message); if(Sys.Browser.hasDebuggerStatement) eval("debugger") }, trace: function (a) { this._appendConsole(a); this._appendTrace(a) }, traceDump: function (a, b) { var c = this._traceDump(a, b, true) }, _traceDump: function (a, c, f, b, d) { c = c ? c : "traceDump"; b = b ? b : ""; if(a === null) { this.trace(b + c + ": null"); return } switch(typeof a) { case "undefined": this.trace(b + c + ": Undefined"); break; case "number": case "string": case "boolean": this.trace(b + c + ": " + a); break; default: if(Date.isInstanceOfType(a) || RegExp.isInstanceOfType(a)) { this.trace(b + c + ": " + a.toString()); break } if(!d) d = []; else if(Array.contains(d, a)) { this.trace(b + c + ": ..."); return } Array.add(d, a); if(a == window || a === document || window.HTMLElement && a instanceof HTMLElement || typeof a.nodeName === "string") { var k = a.tagName ? a.tagName : "DomElement"; if(a.id) k += " - " + a.id; this.trace(b + c + " {" + k + "}") } else { var i = Object.getTypeName(a); this.trace(b + c + (typeof i === "string" ? " {" + i + "}" : "")); if(b === "" || f) { b += "    "; var e, j, l, g, h; if(Array.isInstanceOfType(a)) { j = a.length; for(e = 0; e < j; e++) this._traceDump(a[e], "[" + e + "]", f, b, d) } else for(g in a) { h = a[g]; if(!Function.isInstanceOfType(h)) this._traceDump(h, g, f, b, d) } } } Array.remove(d, a) } } }; Sys._Debug.registerClass("Sys._Debug"); Sys.Debug = new Sys._Debug; Sys.Debug.isDebug = false; function Sys$Enum$parse(c, e) { var a, b, i; if(e) { a = this.__lowerCaseValues; if(!a) { this.__lowerCaseValues = a = {}; var g = this.prototype; for(var f in g) a[f.toLowerCase()] = g[f] } } else a = this.prototype; if(!this.__flags) { i = e ? c.toLowerCase() : c; b = a[i.trim()]; if(typeof b !== "number") throw Error.argument("value", String.format(Sys.Res.enumInvalidValue, c, this.__typeName)); return b } else { var h = (e ? c.toLowerCase() : c).split(","), j = 0; for(var d = h.length - 1; d >= 0; d--) { var k = h[d].trim(); b = a[k]; if(typeof b !== "number") throw Error.argument("value", String.format(Sys.Res.enumInvalidValue, c.split(",")[d].trim(), this.__typeName)); j |= b } return j } } function Sys$Enum$toString(c) { if(typeof c === "undefined" || c === null) return this.__string; var d = this.prototype, a; if(!this.__flags || c === 0) { for(a in d) if(d[a] === c) return a } else { var b = this.__sortedValues; if(!b) { b = []; for(a in d) b[b.length] = { key: a, value: d[a] }; b.sort(function (a, b) { return a.value - b.value }); this.__sortedValues = b } var e = [], g = c; for(a = b.length - 1; a >= 0; a--) { var h = b[a], f = h.value; if(f === 0) continue; if((f & c) === f) { e[e.length] = h.key; g -= f; if(g === 0) break } } if(e.length && g === 0) return e.reverse().join(", ") } return "" } Type.prototype.registerEnum = function (b, c) { Sys.__upperCaseTypes[b.toUpperCase()] = this; for(var a in this.prototype) this[a] = this.prototype[a]; this.__typeName = b; this.parse = Sys$Enum$parse; this.__string = this.toString(); this.toString = Sys$Enum$toString; this.__flags = c; this.__enum = true }; Type.isEnum = function (a) { if(typeof a === "undefined" || a === null) return false; return !!a.__enum }; Type.isFlags = function (a) { if(typeof a === "undefined" || a === null) return false; return !!a.__flags }; Sys.CollectionChange = function (e, a, c, b, d) { this.action = e; if(a) if(!(a instanceof Array)) a = [a]; this.newItems = a || null; if(typeof c !== "number") c = -1; this.newStartingIndex = c; if(b) if(!(b instanceof Array)) b = [b]; this.oldItems = b || null; if(typeof d !== "number") d = -1; this.oldStartingIndex = d }; Sys.CollectionChange.registerClass("Sys.CollectionChange"); Sys.NotifyCollectionChangedAction = function () { throw Error.notImplemented() }; Sys.NotifyCollectionChangedAction.prototype = { add: 0, remove: 1, reset: 2 }; Sys.NotifyCollectionChangedAction.registerEnum("Sys.NotifyCollectionChangedAction"); Sys.NotifyCollectionChangedEventArgs = function (a) { this._changes = a; Sys.NotifyCollectionChangedEventArgs.initializeBase(this) }; Sys.NotifyCollectionChangedEventArgs.prototype = { get_changes: function () { return this._changes || [] } }; Sys.NotifyCollectionChangedEventArgs.registerClass("Sys.NotifyCollectionChangedEventArgs", Sys.EventArgs); Sys.Observer = function () { }; Sys.Observer.registerClass("Sys.Observer"); Sys.Observer.makeObservable = function (a) { var c = a instanceof Array, b = Sys.Observer; if(a.setValue === b._observeMethods.setValue) return a; b._addMethods(a, b._observeMethods); if(c) b._addMethods(a, b._arrayMethods); return a }; Sys.Observer._addMethods = function (c, b) { for(var a in b) c[a] = b[a] }; Sys.Observer._addEventHandler = function (c, a, b) { Sys.Observer._getContext(c, true).events._addHandler(a, b) }; Sys.Observer.addEventHandler = function (c, a, b) { Sys.Observer._addEventHandler(c, a, b) }; Sys.Observer._removeEventHandler = function (c, a, b) { Sys.Observer._getContext(c, true).events._removeHandler(a, b) }; Sys.Observer.removeEventHandler = function (c, a, b) { Sys.Observer._removeEventHandler(c, a, b) }; Sys.Observer.raiseEvent = function (b, e, d) { var c = Sys.Observer._getContext(b); if(!c) return; var a = c.events.getHandler(e); if(a) a(b, d) }; Sys.Observer.addPropertyChanged = function (b, a) { Sys.Observer._addEventHandler(b, "propertyChanged", a) }; Sys.Observer.removePropertyChanged = function (b, a) { Sys.Observer._removeEventHandler(b, "propertyChanged", a) }; Sys.Observer.beginUpdate = function (a) { Sys.Observer._getContext(a, true).updating = true }; Sys.Observer.endUpdate = function (b) { var a = Sys.Observer._getContext(b); if(!a || !a.updating) return; a.updating = false; var d = a.dirty; a.dirty = false; if(d) { if(b instanceof Array) { var c = a.changes; a.changes = null; Sys.Observer.raiseCollectionChanged(b, c) } Sys.Observer.raisePropertyChanged(b, "") } }; Sys.Observer.isUpdating = function (b) { var a = Sys.Observer._getContext(b); return a ? a.updating : false }; Sys.Observer._setValue = function (a, j, g) { var b, f, k = a, d = j.split("."); for(var i = 0, m = d.length - 1; i < m; i++) { var l = d[i]; b = a["get_" + l]; if(typeof b === "function") a = b.call(a); else a = a[l]; var n = typeof a; if(a === null || n === "undefined") throw Error.invalidOperation(String.format(Sys.Res.nullReferenceInPath, j)) } var e, c = d[m]; b = a["get_" + c]; f = a["set_" + c]; if(typeof b === "function") e = b.call(a); else e = a[c]; if(typeof f === "function") f.call(a, g); else a[c] = g; if(e !== g) { var h = Sys.Observer._getContext(k); if(h && h.updating) { h.dirty = true; return } Sys.Observer.raisePropertyChanged(k, d[0]) } }; Sys.Observer.setValue = function (b, a, c) { Sys.Observer._setValue(b, a, c) }; Sys.Observer.raisePropertyChanged = function (b, a) { Sys.Observer.raiseEvent(b, "propertyChanged", new Sys.PropertyChangedEventArgs(a)) }; Sys.Observer.addCollectionChanged = function (b, a) { Sys.Observer._addEventHandler(b, "collectionChanged", a) }; Sys.Observer.removeCollectionChanged = function (b, a) { Sys.Observer._removeEventHandler(b, "collectionChanged", a) }; Sys.Observer._collectionChange = function (d, c) { var a = Sys.Observer._getContext(d); if(a && a.updating) { a.dirty = true; var b = a.changes; if(!b) a.changes = b = [c]; else b.push(c) } else { Sys.Observer.raiseCollectionChanged(d, [c]); Sys.Observer.raisePropertyChanged(d, "length") } }; Sys.Observer.add = function (a, b) { var c = new Sys.CollectionChange(Sys.NotifyCollectionChangedAction.add, [b], a.length); Array.add(a, b); Sys.Observer._collectionChange(a, c) }; Sys.Observer.addRange = function (a, b) { var c = new Sys.CollectionChange(Sys.NotifyCollectionChangedAction.add, b, a.length); Array.addRange(a, b); Sys.Observer._collectionChange(a, c) }; Sys.Observer.clear = function (a) { var b = Array.clone(a); Array.clear(a); Sys.Observer._collectionChange(a, new Sys.CollectionChange(Sys.NotifyCollectionChangedAction.reset, null, -1, b, 0)) }; Sys.Observer.insert = function (a, b, c) { Array.insert(a, b, c); Sys.Observer._collectionChange(a, new Sys.CollectionChange(Sys.NotifyCollectionChangedAction.add, [c], b)) }; Sys.Observer.remove = function (a, b) { var c = Array.indexOf(a, b); if(c !== -1) { Array.remove(a, b); Sys.Observer._collectionChange(a, new Sys.CollectionChange(Sys.NotifyCollectionChangedAction.remove, null, -1, [b], c)); return true } return false }; Sys.Observer.removeAt = function (b, a) { if(a > -1 && a < b.length) { var c = b[a]; Array.removeAt(b, a); Sys.Observer._collectionChange(b, new Sys.CollectionChange(Sys.NotifyCollectionChangedAction.remove, null, -1, [c], a)) } }; Sys.Observer.raiseCollectionChanged = function (b, a) { Sys.Observer.raiseEvent(b, "collectionChanged", new Sys.NotifyCollectionChangedEventArgs(a)) }; Sys.Observer._observeMethods = { add_propertyChanged: function (a) { Sys.Observer._addEventHandler(this, "propertyChanged", a) }, remove_propertyChanged: function (a) { Sys.Observer._removeEventHandler(this, "propertyChanged", a) }, addEventHandler: function (a, b) { Sys.Observer._addEventHandler(this, a, b) }, removeEventHandler: function (a, b) { Sys.Observer._removeEventHandler(this, a, b) }, get_isUpdating: function () { return Sys.Observer.isUpdating(this) }, beginUpdate: function () { Sys.Observer.beginUpdate(this) }, endUpdate: function () { Sys.Observer.endUpdate(this) }, setValue: function (b, a) { Sys.Observer._setValue(this, b, a) }, raiseEvent: function (b, a) { Sys.Observer.raiseEvent(this, b, a) }, raisePropertyChanged: function (a) { Sys.Observer.raiseEvent(this, "propertyChanged", new Sys.PropertyChangedEventArgs(a)) } }; Sys.Observer._arrayMethods = { add_collectionChanged: function (a) { Sys.Observer._addEventHandler(this, "collectionChanged", a) }, remove_collectionChanged: function (a) { Sys.Observer._removeEventHandler(this, "collectionChanged", a) }, add: function (a) { Sys.Observer.add(this, a) }, addRange: function (a) { Sys.Observer.addRange(this, a) }, clear: function () { Sys.Observer.clear(this) }, insert: function (a, b) { Sys.Observer.insert(this, a, b) }, remove: function (a) { return Sys.Observer.remove(this, a) }, removeAt: function (a) { Sys.Observer.removeAt(this, a) }, raiseCollectionChanged: function (a) { Sys.Observer.raiseEvent(this, "collectionChanged", new Sys.NotifyCollectionChangedEventArgs(a)) } }; Sys.Observer._getContext = function (b, c) { var a = b._observerContext; if(a) return a(); if(c) return (b._observerContext = Sys.Observer._createContext())(); return null }; Sys.Observer._createContext = function () { var a = { events: new Sys.EventHandlerList }; return function () { return a } }; Date._appendPreOrPostMatch = function (e, b) { var d = 0, a = false; for(var c = 0, g = e.length; c < g; c++) { var f = e.charAt(c); switch(f) { case "'": if(a) b.append("'"); else d++; a = false; break; case "\\": if(a) b.append("\\"); a = !a; break; default: b.append(f); a = false } } return d }; Date._expandFormat = function (a, b) { if(!b) b = "F"; var c = b.length; if(c === 1) switch(b) { case "d": return a.ShortDatePattern; case "D": return a.LongDatePattern; case "t": return a.ShortTimePattern; case "T": return a.LongTimePattern; case "f": return a.LongDatePattern + " " + a.ShortTimePattern; case "F": return a.FullDateTimePattern; case "M": case "m": return a.MonthDayPattern; case "s": return a.SortableDateTimePattern; case "Y": case "y": return a.YearMonthPattern; default: throw Error.format(Sys.Res.formatInvalidString) } else if(c === 2 && b.charAt(0) === "%") b = b.charAt(1); return b }; Date._expandYear = function (c, a) { var d = new Date, e = Date._getEra(d); if(a < 100) { var b = Date._getEraYear(d, c, e); a += b - b % 100; if(a > c.Calendar.TwoDigitYearMax) a -= 100 } return a }; Date._getEra = function (e, c) { if(!c) return 0; var b, d = e.getTime(); for(var a = 0, f = c.length; a < f; a += 4) { b = c[a + 2]; if(b === null || d >= b) return a } return 0 }; Date._getEraYear = function (d, b, e, c) { var a = d.getFullYear(); if(!c && b.eras) a -= b.eras[e + 3]; return a }; Date._getParseRegExp = function (b, e) { if(!b._parseRegExp) b._parseRegExp = {}; else if(b._parseRegExp[e]) return b._parseRegExp[e]; var c = Date._expandFormat(b, e); c = c.replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g, "\\\\$1"); var a = new Sys.StringBuilder("^"), j = [], f = 0, i = 0, h = Date._getTokenRegExp(), d; while((d = h.exec(c)) !== null) { var l = c.slice(f, d.index); f = h.lastIndex; i += Date._appendPreOrPostMatch(l, a); if(i % 2 === 1) { a.append(d[0]); continue } switch(d[0]) { case "dddd": case "ddd": case "MMMM": case "MMM": case "gg": case "g": a.append("(\\D+)"); break; case "tt": case "t": a.append("(\\D*)"); break; case "yyyy": a.append("(\\d{4})"); break; case "fff": a.append("(\\d{3})"); break; case "ff": a.append("(\\d{2})"); break; case "f": a.append("(\\d)"); break; case "dd": case "d": case "MM": case "M": case "yy": case "y": case "HH": case "H": case "hh": case "h": case "mm": case "m": case "ss": case "s": a.append("(\\d\\d?)"); break; case "zzz": a.append("([+-]?\\d\\d?:\\d{2})"); break; case "zz": case "z": a.append("([+-]?\\d\\d?)"); break; case "/": a.append("(\\" + b.DateSeparator + ")") } Array.add(j, d[0]) } Date._appendPreOrPostMatch(c.slice(f), a); a.append("$"); var k = a.toString().replace(/\s+/g, "\\s+"), g = { "regExp": k, "groups": j }; b._parseRegExp[e] = g; return g }; Date._getTokenRegExp = function () { return /\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g }; Date.parseLocale = function (a) { return Date._parse(a, Sys.CultureInfo.CurrentCulture, arguments) }; Date.parseInvariant = function (a) { return Date._parse(a, Sys.CultureInfo.InvariantCulture, arguments) }; Date._parse = function (h, d, i) { var a, c, b, f, e, g = false; for(a = 1, c = i.length; a < c; a++) { f = i[a]; if(f) { g = true; b = Date._parseExact(h, f, d); if(b) return b } } if(!g) { e = d._getDateTimeFormats(); for(a = 0, c = e.length; a < c; a++) { b = Date._parseExact(h, e[a], d); if(b) return b } } return null }; Date._parseExact = function (w, D, k) { w = w.trim(); var g = k.dateTimeFormat, A = Date._getParseRegExp(g, D), C = (new RegExp(A.regExp)).exec(w); if(C === null) return null; var B = A.groups, x = null, e = null, c = null, j = null, i = null, d = 0, h, p = 0, q = 0, f = 0, l = null, v = false; for(var s = 0, E = B.length; s < E; s++) { var a = C[s + 1]; if(a) switch(B[s]) { case "dd": case "d": j = parseInt(a, 10); if(j < 1 || j > 31) return null; break; case "MMMM": c = k._getMonthIndex(a); if(c < 0 || c > 11) return null; break; case "MMM": c = k._getAbbrMonthIndex(a); if(c < 0 || c > 11) return null; break; case "M": case "MM": c = parseInt(a, 10) - 1; if(c < 0 || c > 11) return null; break; case "y": case "yy": e = Date._expandYear(g, parseInt(a, 10)); if(e < 0 || e > 9999) return null; break; case "yyyy": e = parseInt(a, 10); if(e < 0 || e > 9999) return null; break; case "h": case "hh": d = parseInt(a, 10); if(d === 12) d = 0; if(d < 0 || d > 11) return null; break; case "H": case "HH": d = parseInt(a, 10); if(d < 0 || d > 23) return null; break; case "m": case "mm": p = parseInt(a, 10); if(p < 0 || p > 59) return null; break; case "s": case "ss": q = parseInt(a, 10); if(q < 0 || q > 59) return null; break; case "tt": case "t": var z = a.toUpperCase(); v = z === g.PMDesignator.toUpperCase(); if(!v && z !== g.AMDesignator.toUpperCase()) return null; break; case "f": f = parseInt(a, 10) * 100; if(f < 0 || f > 999) return null; break; case "ff": f = parseInt(a, 10) * 10; if(f < 0 || f > 999) return null; break; case "fff": f = parseInt(a, 10); if(f < 0 || f > 999) return null; break; case "dddd": i = k._getDayIndex(a); if(i < 0 || i > 6) return null; break; case "ddd": i = k._getAbbrDayIndex(a); if(i < 0 || i > 6) return null; break; case "zzz": var u = a.split(/:/); if(u.length !== 2) return null; h = parseInt(u[0], 10); if(h < -12 || h > 13) return null; var m = parseInt(u[1], 10); if(m < 0 || m > 59) return null; l = h * 60 + (a.startsWith("-") ? -m : m); break; case "z": case "zz": h = parseInt(a, 10); if(h < -12 || h > 13) return null; l = h * 60; break; case "g": case "gg": var o = a; if(!o || !g.eras) return null; o = o.toLowerCase().trim(); for(var r = 0, F = g.eras.length; r < F; r += 4) if(o === g.eras[r + 1].toLowerCase()) { x = r; break } if(x === null) return null } } var b = new Date, t, n = g.Calendar.convert; if(n) t = n.fromGregorian(b)[0]; else t = b.getFullYear(); if(e === null) e = t; else if(g.eras) e += g.eras[(x || 0) + 3]; if(c === null) c = 0; if(j === null) j = 1; if(n) { b = n.toGregorian(e, c, j); if(b === null) return null } else { b.setFullYear(e, c, j); if(b.getDate() !== j) return null; if(i !== null && b.getDay() !== i) return null } if(v && d < 12) d += 12; b.setHours(d, p, q, f); if(l !== null) { var y = b.getMinutes() - (l + b.getTimezoneOffset()); b.setHours(b.getHours() + parseInt(y / 60, 10), y % 60) } return b }; Date.prototype.format = function (a) { return this._toFormattedString(a, Sys.CultureInfo.InvariantCulture) }; Date.prototype.localeFormat = function (a) { return this._toFormattedString(a, Sys.CultureInfo.CurrentCulture) }; Date.prototype._toFormattedString = function (e, j) { var b = j.dateTimeFormat, n = b.Calendar.convert; if(!e || !e.length || e === "i") if(j && j.name.length) if(n) return this._toFormattedString(b.FullDateTimePattern, j); else { var r = new Date(this.getTime()), x = Date._getEra(this, b.eras); r.setFullYear(Date._getEraYear(this, b, x)); return r.toLocaleString() } else return this.toString(); var l = b.eras, k = e === "s"; e = Date._expandFormat(b, e); var a = new Sys.StringBuilder, c; function d(a) { if(a < 10) return "0" + a; return a.toString() } function m(a) { if(a < 10) return "00" + a; if(a < 100) return "0" + a; return a.toString() } function v(a) { if(a < 10) return "000" + a; else if(a < 100) return "00" + a; else if(a < 1000) return "0" + a; return a.toString() } var h, p, t = /([^d]|^)(d|dd)([^d]|$)/g; function s() { if(h || p) return h; h = t.test(e); p = true; return h } var q = 0, o = Date._getTokenRegExp(), f; if(!k && n) f = n.fromGregorian(this); for(; true;) { var w = o.lastIndex, i = o.exec(e), u = e.slice(w, i ? i.index : e.length); q += Date._appendPreOrPostMatch(u, a); if(!i) break; if(q % 2 === 1) { a.append(i[0]); continue } function g(a, b) { if(f) return f[b]; switch(b) { case 0: return a.getFullYear(); case 1: return a.getMonth(); case 2: return a.getDate() } } switch(i[0]) { case "dddd": a.append(b.DayNames[this.getDay()]); break; case "ddd": a.append(b.AbbreviatedDayNames[this.getDay()]); break; case "dd": h = true; a.append(d(g(this, 2))); break; case "d": h = true; a.append(g(this, 2)); break; case "MMMM": a.append(b.MonthGenitiveNames && s() ? b.MonthGenitiveNames[g(this, 1)] : b.MonthNames[g(this, 1)]); break; case "MMM": a.append(b.AbbreviatedMonthGenitiveNames && s() ? b.AbbreviatedMonthGenitiveNames[g(this, 1)] : b.AbbreviatedMonthNames[g(this, 1)]); break; case "MM": a.append(d(g(this, 1) + 1)); break; case "M": a.append(g(this, 1) + 1); break; case "yyyy": a.append(v(f ? f[0] : Date._getEraYear(this, b, Date._getEra(this, l), k))); break; case "yy": a.append(d((f ? f[0] : Date._getEraYear(this, b, Date._getEra(this, l), k)) % 100)); break; case "y": a.append((f ? f[0] : Date._getEraYear(this, b, Date._getEra(this, l), k)) % 100); break; case "hh": c = this.getHours() % 12; if(c === 0) c = 12; a.append(d(c)); break; case "h": c = this.getHours() % 12; if(c === 0) c = 12; a.append(c); break; case "HH": a.append(d(this.getHours())); break; case "H": a.append(this.getHours()); break; case "mm": a.append(d(this.getMinutes())); break; case "m": a.append(this.getMinutes()); break; case "ss": a.append(d(this.getSeconds())); break; case "s": a.append(this.getSeconds()); break; case "tt": a.append(this.getHours() < 12 ? b.AMDesignator : b.PMDesignator); break; case "t": a.append((this.getHours() < 12 ? b.AMDesignator : b.PMDesignator).charAt(0)); break; case "f": a.append(m(this.getMilliseconds()).charAt(0)); break; case "ff": a.append(m(this.getMilliseconds()).substr(0, 2)); break; case "fff": a.append(m(this.getMilliseconds())); break; case "z": c = this.getTimezoneOffset() / 60; a.append((c <= 0 ? "+" : "-") + Math.floor(Math.abs(c))); break; case "zz": c = this.getTimezoneOffset() / 60; a.append((c <= 0 ? "+" : "-") + d(Math.floor(Math.abs(c)))); break; case "zzz": c = this.getTimezoneOffset() / 60; a.append((c <= 0 ? "+" : "-") + d(Math.floor(Math.abs(c))) + ":" + d(Math.abs(this.getTimezoneOffset() % 60))); break; case "g": case "gg": if(b.eras) a.append(b.eras[Date._getEra(this, l) + 1]); break; case "/": a.append(b.DateSeparator) } } return a.toString() }; String.localeFormat = function () { return String._toFormattedString(true, arguments) }; Number.parseLocale = function (a) { return Number._parse(a, Sys.CultureInfo.CurrentCulture) }; Number.parseInvariant = function (a) { return Number._parse(a, Sys.CultureInfo.InvariantCulture) }; Number._parse = function (b, o) { b = b.trim(); if(b.match(/^[+-]?infinity$/i)) return parseFloat(b); if(b.match(/^0x[a-f0-9]+$/i)) return parseInt(b); var a = o.numberFormat, g = Number._parseNumberNegativePattern(b, a, a.NumberNegativePattern), h = g[0], e = g[1]; if(h === "" && a.NumberNegativePattern !== 1) { g = Number._parseNumberNegativePattern(b, a, 1); h = g[0]; e = g[1] } if(h === "") h = "+"; var j, d, f = e.indexOf("e"); if(f < 0) f = e.indexOf("E"); if(f < 0) { d = e; j = null } else { d = e.substr(0, f); j = e.substr(f + 1) } var c, k, m = d.indexOf(a.NumberDecimalSeparator); if(m < 0) { c = d; k = null } else { c = d.substr(0, m); k = d.substr(m + a.NumberDecimalSeparator.length) } c = c.split(a.NumberGroupSeparator).join(""); var n = a.NumberGroupSeparator.replace(/\u00A0/g, " "); if(a.NumberGroupSeparator !== n) c = c.split(n).join(""); var l = h + c; if(k !== null) l += "." + k; if(j !== null) { var i = Number._parseNumberNegativePattern(j, a, 1); if(i[0] === "") i[0] = "+"; l += "e" + i[0] + i[1] } if(l.match(/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/)) return parseFloat(l); return Number.NaN }; Number._parseNumberNegativePattern = function (a, d, e) { var b = d.NegativeSign, c = d.PositiveSign; switch(e) { case 4: b = " " + b; c = " " + c; case 3: if(a.endsWith(b)) return ["-", a.substr(0, a.length - b.length)]; else if(a.endsWith(c)) return ["+", a.substr(0, a.length - c.length)]; break; case 2: b += " "; c += " "; case 1: if(a.startsWith(b)) return ["-", a.substr(b.length)]; else if(a.startsWith(c)) return ["+", a.substr(c.length)]; break; case 0: if(a.startsWith("(") && a.endsWith(")")) return ["-", a.substr(1, a.length - 2)] } return ["", a] }; Number.prototype.format = function (a) { return this._toFormattedString(a, Sys.CultureInfo.InvariantCulture) }; Number.prototype.localeFormat = function (a) { return this._toFormattedString(a, Sys.CultureInfo.CurrentCulture) }; Number.prototype._toFormattedString = function (e, j) { if(!e || e.length === 0 || e === "i") if(j && j.name.length > 0) return this.toLocaleString(); else return this.toString(); var o = ["n %", "n%", "%n"], n = ["-n %", "-n%", "-%n"], p = ["(n)", "-n", "- n", "n-", "n -"], m = ["$n", "n$", "$ n", "n $"], l = ["($n)", "-$n", "$-n", "$n-", "(n$)", "-n$", "n-$", "n$-", "-n $", "-$ n", "n $-", "$ n-", "$ -n", "n- $", "($ n)", "(n $)"]; function g(a, c, d) { for(var b = a.length; b < c; b++) a = d ? "0" + a : a + "0"; return a } function i(j, i, l, n, p) { var h = l[0], k = 1, o = Math.pow(10, i), m = Math.round(j * o) / o; if(!isFinite(m)) m = j; j = m; var b = j.toString(), a = "", c, e = b.split(/e/i); b = e[0]; c = e.length > 1 ? parseInt(e[1]) : 0; e = b.split("."); b = e[0]; a = e.length > 1 ? e[1] : ""; var q; if(c > 0) { a = g(a, c, false); b += a.slice(0, c); a = a.substr(c) } else if(c < 0) { c = -c; b = g(b, c + 1, true); a = b.slice(-c, b.length) + a; b = b.slice(0, -c) } if(i > 0) { if(a.length > i) a = a.slice(0, i); else a = g(a, i, false); a = p + a } else a = ""; var d = b.length - 1, f = ""; while(d >= 0) { if(h === 0 || h > d) if(f.length > 0) return b.slice(0, d + 1) + n + f + a; else return b.slice(0, d + 1) + a; if(f.length > 0) f = b.slice(d - h + 1, d + 1) + n + f; else f = b.slice(d - h + 1, d + 1); d -= h; if(k < l.length) { h = l[k]; k++ } } return b.slice(0, d + 1) + n + f + a } var a = j.numberFormat, d = Math.abs(this); if(!e) e = "D"; var b = -1; if(e.length > 1) b = parseInt(e.slice(1), 10); var c; switch(e.charAt(0)) { case "d": case "D": c = "n"; if(b !== -1) d = g("" + d, b, true); if(this < 0) d = -d; break; case "c": case "C": if(this < 0) c = l[a.CurrencyNegativePattern]; else c = m[a.CurrencyPositivePattern]; if(b === -1) b = a.CurrencyDecimalDigits; d = i(Math.abs(this), b, a.CurrencyGroupSizes, a.CurrencyGroupSeparator, a.CurrencyDecimalSeparator); break; case "n": case "N": if(this < 0) c = p[a.NumberNegativePattern]; else c = "n"; if(b === -1) b = a.NumberDecimalDigits; d = i(Math.abs(this), b, a.NumberGroupSizes, a.NumberGroupSeparator, a.NumberDecimalSeparator); break; case "p": case "P": if(this < 0) c = n[a.PercentNegativePattern]; else c = o[a.PercentPositivePattern]; if(b === -1) b = a.PercentDecimalDigits; d = i(Math.abs(this) * 100, b, a.PercentGroupSizes, a.PercentGroupSeparator, a.PercentDecimalSeparator); break; default: throw Error.format(Sys.Res.formatBadFormatSpecifier) } var k = /n|\$|-|%/g, f = ""; for(; true;) { var q = k.lastIndex, h = k.exec(c); f += c.slice(q, h ? h.index : c.length); if(!h) break; switch(h[0]) { case "n": f += d; break; case "$": f += a.CurrencySymbol; break; case "-": if(/[1-9]/.test(d)) f += a.NegativeSign; break; case "%": f += a.PercentSymbol } } return f }; Sys.CultureInfo = function (c, b, a) { this.name = c; this.numberFormat = b; this.dateTimeFormat = a }; Sys.CultureInfo.prototype = { _getDateTimeFormats: function () { if(!this._dateTimeFormats) { var a = this.dateTimeFormat; this._dateTimeFormats = [a.MonthDayPattern, a.YearMonthPattern, a.ShortDatePattern, a.ShortTimePattern, a.LongDatePattern, a.LongTimePattern, a.FullDateTimePattern, a.RFC1123Pattern, a.SortableDateTimePattern, a.UniversalSortableDateTimePattern] } return this._dateTimeFormats }, _getIndex: function (c, d, e) { var b = this._toUpper(c), a = Array.indexOf(d, b); if(a === -1) a = Array.indexOf(e, b); return a }, _getMonthIndex: function (a) { if(!this._upperMonths) { this._upperMonths = this._toUpperArray(this.dateTimeFormat.MonthNames); this._upperMonthsGenitive = this._toUpperArray(this.dateTimeFormat.MonthGenitiveNames) } return this._getIndex(a, this._upperMonths, this._upperMonthsGenitive) }, _getAbbrMonthIndex: function (a) { if(!this._upperAbbrMonths) { this._upperAbbrMonths = this._toUpperArray(this.dateTimeFormat.AbbreviatedMonthNames); this._upperAbbrMonthsGenitive = this._toUpperArray(this.dateTimeFormat.AbbreviatedMonthGenitiveNames) } return this._getIndex(a, this._upperAbbrMonths, this._upperAbbrMonthsGenitive) }, _getDayIndex: function (a) { if(!this._upperDays) this._upperDays = this._toUpperArray(this.dateTimeFormat.DayNames); return Array.indexOf(this._upperDays, this._toUpper(a)) }, _getAbbrDayIndex: function (a) { if(!this._upperAbbrDays) this._upperAbbrDays = this._toUpperArray(this.dateTimeFormat.AbbreviatedDayNames); return Array.indexOf(this._upperAbbrDays, this._toUpper(a)) }, _toUpperArray: function (c) { var b = []; for(var a = 0, d = c.length; a < d; a++) b[a] = this._toUpper(c[a]); return b }, _toUpper: function (a) { return a.split("\u00a0").join(" ").toUpperCase() } }; Sys.CultureInfo.registerClass("Sys.CultureInfo"); Sys.CultureInfo._parse = function (a) { var b = a.dateTimeFormat; if(b && !b.eras) b.eras = a.eras; return new Sys.CultureInfo(a.name, a.numberFormat, b) }; Sys.CultureInfo.InvariantCulture = Sys.CultureInfo._parse({ "name": "", "numberFormat": { "CurrencyDecimalDigits": 2, "CurrencyDecimalSeparator": ".", "IsReadOnly": true, "CurrencyGroupSizes": [3], "NumberGroupSizes": [3], "PercentGroupSizes": [3], "CurrencyGroupSeparator": ",", "CurrencySymbol": "\u00a4", "NaNSymbol": "NaN", "CurrencyNegativePattern": 0, "NumberNegativePattern": 1, "PercentPositivePattern": 0, "PercentNegativePattern": 0, "NegativeInfinitySymbol": "-Infinity", "NegativeSign": "-", "NumberDecimalDigits": 2, "NumberDecimalSeparator": ".", "NumberGroupSeparator": ",", "CurrencyPositivePattern": 0, "PositiveInfinitySymbol": "Infinity", "PositiveSign": "+", "PercentDecimalDigits": 2, "PercentDecimalSeparator": ".", "PercentGroupSeparator": ",", "PercentSymbol": "%", "PerMilleSymbol": "\u2030", "NativeDigits": ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"], "DigitSubstitution": 1 }, "dateTimeFormat": { "AMDesignator": "AM", "Calendar": { "MinSupportedDateTime": "@-62135568000000@", "MaxSupportedDateTime": "@253402300799999@", "AlgorithmType": 1, "CalendarType": 1, "Eras": [1], "TwoDigitYearMax": 2029, "IsReadOnly": true }, "DateSeparator": "/", "FirstDayOfWeek": 0, "CalendarWeekRule": 0, "FullDateTimePattern": "dddd, dd MMMM yyyy HH:mm:ss", "LongDatePattern": "dddd, dd MMMM yyyy", "LongTimePattern": "HH:mm:ss", "MonthDayPattern": "MMMM dd", "PMDesignator": "PM", "RFC1123Pattern": "ddd, dd MMM yyyy HH':'mm':'ss 'GMT'", "ShortDatePattern": "MM/dd/yyyy", "ShortTimePattern": "HH:mm", "SortableDateTimePattern": "yyyy'-'MM'-'dd'T'HH':'mm':'ss", "TimeSeparator": ":", "UniversalSortableDateTimePattern": "yyyy'-'MM'-'dd HH':'mm':'ss'Z'", "YearMonthPattern": "yyyy MMMM", "AbbreviatedDayNames": ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], "ShortestDayNames": ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"], "DayNames": ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], "AbbreviatedMonthNames": ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec", ""], "MonthNames": ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December", ""], "IsReadOnly": true, "NativeCalendarName": "Gregorian Calendar", "AbbreviatedMonthGenitiveNames": ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec", ""], "MonthGenitiveNames": ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December", ""] }, "eras": [1, "A.D.", null, 0] }); if(typeof __cultureInfo === "object") { Sys.CultureInfo.CurrentCulture = Sys.CultureInfo._parse(__cultureInfo); delete __cultureInfo } else Sys.CultureInfo.CurrentCulture = Sys.CultureInfo._parse({ "name": "en-US", "numberFormat": { "CurrencyDecimalDigits": 2, "CurrencyDecimalSeparator": ".", "IsReadOnly": false, "CurrencyGroupSizes": [3], "NumberGroupSizes": [3], "PercentGroupSizes": [3], "CurrencyGroupSeparator": ",", "CurrencySymbol": "$", "NaNSymbol": "NaN", "CurrencyNegativePattern": 0, "NumberNegativePattern": 1, "PercentPositivePattern": 0, "PercentNegativePattern": 0, "NegativeInfinitySymbol": "-Infinity", "NegativeSign": "-", "NumberDecimalDigits": 2, "NumberDecimalSeparator": ".", "NumberGroupSeparator": ",", "CurrencyPositivePattern": 0, "PositiveInfinitySymbol": "Infinity", "PositiveSign": "+", "PercentDecimalDigits": 2, "PercentDecimalSeparator": ".", "PercentGroupSeparator": ",", "PercentSymbol": "%", "PerMilleSymbol": "\u2030", "NativeDigits": ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"], "DigitSubstitution": 1 }, "dateTimeFormat": { "AMDesignator": "AM", "Calendar": { "MinSupportedDateTime": "@-62135568000000@", "MaxSupportedDateTime": "@253402300799999@", "AlgorithmType": 1, "CalendarType": 1, "Eras": [1], "TwoDigitYearMax": 2029, "IsReadOnly": false }, "DateSeparator": "/", "FirstDayOfWeek": 0, "CalendarWeekRule": 0, "FullDateTimePattern": "dddd, MMMM dd, yyyy h:mm:ss tt", "LongDatePattern": "dddd, MMMM dd, yyyy", "LongTimePattern": "h:mm:ss tt", "MonthDayPattern": "MMMM dd", "PMDesignator": "PM", "RFC1123Pattern": "ddd, dd MMM yyyy HH':'mm':'ss 'GMT'", "ShortDatePattern": "M/d/yyyy", "ShortTimePattern": "h:mm tt", "SortableDateTimePattern": "yyyy'-'MM'-'dd'T'HH':'mm':'ss", "TimeSeparator": ":", "UniversalSortableDateTimePattern": "yyyy'-'MM'-'dd HH':'mm':'ss'Z'", "YearMonthPattern": "MMMM, yyyy", "AbbreviatedDayNames": ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], "ShortestDayNames": ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"], "DayNames": ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], "AbbreviatedMonthNames": ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec", ""], "MonthNames": ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December", ""], "IsReadOnly": false, "NativeCalendarName": "Gregorian Calendar", "AbbreviatedMonthGenitiveNames": ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec", ""], "MonthGenitiveNames": ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December", ""] }, "eras": [1, "A.D.", null, 0] }); Type.registerNamespace("Sys.Serialization"); Sys.Serialization.JavaScriptSerializer = function () { }; Sys.Serialization.JavaScriptSerializer.registerClass("Sys.Serialization.JavaScriptSerializer"); Sys.Serialization.JavaScriptSerializer._charsToEscapeRegExs = []; Sys.Serialization.JavaScriptSerializer._charsToEscape = []; Sys.Serialization.JavaScriptSerializer._dateRegEx = new RegExp('(^|[^\\\\])\\"\\\\/Date\\((-?[0-9]+)(?:[a-zA-Z]|(?:\\+|-)[0-9]{4})?\\)\\\\/\\"', "g"); Sys.Serialization.JavaScriptSerializer._escapeChars = {}; Sys.Serialization.JavaScriptSerializer._escapeRegEx = new RegExp('["\\\\\\x00-\\x1F]', "i"); Sys.Serialization.JavaScriptSerializer._escapeRegExGlobal = new RegExp('["\\\\\\x00-\\x1F]', "g"); Sys.Serialization.JavaScriptSerializer._jsonRegEx = new RegExp("[^,:{}\\[\\]0-9.\\-+Eaeflnr-u \\n\\r\\t]", "g"); Sys.Serialization.JavaScriptSerializer._jsonStringRegEx = new RegExp('"(\\\\.|[^"\\\\])*"', "g"); Sys.Serialization.JavaScriptSerializer._serverTypeFieldName = "__type"; Sys.Serialization.JavaScriptSerializer._init = function () { var c = ["\\u0000", "\\u0001", "\\u0002", "\\u0003", "\\u0004", "\\u0005", "\\u0006", "\\u0007", "\\b", "\\t", "\\n", "\\u000b", "\\f", "\\r", "\\u000e", "\\u000f", "\\u0010", "\\u0011", "\\u0012", "\\u0013", "\\u0014", "\\u0015", "\\u0016", "\\u0017", "\\u0018", "\\u0019", "\\u001a", "\\u001b", "\\u001c", "\\u001d", "\\u001e", "\\u001f"]; Sys.Serialization.JavaScriptSerializer._charsToEscape[0] = "\\"; Sys.Serialization.JavaScriptSerializer._charsToEscapeRegExs["\\"] = new RegExp("\\\\", "g"); Sys.Serialization.JavaScriptSerializer._escapeChars["\\"] = "\\\\"; Sys.Serialization.JavaScriptSerializer._charsToEscape[1] = '"'; Sys.Serialization.JavaScriptSerializer._charsToEscapeRegExs['"'] = new RegExp('"', "g"); Sys.Serialization.JavaScriptSerializer._escapeChars['"'] = '\\"'; for(var a = 0; a < 32; a++) { var b = String.fromCharCode(a); Sys.Serialization.JavaScriptSerializer._charsToEscape[a + 2] = b; Sys.Serialization.JavaScriptSerializer._charsToEscapeRegExs[b] = new RegExp(b, "g"); Sys.Serialization.JavaScriptSerializer._escapeChars[b] = c[a] } }; Sys.Serialization.JavaScriptSerializer._serializeBooleanWithBuilder = function (b, a) { a.append(b.toString()) }; Sys.Serialization.JavaScriptSerializer._serializeNumberWithBuilder = function (a, b) { if(isFinite(a)) b.append(String(a)); else throw Error.invalidOperation(Sys.Res.cannotSerializeNonFiniteNumbers) }; Sys.Serialization.JavaScriptSerializer._serializeStringWithBuilder = function (a, c) { c.append('"'); if(Sys.Serialization.JavaScriptSerializer._escapeRegEx.test(a)) { if(Sys.Serialization.JavaScriptSerializer._charsToEscape.length === 0) Sys.Serialization.JavaScriptSerializer._init(); if(a.length < 128) a = a.replace(Sys.Serialization.JavaScriptSerializer._escapeRegExGlobal, function (a) { return Sys.Serialization.JavaScriptSerializer._escapeChars[a] }); else for(var d = 0; d < 34; d++) { var b = Sys.Serialization.JavaScriptSerializer._charsToEscape[d]; if(a.indexOf(b) !== -1) if(Sys.Browser.agent === Sys.Browser.Opera || Sys.Browser.agent === Sys.Browser.FireFox) a = a.split(b).join(Sys.Serialization.JavaScriptSerializer._escapeChars[b]); else a = a.replace(Sys.Serialization.JavaScriptSerializer._charsToEscapeRegExs[b], Sys.Serialization.JavaScriptSerializer._escapeChars[b]) } } c.append(a); c.append('"') }; Sys.Serialization.JavaScriptSerializer._serializeWithBuilder = function (b, a, i, g) { var c; switch(typeof b) { case "object": if(b) if(Number.isInstanceOfType(b)) Sys.Serialization.JavaScriptSerializer._serializeNumberWithBuilder(b, a); else if(Boolean.isInstanceOfType(b)) Sys.Serialization.JavaScriptSerializer._serializeBooleanWithBuilder(b, a); else if(String.isInstanceOfType(b)) Sys.Serialization.JavaScriptSerializer._serializeStringWithBuilder(b, a); else if(Array.isInstanceOfType(b)) { a.append("["); for(c = 0; c < b.length; ++c) { if(c > 0) a.append(","); Sys.Serialization.JavaScriptSerializer._serializeWithBuilder(b[c], a, false, g) } a.append("]") } else { if(Date.isInstanceOfType(b)) { a.append('"\\/Date('); a.append(b.getTime()); a.append(')\\/"'); break } var d = [], f = 0; for(var e in b) { if(e.startsWith("$")) continue; if(e === Sys.Serialization.JavaScriptSerializer._serverTypeFieldName && f !== 0) { d[f++] = d[0]; d[0] = e } else d[f++] = e } if(i) d.sort(); a.append("{"); var j = false; for(c = 0; c < f; c++) { var h = b[d[c]]; if(typeof h !== "undefined" && typeof h !== "function") { if(j) a.append(","); else j = true; Sys.Serialization.JavaScriptSerializer._serializeWithBuilder(d[c], a, i, g); a.append(":"); Sys.Serialization.JavaScriptSerializer._serializeWithBuilder(h, a, i, g) } } a.append("}") } else a.append("null"); break; case "number": Sys.Serialization.JavaScriptSerializer._serializeNumberWithBuilder(b, a); break; case "string": Sys.Serialization.JavaScriptSerializer._serializeStringWithBuilder(b, a); break; case "boolean": Sys.Serialization.JavaScriptSerializer._serializeBooleanWithBuilder(b, a); break; default: a.append("null") } }; Sys.Serialization.JavaScriptSerializer.serialize = function (b) { var a = new Sys.StringBuilder; Sys.Serialization.JavaScriptSerializer._serializeWithBuilder(b, a, false); return a.toString() }; Sys.Serialization.JavaScriptSerializer.deserialize = function (data, secure) { if(data.length === 0) throw Error.argument("data", Sys.Res.cannotDeserializeEmptyString); try { var exp = data.replace(Sys.Serialization.JavaScriptSerializer._dateRegEx, "$1new Date($2)"); if(secure && Sys.Serialization.JavaScriptSerializer._jsonRegEx.test(exp.replace(Sys.Serialization.JavaScriptSerializer._jsonStringRegEx, ""))) throw null; return eval("(" + exp + ")") } catch(a) { throw Error.argument("data", Sys.Res.cannotDeserializeInvalidJson) } }; Type.registerNamespace("Sys.UI"); Sys.EventHandlerList = function () { this._list = {} }; Sys.EventHandlerList.prototype = { _addHandler: function (b, a) { Array.add(this._getEvent(b, true), a) }, addHandler: function (b, a) { this._addHandler(b, a) }, _removeHandler: function (c, b) { var a = this._getEvent(c); if(!a) return; Array.remove(a, b) }, removeHandler: function (b, a) { this._removeHandler(b, a) }, getHandler: function (b) { var a = this._getEvent(b); if(!a || a.length === 0) return null; a = Array.clone(a); return function (c, d) { for(var b = 0, e = a.length; b < e; b++) a[b](c, d) } }, _getEvent: function (a, b) { if(!this._list[a]) { if(!b) return null; this._list[a] = [] } return this._list[a] } }; Sys.EventHandlerList.registerClass("Sys.EventHandlerList"); Sys.CommandEventArgs = function (c, a, b) { Sys.CommandEventArgs.initializeBase(this); this._commandName = c; this._commandArgument = a; this._commandSource = b }; Sys.CommandEventArgs.prototype = { _commandName: null, _commandArgument: null, _commandSource: null, get_commandName: function () { return this._commandName }, get_commandArgument: function () { return this._commandArgument }, get_commandSource: function () { return this._commandSource } }; Sys.CommandEventArgs.registerClass("Sys.CommandEventArgs", Sys.CancelEventArgs); Sys.INotifyPropertyChange = function () { }; Sys.INotifyPropertyChange.prototype = {}; Sys.INotifyPropertyChange.registerInterface("Sys.INotifyPropertyChange"); Sys.PropertyChangedEventArgs = function (a) { Sys.PropertyChangedEventArgs.initializeBase(this); this._propertyName = a }; Sys.PropertyChangedEventArgs.prototype = { get_propertyName: function () { return this._propertyName } }; Sys.PropertyChangedEventArgs.registerClass("Sys.PropertyChangedEventArgs", Sys.EventArgs); Sys.INotifyDisposing = function () { }; Sys.INotifyDisposing.prototype = {}; Sys.INotifyDisposing.registerInterface("Sys.INotifyDisposing"); Sys.Component = function () { if(Sys.Application) Sys.Application.registerDisposableObject(this) }; Sys.Component.prototype = { _id: null, _initialized: false, _updating: false, get_events: function () { if(!this._events) this._events = new Sys.EventHandlerList; return this._events }, get_id: function () { return this._id }, set_id: function (a) { this._id = a }, get_isInitialized: function () { return this._initialized }, get_isUpdating: function () { return this._updating }, add_disposing: function (a) { this.get_events().addHandler("disposing", a) }, remove_disposing: function (a) { this.get_events().removeHandler("disposing", a) }, add_propertyChanged: function (a) { this.get_events().addHandler("propertyChanged", a) }, remove_propertyChanged: function (a) { this.get_events().removeHandler("propertyChanged", a) }, beginUpdate: function () { this._updating = true }, dispose: function () { if(this._events) { var a = this._events.getHandler("disposing"); if(a) a(this, Sys.EventArgs.Empty) } delete this._events; Sys.Application.unregisterDisposableObject(this); Sys.Application.removeComponent(this) }, endUpdate: function () { this._updating = false; if(!this._initialized) this.initialize(); this.updated() }, initialize: function () { this._initialized = true }, raisePropertyChanged: function (b) { if(!this._events) return; var a = this._events.getHandler("propertyChanged"); if(a) a(this, new Sys.PropertyChangedEventArgs(b)) }, updated: function () { } }; Sys.Component.registerClass("Sys.Component", null, Sys.IDisposable, Sys.INotifyPropertyChange, Sys.INotifyDisposing); function Sys$Component$_setProperties(a, i) { var d, j = Object.getType(a), e = j === Object || j === Sys.UI.DomElement, h = Sys.Component.isInstanceOfType(a) && !a.get_isUpdating(); if(h) a.beginUpdate(); for(var c in i) { var b = i[c], f = e ? null : a["get_" + c]; if(e || typeof f !== "function") { var k = a[c]; if(!b || typeof b !== "object" || e && !k) a[c] = b; else Sys$Component$_setProperties(k, b) } else { var l = a["set_" + c]; if(typeof l === "function") l.apply(a, [b]); else if(b instanceof Array) { d = f.apply(a); for(var g = 0, m = d.length, n = b.length; g < n; g++, m++) d[m] = b[g] } else if(typeof b === "object" && Object.getType(b) === Object) { d = f.apply(a); Sys$Component$_setProperties(d, b) } } } if(h) a.endUpdate() } function Sys$Component$_setReferences(c, b) { for(var a in b) { var e = c["set_" + a], d = $find(b[a]); e.apply(c, [d]) } } var $create = Sys.Component.create = function (h, f, d, c, g) { var a = g ? new h(g) : new h, b = Sys.Application, i = b.get_isCreatingComponents(); a.beginUpdate(); if(f) Sys$Component$_setProperties(a, f); if(d) for(var e in d) a["add_" + e](d[e]); if(a.get_id()) b.addComponent(a); if(i) { b._createdComponents[b._createdComponents.length] = a; if(c) b._addComponentToSecondPass(a, c); else a.endUpdate() } else { if(c) Sys$Component$_setReferences(a, c); a.endUpdate() } return a }; Sys.UI.MouseButton = function () { throw Error.notImplemented() }; Sys.UI.MouseButton.prototype = { leftButton: 0, middleButton: 1, rightButton: 2 }; Sys.UI.MouseButton.registerEnum("Sys.UI.MouseButton"); Sys.UI.Key = function () { throw Error.notImplemented() }; Sys.UI.Key.prototype = { backspace: 8, tab: 9, enter: 13, esc: 27, space: 32, pageUp: 33, pageDown: 34, end: 35, home: 36, left: 37, up: 38, right: 39, down: 40, del: 127 }; Sys.UI.Key.registerEnum("Sys.UI.Key"); Sys.UI.Point = function (a, b) { this.x = a; this.y = b }; Sys.UI.Point.registerClass("Sys.UI.Point"); Sys.UI.Bounds = function (c, d, b, a) { this.x = c; this.y = d; this.height = a; this.width = b }; Sys.UI.Bounds.registerClass("Sys.UI.Bounds"); Sys.UI.DomEvent = function (e) { var a = e, b = this.type = a.type.toLowerCase(); this.rawEvent = a; this.altKey = a.altKey; if(typeof a.button !== "undefined") this.button = typeof a.which !== "undefined" ? a.button : a.button === 4 ? Sys.UI.MouseButton.middleButton : a.button === 2 ? Sys.UI.MouseButton.rightButton : Sys.UI.MouseButton.leftButton; if(b === "keypress") this.charCode = a.charCode || a.keyCode; else if(a.keyCode && a.keyCode === 46) this.keyCode = 127; else this.keyCode = a.keyCode; this.clientX = a.clientX; this.clientY = a.clientY; this.ctrlKey = a.ctrlKey; this.target = a.target ? a.target : a.srcElement; if(!b.startsWith("key")) if(typeof a.offsetX !== "undefined" && typeof a.offsetY !== "undefined") { this.offsetX = a.offsetX; this.offsetY = a.offsetY } else if(this.target && this.target.nodeType !== 3 && typeof a.clientX === "number") { var c = Sys.UI.DomElement.getLocation(this.target), d = Sys.UI.DomElement._getWindow(this.target); this.offsetX = (d.pageXOffset || 0) + a.clientX - c.x; this.offsetY = (d.pageYOffset || 0) + a.clientY - c.y } this.screenX = a.screenX; this.screenY = a.screenY; this.shiftKey = a.shiftKey }; Sys.UI.DomEvent.prototype = { preventDefault: function () { if(this.rawEvent.preventDefault) this.rawEvent.preventDefault(); else if(window.event) this.rawEvent.returnValue = false }, stopPropagation: function () { if(this.rawEvent.stopPropagation) this.rawEvent.stopPropagation(); else if(window.event) this.rawEvent.cancelBubble = true } }; Sys.UI.DomEvent.registerClass("Sys.UI.DomEvent"); var $addHandler = Sys.UI.DomEvent.addHandler = function (a, d, e, g) { if(!a._events) a._events = {}; var c = a._events[d]; if(!c) a._events[d] = c = []; var b; if(a.addEventListener) { b = function (b) { return e.call(a, new Sys.UI.DomEvent(b)) }; a.addEventListener(d, b, false) } else if(a.attachEvent) { b = function () { var b = {}; try { b = Sys.UI.DomElement._getWindow(a).event } catch(c) { } return e.call(a, new Sys.UI.DomEvent(b)) }; a.attachEvent("on" + d, b) } c[c.length] = { handler: e, browserHandler: b, autoRemove: g }; if(g) { var f = a.dispose; if(f !== Sys.UI.DomEvent._disposeHandlers) { a.dispose = Sys.UI.DomEvent._disposeHandlers; if(typeof f !== "undefined") a._chainDispose = f } } }, $addHandlers = Sys.UI.DomEvent.addHandlers = function (f, d, c, e) { for(var b in d) { var a = d[b]; if(c) a = Function.createDelegate(c, a); $addHandler(f, b, a, e || false) } }, $clearHandlers = Sys.UI.DomEvent.clearHandlers = function (a) { Sys.UI.DomEvent._clearHandlers(a, false) }; Sys.UI.DomEvent._clearHandlers = function (a, g) { if(a._events) { var e = a._events; for(var b in e) { var d = e[b]; for(var c = d.length - 1; c >= 0; c--) { var f = d[c]; if(!g || f.autoRemove) $removeHandler(a, b, f.handler) } } a._events = null } }; Sys.UI.DomEvent._disposeHandlers = function () { Sys.UI.DomEvent._clearHandlers(this, true); var b = this._chainDispose, a = typeof b; if(a !== "undefined") { this.dispose = b; this._chainDispose = null; if(a === "function") this.dispose() } }; var $removeHandler = Sys.UI.DomEvent.removeHandler = function (b, a, c) { Sys.UI.DomEvent._removeHandler(b, a, c) }; Sys.UI.DomEvent._removeHandler = function (a, e, f) { var d = null, c = a._events[e]; for(var b = 0, g = c.length; b < g; b++) if(c[b].handler === f) { d = c[b].browserHandler; break } if(a.removeEventListener) a.removeEventListener(e, d, false); else if(a.detachEvent) a.detachEvent("on" + e, d); c.splice(b, 1) }; Sys.UI.DomElement = function () { }; Sys.UI.DomElement.registerClass("Sys.UI.DomElement"); Sys.UI.DomElement.addCssClass = function (a, b) { if(!Sys.UI.DomElement.containsCssClass(a, b)) if(a.className === "") a.className = b; else a.className += " " + b }; Sys.UI.DomElement.containsCssClass = function (b, a) { return Array.contains(b.className.split(" "), a) }; Sys.UI.DomElement.getBounds = function (a) { var b = Sys.UI.DomElement.getLocation(a); return new Sys.UI.Bounds(b.x, b.y, a.offsetWidth || 0, a.offsetHeight || 0) }; var $get = Sys.UI.DomElement.getElementById = function (f, e) { if(!e) return document.getElementById(f); if(e.getElementById) return e.getElementById(f); var c = [], d = e.childNodes; for(var b = 0; b < d.length; b++) { var a = d[b]; if(a.nodeType == 1) c[c.length] = a } while(c.length) { a = c.shift(); if(a.id == f) return a; d = a.childNodes; for(b = 0; b < d.length; b++) { a = d[b]; if(a.nodeType == 1) c[c.length] = a } } return null }; if(document.documentElement.getBoundingClientRect) Sys.UI.DomElement.getLocation = function (b) { if(b.self || b.nodeType === 9 || b === document.documentElement || b.parentNode === b.ownerDocument.documentElement) return new Sys.UI.Point(0, 0); var f = b.getBoundingClientRect(); if(!f) return new Sys.UI.Point(0, 0); var k, e = b.ownerDocument.documentElement, c = Math.round(f.left) + e.scrollLeft, d = Math.round(f.top) + e.scrollTop; if(Sys.Browser.agent === Sys.Browser.InternetExplorer) { try { var g = b.ownerDocument.parentWindow.frameElement || null; if(g) { var h = g.frameBorder === "0" || g.frameBorder === "no" ? 2 : 0; c += h; d += h } } catch(l) { } if(Sys.Browser.version === 7 && !document.documentMode) { var i = document.body, j = i.getBoundingClientRect(), a = (j.right - j.left) / i.clientWidth; a = Math.round(a * 100); a = (a - a % 5) / 100; if(!isNaN(a) && a !== 1) { c = Math.round(c / a); d = Math.round(d / a) } } if((document.documentMode || 0) < 8) { c -= e.clientLeft; d -= e.clientTop } } return new Sys.UI.Point(c, d) }; else if(Sys.Browser.agent === Sys.Browser.Safari) Sys.UI.DomElement.getLocation = function (c) { if(c.window && c.window === c || c.nodeType === 9) return new Sys.UI.Point(0, 0); var d = 0, e = 0, a, j = null, g = null, b; for(a = c; a; j = a, (g = b, a = a.offsetParent)) { b = Sys.UI.DomElement._getCurrentStyle(a); var f = a.tagName ? a.tagName.toUpperCase() : null; if((a.offsetLeft || a.offsetTop) && (f !== "BODY" || (!g || g.position !== "absolute"))) { d += a.offsetLeft; e += a.offsetTop } if(j && Sys.Browser.version >= 3) { d += parseInt(b.borderLeftWidth); e += parseInt(b.borderTopWidth) } } b = Sys.UI.DomElement._getCurrentStyle(c); var h = b ? b.position : null; if(!h || h !== "absolute") for(a = c.parentNode; a; a = a.parentNode) { f = a.tagName ? a.tagName.toUpperCase() : null; if(f !== "BODY" && f !== "HTML" && (a.scrollLeft || a.scrollTop)) { d -= a.scrollLeft || 0; e -= a.scrollTop || 0 } b = Sys.UI.DomElement._getCurrentStyle(a); var i = b ? b.position : null; if(i && i === "absolute") break } return new Sys.UI.Point(d, e) }; else Sys.UI.DomElement.getLocation = function (d) { if(d.window && d.window === d || d.nodeType === 9) return new Sys.UI.Point(0, 0); var e = 0, f = 0, a, i = null, g = null, b = null; for(a = d; a; i = a, (g = b, a = a.offsetParent)) { var c = a.tagName ? a.tagName.toUpperCase() : null; b = Sys.UI.DomElement._getCurrentStyle(a); if((a.offsetLeft || a.offsetTop) && !(c === "BODY" && (!g || g.position !== "absolute"))) { e += a.offsetLeft; f += a.offsetTop } if(i !== null && b) { if(c !== "TABLE" && c !== "TD" && c !== "HTML") { e += parseInt(b.borderLeftWidth) || 0; f += parseInt(b.borderTopWidth) || 0 } if(c === "TABLE" && (b.position === "relative" || b.position === "absolute")) { e += parseInt(b.marginLeft) || 0; f += parseInt(b.marginTop) || 0 } } } b = Sys.UI.DomElement._getCurrentStyle(d); var h = b ? b.position : null; if(!h || h !== "absolute") for(a = d.parentNode; a; a = a.parentNode) { c = a.tagName ? a.tagName.toUpperCase() : null; if(c !== "BODY" && c !== "HTML" && (a.scrollLeft || a.scrollTop)) { e -= a.scrollLeft || 0; f -= a.scrollTop || 0; b = Sys.UI.DomElement._getCurrentStyle(a); if(b) { e += parseInt(b.borderLeftWidth) || 0; f += parseInt(b.borderTopWidth) || 0 } } } return new Sys.UI.Point(e, f) }; Sys.UI.DomElement.isDomElement = function (a) { return Sys._isDomElement(a) }; Sys.UI.DomElement.removeCssClass = function (d, c) { var a = " " + d.className + " ", b = a.indexOf(" " + c + " "); if(b >= 0) d.className = (a.substr(0, b) + " " + a.substring(b + c.length + 1, a.length)).trim() }; Sys.UI.DomElement.resolveElement = function (b, c) { var a = b; if(!a) return null; if(typeof a === "string") a = Sys.UI.DomElement.getElementById(a, c); return a }; Sys.UI.DomElement.raiseBubbleEvent = function (c, d) { var b = c; while(b) { var a = b.control; if(a && a.onBubbleEvent && a.raiseBubbleEvent) { Sys.UI.DomElement._raiseBubbleEventFromControl(a, c, d); return } b = b.parentNode } }; Sys.UI.DomElement._raiseBubbleEventFromControl = function (a, b, c) { if(!a.onBubbleEvent(b, c)) a._raiseBubbleEvent(b, c) }; Sys.UI.DomElement.setLocation = function (b, c, d) { var a = b.style; a.position = "absolute"; a.left = c + "px"; a.top = d + "px" }; Sys.UI.DomElement.toggleCssClass = function (b, a) { if(Sys.UI.DomElement.containsCssClass(b, a)) Sys.UI.DomElement.removeCssClass(b, a); else Sys.UI.DomElement.addCssClass(b, a) }; Sys.UI.DomElement.getVisibilityMode = function (a) { return a._visibilityMode === Sys.UI.VisibilityMode.hide ? Sys.UI.VisibilityMode.hide : Sys.UI.VisibilityMode.collapse }; Sys.UI.DomElement.setVisibilityMode = function (a, b) { Sys.UI.DomElement._ensureOldDisplayMode(a); if(a._visibilityMode !== b) { a._visibilityMode = b; if(Sys.UI.DomElement.getVisible(a) === false) if(a._visibilityMode === Sys.UI.VisibilityMode.hide) a.style.display = a._oldDisplayMode; else a.style.display = "none"; a._visibilityMode = b } }; Sys.UI.DomElement.getVisible = function (b) { var a = b.currentStyle || Sys.UI.DomElement._getCurrentStyle(b); if(!a) return true; return a.visibility !== "hidden" && a.display !== "none" }; Sys.UI.DomElement.setVisible = function (a, b) { if(b !== Sys.UI.DomElement.getVisible(a)) { Sys.UI.DomElement._ensureOldDisplayMode(a); a.style.visibility = b ? "visible" : "hidden"; if(b || a._visibilityMode === Sys.UI.VisibilityMode.hide) a.style.display = a._oldDisplayMode; else a.style.display = "none" } }; Sys.UI.DomElement._ensureOldDisplayMode = function (a) { if(!a._oldDisplayMode) { var b = a.currentStyle || Sys.UI.DomElement._getCurrentStyle(a); a._oldDisplayMode = b ? b.display : null; if(!a._oldDisplayMode || a._oldDisplayMode === "none") switch(a.tagName.toUpperCase()) { case "DIV": case "P": case "ADDRESS": case "BLOCKQUOTE": case "BODY": case "COL": case "COLGROUP": case "DD": case "DL": case "DT": case "FIELDSET": case "FORM": case "H1": case "H2": case "H3": case "H4": case "H5": case "H6": case "HR": case "IFRAME": case "LEGEND": case "OL": case "PRE": case "TABLE": case "TD": case "TH": case "TR": case "UL": a._oldDisplayMode = "block"; break; case "LI": a._oldDisplayMode = "list-item"; break; default: a._oldDisplayMode = "inline" } } }; Sys.UI.DomElement._getWindow = function (a) { var b = a.ownerDocument || a.document || a; return b.defaultView || b.parentWindow }; Sys.UI.DomElement._getCurrentStyle = function (a) { if(a.nodeType === 3) return null; var c = Sys.UI.DomElement._getWindow(a); if(a.documentElement) a = a.documentElement; var b = c && a !== c && c.getComputedStyle ? c.getComputedStyle(a, null) : a.currentStyle || a.style; if(!b && Sys.Browser.agent === Sys.Browser.Safari && a.style) { var g = a.style.display, f = a.style.position; a.style.position = "absolute"; a.style.display = "block"; var e = c.getComputedStyle(a, null); a.style.display = g; a.style.position = f; b = {}; for(var d in e) b[d] = e[d]; b.display = "none" } return b }; Sys.IContainer = function () { }; Sys.IContainer.prototype = {}; Sys.IContainer.registerInterface("Sys.IContainer"); Sys.ApplicationLoadEventArgs = function (b, a) { Sys.ApplicationLoadEventArgs.initializeBase(this); this._components = b; this._isPartialLoad = a }; Sys.ApplicationLoadEventArgs.prototype = { get_components: function () { return this._components }, get_isPartialLoad: function () { return this._isPartialLoad } }; Sys.ApplicationLoadEventArgs.registerClass("Sys.ApplicationLoadEventArgs", Sys.EventArgs); Sys._Application = function () { Sys._Application.initializeBase(this); this._disposableObjects = []; this._components = {}; this._createdComponents = []; this._secondPassComponents = []; this._unloadHandlerDelegate = Function.createDelegate(this, this._unloadHandler); Sys.UI.DomEvent.addHandler(window, "unload", this._unloadHandlerDelegate); this._domReady() }; Sys._Application.prototype = { _creatingComponents: false, _disposing: false, _deleteCount: 0, get_isCreatingComponents: function () { return this._creatingComponents }, get_isDisposing: function () { return this._disposing }, add_init: function (a) { if(this._initialized) a(this, Sys.EventArgs.Empty); else this.get_events().addHandler("init", a) }, remove_init: function (a) { this.get_events().removeHandler("init", a) }, add_load: function (a) { this.get_events().addHandler("load", a) }, remove_load: function (a) { this.get_events().removeHandler("load", a) }, add_unload: function (a) { this.get_events().addHandler("unload", a) }, remove_unload: function (a) { this.get_events().removeHandler("unload", a) }, addComponent: function (a) { this._components[a.get_id()] = a }, beginCreateComponents: function () { this._creatingComponents = true }, dispose: function () { if(!this._disposing) { this._disposing = true; if(this._timerCookie) { window.clearTimeout(this._timerCookie); delete this._timerCookie } if(this._endRequestHandler) { Sys.WebForms.PageRequestManager.getInstance().remove_endRequest(this._endRequestHandler); delete this._endRequestHandler } if(this._beginRequestHandler) { Sys.WebForms.PageRequestManager.getInstance().remove_beginRequest(this._beginRequestHandler); delete this._beginRequestHandler } if(window.pageUnload) window.pageUnload(this, Sys.EventArgs.Empty); var c = this.get_events().getHandler("unload"); if(c) c(this, Sys.EventArgs.Empty); var b = Array.clone(this._disposableObjects); for(var a = 0, f = b.length; a < f; a++) { var d = b[a]; if(typeof d !== "undefined") d.dispose() } Array.clear(this._disposableObjects); Sys.UI.DomEvent.removeHandler(window, "unload", this._unloadHandlerDelegate); if(Sys._ScriptLoader) { var e = Sys._ScriptLoader.getInstance(); if(e) e.dispose() } Sys._Application.callBaseMethod(this, "dispose") } }, disposeElement: function (c, j) { if(c.nodeType === 1) { var b, h = c.getElementsByTagName("*"), g = h.length, i = new Array(g); for(b = 0; b < g; b++) i[b] = h[b]; for(b = g - 1; b >= 0; b--) { var d = i[b], f = d.dispose; if(f && typeof f === "function") d.dispose(); else { var e = d.control; if(e && typeof e.dispose === "function") e.dispose() } var a = d._behaviors; if(a) this._disposeComponents(a); a = d._components; if(a) { this._disposeComponents(a); d._components = null } } if(!j) { var f = c.dispose; if(f && typeof f === "function") c.dispose(); else { var e = c.control; if(e && typeof e.dispose === "function") e.dispose() } var a = c._behaviors; if(a) this._disposeComponents(a); a = c._components; if(a) { this._disposeComponents(a); c._components = null } } } }, endCreateComponents: function () { var b = this._secondPassComponents; for(var a = 0, d = b.length; a < d; a++) { var c = b[a].component; Sys$Component$_setReferences(c, b[a].references); c.endUpdate() } this._secondPassComponents = []; this._creatingComponents = false }, findComponent: function (b, a) { return a ? Sys.IContainer.isInstanceOfType(a) ? a.findComponent(b) : a[b] || null : Sys.Application._components[b] || null }, getComponents: function () { var a = [], b = this._components; for(var c in b) a[a.length] = b[c]; return a }, initialize: function () { if(!this.get_isInitialized() && !this._disposing) { Sys._Application.callBaseMethod(this, "initialize"); this._raiseInit(); if(this.get_stateString) { if(Sys.WebForms && Sys.WebForms.PageRequestManager) { this._beginRequestHandler = Function.createDelegate(this, this._onPageRequestManagerBeginRequest); Sys.WebForms.PageRequestManager.getInstance().add_beginRequest(this._beginRequestHandler); this._endRequestHandler = Function.createDelegate(this, this._onPageRequestManagerEndRequest); Sys.WebForms.PageRequestManager.getInstance().add_endRequest(this._endRequestHandler) } var a = this.get_stateString(); if(a !== this._currentEntry) this._navigate(a); else this._ensureHistory() } this.raiseLoad() } }, notifyScriptLoaded: function () { }, registerDisposableObject: function (b) { if(!this._disposing) { var a = this._disposableObjects, c = a.length; a[c] = b; b.__msdisposeindex = c } }, raiseLoad: function () { var b = this.get_events().getHandler("load"), a = new Sys.ApplicationLoadEventArgs(Array.clone(this._createdComponents), !!this._loaded); this._loaded = true; if(b) b(this, a); if(window.pageLoad) window.pageLoad(this, a); this._createdComponents = [] }, removeComponent: function (b) { var a = b.get_id(); if(a) delete this._components[a] }, unregisterDisposableObject: function (a) { if(!this._disposing) { var e = a.__msdisposeindex; if(typeof e === "number") { var b = this._disposableObjects; delete b[e]; delete a.__msdisposeindex; if(++this._deleteCount > 1000) { var c = []; for(var d = 0, f = b.length; d < f; d++) { a = b[d]; if(typeof a !== "undefined") { a.__msdisposeindex = c.length; c.push(a) } } this._disposableObjects = c; this._deleteCount = 0 } } } }, _addComponentToSecondPass: function (b, a) { this._secondPassComponents[this._secondPassComponents.length] = { component: b, references: a } }, _disposeComponents: function (a) { if(a) for(var b = a.length - 1; b >= 0; b--) { var c = a[b]; if(typeof c.dispose === "function") c.dispose() } }, _domReady: function () { var a, g, f = this; function b() { f.initialize() } var c = function () { Sys.UI.DomEvent.removeHandler(window, "load", c); b() }; Sys.UI.DomEvent.addHandler(window, "load", c); if(document.addEventListener) try { document.addEventListener("DOMContentLoaded", a = function () { document.removeEventListener("DOMContentLoaded", a, false); b() }, false) } catch(h) { } else if(document.attachEvent) if(window == window.top && document.documentElement.doScroll) { var e, d = document.createElement("div"); a = function () { try { d.doScroll("left") } catch(c) { e = window.setTimeout(a, 0); return } d = null; b() }; a() } else document.attachEvent("onreadystatechange", a = function () { if(document.readyState === "complete") { document.detachEvent("onreadystatechange", a); b() } }) }, _raiseInit: function () { var a = this.get_events().getHandler("init"); if(a) { this.beginCreateComponents(); a(this, Sys.EventArgs.Empty); this.endCreateComponents() } }, _unloadHandler: function () { this.dispose() } }; Sys._Application.registerClass("Sys._Application", Sys.Component, Sys.IContainer); Sys.Application = new Sys._Application; var $find = Sys.Application.findComponent; Sys.UI.Behavior = function (b) { Sys.UI.Behavior.initializeBase(this); this._element = b; var a = b._behaviors; if(!a) b._behaviors = [this]; else a[a.length] = this }; Sys.UI.Behavior.prototype = { _name: null, get_element: function () { return this._element }, get_id: function () { var a = Sys.UI.Behavior.callBaseMethod(this, "get_id"); if(a) return a; if(!this._element || !this._element.id) return ""; return this._element.id + "$" + this.get_name() }, get_name: function () { if(this._name) return this._name; var a = Object.getTypeName(this), b = a.lastIndexOf("."); if(b !== -1) a = a.substr(b + 1); if(!this.get_isInitialized()) this._name = a; return a }, set_name: function (a) { this._name = a }, initialize: function () { Sys.UI.Behavior.callBaseMethod(this, "initialize"); var a = this.get_name(); if(a) this._element[a] = this }, dispose: function () { Sys.UI.Behavior.callBaseMethod(this, "dispose"); var a = this._element; if(a) { var c = this.get_name(); if(c) a[c] = null; var b = a._behaviors; Array.remove(b, this); if(b.length === 0) a._behaviors = null; delete this._element } } }; Sys.UI.Behavior.registerClass("Sys.UI.Behavior", Sys.Component); Sys.UI.Behavior.getBehaviorByName = function (b, c) { var a = b[c]; return a && Sys.UI.Behavior.isInstanceOfType(a) ? a : null }; Sys.UI.Behavior.getBehaviors = function (a) { if(!a._behaviors) return []; return Array.clone(a._behaviors) }; Sys.UI.Behavior.getBehaviorsByType = function (d, e) { var a = d._behaviors, c = []; if(a) for(var b = 0, f = a.length; b < f; b++) if(e.isInstanceOfType(a[b])) c[c.length] = a[b]; return c }; Sys.UI.VisibilityMode = function () { throw Error.notImplemented() }; Sys.UI.VisibilityMode.prototype = { hide: 0, collapse: 1 }; Sys.UI.VisibilityMode.registerEnum("Sys.UI.VisibilityMode"); Sys.UI.Control = function (a) { Sys.UI.Control.initializeBase(this); this._element = a; a.control = this; var b = this.get_role(); if(b) a.setAttribute("role", b) }; Sys.UI.Control.prototype = { _parent: null, _visibilityMode: Sys.UI.VisibilityMode.hide, get_element: function () { return this._element }, get_id: function () { if(!this._element) return ""; return this._element.id }, set_id: function () { throw Error.invalidOperation(Sys.Res.cantSetId) }, get_parent: function () { if(this._parent) return this._parent; if(!this._element) return null; var a = this._element.parentNode; while(a) { if(a.control) return a.control; a = a.parentNode } return null }, set_parent: function (a) { this._parent = a }, get_role: function () { return null }, get_visibilityMode: function () { return Sys.UI.DomElement.getVisibilityMode(this._element) }, set_visibilityMode: function (a) { Sys.UI.DomElement.setVisibilityMode(this._element, a) }, get_visible: function () { return Sys.UI.DomElement.getVisible(this._element) }, set_visible: function (a) { Sys.UI.DomElement.setVisible(this._element, a) }, addCssClass: function (a) { Sys.UI.DomElement.addCssClass(this._element, a) }, dispose: function () { Sys.UI.Control.callBaseMethod(this, "dispose"); if(this._element) { this._element.control = null; delete this._element } if(this._parent) delete this._parent }, onBubbleEvent: function () { return false }, raiseBubbleEvent: function (a, b) { this._raiseBubbleEvent(a, b) }, _raiseBubbleEvent: function (b, c) { var a = this.get_parent(); while(a) { if(a.onBubbleEvent(b, c)) return; a = a.get_parent() } }, removeCssClass: function (a) { Sys.UI.DomElement.removeCssClass(this._element, a) }, toggleCssClass: function (a) { Sys.UI.DomElement.toggleCssClass(this._element, a) } }; Sys.UI.Control.registerClass("Sys.UI.Control", Sys.Component); Sys.HistoryEventArgs = function (a) { Sys.HistoryEventArgs.initializeBase(this); this._state = a }; Sys.HistoryEventArgs.prototype = { get_state: function () { return this._state } }; Sys.HistoryEventArgs.registerClass("Sys.HistoryEventArgs", Sys.EventArgs); Sys.Application._appLoadHandler = null; Sys.Application._beginRequestHandler = null; Sys.Application._clientId = null; Sys.Application._currentEntry = ""; Sys.Application._endRequestHandler = null; Sys.Application._history = null; Sys.Application._enableHistory = false; Sys.Application._historyFrame = null; Sys.Application._historyInitialized = false; Sys.Application._historyPointIsNew = false; Sys.Application._ignoreTimer = false; Sys.Application._initialState = null; Sys.Application._state = {}; Sys.Application._timerCookie = 0; Sys.Application._timerHandler = null; Sys.Application._uniqueId = null; Sys._Application.prototype.get_stateString = function () { var a = null; if(Sys.Browser.agent === Sys.Browser.Firefox) { var c = window.location.href, b = c.indexOf("#"); if(b !== -1) a = c.substring(b + 1); else a = ""; return a } else a = window.location.hash; if(a.length > 0 && a.charAt(0) === "#") a = a.substring(1); return a }; Sys._Application.prototype.get_enableHistory = function () { return this._enableHistory }; Sys._Application.prototype.set_enableHistory = function (a) { this._enableHistory = a }; Sys._Application.prototype.add_navigate = function (a) { this.get_events().addHandler("navigate", a) }; Sys._Application.prototype.remove_navigate = function (a) { this.get_events().removeHandler("navigate", a) }; Sys._Application.prototype.addHistoryPoint = function (c, f) { this._ensureHistory(); var b = this._state; for(var a in c) { var d = c[a]; if(d === null) { if(typeof b[a] !== "undefined") delete b[a] } else b[a] = d } var e = this._serializeState(b); this._historyPointIsNew = true; this._setState(e, f); this._raiseNavigate() }; Sys._Application.prototype.setServerId = function (a, b) { this._clientId = a; this._uniqueId = b }; Sys._Application.prototype.setServerState = function (a) { this._ensureHistory(); this._state.__s = a; this._updateHiddenField(a) }; Sys._Application.prototype._deserializeState = function (a) { var e = {}; a = a || ""; var b = a.indexOf("&&"); if(b !== -1 && b + 2 < a.length) { e.__s = a.substr(b + 2); a = a.substr(0, b) } var g = a.split("&"); for(var f = 0, j = g.length; f < j; f++) { var d = g[f], c = d.indexOf("="); if(c !== -1 && c + 1 < d.length) { var i = d.substr(0, c), h = d.substr(c + 1); e[i] = decodeURIComponent(h) } } return e }; Sys._Application.prototype._enableHistoryInScriptManager = function () { this._enableHistory = true }; Sys._Application.prototype._ensureHistory = function () { if(!this._historyInitialized && this._enableHistory) { if(Sys.Browser.agent === Sys.Browser.InternetExplorer && Sys.Browser.documentMode < 8) { this._historyFrame = document.getElementById("__historyFrame"); this._ignoreIFrame = true } this._timerHandler = Function.createDelegate(this, this._onIdle); this._timerCookie = window.setTimeout(this._timerHandler, 100); try { this._initialState = this._deserializeState(this.get_stateString()) } catch(a) { } this._historyInitialized = true } }; Sys._Application.prototype._navigate = function (c) { this._ensureHistory(); var b = this._deserializeState(c); if(this._uniqueId) { var d = this._state.__s || "", a = b.__s || ""; if(a !== d) { this._updateHiddenField(a); __doPostBack(this._uniqueId, a); this._state = b; return } } this._setState(c); this._state = b; this._raiseNavigate() }; Sys._Application.prototype._onIdle = function () { delete this._timerCookie; var a = this.get_stateString(); if(a !== this._currentEntry) { if(!this._ignoreTimer) { this._historyPointIsNew = false; this._navigate(a) } } else this._ignoreTimer = false; this._timerCookie = window.setTimeout(this._timerHandler, 100) }; Sys._Application.prototype._onIFrameLoad = function (a) { this._ensureHistory(); if(!this._ignoreIFrame) { this._historyPointIsNew = false; this._navigate(a) } this._ignoreIFrame = false }; Sys._Application.prototype._onPageRequestManagerBeginRequest = function () { this._ignoreTimer = true; this._originalTitle = document.title }; Sys._Application.prototype._onPageRequestManagerEndRequest = function (g, f) { var d = f.get_dataItems()[this._clientId], c = this._originalTitle; this._originalTitle = null; var b = document.getElementById("__EVENTTARGET"); if(b && b.value === this._uniqueId) b.value = ""; if(typeof d !== "undefined") { this.setServerState(d); this._historyPointIsNew = true } else this._ignoreTimer = false; var a = this._serializeState(this._state); if(a !== this._currentEntry) { this._ignoreTimer = true; if(typeof c === "string") { if(Sys.Browser.agent !== Sys.Browser.InternetExplorer || Sys.Browser.version > 7) { var e = document.title; document.title = c; this._setState(a); document.title = e } else this._setState(a); this._raiseNavigate() } else { this._setState(a); this._raiseNavigate() } } }; Sys._Application.prototype._raiseNavigate = function () { var d = this._historyPointIsNew, c = this.get_events().getHandler("navigate"), b = {}; for(var a in this._state) if(a !== "__s") b[a] = this._state[a]; var e = new Sys.HistoryEventArgs(b); if(c) c(this, e); if(!d) { var f; try { if(Sys.Browser.agent === Sys.Browser.Firefox && window.location.hash && (!window.frameElement || window.top.location.hash)) Sys.Browser.version < 3.5 ? window.history.go(0) : (location.hash = this.get_stateString()) } catch(g) { } } }; Sys._Application.prototype._serializeState = function (d) { var b = []; for(var a in d) { var e = d[a]; if(a === "__s") var c = e; else b[b.length] = a + "=" + encodeURIComponent(e) } return b.join("&") + (c ? "&&" + c : "") }; Sys._Application.prototype._setState = function (a, b) { if(this._enableHistory) { a = a || ""; if(a !== this._currentEntry) { if(window.theForm) { var d = window.theForm.action, e = d.indexOf("#"); window.theForm.action = (e !== -1 ? d.substring(0, e) : d) + "#" + a } if(this._historyFrame && this._historyPointIsNew) { this._ignoreIFrame = true; var c = this._historyFrame.contentWindow.document; c.open("javascript:'<html></html>'"); c.write("<html><head><title>" + (b || document.title) + "</title><scri" + 'pt type="text/javascript">parent.Sys.Application._onIFrameLoad(' + Sys.Serialization.JavaScriptSerializer.serialize(a) + ");</scri" + "pt></head><body></body></html>"); c.close() } this._ignoreTimer = false; this._currentEntry = a; if(this._historyFrame || this._historyPointIsNew) { var f = this.get_stateString(); if(a !== f) { window.location.hash = a; this._currentEntry = this.get_stateString(); if(typeof b !== "undefined" && b !== null) document.title = b } } this._historyPointIsNew = false } } }; Sys._Application.prototype._updateHiddenField = function (b) { if(this._clientId) { var a = document.getElementById(this._clientId); if(a) a.value = b } }; if(!window.XMLHttpRequest) window.XMLHttpRequest = function () { var b = ["Msxml2.XMLHTTP.3.0", "Msxml2.XMLHTTP"]; for(var a = 0, c = b.length; a < c; a++) try { return new ActiveXObject(b[a]) } catch(d) { } return null }; Type.registerNamespace("Sys.Net"); Sys.Net.WebRequestExecutor = function () { this._webRequest = null; this._resultObject = null }; Sys.Net.WebRequestExecutor.prototype = { get_webRequest: function () { return this._webRequest }, _set_webRequest: function (a) { this._webRequest = a }, get_started: function () { throw Error.notImplemented() }, get_responseAvailable: function () { throw Error.notImplemented() }, get_timedOut: function () { throw Error.notImplemented() }, get_aborted: function () { throw Error.notImplemented() }, get_responseData: function () { throw Error.notImplemented() }, get_statusCode: function () { throw Error.notImplemented() }, get_statusText: function () { throw Error.notImplemented() }, get_xml: function () { throw Error.notImplemented() }, get_object: function () { if(!this._resultObject) this._resultObject = Sys.Serialization.JavaScriptSerializer.deserialize(this.get_responseData()); return this._resultObject }, executeRequest: function () { throw Error.notImplemented() }, abort: function () { throw Error.notImplemented() }, getResponseHeader: function () { throw Error.notImplemented() }, getAllResponseHeaders: function () { throw Error.notImplemented() } }; Sys.Net.WebRequestExecutor.registerClass("Sys.Net.WebRequestExecutor"); Sys.Net.XMLDOM = function (d) { if(!window.DOMParser) { var c = ["Msxml2.DOMDocument.3.0", "Msxml2.DOMDocument"]; for(var b = 0, f = c.length; b < f; b++) try { var a = new ActiveXObject(c[b]); a.async = false; a.loadXML(d); a.setProperty("SelectionLanguage", "XPath"); return a } catch(g) { } } else try { var e = new window.DOMParser; return e.parseFromString(d, "text/xml") } catch(g) { } return null }; Sys.Net.XMLHttpExecutor = function () { Sys.Net.XMLHttpExecutor.initializeBase(this); var a = this; this._xmlHttpRequest = null; this._webRequest = null; this._responseAvailable = false; this._timedOut = false; this._timer = null; this._aborted = false; this._started = false; this._onReadyStateChange = function () { if(a._xmlHttpRequest.readyState === 4) { try { if(typeof a._xmlHttpRequest.status === "undefined") return } catch(b) { return } a._clearTimer(); a._responseAvailable = true; try { a._webRequest.completed(Sys.EventArgs.Empty) } finally { if(a._xmlHttpRequest != null) { a._xmlHttpRequest.onreadystatechange = Function.emptyMethod; a._xmlHttpRequest = null } } } }; this._clearTimer = function () { if(a._timer != null) { window.clearTimeout(a._timer); a._timer = null } }; this._onTimeout = function () { if(!a._responseAvailable) { a._clearTimer(); a._timedOut = true; a._xmlHttpRequest.onreadystatechange = Function.emptyMethod; a._xmlHttpRequest.abort(); a._webRequest.completed(Sys.EventArgs.Empty); a._xmlHttpRequest = null } } }; Sys.Net.XMLHttpExecutor.prototype = { get_timedOut: function () { return this._timedOut }, get_started: function () { return this._started }, get_responseAvailable: function () { return this._responseAvailable }, get_aborted: function () { return this._aborted }, executeRequest: function () { this._webRequest = this.get_webRequest(); var c = this._webRequest.get_body(), a = this._webRequest.get_headers(); this._xmlHttpRequest = new XMLHttpRequest; this._xmlHttpRequest.onreadystatechange = this._onReadyStateChange; var e = this._webRequest.get_httpVerb(); this._xmlHttpRequest.open(e, this._webRequest.getResolvedUrl(), true); this._xmlHttpRequest.setRequestHeader("X-Requested-With", "XMLHttpRequest"); if(a) for(var b in a) { var f = a[b]; if(typeof f !== "function") this._xmlHttpRequest.setRequestHeader(b, f) } if(e.toLowerCase() === "post") { if(a === null || !a["Content-Type"]) this._xmlHttpRequest.setRequestHeader("Content-Type", "application/x-www-form-urlencoded; charset=utf-8"); if(!c) c = "" } var d = this._webRequest.get_timeout(); if(d > 0) this._timer = window.setTimeout(Function.createDelegate(this, this._onTimeout), d); this._xmlHttpRequest.send(c); this._started = true }, getResponseHeader: function (b) { var a; try { a = this._xmlHttpRequest.getResponseHeader(b) } catch(c) { } if(!a) a = ""; return a }, getAllResponseHeaders: function () { return this._xmlHttpRequest.getAllResponseHeaders() }, get_responseData: function () { return this._xmlHttpRequest.responseText }, get_statusCode: function () { var a = 0; try { a = this._xmlHttpRequest.status } catch(b) { } return a }, get_statusText: function () { return this._xmlHttpRequest.statusText }, get_xml: function () { var a = this._xmlHttpRequest.responseXML; if(!a || !a.documentElement) { a = Sys.Net.XMLDOM(this._xmlHttpRequest.responseText); if(!a || !a.documentElement) return null } else if(navigator.userAgent.indexOf("MSIE") !== -1) a.setProperty("SelectionLanguage", "XPath"); if(a.documentElement.namespaceURI === "http://www.mozilla.org/newlayout/xml/parsererror.xml" && a.documentElement.tagName === "parsererror") return null; if(a.documentElement.firstChild && a.documentElement.firstChild.tagName === "parsererror") return null; return a }, abort: function () { if(this._aborted || this._responseAvailable || this._timedOut) return; this._aborted = true; this._clearTimer(); if(this._xmlHttpRequest && !this._responseAvailable) { this._xmlHttpRequest.onreadystatechange = Function.emptyMethod; this._xmlHttpRequest.abort(); this._xmlHttpRequest = null; this._webRequest.completed(Sys.EventArgs.Empty) } } }; Sys.Net.XMLHttpExecutor.registerClass("Sys.Net.XMLHttpExecutor", Sys.Net.WebRequestExecutor); Sys.Net._WebRequestManager = function () { this._defaultTimeout = 0; this._defaultExecutorType = "Sys.Net.XMLHttpExecutor" }; Sys.Net._WebRequestManager.prototype = { add_invokingRequest: function (a) { this._get_eventHandlerList().addHandler("invokingRequest", a) }, remove_invokingRequest: function (a) { this._get_eventHandlerList().removeHandler("invokingRequest", a) }, add_completedRequest: function (a) { this._get_eventHandlerList().addHandler("completedRequest", a) }, remove_completedRequest: function (a) { this._get_eventHandlerList().removeHandler("completedRequest", a) }, _get_eventHandlerList: function () { if(!this._events) this._events = new Sys.EventHandlerList; return this._events }, get_defaultTimeout: function () { return this._defaultTimeout }, set_defaultTimeout: function (a) { this._defaultTimeout = a }, get_defaultExecutorType: function () { return this._defaultExecutorType }, set_defaultExecutorType: function (a) { this._defaultExecutorType = a }, executeRequest: function (webRequest) { var executor = webRequest.get_executor(); if(!executor) { var failed = false; try { var executorType = eval(this._defaultExecutorType); executor = new executorType } catch(a) { failed = true } webRequest.set_executor(executor) } if(executor.get_aborted()) return; var evArgs = new Sys.Net.NetworkRequestEventArgs(webRequest), handler = this._get_eventHandlerList().getHandler("invokingRequest"); if(handler) handler(this, evArgs); if(!evArgs.get_cancel()) executor.executeRequest() } }; Sys.Net._WebRequestManager.registerClass("Sys.Net._WebRequestManager"); Sys.Net.WebRequestManager = new Sys.Net._WebRequestManager; Sys.Net.NetworkRequestEventArgs = function (a) { Sys.Net.NetworkRequestEventArgs.initializeBase(this); this._webRequest = a }; Sys.Net.NetworkRequestEventArgs.prototype = { get_webRequest: function () { return this._webRequest } }; Sys.Net.NetworkRequestEventArgs.registerClass("Sys.Net.NetworkRequestEventArgs", Sys.CancelEventArgs); Sys.Net.WebRequest = function () { this._url = ""; this._headers = {}; this._body = null; this._userContext = null; this._httpVerb = null; this._executor = null; this._invokeCalled = false; this._timeout = 0 }; Sys.Net.WebRequest.prototype = { add_completed: function (a) { this._get_eventHandlerList().addHandler("completed", a) }, remove_completed: function (a) { this._get_eventHandlerList().removeHandler("completed", a) }, completed: function (b) { var a = Sys.Net.WebRequestManager._get_eventHandlerList().getHandler("completedRequest"); if(a) a(this._executor, b); a = this._get_eventHandlerList().getHandler("completed"); if(a) a(this._executor, b) }, _get_eventHandlerList: function () { if(!this._events) this._events = new Sys.EventHandlerList; return this._events }, get_url: function () { return this._url }, set_url: function (a) { this._url = a }, get_headers: function () { return this._headers }, get_httpVerb: function () { if(this._httpVerb === null) { if(this._body === null) return "GET"; return "POST" } return this._httpVerb }, set_httpVerb: function (a) { this._httpVerb = a }, get_body: function () { return this._body }, set_body: function (a) { this._body = a }, get_userContext: function () { return this._userContext }, set_userContext: function (a) { this._userContext = a }, get_executor: function () { return this._executor }, set_executor: function (a) { this._executor = a; this._executor._set_webRequest(this) }, get_timeout: function () { if(this._timeout === 0) return Sys.Net.WebRequestManager.get_defaultTimeout(); return this._timeout }, set_timeout: function (a) { this._timeout = a }, getResolvedUrl: function () { return Sys.Net.WebRequest._resolveUrl(this._url) }, invoke: function () { Sys.Net.WebRequestManager.executeRequest(this); this._invokeCalled = true } }; Sys.Net.WebRequest._resolveUrl = function (b, a) { if(b && b.indexOf("://") !== -1) return b; if(!a || a.length === 0) { var d = document.getElementsByTagName("base")[0]; if(d && d.href && d.href.length > 0) a = d.href; else a = document.URL } var c = a.indexOf("?"); if(c !== -1) a = a.substr(0, c); c = a.indexOf("#"); if(c !== -1) a = a.substr(0, c); a = a.substr(0, a.lastIndexOf("/") + 1); if(!b || b.length === 0) return a; if(b.charAt(0) === "/") { var e = a.indexOf("://"), g = a.indexOf("/", e + 3); return a.substr(0, g) + b } else { var f = a.lastIndexOf("/"); return a.substr(0, f + 1) + b } }; Sys.Net.WebRequest._createQueryString = function (c, b, f) { b = b || encodeURIComponent; var h = 0, e, g, d, a = new Sys.StringBuilder; if(c) for(d in c) { e = c[d]; if(typeof e === "function") continue; g = Sys.Serialization.JavaScriptSerializer.serialize(e); if(h++) a.append("&"); a.append(d); a.append("="); a.append(b(g)) } if(f) { if(h) a.append("&"); a.append(f) } return a.toString() }; Sys.Net.WebRequest._createUrl = function (a, b, c) { if(!b && !c) return a; var d = Sys.Net.WebRequest._createQueryString(b, null, c); return d.length ? a + (a && a.indexOf("?") >= 0 ? "&" : "?") + d : a }; Sys.Net.WebRequest.registerClass("Sys.Net.WebRequest"); Sys._ScriptLoaderTask = function (b, a) { this._scriptElement = b; this._completedCallback = a }; Sys._ScriptLoaderTask.prototype = { get_scriptElement: function () { return this._scriptElement }, dispose: function () { if(this._disposed) return; this._disposed = true; this._removeScriptElementHandlers(); Sys._ScriptLoaderTask._clearScript(this._scriptElement); this._scriptElement = null }, execute: function () { this._addScriptElementHandlers(); document.getElementsByTagName("head")[0].appendChild(this._scriptElement) }, _addScriptElementHandlers: function () { this._scriptLoadDelegate = Function.createDelegate(this, this._scriptLoadHandler); if(Sys.Browser.agent !== Sys.Browser.InternetExplorer) { this._scriptElement.readyState = "loaded"; $addHandler(this._scriptElement, "load", this._scriptLoadDelegate) } else $addHandler(this._scriptElement, "readystatechange", this._scriptLoadDelegate); if(this._scriptElement.addEventListener) { this._scriptErrorDelegate = Function.createDelegate(this, this._scriptErrorHandler); this._scriptElement.addEventListener("error", this._scriptErrorDelegate, false) } }, _removeScriptElementHandlers: function () { if(this._scriptLoadDelegate) { var a = this.get_scriptElement(); if(Sys.Browser.agent !== Sys.Browser.InternetExplorer) $removeHandler(a, "load", this._scriptLoadDelegate); else $removeHandler(a, "readystatechange", this._scriptLoadDelegate); if(this._scriptErrorDelegate) { this._scriptElement.removeEventListener("error", this._scriptErrorDelegate, false); this._scriptErrorDelegate = null } this._scriptLoadDelegate = null } }, _scriptErrorHandler: function () { if(this._disposed) return; this._completedCallback(this.get_scriptElement(), false) }, _scriptLoadHandler: function () { if(this._disposed) return; var a = this.get_scriptElement(); if(a.readyState !== "loaded" && a.readyState !== "complete") return; this._completedCallback(a, true) } }; Sys._ScriptLoaderTask.registerClass("Sys._ScriptLoaderTask", null, Sys.IDisposable); Sys._ScriptLoaderTask._clearScript = function (a) { if(!Sys.Debug.isDebug) a.parentNode.removeChild(a) }; Type.registerNamespace("Sys.Net"); Sys.Net.WebServiceProxy = function () { }; Sys.Net.WebServiceProxy.prototype = { get_timeout: function () { return this._timeout || 0 }, set_timeout: function (a) { if(a < 0) throw Error.argumentOutOfRange("value", a, Sys.Res.invalidTimeout); this._timeout = a }, get_defaultUserContext: function () { return typeof this._userContext === "undefined" ? null : this._userContext }, set_defaultUserContext: function (a) { this._userContext = a }, get_defaultSucceededCallback: function () { return this._succeeded || null }, set_defaultSucceededCallback: function (a) { this._succeeded = a }, get_defaultFailedCallback: function () { return this._failed || null }, set_defaultFailedCallback: function (a) { this._failed = a }, get_enableJsonp: function () { return !!this._jsonp }, set_enableJsonp: function (a) { this._jsonp = a }, get_path: function () { return this._path || null }, set_path: function (a) { this._path = a }, get_jsonpCallbackParameter: function () { return this._callbackParameter || "callback" }, set_jsonpCallbackParameter: function (a) { this._callbackParameter = a }, _invoke: function (d, e, g, f, c, b, a) { c = c || this.get_defaultSucceededCallback(); b = b || this.get_defaultFailedCallback(); if(a === null || typeof a === "undefined") a = this.get_defaultUserContext(); return Sys.Net.WebServiceProxy.invoke(d, e, g, f, c, b, a, this.get_timeout(), this.get_enableJsonp(), this.get_jsonpCallbackParameter()) } }; Sys.Net.WebServiceProxy.registerClass("Sys.Net.WebServiceProxy"); Sys.Net.WebServiceProxy.invoke = function (q, a, m, l, j, b, g, e, w, p) { var i = w !== false ? Sys.Net.WebServiceProxy._xdomain.exec(q) : null, c, n = i && i.length === 3 && (i[1] !== location.protocol || i[2] !== location.host); m = n || m; if(n) { p = p || "callback"; c = "_jsonp" + Sys._jsonp++ } if(!l) l = {}; var r = l; if(!m || !r) r = {}; var s, h, f = null, k, o = null, u = Sys.Net.WebRequest._createUrl(a ? q + "/" + encodeURIComponent(a) : q, r, n ? p + "=Sys." + c : null); if(n) { s = document.createElement("script"); s.src = u; k = new Sys._ScriptLoaderTask(s, function (d, b) { if(!b || c) t({ Message: String.format(Sys.Res.webServiceFailedNoMsg, a) }, -1) }); function v() { if(f === null) return; f = null; h = new Sys.Net.WebServiceError(true, String.format(Sys.Res.webServiceTimedOut, a)); k.dispose(); delete Sys[c]; if(b) b(h, g, a) } function t(d, e) { if(f !== null) { window.clearTimeout(f); f = null } k.dispose(); delete Sys[c]; c = null; if(typeof e !== "undefined" && e !== 200) { if(b) { h = new Sys.Net.WebServiceError(false, d.Message || String.format(Sys.Res.webServiceFailedNoMsg, a), d.StackTrace || null, d.ExceptionType || null, d); h._statusCode = e; b(h, g, a) } } else if(j) j(d, g, a) } Sys[c] = t; e = e || Sys.Net.WebRequestManager.get_defaultTimeout(); if(e > 0) f = window.setTimeout(v, e); k.execute(); return null } var d = new Sys.Net.WebRequest; d.set_url(u); d.get_headers()["Content-Type"] = "application/json; charset=utf-8"; if(!m) { o = Sys.Serialization.JavaScriptSerializer.serialize(l); if(o === "{}") o = "" } d.set_body(o); d.add_completed(x); if(e && e > 0) d.set_timeout(e); d.invoke(); function x(d) { if(d.get_responseAvailable()) { var f = d.get_statusCode(), c = null; try { var e = d.getResponseHeader("Content-Type"); if(e.startsWith("application/json")) c = d.get_object(); else if(e.startsWith("text/xml")) c = d.get_xml(); else c = d.get_responseData() } catch(m) { } var k = d.getResponseHeader("jsonerror"), h = k === "true"; if(h) { if(c) c = new Sys.Net.WebServiceError(false, c.Message, c.StackTrace, c.ExceptionType, c) } else if(e.startsWith("application/json")) c = !c || typeof c.d === "undefined" ? c : c.d; if(f < 200 || f >= 300 || h) { if(b) { if(!c || !h) c = new Sys.Net.WebServiceError(false, String.format(Sys.Res.webServiceFailedNoMsg, a)); c._statusCode = f; b(c, g, a) } } else if(j) j(c, g, a) } else { var i; if(d.get_timedOut()) i = String.format(Sys.Res.webServiceTimedOut, a); else i = String.format(Sys.Res.webServiceFailedNoMsg, a); if(b) b(new Sys.Net.WebServiceError(d.get_timedOut(), i, "", ""), g, a) } } return d }; Sys.Net.WebServiceProxy._generateTypedConstructor = function (a) { return function (b) { if(b) for(var c in b) this[c] = b[c]; this.__type = a } }; Sys._jsonp = 0; Sys.Net.WebServiceProxy._xdomain = /^\s*([a-zA-Z0-9\+\-\.]+\:)\/\/([^?#\/]+)/; Sys.Net.WebServiceError = function (d, e, c, a, b) { this._timedOut = d; this._message = e; this._stackTrace = c; this._exceptionType = a; this._errorObject = b; this._statusCode = -1 }; Sys.Net.WebServiceError.prototype = { get_timedOut: function () { return this._timedOut }, get_statusCode: function () { return this._statusCode }, get_message: function () { return this._message }, get_stackTrace: function () { return this._stackTrace || "" }, get_exceptionType: function () { return this._exceptionType || "" }, get_errorObject: function () { return this._errorObject || null } }; Sys.Net.WebServiceError.registerClass("Sys.Net.WebServiceError");
Type.registerNamespace('Sys'); Sys.Res = { 'argumentInteger': 'Value must be an integer.', 'invokeCalledTwice': 'Cannot call invoke more than once.', 'webServiceFailed': 'The server method \'{0}\' failed with the following error: {1}', 'argumentType': 'Object cannot be converted to the required type.', 'argumentNull': 'Value cannot be null.', 'scriptAlreadyLoaded': 'The script \'{0}\' has been referenced multiple times. If referencing Microsoft AJAX scripts explicitly, set the MicrosoftAjaxMode property of the ScriptManager to Explicit.', 'scriptDependencyNotFound': 'The script \'{0}\' failed to load because it is dependent on script \'{1}\'.', 'formatBadFormatSpecifier': 'Format specifier was invalid.', 'requiredScriptReferenceNotIncluded': '\'{0}\' requires that you have included a script reference to \'{1}\'.', 'webServiceFailedNoMsg': 'The server method \'{0}\' failed.', 'argumentDomElement': 'Value must be a DOM element.', 'invalidExecutorType': 'Could not create a valid Sys.Net.WebRequestExecutor from: {0}.', 'cannotCallBeforeResponse': 'Cannot call {0} when responseAvailable is false.', 'actualValue': 'Actual value was {0}.', 'enumInvalidValue': '\'{0}\' is not a valid value for enum {1}.', 'scriptLoadFailed': 'The script \'{0}\' could not be loaded.', 'parameterCount': 'Parameter count mismatch.', 'cannotDeserializeEmptyString': 'Cannot deserialize empty string.', 'formatInvalidString': 'Input string was not in a correct format.', 'invalidTimeout': 'Value must be greater than or equal to zero.', 'cannotAbortBeforeStart': 'Cannot abort when executor has not started.', 'argument': 'Value does not fall within the expected range.', 'cannotDeserializeInvalidJson': 'Cannot deserialize. The data does not correspond to valid JSON.', 'invalidHttpVerb': 'httpVerb cannot be set to an empty or null string.', 'nullWebRequest': 'Cannot call executeRequest with a null webRequest.', 'eventHandlerInvalid': 'Handler was not added through the Sys.UI.DomEvent.addHandler method.', 'cannotSerializeNonFiniteNumbers': 'Cannot serialize non finite numbers.', 'argumentUndefined': 'Value cannot be undefined.', 'webServiceInvalidReturnType': 'The server method \'{0}\' returned an invalid type. Expected type: {1}', 'servicePathNotSet': 'The path to the web service has not been set.', 'argumentTypeWithTypes': 'Object of type \'{0}\' cannot be converted to type \'{1}\'.', 'cannotCallOnceStarted': 'Cannot call {0} once started.', 'badBaseUrl1': 'Base URL does not contain ://.', 'badBaseUrl2': 'Base URL does not contain another /.', 'badBaseUrl3': 'Cannot find last / in base URL.', 'setExecutorAfterActive': 'Cannot set executor after it has become active.', 'paramName': 'Parameter name: {0}', 'nullReferenceInPath': 'Null reference while evaluating data path: \'{0}\'.', 'cannotCallOutsideHandler': 'Cannot call {0} outside of a completed event handler.', 'cannotSerializeObjectWithCycle': 'Cannot serialize object with cyclic reference within child properties.', 'format': 'One of the identified items was in an invalid format.', 'assertFailedCaller': 'Assertion Failed: {0}\r\nat {1}', 'argumentOutOfRange': 'Specified argument was out of the range of valid values.', 'webServiceTimedOut': 'The server method \'{0}\' timed out.', 'notImplemented': 'The method or operation is not implemented.', 'assertFailed': 'Assertion Failed: {0}', 'invalidOperation': 'Operation is not valid due to the current state of the object.', 'breakIntoDebugger': '{0}\r\n\r\nBreak into debugger?' };
/*! jQuery v1.8.2 jquery.com | jquery.org/license */
(function (a, b) { function G(a) { var b = F[a] = {}; return p.each(a.split(s), function (a, c) { b[c] = !0 }), b } function J(a, c, d) { if (d === b && a.nodeType === 1) { var e = "data-" + c.replace(I, "-$1").toLowerCase(); d = a.getAttribute(e); if (typeof d == "string") { try { d = d === "true" ? !0 : d === "false" ? !1 : d === "null" ? null : +d + "" === d ? +d : H.test(d) ? p.parseJSON(d) : d } catch (f) { } p.data(a, c, d) } else d = b } return d } function K(a) { var b; for (b in a) { if (b === "data" && p.isEmptyObject(a[b])) continue; if (b !== "toJSON") return !1 } return !0 } function ba() { return !1 } function bb() { return !0 } function bh(a) { return !a || !a.parentNode || a.parentNode.nodeType === 11 } function bi(a, b) { do a = a[b]; while (a && a.nodeType !== 1); return a } function bj(a, b, c) { b = b || 0; if (p.isFunction(b)) return p.grep(a, function (a, d) { var e = !!b.call(a, d, a); return e === c }); if (b.nodeType) return p.grep(a, function (a, d) { return a === b === c }); if (typeof b == "string") { var d = p.grep(a, function (a) { return a.nodeType === 1 }); if (be.test(b)) return p.filter(b, d, !c); b = p.filter(b, d) } return p.grep(a, function (a, d) { return p.inArray(a, b) >= 0 === c }) } function bk(a) { var b = bl.split("|"), c = a.createDocumentFragment(); if (c.createElement) while (b.length) c.createElement(b.pop()); return c } function bC(a, b) { return a.getElementsByTagName(b)[0] || a.appendChild(a.ownerDocument.createElement(b)) } function bD(a, b) { if (b.nodeType !== 1 || !p.hasData(a)) return; var c, d, e, f = p._data(a), g = p._data(b, f), h = f.events; if (h) { delete g.handle, g.events = {}; for (c in h) for (d = 0, e = h[c].length; d < e; d++) p.event.add(b, c, h[c][d]) } g.data && (g.data = p.extend({}, g.data)) } function bE(a, b) { var c; if (b.nodeType !== 1) return; b.clearAttributes && b.clearAttributes(), b.mergeAttributes && b.mergeAttributes(a), c = b.nodeName.toLowerCase(), c === "object" ? (b.parentNode && (b.outerHTML = a.outerHTML), p.support.html5Clone && a.innerHTML && !p.trim(b.innerHTML) && (b.innerHTML = a.innerHTML)) : c === "input" && bv.test(a.type) ? (b.defaultChecked = b.checked = a.checked, b.value !== a.value && (b.value = a.value)) : c === "option" ? b.selected = a.defaultSelected : c === "input" || c === "textarea" ? b.defaultValue = a.defaultValue : c === "script" && b.text !== a.text && (b.text = a.text), b.removeAttribute(p.expando) } function bF(a) { return typeof a.getElementsByTagName != "undefined" ? a.getElementsByTagName("*") : typeof a.querySelectorAll != "undefined" ? a.querySelectorAll("*") : [] } function bG(a) { bv.test(a.type) && (a.defaultChecked = a.checked) } function bY(a, b) { if (b in a) return b; var c = b.charAt(0).toUpperCase() + b.slice(1), d = b, e = bW.length; while (e--) { b = bW[e] + c; if (b in a) return b } return d } function bZ(a, b) { return a = b || a, p.css(a, "display") === "none" || !p.contains(a.ownerDocument, a) } function b$(a, b) { var c, d, e = [], f = 0, g = a.length; for (; f < g; f++) { c = a[f]; if (!c.style) continue; e[f] = p._data(c, "olddisplay"), b ? (!e[f] && c.style.display === "none" && (c.style.display = ""), c.style.display === "" && bZ(c) && (e[f] = p._data(c, "olddisplay", cc(c.nodeName)))) : (d = bH(c, "display"), !e[f] && d !== "none" && p._data(c, "olddisplay", d)) } for (f = 0; f < g; f++) { c = a[f]; if (!c.style) continue; if (!b || c.style.display === "none" || c.style.display === "") c.style.display = b ? e[f] || "" : "none" } return a } function b_(a, b, c) { var d = bP.exec(b); return d ? Math.max(0, d[1] - (c || 0)) + (d[2] || "px") : b } function ca(a, b, c, d) { var e = c === (d ? "border" : "content") ? 4 : b === "width" ? 1 : 0, f = 0; for (; e < 4; e += 2) c === "margin" && (f += p.css(a, c + bV[e], !0)), d ? (c === "content" && (f -= parseFloat(bH(a, "padding" + bV[e])) || 0), c !== "margin" && (f -= parseFloat(bH(a, "border" + bV[e] + "Width")) || 0)) : (f += parseFloat(bH(a, "padding" + bV[e])) || 0, c !== "padding" && (f += parseFloat(bH(a, "border" + bV[e] + "Width")) || 0)); return f } function cb(a, b, c) { var d = b === "width" ? a.offsetWidth : a.offsetHeight, e = !0, f = p.support.boxSizing && p.css(a, "boxSizing") === "border-box"; if (d <= 0 || d == null) { d = bH(a, b); if (d < 0 || d == null) d = a.style[b]; if (bQ.test(d)) return d; e = f && (p.support.boxSizingReliable || d === a.style[b]), d = parseFloat(d) || 0 } return d + ca(a, b, c || (f ? "border" : "content"), e) + "px" } function cc(a) { if (bS[a]) return bS[a]; var b = p("<" + a + ">").appendTo(e.body), c = b.css("display"); b.remove(); if (c === "none" || c === "") { bI = e.body.appendChild(bI || p.extend(e.createElement("iframe"), { frameBorder: 0, width: 0, height: 0 })); if (!bJ || !bI.createElement) bJ = (bI.contentWindow || bI.contentDocument).document, bJ.write("<!doctype html><html><body>"), bJ.close(); b = bJ.body.appendChild(bJ.createElement(a)), c = bH(b, "display"), e.body.removeChild(bI) } return bS[a] = c, c } function ci(a, b, c, d) { var e; if (p.isArray(b)) p.each(b, function (b, e) { c || ce.test(a) ? d(a, e) : ci(a + "[" + (typeof e == "object" ? b : "") + "]", e, c, d) }); else if (!c && p.type(b) === "object") for (e in b) ci(a + "[" + e + "]", b[e], c, d); else d(a, b) } function cz(a) { return function (b, c) { typeof b != "string" && (c = b, b = "*"); var d, e, f, g = b.toLowerCase().split(s), h = 0, i = g.length; if (p.isFunction(c)) for (; h < i; h++) d = g[h], f = /^\+/.test(d), f && (d = d.substr(1) || "*"), e = a[d] = a[d] || [], e[f ? "unshift" : "push"](c) } } function cA(a, c, d, e, f, g) { f = f || c.dataTypes[0], g = g || {}, g[f] = !0; var h, i = a[f], j = 0, k = i ? i.length : 0, l = a === cv; for (; j < k && (l || !h) ; j++) h = i[j](c, d, e), typeof h == "string" && (!l || g[h] ? h = b : (c.dataTypes.unshift(h), h = cA(a, c, d, e, h, g))); return (l || !h) && !g["*"] && (h = cA(a, c, d, e, "*", g)), h } function cB(a, c) { var d, e, f = p.ajaxSettings.flatOptions || {}; for (d in c) c[d] !== b && ((f[d] ? a : e || (e = {}))[d] = c[d]); e && p.extend(!0, a, e) } function cC(a, c, d) { var e, f, g, h, i = a.contents, j = a.dataTypes, k = a.responseFields; for (f in k) f in d && (c[k[f]] = d[f]); while (j[0] === "*") j.shift(), e === b && (e = a.mimeType || c.getResponseHeader("content-type")); if (e) for (f in i) if (i[f] && i[f].test(e)) { j.unshift(f); break } if (j[0] in d) g = j[0]; else { for (f in d) { if (!j[0] || a.converters[f + " " + j[0]]) { g = f; break } h || (h = f) } g = g || h } if (g) return g !== j[0] && j.unshift(g), d[g] } function cD(a, b) { var c, d, e, f, g = a.dataTypes.slice(), h = g[0], i = {}, j = 0; a.dataFilter && (b = a.dataFilter(b, a.dataType)); if (g[1]) for (c in a.converters) i[c.toLowerCase()] = a.converters[c]; for (; e = g[++j];) if (e !== "*") { if (h !== "*" && h !== e) { c = i[h + " " + e] || i["* " + e]; if (!c) for (d in i) { f = d.split(" "); if (f[1] === e) { c = i[h + " " + f[0]] || i["* " + f[0]]; if (c) { c === !0 ? c = i[d] : i[d] !== !0 && (e = f[0], g.splice(j--, 0, e)); break } } } if (c !== !0) if (c && a["throws"]) b = c(b); else try { b = c(b) } catch (k) { return { state: "parsererror", error: c ? k : "No conversion from " + h + " to " + e } } } h = e } return { state: "success", data: b } } function cL() { try { return new a.XMLHttpRequest } catch (b) { } } function cM() { try { return new a.ActiveXObject("Microsoft.XMLHTTP") } catch (b) { } } function cU() { return setTimeout(function () { cN = b }, 0), cN = p.now() } function cV(a, b) { p.each(b, function (b, c) { var d = (cT[b] || []).concat(cT["*"]), e = 0, f = d.length; for (; e < f; e++) if (d[e].call(a, b, c)) return }) } function cW(a, b, c) { var d, e = 0, f = 0, g = cS.length, h = p.Deferred().always(function () { delete i.elem }), i = function () { var b = cN || cU(), c = Math.max(0, j.startTime + j.duration - b), d = 1 - (c / j.duration || 0), e = 0, f = j.tweens.length; for (; e < f; e++) j.tweens[e].run(d); return h.notifyWith(a, [j, d, c]), d < 1 && f ? c : (h.resolveWith(a, [j]), !1) }, j = h.promise({ elem: a, props: p.extend({}, b), opts: p.extend(!0, { specialEasing: {} }, c), originalProperties: b, originalOptions: c, startTime: cN || cU(), duration: c.duration, tweens: [], createTween: function (b, c, d) { var e = p.Tween(a, j.opts, b, c, j.opts.specialEasing[b] || j.opts.easing); return j.tweens.push(e), e }, stop: function (b) { var c = 0, d = b ? j.tweens.length : 0; for (; c < d; c++) j.tweens[c].run(1); return b ? h.resolveWith(a, [j, b]) : h.rejectWith(a, [j, b]), this } }), k = j.props; cX(k, j.opts.specialEasing); for (; e < g; e++) { d = cS[e].call(j, a, k, j.opts); if (d) return d } return cV(j, k), p.isFunction(j.opts.start) && j.opts.start.call(a, j), p.fx.timer(p.extend(i, { anim: j, queue: j.opts.queue, elem: a })), j.progress(j.opts.progress).done(j.opts.done, j.opts.complete).fail(j.opts.fail).always(j.opts.always) } function cX(a, b) { var c, d, e, f, g; for (c in a) { d = p.camelCase(c), e = b[d], f = a[c], p.isArray(f) && (e = f[1], f = a[c] = f[0]), c !== d && (a[d] = f, delete a[c]), g = p.cssHooks[d]; if (g && "expand" in g) { f = g.expand(f), delete a[d]; for (c in f) c in a || (a[c] = f[c], b[c] = e) } else b[d] = e } } function cY(a, b, c) { var d, e, f, g, h, i, j, k, l = this, m = a.style, n = {}, o = [], q = a.nodeType && bZ(a); c.queue || (j = p._queueHooks(a, "fx"), j.unqueued == null && (j.unqueued = 0, k = j.empty.fire, j.empty.fire = function () { j.unqueued || k() }), j.unqueued++, l.always(function () { l.always(function () { j.unqueued--, p.queue(a, "fx").length || j.empty.fire() }) })), a.nodeType === 1 && ("height" in b || "width" in b) && (c.overflow = [m.overflow, m.overflowX, m.overflowY], p.css(a, "display") === "inline" && p.css(a, "float") === "none" && (!p.support.inlineBlockNeedsLayout || cc(a.nodeName) === "inline" ? m.display = "inline-block" : m.zoom = 1)), c.overflow && (m.overflow = "hidden", p.support.shrinkWrapBlocks || l.done(function () { m.overflow = c.overflow[0], m.overflowX = c.overflow[1], m.overflowY = c.overflow[2] })); for (d in b) { f = b[d]; if (cP.exec(f)) { delete b[d]; if (f === (q ? "hide" : "show")) continue; o.push(d) } } g = o.length; if (g) { h = p._data(a, "fxshow") || p._data(a, "fxshow", {}), q ? p(a).show() : l.done(function () { p(a).hide() }), l.done(function () { var b; p.removeData(a, "fxshow", !0); for (b in n) p.style(a, b, n[b]) }); for (d = 0; d < g; d++) e = o[d], i = l.createTween(e, q ? h[e] : 0), n[e] = h[e] || p.style(a, e), e in h || (h[e] = i.start, q && (i.end = i.start, i.start = e === "width" || e === "height" ? 1 : 0)) } } function cZ(a, b, c, d, e) { return new cZ.prototype.init(a, b, c, d, e) } function c$(a, b) { var c, d = { height: a }, e = 0; b = b ? 1 : 0; for (; e < 4; e += 2 - b) c = bV[e], d["margin" + c] = d["padding" + c] = a; return b && (d.opacity = d.width = a), d } function da(a) { return p.isWindow(a) ? a : a.nodeType === 9 ? a.defaultView || a.parentWindow : !1 } var c, d, e = a.document, f = a.location, g = a.navigator, h = a.jQuery, i = a.$, j = Array.prototype.push, k = Array.prototype.slice, l = Array.prototype.indexOf, m = Object.prototype.toString, n = Object.prototype.hasOwnProperty, o = String.prototype.trim, p = function (a, b) { return new p.fn.init(a, b, c) }, q = /[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source, r = /\S/, s = /\s+/, t = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, u = /^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/, v = /^<(\w+)\s*\/?>(?:<\/\1>|)$/, w = /^[\],:{}\s]*$/, x = /(?:^|:|,)(?:\s*\[)+/g, y = /\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g, z = /"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g, A = /^-ms-/, B = /-([\da-z])/gi, C = function (a, b) { return (b + "").toUpperCase() }, D = function () { e.addEventListener ? (e.removeEventListener("DOMContentLoaded", D, !1), p.ready()) : e.readyState === "complete" && (e.detachEvent("onreadystatechange", D), p.ready()) }, E = {}; p.fn = p.prototype = { constructor: p, init: function (a, c, d) { var f, g, h, i; if (!a) return this; if (a.nodeType) return this.context = this[0] = a, this.length = 1, this; if (typeof a == "string") { a.charAt(0) === "<" && a.charAt(a.length - 1) === ">" && a.length >= 3 ? f = [null, a, null] : f = u.exec(a); if (f && (f[1] || !c)) { if (f[1]) return c = c instanceof p ? c[0] : c, i = c && c.nodeType ? c.ownerDocument || c : e, a = p.parseHTML(f[1], i, !0), v.test(f[1]) && p.isPlainObject(c) && this.attr.call(a, c, !0), p.merge(this, a); g = e.getElementById(f[2]); if (g && g.parentNode) { if (g.id !== f[2]) return d.find(a); this.length = 1, this[0] = g } return this.context = e, this.selector = a, this } return !c || c.jquery ? (c || d).find(a) : this.constructor(c).find(a) } return p.isFunction(a) ? d.ready(a) : (a.selector !== b && (this.selector = a.selector, this.context = a.context), p.makeArray(a, this)) }, selector: "", jquery: "1.8.2", length: 0, size: function () { return this.length }, toArray: function () { return k.call(this) }, get: function (a) { return a == null ? this.toArray() : a < 0 ? this[this.length + a] : this[a] }, pushStack: function (a, b, c) { var d = p.merge(this.constructor(), a); return d.prevObject = this, d.context = this.context, b === "find" ? d.selector = this.selector + (this.selector ? " " : "") + c : b && (d.selector = this.selector + "." + b + "(" + c + ")"), d }, each: function (a, b) { return p.each(this, a, b) }, ready: function (a) { return p.ready.promise().done(a), this }, eq: function (a) { return a = +a, a === -1 ? this.slice(a) : this.slice(a, a + 1) }, first: function () { return this.eq(0) }, last: function () { return this.eq(-1) }, slice: function () { return this.pushStack(k.apply(this, arguments), "slice", k.call(arguments).join(",")) }, map: function (a) { return this.pushStack(p.map(this, function (b, c) { return a.call(b, c, b) })) }, end: function () { return this.prevObject || this.constructor(null) }, push: j, sort: [].sort, splice: [].splice }, p.fn.init.prototype = p.fn, p.extend = p.fn.extend = function () { var a, c, d, e, f, g, h = arguments[0] || {}, i = 1, j = arguments.length, k = !1; typeof h == "boolean" && (k = h, h = arguments[1] || {}, i = 2), typeof h != "object" && !p.isFunction(h) && (h = {}), j === i && (h = this, --i); for (; i < j; i++) if ((a = arguments[i]) != null) for (c in a) { d = h[c], e = a[c]; if (h === e) continue; k && e && (p.isPlainObject(e) || (f = p.isArray(e))) ? (f ? (f = !1, g = d && p.isArray(d) ? d : []) : g = d && p.isPlainObject(d) ? d : {}, h[c] = p.extend(k, g, e)) : e !== b && (h[c] = e) } return h }, p.extend({ noConflict: function (b) { return a.$ === p && (a.$ = i), b && a.jQuery === p && (a.jQuery = h), p }, isReady: !1, readyWait: 1, holdReady: function (a) { a ? p.readyWait++ : p.ready(!0) }, ready: function (a) { if (a === !0 ? --p.readyWait : p.isReady) return; if (!e.body) return setTimeout(p.ready, 1); p.isReady = !0; if (a !== !0 && --p.readyWait > 0) return; d.resolveWith(e, [p]), p.fn.trigger && p(e).trigger("ready").off("ready") }, isFunction: function (a) { return p.type(a) === "function" }, isArray: Array.isArray || function (a) { return p.type(a) === "array" }, isWindow: function (a) { return a != null && a == a.window }, isNumeric: function (a) { return !isNaN(parseFloat(a)) && isFinite(a) }, type: function (a) { return a == null ? String(a) : E[m.call(a)] || "object" }, isPlainObject: function (a) { if (!a || p.type(a) !== "object" || a.nodeType || p.isWindow(a)) return !1; try { if (a.constructor && !n.call(a, "constructor") && !n.call(a.constructor.prototype, "isPrototypeOf")) return !1 } catch (c) { return !1 } var d; for (d in a); return d === b || n.call(a, d) }, isEmptyObject: function (a) { var b; for (b in a) return !1; return !0 }, error: function (a) { throw new Error(a) }, parseHTML: function (a, b, c) { var d; return !a || typeof a != "string" ? null : (typeof b == "boolean" && (c = b, b = 0), b = b || e, (d = v.exec(a)) ? [b.createElement(d[1])] : (d = p.buildFragment([a], b, c ? null : []), p.merge([], (d.cacheable ? p.clone(d.fragment) : d.fragment).childNodes))) }, parseJSON: function (b) { if (!b || typeof b != "string") return null; b = p.trim(b); if (a.JSON && a.JSON.parse) return a.JSON.parse(b); if (w.test(b.replace(y, "@").replace(z, "]").replace(x, ""))) return (new Function("return " + b))(); p.error("Invalid JSON: " + b) }, parseXML: function (c) { var d, e; if (!c || typeof c != "string") return null; try { a.DOMParser ? (e = new DOMParser, d = e.parseFromString(c, "text/xml")) : (d = new ActiveXObject("Microsoft.XMLDOM"), d.async = "false", d.loadXML(c)) } catch (f) { d = b } return (!d || !d.documentElement || d.getElementsByTagName("parsererror").length) && p.error("Invalid XML: " + c), d }, noop: function () { }, globalEval: function (b) { b && r.test(b) && (a.execScript || function (b) { a.eval.call(a, b) })(b) }, camelCase: function (a) { return a.replace(A, "ms-").replace(B, C) }, nodeName: function (a, b) { return a.nodeName && a.nodeName.toLowerCase() === b.toLowerCase() }, each: function (a, c, d) { var e, f = 0, g = a.length, h = g === b || p.isFunction(a); if (d) { if (h) { for (e in a) if (c.apply(a[e], d) === !1) break } else for (; f < g;) if (c.apply(a[f++], d) === !1) break } else if (h) { for (e in a) if (c.call(a[e], e, a[e]) === !1) break } else for (; f < g;) if (c.call(a[f], f, a[f++]) === !1) break; return a }, trim: o && !o.call("﻿ ") ? function (a) { return a == null ? "" : o.call(a) } : function (a) { return a == null ? "" : (a + "").replace(t, "") }, makeArray: function (a, b) { var c, d = b || []; return a != null && (c = p.type(a), a.length == null || c === "string" || c === "function" || c === "regexp" || p.isWindow(a) ? j.call(d, a) : p.merge(d, a)), d }, inArray: function (a, b, c) { var d; if (b) { if (l) return l.call(b, a, c); d = b.length, c = c ? c < 0 ? Math.max(0, d + c) : c : 0; for (; c < d; c++) if (c in b && b[c] === a) return c } return -1 }, merge: function (a, c) { var d = c.length, e = a.length, f = 0; if (typeof d == "number") for (; f < d; f++) a[e++] = c[f]; else while (c[f] !== b) a[e++] = c[f++]; return a.length = e, a }, grep: function (a, b, c) { var d, e = [], f = 0, g = a.length; c = !!c; for (; f < g; f++) d = !!b(a[f], f), c !== d && e.push(a[f]); return e }, map: function (a, c, d) { var e, f, g = [], h = 0, i = a.length, j = a instanceof p || i !== b && typeof i == "number" && (i > 0 && a[0] && a[i - 1] || i === 0 || p.isArray(a)); if (j) for (; h < i; h++) e = c(a[h], h, d), e != null && (g[g.length] = e); else for (f in a) e = c(a[f], f, d), e != null && (g[g.length] = e); return g.concat.apply([], g) }, guid: 1, proxy: function (a, c) { var d, e, f; return typeof c == "string" && (d = a[c], c = a, a = d), p.isFunction(a) ? (e = k.call(arguments, 2), f = function () { return a.apply(c, e.concat(k.call(arguments))) }, f.guid = a.guid = a.guid || p.guid++, f) : b }, access: function (a, c, d, e, f, g, h) { var i, j = d == null, k = 0, l = a.length; if (d && typeof d == "object") { for (k in d) p.access(a, c, k, d[k], 1, g, e); f = 1 } else if (e !== b) { i = h === b && p.isFunction(e), j && (i ? (i = c, c = function (a, b, c) { return i.call(p(a), c) }) : (c.call(a, e), c = null)); if (c) for (; k < l; k++) c(a[k], d, i ? e.call(a[k], k, c(a[k], d)) : e, h); f = 1 } return f ? a : j ? c.call(a) : l ? c(a[0], d) : g }, now: function () { return (new Date).getTime() } }), p.ready.promise = function (b) { if (!d) { d = p.Deferred(); if (e.readyState === "complete") setTimeout(p.ready, 1); else if (e.addEventListener) e.addEventListener("DOMContentLoaded", D, !1), a.addEventListener("load", p.ready, !1); else { e.attachEvent("onreadystatechange", D), a.attachEvent("onload", p.ready); var c = !1; try { c = a.frameElement == null && e.documentElement } catch (f) { } c && c.doScroll && function g() { if (!p.isReady) { try { c.doScroll("left") } catch (a) { return setTimeout(g, 50) } p.ready() } }() } } return d.promise(b) }, p.each("Boolean Number String Function Array Date RegExp Object".split(" "), function (a, b) { E["[object " + b + "]"] = b.toLowerCase() }), c = p(e); var F = {}; p.Callbacks = function (a) { a = typeof a == "string" ? F[a] || G(a) : p.extend({}, a); var c, d, e, f, g, h, i = [], j = !a.once && [], k = function (b) { c = a.memory && b, d = !0, h = f || 0, f = 0, g = i.length, e = !0; for (; i && h < g; h++) if (i[h].apply(b[0], b[1]) === !1 && a.stopOnFalse) { c = !1; break } e = !1, i && (j ? j.length && k(j.shift()) : c ? i = [] : l.disable()) }, l = { add: function () { if (i) { var b = i.length; (function d(b) { p.each(b, function (b, c) { var e = p.type(c); e === "function" && (!a.unique || !l.has(c)) ? i.push(c) : c && c.length && e !== "string" && d(c) }) })(arguments), e ? g = i.length : c && (f = b, k(c)) } return this }, remove: function () { return i && p.each(arguments, function (a, b) { var c; while ((c = p.inArray(b, i, c)) > -1) i.splice(c, 1), e && (c <= g && g--, c <= h && h--) }), this }, has: function (a) { return p.inArray(a, i) > -1 }, empty: function () { return i = [], this }, disable: function () { return i = j = c = b, this }, disabled: function () { return !i }, lock: function () { return j = b, c || l.disable(), this }, locked: function () { return !j }, fireWith: function (a, b) { return b = b || [], b = [a, b.slice ? b.slice() : b], i && (!d || j) && (e ? j.push(b) : k(b)), this }, fire: function () { return l.fireWith(this, arguments), this }, fired: function () { return !!d } }; return l }, p.extend({ Deferred: function (a) { var b = [["resolve", "done", p.Callbacks("once memory"), "resolved"], ["reject", "fail", p.Callbacks("once memory"), "rejected"], ["notify", "progress", p.Callbacks("memory")]], c = "pending", d = { state: function () { return c }, always: function () { return e.done(arguments).fail(arguments), this }, then: function () { var a = arguments; return p.Deferred(function (c) { p.each(b, function (b, d) { var f = d[0], g = a[b]; e[d[1]](p.isFunction(g) ? function () { var a = g.apply(this, arguments); a && p.isFunction(a.promise) ? a.promise().done(c.resolve).fail(c.reject).progress(c.notify) : c[f + "With"](this === e ? c : this, [a]) } : c[f]) }), a = null }).promise() }, promise: function (a) { return a != null ? p.extend(a, d) : d } }, e = {}; return d.pipe = d.then, p.each(b, function (a, f) { var g = f[2], h = f[3]; d[f[1]] = g.add, h && g.add(function () { c = h }, b[a ^ 1][2].disable, b[2][2].lock), e[f[0]] = g.fire, e[f[0] + "With"] = g.fireWith }), d.promise(e), a && a.call(e, e), e }, when: function (a) { var b = 0, c = k.call(arguments), d = c.length, e = d !== 1 || a && p.isFunction(a.promise) ? d : 0, f = e === 1 ? a : p.Deferred(), g = function (a, b, c) { return function (d) { b[a] = this, c[a] = arguments.length > 1 ? k.call(arguments) : d, c === h ? f.notifyWith(b, c) : --e || f.resolveWith(b, c) } }, h, i, j; if (d > 1) { h = new Array(d), i = new Array(d), j = new Array(d); for (; b < d; b++) c[b] && p.isFunction(c[b].promise) ? c[b].promise().done(g(b, j, c)).fail(f.reject).progress(g(b, i, h)) : --e } return e || f.resolveWith(j, c), f.promise() } }), p.support = function () { var b, c, d, f, g, h, i, j, k, l, m, n = e.createElement("div"); n.setAttribute("className", "t"), n.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>", c = n.getElementsByTagName("*"), d = n.getElementsByTagName("a")[0], d.style.cssText = "top:1px;float:left;opacity:.5"; if (!c || !c.length) return {}; f = e.createElement("select"), g = f.appendChild(e.createElement("option")), h = n.getElementsByTagName("input")[0], b = { leadingWhitespace: n.firstChild.nodeType === 3, tbody: !n.getElementsByTagName("tbody").length, htmlSerialize: !!n.getElementsByTagName("link").length, style: /top/.test(d.getAttribute("style")), hrefNormalized: d.getAttribute("href") === "/a", opacity: /^0.5/.test(d.style.opacity), cssFloat: !!d.style.cssFloat, checkOn: h.value === "on", optSelected: g.selected, getSetAttribute: n.className !== "t", enctype: !!e.createElement("form").enctype, html5Clone: e.createElement("nav").cloneNode(!0).outerHTML !== "<:nav></:nav>", boxModel: e.compatMode === "CSS1Compat", submitBubbles: !0, changeBubbles: !0, focusinBubbles: !1, deleteExpando: !0, noCloneEvent: !0, inlineBlockNeedsLayout: !1, shrinkWrapBlocks: !1, reliableMarginRight: !0, boxSizingReliable: !0, pixelPosition: !1 }, h.checked = !0, b.noCloneChecked = h.cloneNode(!0).checked, f.disabled = !0, b.optDisabled = !g.disabled; try { delete n.test } catch (o) { b.deleteExpando = !1 } !n.addEventListener && n.attachEvent && n.fireEvent && (n.attachEvent("onclick", m = function () { b.noCloneEvent = !1 }), n.cloneNode(!0).fireEvent("onclick"), n.detachEvent("onclick", m)), h = e.createElement("input"), h.value = "t", h.setAttribute("type", "radio"), b.radioValue = h.value === "t", h.setAttribute("checked", "checked"), h.setAttribute("name", "t"), n.appendChild(h), i = e.createDocumentFragment(), i.appendChild(n.lastChild), b.checkClone = i.cloneNode(!0).cloneNode(!0).lastChild.checked, b.appendChecked = h.checked, i.removeChild(h), i.appendChild(n); if (n.attachEvent) for (k in { submit: !0, change: !0, focusin: !0 }) j = "on" + k, l = j in n, l || (n.setAttribute(j, "return;"), l = typeof n[j] == "function"), b[k + "Bubbles"] = l; return p(function () { var c, d, f, g, h = "padding:0;margin:0;border:0;display:block;overflow:hidden;", i = e.getElementsByTagName("body")[0]; if (!i) return; c = e.createElement("div"), c.style.cssText = "visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px", i.insertBefore(c, i.firstChild), d = e.createElement("div"), c.appendChild(d), d.innerHTML = "<table><tr><td></td><td>t</td></tr></table>", f = d.getElementsByTagName("td"), f[0].style.cssText = "padding:0;margin:0;border:0;display:none", l = f[0].offsetHeight === 0, f[0].style.display = "", f[1].style.display = "none", b.reliableHiddenOffsets = l && f[0].offsetHeight === 0, d.innerHTML = "", d.style.cssText = "box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;", b.boxSizing = d.offsetWidth === 4, b.doesNotIncludeMarginInBodyOffset = i.offsetTop !== 1, a.getComputedStyle && (b.pixelPosition = (a.getComputedStyle(d, null) || {}).top !== "1%", b.boxSizingReliable = (a.getComputedStyle(d, null) || { width: "4px" }).width === "4px", g = e.createElement("div"), g.style.cssText = d.style.cssText = h, g.style.marginRight = g.style.width = "0", d.style.width = "1px", d.appendChild(g), b.reliableMarginRight = !parseFloat((a.getComputedStyle(g, null) || {}).marginRight)), typeof d.style.zoom != "undefined" && (d.innerHTML = "", d.style.cssText = h + "width:1px;padding:1px;display:inline;zoom:1", b.inlineBlockNeedsLayout = d.offsetWidth === 3, d.style.display = "block", d.style.overflow = "visible", d.innerHTML = "<div></div>", d.firstChild.style.width = "5px", b.shrinkWrapBlocks = d.offsetWidth !== 3, c.style.zoom = 1), i.removeChild(c), c = d = f = g = null }), i.removeChild(n), c = d = f = g = h = i = n = null, b }(); var H = /(?:\{[\s\S]*\}|\[[\s\S]*\])$/, I = /([A-Z])/g; p.extend({ cache: {}, deletedIds: [], uuid: 0, expando: "jQuery" + (p.fn.jquery + Math.random()).replace(/\D/g, ""), noData: { embed: !0, object: "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000", applet: !0 }, hasData: function (a) { return a = a.nodeType ? p.cache[a[p.expando]] : a[p.expando], !!a && !K(a) }, data: function (a, c, d, e) { if (!p.acceptData(a)) return; var f, g, h = p.expando, i = typeof c == "string", j = a.nodeType, k = j ? p.cache : a, l = j ? a[h] : a[h] && h; if ((!l || !k[l] || !e && !k[l].data) && i && d === b) return; l || (j ? a[h] = l = p.deletedIds.pop() || p.guid++ : l = h), k[l] || (k[l] = {}, j || (k[l].toJSON = p.noop)); if (typeof c == "object" || typeof c == "function") e ? k[l] = p.extend(k[l], c) : k[l].data = p.extend(k[l].data, c); return f = k[l], e || (f.data || (f.data = {}), f = f.data), d !== b && (f[p.camelCase(c)] = d), i ? (g = f[c], g == null && (g = f[p.camelCase(c)])) : g = f, g }, removeData: function (a, b, c) { if (!p.acceptData(a)) return; var d, e, f, g = a.nodeType, h = g ? p.cache : a, i = g ? a[p.expando] : p.expando; if (!h[i]) return; if (b) { d = c ? h[i] : h[i].data; if (d) { p.isArray(b) || (b in d ? b = [b] : (b = p.camelCase(b), b in d ? b = [b] : b = b.split(" "))); for (e = 0, f = b.length; e < f; e++) delete d[b[e]]; if (!(c ? K : p.isEmptyObject)(d)) return } } if (!c) { delete h[i].data; if (!K(h[i])) return } g ? p.cleanData([a], !0) : p.support.deleteExpando || h != h.window ? delete h[i] : h[i] = null }, _data: function (a, b, c) { return p.data(a, b, c, !0) }, acceptData: function (a) { var b = a.nodeName && p.noData[a.nodeName.toLowerCase()]; return !b || b !== !0 && a.getAttribute("classid") === b } }), p.fn.extend({ data: function (a, c) { var d, e, f, g, h, i = this[0], j = 0, k = null; if (a === b) { if (this.length) { k = p.data(i); if (i.nodeType === 1 && !p._data(i, "parsedAttrs")) { f = i.attributes; for (h = f.length; j < h; j++) g = f[j].name, g.indexOf("data-") || (g = p.camelCase(g.substring(5)), J(i, g, k[g])); p._data(i, "parsedAttrs", !0) } } return k } return typeof a == "object" ? this.each(function () { p.data(this, a) }) : (d = a.split(".", 2), d[1] = d[1] ? "." + d[1] : "", e = d[1] + "!", p.access(this, function (c) { if (c === b) return k = this.triggerHandler("getData" + e, [d[0]]), k === b && i && (k = p.data(i, a), k = J(i, a, k)), k === b && d[1] ? this.data(d[0]) : k; d[1] = c, this.each(function () { var b = p(this); b.triggerHandler("setData" + e, d), p.data(this, a, c), b.triggerHandler("changeData" + e, d) }) }, null, c, arguments.length > 1, null, !1)) }, removeData: function (a) { return this.each(function () { p.removeData(this, a) }) } }), p.extend({ queue: function (a, b, c) { var d; if (a) return b = (b || "fx") + "queue", d = p._data(a, b), c && (!d || p.isArray(c) ? d = p._data(a, b, p.makeArray(c)) : d.push(c)), d || [] }, dequeue: function (a, b) { b = b || "fx"; var c = p.queue(a, b), d = c.length, e = c.shift(), f = p._queueHooks(a, b), g = function () { p.dequeue(a, b) }; e === "inprogress" && (e = c.shift(), d--), e && (b === "fx" && c.unshift("inprogress"), delete f.stop, e.call(a, g, f)), !d && f && f.empty.fire() }, _queueHooks: function (a, b) { var c = b + "queueHooks"; return p._data(a, c) || p._data(a, c, { empty: p.Callbacks("once memory").add(function () { p.removeData(a, b + "queue", !0), p.removeData(a, c, !0) }) }) } }), p.fn.extend({ queue: function (a, c) { var d = 2; return typeof a != "string" && (c = a, a = "fx", d--), arguments.length < d ? p.queue(this[0], a) : c === b ? this : this.each(function () { var b = p.queue(this, a, c); p._queueHooks(this, a), a === "fx" && b[0] !== "inprogress" && p.dequeue(this, a) }) }, dequeue: function (a) { return this.each(function () { p.dequeue(this, a) }) }, delay: function (a, b) { return a = p.fx ? p.fx.speeds[a] || a : a, b = b || "fx", this.queue(b, function (b, c) { var d = setTimeout(b, a); c.stop = function () { clearTimeout(d) } }) }, clearQueue: function (a) { return this.queue(a || "fx", []) }, promise: function (a, c) { var d, e = 1, f = p.Deferred(), g = this, h = this.length, i = function () { --e || f.resolveWith(g, [g]) }; typeof a != "string" && (c = a, a = b), a = a || "fx"; while (h--) d = p._data(g[h], a + "queueHooks"), d && d.empty && (e++, d.empty.add(i)); return i(), f.promise(c) } }); var L, M, N, O = /[\t\r\n]/g, P = /\r/g, Q = /^(?:button|input)$/i, R = /^(?:button|input|object|select|textarea)$/i, S = /^a(?:rea|)$/i, T = /^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i, U = p.support.getSetAttribute; p.fn.extend({ attr: function (a, b) { return p.access(this, p.attr, a, b, arguments.length > 1) }, removeAttr: function (a) { return this.each(function () { p.removeAttr(this, a) }) }, prop: function (a, b) { return p.access(this, p.prop, a, b, arguments.length > 1) }, removeProp: function (a) { return a = p.propFix[a] || a, this.each(function () { try { this[a] = b, delete this[a] } catch (c) { } }) }, addClass: function (a) { var b, c, d, e, f, g, h; if (p.isFunction(a)) return this.each(function (b) { p(this).addClass(a.call(this, b, this.className)) }); if (a && typeof a == "string") { b = a.split(s); for (c = 0, d = this.length; c < d; c++) { e = this[c]; if (e.nodeType === 1) if (!e.className && b.length === 1) e.className = a; else { f = " " + e.className + " "; for (g = 0, h = b.length; g < h; g++) f.indexOf(" " + b[g] + " ") < 0 && (f += b[g] + " "); e.className = p.trim(f) } } } return this }, removeClass: function (a) { var c, d, e, f, g, h, i; if (p.isFunction(a)) return this.each(function (b) { p(this).removeClass(a.call(this, b, this.className)) }); if (a && typeof a == "string" || a === b) { c = (a || "").split(s); for (h = 0, i = this.length; h < i; h++) { e = this[h]; if (e.nodeType === 1 && e.className) { d = (" " + e.className + " ").replace(O, " "); for (f = 0, g = c.length; f < g; f++) while (d.indexOf(" " + c[f] + " ") >= 0) d = d.replace(" " + c[f] + " ", " "); e.className = a ? p.trim(d) : "" } } } return this }, toggleClass: function (a, b) { var c = typeof a, d = typeof b == "boolean"; return p.isFunction(a) ? this.each(function (c) { p(this).toggleClass(a.call(this, c, this.className, b), b) }) : this.each(function () { if (c === "string") { var e, f = 0, g = p(this), h = b, i = a.split(s); while (e = i[f++]) h = d ? h : !g.hasClass(e), g[h ? "addClass" : "removeClass"](e) } else if (c === "undefined" || c === "boolean") this.className && p._data(this, "__className__", this.className), this.className = this.className || a === !1 ? "" : p._data(this, "__className__") || "" }) }, hasClass: function (a) { var b = " " + a + " ", c = 0, d = this.length; for (; c < d; c++) if (this[c].nodeType === 1 && (" " + this[c].className + " ").replace(O, " ").indexOf(b) >= 0) return !0; return !1 }, val: function (a) { var c, d, e, f = this[0]; if (!arguments.length) { if (f) return c = p.valHooks[f.type] || p.valHooks[f.nodeName.toLowerCase()], c && "get" in c && (d = c.get(f, "value")) !== b ? d : (d = f.value, typeof d == "string" ? d.replace(P, "") : d == null ? "" : d); return } return e = p.isFunction(a), this.each(function (d) { var f, g = p(this); if (this.nodeType !== 1) return; e ? f = a.call(this, d, g.val()) : f = a, f == null ? f = "" : typeof f == "number" ? f += "" : p.isArray(f) && (f = p.map(f, function (a) { return a == null ? "" : a + "" })), c = p.valHooks[this.type] || p.valHooks[this.nodeName.toLowerCase()]; if (!c || !("set" in c) || c.set(this, f, "value") === b) this.value = f }) } }), p.extend({ valHooks: { option: { get: function (a) { var b = a.attributes.value; return !b || b.specified ? a.value : a.text } }, select: { get: function (a) { var b, c, d, e, f = a.selectedIndex, g = [], h = a.options, i = a.type === "select-one"; if (f < 0) return null; c = i ? f : 0, d = i ? f + 1 : h.length; for (; c < d; c++) { e = h[c]; if (e.selected && (p.support.optDisabled ? !e.disabled : e.getAttribute("disabled") === null) && (!e.parentNode.disabled || !p.nodeName(e.parentNode, "optgroup"))) { b = p(e).val(); if (i) return b; g.push(b) } } return i && !g.length && h.length ? p(h[f]).val() : g }, set: function (a, b) { var c = p.makeArray(b); return p(a).find("option").each(function () { this.selected = p.inArray(p(this).val(), c) >= 0 }), c.length || (a.selectedIndex = -1), c } } }, attrFn: {}, attr: function (a, c, d, e) { var f, g, h, i = a.nodeType; if (!a || i === 3 || i === 8 || i === 2) return; if (e && p.isFunction(p.fn[c])) return p(a)[c](d); if (typeof a.getAttribute == "undefined") return p.prop(a, c, d); h = i !== 1 || !p.isXMLDoc(a), h && (c = c.toLowerCase(), g = p.attrHooks[c] || (T.test(c) ? M : L)); if (d !== b) { if (d === null) { p.removeAttr(a, c); return } return g && "set" in g && h && (f = g.set(a, d, c)) !== b ? f : (a.setAttribute(c, d + ""), d) } return g && "get" in g && h && (f = g.get(a, c)) !== null ? f : (f = a.getAttribute(c), f === null ? b : f) }, removeAttr: function (a, b) { var c, d, e, f, g = 0; if (b && a.nodeType === 1) { d = b.split(s); for (; g < d.length; g++) e = d[g], e && (c = p.propFix[e] || e, f = T.test(e), f || p.attr(a, e, ""), a.removeAttribute(U ? e : c), f && c in a && (a[c] = !1)) } }, attrHooks: { type: { set: function (a, b) { if (Q.test(a.nodeName) && a.parentNode) p.error("type property can't be changed"); else if (!p.support.radioValue && b === "radio" && p.nodeName(a, "input")) { var c = a.value; return a.setAttribute("type", b), c && (a.value = c), b } } }, value: { get: function (a, b) { return L && p.nodeName(a, "button") ? L.get(a, b) : b in a ? a.value : null }, set: function (a, b, c) { if (L && p.nodeName(a, "button")) return L.set(a, b, c); a.value = b } } }, propFix: { tabindex: "tabIndex", readonly: "readOnly", "for": "htmlFor", "class": "className", maxlength: "maxLength", cellspacing: "cellSpacing", cellpadding: "cellPadding", rowspan: "rowSpan", colspan: "colSpan", usemap: "useMap", frameborder: "frameBorder", contenteditable: "contentEditable" }, prop: function (a, c, d) { var e, f, g, h = a.nodeType; if (!a || h === 3 || h === 8 || h === 2) return; return g = h !== 1 || !p.isXMLDoc(a), g && (c = p.propFix[c] || c, f = p.propHooks[c]), d !== b ? f && "set" in f && (e = f.set(a, d, c)) !== b ? e : a[c] = d : f && "get" in f && (e = f.get(a, c)) !== null ? e : a[c] }, propHooks: { tabIndex: { get: function (a) { var c = a.getAttributeNode("tabindex"); return c && c.specified ? parseInt(c.value, 10) : R.test(a.nodeName) || S.test(a.nodeName) && a.href ? 0 : b } } } }), M = { get: function (a, c) { var d, e = p.prop(a, c); return e === !0 || typeof e != "boolean" && (d = a.getAttributeNode(c)) && d.nodeValue !== !1 ? c.toLowerCase() : b }, set: function (a, b, c) { var d; return b === !1 ? p.removeAttr(a, c) : (d = p.propFix[c] || c, d in a && (a[d] = !0), a.setAttribute(c, c.toLowerCase())), c } }, U || (N = { name: !0, id: !0, coords: !0 }, L = p.valHooks.button = { get: function (a, c) { var d; return d = a.getAttributeNode(c), d && (N[c] ? d.value !== "" : d.specified) ? d.value : b }, set: function (a, b, c) { var d = a.getAttributeNode(c); return d || (d = e.createAttribute(c), a.setAttributeNode(d)), d.value = b + "" } }, p.each(["width", "height"], function (a, b) { p.attrHooks[b] = p.extend(p.attrHooks[b], { set: function (a, c) { if (c === "") return a.setAttribute(b, "auto"), c } }) }), p.attrHooks.contenteditable = { get: L.get, set: function (a, b, c) { b === "" && (b = "false"), L.set(a, b, c) } }), p.support.hrefNormalized || p.each(["href", "src", "width", "height"], function (a, c) { p.attrHooks[c] = p.extend(p.attrHooks[c], { get: function (a) { var d = a.getAttribute(c, 2); return d === null ? b : d } }) }), p.support.style || (p.attrHooks.style = { get: function (a) { return a.style.cssText.toLowerCase() || b }, set: function (a, b) { return a.style.cssText = b + "" } }), p.support.optSelected || (p.propHooks.selected = p.extend(p.propHooks.selected, { get: function (a) { var b = a.parentNode; return b && (b.selectedIndex, b.parentNode && b.parentNode.selectedIndex), null } })), p.support.enctype || (p.propFix.enctype = "encoding"), p.support.checkOn || p.each(["radio", "checkbox"], function () { p.valHooks[this] = { get: function (a) { return a.getAttribute("value") === null ? "on" : a.value } } }), p.each(["radio", "checkbox"], function () { p.valHooks[this] = p.extend(p.valHooks[this], { set: function (a, b) { if (p.isArray(b)) return a.checked = p.inArray(p(a).val(), b) >= 0 } }) }); var V = /^(?:textarea|input|select)$/i, W = /^([^\.]*|)(?:\.(.+)|)$/, X = /(?:^|\s)hover(\.\S+|)\b/, Y = /^key/, Z = /^(?:mouse|contextmenu)|click/, $ = /^(?:focusinfocus|focusoutblur)$/, _ = function (a) { return p.event.special.hover ? a : a.replace(X, "mouseenter$1 mouseleave$1") }; p.event = { add: function (a, c, d, e, f) { var g, h, i, j, k, l, m, n, o, q, r; if (a.nodeType === 3 || a.nodeType === 8 || !c || !d || !(g = p._data(a))) return; d.handler && (o = d, d = o.handler, f = o.selector), d.guid || (d.guid = p.guid++), i = g.events, i || (g.events = i = {}), h = g.handle, h || (g.handle = h = function (a) { return typeof p != "undefined" && (!a || p.event.triggered !== a.type) ? p.event.dispatch.apply(h.elem, arguments) : b }, h.elem = a), c = p.trim(_(c)).split(" "); for (j = 0; j < c.length; j++) { k = W.exec(c[j]) || [], l = k[1], m = (k[2] || "").split(".").sort(), r = p.event.special[l] || {}, l = (f ? r.delegateType : r.bindType) || l, r = p.event.special[l] || {}, n = p.extend({ type: l, origType: k[1], data: e, handler: d, guid: d.guid, selector: f, needsContext: f && p.expr.match.needsContext.test(f), namespace: m.join(".") }, o), q = i[l]; if (!q) { q = i[l] = [], q.delegateCount = 0; if (!r.setup || r.setup.call(a, e, m, h) === !1) a.addEventListener ? a.addEventListener(l, h, !1) : a.attachEvent && a.attachEvent("on" + l, h) } r.add && (r.add.call(a, n), n.handler.guid || (n.handler.guid = d.guid)), f ? q.splice(q.delegateCount++, 0, n) : q.push(n), p.event.global[l] = !0 } a = null }, global: {}, remove: function (a, b, c, d, e) { var f, g, h, i, j, k, l, m, n, o, q, r = p.hasData(a) && p._data(a); if (!r || !(m = r.events)) return; b = p.trim(_(b || "")).split(" "); for (f = 0; f < b.length; f++) { g = W.exec(b[f]) || [], h = i = g[1], j = g[2]; if (!h) { for (h in m) p.event.remove(a, h + b[f], c, d, !0); continue } n = p.event.special[h] || {}, h = (d ? n.delegateType : n.bindType) || h, o = m[h] || [], k = o.length, j = j ? new RegExp("(^|\\.)" + j.split(".").sort().join("\\.(?:.*\\.|)") + "(\\.|$)") : null; for (l = 0; l < o.length; l++) q = o[l], (e || i === q.origType) && (!c || c.guid === q.guid) && (!j || j.test(q.namespace)) && (!d || d === q.selector || d === "**" && q.selector) && (o.splice(l--, 1), q.selector && o.delegateCount--, n.remove && n.remove.call(a, q)); o.length === 0 && k !== o.length && ((!n.teardown || n.teardown.call(a, j, r.handle) === !1) && p.removeEvent(a, h, r.handle), delete m[h]) } p.isEmptyObject(m) && (delete r.handle, p.removeData(a, "events", !0)) }, customEvent: { getData: !0, setData: !0, changeData: !0 }, trigger: function (c, d, f, g) { if (!f || f.nodeType !== 3 && f.nodeType !== 8) { var h, i, j, k, l, m, n, o, q, r, s = c.type || c, t = []; if ($.test(s + p.event.triggered)) return; s.indexOf("!") >= 0 && (s = s.slice(0, -1), i = !0), s.indexOf(".") >= 0 && (t = s.split("."), s = t.shift(), t.sort()); if ((!f || p.event.customEvent[s]) && !p.event.global[s]) return; c = typeof c == "object" ? c[p.expando] ? c : new p.Event(s, c) : new p.Event(s), c.type = s, c.isTrigger = !0, c.exclusive = i, c.namespace = t.join("."), c.namespace_re = c.namespace ? new RegExp("(^|\\.)" + t.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, m = s.indexOf(":") < 0 ? "on" + s : ""; if (!f) { h = p.cache; for (j in h) h[j].events && h[j].events[s] && p.event.trigger(c, d, h[j].handle.elem, !0); return } c.result = b, c.target || (c.target = f), d = d != null ? p.makeArray(d) : [], d.unshift(c), n = p.event.special[s] || {}; if (n.trigger && n.trigger.apply(f, d) === !1) return; q = [[f, n.bindType || s]]; if (!g && !n.noBubble && !p.isWindow(f)) { r = n.delegateType || s, k = $.test(r + s) ? f : f.parentNode; for (l = f; k; k = k.parentNode) q.push([k, r]), l = k; l === (f.ownerDocument || e) && q.push([l.defaultView || l.parentWindow || a, r]) } for (j = 0; j < q.length && !c.isPropagationStopped() ; j++) k = q[j][0], c.type = q[j][1], o = (p._data(k, "events") || {})[c.type] && p._data(k, "handle"), o && o.apply(k, d), o = m && k[m], o && p.acceptData(k) && o.apply && o.apply(k, d) === !1 && c.preventDefault(); return c.type = s, !g && !c.isDefaultPrevented() && (!n._default || n._default.apply(f.ownerDocument, d) === !1) && (s !== "click" || !p.nodeName(f, "a")) && p.acceptData(f) && m && f[s] && (s !== "focus" && s !== "blur" || c.target.offsetWidth !== 0) && !p.isWindow(f) && (l = f[m], l && (f[m] = null), p.event.triggered = s, f[s](), p.event.triggered = b, l && (f[m] = l)), c.result } return }, dispatch: function (c) { c = p.event.fix(c || a.event); var d, e, f, g, h, i, j, l, m, n, o = (p._data(this, "events") || {})[c.type] || [], q = o.delegateCount, r = k.call(arguments), s = !c.exclusive && !c.namespace, t = p.event.special[c.type] || {}, u = []; r[0] = c, c.delegateTarget = this; if (t.preDispatch && t.preDispatch.call(this, c) === !1) return; if (q && (!c.button || c.type !== "click")) for (f = c.target; f != this; f = f.parentNode || this) if (f.disabled !== !0 || c.type !== "click") { h = {}, j = []; for (d = 0; d < q; d++) l = o[d], m = l.selector, h[m] === b && (h[m] = l.needsContext ? p(m, this).index(f) >= 0 : p.find(m, this, null, [f]).length), h[m] && j.push(l); j.length && u.push({ elem: f, matches: j }) } o.length > q && u.push({ elem: this, matches: o.slice(q) }); for (d = 0; d < u.length && !c.isPropagationStopped() ; d++) { i = u[d], c.currentTarget = i.elem; for (e = 0; e < i.matches.length && !c.isImmediatePropagationStopped() ; e++) { l = i.matches[e]; if (s || !c.namespace && !l.namespace || c.namespace_re && c.namespace_re.test(l.namespace)) c.data = l.data, c.handleObj = l, g = ((p.event.special[l.origType] || {}).handle || l.handler).apply(i.elem, r), g !== b && (c.result = g, g === !1 && (c.preventDefault(), c.stopPropagation())) } } return t.postDispatch && t.postDispatch.call(this, c), c.result }, props: "attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "), fixHooks: {}, keyHooks: { props: "char charCode key keyCode".split(" "), filter: function (a, b) { return a.which == null && (a.which = b.charCode != null ? b.charCode : b.keyCode), a } }, mouseHooks: { props: "button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "), filter: function (a, c) { var d, f, g, h = c.button, i = c.fromElement; return a.pageX == null && c.clientX != null && (d = a.target.ownerDocument || e, f = d.documentElement, g = d.body, a.pageX = c.clientX + (f && f.scrollLeft || g && g.scrollLeft || 0) - (f && f.clientLeft || g && g.clientLeft || 0), a.pageY = c.clientY + (f && f.scrollTop || g && g.scrollTop || 0) - (f && f.clientTop || g && g.clientTop || 0)), !a.relatedTarget && i && (a.relatedTarget = i === a.target ? c.toElement : i), !a.which && h !== b && (a.which = h & 1 ? 1 : h & 2 ? 3 : h & 4 ? 2 : 0), a } }, fix: function (a) { if (a[p.expando]) return a; var b, c, d = a, f = p.event.fixHooks[a.type] || {}, g = f.props ? this.props.concat(f.props) : this.props; a = p.Event(d); for (b = g.length; b;) c = g[--b], a[c] = d[c]; return a.target || (a.target = d.srcElement || e), a.target.nodeType === 3 && (a.target = a.target.parentNode), a.metaKey = !!a.metaKey, f.filter ? f.filter(a, d) : a }, special: { load: { noBubble: !0 }, focus: { delegateType: "focusin" }, blur: { delegateType: "focusout" }, beforeunload: { setup: function (a, b, c) { p.isWindow(this) && (this.onbeforeunload = c) }, teardown: function (a, b) { this.onbeforeunload === b && (this.onbeforeunload = null) } } }, simulate: function (a, b, c, d) { var e = p.extend(new p.Event, c, { type: a, isSimulated: !0, originalEvent: {} }); d ? p.event.trigger(e, null, b) : p.event.dispatch.call(b, e), e.isDefaultPrevented() && c.preventDefault() } }, p.event.handle = p.event.dispatch, p.removeEvent = e.removeEventListener ? function (a, b, c) { a.removeEventListener && a.removeEventListener(b, c, !1) } : function (a, b, c) { var d = "on" + b; a.detachEvent && (typeof a[d] == "undefined" && (a[d] = null), a.detachEvent(d, c)) }, p.Event = function (a, b) { if (this instanceof p.Event) a && a.type ? (this.originalEvent = a, this.type = a.type, this.isDefaultPrevented = a.defaultPrevented || a.returnValue === !1 || a.getPreventDefault && a.getPreventDefault() ? bb : ba) : this.type = a, b && p.extend(this, b), this.timeStamp = a && a.timeStamp || p.now(), this[p.expando] = !0; else return new p.Event(a, b) }, p.Event.prototype = { preventDefault: function () { this.isDefaultPrevented = bb; var a = this.originalEvent; if (!a) return; a.preventDefault ? a.preventDefault() : a.returnValue = !1 }, stopPropagation: function () { this.isPropagationStopped = bb; var a = this.originalEvent; if (!a) return; a.stopPropagation && a.stopPropagation(), a.cancelBubble = !0 }, stopImmediatePropagation: function () { this.isImmediatePropagationStopped = bb, this.stopPropagation() }, isDefaultPrevented: ba, isPropagationStopped: ba, isImmediatePropagationStopped: ba }, p.each({ mouseenter: "mouseover", mouseleave: "mouseout" }, function (a, b) { p.event.special[a] = { delegateType: b, bindType: b, handle: function (a) { var c, d = this, e = a.relatedTarget, f = a.handleObj, g = f.selector; if (!e || e !== d && !p.contains(d, e)) a.type = f.origType, c = f.handler.apply(this, arguments), a.type = b; return c } } }), p.support.submitBubbles || (p.event.special.submit = { setup: function () { if (p.nodeName(this, "form")) return !1; p.event.add(this, "click._submit keypress._submit", function (a) { var c = a.target, d = p.nodeName(c, "input") || p.nodeName(c, "button") ? c.form : b; d && !p._data(d, "_submit_attached") && (p.event.add(d, "submit._submit", function (a) { a._submit_bubble = !0 }), p._data(d, "_submit_attached", !0)) }) }, postDispatch: function (a) { a._submit_bubble && (delete a._submit_bubble, this.parentNode && !a.isTrigger && p.event.simulate("submit", this.parentNode, a, !0)) }, teardown: function () { if (p.nodeName(this, "form")) return !1; p.event.remove(this, "._submit") } }), p.support.changeBubbles || (p.event.special.change = { setup: function () { if (V.test(this.nodeName)) { if (this.type === "checkbox" || this.type === "radio") p.event.add(this, "propertychange._change", function (a) { a.originalEvent.propertyName === "checked" && (this._just_changed = !0) }), p.event.add(this, "click._change", function (a) { this._just_changed && !a.isTrigger && (this._just_changed = !1), p.event.simulate("change", this, a, !0) }); return !1 } p.event.add(this, "beforeactivate._change", function (a) { var b = a.target; V.test(b.nodeName) && !p._data(b, "_change_attached") && (p.event.add(b, "change._change", function (a) { this.parentNode && !a.isSimulated && !a.isTrigger && p.event.simulate("change", this.parentNode, a, !0) }), p._data(b, "_change_attached", !0)) }) }, handle: function (a) { var b = a.target; if (this !== b || a.isSimulated || a.isTrigger || b.type !== "radio" && b.type !== "checkbox") return a.handleObj.handler.apply(this, arguments) }, teardown: function () { return p.event.remove(this, "._change"), !V.test(this.nodeName) } }), p.support.focusinBubbles || p.each({ focus: "focusin", blur: "focusout" }, function (a, b) { var c = 0, d = function (a) { p.event.simulate(b, a.target, p.event.fix(a), !0) }; p.event.special[b] = { setup: function () { c++ === 0 && e.addEventListener(a, d, !0) }, teardown: function () { --c === 0 && e.removeEventListener(a, d, !0) } } }), p.fn.extend({ on: function (a, c, d, e, f) { var g, h; if (typeof a == "object") { typeof c != "string" && (d = d || c, c = b); for (h in a) this.on(h, c, d, a[h], f); return this } d == null && e == null ? (e = c, d = c = b) : e == null && (typeof c == "string" ? (e = d, d = b) : (e = d, d = c, c = b)); if (e === !1) e = ba; else if (!e) return this; return f === 1 && (g = e, e = function (a) { return p().off(a), g.apply(this, arguments) }, e.guid = g.guid || (g.guid = p.guid++)), this.each(function () { p.event.add(this, a, e, d, c) }) }, one: function (a, b, c, d) { return this.on(a, b, c, d, 1) }, off: function (a, c, d) { var e, f; if (a && a.preventDefault && a.handleObj) return e = a.handleObj, p(a.delegateTarget).off(e.namespace ? e.origType + "." + e.namespace : e.origType, e.selector, e.handler), this; if (typeof a == "object") { for (f in a) this.off(f, c, a[f]); return this } if (c === !1 || typeof c == "function") d = c, c = b; return d === !1 && (d = ba), this.each(function () { p.event.remove(this, a, d, c) }) }, bind: function (a, b, c) { return this.on(a, null, b, c) }, unbind: function (a, b) { return this.off(a, null, b) }, live: function (a, b, c) { return p(this.context).on(a, this.selector, b, c), this }, die: function (a, b) { return p(this.context).off(a, this.selector || "**", b), this }, delegate: function (a, b, c, d) { return this.on(b, a, c, d) }, undelegate: function (a, b, c) { return arguments.length === 1 ? this.off(a, "**") : this.off(b, a || "**", c) }, trigger: function (a, b) { return this.each(function () { p.event.trigger(a, b, this) }) }, triggerHandler: function (a, b) { if (this[0]) return p.event.trigger(a, b, this[0], !0) }, toggle: function (a) { var b = arguments, c = a.guid || p.guid++, d = 0, e = function (c) { var e = (p._data(this, "lastToggle" + a.guid) || 0) % d; return p._data(this, "lastToggle" + a.guid, e + 1), c.preventDefault(), b[e].apply(this, arguments) || !1 }; e.guid = c; while (d < b.length) b[d++].guid = c; return this.click(e) }, hover: function (a, b) { return this.mouseenter(a).mouseleave(b || a) } }), p.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function (a, b) { p.fn[b] = function (a, c) { return c == null && (c = a, a = null), arguments.length > 0 ? this.on(b, null, a, c) : this.trigger(b) }, Y.test(b) && (p.event.fixHooks[b] = p.event.keyHooks), Z.test(b) && (p.event.fixHooks[b] = p.event.mouseHooks) }), function (a, b) { function bc(a, b, c, d) { c = c || [], b = b || r; var e, f, i, j, k = b.nodeType; if (!a || typeof a != "string") return c; if (k !== 1 && k !== 9) return []; i = g(b); if (!i && !d) if (e = P.exec(a)) if (j = e[1]) { if (k === 9) { f = b.getElementById(j); if (!f || !f.parentNode) return c; if (f.id === j) return c.push(f), c } else if (b.ownerDocument && (f = b.ownerDocument.getElementById(j)) && h(b, f) && f.id === j) return c.push(f), c } else { if (e[2]) return w.apply(c, x.call(b.getElementsByTagName(a), 0)), c; if ((j = e[3]) && _ && b.getElementsByClassName) return w.apply(c, x.call(b.getElementsByClassName(j), 0)), c } return bp(a.replace(L, "$1"), b, c, d, i) } function bd(a) { return function (b) { var c = b.nodeName.toLowerCase(); return c === "input" && b.type === a } } function be(a) { return function (b) { var c = b.nodeName.toLowerCase(); return (c === "input" || c === "button") && b.type === a } } function bf(a) { return z(function (b) { return b = +b, z(function (c, d) { var e, f = a([], c.length, b), g = f.length; while (g--) c[e = f[g]] && (c[e] = !(d[e] = c[e])) }) }) } function bg(a, b, c) { if (a === b) return c; var d = a.nextSibling; while (d) { if (d === b) return -1; d = d.nextSibling } return 1 } function bh(a, b) { var c, d, f, g, h, i, j, k = C[o][a]; if (k) return b ? 0 : k.slice(0); h = a, i = [], j = e.preFilter; while (h) { if (!c || (d = M.exec(h))) d && (h = h.slice(d[0].length)), i.push(f = []); c = !1; if (d = N.exec(h)) f.push(c = new q(d.shift())), h = h.slice(c.length), c.type = d[0].replace(L, " "); for (g in e.filter) (d = W[g].exec(h)) && (!j[g] || (d = j[g](d, r, !0))) && (f.push(c = new q(d.shift())), h = h.slice(c.length), c.type = g, c.matches = d); if (!c) break } return b ? h.length : h ? bc.error(a) : C(a, i).slice(0) } function bi(a, b, d) { var e = b.dir, f = d && b.dir === "parentNode", g = u++; return b.first ? function (b, c, d) { while (b = b[e]) if (f || b.nodeType === 1) return a(b, c, d) } : function (b, d, h) { if (!h) { var i, j = t + " " + g + " ", k = j + c; while (b = b[e]) if (f || b.nodeType === 1) { if ((i = b[o]) === k) return b.sizset; if (typeof i == "string" && i.indexOf(j) === 0) { if (b.sizset) return b } else { b[o] = k; if (a(b, d, h)) return b.sizset = !0, b; b.sizset = !1 } } } else while (b = b[e]) if (f || b.nodeType === 1) if (a(b, d, h)) return b } } function bj(a) { return a.length > 1 ? function (b, c, d) { var e = a.length; while (e--) if (!a[e](b, c, d)) return !1; return !0 } : a[0] } function bk(a, b, c, d, e) { var f, g = [], h = 0, i = a.length, j = b != null; for (; h < i; h++) if (f = a[h]) if (!c || c(f, d, e)) g.push(f), j && b.push(h); return g } function bl(a, b, c, d, e, f) { return d && !d[o] && (d = bl(d)), e && !e[o] && (e = bl(e, f)), z(function (f, g, h, i) { if (f && e) return; var j, k, l, m = [], n = [], o = g.length, p = f || bo(b || "*", h.nodeType ? [h] : h, [], f), q = a && (f || !b) ? bk(p, m, a, h, i) : p, r = c ? e || (f ? a : o || d) ? [] : g : q; c && c(q, r, h, i); if (d) { l = bk(r, n), d(l, [], h, i), j = l.length; while (j--) if (k = l[j]) r[n[j]] = !(q[n[j]] = k) } if (f) { j = a && r.length; while (j--) if (k = r[j]) f[m[j]] = !(g[m[j]] = k) } else r = bk(r === g ? r.splice(o, r.length) : r), e ? e(null, g, r, i) : w.apply(g, r) }) } function bm(a) { var b, c, d, f = a.length, g = e.relative[a[0].type], h = g || e.relative[" "], i = g ? 1 : 0, j = bi(function (a) { return a === b }, h, !0), k = bi(function (a) { return y.call(b, a) > -1 }, h, !0), m = [function (a, c, d) { return !g && (d || c !== l) || ((b = c).nodeType ? j(a, c, d) : k(a, c, d)) }]; for (; i < f; i++) if (c = e.relative[a[i].type]) m = [bi(bj(m), c)]; else { c = e.filter[a[i].type].apply(null, a[i].matches); if (c[o]) { d = ++i; for (; d < f; d++) if (e.relative[a[d].type]) break; return bl(i > 1 && bj(m), i > 1 && a.slice(0, i - 1).join("").replace(L, "$1"), c, i < d && bm(a.slice(i, d)), d < f && bm(a = a.slice(d)), d < f && a.join("")) } m.push(c) } return bj(m) } function bn(a, b) { var d = b.length > 0, f = a.length > 0, g = function (h, i, j, k, m) { var n, o, p, q = [], s = 0, u = "0", x = h && [], y = m != null, z = l, A = h || f && e.find.TAG("*", m && i.parentNode || i), B = t += z == null ? 1 : Math.E; y && (l = i !== r && i, c = g.el); for (; (n = A[u]) != null; u++) { if (f && n) { for (o = 0; p = a[o]; o++) if (p(n, i, j)) { k.push(n); break } y && (t = B, c = ++g.el) } d && ((n = !p && n) && s--, h && x.push(n)) } s += u; if (d && u !== s) { for (o = 0; p = b[o]; o++) p(x, q, i, j); if (h) { if (s > 0) while (u--) !x[u] && !q[u] && (q[u] = v.call(k)); q = bk(q) } w.apply(k, q), y && !h && q.length > 0 && s + b.length > 1 && bc.uniqueSort(k) } return y && (t = B, l = z), x }; return g.el = 0, d ? z(g) : g } function bo(a, b, c, d) { var e = 0, f = b.length; for (; e < f; e++) bc(a, b[e], c, d); return c } function bp(a, b, c, d, f) { var g, h, j, k, l, m = bh(a), n = m.length; if (!d && m.length === 1) { h = m[0] = m[0].slice(0); if (h.length > 2 && (j = h[0]).type === "ID" && b.nodeType === 9 && !f && e.relative[h[1].type]) { b = e.find.ID(j.matches[0].replace(V, ""), b, f)[0]; if (!b) return c; a = a.slice(h.shift().length) } for (g = W.POS.test(a) ? -1 : h.length - 1; g >= 0; g--) { j = h[g]; if (e.relative[k = j.type]) break; if (l = e.find[k]) if (d = l(j.matches[0].replace(V, ""), R.test(h[0].type) && b.parentNode || b, f)) { h.splice(g, 1), a = d.length && h.join(""); if (!a) return w.apply(c, x.call(d, 0)), c; break } } } return i(a, m)(d, b, f, c, R.test(a)), c } function bq() { } var c, d, e, f, g, h, i, j, k, l, m = !0, n = "undefined", o = ("sizcache" + Math.random()).replace(".", ""), q = String, r = a.document, s = r.documentElement, t = 0, u = 0, v = [].pop, w = [].push, x = [].slice, y = [].indexOf || function (a) { var b = 0, c = this.length; for (; b < c; b++) if (this[b] === a) return b; return -1 }, z = function (a, b) { return a[o] = b == null || b, a }, A = function () { var a = {}, b = []; return z(function (c, d) { return b.push(c) > e.cacheLength && delete a[b.shift()], a[c] = d }, a) }, B = A(), C = A(), D = A(), E = "[\\x20\\t\\r\\n\\f]", F = "(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+", G = F.replace("w", "w#"), H = "([*^$|!~]?=)", I = "\\[" + E + "*(" + F + ")" + E + "*(?:" + H + E + "*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|(" + G + ")|)|)" + E + "*\\]", J = ":(" + F + ")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:" + I + ")|[^:]|\\\\.)*|.*))\\)|)", K = ":(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + E + "*((?:-\\d)?\\d*)" + E + "*\\)|)(?=[^-]|$)", L = new RegExp("^" + E + "+|((?:^|[^\\\\])(?:\\\\.)*)" + E + "+$", "g"), M = new RegExp("^" + E + "*," + E + "*"), N = new RegExp("^" + E + "*([\\x20\\t\\r\\n\\f>+~])" + E + "*"), O = new RegExp(J), P = /^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/, Q = /^:not/, R = /[\x20\t\r\n\f]*[+~]/, S = /:not\($/, T = /h\d/i, U = /input|select|textarea|button/i, V = /\\(?!\\)/g, W = { ID: new RegExp("^#(" + F + ")"), CLASS: new RegExp("^\\.(" + F + ")"), NAME: new RegExp("^\\[name=['\"]?(" + F + ")['\"]?\\]"), TAG: new RegExp("^(" + F.replace("w", "w*") + ")"), ATTR: new RegExp("^" + I), PSEUDO: new RegExp("^" + J), POS: new RegExp(K, "i"), CHILD: new RegExp("^:(only|nth|first|last)-child(?:\\(" + E + "*(even|odd|(([+-]|)(\\d*)n|)" + E + "*(?:([+-]|)" + E + "*(\\d+)|))" + E + "*\\)|)", "i"), needsContext: new RegExp("^" + E + "*[>+~]|" + K, "i") }, X = function (a) { var b = r.createElement("div"); try { return a(b) } catch (c) { return !1 } finally { b = null } }, Y = X(function (a) { return a.appendChild(r.createComment("")), !a.getElementsByTagName("*").length }), Z = X(function (a) { return a.innerHTML = "<a href='#'></a>", a.firstChild && typeof a.firstChild.getAttribute !== n && a.firstChild.getAttribute("href") === "#" }), $ = X(function (a) { a.innerHTML = "<select></select>"; var b = typeof a.lastChild.getAttribute("multiple"); return b !== "boolean" && b !== "string" }), _ = X(function (a) { return a.innerHTML = "<div class='hidden e'></div><div class='hidden'></div>", !a.getElementsByClassName || !a.getElementsByClassName("e").length ? !1 : (a.lastChild.className = "e", a.getElementsByClassName("e").length === 2) }), ba = X(function (a) { a.id = o + 0, a.innerHTML = "<a name='" + o + "'></a><div name='" + o + "'></div>", s.insertBefore(a, s.firstChild); var b = r.getElementsByName && r.getElementsByName(o).length === 2 + r.getElementsByName(o + 0).length; return d = !r.getElementById(o), s.removeChild(a), b }); try { x.call(s.childNodes, 0)[0].nodeType } catch (bb) { x = function (a) { var b, c = []; for (; b = this[a]; a++) c.push(b); return c } } bc.matches = function (a, b) { return bc(a, null, null, b) }, bc.matchesSelector = function (a, b) { return bc(b, null, null, [a]).length > 0 }, f = bc.getText = function (a) { var b, c = "", d = 0, e = a.nodeType; if (e) { if (e === 1 || e === 9 || e === 11) { if (typeof a.textContent == "string") return a.textContent; for (a = a.firstChild; a; a = a.nextSibling) c += f(a) } else if (e === 3 || e === 4) return a.nodeValue } else for (; b = a[d]; d++) c += f(b); return c }, g = bc.isXML = function (a) { var b = a && (a.ownerDocument || a).documentElement; return b ? b.nodeName !== "HTML" : !1 }, h = bc.contains = s.contains ? function (a, b) { var c = a.nodeType === 9 ? a.documentElement : a, d = b && b.parentNode; return a === d || !!(d && d.nodeType === 1 && c.contains && c.contains(d)) } : s.compareDocumentPosition ? function (a, b) { return b && !!(a.compareDocumentPosition(b) & 16) } : function (a, b) { while (b = b.parentNode) if (b === a) return !0; return !1 }, bc.attr = function (a, b) { var c, d = g(a); return d || (b = b.toLowerCase()), (c = e.attrHandle[b]) ? c(a) : d || $ ? a.getAttribute(b) : (c = a.getAttributeNode(b), c ? typeof a[b] == "boolean" ? a[b] ? b : null : c.specified ? c.value : null : null) }, e = bc.selectors = { cacheLength: 50, createPseudo: z, match: W, attrHandle: Z ? {} : { href: function (a) { return a.getAttribute("href", 2) }, type: function (a) { return a.getAttribute("type") } }, find: { ID: d ? function (a, b, c) { if (typeof b.getElementById !== n && !c) { var d = b.getElementById(a); return d && d.parentNode ? [d] : [] } } : function (a, c, d) { if (typeof c.getElementById !== n && !d) { var e = c.getElementById(a); return e ? e.id === a || typeof e.getAttributeNode !== n && e.getAttributeNode("id").value === a ? [e] : b : [] } }, TAG: Y ? function (a, b) { if (typeof b.getElementsByTagName !== n) return b.getElementsByTagName(a) } : function (a, b) { var c = b.getElementsByTagName(a); if (a === "*") { var d, e = [], f = 0; for (; d = c[f]; f++) d.nodeType === 1 && e.push(d); return e } return c }, NAME: ba && function (a, b) { if (typeof b.getElementsByName !== n) return b.getElementsByName(name) }, CLASS: _ && function (a, b, c) { if (typeof b.getElementsByClassName !== n && !c) return b.getElementsByClassName(a) } }, relative: { ">": { dir: "parentNode", first: !0 }, " ": { dir: "parentNode" }, "+": { dir: "previousSibling", first: !0 }, "~": { dir: "previousSibling" } }, preFilter: { ATTR: function (a) { return a[1] = a[1].replace(V, ""), a[3] = (a[4] || a[5] || "").replace(V, ""), a[2] === "~=" && (a[3] = " " + a[3] + " "), a.slice(0, 4) }, CHILD: function (a) { return a[1] = a[1].toLowerCase(), a[1] === "nth" ? (a[2] || bc.error(a[0]), a[3] = +(a[3] ? a[4] + (a[5] || 1) : 2 * (a[2] === "even" || a[2] === "odd")), a[4] = +(a[6] + a[7] || a[2] === "odd")) : a[2] && bc.error(a[0]), a }, PSEUDO: function (a) { var b, c; if (W.CHILD.test(a[0])) return null; if (a[3]) a[2] = a[3]; else if (b = a[4]) O.test(b) && (c = bh(b, !0)) && (c = b.indexOf(")", b.length - c) - b.length) && (b = b.slice(0, c), a[0] = a[0].slice(0, c)), a[2] = b; return a.slice(0, 3) } }, filter: { ID: d ? function (a) { return a = a.replace(V, ""), function (b) { return b.getAttribute("id") === a } } : function (a) { return a = a.replace(V, ""), function (b) { var c = typeof b.getAttributeNode !== n && b.getAttributeNode("id"); return c && c.value === a } }, TAG: function (a) { return a === "*" ? function () { return !0 } : (a = a.replace(V, "").toLowerCase(), function (b) { return b.nodeName && b.nodeName.toLowerCase() === a }) }, CLASS: function (a) { var b = B[o][a]; return b || (b = B(a, new RegExp("(^|" + E + ")" + a + "(" + E + "|$)"))), function (a) { return b.test(a.className || typeof a.getAttribute !== n && a.getAttribute("class") || "") } }, ATTR: function (a, b, c) { return function (d, e) { var f = bc.attr(d, a); return f == null ? b === "!=" : b ? (f += "", b === "=" ? f === c : b === "!=" ? f !== c : b === "^=" ? c && f.indexOf(c) === 0 : b === "*=" ? c && f.indexOf(c) > -1 : b === "$=" ? c && f.substr(f.length - c.length) === c : b === "~=" ? (" " + f + " ").indexOf(c) > -1 : b === "|=" ? f === c || f.substr(0, c.length + 1) === c + "-" : !1) : !0 } }, CHILD: function (a, b, c, d) { return a === "nth" ? function (a) { var b, e, f = a.parentNode; if (c === 1 && d === 0) return !0; if (f) { e = 0; for (b = f.firstChild; b; b = b.nextSibling) if (b.nodeType === 1) { e++; if (a === b) break } } return e -= d, e === c || e % c === 0 && e / c >= 0 } : function (b) { var c = b; switch (a) { case "only": case "first": while (c = c.previousSibling) if (c.nodeType === 1) return !1; if (a === "first") return !0; c = b; case "last": while (c = c.nextSibling) if (c.nodeType === 1) return !1; return !0 } } }, PSEUDO: function (a, b) { var c, d = e.pseudos[a] || e.setFilters[a.toLowerCase()] || bc.error("unsupported pseudo: " + a); return d[o] ? d(b) : d.length > 1 ? (c = [a, a, "", b], e.setFilters.hasOwnProperty(a.toLowerCase()) ? z(function (a, c) { var e, f = d(a, b), g = f.length; while (g--) e = y.call(a, f[g]), a[e] = !(c[e] = f[g]) }) : function (a) { return d(a, 0, c) }) : d } }, pseudos: { not: z(function (a) { var b = [], c = [], d = i(a.replace(L, "$1")); return d[o] ? z(function (a, b, c, e) { var f, g = d(a, null, e, []), h = a.length; while (h--) if (f = g[h]) a[h] = !(b[h] = f) }) : function (a, e, f) { return b[0] = a, d(b, null, f, c), !c.pop() } }), has: z(function (a) { return function (b) { return bc(a, b).length > 0 } }), contains: z(function (a) { return function (b) { return (b.textContent || b.innerText || f(b)).indexOf(a) > -1 } }), enabled: function (a) { return a.disabled === !1 }, disabled: function (a) { return a.disabled === !0 }, checked: function (a) { var b = a.nodeName.toLowerCase(); return b === "input" && !!a.checked || b === "option" && !!a.selected }, selected: function (a) { return a.parentNode && a.parentNode.selectedIndex, a.selected === !0 }, parent: function (a) { return !e.pseudos.empty(a) }, empty: function (a) { var b; a = a.firstChild; while (a) { if (a.nodeName > "@" || (b = a.nodeType) === 3 || b === 4) return !1; a = a.nextSibling } return !0 }, header: function (a) { return T.test(a.nodeName) }, text: function (a) { var b, c; return a.nodeName.toLowerCase() === "input" && (b = a.type) === "text" && ((c = a.getAttribute("type")) == null || c.toLowerCase() === b) }, radio: bd("radio"), checkbox: bd("checkbox"), file: bd("file"), password: bd("password"), image: bd("image"), submit: be("submit"), reset: be("reset"), button: function (a) { var b = a.nodeName.toLowerCase(); return b === "input" && a.type === "button" || b === "button" }, input: function (a) { return U.test(a.nodeName) }, focus: function (a) { var b = a.ownerDocument; return a === b.activeElement && (!b.hasFocus || b.hasFocus()) && (!!a.type || !!a.href) }, active: function (a) { return a === a.ownerDocument.activeElement }, first: bf(function (a, b, c) { return [0] }), last: bf(function (a, b, c) { return [b - 1] }), eq: bf(function (a, b, c) { return [c < 0 ? c + b : c] }), even: bf(function (a, b, c) { for (var d = 0; d < b; d += 2) a.push(d); return a }), odd: bf(function (a, b, c) { for (var d = 1; d < b; d += 2) a.push(d); return a }), lt: bf(function (a, b, c) { for (var d = c < 0 ? c + b : c; --d >= 0;) a.push(d); return a }), gt: bf(function (a, b, c) { for (var d = c < 0 ? c + b : c; ++d < b;) a.push(d); return a }) } }, j = s.compareDocumentPosition ? function (a, b) { return a === b ? (k = !0, 0) : (!a.compareDocumentPosition || !b.compareDocumentPosition ? a.compareDocumentPosition : a.compareDocumentPosition(b) & 4) ? -1 : 1 } : function (a, b) { if (a === b) return k = !0, 0; if (a.sourceIndex && b.sourceIndex) return a.sourceIndex - b.sourceIndex; var c, d, e = [], f = [], g = a.parentNode, h = b.parentNode, i = g; if (g === h) return bg(a, b); if (!g) return -1; if (!h) return 1; while (i) e.unshift(i), i = i.parentNode; i = h; while (i) f.unshift(i), i = i.parentNode; c = e.length, d = f.length; for (var j = 0; j < c && j < d; j++) if (e[j] !== f[j]) return bg(e[j], f[j]); return j === c ? bg(a, f[j], -1) : bg(e[j], b, 1) }, [0, 0].sort(j), m = !k, bc.uniqueSort = function (a) { var b, c = 1; k = m, a.sort(j); if (k) for (; b = a[c]; c++) b === a[c - 1] && a.splice(c--, 1); return a }, bc.error = function (a) { throw new Error("Syntax error, unrecognized expression: " + a) }, i = bc.compile = function (a, b) { var c, d = [], e = [], f = D[o][a]; if (!f) { b || (b = bh(a)), c = b.length; while (c--) f = bm(b[c]), f[o] ? d.push(f) : e.push(f); f = D(a, bn(e, d)) } return f }, r.querySelectorAll && function () { var a, b = bp, c = /'|\\/g, d = /\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g, e = [":focus"], f = [":active", ":focus"], h = s.matchesSelector || s.mozMatchesSelector || s.webkitMatchesSelector || s.oMatchesSelector || s.msMatchesSelector; X(function (a) { a.innerHTML = "<select><option selected=''></option></select>", a.querySelectorAll("[selected]").length || e.push("\\[" + E + "*(?:checked|disabled|ismap|multiple|readonly|selected|value)"), a.querySelectorAll(":checked").length || e.push(":checked") }), X(function (a) { a.innerHTML = "<p test=''></p>", a.querySelectorAll("[test^='']").length && e.push("[*^$]=" + E + "*(?:\"\"|'')"), a.innerHTML = "<input type='hidden'/>", a.querySelectorAll(":enabled").length || e.push(":enabled", ":disabled") }), e = new RegExp(e.join("|")), bp = function (a, d, f, g, h) { if (!g && !h && (!e || !e.test(a))) { var i, j, k = !0, l = o, m = d, n = d.nodeType === 9 && a; if (d.nodeType === 1 && d.nodeName.toLowerCase() !== "object") { i = bh(a), (k = d.getAttribute("id")) ? l = k.replace(c, "\\$&") : d.setAttribute("id", l), l = "[id='" + l + "'] ", j = i.length; while (j--) i[j] = l + i[j].join(""); m = R.test(a) && d.parentNode || d, n = i.join(",") } if (n) try { return w.apply(f, x.call(m.querySelectorAll(n), 0)), f } catch (p) { } finally { k || d.removeAttribute("id") } } return b(a, d, f, g, h) }, h && (X(function (b) { a = h.call(b, "div"); try { h.call(b, "[test!='']:sizzle"), f.push("!=", J) } catch (c) { } }), f = new RegExp(f.join("|")), bc.matchesSelector = function (b, c) { c = c.replace(d, "='$1']"); if (!g(b) && !f.test(c) && (!e || !e.test(c))) try { var i = h.call(b, c); if (i || a || b.document && b.document.nodeType !== 11) return i } catch (j) { } return bc(c, null, null, [b]).length > 0 }) }(), e.pseudos.nth = e.pseudos.eq, e.filters = bq.prototype = e.pseudos, e.setFilters = new bq, bc.attr = p.attr, p.find = bc, p.expr = bc.selectors, p.expr[":"] = p.expr.pseudos, p.unique = bc.uniqueSort, p.text = bc.getText, p.isXMLDoc = bc.isXML, p.contains = bc.contains }(a); var bc = /Until$/, bd = /^(?:parents|prev(?:Until|All))/, be = /^.[^:#\[\.,]*$/, bf = p.expr.match.needsContext, bg = { children: !0, contents: !0, next: !0, prev: !0 }; p.fn.extend({ find: function (a) { var b, c, d, e, f, g, h = this; if (typeof a != "string") return p(a).filter(function () { for (b = 0, c = h.length; b < c; b++) if (p.contains(h[b], this)) return !0 }); g = this.pushStack("", "find", a); for (b = 0, c = this.length; b < c; b++) { d = g.length, p.find(a, this[b], g); if (b > 0) for (e = d; e < g.length; e++) for (f = 0; f < d; f++) if (g[f] === g[e]) { g.splice(e--, 1); break } } return g }, has: function (a) { var b, c = p(a, this), d = c.length; return this.filter(function () { for (b = 0; b < d; b++) if (p.contains(this, c[b])) return !0 }) }, not: function (a) { return this.pushStack(bj(this, a, !1), "not", a) }, filter: function (a) { return this.pushStack(bj(this, a, !0), "filter", a) }, is: function (a) { return !!a && (typeof a == "string" ? bf.test(a) ? p(a, this.context).index(this[0]) >= 0 : p.filter(a, this).length > 0 : this.filter(a).length > 0) }, closest: function (a, b) { var c, d = 0, e = this.length, f = [], g = bf.test(a) || typeof a != "string" ? p(a, b || this.context) : 0; for (; d < e; d++) { c = this[d]; while (c && c.ownerDocument && c !== b && c.nodeType !== 11) { if (g ? g.index(c) > -1 : p.find.matchesSelector(c, a)) { f.push(c); break } c = c.parentNode } } return f = f.length > 1 ? p.unique(f) : f, this.pushStack(f, "closest", a) }, index: function (a) { return a ? typeof a == "string" ? p.inArray(this[0], p(a)) : p.inArray(a.jquery ? a[0] : a, this) : this[0] && this[0].parentNode ? this.prevAll().length : -1 }, add: function (a, b) { var c = typeof a == "string" ? p(a, b) : p.makeArray(a && a.nodeType ? [a] : a), d = p.merge(this.get(), c); return this.pushStack(bh(c[0]) || bh(d[0]) ? d : p.unique(d)) }, addBack: function (a) { return this.add(a == null ? this.prevObject : this.prevObject.filter(a)) } }), p.fn.andSelf = p.fn.addBack, p.each({ parent: function (a) { var b = a.parentNode; return b && b.nodeType !== 11 ? b : null }, parents: function (a) { return p.dir(a, "parentNode") }, parentsUntil: function (a, b, c) { return p.dir(a, "parentNode", c) }, next: function (a) { return bi(a, "nextSibling") }, prev: function (a) { return bi(a, "previousSibling") }, nextAll: function (a) { return p.dir(a, "nextSibling") }, prevAll: function (a) { return p.dir(a, "previousSibling") }, nextUntil: function (a, b, c) { return p.dir(a, "nextSibling", c) }, prevUntil: function (a, b, c) { return p.dir(a, "previousSibling", c) }, siblings: function (a) { return p.sibling((a.parentNode || {}).firstChild, a) }, children: function (a) { return p.sibling(a.firstChild) }, contents: function (a) { return p.nodeName(a, "iframe") ? a.contentDocument || a.contentWindow.document : p.merge([], a.childNodes) } }, function (a, b) { p.fn[a] = function (c, d) { var e = p.map(this, b, c); return bc.test(a) || (d = c), d && typeof d == "string" && (e = p.filter(d, e)), e = this.length > 1 && !bg[a] ? p.unique(e) : e, this.length > 1 && bd.test(a) && (e = e.reverse()), this.pushStack(e, a, k.call(arguments).join(",")) } }), p.extend({ filter: function (a, b, c) { return c && (a = ":not(" + a + ")"), b.length === 1 ? p.find.matchesSelector(b[0], a) ? [b[0]] : [] : p.find.matches(a, b) }, dir: function (a, c, d) { var e = [], f = a[c]; while (f && f.nodeType !== 9 && (d === b || f.nodeType !== 1 || !p(f).is(d))) f.nodeType === 1 && e.push(f), f = f[c]; return e }, sibling: function (a, b) { var c = []; for (; a; a = a.nextSibling) a.nodeType === 1 && a !== b && c.push(a); return c } }); var bl = "abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video", bm = / jQuery\d+="(?:null|\d+)"/g, bn = /^\s+/, bo = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi, bp = /<([\w:]+)/, bq = /<tbody/i, br = /<|&#?\w+;/, bs = /<(?:script|style|link)/i, bt = /<(?:script|object|embed|option|style)/i, bu = new RegExp("<(?:" + bl + ")[\\s/>]", "i"), bv = /^(?:checkbox|radio)$/, bw = /checked\s*(?:[^=]|=\s*.checked.)/i, bx = /\/(java|ecma)script/i, by = /^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g, bz = { option: [1, "<select multiple='multiple'>", "</select>"], legend: [1, "<fieldset>", "</fieldset>"], thead: [1, "<table>", "</table>"], tr: [2, "<table><tbody>", "</tbody></table>"], td: [3, "<table><tbody><tr>", "</tr></tbody></table>"], col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"], area: [1, "<map>", "</map>"], _default: [0, "", ""] }, bA = bk(e), bB = bA.appendChild(e.createElement("div")); bz.optgroup = bz.option, bz.tbody = bz.tfoot = bz.colgroup = bz.caption = bz.thead, bz.th = bz.td, p.support.htmlSerialize || (bz._default = [1, "X<div>", "</div>"]), p.fn.extend({ text: function (a) { return p.access(this, function (a) { return a === b ? p.text(this) : this.empty().append((this[0] && this[0].ownerDocument || e).createTextNode(a)) }, null, a, arguments.length) }, wrapAll: function (a) { if (p.isFunction(a)) return this.each(function (b) { p(this).wrapAll(a.call(this, b)) }); if (this[0]) { var b = p(a, this[0].ownerDocument).eq(0).clone(!0); this[0].parentNode && b.insertBefore(this[0]), b.map(function () { var a = this; while (a.firstChild && a.firstChild.nodeType === 1) a = a.firstChild; return a }).append(this) } return this }, wrapInner: function (a) { return p.isFunction(a) ? this.each(function (b) { p(this).wrapInner(a.call(this, b)) }) : this.each(function () { var b = p(this), c = b.contents(); c.length ? c.wrapAll(a) : b.append(a) }) }, wrap: function (a) { var b = p.isFunction(a); return this.each(function (c) { p(this).wrapAll(b ? a.call(this, c) : a) }) }, unwrap: function () { return this.parent().each(function () { p.nodeName(this, "body") || p(this).replaceWith(this.childNodes) }).end() }, append: function () { return this.domManip(arguments, !0, function (a) { (this.nodeType === 1 || this.nodeType === 11) && this.appendChild(a) }) }, prepend: function () { return this.domManip(arguments, !0, function (a) { (this.nodeType === 1 || this.nodeType === 11) && this.insertBefore(a, this.firstChild) }) }, before: function () { if (!bh(this[0])) return this.domManip(arguments, !1, function (a) { this.parentNode.insertBefore(a, this) }); if (arguments.length) { var a = p.clean(arguments); return this.pushStack(p.merge(a, this), "before", this.selector) } }, after: function () { if (!bh(this[0])) return this.domManip(arguments, !1, function (a) { this.parentNode.insertBefore(a, this.nextSibling) }); if (arguments.length) { var a = p.clean(arguments); return this.pushStack(p.merge(this, a), "after", this.selector) } }, remove: function (a, b) { var c, d = 0; for (; (c = this[d]) != null; d++) if (!a || p.filter(a, [c]).length) !b && c.nodeType === 1 && (p.cleanData(c.getElementsByTagName("*")), p.cleanData([c])), c.parentNode && c.parentNode.removeChild(c); return this }, empty: function () { var a, b = 0; for (; (a = this[b]) != null; b++) { a.nodeType === 1 && p.cleanData(a.getElementsByTagName("*")); while (a.firstChild) a.removeChild(a.firstChild) } return this }, clone: function (a, b) { return a = a == null ? !1 : a, b = b == null ? a : b, this.map(function () { return p.clone(this, a, b) }) }, html: function (a) { return p.access(this, function (a) { var c = this[0] || {}, d = 0, e = this.length; if (a === b) return c.nodeType === 1 ? c.innerHTML.replace(bm, "") : b; if (typeof a == "string" && !bs.test(a) && (p.support.htmlSerialize || !bu.test(a)) && (p.support.leadingWhitespace || !bn.test(a)) && !bz[(bp.exec(a) || ["", ""])[1].toLowerCase()]) { a = a.replace(bo, "<$1></$2>"); try { for (; d < e; d++) c = this[d] || {}, c.nodeType === 1 && (p.cleanData(c.getElementsByTagName("*")), c.innerHTML = a); c = 0 } catch (f) { } } c && this.empty().append(a) }, null, a, arguments.length) }, replaceWith: function (a) { return bh(this[0]) ? this.length ? this.pushStack(p(p.isFunction(a) ? a() : a), "replaceWith", a) : this : p.isFunction(a) ? this.each(function (b) { var c = p(this), d = c.html(); c.replaceWith(a.call(this, b, d)) }) : (typeof a != "string" && (a = p(a).detach()), this.each(function () { var b = this.nextSibling, c = this.parentNode; p(this).remove(), b ? p(b).before(a) : p(c).append(a) })) }, detach: function (a) { return this.remove(a, !0) }, domManip: function (a, c, d) { a = [].concat.apply([], a); var e, f, g, h, i = 0, j = a[0], k = [], l = this.length; if (!p.support.checkClone && l > 1 && typeof j == "string" && bw.test(j)) return this.each(function () { p(this).domManip(a, c, d) }); if (p.isFunction(j)) return this.each(function (e) { var f = p(this); a[0] = j.call(this, e, c ? f.html() : b), f.domManip(a, c, d) }); if (this[0]) { e = p.buildFragment(a, this, k), g = e.fragment, f = g.firstChild, g.childNodes.length === 1 && (g = f); if (f) { c = c && p.nodeName(f, "tr"); for (h = e.cacheable || l - 1; i < l; i++) d.call(c && p.nodeName(this[i], "table") ? bC(this[i], "tbody") : this[i], i === h ? g : p.clone(g, !0, !0)) } g = f = null, k.length && p.each(k, function (a, b) { b.src ? p.ajax ? p.ajax({ url: b.src, type: "GET", dataType: "script", async: !1, global: !1, "throws": !0 }) : p.error("no ajax") : p.globalEval((b.text || b.textContent || b.innerHTML || "").replace(by, "")), b.parentNode && b.parentNode.removeChild(b) }) } return this } }), p.buildFragment = function (a, c, d) { var f, g, h, i = a[0]; return c = c || e, c = !c.nodeType && c[0] || c, c = c.ownerDocument || c, a.length === 1 && typeof i == "string" && i.length < 512 && c === e && i.charAt(0) === "<" && !bt.test(i) && (p.support.checkClone || !bw.test(i)) && (p.support.html5Clone || !bu.test(i)) && (g = !0, f = p.fragments[i], h = f !== b), f || (f = c.createDocumentFragment(), p.clean(a, c, f, d), g && (p.fragments[i] = h && f)), { fragment: f, cacheable: g } }, p.fragments = {}, p.each({ appendTo: "append", prependTo: "prepend", insertBefore: "before", insertAfter: "after", replaceAll: "replaceWith" }, function (a, b) { p.fn[a] = function (c) { var d, e = 0, f = [], g = p(c), h = g.length, i = this.length === 1 && this[0].parentNode; if ((i == null || i && i.nodeType === 11 && i.childNodes.length === 1) && h === 1) return g[b](this[0]), this; for (; e < h; e++) d = (e > 0 ? this.clone(!0) : this).get(), p(g[e])[b](d), f = f.concat(d); return this.pushStack(f, a, g.selector) } }), p.extend({ clone: function (a, b, c) { var d, e, f, g; p.support.html5Clone || p.isXMLDoc(a) || !bu.test("<" + a.nodeName + ">") ? g = a.cloneNode(!0) : (bB.innerHTML = a.outerHTML, bB.removeChild(g = bB.firstChild)); if ((!p.support.noCloneEvent || !p.support.noCloneChecked) && (a.nodeType === 1 || a.nodeType === 11) && !p.isXMLDoc(a)) { bE(a, g), d = bF(a), e = bF(g); for (f = 0; d[f]; ++f) e[f] && bE(d[f], e[f]) } if (b) { bD(a, g); if (c) { d = bF(a), e = bF(g); for (f = 0; d[f]; ++f) bD(d[f], e[f]) } } return d = e = null, g }, clean: function (a, b, c, d) { var f, g, h, i, j, k, l, m, n, o, q, r, s = b === e && bA, t = []; if (!b || typeof b.createDocumentFragment == "undefined") b = e; for (f = 0; (h = a[f]) != null; f++) { typeof h == "number" && (h += ""); if (!h) continue; if (typeof h == "string") if (!br.test(h)) h = b.createTextNode(h); else { s = s || bk(b), l = b.createElement("div"), s.appendChild(l), h = h.replace(bo, "<$1></$2>"), i = (bp.exec(h) || ["", ""])[1].toLowerCase(), j = bz[i] || bz._default, k = j[0], l.innerHTML = j[1] + h + j[2]; while (k--) l = l.lastChild; if (!p.support.tbody) { m = bq.test(h), n = i === "table" && !m ? l.firstChild && l.firstChild.childNodes : j[1] === "<table>" && !m ? l.childNodes : []; for (g = n.length - 1; g >= 0; --g) p.nodeName(n[g], "tbody") && !n[g].childNodes.length && n[g].parentNode.removeChild(n[g]) } !p.support.leadingWhitespace && bn.test(h) && l.insertBefore(b.createTextNode(bn.exec(h)[0]), l.firstChild), h = l.childNodes, l.parentNode.removeChild(l) } h.nodeType ? t.push(h) : p.merge(t, h) } l && (h = l = s = null); if (!p.support.appendChecked) for (f = 0; (h = t[f]) != null; f++) p.nodeName(h, "input") ? bG(h) : typeof h.getElementsByTagName != "undefined" && p.grep(h.getElementsByTagName("input"), bG); if (c) { q = function (a) { if (!a.type || bx.test(a.type)) return d ? d.push(a.parentNode ? a.parentNode.removeChild(a) : a) : c.appendChild(a) }; for (f = 0; (h = t[f]) != null; f++) if (!p.nodeName(h, "script") || !q(h)) c.appendChild(h), typeof h.getElementsByTagName != "undefined" && (r = p.grep(p.merge([], h.getElementsByTagName("script")), q), t.splice.apply(t, [f + 1, 0].concat(r)), f += r.length) } return t }, cleanData: function (a, b) { var c, d, e, f, g = 0, h = p.expando, i = p.cache, j = p.support.deleteExpando, k = p.event.special; for (; (e = a[g]) != null; g++) if (b || p.acceptData(e)) { d = e[h], c = d && i[d]; if (c) { if (c.events) for (f in c.events) k[f] ? p.event.remove(e, f) : p.removeEvent(e, f, c.handle); i[d] && (delete i[d], j ? delete e[h] : e.removeAttribute ? e.removeAttribute(h) : e[h] = null, p.deletedIds.push(d)) } } } }), function () { var a, b; p.uaMatch = function (a) { a = a.toLowerCase(); var b = /(chrome)[ \/]([\w.]+)/.exec(a) || /(webkit)[ \/]([\w.]+)/.exec(a) || /(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a) || /(msie) ([\w.]+)/.exec(a) || a.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a) || []; return { browser: b[1] || "", version: b[2] || "0" } }, a = p.uaMatch(g.userAgent), b = {}, a.browser && (b[a.browser] = !0, b.version = a.version), b.chrome ? b.webkit = !0 : b.webkit && (b.safari = !0), p.browser = b, p.sub = function () { function a(b, c) { return new a.fn.init(b, c) } p.extend(!0, a, this), a.superclass = this, a.fn = a.prototype = this(), a.fn.constructor = a, a.sub = this.sub, a.fn.init = function c(c, d) { return d && d instanceof p && !(d instanceof a) && (d = a(d)), p.fn.init.call(this, c, d, b) }, a.fn.init.prototype = a.fn; var b = a(e); return a } }(); var bH, bI, bJ, bK = /alpha\([^)]*\)/i, bL = /opacity=([^)]*)/, bM = /^(top|right|bottom|left)$/, bN = /^(none|table(?!-c[ea]).+)/, bO = /^margin/, bP = new RegExp("^(" + q + ")(.*)$", "i"), bQ = new RegExp("^(" + q + ")(?!px)[a-z%]+$", "i"), bR = new RegExp("^([-+])=(" + q + ")", "i"), bS = {}, bT = { position: "absolute", visibility: "hidden", display: "block" }, bU = { letterSpacing: 0, fontWeight: 400 }, bV = ["Top", "Right", "Bottom", "Left"], bW = ["Webkit", "O", "Moz", "ms"], bX = p.fn.toggle; p.fn.extend({ css: function (a, c) { return p.access(this, function (a, c, d) { return d !== b ? p.style(a, c, d) : p.css(a, c) }, a, c, arguments.length > 1) }, show: function () { return b$(this, !0) }, hide: function () { return b$(this) }, toggle: function (a, b) { var c = typeof a == "boolean"; return p.isFunction(a) && p.isFunction(b) ? bX.apply(this, arguments) : this.each(function () { (c ? a : bZ(this)) ? p(this).show() : p(this).hide() }) } }), p.extend({ cssHooks: { opacity: { get: function (a, b) { if (b) { var c = bH(a, "opacity"); return c === "" ? "1" : c } } } }, cssNumber: { fillOpacity: !0, fontWeight: !0, lineHeight: !0, opacity: !0, orphans: !0, widows: !0, zIndex: !0, zoom: !0 }, cssProps: { "float": p.support.cssFloat ? "cssFloat" : "styleFloat" }, style: function (a, c, d, e) { if (!a || a.nodeType === 3 || a.nodeType === 8 || !a.style) return; var f, g, h, i = p.camelCase(c), j = a.style; c = p.cssProps[i] || (p.cssProps[i] = bY(j, i)), h = p.cssHooks[c] || p.cssHooks[i]; if (d === b) return h && "get" in h && (f = h.get(a, !1, e)) !== b ? f : j[c]; g = typeof d, g === "string" && (f = bR.exec(d)) && (d = (f[1] + 1) * f[2] + parseFloat(p.css(a, c)), g = "number"); if (d == null || g === "number" && isNaN(d)) return; g === "number" && !p.cssNumber[i] && (d += "px"); if (!h || !("set" in h) || (d = h.set(a, d, e)) !== b) try { j[c] = d } catch (k) { } }, css: function (a, c, d, e) { var f, g, h, i = p.camelCase(c); return c = p.cssProps[i] || (p.cssProps[i] = bY(a.style, i)), h = p.cssHooks[c] || p.cssHooks[i], h && "get" in h && (f = h.get(a, !0, e)), f === b && (f = bH(a, c)), f === "normal" && c in bU && (f = bU[c]), d || e !== b ? (g = parseFloat(f), d || p.isNumeric(g) ? g || 0 : f) : f }, swap: function (a, b, c) { var d, e, f = {}; for (e in b) f[e] = a.style[e], a.style[e] = b[e]; d = c.call(a); for (e in b) a.style[e] = f[e]; return d } }), a.getComputedStyle ? bH = function (b, c) { var d, e, f, g, h = a.getComputedStyle(b, null), i = b.style; return h && (d = h[c], d === "" && !p.contains(b.ownerDocument, b) && (d = p.style(b, c)), bQ.test(d) && bO.test(c) && (e = i.width, f = i.minWidth, g = i.maxWidth, i.minWidth = i.maxWidth = i.width = d, d = h.width, i.width = e, i.minWidth = f, i.maxWidth = g)), d } : e.documentElement.currentStyle && (bH = function (a, b) { var c, d, e = a.currentStyle && a.currentStyle[b], f = a.style; return e == null && f && f[b] && (e = f[b]), bQ.test(e) && !bM.test(b) && (c = f.left, d = a.runtimeStyle && a.runtimeStyle.left, d && (a.runtimeStyle.left = a.currentStyle.left), f.left = b === "fontSize" ? "1em" : e, e = f.pixelLeft + "px", f.left = c, d && (a.runtimeStyle.left = d)), e === "" ? "auto" : e }), p.each(["height", "width"], function (a, b) { p.cssHooks[b] = { get: function (a, c, d) { if (c) return a.offsetWidth === 0 && bN.test(bH(a, "display")) ? p.swap(a, bT, function () { return cb(a, b, d) }) : cb(a, b, d) }, set: function (a, c, d) { return b_(a, c, d ? ca(a, b, d, p.support.boxSizing && p.css(a, "boxSizing") === "border-box") : 0) } } }), p.support.opacity || (p.cssHooks.opacity = { get: function (a, b) { return bL.test((b && a.currentStyle ? a.currentStyle.filter : a.style.filter) || "") ? .01 * parseFloat(RegExp.$1) + "" : b ? "1" : "" }, set: function (a, b) { var c = a.style, d = a.currentStyle, e = p.isNumeric(b) ? "alpha(opacity=" + b * 100 + ")" : "", f = d && d.filter || c.filter || ""; c.zoom = 1; if (b >= 1 && p.trim(f.replace(bK, "")) === "" && c.removeAttribute) { c.removeAttribute("filter"); if (d && !d.filter) return } c.filter = bK.test(f) ? f.replace(bK, e) : f + " " + e } }), p(function () { p.support.reliableMarginRight || (p.cssHooks.marginRight = { get: function (a, b) { return p.swap(a, { display: "inline-block" }, function () { if (b) return bH(a, "marginRight") }) } }), !p.support.pixelPosition && p.fn.position && p.each(["top", "left"], function (a, b) { p.cssHooks[b] = { get: function (a, c) { if (c) { var d = bH(a, b); return bQ.test(d) ? p(a).position()[b] + "px" : d } } } }) }), p.expr && p.expr.filters && (p.expr.filters.hidden = function (a) { return a.offsetWidth === 0 && a.offsetHeight === 0 || !p.support.reliableHiddenOffsets && (a.style && a.style.display || bH(a, "display")) === "none" }, p.expr.filters.visible = function (a) { return !p.expr.filters.hidden(a) }), p.each({ margin: "", padding: "", border: "Width" }, function (a, b) { p.cssHooks[a + b] = { expand: function (c) { var d, e = typeof c == "string" ? c.split(" ") : [c], f = {}; for (d = 0; d < 4; d++) f[a + bV[d] + b] = e[d] || e[d - 2] || e[0]; return f } }, bO.test(a) || (p.cssHooks[a + b].set = b_) }); var cd = /%20/g, ce = /\[\]$/, cf = /\r?\n/g, cg = /^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i, ch = /^(?:select|textarea)/i; p.fn.extend({ serialize: function () { return p.param(this.serializeArray()) }, serializeArray: function () { return this.map(function () { return this.elements ? p.makeArray(this.elements) : this }).filter(function () { return this.name && !this.disabled && (this.checked || ch.test(this.nodeName) || cg.test(this.type)) }).map(function (a, b) { var c = p(this).val(); return c == null ? null : p.isArray(c) ? p.map(c, function (a, c) { return { name: b.name, value: a.replace(cf, "\r\n") } }) : { name: b.name, value: c.replace(cf, "\r\n") } }).get() } }), p.param = function (a, c) { var d, e = [], f = function (a, b) { b = p.isFunction(b) ? b() : b == null ? "" : b, e[e.length] = encodeURIComponent(a) + "=" + encodeURIComponent(b) }; c === b && (c = p.ajaxSettings && p.ajaxSettings.traditional); if (p.isArray(a) || a.jquery && !p.isPlainObject(a)) p.each(a, function () { f(this.name, this.value) }); else for (d in a) ci(d, a[d], c, f); return e.join("&").replace(cd, "+") }; var cj, ck, cl = /#.*$/, cm = /^(.*?):[ \t]*([^\r\n]*)\r?$/mg, cn = /^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/, co = /^(?:GET|HEAD)$/, cp = /^\/\//, cq = /\?/, cr = /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi, cs = /([?&])_=[^&]*/, ct = /^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/, cu = p.fn.load, cv = {}, cw = {}, cx = ["*/"] + ["*"]; try { ck = f.href } catch (cy) { ck = e.createElement("a"), ck.href = "", ck = ck.href } cj = ct.exec(ck.toLowerCase()) || [], p.fn.load = function (a, c, d) { if (typeof a != "string" && cu) return cu.apply(this, arguments); if (!this.length) return this; var e, f, g, h = this, i = a.indexOf(" "); return i >= 0 && (e = a.slice(i, a.length), a = a.slice(0, i)), p.isFunction(c) ? (d = c, c = b) : c && typeof c == "object" && (f = "POST"), p.ajax({ url: a, type: f, dataType: "html", data: c, complete: function (a, b) { d && h.each(d, g || [a.responseText, b, a]) } }).done(function (a) { g = arguments, h.html(e ? p("<div>").append(a.replace(cr, "")).find(e) : a) }), this }, p.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "), function (a, b) { p.fn[b] = function (a) { return this.on(b, a) } }), p.each(["get", "post"], function (a, c) { p[c] = function (a, d, e, f) { return p.isFunction(d) && (f = f || e, e = d, d = b), p.ajax({ type: c, url: a, data: d, success: e, dataType: f }) } }), p.extend({ getScript: function (a, c) { return p.get(a, b, c, "script") }, getJSON: function (a, b, c) { return p.get(a, b, c, "json") }, ajaxSetup: function (a, b) { return b ? cB(a, p.ajaxSettings) : (b = a, a = p.ajaxSettings), cB(a, b), a }, ajaxSettings: { url: ck, isLocal: cn.test(cj[1]), global: !0, type: "GET", contentType: "application/x-www-form-urlencoded; charset=UTF-8", processData: !0, async: !0, accepts: { xml: "application/xml, text/xml", html: "text/html", text: "text/plain", json: "application/json, text/javascript", "*": cx }, contents: { xml: /xml/, html: /html/, json: /json/ }, responseFields: { xml: "responseXML", text: "responseText" }, converters: { "* text": a.String, "text html": !0, "text json": p.parseJSON, "text xml": p.parseXML }, flatOptions: { context: !0, url: !0 } }, ajaxPrefilter: cz(cv), ajaxTransport: cz(cw), ajax: function (a, c) { function y(a, c, f, i) { var k, s, t, u, w, y = c; if (v === 2) return; v = 2, h && clearTimeout(h), g = b, e = i || "", x.readyState = a > 0 ? 4 : 0, f && (u = cC(l, x, f)); if (a >= 200 && a < 300 || a === 304) l.ifModified && (w = x.getResponseHeader("Last-Modified"), w && (p.lastModified[d] = w), w = x.getResponseHeader("Etag"), w && (p.etag[d] = w)), a === 304 ? (y = "notmodified", k = !0) : (k = cD(l, u), y = k.state, s = k.data, t = k.error, k = !t); else { t = y; if (!y || a) y = "error", a < 0 && (a = 0) } x.status = a, x.statusText = (c || y) + "", k ? o.resolveWith(m, [s, y, x]) : o.rejectWith(m, [x, y, t]), x.statusCode(r), r = b, j && n.trigger("ajax" + (k ? "Success" : "Error"), [x, l, k ? s : t]), q.fireWith(m, [x, y]), j && (n.trigger("ajaxComplete", [x, l]), --p.active || p.event.trigger("ajaxStop")) } typeof a == "object" && (c = a, a = b), c = c || {}; var d, e, f, g, h, i, j, k, l = p.ajaxSetup({}, c), m = l.context || l, n = m !== l && (m.nodeType || m instanceof p) ? p(m) : p.event, o = p.Deferred(), q = p.Callbacks("once memory"), r = l.statusCode || {}, t = {}, u = {}, v = 0, w = "canceled", x = { readyState: 0, setRequestHeader: function (a, b) { if (!v) { var c = a.toLowerCase(); a = u[c] = u[c] || a, t[a] = b } return this }, getAllResponseHeaders: function () { return v === 2 ? e : null }, getResponseHeader: function (a) { var c; if (v === 2) { if (!f) { f = {}; while (c = cm.exec(e)) f[c[1].toLowerCase()] = c[2] } c = f[a.toLowerCase()] } return c === b ? null : c }, overrideMimeType: function (a) { return v || (l.mimeType = a), this }, abort: function (a) { return a = a || w, g && g.abort(a), y(0, a), this } }; o.promise(x), x.success = x.done, x.error = x.fail, x.complete = q.add, x.statusCode = function (a) { if (a) { var b; if (v < 2) for (b in a) r[b] = [r[b], a[b]]; else b = a[x.status], x.always(b) } return this }, l.url = ((a || l.url) + "").replace(cl, "").replace(cp, cj[1] + "//"), l.dataTypes = p.trim(l.dataType || "*").toLowerCase().split(s), l.crossDomain == null && (i = ct.exec(l.url.toLowerCase()) || !1, l.crossDomain = i && i.join(":") + (i[3] ? "" : i[1] === "http:" ? 80 : 443) !== cj.join(":") + (cj[3] ? "" : cj[1] === "http:" ? 80 : 443)), l.data && l.processData && typeof l.data != "string" && (l.data = p.param(l.data, l.traditional)), cA(cv, l, c, x); if (v === 2) return x; j = l.global, l.type = l.type.toUpperCase(), l.hasContent = !co.test(l.type), j && p.active++ === 0 && p.event.trigger("ajaxStart"); if (!l.hasContent) { l.data && (l.url += (cq.test(l.url) ? "&" : "?") + l.data, delete l.data), d = l.url; if (l.cache === !1) { var z = p.now(), A = l.url.replace(cs, "$1_=" + z); l.url = A + (A === l.url ? (cq.test(l.url) ? "&" : "?") + "_=" + z : "") } } (l.data && l.hasContent && l.contentType !== !1 || c.contentType) && x.setRequestHeader("Content-Type", l.contentType), l.ifModified && (d = d || l.url, p.lastModified[d] && x.setRequestHeader("If-Modified-Since", p.lastModified[d]), p.etag[d] && x.setRequestHeader("If-None-Match", p.etag[d])), x.setRequestHeader("Accept", l.dataTypes[0] && l.accepts[l.dataTypes[0]] ? l.accepts[l.dataTypes[0]] + (l.dataTypes[0] !== "*" ? ", " + cx + "; q=0.01" : "") : l.accepts["*"]); for (k in l.headers) x.setRequestHeader(k, l.headers[k]); if (!l.beforeSend || l.beforeSend.call(m, x, l) !== !1 && v !== 2) { w = "abort"; for (k in { success: 1, error: 1, complete: 1 }) x[k](l[k]); g = cA(cw, l, c, x); if (!g) y(-1, "No Transport"); else { x.readyState = 1, j && n.trigger("ajaxSend", [x, l]), l.async && l.timeout > 0 && (h = setTimeout(function () { x.abort("timeout") }, l.timeout)); try { v = 1, g.send(t, y) } catch (B) { if (v < 2) y(-1, B); else throw B } } return x } return x.abort() }, active: 0, lastModified: {}, etag: {} }); var cE = [], cF = /\?/, cG = /(=)\?(?=&|$)|\?\?/, cH = p.now(); p.ajaxSetup({ jsonp: "callback", jsonpCallback: function () { var a = cE.pop() || p.expando + "_" + cH++; return this[a] = !0, a } }), p.ajaxPrefilter("json jsonp", function (c, d, e) { var f, g, h, i = c.data, j = c.url, k = c.jsonp !== !1, l = k && cG.test(j), m = k && !l && typeof i == "string" && !(c.contentType || "").indexOf("application/x-www-form-urlencoded") && cG.test(i); if (c.dataTypes[0] === "jsonp" || l || m) return f = c.jsonpCallback = p.isFunction(c.jsonpCallback) ? c.jsonpCallback() : c.jsonpCallback, g = a[f], l ? c.url = j.replace(cG, "$1" + f) : m ? c.data = i.replace(cG, "$1" + f) : k && (c.url += (cF.test(j) ? "&" : "?") + c.jsonp + "=" + f), c.converters["script json"] = function () { return h || p.error(f + " was not called"), h[0] }, c.dataTypes[0] = "json", a[f] = function () { h = arguments }, e.always(function () { a[f] = g, c[f] && (c.jsonpCallback = d.jsonpCallback, cE.push(f)), h && p.isFunction(g) && g(h[0]), h = g = b }), "script" }), p.ajaxSetup({ accepts: { script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript" }, contents: { script: /javascript|ecmascript/ }, converters: { "text script": function (a) { return p.globalEval(a), a } } }), p.ajaxPrefilter("script", function (a) { a.cache === b && (a.cache = !1), a.crossDomain && (a.type = "GET", a.global = !1) }), p.ajaxTransport("script", function (a) { if (a.crossDomain) { var c, d = e.head || e.getElementsByTagName("head")[0] || e.documentElement; return { send: function (f, g) { c = e.createElement("script"), c.async = "async", a.scriptCharset && (c.charset = a.scriptCharset), c.src = a.url, c.onload = c.onreadystatechange = function (a, e) { if (e || !c.readyState || /loaded|complete/.test(c.readyState)) c.onload = c.onreadystatechange = null, d && c.parentNode && d.removeChild(c), c = b, e || g(200, "success") }, d.insertBefore(c, d.firstChild) }, abort: function () { c && c.onload(0, 1) } } } }); var cI, cJ = a.ActiveXObject ? function () { for (var a in cI) cI[a](0, 1) } : !1, cK = 0; p.ajaxSettings.xhr = a.ActiveXObject ? function () { return !this.isLocal && cL() || cM() } : cL, function (a) { p.extend(p.support, { ajax: !!a, cors: !!a && "withCredentials" in a }) }(p.ajaxSettings.xhr()), p.support.ajax && p.ajaxTransport(function (c) { if (!c.crossDomain || p.support.cors) { var d; return { send: function (e, f) { var g, h, i = c.xhr(); c.username ? i.open(c.type, c.url, c.async, c.username, c.password) : i.open(c.type, c.url, c.async); if (c.xhrFields) for (h in c.xhrFields) i[h] = c.xhrFields[h]; c.mimeType && i.overrideMimeType && i.overrideMimeType(c.mimeType), !c.crossDomain && !e["X-Requested-With"] && (e["X-Requested-With"] = "XMLHttpRequest"); try { for (h in e) i.setRequestHeader(h, e[h]) } catch (j) { } i.send(c.hasContent && c.data || null), d = function (a, e) { var h, j, k, l, m; try { if (d && (e || i.readyState === 4)) { d = b, g && (i.onreadystatechange = p.noop, cJ && delete cI[g]); if (e) i.readyState !== 4 && i.abort(); else { h = i.status, k = i.getAllResponseHeaders(), l = {}, m = i.responseXML, m && m.documentElement && (l.xml = m); try { l.text = i.responseText } catch (a) { } try { j = i.statusText } catch (n) { j = "" } !h && c.isLocal && !c.crossDomain ? h = l.text ? 200 : 404 : h === 1223 && (h = 204) } } } catch (o) { e || f(-1, o) } l && f(h, j, l, k) }, c.async ? i.readyState === 4 ? setTimeout(d, 0) : (g = ++cK, cJ && (cI || (cI = {}, p(a).unload(cJ)), cI[g] = d), i.onreadystatechange = d) : d() }, abort: function () { d && d(0, 1) } } } }); var cN, cO, cP = /^(?:toggle|show|hide)$/, cQ = new RegExp("^(?:([-+])=|)(" + q + ")([a-z%]*)$", "i"), cR = /queueHooks$/, cS = [cY], cT = { "*": [function (a, b) { var c, d, e = this.createTween(a, b), f = cQ.exec(b), g = e.cur(), h = +g || 0, i = 1, j = 20; if (f) { c = +f[2], d = f[3] || (p.cssNumber[a] ? "" : "px"); if (d !== "px" && h) { h = p.css(e.elem, a, !0) || c || 1; do i = i || ".5", h = h / i, p.style(e.elem, a, h + d); while (i !== (i = e.cur() / g) && i !== 1 && --j) } e.unit = d, e.start = h, e.end = f[1] ? h + (f[1] + 1) * c : c } return e }] }; p.Animation = p.extend(cW, { tweener: function (a, b) { p.isFunction(a) ? (b = a, a = ["*"]) : a = a.split(" "); var c, d = 0, e = a.length; for (; d < e; d++) c = a[d], cT[c] = cT[c] || [], cT[c].unshift(b) }, prefilter: function (a, b) { b ? cS.unshift(a) : cS.push(a) } }), p.Tween = cZ, cZ.prototype = { constructor: cZ, init: function (a, b, c, d, e, f) { this.elem = a, this.prop = c, this.easing = e || "swing", this.options = b, this.start = this.now = this.cur(), this.end = d, this.unit = f || (p.cssNumber[c] ? "" : "px") }, cur: function () { var a = cZ.propHooks[this.prop]; return a && a.get ? a.get(this) : cZ.propHooks._default.get(this) }, run: function (a) { var b, c = cZ.propHooks[this.prop]; return this.options.duration ? this.pos = b = p.easing[this.easing](a, this.options.duration * a, 0, 1, this.options.duration) : this.pos = b = a, this.now = (this.end - this.start) * b + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), c && c.set ? c.set(this) : cZ.propHooks._default.set(this), this } }, cZ.prototype.init.prototype = cZ.prototype, cZ.propHooks = { _default: { get: function (a) { var b; return a.elem[a.prop] == null || !!a.elem.style && a.elem.style[a.prop] != null ? (b = p.css(a.elem, a.prop, !1, ""), !b || b === "auto" ? 0 : b) : a.elem[a.prop] }, set: function (a) { p.fx.step[a.prop] ? p.fx.step[a.prop](a) : a.elem.style && (a.elem.style[p.cssProps[a.prop]] != null || p.cssHooks[a.prop]) ? p.style(a.elem, a.prop, a.now + a.unit) : a.elem[a.prop] = a.now } } }, cZ.propHooks.scrollTop = cZ.propHooks.scrollLeft = { set: function (a) { a.elem.nodeType && a.elem.parentNode && (a.elem[a.prop] = a.now) } }, p.each(["toggle", "show", "hide"], function (a, b) { var c = p.fn[b]; p.fn[b] = function (d, e, f) { return d == null || typeof d == "boolean" || !a && p.isFunction(d) && p.isFunction(e) ? c.apply(this, arguments) : this.animate(c$(b, !0), d, e, f) } }), p.fn.extend({ fadeTo: function (a, b, c, d) { return this.filter(bZ).css("opacity", 0).show().end().animate({ opacity: b }, a, c, d) }, animate: function (a, b, c, d) { var e = p.isEmptyObject(a), f = p.speed(b, c, d), g = function () { var b = cW(this, p.extend({}, a), f); e && b.stop(!0) }; return e || f.queue === !1 ? this.each(g) : this.queue(f.queue, g) }, stop: function (a, c, d) { var e = function (a) { var b = a.stop; delete a.stop, b(d) }; return typeof a != "string" && (d = c, c = a, a = b), c && a !== !1 && this.queue(a || "fx", []), this.each(function () { var b = !0, c = a != null && a + "queueHooks", f = p.timers, g = p._data(this); if (c) g[c] && g[c].stop && e(g[c]); else for (c in g) g[c] && g[c].stop && cR.test(c) && e(g[c]); for (c = f.length; c--;) f[c].elem === this && (a == null || f[c].queue === a) && (f[c].anim.stop(d), b = !1, f.splice(c, 1)); (b || !d) && p.dequeue(this, a) }) } }), p.each({ slideDown: c$("show"), slideUp: c$("hide"), slideToggle: c$("toggle"), fadeIn: { opacity: "show" }, fadeOut: { opacity: "hide" }, fadeToggle: { opacity: "toggle" } }, function (a, b) { p.fn[a] = function (a, c, d) { return this.animate(b, a, c, d) } }), p.speed = function (a, b, c) { var d = a && typeof a == "object" ? p.extend({}, a) : { complete: c || !c && b || p.isFunction(a) && a, duration: a, easing: c && b || b && !p.isFunction(b) && b }; d.duration = p.fx.off ? 0 : typeof d.duration == "number" ? d.duration : d.duration in p.fx.speeds ? p.fx.speeds[d.duration] : p.fx.speeds._default; if (d.queue == null || d.queue === !0) d.queue = "fx"; return d.old = d.complete, d.complete = function () { p.isFunction(d.old) && d.old.call(this), d.queue && p.dequeue(this, d.queue) }, d }, p.easing = { linear: function (a) { return a }, swing: function (a) { return .5 - Math.cos(a * Math.PI) / 2 } }, p.timers = [], p.fx = cZ.prototype.init, p.fx.tick = function () { var a, b = p.timers, c = 0; for (; c < b.length; c++) a = b[c], !a() && b[c] === a && b.splice(c--, 1); b.length || p.fx.stop() }, p.fx.timer = function (a) { a() && p.timers.push(a) && !cO && (cO = setInterval(p.fx.tick, p.fx.interval)) }, p.fx.interval = 13, p.fx.stop = function () { clearInterval(cO), cO = null }, p.fx.speeds = { slow: 600, fast: 200, _default: 400 }, p.fx.step = {}, p.expr && p.expr.filters && (p.expr.filters.animated = function (a) { return p.grep(p.timers, function (b) { return a === b.elem }).length }); var c_ = /^(?:body|html)$/i; p.fn.offset = function (a) { if (arguments.length) return a === b ? this : this.each(function (b) { p.offset.setOffset(this, a, b) }); var c, d, e, f, g, h, i, j = { top: 0, left: 0 }, k = this[0], l = k && k.ownerDocument; if (!l) return; return (d = l.body) === k ? p.offset.bodyOffset(k) : (c = l.documentElement, p.contains(c, k) ? (typeof k.getBoundingClientRect != "undefined" && (j = k.getBoundingClientRect()), e = da(l), f = c.clientTop || d.clientTop || 0, g = c.clientLeft || d.clientLeft || 0, h = e.pageYOffset || c.scrollTop, i = e.pageXOffset || c.scrollLeft, { top: j.top + h - f, left: j.left + i - g }) : j) }, p.offset = { bodyOffset: function (a) { var b = a.offsetTop, c = a.offsetLeft; return p.support.doesNotIncludeMarginInBodyOffset && (b += parseFloat(p.css(a, "marginTop")) || 0, c += parseFloat(p.css(a, "marginLeft")) || 0), { top: b, left: c } }, setOffset: function (a, b, c) { var d = p.css(a, "position"); d === "static" && (a.style.position = "relative"); var e = p(a), f = e.offset(), g = p.css(a, "top"), h = p.css(a, "left"), i = (d === "absolute" || d === "fixed") && p.inArray("auto", [g, h]) > -1, j = {}, k = {}, l, m; i ? (k = e.position(), l = k.top, m = k.left) : (l = parseFloat(g) || 0, m = parseFloat(h) || 0), p.isFunction(b) && (b = b.call(a, c, f)), b.top != null && (j.top = b.top - f.top + l), b.left != null && (j.left = b.left - f.left + m), "using" in b ? b.using.call(a, j) : e.css(j) } }, p.fn.extend({ position: function () { if (!this[0]) return; var a = this[0], b = this.offsetParent(), c = this.offset(), d = c_.test(b[0].nodeName) ? { top: 0, left: 0 } : b.offset(); return c.top -= parseFloat(p.css(a, "marginTop")) || 0, c.left -= parseFloat(p.css(a, "marginLeft")) || 0, d.top += parseFloat(p.css(b[0], "borderTopWidth")) || 0, d.left += parseFloat(p.css(b[0], "borderLeftWidth")) || 0, { top: c.top - d.top, left: c.left - d.left } }, offsetParent: function () { return this.map(function () { var a = this.offsetParent || e.body; while (a && !c_.test(a.nodeName) && p.css(a, "position") === "static") a = a.offsetParent; return a || e.body }) } }), p.each({ scrollLeft: "pageXOffset", scrollTop: "pageYOffset" }, function (a, c) { var d = /Y/.test(c); p.fn[a] = function (e) { return p.access(this, function (a, e, f) { var g = da(a); if (f === b) return g ? c in g ? g[c] : g.document.documentElement[e] : a[e]; g ? g.scrollTo(d ? p(g).scrollLeft() : f, d ? f : p(g).scrollTop()) : a[e] = f }, a, e, arguments.length, null) } }), p.each({ Height: "height", Width: "width" }, function (a, c) { p.each({ padding: "inner" + a, content: c, "": "outer" + a }, function (d, e) { p.fn[e] = function (e, f) { var g = arguments.length && (d || typeof e != "boolean"), h = d || (e === !0 || f === !0 ? "margin" : "border"); return p.access(this, function (c, d, e) { var f; return p.isWindow(c) ? c.document.documentElement["client" + a] : c.nodeType === 9 ? (f = c.documentElement, Math.max(c.body["scroll" + a], f["scroll" + a], c.body["offset" + a], f["offset" + a], f["client" + a])) : e === b ? p.css(c, d, e, h) : p.style(c, d, e, h) }, c, g ? e : b, g, null) } }) }), a.jQuery = a.$ = p, typeof define == "function" && define.amd && define.amd.jQuery && define("jquery", [], function () { return p }) })(window);
/*! jQuery UI - v1.9.1 - 2012-10-31
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.menu.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js, jquery.ui.effect.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js
* Copyright (c) 2012 jQuery Foundation and other contributors Licensed MIT */

(function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();return"area"===u?(r=t.parentNode,i=r.name,!t.href||!i||r.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap=#"+i+"]")[0],!!o&&s(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().andSelf().filter(function(){return e.css(this,"visibility")==="hidden"}).length}var n=0,r=/^ui-id-\d+$/;e.ui=e.ui||{};if(e.ui.version)return;e.extend(e.ui,{version:"1.9.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=n.offsetHeight===100,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),function(){var t=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];e.ui.ie=t.length?!0:!1,e.ui.ie6=parseFloat(t[1],10)===6}(),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(!i||!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)return;for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},contains:e.contains,hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,r,i,s,o){return e.ui.isOverAxis(t,r,s)&&e.ui.isOverAxis(n,i,o)}})})(jQuery);(function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a=t.split(".")[0];t=t.split(".")[1],i=a+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[a]=e[a]||{},s=e[a][t],o=e[a][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,i){e.isFunction(i)&&(r[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=r,s=i.apply(this,arguments),this._super=t,this._superApply=n,s}}())}),o.prototype=e.widget.extend(u,{widgetEventPrefix:u.widgetEventPrefix||t},r,{constructor:o,namespace:a,widgetName:t,widgetBaseClass:i,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(e.isPlainObject(a)?n[u]=e.isPlainObject(n[u])?e.widget.extend({},n[u],a):e.widget.extend({},a):n[u]=a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method '"+o+"' for "+n+" widget instance");r=i[o].apply(i,a);if(r!==i&&r!==t)return f=r&&r.jquery?f.pushStack(r.get()):r,!1}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():new i(o,this)}),f}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetName,this),e.data(r,this.widgetFullName,this),this._on(this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n){var r,i=this;n?(t=r=e(t),this.bindings=this.bindings.add(t)):(n=t,t=this.element,r=this.widget()),e.each(n,function(n,s){function o(){if(i.options.disabled===!0||e(this).hasClass("ui-state-disabled"))return;return(typeof s=="string"?i[s]:s).apply(i,arguments)}typeof s!="string"&&(o.guid=s.guid=s.guid||o.guid||e.guid++);var u=n.match(/^(\w+)\s*(.*)$/),a=u[1]+i.eventNamespace,f=u[2];f?r.delegate(f,a,o):t.bind(a,o)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&(e.effects.effect[u]||e.uiBackCompat!==!1&&e.effects[u])?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}}),e.uiBackCompat!==!1&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]})})(jQuery);(function(e,t){var n=!1;e(document).mouseup(function(e){n=!1}),e.widget("ui.mouse",{version:"1.9.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which===1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return!e.ui.ie||document.documentMode>=9||!!t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})})(jQuery);(function(e,t){function h(e,t,n){return[parseInt(e[0],10)*(l.test(e[0])?t/100:1),parseInt(e[1],10)*(l.test(e[1])?n/100:1)]}function p(t,n){return parseInt(e.css(t,n),10)||0}e.ui=e.ui||{};var n,r=Math.max,i=Math.abs,s=Math.round,o=/left|center|right/,u=/top|center|bottom/,a=/[\+\-]\d+%?/,f=/^\w+/,l=/%$/,c=e.fn.position;e.position={scrollbarWidth:function(){if(n!==t)return n;var r,i,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return e("body").append(s),r=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,r===i&&(i=s[0].clientWidth),s.remove(),n=r-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),i=n==="scroll"||n==="auto"&&t.width<t.element[0].scrollWidth,s=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:i?e.position.scrollbarWidth():0,height:s?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]);return{element:n,isWindow:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r?n.width():n.outerWidth(),height:r?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var n,l,d,v,m,g=e(t.of),y=e.position.getWithinInfo(t.within),b=e.position.getScrollInfo(y),w=g[0],E=(t.collision||"flip").split(" "),S={};return w.nodeType===9?(l=g.width(),d=g.height(),v={top:0,left:0}):e.isWindow(w)?(l=g.width(),d=g.height(),v={top:g.scrollTop(),left:g.scrollLeft()}):w.preventDefault?(t.at="left top",l=d=0,v={top:w.pageY,left:w.pageX}):(l=g.outerWidth(),d=g.outerHeight(),v=g.offset()),m=e.extend({},v),e.each(["my","at"],function(){var e=(t[this]||"").split(" "),n,r;e.length===1&&(e=o.test(e[0])?e.concat(["center"]):u.test(e[0])?["center"].concat(e):["center","center"]),e[0]=o.test(e[0])?e[0]:"center",e[1]=u.test(e[1])?e[1]:"center",n=a.exec(e[0]),r=a.exec(e[1]),S[this]=[n?n[0]:0,r?r[0]:0],t[this]=[f.exec(e[0])[0],f.exec(e[1])[0]]}),E.length===1&&(E[1]=E[0]),t.at[0]==="right"?m.left+=l:t.at[0]==="center"&&(m.left+=l/2),t.at[1]==="bottom"?m.top+=d:t.at[1]==="center"&&(m.top+=d/2),n=h(S.at,l,d),m.left+=n[0],m.top+=n[1],this.each(function(){var o,u,a=e(this),f=a.outerWidth(),c=a.outerHeight(),w=p(this,"marginLeft"),x=p(this,"marginTop"),T=f+w+p(this,"marginRight")+b.width,N=c+x+p(this,"marginBottom")+b.height,C=e.extend({},m),k=h(S.my,a.outerWidth(),a.outerHeight());t.my[0]==="right"?C.left-=f:t.my[0]==="center"&&(C.left-=f/2),t.my[1]==="bottom"?C.top-=c:t.my[1]==="center"&&(C.top-=c/2),C.left+=k[0],C.top+=k[1],e.support.offsetFractions||(C.left=s(C.left),C.top=s(C.top)),o={marginLeft:w,marginTop:x},e.each(["left","top"],function(r,i){e.ui.position[E[r]]&&e.ui.position[E[r]][i](C,{targetWidth:l,targetHeight:d,elemWidth:f,elemHeight:c,collisionPosition:o,collisionWidth:T,collisionHeight:N,offset:[n[0]+k[0],n[1]+k[1]],my:t.my,at:t.at,within:y,elem:a})}),e.fn.bgiframe&&a.bgiframe(),t.using&&(u=function(e){var n=v.left-C.left,s=n+l-f,o=v.top-C.top,u=o+d-c,h={target:{element:g,left:v.left,top:v.top,width:l,height:d},element:{element:a,left:C.left,top:C.top,width:f,height:c},horizontal:s<0?"left":n>0?"right":"center",vertical:u<0?"top":o>0?"bottom":"middle"};l<f&&i(n+s)<l&&(h.horizontal="center"),d<c&&i(o+u)<d&&(h.vertical="middle"),r(i(n),i(s))>r(i(o),i(u))?h.important="horizontal":h.important="vertical",t.using.call(this,e,h)}),a.offset(e.extend(C,{using:u}))})},e.ui.position={fit:{left:function(e,t){var n=t.within,i=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,o=e.left-t.collisionPosition.marginLeft,u=i-o,a=o+t.collisionWidth-s-i,f;t.collisionWidth>s?u>0&&a<=0?(f=e.left+u+t.collisionWidth-s-i,e.left+=u-f):a>0&&u<=0?e.left=i:u>a?e.left=i+s-t.collisionWidth:e.left=i:u>0?e.left+=u:a>0?e.left-=a:e.left=r(e.left-o,e.left)},top:function(e,t){var n=t.within,i=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,u=i-o,a=o+t.collisionHeight-s-i,f;t.collisionHeight>s?u>0&&a<=0?(f=e.top+u+t.collisionHeight-s-i,e.top+=u-f):a>0&&u<=0?e.top=i:u>a?e.top=i+s-t.collisionHeight:e.top=i:u>0?e.top+=u:a>0?e.top-=a:e.top=r(e.top-o,e.top)}},flip:{left:function(e,t){var n=t.within,r=n.offset.left+n.scrollLeft,s=n.width,o=n.isWindow?n.scrollLeft:n.offset.left,u=e.left-t.collisionPosition.marginLeft,a=u-o,f=u+t.collisionWidth-s-o,l=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,c=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,h=-2*t.offset[0],p,d;if(a<0){p=e.left+l+c+h+t.collisionWidth-s-r;if(p<0||p<i(a))e.left+=l+c+h}else if(f>0){d=e.left-t.collisionPosition.marginLeft+l+c+h-o;if(d>0||i(d)<f)e.left+=l+c+h}},top:function(e,t){var n=t.within,r=n.offset.top+n.scrollTop,s=n.height,o=n.isWindow?n.scrollTop:n.offset.top,u=e.top-t.collisionPosition.marginTop,a=u-o,f=u+t.collisionHeight-s-o,l=t.my[1]==="top",c=l?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,h=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,p=-2*t.offset[1],d,v;a<0?(v=e.top+c+h+p+t.collisionHeight-s-r,e.top+c+h+p>a&&(v<0||v<i(a))&&(e.top+=c+h+p)):f>0&&(d=e.top-t.collisionPosition.marginTop+c+h+p-o,e.top+c+h+p>f&&(d>0||i(d)<f)&&(e.top+=c+h+p))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,r,i,s,o=document.getElementsByTagName("body")[0],u=document.createElement("div");t=document.createElement(o?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in r)t.style[s]=r[s];t.appendChild(u),n=o||document.documentElement,n.insertBefore(t,n.firstChild),u.style.cssText="position: absolute; left: 10.7432222px;",i=e(u).offset().left,e.support.offsetFractions=i>10&&i<11,t.innerHTML="",n.removeChild(t)}(),e.uiBackCompat!==!1&&function(e){var n=e.fn.position;e.fn.position=function(r){if(!r||!r.offset)return n.call(this,r);var i=r.offset.split(" "),s=r.at.split(" ");return i.length===1&&(i[1]=i[0]),/^\d/.test(i[0])&&(i[0]="+"+i[0]),/^\d/.test(i[1])&&(i[1]="+"+i[1]),s.length===1&&(/left|center|right/.test(s[0])?s[1]="center":(s[1]=s[0],s[0]="center")),n.call(this,e.extend(r,{at:s[0]+i[0]+" "+s[1]+i[1],offset:t}))}}(jQuery)})(jQuery);(function(e,t){e.widget("ui.draggable",e.ui.mouse,{version:"1.9.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1);var r=this.element[0],i=!1;while(r&&(r=r.parentNode))r==document&&(i=!0);if(!i&&this.options.helper==="original")return!1;if(this.options.revert=="invalid"&&!n||this.options.revert=="valid"&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)){var s=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){s._trigger("stop",t)!==!1&&s._clear()})}else this._trigger("stop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var n=!this.options.handle||!e(this.options.handle,this.element).length?!0:!1;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(n=!0)}),n},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):n.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo(n.appendTo=="parent"?this.element[0].parentNode:n.appendTo),r[0]!=this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))&&r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[t.containment=="document"?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t.containment=="document"?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(t.containment=="document"?0:e(window).scrollLeft())+e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(t.containment=="document"?0:e(window).scrollTop())+(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)&&t.containment.constructor!=Array){var n=e(t.containment),r=n[0];if(!r)return;var i=n.offset(),s=e(r).css("overflow")!="hidden";this.containment=[(parseInt(e(r).css("borderLeftWidth"),10)||0)+(parseInt(e(r).css("paddingLeft"),10)||0),(parseInt(e(r).css("borderTopWidth"),10)||0)+(parseInt(e(r).css("paddingTop"),10)||0),(s?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(e(r).css("borderLeftWidth"),10)||0)-(parseInt(e(r).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(s?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(e(r).css("borderTopWidth"),10)||0)-(parseInt(e(r).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}else t.containment.constructor==Array&&(this.containment=t.containment)},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName),s=t.pageX,o=t.pageY;if(this.originalPosition){var u;if(this.containment){if(this.relative_container){var a=this.relative_container.offset();u=[this.containment[0]+a.left,this.containment[1]+a.top,this.containment[2]+a.left,this.containment[3]+a.top]}else u=this.containment;t.pageX-this.offset.click.left<u[0]&&(s=u[0]+this.offset.click.left),t.pageY-this.offset.click.top<u[1]&&(o=u[1]+this.offset.click.top),t.pageX-this.offset.click.left>u[2]&&(s=u[2]+this.offset.click.left),t.pageY-this.offset.click.top>u[3]&&(o=u[3]+this.offset.click.top)}if(n.grid){var f=n.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1]:this.originalPageY;o=u?f-this.offset.click.top<u[1]||f-this.offset.click.top>u[3]?f-this.offset.click.top<u[1]?f+n.grid[1]:f-n.grid[1]:f:f;var l=n.grid[0]?this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0]:this.originalPageX;s=u?l-this.offset.click.left<u[0]||l-this.offset.click.left>u[2]?l-this.offset.click.left<u[0]?l+n.grid[0]:l-n.grid[0]:l:l}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),t=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(e){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("draggable"),i=this,s=function(t){var n=this.offset.click.top,r=this.offset.click.left,i=this.positionAbs.top,s=this.positionAbs.left,o=t.height,u=t.width,a=t.top,f=t.left;return e.ui.isOver(i+n,s+r,a,f,o,u)};e.each(r.sortables,function(s){var o=!1,u=this;this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,e.each(r.sortables,function(){return this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this!=u&&this.instance._intersectsWith(this.instance.containerCache)&&e.ui.contains(u.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n){var r=e("body"),i=e(this).data("draggable").options;r.css("cursor")&&(i._cursor=r.css("cursor")),r.css("cursor",i.cursor)},stop:function(t,n){var r=e(this).data("draggable").options;r._cursor&&e("body").css("cursor",r._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(t,n){var r=e(this).data("draggable");r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"&&(r.overflowOffset=r.scrollParent.offset())},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=!1;if(r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"){if(!i.axis||i.axis!="x")r.overflowOffset.top+r.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop-i.scrollSpeed);if(!i.axis||i.axis!="y")r.overflowOffset.left+r.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft-i.scrollSpeed)}else{if(!i.axis||i.axis!="x")t.pageY-e(document).scrollTop()<i.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed));if(!i.axis||i.axis!="y")t.pageX-e(document).scrollLeft()<i.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed))}s!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(r,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n){var r=e(this).data("draggable"),i=r.options;r.snapElements=[],e(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var t=e(this),n=t.offset();this!=r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=i.snapTolerance,o=n.offset.left,u=o+r.helperProportions.width,a=n.offset.top,f=a+r.helperProportions.height;for(var l=r.snapElements.length-1;l>=0;l--){var c=r.snapElements[l].left,h=c+r.snapElements[l].width,p=r.snapElements[l].top,d=p+r.snapElements[l].height;if(!(c-s<o&&o<h+s&&p-s<a&&a<d+s||c-s<o&&o<h+s&&p-s<f&&f<d+s||c-s<u&&u<h+s&&p-s<a&&a<d+s||c-s<u&&u<h+s&&p-s<f&&f<d+s)){r.snapElements[l].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[l].item})),r.snapElements[l].snapping=!1;continue}if(i.snapMode!="inner"){var v=Math.abs(p-f)<=s,m=Math.abs(d-a)<=s,g=Math.abs(c-u)<=s,y=Math.abs(h-o)<=s;v&&(n.position.top=r._convertPositionTo("relative",{top:p-r.helperProportions.height,left:0}).top-r.margins.top),m&&(n.position.top=r._convertPositionTo("relative",{top:d,left:0}).top-r.margins.top),g&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c-r.helperProportions.width}).left-r.margins.left),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h}).left-r.margins.left)}var b=v||m||g||y;if(i.snapMode!="outer"){var v=Math.abs(p-a)<=s,m=Math.abs(d-f)<=s,g=Math.abs(c-o)<=s,y=Math.abs(h-u)<=s;v&&(n.position.top=r._convertPositionTo("relative",{top:p,left:0}).top-r.margins.top),m&&(n.position.top=r._convertPositionTo("relative",{top:d-r.helperProportions.height,left:0}).top-r.margins.top),g&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c}).left-r.margins.left),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h-r.helperProportions.width}).left-r.margins.left)}!r.snapElements[l].snapping&&(v||m||g||y||b)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[l].item})),r.snapElements[l].snapping=v||m||g||y||b}}}),e.ui.plugin.add("draggable","stack",{start:function(t,n){var r=e(this).data("draggable").options,i=e.makeArray(e(r.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!i.length)return;var s=parseInt(i[0].style.zIndex)||0;e(i).each(function(e){this.style.zIndex=s+e}),this[0].style.zIndex=s+i.length}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})})(jQuery);(function(e,t){e.widget("ui.droppable",{version:"1.9.1",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,n=t.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];for(var n=0;n<t.length;n++)t[n]==this&&t.splice(n,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){t=="accept"&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current;if(!r||(r.currentItem||r.element)[0]==this.element[0])return!1;var i=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope==r.options.scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&e.ui.intersect(r,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return i=!0,!1}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(t,n,r){if(!n.offset)return!1;var i=(t.positionAbs||t.position.absolute).left,s=i+t.helperProportions.width,o=(t.positionAbs||t.position.absolute).top,u=o+t.helperProportions.height,a=n.offset.left,f=a+n.proportions.width,l=n.offset.top,c=l+n.proportions.height;switch(r){case"fit":return a<=i&&s<=f&&l<=o&&u<=c;case"intersect":return a<i+t.helperProportions.width/2&&s-t.helperProportions.width/2<f&&l<o+t.helperProportions.height/2&&u-t.helperProportions.height/2<c;case"pointer":var h=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,p=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,d=e.ui.isOver(p,h,l,a,n.proportions.height,n.proportions.width);return d;case"touch":return(o>=l&&o<=c||u>=l&&u<=c||o<l&&u>c)&&(i>=a&&i<=f||s>=a&&s<=f||i<a&&s>f);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r=e.ui.ddmanager.droppables[t.options.scope]||[],i=n?n.type:null,s=(t.currentItem||t.element).find(":data(droppable)").andSelf();e:for(var o=0;o<r.length;o++){if(r[o].options.disabled||t&&!r[o].accept.call(r[o].element[0],t.currentItem||t.element))continue;for(var u=0;u<s.length;u++)if(s[u]==r[o].element[0]){r[o].proportions.height=0;continue e}r[o].visible=r[o].element.css("display")!="none";if(!r[o].visible)continue;i=="mousedown"&&r[o]._activate.call(r[o],n),r[o].offset=r[o].element.offset(),r[o].proportions={width:r[o].element[0].offsetWidth,height:r[o].element[0].offsetHeight}}},drop:function(t,n){var r=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options)return;!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,n))}),r},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var r=e.ui.intersect(t,this,this.options.tolerance),i=!r&&this.isover==1?"isout":r&&this.isover==0?"isover":null;if(!i)return;var s;if(this.options.greedy){var o=this.options.scope,u=this.element.parents(":data(droppable)").filter(function(){return e.data(this,"droppable").options.scope===o});u.length&&(s=e.data(u[0],"droppable"),s.greedyChild=i=="isover"?1:0)}s&&i=="isover"&&(s.isover=0,s.isout=1,s._out.call(s,n)),this[i]=1,this[i=="isout"?"isover":"isout"]=0,this[i=="isover"?"_over":"_out"].call(this,n),s&&i=="isout"&&(s.isout=0,s.isover=1,s._over.call(s,n))})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}})(jQuery);(function(e,t){e.widget("ui.resizable",e.ui.mouse,{version:"1.9.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var t=this,n=this.options;this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=n.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var r=this.handles.split(",");this.handles={};for(var i=0;i<r.length;i++){var s=e.trim(r[i]),o="ui-resizable-"+s,u=e('<div class="ui-resizable-handle '+o+'"></div>');u.css({zIndex:n.zIndex}),"se"==s&&u.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(u)}}this._renderAxis=function(t){t=t||this.element;for(var n in this.handles){this.handles[n].constructor==String&&(this.handles[n]=e(this.handles[n],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var r=e(this.handles[n],this.element),i=0;i=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth();var s=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join("");t.css(s,i),this._proportionallyResize()}if(!e(this.handles[n]).length)continue}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!t.resizing){if(this.className)var e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);t.axis=e&&e[1]?e[1]:"se"}}),n.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(n.disabled)return;e(this).removeClass("ui-resizable-autohide"),t._handles.show()}).mouseleave(function(){if(n.disabled)return;t.resizing||(e(this).addClass("ui-resizable-autohide"),t._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){t(this.element);var n=this.element;this.originalElement.css({position:n.css("position"),width:n.outerWidth(),height:n.outerHeight(),top:n.css("top"),left:n.css("left")}).insertAfter(n),n.remove()}return this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_mouseCapture:function(t){var n=!1;for(var r in this.handles)e(this.handles[r])[0]==t.target&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(t){var r=this.options,i=this.element.position(),s=this.element;this.resizing=!0,this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()},(s.is(".ui-draggable")||/absolute/.test(s.css("position")))&&s.css({position:"absolute",top:i.top,left:i.left}),this._renderProxy();var o=n(this.helper.css("left")),u=n(this.helper.css("top"));r.containment&&(o+=e(r.containment).scrollLeft()||0,u+=e(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:o,top:u},this.size=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalPosition={left:o,top:u},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=typeof r.aspectRatio=="number"?r.aspectRatio:this.originalSize.width/this.originalSize.height||1;var a=e(".ui-resizable-"+this.axis).css("cursor");return e("body").css("cursor",a=="auto"?this.axis+"-resize":a),s.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(e){var t=this.helper,n=this.options,r={},i=this,s=this.originalMousePosition,o=this.axis,u=e.pageX-s.left||0,a=e.pageY-s.top||0,f=this._change[o];if(!f)return!1;var l=f.apply(this,[e,u,a]);this._updateVirtualBoundaries(e.shiftKey);if(this._aspectRatio||e.shiftKey)l=this._updateRatio(l,e);return l=this._respectSize(l,e),this._propagate("resize",e),t.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(l),this._trigger("resize",e,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var n=this.options,r=this;if(this._helper){var i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&e.ui.hasScroll(i[0],"left")?0:r.sizeDiff.height,u=s?0:r.sizeDiff.width,a={width:r.helper.width()-u,height:r.helper.height()-o},f=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,l=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;n.animate||this.element.css(e.extend(a,{top:l,left:f})),r.helper.height(r.size.height),r.helper.width(r.size.width),this._helper&&!n.animate&&this._proportionallyResize()}return e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t=this.options,n,i,s,o,u;u={minWidth:r(t.minWidth)?t.minWidth:0,maxWidth:r(t.maxWidth)?t.maxWidth:Infinity,minHeight:r(t.minHeight)?t.minHeight:0,maxHeight:r(t.maxHeight)?t.maxHeight:Infinity};if(this._aspectRatio||e)n=u.minHeight*this.aspectRatio,s=u.minWidth/this.aspectRatio,i=u.maxHeight*this.aspectRatio,o=u.maxWidth/this.aspectRatio,n>u.minWidth&&(u.minWidth=n),s>u.minHeight&&(u.minHeight=s),i<u.maxWidth&&(u.maxWidth=i),o<u.maxHeight&&(u.maxHeight=o);this._vBoundaries=u},_updateCache:function(e){var t=this.options;this.offset=this.helper.offset(),r(e.left)&&(this.position.left=e.left),r(e.top)&&(this.position.top=e.top),r(e.height)&&(this.size.height=e.height),r(e.width)&&(this.size.width=e.width)},_updateRatio:function(e,t){var n=this.options,i=this.position,s=this.size,o=this.axis;return r(e.height)?e.width=e.height*this.aspectRatio:r(e.width)&&(e.height=e.width/this.aspectRatio),o=="sw"&&(e.left=i.left+(s.width-e.width),e.top=null),o=="nw"&&(e.top=i.top+(s.height-e.height),e.left=i.left+(s.width-e.width)),e},_respectSize:function(e,t){var n=this.helper,i=this._vBoundaries,s=this._aspectRatio||t.shiftKey,o=this.axis,u=r(e.width)&&i.maxWidth&&i.maxWidth<e.width,a=r(e.height)&&i.maxHeight&&i.maxHeight<e.height,f=r(e.width)&&i.minWidth&&i.minWidth>e.width,l=r(e.height)&&i.minHeight&&i.minHeight>e.height;f&&(e.width=i.minWidth),l&&(e.height=i.minHeight),u&&(e.width=i.maxWidth),a&&(e.height=i.maxHeight);var c=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,p=/sw|nw|w/.test(o),d=/nw|ne|n/.test(o);f&&p&&(e.left=c-i.minWidth),u&&p&&(e.left=c-i.maxWidth),l&&d&&(e.top=h-i.minHeight),a&&d&&(e.top=h-i.maxHeight);var v=!e.width&&!e.height;return v&&!e.left&&e.top?e.top=null:v&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){var t=this.options;if(!this._proportionallyResizeElements.length)return;var n=this.helper||this.element;for(var r=0;r<this._proportionallyResizeElements.length;r++){var i=this._proportionallyResizeElements[r];if(!this.borderDif){var s=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],o=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")];this.borderDif=e.map(s,function(e,t){var n=parseInt(e,10)||0,r=parseInt(o[t],10)||0;return n+r})}i.css({height:n.height()-this.borderDif[0]-this.borderDif[2]||0,width:n.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset();if(this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');var r=e.ui.ie6?1:0,i=e.ui.ie6?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+i,height:this.element.outerHeight()+i,position:"absolute",left:this.elementOffset.left-r+"px",top:this.elementOffset.top-r+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(e,t,n){return{width:this.originalSize.width+t}},w:function(e,t,n){var r=this.options,i=this.originalSize,s=this.originalPosition;return{left:s.left+t,width:i.width-t}},n:function(e,t,n){var r=this.options,i=this.originalSize,s=this.originalPosition;return{top:s.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),t!="resize"&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","alsoResize",{start:function(t,n){var r=e(this).data("resizable"),i=r.options,s=function(t){e(t).each(function(){var t=e(this);t.data("resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};typeof i.alsoResize=="object"&&!i.alsoResize.parentNode?i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):e.each(i.alsoResize,function(e){s(e)}):s(i.alsoResize)},resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0},a=function(t,r){e(t).each(function(){var t=e(this),i=e(this).data("resizable-alsoresize"),s={},o=r&&r.length?r:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(i[t]||0)+(u[t]||0);n&&n>=0&&(s[t]=n||null)}),t.css(s)})};typeof i.alsoResize=="object"&&!i.alsoResize.nodeType?e.each(i.alsoResize,function(e,t){a(e,t)}):a(i.alsoResize)},stop:function(t,n){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","animate",{stop:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),u=o&&e.ui.hasScroll(s[0],"left")?0:r.sizeDiff.height,a=o?0:r.sizeDiff.width,f={width:r.size.width-a,height:r.size.height-u},l=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,c=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;r.element.animate(e.extend(f,c&&l?{top:c,left:l}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var n={width:parseInt(r.element.css("width"),10),height:parseInt(r.element.css("height"),10),top:parseInt(r.element.css("top"),10),left:parseInt(r.element.css("left"),10)};s&&s.length&&e(s[0]).css({width:n.width,height:n.height}),r._updateCache(n),r._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(t,r){var i=e(this).data("resizable"),s=i.options,o=i.element,u=s.containment,a=u instanceof e?u.get(0):/parent/.test(u)?o.parent().get(0):u;if(!a)return;i.containerElement=e(a);if(/document/.test(u)||u==document)i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight};else{var f=e(a),l=[];e(["Top","Right","Left","Bottom"]).each(function(e,t){l[e]=n(f.css("padding"+t))}),i.containerOffset=f.offset(),i.containerPosition=f.position(),i.containerSize={height:f.innerHeight()-l[3],width:f.innerWidth()-l[1]};var c=i.containerOffset,h=i.containerSize.height,p=i.containerSize.width,d=e.ui.hasScroll(a,"left")?a.scrollWidth:p,v=e.ui.hasScroll(a)?a.scrollHeight:h;i.parentData={element:a,left:c.left,top:c.top,width:d,height:v}}},resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.containerSize,o=r.containerOffset,u=r.size,a=r.position,f=r._aspectRatio||t.shiftKey,l={top:0,left:0},c=r.containerElement;c[0]!=document&&/static/.test(c.css("position"))&&(l=o),a.left<(r._helper?o.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-o.left:r.position.left-l.left),f&&(r.size.height=r.size.width/r.aspectRatio),r.position.left=i.helper?o.left:0),a.top<(r._helper?o.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-o.top:r.position.top),f&&(r.size.width=r.size.height*r.aspectRatio),r.position.top=r._helper?o.top:0),r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top;var h=Math.abs((r._helper?r.offset.left-l.left:r.offset.left-l.left)+r.sizeDiff.width),p=Math.abs((r._helper?r.offset.top-l.top:r.offset.top-o.top)+r.sizeDiff.height),d=r.containerElement.get(0)==r.element.parent().get(0),v=/relative|absolute/.test(r.containerElement.css("position"));d&&v&&(h-=r.parentData.left),h+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-h,f&&(r.size.height=r.size.width/r.aspectRatio)),p+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-p,f&&(r.size.width=r.size.height*r.aspectRatio))},stop:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.position,o=r.containerOffset,u=r.containerPosition,a=r.containerElement,f=e(r.helper),l=f.offset(),c=f.outerWidth()-r.sizeDiff.width,h=f.outerHeight()-r.sizeDiff.height;r._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:l.left-u.left-o.left,width:c,height:h}),r._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:l.left-u.left-o.left,width:c,height:h})}}),e.ui.plugin.add("resizable","ghost",{start:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.size;r.ghost=r.originalElement.clone(),r.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof i.ghost=="string"?i.ghost:""),r.ghost.appendTo(r.helper)},resize:function(t,n){var r=e(this).data("resizable"),i=r.options;r.ghost&&r.ghost.css({position:"relative",height:r.size.height,width:r.size.width})},stop:function(t,n){var r=e(this).data("resizable"),i=r.options;r.ghost&&r.helper&&r.helper.get(0).removeChild(r.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.size,o=r.originalSize,u=r.originalPosition,a=r.axis,f=i._aspectRatio||t.shiftKey;i.grid=typeof i.grid=="number"?[i.grid,i.grid]:i.grid;var l=Math.round((s.width-o.width)/(i.grid[0]||1))*(i.grid[0]||1),c=Math.round((s.height-o.height)/(i.grid[1]||1))*(i.grid[1]||1);/^(se|s|e)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c):/^(ne)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c,r.position.top=u.top-c):/^(sw)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c,r.position.left=u.left-l):(r.size.width=o.width+l,r.size.height=o.height+c,r.position.top=u.top-c,r.position.left=u.left-l)}});var n=function(e){return parseInt(e,10)||0},r=function(e){return!isNaN(parseInt(e,10))}})(jQuery);(function(e,t){e.widget("ui.selectable",e.ui.mouse,{version:"1.9.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var t=this;this.element.addClass("ui-selectable"),this.dragged=!1;var n;this.refresh=function(){n=e(t.options.filter,t.element[0]),n.addClass("ui-selectee"),n.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=n.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var n=this;this.opos=[t.pageX,t.pageY];if(this.options.disabled)return;var r=this.options;this.selectees=e(r.filter,this.element[0]),this._trigger("start",t),e(r.appendTo).append(this.helper),this.helper.css({left:t.clientX,top:t.clientY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=e.data(this,"selectable-item");r.startselected=!0,!t.metaKey&&!t.ctrlKey&&(r.$element.removeClass("ui-selected"),r.selected=!1,r.$element.addClass("ui-unselecting"),r.unselecting=!0,n._trigger("unselecting",t,{unselecting:r.element}))}),e(t.target).parents().andSelf().each(function(){var r=e.data(this,"selectable-item");if(r){var i=!t.metaKey&&!t.ctrlKey||!r.$element.hasClass("ui-selected");return r.$element.removeClass(i?"ui-unselecting":"ui-selected").addClass(i?"ui-selecting":"ui-unselecting"),r.unselecting=!i,r.selecting=i,r.selected=i,i?n._trigger("selecting",t,{selecting:r.element}):n._trigger("unselecting",t,{unselecting:r.element}),!1}})},_mouseDrag:function(t){var n=this;this.dragged=!0;if(this.options.disabled)return;var r=this.options,i=this.opos[0],s=this.opos[1],o=t.pageX,u=t.pageY;if(i>o){var a=o;o=i,i=a}if(s>u){var a=u;u=s,s=a}return this.helper.css({left:i,top:s,width:o-i,height:u-s}),this.selectees.each(function(){var a=e.data(this,"selectable-item");if(!a||a.element==n.element[0])return;var f=!1;r.tolerance=="touch"?f=!(a.left>o||a.right<i||a.top>u||a.bottom<s):r.tolerance=="fit"&&(f=a.left>i&&a.right<o&&a.top>s&&a.bottom<u),f?(a.selected&&(a.$element.removeClass("ui-selected"),a.selected=!1),a.unselecting&&(a.$element.removeClass("ui-unselecting"),a.unselecting=!1),a.selecting||(a.$element.addClass("ui-selecting"),a.selecting=!0,n._trigger("selecting",t,{selecting:a.element}))):(a.selecting&&((t.metaKey||t.ctrlKey)&&a.startselected?(a.$element.removeClass("ui-selecting"),a.selecting=!1,a.$element.addClass("ui-selected"),a.selected=!0):(a.$element.removeClass("ui-selecting"),a.selecting=!1,a.startselected&&(a.$element.addClass("ui-unselecting"),a.unselecting=!0),n._trigger("unselecting",t,{unselecting:a.element}))),a.selected&&!t.metaKey&&!t.ctrlKey&&!a.startselected&&(a.$element.removeClass("ui-selected"),a.selected=!1,a.$element.addClass("ui-unselecting"),a.unselecting=!0,n._trigger("unselecting",t,{unselecting:a.element})))}),!1},_mouseStop:function(t){var n=this;this.dragged=!1;var r=this.options;return e(".ui-unselecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-unselecting"),r.unselecting=!1,r.startselected=!1,n._trigger("unselected",t,{unselected:r.element})}),e(".ui-selecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected"),r.selecting=!1,r.selected=!0,r.startselected=!0,n._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}})})(jQuery);(function(e,t){e.widget("ui.sortable",e.ui.mouse,{version:"1.9.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?e.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){t==="disabled"?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var r=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type=="static")return!1;this._refreshItems(t);var i=null,s=e(t.target).parents().each(function(){if(e.data(this,r.widgetName+"-item")==r)return i=e(this),!1});e.data(t.target,r.widgetName+"-item")==r&&(i=e(t.target));if(!i)return!1;if(this.options.handle&&!n){var o=!1;e(this.options.handle,i).find("*").andSelf().each(function(){this==t.target&&(o=!0)});if(!o)return!1}return this.currentItem=i,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,r){var i=this.options;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),i.containment&&this._setContainment(),i.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",i.cursor)),i.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",i.opacity)),i.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",i.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!r)for(var s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var n=this.options,r=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-this.overflowOffset.top<n.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-n.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-this.overflowOffset.left<n.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-n.scrollSpeed)):(t.pageY-e(document).scrollTop()<n.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed)),t.pageX-e(document).scrollLeft()<n.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(var i=this.items.length-1;i>=0;i--){var s=this.items[i],o=s.item[0],u=this._intersectsWithPointer(s);if(!u)continue;if(s.instance!==this.currentContainer)continue;if(o!=this.currentItem[0]&&this.placeholder[u==1?"next":"prev"]()[0]!=o&&!e.contains(this.placeholder[0],o)&&(this.options.type=="semi-dynamic"?!e.contains(this.element[0],o):!0)){this.direction=u==1?"down":"up";if(this.options.tolerance!="pointer"&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(!t)return;e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t);if(this.options.revert){var r=this,i=this.placeholder.offset();this.reverting=!0,e(this.helper).animate({left:i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1},cancel:function(){if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=r+f>u&&r+f<a&&t+l>s&&t+l<o;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?c:s<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&u<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<a},_intersectsWithPointer:function(t){var n=this.options.axis==="x"||e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),r=this.options.axis==="y"||e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),i=n&&r,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return i?this.floating?o&&o=="right"||s=="down"?2:1:s&&(s=="down"?2:1):!1},_intersectsWithSides:function(t){var n=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),r=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?s=="right"&&r||s=="left"&&!r:i&&(i=="down"&&n||i=="up"&&!n)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!=0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!=0&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n=[],r=[],i=this._connectWith();if(i&&t)for(var s=i.length-1;s>=0;s--){var o=e(i[s]);for(var u=o.length-1;u>=0;u--){var a=e.data(o[u],this.widgetName);a&&a!=this&&!a.options.disabled&&r.push([e.isFunction(a.options.items)?a.options.items.call(a.element):e(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a])}}r.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var s=r.length-1;s>=0;s--)r[s][0].each(function(){n.push(this)});return e(n)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]==e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n=this.items,r=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],i=this._connectWith();if(i&&this.ready)for(var s=i.length-1;s>=0;s--){var o=e(i[s]);for(var u=o.length-1;u>=0;u--){var a=e.data(o[u],this.widgetName);a&&a!=this&&!a.options.disabled&&(r.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]),this.containers.push(a))}}for(var s=r.length-1;s>=0;s--){var f=r[s][1],l=r[s][0];for(var u=0,c=l.length;u<c;u++){var h=e(l[u]);h.data(this.widgetName+"-item",f),n.push({item:h,instance:f,width:0,height:0,left:0,top:0})}}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var n=this.items.length-1;n>=0;n--){var r=this.items[n];if(r.instance!=this.currentContainer&&this.currentContainer&&r.item[0]!=this.currentItem[0])continue;var i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item;t||(r.width=i.outerWidth(),r.height=i.outerHeight());var s=i.offset();r.left=s.left,r.top=s.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var n=this.containers.length-1;n>=0;n--){var s=this.containers[n].element.offset();this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight()}return this},_createPlaceholder:function(t){t=t||this;var n=t.options;if(!n.placeholder||n.placeholder.constructor==String){var r=n.placeholder;n.placeholder={element:function(){var n=e(document.createElement(t.currentItem[0].nodeName)).addClass(r||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return r||(n.style.visibility="hidden"),n},update:function(e,i){if(r&&!n.forcePlaceholderSize)return;i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10))}}}t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var n=null,r=null;for(var i=this.containers.length-1;i>=0;i--){if(e.contains(this.currentItem[0],this.containers[i].element[0]))continue;if(this._intersectsWith(this.containers[i].containerCache)){if(n&&e.contains(this.containers[i].element[0],n.element[0]))continue;n=this.containers[i],r=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0)}if(!n)return;if(this.containers.length===1)this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1;else{var s=1e4,o=null,u=this.containers[r].floating?"left":"top",a=this.containers[r].floating?"width":"height",f=this.positionAbs[u]+this.offset.click[u];for(var l=this.items.length-1;l>=0;l--){if(!e.contains(this.containers[r].element[0],this.items[l].item[0]))continue;if(this.items[l].item[0]==this.currentItem[0])continue;var c=this.items[l].item.offset()[u],h=!1;Math.abs(c-f)>Math.abs(c+this.items[l][a]-f)&&(h=!0,c+=this.items[l][a]),Math.abs(c-f)<s&&(s=Math.abs(c-f),o=this.items[l],this.direction=h?"up":"down")}if(!o&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[r],o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[r].element,!0),this._trigger("change",t,this._uiHash()),this.containers[r]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):n.helper=="clone"?this.currentItem.clone():this.currentItem;return r.parents("body").length||e(n.appendTo!="parent"?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(r[0].style.width==""||n.forceHelperSize)&&r.width(this.currentItem.width()),(r[0].style.height==""||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)){var n=e(t.containment)[0],r=e(t.containment).offset(),i=e(n).css("overflow")!="hidden";this.containment=[r.left+(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0)-this.margins.left,r.top+(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0)-this.margins.top,r.left+(i?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,r.top+(i?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var s=t.pageX,o=t.pageY;if(this.originalPosition){this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top));if(n.grid){var u=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1];o=this.containment?u-this.offset.click.top<this.containment[1]||u-this.offset.click.top>this.containment[3]?u-this.offset.click.top<this.containment[1]?u+n.grid[1]:u-n.grid[1]:u:u;var a=this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0];s=this.containment?a-this.offset.click.left<this.containment[0]||a-this.offset.click.left>this.containment[2]?a-this.offset.click.left<this.containment[0]?a+n.grid[0]:a-n.grid[0]:a:a}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i==this.counter&&this.refreshPositions(!r)})},_clear:function(t,n){this.reverting=!1;var r=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var i in this._storedCSS)if(this._storedCSS[i]=="auto"||this._storedCSS[i]=="static")this._storedCSS[i]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!n&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!n&&r.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(n||(r.push(function(e){this._trigger("remove",e,this._uiHash())}),r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))));for(var i=this.containers.length-1;i>=0;i--)n||r.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(r.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!n){this._trigger("beforeStop",t,this._uiHash());for(var i=0;i<r.length;i++)r[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}n||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!n){for(var i=0;i<r.length;i++)r[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})})(jQuery);(function(e,t){var n=0,r={},i={};r.height=r.paddingTop=r.paddingBottom=r.borderTopWidth=r.borderBottomWidth="hide",i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.9.1",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.accordionId="ui-accordion-"+(this.element.attr("id")||++n),r=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset"),this.headers=this.element.find(r.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this._hoverable(this.headers),this._focusable(this.headers),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide(),!r.collapsible&&(r.active===!1||r.active==null)&&(r.active=0),r.active<0&&(r.active+=this.headers.length),this.active=this._findActive(r.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top"),this.active.next().addClass("ui-accordion-content-active").show(),this._createIcons(),this.refresh(),this.element.attr("role","tablist"),this.headers.attr("role","tab").each(function(n){var r=e(this),i=r.attr("id"),s=r.next(),o=s.attr("id");i||(i=t+"-header-"+n,r.attr("id",i)),o||(o=t+"-panel-"+n,s.attr("id",o)),r.attr("aria-controls",o),s.attr("aria-labelledby",i)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._on(this.headers,{keydown:"_keydown"}),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._setupEvents(r.event)},_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this.options.heightStyle!=="content"&&e.css("height","")},_setOption:function(e,t){if(e==="active"){this._activate(t);return}e==="event"&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),e==="collapsible"&&!t&&this.options.active===!1&&this._activate(0),e==="icons"&&(this._destroyIcons(),t&&this._createIcons()),e==="disabled"&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)},_keydown:function(t){if(t.altKey||t.ctrlKey)return;var n=e.ui.keyCode,r=this.headers.length,i=this.headers.index(t.target),s=!1;switch(t.keyCode){case n.RIGHT:case n.DOWN:s=this.headers[(i+1)%r];break;case n.LEFT:case n.UP:s=this.headers[(i-1+r)%r];break;case n.SPACE:case n.ENTER:this._eventHandler(t);break;case n.HOME:s=this.headers[0];break;case n.END:s=this.headers[r-1]}s&&(e(t.target).attr("tabIndex",-1),e(s).attr("tabIndex",0),s.focus(),t.preventDefault())},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t,n,r=this.options.heightStyle,i=this.element.parent();r==="fill"?(e.support.minHeight||(n=i.css("overflow"),i.css("overflow","hidden")),t=i.height(),this.element.siblings(":visible").each(function(){var n=e(this),r=n.css("position");if(r==="absolute"||r==="fixed")return;t-=n.outerHeight(!0)}),n&&i.css("overflow",n),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):r==="auto"&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).height("").height())}).height(t))},_activate:function(t){var n=this._findActive(t)[0];if(n===this.active[0])return;n=n||this.active[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop})},_findActive:function(t){return typeof t=="number"?this.headers.eq(t):e()},_setupEvents:function(t){var n={};if(!t)return;e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._on(this.headers,n)},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),s=i[0]===r[0],o=s&&n.collapsible,u=o?e():i.next(),a=r.next(),f={oldHeader:r,oldPanel:a,newHeader:o?e():i,newPanel:u};t.preventDefault();if(s&&!n.collapsible||this._trigger("beforeActivate",t,f)===!1)return;n.active=o?!1:this.headers.index(i),this.active=s?e():i,this._toggle(f),r.removeClass("ui-accordion-header-active ui-state-active"),n.icons&&r.children(".ui-accordion-header-icon").removeClass(n.icons.activeHeader).addClass(n.icons.header),s||(i.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),n.icons&&i.children(".ui-accordion-header-icon").removeClass(n.icons.header).addClass(n.icons.activeHeader),i.next().addClass("ui-accordion-content-active"))},_toggle:function(t){var n=t.newPanel,r=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=n,this.prevHide=r,this.options.animate?this._animate(n,r,t):(r.hide(),n.show(),this._toggleComplete(t)),r.attr({"aria-expanded":"false","aria-hidden":"true"}),r.prev().attr("aria-selected","false"),n.length&&r.length?r.prev().attr("tabIndex",-1):n.length&&this.headers.filter(function(){return e(this).attr("tabIndex")===0}).attr("tabIndex",-1),n.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(e,t,n){var s,o,u,a=this,f=0,l=e.length&&(!t.length||e.index()<t.index()),c=this.options.animate||{},h=l&&c.down||c,p=function(){a._toggleComplete(n)};typeof h=="number"&&(u=h),typeof h=="string"&&(o=h),o=o||h.easing||c.easing,u=u||h.duration||c.duration;if(!t.length)return e.animate(i,u,o,p);if(!e.length)return t.animate(r,u,o,p);s=e.show().outerHeight(),t.animate(r,{duration:u,easing:o,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(i,{duration:u,easing:o,complete:p,step:function(e,n){n.now=Math.round(e),n.prop!=="height"?f+=n.now:a.options.heightStyle!=="content"&&(n.now=Math.round(s-t.outerHeight()-f),f=0)}})},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}}),e.uiBackCompat!==!1&&(function(e,t){e.extend(t.options,{navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}});var n=t._create;t._create=function(){if(this.options.navigation){var t=this,r=this.element.find(this.options.header),i=r.next(),s=r.add(i).find("a").filter(this.options.navigationFilter)[0];s&&r.add(i).each(function(n){if(e.contains(this,s))return t.options.active=Math.floor(n/2),!1})}n.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(e,t){e.extend(t.options,{heightStyle:null,autoHeight:!0,clearStyle:!1,fillSpace:!1});var n=t._create,r=t._setOption;e.extend(t,{_create:function(){this.options.heightStyle=this.options.heightStyle||this._mergeHeightStyle(),n.call(this)},_setOption:function(e){if(e==="autoHeight"||e==="clearStyle"||e==="fillSpace")this.options.heightStyle=this._mergeHeightStyle();r.apply(this,arguments)},_mergeHeightStyle:function(){var e=this.options;if(e.fillSpace)return"fill";if(e.clearStyle)return"content";if(e.autoHeight)return"auto"}})}(jQuery,jQuery.ui.accordion.prototype),function(e,t){e.extend(t.options.icons,{activeHeader:null,headerSelected:"ui-icon-triangle-1-s"});var n=t._createIcons;t._createIcons=function(){this.options.icons&&(this.options.icons.activeHeader=this.options.icons.activeHeader||this.options.icons.headerSelected),n.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(e,t){t.activate=t._activate;var n=t._findActive;t._findActive=function(e){return e===-1&&(e=!1),e&&typeof e!="number"&&(e=this.headers.index(this.headers.filter(e)),e===-1&&(e=!1)),n.call(this,e)}}(jQuery,jQuery.ui.accordion.prototype),jQuery.ui.accordion.prototype.resize=jQuery.ui.accordion.prototype.refresh,function(e,t){e.extend(t.options,{change:null,changestart:null});var n=t._trigger;t._trigger=function(e,t,r){var i=n.apply(this,arguments);return i?(e==="beforeActivate"?i=n.call(this,"changestart",t,{oldHeader:r.oldHeader,oldContent:r.oldPanel,newHeader:r.newHeader,newContent:r.newPanel}):e==="activate"&&(i=n.call(this,"change",t,{oldHeader:r.oldHeader,oldContent:r.oldPanel,newHeader:r.newHeader,newContent:r.newPanel})),i):!1}}(jQuery,jQuery.ui.accordion.prototype),function(e,t){e.extend(t.options,{animate:null,animated:"slide"});var n=t._create;t._create=function(){var e=this.options;e.animate===null&&(e.animated?e.animated==="slide"?e.animate=300:e.animated==="bounceslide"?e.animate={duration:200,down:{easing:"easeOutBounce",duration:1e3}}:e.animate=e.animated:e.animate=!1),n.call(this)}}(jQuery,jQuery.ui.accordion.prototype))})(jQuery);(function(e,t){var n=0;e.widget("ui.autocomplete",{version:"1.9.1",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,n,r;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(i){if(this.element.prop("readOnly")){t=!0,r=!0,n=!0;return}t=!1,r=!1,n=!1;var s=e.ui.keyCode;switch(i.keyCode){case s.PAGE_UP:t=!0,this._move("previousPage",i);break;case s.PAGE_DOWN:t=!0,this._move("nextPage",i);break;case s.UP:t=!0,this._keyEvent("previous",i);break;case s.DOWN:t=!0,this._keyEvent("next",i);break;case s.ENTER:case s.NUMPAD_ENTER:this.menu.active&&(t=!0,i.preventDefault(),this.menu.select(i));break;case s.TAB:this.menu.active&&this.menu.select(i);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(i),i.preventDefault());break;default:n=!0,this._searchTimeout(i)}},keypress:function(r){if(t){t=!1,r.preventDefault();return}if(n)return;var i=e.ui.keyCode;switch(r.keyCode){case i.PAGE_UP:this._move("previousPage",r);break;case i.PAGE_DOWN:this._move("nextPage",r);break;case i.UP:this._keyEvent("previous",r);break;case i.DOWN:this._keyEvent("next",r)}},input:function(e){if(r){r=!1,e.preventDefault();return}this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching),this.close(e),this._change(e)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:e(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(r){r.target!==t.element[0]&&r.target!==n&&!e.contains(n,r.target)&&t.close()})})},menufocus:function(t,n){if(this.isNewMenu){this.isNewMenu=!1;if(t.originalEvent&&/^mouse/.test(t.originalEvent.type)){this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});return}}var r=n.item.data("ui-autocomplete-item")||n.item.data("item.autocomplete");!1!==this._trigger("focus",t,{item:r})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(r.value):this.liveRegion.text(r.value)},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item")||t.item.data("item.autocomplete"),r=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=r,this._delay(function(){this.previous=r,this.selectedItem=n})),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),e.fn.bgiframe&&this.menu.element.bgiframe(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),e==="source"&&this._initSource(),e==="appendTo"&&this.menu.element.appendTo(this.document.find(t||"body")[0]),e==="disabled"&&t&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var t,n,r=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,r){r(e.ui.autocomplete.filter(t,n.term))}):typeof this.options.source=="string"?(n=this.options.source,this.source=function(t,i){r.xhr&&r.xhr.abort(),r.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){i(e)},error:function(){i([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){e=e!=null?e:this._value(),this.term=this._value();if(e.length<this.options.minLength)return this.close(t);if(this._trigger("search",t)===!1)return;return this._search(e)},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,t=++n;return function(r){t===n&&e.__response(r),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return typeof t=="string"?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var n=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(n,t),this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var r=this;e.each(n,function(e,n){r._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<a>").text(n.label)).appendTo(t)},_move:function(e,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)){this._value(this.term),this.menu.blur();return}this.menu[e](t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(e,t),t.preventDefault()}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var r=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return r.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments);if(this.options.disabled||this.cancelSearch)return;e&&e.length?t=this.options.messages.results(e.length):t=this.options.messages.noResults,this.liveRegion.text(t)}})})(jQuery);(function(e,t){var n,r,i,s,o="ui-button ui-widget ui-state-default ui-corner-all",u="ui-state-hover ui-state-active ",a="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",f=function(){var t=e(this).find(":ui-button");setTimeout(function(){t.button("refresh")},1)},l=function(t){var n=t.name,r=t.form,i=e([]);return n&&(r?i=e(r).find("[name='"+n+"']"):i=e("[name='"+n+"']",t.ownerDocument).filter(function(){return!this.form})),i};e.widget("ui.button",{version:"1.9.1",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,f),typeof this.options.disabled!="boolean"?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,u=this.options,a=this.type==="checkbox"||this.type==="radio",c="ui-state-hover"+(a?"":" ui-state-active"),h="ui-state-focus";u.label===null&&(u.label=this.type==="input"?this.buttonElement.val():this.buttonElement.html()),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){if(u.disabled)return;e(this).addClass("ui-state-hover"),this===n&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){if(u.disabled)return;e(this).removeClass(c)}).bind("click"+this.eventNamespace,function(e){u.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){t.buttonElement.addClass(h)}).bind("blur"+this.eventNamespace,function(){t.buttonElement.removeClass(h)}),a&&(this.element.bind("change"+this.eventNamespace,function(){if(s)return;t.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){if(u.disabled)return;s=!1,r=e.pageX,i=e.pageY}).bind("mouseup"+this.eventNamespace,function(e){if(u.disabled)return;if(r!==e.pageX||i!==e.pageY)s=!0})),this.type==="checkbox"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(u.disabled||s)return!1;e(this).toggleClass("ui-state-active"),t.buttonElement.attr("aria-pressed",t.element[0].checked)}):this.type==="radio"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(u.disabled||s)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var n=t.element[0];l(n).not(n).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(u.disabled)return!1;e(this).addClass("ui-state-active"),n=this,t.document.one("mouseup",function(){n=null})}).bind("mouseup"+this.eventNamespace,function(){if(u.disabled)return!1;e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){if(u.disabled)return!1;(t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",u.disabled),this._resetButton()},_determineButtonType:function(){var e,t,n;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button",this.type==="checkbox"||this.type==="radio"?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),n=this.element.is(":checked"),n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" "+u+" "+a).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){this._super(e,t);if(e==="disabled"){t?this.element.prop("disabled",!0):this.element.prop("disabled",!1);return}this._resetButton()},refresh:function(){var t=this.element.is(":disabled")||this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),this.type==="radio"?l(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var t=this.buttonElement.removeClass(a),n=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),r=this.options.icons,i=r.primary&&r.secondary,s=[];r.primary||r.secondary?(this.options.text&&s.push("ui-button-text-icon"+(i?"s":r.primary?"-primary":"-secondary")),r.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+r.primary+"'></span>"),r.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+r.secondary+"'></span>"),this.options.text||(s.push(i?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(n)))):s.push("ui-button-text-only"),t.addClass(s.join(" "))}}),e.widget("ui.buttonset",{version:"1.9.1",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){e==="disabled"&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(jQuery);(function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(t,"mouseout",function(){$(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).removeClass("ui-datepicker-next-hover")}).delegate(t,"mouseover",function(){$.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).addClass("ui-datepicker-next-hover"))})}function extendRemove(e,t){$.extend(e,t);for(var n in t)if(t[n]==null||t[n]==undefined)e[n]=t[n];return e}$.extend($.ui,{datepicker:{version:"1.9.1"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline=nodeName=="div"||nodeName=="span";target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),nodeName=="input"?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){var n=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(e,t){var n=$(e);t.append=$([]),t.trigger=$([]);if(n.hasClass(this.markerClassName))return;this._attachments(n,t),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),this._autoSize(t),$.data(e,PROP_NAME,t),t.settings.disabled&&this._disableDatepicker(e)},_attachments:function(e,t){var n=this._get(t,"appendText"),r=this._get(t,"isRTL");t.append&&t.append.remove(),n&&(t.append=$('<span class="'+this._appendClass+'">'+n+"</span>"),e[r?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();var i=this._get(t,"showOn");(i=="focus"||i=="both")&&e.focus(this._showDatepicker);if(i=="button"||i=="both"){var s=this._get(t,"buttonText"),o=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:o,alt:s,title:s}):$('<button type="button"></button>').addClass(this._triggerClass).html(o==""?s:$("<img/>").attr({src:o,alt:s,title:s}))),e[r?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=e[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(e[0])):$.datepicker._showDatepicker(e[0]),!1})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),n=this._get(e,"dateFormat");if(n.match(/[DM]/)){var r=function(e){var t=0,n=0;for(var r=0;r<e.length;r++)e[r].length>t&&(t=e[r].length,n=r);return n};t.setMonth(r(this._get(e,n.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(r(this._get(e,n.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var n=$(e);if(n.hasClass(this.markerClassName))return;n.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block")},_dialogDatepicker:function(e,t,n,r,i){var s=this._dialogInst;if(!s){this.uuid+=1;var o="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+o+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),s=this._dialogInst=this._newInst(this._dialogInput,!1),s.settings={},$.data(this._dialogInput[0],PROP_NAME,s)}extendRemove(s.settings,r||{}),t=t&&t.constructor==Date?this._formatDate(s,t):t,this._dialogInput.val(t),this._pos=i?i.length?i:[i.pageX,i.pageY]:null;if(!this._pos){var u=document.documentElement.clientWidth,a=document.documentElement.clientHeight,f=document.documentElement.scrollLeft||document.body.scrollLeft,l=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[u/2-100+f,a/2-150+l]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),s.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,s),this},_destroyDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),r=="input"?(n.append.remove(),n.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(r=="div"||r=="span")&&t.removeClass(this.markerClassName).empty()},_enableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();if(r=="input")e.disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t})},_disableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();if(r=="input")e.disabled=!0,n.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=e},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==e)return!0;return!1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,n){var r=this._getInst(e);if(arguments.length==2&&typeof t=="string")return t=="defaults"?$.extend({},$.datepicker._defaults):r?t=="all"?$.extend({},r.settings):this._get(r,t):null;var i=t||{};typeof t=="string"&&(i={},i[t]=n);if(r){this._curInst==r&&this._hideDatepicker();var s=this._getDateDatepicker(e,!0),o=this._getMinMaxDate(r,"min"),u=this._getMinMaxDate(r,"max");extendRemove(r.settings,i),o!==null&&i.dateFormat!==undefined&&i.minDate===undefined&&(r.settings.minDate=this._formatDate(r,o)),u!==null&&i.dateFormat!==undefined&&i.maxDate===undefined&&(r.settings.maxDate=this._formatDate(r,u)),this._attachments($(e),r),this._autoSize(r),this._setDate(r,s),this._updateAlternate(r),this._updateDatepicker(r)}},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),n=!0,r=t.dpDiv.is(".ui-datepicker-rtl");t._keyEvent=!0;if($.datepicker._datepickerShowing)switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),n=!1;break;case 13:var i=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);i[0]&&$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,i[0]);var s=$.datepicker._get(t,"onSelect");if(s){var o=$.datepicker._formatDate(t);s.apply(t.input?t.input[0]:null,[o,t])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),n=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),n=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?1:-1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),n=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?-1:1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),n=e.ctrlKey||e.metaKey;break;default:n=!1}else e.keyCode==36&&e.ctrlKey?$.datepicker._showDatepicker(this):n=!1;n&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var n=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),r=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||r<" "||!n||n.indexOf(r)>-1}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal)try{var n=$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t));n&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(r){$.datepicker.log(r)}return!0},_showDatepicker:function(e){e=e.target||e,e.nodeName.toLowerCase()!="input"&&(e=$("input",e.parentNode)[0]);if($.datepicker._isDisabledDatepicker(e)||$.datepicker._lastInput==e)return;var t=$.datepicker._getInst(e);$.datepicker._curInst&&$.datepicker._curInst!=t&&($.datepicker._curInst.dpDiv.stop(!0,!0),t&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var n=$.datepicker._get(t,"beforeShow"),r=n?n.apply(e,[e,t]):{};if(r===!1)return;extendRemove(t.settings,r),t.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var i=!1;$(e).parents().each(function(){return i|=$(this).css("position")=="fixed",!i});var s={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),s=$.datepicker._checkOffset(t,s,i),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":i?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"});if(!t.inline){var o=$.datepicker._get(t,"showAnim"),u=$.datepicker._get(t,"duration"),a=function(){var e=t.dpDiv.find("iframe.ui-datepicker-cover");if(!!e.length){var n=$.datepicker._getBorders(t.dpDiv);e.css({left:-n[0],top:-n[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex($(e).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&($.effects.effect[o]||$.effects[o])?t.dpDiv.show(o,$.datepicker._get(t,"showOptions"),u,a):t.dpDiv[o||"show"](o?u:null,a),(!o||!u)&&a(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.datepicker._curInst=t}},_updateDatepicker:function(e){this.maxRows=4;var t=$.datepicker._getBorders(e.dpDiv);instActive=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var n=e.dpDiv.find("iframe.ui-datepicker-cover");!n.length||n.css({left:-t[0],top:-t[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var r=this._getNumberOfMonths(e),i=r[1],s=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),i>1&&e.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",s*i+"em"),e.dpDiv[(r[0]!=1||r[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus();if(e.yearshtml){var o=e.yearshtml;setTimeout(function(){o===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),o=e.yearshtml=null},0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,n){var r=e.dpDiv.outerWidth(),i=e.dpDiv.outerHeight(),s=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,u=document.documentElement.clientWidth+(n?0:$(document).scrollLeft()),a=document.documentElement.clientHeight+(n?0:$(document).scrollTop());return t.left-=this._get(e,"isRTL")?r-s:0,t.left-=n&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=n&&t.top==e.input.offset().top+o?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+r>u&&u>r?Math.abs(t.left+r-u):0),t.top-=Math.min(t.top,t.top+i>a&&a>i?Math.abs(i+o):0),t},_findPos:function(e){var t=this._getInst(e),n=this._get(t,"isRTL");while(e&&(e.type=="hidden"||e.nodeType!=1||$.expr.filters.hidden(e)))e=e[n?"previousSibling":"nextSibling"];var r=$(e).offset();return[r.left,r.top]},_hideDatepicker:function(e){var t=this._curInst;if(!t||e&&t!=$.data(e,PROP_NAME))return;if(this._datepickerShowing){var n=this._get(t,"showAnim"),r=this._get(t,"duration"),i=function(){$.datepicker._tidyDialog(t)};$.effects&&($.effects.effect[n]||$.effects[n])?t.dpDiv.hide(n,$.datepicker._get(t,"showOptions"),r,i):t.dpDiv[n=="slideDown"?"slideUp":n=="fadeIn"?"fadeOut":"hide"](n?r:null,i),n||i(),this._datepickerShowing=!1;var s=this._get(t,"onClose");s&&s.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(!$.datepicker._curInst)return;var t=$(e.target),n=$.datepicker._getInst(t[0]);(t[0].id!=$.datepicker._mainDivId&&t.parents("#"+$.datepicker._mainDivId).length==0&&!t.hasClass($.datepicker.markerClassName)&&!t.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||t.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=n)&&$.datepicker._hideDatepicker()},_adjustDate:function(e,t,n){var r=$(e),i=this._getInst(r[0]);if(this._isDisabledDatepicker(r[0]))return;this._adjustInstDate(i,t+(n=="M"?this._get(i,"showCurrentAtPos"):0),n),this._updateDatepicker(i)},_gotoToday:function(e){var t=$(e),n=this._getInst(t[0]);if(this._get(n,"gotoCurrent")&&n.currentDay)n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear;else{var r=new Date;n.selectedDay=r.getDate(),n.drawMonth=n.selectedMonth=r.getMonth(),n.drawYear=n.selectedYear=r.getFullYear()}this._notifyChange(n),this._adjustDate(t)},_selectMonthYear:function(e,t,n){var r=$(e),i=this._getInst(r[0]);i["selected"+(n=="M"?"Month":"Year")]=i["draw"+(n=="M"?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(i),this._adjustDate(r)},_selectDay:function(e,t,n,r){var i=$(e);if($(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(i[0]))return;var s=this._getInst(i[0]);s.selectedDay=s.currentDay=$("a",r).html(),s.selectedMonth=s.currentMonth=t,s.selectedYear=s.currentYear=n,this._selectDate(e,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))},_clearDate:function(e){var t=$(e),n=this._getInst(t[0]);this._selectDate(t,"")},_selectDate:function(e,t){var n=$(e),r=this._getInst(n[0]);t=t!=null?t:this._formatDate(r),r.input&&r.input.val(t),this._updateAlternate(r);var i=this._get(r,"onSelect");i?i.apply(r.input?r.input[0]:null,[t,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],typeof r.input[0]!="object"&&r.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var n=this._get(e,"altFormat")||this._get(e,"dateFormat"),r=this._getDate(e),i=this.formatDate(n,r,this._getFormatConfig(e));$(t).each(function(){$(this).val(i)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1},parseDate:function(e,t,n){if(e==null||t==null)throw"Invalid arguments";t=typeof t=="object"?t.toString():t+"";if(t=="")return null;var r=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff;r=typeof r!="string"?r:(new Date).getFullYear()%100+parseInt(r,10);var i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=-1,f=-1,l=-1,c=-1,h=!1,p=function(t){var n=y+1<e.length&&e.charAt(y+1)==t;return n&&y++,n},d=function(e){var n=p(e),r=e=="@"?14:e=="!"?20:e=="y"&&n?4:e=="o"?3:2,i=new RegExp("^\\d{1,"+r+"}"),s=t.substring(g).match(i);if(!s)throw"Missing number at position "+g;return g+=s[0].length,parseInt(s[0],10)},v=function(e,n,r){var i=$.map(p(e)?r:n,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)}),s=-1;$.each(i,function(e,n){var r=n[1];if(t.substr(g,r.length).toLowerCase()==r.toLowerCase())return s=n[0],g+=r.length,!1});if(s!=-1)return s+1;throw"Unknown name at position "+g},m=function(){if(t.charAt(g)!=e.charAt(y))throw"Unexpected literal at position "+g;g++},g=0;for(var y=0;y<e.length;y++)if(h)e.charAt(y)=="'"&&!p("'")?h=!1:m();else switch(e.charAt(y)){case"d":l=d("d");break;case"D":v("D",i,s);break;case"o":c=d("o");break;case"m":f=d("m");break;case"M":f=v("M",o,u);break;case"y":a=d("y");break;case"@":var b=new Date(d("@"));a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"!":var b=new Date((d("!")-this._ticksTo1970)/1e4);a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"'":p("'")?m():h=!0;break;default:m()}if(g<t.length){var w=t.substr(g);if(!/^\s+/.test(w))throw"Extra/unparsed characters found in date: "+w}a==-1?a=(new Date).getFullYear():a<100&&(a+=(new Date).getFullYear()-(new Date).getFullYear()%100+(a<=r?0:-100));if(c>-1){f=1,l=c;do{var E=this._getDaysInMonth(a,f-1);if(l<=E)break;f++,l-=E}while(!0)}var b=this._daylightSavingAdjust(new Date(a,f-1,l));if(b.getFullYear()!=a||b.getMonth()+1!=f||b.getDate()!=l)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var r=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,i=(n?n.dayNames:null)||this._defaults.dayNames,s=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,o=(n?n.monthNames:null)||this._defaults.monthNames,u=function(t){var n=h+1<e.length&&e.charAt(h+1)==t;return n&&h++,n},a=function(e,t,n){var r=""+t;if(u(e))while(r.length<n)r="0"+r;return r},f=function(e,t,n,r){return u(e)?r[t]:n[t]},l="",c=!1;if(t)for(var h=0;h<e.length;h++)if(c)e.charAt(h)=="'"&&!u("'")?c=!1:l+=e.charAt(h);else switch(e.charAt(h)){case"d":l+=a("d",t.getDate(),2);break;case"D":l+=f("D",t.getDay(),r,i);break;case"o":l+=a("o",Math.round(((new Date(t.getFullYear(),t.getMonth(),t.getDate())).getTime()-(new Date(t.getFullYear(),0,0)).getTime())/864e5),3);break;case"m":l+=a("m",t.getMonth()+1,2);break;case"M":l+=f("M",t.getMonth(),s,o);break;case"y":l+=u("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":l+=t.getTime();break;case"!":l+=t.getTime()*1e4+this._ticksTo1970;break;case"'":u("'")?l+="'":c=!0;break;default:l+=e.charAt(h)}return l},_possibleChars:function(e){var t="",n=!1,r=function(t){var n=i+1<e.length&&e.charAt(i+1)==t;return n&&i++,n};for(var i=0;i<e.length;i++)if(n)e.charAt(i)=="'"&&!r("'")?n=!1:t+=e.charAt(i);else switch(e.charAt(i)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":r("'")?t+="'":n=!0;break;default:t+=e.charAt(i)}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()==e.lastVal)return;var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i,s;i=s=this._getDefaultDate(e);var o=this._getFormatConfig(e);try{i=this.parseDate(n,r,o)||s}catch(u){this.log(u),r=t?"":r}e.selectedDay=i.getDate(),e.drawMonth=e.selectedMonth=i.getMonth(),e.drawYear=e.selectedYear=i.getFullYear(),e.currentDay=r?i.getDate():0,e.currentMonth=r?i.getMonth():0,e.currentYear=r?i.getFullYear():0,this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,n){var r=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},i=function(t){try{return $.datepicker.parseDate($.datepicker._get(e,"dateFormat"),t,$.datepicker._getFormatConfig(e))}catch(n){}var r=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(e):null)||new Date,i=r.getFullYear(),s=r.getMonth(),o=r.getDate(),u=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,a=u.exec(t);while(a){switch(a[2]||"d"){case"d":case"D":o+=parseInt(a[1],10);break;case"w":case"W":o+=parseInt(a[1],10)*7;break;case"m":case"M":s+=parseInt(a[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s));break;case"y":case"Y":i+=parseInt(a[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s))}a=u.exec(t)}return new Date(i,s,o)},s=t==null||t===""?n:typeof t=="string"?i(t):typeof t=="number"?isNaN(t)?n:r(t):new Date(t.getTime());return s=s&&s.toString()=="Invalid Date"?n:s,s&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),(i!=e.selectedMonth||s!=e.selectedYear)&&!n&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()==""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,-t,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,+t,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(n)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var n=this._get(e,"isRTL"),r=this._get(e,"showButtonPanel"),i=this._get(e,"hideIfNoPrevNext"),s=this._get(e,"navigationAsDateFormat"),o=this._getNumberOfMonths(e),u=this._get(e,"showCurrentAtPos"),a=this._get(e,"stepMonths"),f=o[0]!=1||o[1]!=1,l=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),c=this._getMinMaxDate(e,"min"),h=this._getMinMaxDate(e,"max"),p=e.drawMonth-u,d=e.drawYear;p<0&&(p+=12,d--);if(h){var v=this._daylightSavingAdjust(new Date(h.getFullYear(),h.getMonth()-o[0]*o[1]+1,h.getDate()));v=c&&v<c?c:v;while(this._daylightSavingAdjust(new Date(d,p,1))>v)p--,p<0&&(p=11,d--)}e.drawMonth=p,e.drawYear=d;var m=this._get(e,"prevText");m=s?this.formatDate(m,this._daylightSavingAdjust(new Date(d,p-a,1)),this._getFormatConfig(e)):m;var g=this._canAdjustMonth(e,-1,d,p)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>":i?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>",y=this._get(e,"nextText");y=s?this.formatDate(y,this._daylightSavingAdjust(new Date(d,p+a,1)),this._getFormatConfig(e)):y;var b=this._canAdjustMonth(e,1,d,p)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>":i?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>",w=this._get(e,"currentText"),E=this._get(e,"gotoCurrent")&&e.currentDay?l:t;w=s?this.formatDate(w,E,this._getFormatConfig(e)):w;var S=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(e,"closeText")+"</button>",x=r?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(n?S:"")+(this._isInRange(e,E)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+w+"</button>":"")+(n?"":S)+"</div>":"",T=parseInt(this._get(e,"firstDay"),10);T=isNaN(T)?0:T;var N=this._get(e,"showWeek"),C=this._get(e,"dayNames"),k=this._get(e,"dayNamesShort"),L=this._get(e,"dayNamesMin"),A=this._get(e,"monthNames"),O=this._get(e,"monthNamesShort"),M=this._get(e,"beforeShowDay"),_=this._get(e,"showOtherMonths"),D=this._get(e,"selectOtherMonths"),P=this._get(e,"calculateWeek")||this.iso8601Week,H=this._getDefaultDate(e),B="";for(var j=0;j<o[0];j++){var F="";this.maxRows=4;for(var I=0;I<o[1];I++){var q=this._daylightSavingAdjust(new Date(d,p,e.selectedDay)),R=" ui-corner-all",U="";if(f){U+='<div class="ui-datepicker-group';if(o[1]>1)switch(I){case 0:U+=" ui-datepicker-group-first",R=" ui-corner-"+(n?"right":"left");break;case o[1]-1:U+=" ui-datepicker-group-last",R=" ui-corner-"+(n?"left":"right");break;default:U+=" ui-datepicker-group-middle",R=""}U+='">'}U+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+R+'">'+(/all|left/.test(R)&&j==0?n?b:g:"")+(/all|right/.test(R)&&j==0?n?g:b:"")+this._generateMonthYearHeader(e,p,d,c,h,j>0||I>0,A,O)+'</div><table class="ui-datepicker-calendar"><thead>'+"<tr>";var z=N?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"";for(var W=0;W<7;W++){var X=(W+T)%7;z+="<th"+((W+T+6)%7>=5?' class="ui-datepicker-week-end"':"")+">"+'<span title="'+C[X]+'">'+L[X]+"</span></th>"}U+=z+"</tr></thead><tbody>";var V=this._getDaysInMonth(d,p);d==e.selectedYear&&p==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,V));var J=(this._getFirstDayOfMonth(d,p)-T+7)%7,K=Math.ceil((J+V)/7),Q=f?this.maxRows>K?this.maxRows:K:K;this.maxRows=Q;var G=this._daylightSavingAdjust(new Date(d,p,1-J));for(var Y=0;Y<Q;Y++){U+="<tr>";var Z=N?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(G)+"</td>":"";for(var W=0;W<7;W++){var et=M?M.apply(e.input?e.input[0]:null,[G]):[!0,""],tt=G.getMonth()!=p,nt=tt&&!D||!et[0]||c&&G<c||h&&G>h;Z+='<td class="'+((W+T+6)%7>=5?" ui-datepicker-week-end":"")+(tt?" ui-datepicker-other-month":"")+(G.getTime()==q.getTime()&&p==e.selectedMonth&&e._keyEvent||H.getTime()==G.getTime()&&H.getTime()==q.getTime()?" "+this._dayOverClass:"")+(nt?" "+this._unselectableClass+" ui-state-disabled":"")+(tt&&!_?"":" "+et[1]+(G.getTime()==l.getTime()?" "+this._currentClass:"")+(G.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+((!tt||_)&&et[2]?' title="'+et[2]+'"':"")+(nt?"":' data-handler="selectDay" data-event="click" data-month="'+G.getMonth()+'" data-year="'+G.getFullYear()+'"')+">"+(tt&&!_?"&#xa0;":nt?'<span class="ui-state-default">'+G.getDate()+"</span>":'<a class="ui-state-default'+(G.getTime()==t.getTime()?" ui-state-highlight":"")+(G.getTime()==l.getTime()?" ui-state-active":"")+(tt?" ui-priority-secondary":"")+'" href="#">'+G.getDate()+"</a>")+"</td>",G.setDate(G.getDate()+1),G=this._daylightSavingAdjust(G)}U+=Z+"</tr>"}p++,p>11&&(p=0,d++),U+="</tbody></table>"+(f?"</div>"+(o[0]>0&&I==o[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),F+=U}B+=F}return B+=x+($.ui.ie6&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,B},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u){var a=this._get(e,"changeMonth"),f=this._get(e,"changeYear"),l=this._get(e,"showMonthAfterYear"),c='<div class="ui-datepicker-title">',h="";if(s||!a)h+='<span class="ui-datepicker-month">'+o[t]+"</span>";else{var p=r&&r.getFullYear()==n,d=i&&i.getFullYear()==n;h+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var v=0;v<12;v++)(!p||v>=r.getMonth())&&(!d||v<=i.getMonth())&&(h+='<option value="'+v+'"'+(v==t?' selected="selected"':"")+">"+u[v]+"</option>");h+="</select>"}l||(c+=h+(s||!a||!f?"&#xa0;":""));if(!e.yearshtml){e.yearshtml="";if(s||!f)c+='<span class="ui-datepicker-year">'+n+"</span>";else{var m=this._get(e,"yearRange").split(":"),g=(new Date).getFullYear(),y=function(e){var t=e.match(/c[+-].*/)?n+parseInt(e.substring(1),10):e.match(/[+-].*/)?g+parseInt(e,10):parseInt(e,10);return isNaN(t)?g:t},b=y(m[0]),w=Math.max(b,y(m[1]||""));b=r?Math.max(b,r.getFullYear()):b,w=i?Math.min(w,i.getFullYear()):w,e.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';for(;b<=w;b++)e.yearshtml+='<option value="'+b+'"'+(b==n?' selected="selected"':"")+">"+b+"</option>";e.yearshtml+="</select>",c+=e.yearshtml,e.yearshtml=null}}return c+=this._get(e,"yearSuffix"),l&&(c+=(s||!a||!f?"&#xa0;":"")+h),c+="</div>",c},_adjustInstDate:function(e,t,n){var r=e.drawYear+(n=="Y"?t:0),i=e.drawMonth+(n=="M"?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+(n=="D"?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),(n=="M"||n=="Y")&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&t<n?n:t;return i=r&&i>r?r:i,i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return(new Date(e,t,1)).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(t<0?t:i[0]*i[1]),1));return t<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max");return(!n||t.getTime()>=n.getTime())&&(!r||t.getTime()<=r.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find(document.body).append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return typeof e!="string"||e!="isDisabled"&&e!="getDate"&&e!="widget"?e=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){typeof e=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.9.1",window["DP_jQuery_"+dpuuid]=$})(jQuery);(function(e,t){var n="ui-dialog ui-widget ui-widget-content ui-corner-all ",r={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.9.1",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;n<0&&e(this).css("top",t.top-n)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),typeof this.originalTitle!="string"&&(this.originalTitle=""),this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.options.title=this.options.title||this.originalTitle;var t=this,r=this.options,i=r.title||"&#160;",s,o,u,a,f;s=(this.uiDialog=e("<div>")).addClass(n+r.dialogClass).css({display:"none",outline:0,zIndex:r.zIndex}).attr("tabIndex",-1).keydown(function(n){r.closeOnEscape&&!n.isDefaultPrevented()&&n.keyCode&&n.keyCode===e.ui.keyCode.ESCAPE&&(t.close(n),n.preventDefault())}).mousedown(function(e){t.moveToTop(!1,e)}).appendTo("body"),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(s),o=(this.uiDialogTitlebar=e("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").bind("mousedown",function(){s.focus()}).prependTo(s),u=e("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(e){e.preventDefault(),t.close(e)}).appendTo(o),(this.uiDialogTitlebarCloseText=e("<span>")).addClass("ui-icon ui-icon-closethick").text(r.closeText).appendTo(u),a=e("<span>").uniqueId().addClass("ui-dialog-title").html(i).prependTo(o),f=(this.uiDialogButtonPane=e("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),(this.uiButtonSet=e("<div>")).addClass("ui-dialog-buttonset").appendTo(f),s.attr({role:"dialog","aria-labelledby":a.attr("id")}),o.find("*").add(o).disableSelection(),this._hoverable(u),this._focusable(u),r.draggable&&e.fn.draggable&&this._makeDraggable(),r.resizable&&e.fn.resizable&&this._makeResizable(),this._createButtons(r.buttons),this._isOpen=!1,e.fn.bgiframe&&s.bgiframe(),this._on(s,{keydown:function(t){if(!r.modal||t.keyCode!==e.ui.keyCode.TAB)return;var n=e(":tabbable",s),i=n.filter(":first"),o=n.filter(":last");if(t.target===o[0]&&!t.shiftKey)return i.focus(1),!1;if(t.target===i[0]&&t.shiftKey)return o.focus(1),!1}})},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var e,t=this.oldPosition;this.overlay&&this.overlay.destroy(),this.uiDialog.hide(),this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},close:function(t){var n=this,r,i;if(!this._isOpen)return;if(!1===this._trigger("beforeClose",t))return;return this._isOpen=!1,this.overlay&&this.overlay.destroy(),this.options.hide?this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",t)}):(this.uiDialog.hide(),this._trigger("close",t)),e.ui.dialog.overlay.resize(),this.options.modal&&(r=0,e(".ui-dialog").each(function(){this!==n.uiDialog[0]&&(i=e(this).css("z-index"),isNaN(i)||(r=Math.max(r,i)))}),e.ui.dialog.maxZ=r),this},isOpen:function(){return this._isOpen},moveToTop:function(t,n){var r=this.options,i;return r.modal&&!t||!r.stack&&!r.modal?this._trigger("focus",n):(r.zIndex>e.ui.dialog.maxZ&&(e.ui.dialog.maxZ=r.zIndex),this.overlay&&(e.ui.dialog.maxZ+=1,e.ui.dialog.overlay.maxZ=e.ui.dialog.maxZ,this.overlay.$el.css("z-index",e.ui.dialog.overlay.maxZ)),i={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()},e.ui.dialog.maxZ+=1,this.uiDialog.css("z-index",e.ui.dialog.maxZ),this.element.attr(i),this._trigger("focus",n),this)},open:function(){if(this._isOpen)return;var t,n=this.options,r=this.uiDialog;return this._size(),this._position(n.position),r.show(n.show),this.overlay=n.modal?new e.ui.dialog.overlay(this):null,this.moveToTop(!0),t=this.element.find(":tabbable"),t.length||(t=this.uiDialogButtonPane.find(":tabbable"),t.length||(t=r)),t.eq(0).focus(),this._isOpen=!0,this._trigger("open"),this},_createButtons:function(t){var n=this,r=!1;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),typeof t=="object"&&t!==null&&e.each(t,function(){return!(r=!0)}),r?(e.each(t,function(t,r){r=e.isFunction(r)?{click:r,text:t}:r;var i=e("<button type='button'></button>").attr(r,!0).unbind("click").click(function(){r.click.apply(n.element[0],arguments)}).appendTo(n.uiButtonSet);e.fn.button&&i.button()}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function r(e){return{position:e.position,offset:e.offset}}var t=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,i){e(this).addClass("ui-dialog-dragging"),t._trigger("dragStart",n,r(i))},drag:function(e,n){t._trigger("drag",e,r(n))},stop:function(i,s){n.position=[s.position.left-t.document.scrollLeft(),s.position.top-t.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),t._trigger("dragStop",i,r(s)),e.ui.dialog.overlay.resize()}})},_makeResizable:function(n){function u(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}n=n===t?this.options.resizable:n;var r=this,i=this.options,s=this.uiDialog.css("position"),o=typeof n=="string"?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:o,start:function(t,n){e(this).addClass("ui-dialog-resizing"),r._trigger("resizeStart",t,u(n))},resize:function(e,t){r._trigger("resize",e,u(t))},stop:function(t,n){e(this).removeClass("ui-dialog-resizing"),i.height=e(this).height(),i.width=e(this).width(),r._trigger("resizeStop",t,u(n)),e.ui.dialog.overlay.resize()}}).css("position",s).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var e=this.options;return e.height==="auto"?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(t){var n=[],r=[0,0],i;if(t){if(typeof t=="string"||typeof t=="object"&&"0"in t)n=t.split?t.split(" "):[t[0],t[1]],n.length===1&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(r[e]=n[e],n[e]=t)}),t={my:n[0]+(r[0]<0?r[0]:"+"+r[0])+" "+n[1]+(r[1]<0?r[1]:"+"+r[1]),at:n.join(" ")};t=e.extend({},e.ui.dialog.prototype.options.position,t)}else t=e.ui.dialog.prototype.options.position;i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.position(t),i||this.uiDialog.hide()},_setOptions:function(t){var n=this,s={},o=!1;e.each(t,function(e,t){n._setOption(e,t),e in r&&(o=!0),e in i&&(s[e]=t)}),o&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",s)},_setOption:function(t,r){var i,s,o=this.uiDialog;switch(t){case"buttons":this._createButtons(r);break;case"closeText":this.uiDialogTitlebarCloseText.text(""+r);break;case"dialogClass":o.removeClass(this.options.dialogClass).addClass(n+r);break;case"disabled":r?o.addClass("ui-dialog-disabled"):o.removeClass("ui-dialog-disabled");break;case"draggable":i=o.is(":data(draggable)"),i&&!r&&o.draggable("destroy"),!i&&r&&this._makeDraggable();break;case"position":this._position(r);break;case"resizable":s=o.is(":data(resizable)"),s&&!r&&o.resizable("destroy"),s&&typeof r=="string"&&o.resizable("option","handles",r),!s&&r!==!1&&this._makeResizable(r);break;case"title":e(".ui-dialog-title",this.uiDialogTitlebar).html(""+(r||"&#160;"))}this._super(t,r)},_size:function(){var t,n,r,i=this.options,s=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),i.minWidth>i.width&&(i.width=i.minWidth),t=this.uiDialog.css({height:"auto",width:i.width}).outerHeight(),n=Math.max(0,i.minHeight-t),i.height==="auto"?e.support.minHeight?this.element.css({minHeight:n,height:"auto"}):(this.uiDialog.show(),r=this.element.css("height","auto").height(),s||this.uiDialog.hide(),this.element.height(Math.max(r,n))):this.element.height(Math.max(i.height-t,0)),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),e.extend(e.ui.dialog,{uuid:0,maxZ:0,getTitleId:function(e){var t=e.attr("id");return t||(this.uuid+=1,t=this.uuid),"ui-dialog-title-"+t},overlay:function(t){this.$el=e.ui.dialog.overlay.create(t)}}),e.extend(e.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:e.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(e){return e+".dialog-overlay"}).join(" "),create:function(t){this.instances.length===0&&(setTimeout(function(){e.ui.dialog.overlay.instances.length&&e(document).bind(e.ui.dialog.overlay.events,function(t){if(e(t.target).zIndex()<e.ui.dialog.overlay.maxZ)return!1})},1),e(window).bind("resize.dialog-overlay",e.ui.dialog.overlay.resize));var n=this.oldInstances.pop()||e("<div>").addClass("ui-widget-overlay");return e(document).bind("keydown.dialog-overlay",function(r){var i=e.ui.dialog.overlay.instances;i.length!==0&&i[i.length-1]===n&&t.options.closeOnEscape&&!r.isDefaultPrevented()&&r.keyCode&&r.keyCode===e.ui.keyCode.ESCAPE&&(t.close(r),r.preventDefault())}),n.appendTo(document.body).css({width:this.width(),height:this.height()}),e.fn.bgiframe&&n.bgiframe(),this.instances.push(n),n},destroy:function(t){var n=e.inArray(t,this.instances),r=0;n!==-1&&this.oldInstances.push(this.instances.splice(n,1)[0]),this.instances.length===0&&e([document,window]).unbind(".dialog-overlay"),t.height(0).width(0).remove(),e.each(this.instances,function(){r=Math.max(r,this.css("z-index"))}),this.maxZ=r},height:function(){var t,n;return e.ui.ie?(t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),n=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),t<n?e(window).height()+"px":t+"px"):e(document).height()+"px"},width:function(){var t,n;return e.ui.ie?(t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),n=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),t<n?e(window).width()+"px":t+"px"):e(document).width()+"px"},resize:function(){var t=e([]);e.each(e.ui.dialog.overlay.instances,function(){t=t.add(this)}),t.css({width:0,height:0}).css({width:e.ui.dialog.overlay.width(),height:e.ui.dialog.overlay.height()})}}),e.extend(e.ui.dialog.overlay.prototype,{destroy:function(){e.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);(function(e,t){var n=!1;e.widget("ui.menu",{version:"1.9.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var r=e(t.target).closest(".ui-menu-item");!n&&r.not(".ui-state-disabled").length&&(n=!0,this.select(t),r.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&this.active.parents(".ui-menu").length===1&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var n=e(t.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,n)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),n=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function a(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,r,i,s,o,u=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:u=!1,r=this.previousFilter||"",i=String.fromCharCode(t.keyCode),s=!1,clearTimeout(this.filterTimer),i===r?s=!0:i=r+i,o=new RegExp("^"+a(i),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())}),n=s&&n.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):n,n.length||(i=String.fromCharCode(t.keyCode),o=new RegExp("^"+a(i),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())})),n.length?(this.focus(t,n),n.length>1?(this.previousFilter=i,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}u&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n=this.options.icons.submenu,r=this.element.find(this.options.menus+":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"});t=r.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-—–\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),r.each(function(){var t=e(this),r=t.prev("a"),i=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);r.attr("aria-haspopup","true").prepend(i),t.attr("aria-labelledby",r.attr("id"))}),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(e,t){var n,r;this.blur(e,e&&e.type==="focus"),this._scrollIntoView(t),this.active=t.first(),r=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",r.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&e.type==="keydown"?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".ui-menu"),n.length&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,r,i,s,o,u;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,r=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-n-r,s=this.activeMenu.scrollTop(),o=this.activeMenu.height(),u=t.height(),i<0?this.activeMenu.scrollTop(s+i):i+u>o&&this.activeMenu.scrollTop(s+i-o+u))},blur:function(e,t){t||clearTimeout(this.timer);if(!this.active)return;this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active})},_startOpening:function(e){clearTimeout(this.timer);if(e.attr("aria-hidden")!=="true")return;this.timer=this._delay(function(){this._close(),this._open(e)},this.delay)},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var r=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));r.length||(r=this.element),this._close(r),this.blur(t),this.activeMenu=r},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var r;this.active&&(e==="first"||e==="last"?r=this.active[e==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1):r=this.active[e+"All"](".ui-menu-item").eq(0));if(!r||!r.length||!this.active)r=this.activeMenu.children(".ui-menu-item")[t]();this.focus(n,r)},nextPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isLastItem())return;this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r-i<0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())},previousPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isFirstItem())return;this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r+i>0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)}})})(jQuery);(function(e,t){e.widget("ui.progressbar",{version:"1.9.1",options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return e===t?this._value():(this._setOption("value",e),this)},_setOption:function(e,t){e==="value"&&(this.options.value=t,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),this._super(e,t)},_value:function(){var e=this.options.value;return typeof e!="number"&&(e=0),Math.min(this.options.max,Math.max(this.min,e))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var e=this.value(),t=this._percentage();this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),this.valueDiv.toggle(e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(t.toFixed(0)+"%"),this.element.attr("aria-valuenow",e)}})})(jQuery);(function(e,t){var n=5;e.widget("ui.slider",e.ui.mouse,{version:"1.9.1",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var t,r,i=this.options,s=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",u=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"+(i.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),i.range&&(i.range===!0&&(i.values||(i.values=[this._valueMin(),this._valueMin()]),i.values.length&&i.values.length!==2&&(i.values=[i.values[0],i.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(i.range==="min"||i.range==="max"?" ui-slider-range-"+i.range:""))),r=i.values&&i.values.length||1;for(t=s.length;t<r;t++)u.push(o);this.handles=s.add(e(u.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).mouseenter(function(){i.disabled||e(this).addClass("ui-state-hover")}).mouseleave(function(){e(this).removeClass("ui-state-hover")}).focus(function(){i.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)}),this._on(this.handles,{keydown:function(t){var r,i,s,o,u=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:t.preventDefault();if(!this._keySliding){this._keySliding=!0,e(t.target).addClass("ui-state-active"),r=this._start(t,u);if(r===!1)return}}o=this.options.step,this.options.values&&this.options.values.length?i=s=this.values(u):i=s=this.value();switch(t.keyCode){case e.ui.keyCode.HOME:s=this._valueMin();break;case e.ui.keyCode.END:s=this._valueMax();break;case e.ui.keyCode.PAGE_UP:s=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax())return;s=this._trimAlignValue(i+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin())return;s=this._trimAlignValue(i-o)}this._slide(t,u,s)},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,r,i,s,o,u,a,f,l=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},r=this._normValueFromMouse(n),i=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(r-l.values(t));i>n&&(i=n,s=e(this),o=t)}),c.range===!0&&this.values(1)===c.min&&(o+=1,s=e(this.handles[o])),u=this._start(t,o),u===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,s.addClass("ui-state-active").focus(),a=s.offset(),f=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=f?{left:0,top:0}:{left:t.pageX-a.left-s.width()/2,top:t.pageY-a.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,r),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,r,i,s;return this.orientation==="horizontal"?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),r=n/t,r>1&&(r=1),r<0&&(r=0),this.orientation==="vertical"&&(r=1-r),i=this._valueMax()-this._valueMin(),s=this._valueMin()+r*i,this._trimAlignValue(s)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var r,i,s;this.options.values&&this.options.values.length?(r=this.values(t?0:1),this.options.values.length===2&&this.options.range===!0&&(t===0&&n>r||t===1&&n<r)&&(n=r),n!==this.values(t)&&(i=this.values(),i[t]=n,s=this._trigger("slide",e,{handle:this.handles[t],value:n,values:i}),r=this.values(t?0:1),s!==!1&&this.values(t,n,!0))):n!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:n}),s!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("change",e,n)}},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(t,n){var r,i,s;if(arguments.length>1){this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t);return}if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();r=this.options.values,i=arguments[0];for(s=0;s<r.length;s+=1)r[s]=this._trimAlignValue(i[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,n){var r,i=0;e.isArray(this.options.values)&&(i=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments);switch(t){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(r=0;r<i;r+=1)this._change(null,r);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e),e},_values:function(e){var t,n,r;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t),t;n=this.options.values.slice();for(r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(n[r]);return n},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,r=e-n;return Math.abs(n)*2>=t&&(r+=n>0?t:-t),parseFloat(r.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,n,r,i,s,o=this.options.range,u=this.options,a=this,f=this._animateOff?!1:u.animate,l={};this.options.values&&this.options.values.length?this.handles.each(function(r){n=(a.values(r)-a._valueMin())/(a._valueMax()-a._valueMin())*100,l[a.orientation==="horizontal"?"left":"bottom"]=n+"%",e(this).stop(1,1)[f?"animate":"css"](l,u.animate),a.options.range===!0&&(a.orientation==="horizontal"?(r===0&&a.range.stop(1,1)[f?"animate":"css"]({left:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:u.animate})):(r===0&&a.range.stop(1,1)[f?"animate":"css"]({bottom:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:u.animate}))),t=n}):(r=this.value(),i=this._valueMin(),s=this._valueMax(),n=s!==i?(r-i)/(s-i)*100:0,l[this.orientation==="horizontal"?"left":"bottom"]=n+"%",this.handle.stop(1,1)[f?"animate":"css"](l,u.animate),o==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[f?"animate":"css"]({width:n+"%"},u.animate),o==="max"&&this.orientation==="horizontal"&&this.range[f?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:u.animate}),o==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[f?"animate":"css"]({height:n+"%"},u.animate),o==="max"&&this.orientation==="vertical"&&this.range[f?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:u.animate}))}})})(jQuery);(function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.9.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},n=this.element;return e.each(["min","max","step"],function(e,r){var i=n.attr(r);i!==undefined&&i.length&&(t[r]=i)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e)},mousewheel:function(e,t){if(!t)return;if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()},"mousedown .ui-spinner-button":function(t){function r(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n}))}var n;n=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),r.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,r.call(this)});if(this._start(t)===!1)return;this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(!e(t.currentTarget).hasClass("ui-state-active"))return;if(this._start(t)===!1)return!1;this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(e.height()*.5)&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var n=this.options,r=e.ui.keyCode;switch(t.keyCode){case r.UP:return this._repeat(null,1,t),!0;case r.DOWN:return this._repeat(null,-1,t),!0;case r.PAGE_UP:return this._repeat(null,n.page,t),!0;case r.PAGE_DOWN:return this._repeat(null,-n.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(e){return!this.spinning&&this._trigger("start",e)===!1?!1:(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(e,t,n){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,n)},e),this._spin(t*this.options.step,n)},_spin:function(e,t){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+e*this._increment(this.counter));if(!this.spinning||this._trigger("spin",t,{value:n})!==!1)this._value(n),this.counter++},_increment:function(t){var n=this.options.incremental;return n?e.isFunction(n)?n(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return this.options.min!==null&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),n=t.indexOf(".");return n===-1?0:t.length-n-1},_adjustValue:function(e){var t,n,r=this.options;return t=r.min!==null?r.min:0,n=e-t,n=Math.round(n/r.step)*r.step,e=t+n,e=parseFloat(e.toFixed(this._precision())),r.max!==null&&e>r.max?r.max:r.min!==null&&e<r.min?r.min:e},_stop:function(e){if(!this.spinning)return;clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e)},_setOption:function(e,t){if(e==="culture"||e==="numberFormat"){var n=this._parse(this.element.val());this.options[e]=t,this.element.val(this._format(n));return}(e==="max"||e==="min"||e==="step")&&typeof t=="string"&&(t=this._parse(t)),this._super(e,t),e==="disabled"&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(e){this._super(e),this._value(this.element.val())}),_parse:function(e){return typeof e=="string"&&e!==""&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),e===""||isNaN(e)?null:e},_format:function(e){return e===""?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var n;e!==""&&(n=this._parse(e),n!==null&&(t||(n=this._adjustValue(n)),e=this._format(n))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._spin((e||1)*this.options.step)},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._spin((e||1)*-this.options.step)},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){if(!arguments.length)return this._parse(this.element.val());t(this._value).call(this,e)},widget:function(){return this.uiSpinner}})})(jQuery);(function(e,t){function i(){return++n}function s(e){return e.hash.length>1&&e.href.replace(r,"")===location.href.replace(r,"")}var n=0,r=/#.*$/;e.widget("ui.tabs",{version:"1.9.1",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,n=this.options,r=n.active,i=location.hash.substring(1);this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",n.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs();if(r===null){i&&this.tabs.each(function(t,n){if(e(n).attr("aria-controls")===i)return r=t,!1}),r===null&&(r=this.tabs.index(this.tabs.filter(".ui-tabs-active")));if(r===null||r===-1)r=this.tabs.length?0:!1}r!==!1&&(r=this.tabs.index(this.tabs.eq(r)),r===-1&&(r=n.collapsible?!1:0)),n.active=r,!n.collapsible&&n.active===!1&&this.anchors.length&&(n.active=0),e.isArray(n.disabled)&&(n.disabled=e.unique(n.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.options.active!==!1&&this.anchors.length?this.active=this._findActive(this.options.active):this.active=e(),this._refresh(),this.active.length&&this.load(n.active)},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var n=e(this.document[0].activeElement).closest("li"),r=this.tabs.index(n),i=!0;if(this._handlePageNav(t))return;switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:r++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:i=!1,r--;break;case e.ui.keyCode.END:r=this.anchors.length-1;break;case e.ui.keyCode.HOME:r=0;break;case e.ui.keyCode.SPACE:t.preventDefault(),clearTimeout(this.activating),this._activate(r);return;case e.ui.keyCode.ENTER:t.preventDefault(),clearTimeout(this.activating),this._activate(r===this.options.active?!1:r);return;default:return}t.preventDefault(),clearTimeout(this.activating),r=this._focusNextTab(r,i),t.ctrlKey||(n.attr("aria-selected","false"),this.tabs.eq(r).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",r)},this.delay))},_panelKeydown:function(t){if(this._handlePageNav(t))return;t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){if(t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(t,n){function i(){return t>r&&(t=0),t<0&&(t=r),t}var r=this.tabs.length-1;while(e.inArray(i(),this.options.disabled)!==-1)t=n?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){if(e==="active"){this._activate(t);return}if(e==="disabled"){this._setupDisabled(t);return}this._super(e,t),e==="collapsible"&&(this.element.toggleClass("ui-tabs-collapsible",t),!t&&this.options.active===!1&&this._activate(0)),e==="event"&&this._setupEvents(t),e==="heightStyle"&&this._setupHeightStyle(t)},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,n=this.tablist.children(":has(a[href])");t.disabled=e.map(n.filter(".ui-state-disabled"),function(e){return n.index(e)}),this._processTabs(),t.active===!1||!this.anchors.length?(t.active=!1,this.active=e()):this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(n,r){var i,o,u,a=e(r).uniqueId().attr("id"),f=e(r).closest("li"),l=f.attr("aria-controls");s(r)?(i=r.hash,o=t.element.find(t._sanitizeSelector(i))):(u=t._tabId(f),i="#"+u,o=t.element.find(i),o.length||(o=t._createPanel(u),o.insertAfter(t.panels[n-1]||t.tablist)),o.attr("aria-live","polite")),o.length&&(t.panels=t.panels.add(o)),l&&f.data("ui-tabs-aria-controls",l),f.attr({"aria-controls":i.substring(1),"aria-labelledby":a}),o.attr("aria-labelledby",a)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var n=0,r;r=this.tabs[n];n++)t===!0||e.inArray(n,t)!==-1?e(r).addClass("ui-state-disabled").attr("aria-disabled","true"):e(r).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var n={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var n,r,i=this.element.parent();t==="fill"?(e.support.minHeight||(r=i.css("overflow"),i.css("overflow","hidden")),n=i.height(),this.element.siblings(":visible").each(function(){var t=e(this),r=t.css("position");if(r==="absolute"||r==="fixed")return;n-=t.outerHeight(!0)}),r&&i.css("overflow",r),this.element.children().not(this.panels).each(function(){n-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):t==="auto"&&(n=0,this.panels.each(function(){n=Math.max(n,e(this).height("").height())}).height(n))},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),s=i.closest("li"),o=s[0]===r[0],u=o&&n.collapsible,a=u?e():this._getPanelForTab(s),f=r.length?this._getPanelForTab(r):e(),l={oldTab:r,oldPanel:f,newTab:u?e():s,newPanel:a};t.preventDefault();if(s.hasClass("ui-state-disabled")||s.hasClass("ui-tabs-loading")||this.running||o&&!n.collapsible||this._trigger("beforeActivate",t,l)===!1)return;n.active=u?!1:this.tabs.index(s),this.active=o?e():s,this.xhr&&this.xhr.abort(),!f.length&&!a.length&&e.error("jQuery UI Tabs: Mismatching fragment identifier."),a.length&&this.load(this.tabs.index(s),t),this._toggle(t,l)},_toggle:function(t,n){function o(){r.running=!1,r._trigger("activate",t,n)}function u(){n.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),i.length&&r.options.show?r._show(i,r.options.show,o):(i.show(),o())}var r=this,i=n.newPanel,s=n.oldPanel;this.running=!0,s.length&&this.options.hide?this._hide(s,this.options.hide,function(){n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),u()}):(n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s.hide(),u()),s.attr({"aria-expanded":"false","aria-hidden":"true"}),n.oldTab.attr("aria-selected","false"),i.length&&s.length?n.oldTab.attr("tabIndex",-1):i.length&&this.tabs.filter(function(){return e(this).attr("tabIndex")===0}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}),n.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var n,r=this._findActive(t);if(r[0]===this.active[0])return;r.length||(r=this.active),n=r.find(".ui-tabs-anchor")[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop})},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return typeof e=="string"&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeData("href.tabs").removeData("load.tabs").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),n=t.data("ui-tabs-aria-controls");n?t.attr("aria-controls",n):t.removeAttr("aria-controls")}),this.options.heightStyle!=="content"&&this.panels.css("height","")},enable:function(n){var r=this.options.disabled;if(r===!1)return;n===t?r=!1:(n=this._getIndex(n),e.isArray(r)?r=e.map(r,function(e){return e!==n?e:null}):r=e.map(this.tabs,function(e,t){return t!==n?t:null})),this._setupDisabled(r)},disable:function(n){var r=this.options.disabled;if(r===!0)return;if(n===t)r=!0;else{n=this._getIndex(n);if(e.inArray(n,r)!==-1)return;e.isArray(r)?r=e.merge([n],r).sort():r=[n]}this._setupDisabled(r)},load:function(t,n){t=this._getIndex(t);var r=this,i=this.tabs.eq(t),o=i.find(".ui-tabs-anchor"),u=this._getPanelForTab(i),a={tab:i,panel:u};if(s(o[0]))return;this.xhr=e.ajax(this._ajaxSettings(o,n,a)),this.xhr&&this.xhr.statusText!=="canceled"&&(i.addClass("ui-tabs-loading"),u.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){u.html(e),r._trigger("load",n,a)},1)}).complete(function(e,t){setTimeout(function(){t==="abort"&&r.panels.stop(!1,!0),i.removeClass("ui-tabs-loading"),u.removeAttr("aria-busy"),e===r.xhr&&delete r.xhr},1)}))},_ajaxSettings:function(t,n,r){var i=this;return{url:t.attr("href"),beforeSend:function(t,s){return i._trigger("beforeLoad",n,e.extend({jqXHR:t,ajaxSettings:s},r))}}},_getPanelForTab:function(t){var n=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+n))}}),e.uiBackCompat!==!1&&(e.ui.tabs.prototype._ui=function(e,t){return{tab:e,panel:t,index:this.anchors.index(e)}},e.widget("ui.tabs",e.ui.tabs,{url:function(e,t){this.anchors.eq(e).attr("href",t)}}),e.widget("ui.tabs",e.ui.tabs,{options:{ajaxOptions:null,cache:!1},_create:function(){this._super();var t=this;this._on({tabsbeforeload:function(n,r){if(e.data(r.tab[0],"cache.tabs")){n.preventDefault();return}r.jqXHR.success(function(){t.options.cache&&e.data(r.tab[0],"cache.tabs",!0)})}})},_ajaxSettings:function(t,n,r){var i=this.options.ajaxOptions;return e.extend({},i,{error:function(e,t){try{i.error(e,t,r.tab.closest("li").index(),r.tab[0])}catch(n){}}},this._superApply(arguments))},_setOption:function(e,t){e==="cache"&&t===!1&&this.anchors.removeData("cache.tabs"),this._super(e,t)},_destroy:function(){this.anchors.removeData("cache.tabs"),this._super()},url:function(e){this.anchors.eq(e).removeData("cache.tabs"),this._superApply(arguments)}}),e.widget("ui.tabs",e.ui.tabs,{abort:function(){this.xhr&&this.xhr.abort()}}),e.widget("ui.tabs",e.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},_create:function(){this._super(),this._on({tabsbeforeload:function(e,t){if(e.target!==this.element[0]||!this.options.spinner)return;var n=t.tab.find("span"),r=n.html();n.html(this.options.spinner),t.jqXHR.complete(function(){n.html(r)})}})}}),e.widget("ui.tabs",e.ui.tabs,{options:{enable:null,disable:null},enable:function(t){var n=this.options,r;if(t&&n.disabled===!0||e.isArray(n.disabled)&&e.inArray(t,n.disabled)!==-1)r=!0;this._superApply(arguments),r&&this._trigger("enable",null,this._ui(this.anchors[t],this.panels[t]))},disable:function(t){var n=this.options,r;if(t&&n.disabled===!1||e.isArray(n.disabled)&&e.inArray(t,n.disabled)===-1)r=!0;this._superApply(arguments),r&&this._trigger("disable",null,this._ui(this.anchors[t],this.panels[t]))}}),e.widget("ui.tabs",e.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},add:function(n,r,i){i===t&&(i=this.anchors.length);var s,o,u=this.options,a=e(u.tabTemplate.replace(/#\{href\}/g,n).replace(/#\{label\}/g,r)),f=n.indexOf("#")?this._tabId(a):n.replace("#","");return a.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",!0),a.attr("aria-controls",f),s=i>=this.tabs.length,o=this.element.find("#"+f),o.length||(o=this._createPanel(f),s?i>0?o.insertAfter(this.panels.eq(-1)):o.appendTo(this.element):o.insertBefore(this.panels[i])),o.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide(),s?a.appendTo(this.tablist):a.insertBefore(this.tabs[i]),u.disabled=e.map(u.disabled,function(e){return e>=i?++e:e}),this.refresh(),this.tabs.length===1&&u.active===!1&&this.option("active",0),this._trigger("add",null,this._ui(this.anchors[i],this.panels[i])),this},remove:function(t){t=this._getIndex(t);var n=this.options,r=this.tabs.eq(t).remove(),i=this._getPanelForTab(r).remove();return r.hasClass("ui-tabs-active")&&this.anchors.length>2&&this._activate(t+(t+1<this.anchors.length?1:-1)),n.disabled=e.map(e.grep(n.disabled,function(e){return e!==t}),function(e){return e>=t?--e:e}),this.refresh(),this._trigger("remove",null,this._ui(r.find("a")[0],i[0])),this}}),e.widget("ui.tabs",e.ui.tabs,{length:function(){return this.anchors.length}}),e.widget("ui.tabs",e.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(t){var n=t.is("li")?t.find("a[href]"):t;return n=n[0],e(n).closest("li").attr("aria-controls")||n.title&&n.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF\-]/g,"")||this.options.idPrefix+i()}}),e.widget("ui.tabs",e.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:function(t){return e(this.options.panelTemplate).attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)}}),e.widget("ui.tabs",e.ui.tabs,{_create:function(){var e=this.options;e.active===null&&e.selected!==t&&(e.active=e.selected===-1?!1:e.selected),this._super(),e.selected=e.active,e.selected===!1&&(e.selected=-1)},_setOption:function(e,t){if(e!=="selected")return this._super(e,t);var n=this.options;this._super("active",t===-1?!1:t),n.selected=n.active,n.selected===!1&&(n.selected=-1)},_eventHandler:function(){this._superApply(arguments),this.options.selected=this.options.active,this.options.selected===!1&&(this.options.selected=-1)}}),e.widget("ui.tabs",e.ui.tabs,{options:{show:null,select:null},_create:function(){this._super(),this.options.active!==!1&&this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]))},_trigger:function(e,t,n){var r=this._superApply(arguments);return r?(e==="beforeActivate"&&n.newTab.length?r=this._super("select",t,{tab:n.newTab.find(".ui-tabs-anchor")[0],panel:n.newPanel[0],index:n.newTab.closest("li").index()}):e==="activate"&&n.newTab.length&&(r=this._super("show",t,{tab:n.newTab.find(".ui-tabs-anchor")[0],panel:n.newPanel[0],index:n.newTab.closest("li").index()})),r):!1}}),e.widget("ui.tabs",e.ui.tabs,{select:function(e){e=this._getIndex(e);if(e===-1){if(!this.options.collapsible||this.options.selected===-1)return;e=this.options.selected}this.anchors.eq(e).trigger(this.options.event+this.eventNamespace)}}),function(){var t=0;e.widget("ui.tabs",e.ui.tabs,{options:{cookie:null},_create:function(){var e=this.options,t;e.active==null&&e.cookie&&(t=parseInt(this._cookie(),10),t===-1&&(t=!1),e.active=t),this._super()},_cookie:function(n){var r=[this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++t)];return arguments.length&&(r.push(n===!1?-1:n),r.push(this.options.cookie)),e.cookie.apply(null,r)},_refresh:function(){this._super(),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_eventHandler:function(){this._superApply(arguments),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_destroy:function(){this._super(),this.options.cookie&&this._cookie(null,this.options.cookie)}})}(),e.widget("ui.tabs",e.ui.tabs,{_trigger:function(t,n,r){var i=e.extend({},r);return t==="load"&&(i.panel=i.panel[0],i.tab=i.tab.find(".ui-tabs-anchor")[0]),this._super(t,n,i)}}),e.widget("ui.tabs",e.ui.tabs,{options:{fx:null},_getFx:function(){var t,n,r=this.options.fx;return r&&(e.isArray(r)?(t=r[0],n=r[1]):t=n=r),r?{show:n,hide:t}:null},_toggle:function(e,t){function o(){n.running=!1,n._trigger("activate",e,t)}function u(){t.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),r.length&&s.show?r.animate(s.show,s.show.duration,function(){o()}):(r.show(),o())}var n=this,r=t.newPanel,i=t.oldPanel,s=this._getFx();if(!s)return this._super(e,t);n.running=!0,i.length&&s.hide?i.animate(s.hide,s.hide.duration,function(){t.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),u()}):(t.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),i.hide(),u())}}))})(jQuery);(function(e){function n(t,n){var r=(t.attr("aria-describedby")||"").split(/\s+/);r.push(n),t.data("ui-tooltip-id",n).attr("aria-describedby",e.trim(r.join(" ")))}function r(t){var n=t.data("ui-tooltip-id"),r=(t.attr("aria-describedby")||"").split(/\s+/),i=e.inArray(n,r);i!==-1&&r.splice(i,1),t.removeData("ui-tooltip-id"),r=e.trim(r.join(" ")),r?t.attr("aria-describedby",r):t.removeAttr("aria-describedby")}var t=0;e.widget("ui.tooltip",{version:"1.9.1",options:{content:function(){return e(this).attr("title")},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flipfit"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,n){var r=this;if(t==="disabled"){this[n?"_disable":"_enable"](),this.options[t]=n;return}this._super(t,n),t==="content"&&e.each(this.tooltips,function(e,t){r._updateContent(t)})},_disable:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur");i.target=i.currentTarget=r[0],t.close(i,!0)}),this.element.find(this.options.items).andSelf().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).andSelf().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var n=this,r=e(t?t.target:this.element).closest(this.options.items);if(!r.length)return;if(this.options.track&&r.data("ui-tooltip-id")){this._find(r).position(e.extend({of:r},this.options.position)),this._off(this.document,"mousemove");return}r.attr("title")&&r.data("ui-tooltip-title",r.attr("title")),r.data("tooltip-open",!0),t&&t.type==="mouseover"&&r.parents().each(function(){var t;e(this).data("tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,n.close(t,!0)),this.title&&(e(this).uniqueId(),n.parents[this.id]={element:this,title:this.title},this.title="")}),this._updateContent(r,t)},_updateContent:function(e,t){var n,r=this.options.content,i=this;if(typeof r=="string")return this._open(t,e,r);n=r.call(e[0],function(n){if(!e.data("tooltip-open"))return;i._delay(function(){this._open(t,e,n)})}),n&&this._open(t,e,n)},_open:function(t,r,i){function f(e){a.of=e;if(s.is(":hidden"))return;s.position(a)}var s,o,u,a=e.extend({},this.options.position);if(!i)return;s=this._find(r);if(s.length){s.find(".ui-tooltip-content").html(i);return}r.is("[title]")&&(t&&t.type==="mouseover"?r.attr("title",""):r.removeAttr("title")),s=this._tooltip(r),n(r,s.attr("id")),s.find(".ui-tooltip-content").html(i),this.options.track&&t&&/^mouse/.test(t.originalEvent.type)?(this._on(this.document,{mousemove:f}),f(t)):s.position(e.extend({of:r},this.options.position)),s.hide(),this._show(s,this.options.show),this.options.show&&this.options.show.delay&&(u=setInterval(function(){s.is(":visible")&&(f(a.of),clearInterval(u))},e.fx.interval)),this._trigger("open",t,{tooltip:s}),o={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var n=e.Event(t);n.currentTarget=r[0],this.close(n,!0)}},remove:function(){this._removeTooltip(s)}};if(!t||t.type==="mouseover")o.mouseleave="close";if(!t||t.type==="focusin")o.focusout="close";this._on(r,o)},close:function(t){var n=this,i=e(t?t.currentTarget:this.element),s=this._find(i);if(this.closing)return;i.data("ui-tooltip-title")&&i.attr("title",i.data("ui-tooltip-title")),r(i),s.stop(!0),this._hide(s,this.options.hide,function(){n._removeTooltip(e(this))}),i.removeData("tooltip-open"),this._off(i,"mouseleave focusout keyup"),i[0]!==this.element[0]&&this._off(i,"remove"),this._off(this.document,"mousemove"),t&&t.type==="mouseleave"&&e.each(this.parents,function(e,t){t.element.title=t.title,delete n.parents[e]}),this.closing=!0,this._trigger("close",t,{tooltip:s}),this.closing=!1},_tooltip:function(n){var r="ui-tooltip-"+t++,i=e("<div>").attr({id:r,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(i),i.appendTo(this.document[0].body),e.fn.bgiframe&&i.bgiframe(),this.tooltips[r]=n,i},_find:function(t){var n=t.data("ui-tooltip-id");return n?e("#"+n):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur");i.target=i.currentTarget=r[0],t.close(i,!0),e("#"+n).remove(),r.data("ui-tooltip-title")&&(r.attr("title",r.data("ui-tooltip-title")),r.removeData("ui-tooltip-title"))})}})})(jQuery);jQuery.effects||function(e,t){var n=e.uiBackCompat!==!1,r="ui-effects-";e.effects={effect:{}},function(t,n){function p(e,t,n){var r=a[t.type]||{};return e==null?n||!t.def?null:t.def:(e=r.floor?~~e:parseFloat(e),isNaN(e)?t.def:r.mod?(e+r.mod)%r.mod:0>e?0:r.max<e?r.max:e)}function d(e){var n=o(),r=n._rgba=[];return e=e.toLowerCase(),h(s,function(t,i){var s,o=i.re.exec(e),a=o&&i.parse(o),f=i.space||"rgba";if(a)return s=n[f](a),n[u[f].cache]=s[u[f].cache],r=n._rgba=s._rgba,!1}),r.length?(r.join()==="0,0,0,0"&&t.extend(r,c.transparent),n):c[e]}function v(e,t,n){return n=(n+1)%1,n*6<1?e+(t-e)*n*6:n*2<1?t:n*3<2?e+(t-e)*(2/3-n)*6:e}var r="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),i=/^([\-+])=\s*(\d+\.?\d*)/,s=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1]*2.55,e[2]*2.55,e[3]*2.55,e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],o=t.Color=function(e,n,r,i){return new t.Color.fn.parse(e,n,r,i)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},a={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},f=o.support={},l=t("<p>")[0],c,h=t.each;l.style.cssText="background-color:rgba(1,1,1,.5)",f.rgba=l.style.backgroundColor.indexOf("rgba")>-1,h(u,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),o.fn=t.extend(o.prototype,{parse:function(r,i,s,a){if(r===n)return this._rgba=[null,null,null,null],this;if(r.jquery||r.nodeType)r=t(r).css(i),i=n;var f=this,l=t.type(r),v=this._rgba=[];i!==n&&(r=[r,i,s,a],l="array");if(l==="string")return this.parse(d(r)||c._default);if(l==="array")return h(u.rgba.props,function(e,t){v[t.idx]=p(r[t.idx],t)}),this;if(l==="object")return r instanceof o?h(u,function(e,t){r[t.cache]&&(f[t.cache]=r[t.cache].slice())}):h(u,function(t,n){var i=n.cache;h(n.props,function(e,t){if(!f[i]&&n.to){if(e==="alpha"||r[e]==null)return;f[i]=n.to(f._rgba)}f[i][t.idx]=p(r[e],t,!0)}),f[i]&&e.inArray(null,f[i].slice(0,3))<0&&(f[i][3]=1,n.from&&(f._rgba=n.from(f[i])))}),this},is:function(e){var t=o(e),n=!0,r=this;return h(u,function(e,i){var s,o=t[i.cache];return o&&(s=r[i.cache]||i.to&&i.to(r._rgba)||[],h(i.props,function(e,t){if(o[t.idx]!=null)return n=o[t.idx]===s[t.idx],n})),n}),n},_space:function(){var e=[],t=this;return h(u,function(n,r){t[r.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var n=o(e),r=n._space(),i=u[r],s=this.alpha()===0?o("transparent"):this,f=s[i.cache]||i.to(s._rgba),l=f.slice();return n=n[i.cache],h(i.props,function(e,r){var i=r.idx,s=f[i],o=n[i],u=a[r.type]||{};if(o===null)return;s===null?l[i]=o:(u.mod&&(o-s>u.mod/2?s+=u.mod:s-o>u.mod/2&&(s-=u.mod)),l[i]=p((o-s)*t+s,r))}),this[r](l)},blend:function(e){if(this._rgba[3]===1)return this;var n=this._rgba.slice(),r=n.pop(),i=o(e)._rgba;return o(t.map(n,function(e,t){return(1-r)*i[t]+r*e}))},toRgbaString:function(){var e="rgba(",n=t.map(this._rgba,function(e,t){return e==null?t>2?1:0:e});return n[3]===1&&(n.pop(),e="rgb("),e+n.join()+")"},toHslaString:function(){var e="hsla(",n=t.map(this.hsla(),function(e,t){return e==null&&(e=t>2?1:0),t&&t<3&&(e=Math.round(e*100)+"%"),e});return n[3]===1&&(n.pop(),e="hsl("),e+n.join()+")"},toHexString:function(e){var n=this._rgba.slice(),r=n.pop();return e&&n.push(~~(r*255)),"#"+t.map(n,function(e){return e=(e||0).toString(16),e.length===1?"0"+e:e}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}}),o.fn.parse.prototype=o.fn,u.hsla.to=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=e[3],s=Math.max(t,n,r),o=Math.min(t,n,r),u=s-o,a=s+o,f=a*.5,l,c;return o===s?l=0:t===s?l=60*(n-r)/u+360:n===s?l=60*(r-t)/u+120:l=60*(t-n)/u+240,f===0||f===1?c=f:f<=.5?c=u/a:c=u/(2-a),[Math.round(l)%360,c,f,i==null?1:i]},u.hsla.from=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/360,n=e[1],r=e[2],i=e[3],s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s;return[Math.round(v(o,s,t+1/3)*255),Math.round(v(o,s,t)*255),Math.round(v(o,s,t-1/3)*255),i]},h(u,function(e,r){var s=r.props,u=r.cache,a=r.to,f=r.from;o.fn[e]=function(e){a&&!this[u]&&(this[u]=a(this._rgba));if(e===n)return this[u].slice();var r,i=t.type(e),l=i==="array"||i==="object"?e:arguments,c=this[u].slice();return h(s,function(e,t){var n=l[i==="object"?e:t.idx];n==null&&(n=c[t.idx]),c[t.idx]=p(n,t)}),f?(r=o(f(c)),r[u]=c,r):o(c)},h(s,function(n,r){if(o.fn[n])return;o.fn[n]=function(s){var o=t.type(s),u=n==="alpha"?this._hsla?"hsla":"rgba":e,a=this[u](),f=a[r.idx],l;return o==="undefined"?f:(o==="function"&&(s=s.call(this,f),o=t.type(s)),s==null&&r.empty?this:(o==="string"&&(l=i.exec(s),l&&(s=f+parseFloat(l[2])*(l[1]==="+"?1:-1))),a[r.idx]=s,this[u](a)))}})}),h(r,function(e,n){t.cssHooks[n]={set:function(e,r){var i,s,u="";if(t.type(r)!=="string"||(i=d(r))){r=o(i||r);if(!f.rgba&&r._rgba[3]!==1){s=n==="backgroundColor"?e.parentNode:e;while((u===""||u==="transparent")&&s&&s.style)try{u=t.css(s,"backgroundColor"),s=s.parentNode}catch(a){}r=r.blend(u&&u!=="transparent"?u:"_default")}r=r.toRgbaString()}try{e.style[n]=r}catch(l){}}},t.fx.step[n]=function(e){e.colorInit||(e.start=o(e.elem,n),e.end=o(e.end),e.colorInit=!0),t.cssHooks[n].set(e.elem,e.start.transition(e.end,e.pos))}}),t.cssHooks.borderColor={expand:function(e){var t={};return h(["Top","Right","Bottom","Left"],function(n,r){t["border"+r+"Color"]=e}),t}},c=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(){var t=this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,n={},r,i;if(t&&t.length&&t[0]&&t[t[0]]){i=t.length;while(i--)r=t[i],typeof t[r]=="string"&&(n[e.camelCase(r)]=t[r])}else for(r in t)typeof t[r]=="string"&&(n[r]=t[r]);return n}function s(t,n){var i={},s,o;for(s in n)o=n[s],t[s]!==o&&!r[s]&&(e.fx.step[s]||!isNaN(parseFloat(o)))&&(i[s]=o);return i}var n=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){if(e.end!=="none"&&!e.setAttr||e.pos===1&&!e.setAttr)jQuery.style(e.elem,n,e.end),e.setAttr=!0}}),e.effects.animateClass=function(t,r,o,u){var a=e.speed(r,o,u);return this.queue(function(){var r=e(this),o=r.attr("class")||"",u,f=a.children?r.find("*").andSelf():r;f=f.map(function(){var t=e(this);return{el:t,start:i.call(this)}}),u=function(){e.each(n,function(e,n){t[n]&&r[n+"Class"](t[n])})},u(),f=f.map(function(){return this.end=i.call(this.el[0]),this.diff=s(this.start,this.end),this}),r.attr("class",o),f=f.map(function(){var t=this,n=e.Deferred(),r=jQuery.extend({},a,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,r),n.promise()}),e.when.apply(e,f.get()).done(function(){u(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),a.complete.call(r[0])})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,n,r,i){return n?e.effects.animateClass.call(this,{add:t},n,r,i):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,n,r,i){return n?e.effects.animateClass.call(this,{remove:t},n,r,i):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(n,r,i,s,o){return typeof r=="boolean"||r===t?i?e.effects.animateClass.call(this,r?{add:n}:{remove:n},i,s,o):this._toggleClass(n,r):e.effects.animateClass.call(this,{toggle:n},r,i,s)},switchClass:function(t,n,r,i,s){return e.effects.animateClass.call(this,{add:n,remove:t},r,i,s)}})}(),function(){function i(t,n,r,i){e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},n==null&&(n={}),e.isFunction(n)&&(i=n,r=null,n={});if(typeof n=="number"||e.fx.speeds[n])i=r,r=n,n={};return e.isFunction(r)&&(i=r,r=null),n&&e.extend(t,n),r=r||n.duration,t.duration=e.fx.off?0:typeof r=="number"?r:r in e.fx.speeds?e.fx.speeds[r]:e.fx.speeds._default,t.complete=i||n.complete,t}function s(t){return!t||typeof t=="number"||e.fx.speeds[t]?!0:typeof t=="string"&&!e.effects.effect[t]?n&&e.effects[t]?!1:!0:!1}e.extend(e.effects,{version:"1.9.1",save:function(e,t){for(var n=0;n<t.length;n++)t[n]!==null&&e.data(r+t[n],e[0].style[t[n]])},restore:function(e,n){var i,s;for(s=0;s<n.length;s++)n[s]!==null&&(i=e.data(r+n[s]),i===t&&(i=""),e.css(n[s],i))},setMode:function(e,t){return t==="toggle"&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,r;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=e[1]/t.width}return{x:r,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},r=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i={width:t.width(),height:t.height()},s=document.activeElement;try{s.id}catch(o){s=document.body}return t.wrap(r),(t[0]===s||e.contains(t[0],s))&&e(s).focus(),r=t.parent(),t.css("position")==="static"?(r.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,r){n[r]=t.css(r),isNaN(parseInt(n[r],10))&&(n[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(i),r.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,r,i){return i=i||{},e.each(n,function(e,n){var s=t.cssUnit(n);s[0]>0&&(i[n]=s[0]*r+s[1])}),i}}),e.fn.extend({effect:function(){function a(n){function u(){e.isFunction(i)&&i.call(r[0]),e.isFunction(n)&&n()}var r=e(this),i=t.complete,s=t.mode;(r.is(":hidden")?s==="hide":s==="show")?u():o.call(r[0],t,u)}var t=i.apply(this,arguments),r=t.mode,s=t.queue,o=e.effects.effect[t.effect],u=!o&&n&&e.effects[t.effect];return e.fx.off||!o&&!u?r?this[r](t.duration,t.complete):this.each(function(){t.complete&&t.complete.call(this)}):o?s===!1?this.each(a):this.queue(s||"fx",a):u.call(this,{options:t,duration:t.duration,callback:t.complete,mode:t.mode})},_show:e.fn.show,show:function(e){if(s(e))return this._show.apply(this,arguments);var t=i.apply(this,arguments);return t.mode="show",this.effect.call(this,t)},_hide:e.fn.hide,hide:function(e){if(s(e))return this._hide.apply(this,arguments);var t=i.apply(this,arguments);return t.mode="hide",this.effect.call(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(s(t)||typeof t=="boolean"||e.isFunction(t))return this.__toggle.apply(this,arguments);var n=i.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)},cssUnit:function(t){var n=this.css(t),r=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(r=[parseFloat(n),t])}),r}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return e===0||e===1?e:-Math.pow(2,8*(e-1))*Math.sin(((e-1)*80-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){var t,n=4;while(e<((t=Math.pow(2,--n))-1)/11);return 1/Math.pow(4,3-n)-7.5625*Math.pow((t*3-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?n(e*2)/2:1-n(e*-2+2)/2}})}()}(jQuery);(function(e,t){var n=/up|down|vertical/,r=/up|left|vertical|horizontal/;e.effects.effect.blind=function(t,i){var s=e(this),o=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(s,t.mode||"hide"),a=t.direction||"up",f=n.test(a),l=f?"height":"width",c=f?"top":"left",h=r.test(a),p={},d=u==="show",v,m,g;s.parent().is(".ui-effects-wrapper")?e.effects.save(s.parent(),o):e.effects.save(s,o),s.show(),v=e.effects.createWrapper(s).css({overflow:"hidden"}),m=v[l](),g=parseFloat(v.css(c))||0,p[l]=d?m:0,h||(s.css(f?"bottom":"right",0).css(f?"top":"left","auto").css({position:"absolute"}),p[c]=d?g:m+g),d&&(v.css(l,0),h||v.css(c,g+m)),v.animate(p,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){u==="hide"&&s.hide(),e.effects.restore(s,o),e.effects.removeWrapper(s),i()}})}})(jQuery);(function(e,t){e.effects.effect.bounce=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"effect"),o=s==="hide",u=s==="show",a=t.direction||"up",f=t.distance,l=t.times||5,c=l*2+(u||o?1:0),h=t.duration/c,p=t.easing,d=a==="up"||a==="down"?"top":"left",v=a==="up"||a==="left",m,g,y,b=r.queue(),w=b.length;(u||o)&&i.push("opacity"),e.effects.save(r,i),r.show(),e.effects.createWrapper(r),f||(f=r[d==="top"?"outerHeight":"outerWidth"]()/3),u&&(y={opacity:1},y[d]=0,r.css("opacity",0).css(d,v?-f*2:f*2).animate(y,h,p)),o&&(f/=Math.pow(2,l-1)),y={},y[d]=0;for(m=0;m<l;m++)g={},g[d]=(v?"-=":"+=")+f,r.animate(g,h,p).animate(y,h,p),f=o?f*2:f/2;o&&(g={opacity:0},g[d]=(v?"-=":"+=")+f,r.animate(g,h,p)),r.queue(function(){o&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}),w>1&&b.splice.apply(b,[1,0].concat(b.splice(w,c+1))),r.dequeue()}})(jQuery);(function(e,t){e.effects.effect.clip=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=t.direction||"vertical",a=u==="vertical",f=a?"height":"width",l=a?"top":"left",c={},h,p,d;e.effects.save(r,i),r.show(),h=e.effects.createWrapper(r).css({overflow:"hidden"}),p=r[0].tagName==="IMG"?h:r,d=p[f](),o&&(p.css(f,0),p.css(l,d/2)),c[f]=o?d:0,c[l]=o?0:d/2,p.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){o||r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}})(jQuery);(function(e,t){e.effects.effect.drop=function(t,n){var r=e(this),i=["position","top","bottom","left","right","opacity","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=t.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left"?"pos":"neg",l={opacity:o?1:0},c;e.effects.save(r,i),r.show(),e.effects.createWrapper(r),c=t.distance||r[a==="top"?"outerHeight":"outerWidth"](!0)/2,o&&r.css("opacity",0).css(a,f==="pos"?-c:c),l[a]=(o?f==="pos"?"+=":"-=":f==="pos"?"-=":"+=")+c,r.animate(l,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}})(jQuery);(function(e,t){e.effects.effect.explode=function(t,n){function y(){c.push(this),c.length===r*i&&b()}function b(){s.css({visibility:"visible"}),e(c).remove(),u||s.hide(),n()}var r=t.pieces?Math.round(Math.sqrt(t.pieces)):3,i=r,s=e(this),o=e.effects.setMode(s,t.mode||"hide"),u=o==="show",a=s.show().css("visibility","hidden").offset(),f=Math.ceil(s.outerWidth()/i),l=Math.ceil(s.outerHeight()/r),c=[],h,p,d,v,m,g;for(h=0;h<r;h++){v=a.top+h*l,g=h-(r-1)/2;for(p=0;p<i;p++)d=a.left+p*f,m=p-(i-1)/2,s.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-p*f,top:-h*l}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:f,height:l,left:d+(u?m*f:0),top:v+(u?g*l:0),opacity:u?0:1}).animate({left:d+(u?0:m*f),top:v+(u?0:g*l),opacity:u?1:0},t.duration||500,t.easing,y)}}})(jQuery);(function(e,t){e.effects.effect.fade=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"toggle");r.animate({opacity:i},{queue:!1,duration:t.duration,easing:t.easing,complete:n})}})(jQuery);(function(e,t){e.effects.effect.fold=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=s==="hide",a=t.size||15,f=/([0-9]+)%/.exec(a),l=!!t.horizFirst,c=o!==l,h=c?["width","height"]:["height","width"],p=t.duration/2,d,v,m={},g={};e.effects.save(r,i),r.show(),d=e.effects.createWrapper(r).css({overflow:"hidden"}),v=c?[d.width(),d.height()]:[d.height(),d.width()],f&&(a=parseInt(f[1],10)/100*v[u?0:1]),o&&d.css(l?{height:0,width:a}:{height:a,width:0}),m[h[0]]=o?v[0]:a,g[h[1]]=o?v[1]:0,d.animate(m,p,t.easing).animate(g,p,t.easing,function(){u&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()})}})(jQuery);(function(e,t){e.effects.effect.highlight=function(t,n){var r=e(this),i=["backgroundImage","backgroundColor","opacity"],s=e.effects.setMode(r,t.mode||"show"),o={backgroundColor:r.css("backgroundColor")};s==="hide"&&(o.opacity=0),e.effects.save(r,i),r.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),n()}})}})(jQuery);(function(e,t){e.effects.effect.pulsate=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"show"),s=i==="show",o=i==="hide",u=s||i==="hide",a=(t.times||5)*2+(u?1:0),f=t.duration/a,l=0,c=r.queue(),h=c.length,p;if(s||!r.is(":visible"))r.css("opacity",0).show(),l=1;for(p=1;p<a;p++)r.animate({opacity:l},f,t.easing),l=1-l;r.animate({opacity:l},f,t.easing),r.queue(function(){o&&r.hide(),n()}),h>1&&c.splice.apply(c,[1,0].concat(c.splice(h,a+1))),r.dequeue()}})(jQuery);(function(e,t){e.effects.effect.puff=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"hide"),s=i==="hide",o=parseInt(t.percent,10)||150,u=o/100,a={height:r.height(),width:r.width()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:i,complete:n,percent:s?o:100,from:s?a:{height:a.height*u,width:a.width*u}}),r.effect(t)},e.effects.effect.scale=function(t,n){var r=e(this),i=e.extend(!0,{},t),s=e.effects.setMode(r,t.mode||"effect"),o=parseInt(t.percent,10)||(parseInt(t.percent,10)===0?0:s==="hide"?0:100),u=t.direction||"both",a=t.origin,f={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()},l={y:u!=="horizontal"?o/100:1,x:u!=="vertical"?o/100:1};i.effect="size",i.queue=!1,i.complete=n,s!=="effect"&&(i.origin=a||["middle","center"],i.restore=!0),i.from=t.from||(s==="show"?{height:0,width:0}:f),i.to={height:f.height*l.y,width:f.width*l.x,outerHeight:f.outerHeight*l.y,outerWidth:f.outerWidth*l.x},i.fade&&(s==="show"&&(i.from.opacity=0,i.to.opacity=1),s==="hide"&&(i.from.opacity=1,i.to.opacity=0)),r.effect(i)},e.effects.effect.size=function(t,n){var r,i,s,o=e(this),u=["position","top","bottom","left","right","width","height","overflow","opacity"],a=["position","top","bottom","left","right","overflow","opacity"],f=["width","height","overflow"],l=["fontSize"],c=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(o,t.mode||"effect"),d=t.restore||p!=="effect",v=t.scale||"both",m=t.origin||["middle","center"],g=o.css("position"),y=d?u:a,b={height:0,width:0};p==="show"&&o.show(),r={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},t.mode==="toggle"&&p==="show"?(o.from=t.to||b,o.to=t.from||r):(o.from=t.from||(p==="show"?b:r),o.to=t.to||(p==="hide"?b:r)),s={from:{y:o.from.height/r.height,x:o.from.width/r.width},to:{y:o.to.height/r.height,x:o.to.width/r.width}};if(v==="box"||v==="both")s.from.y!==s.to.y&&(y=y.concat(c),o.from=e.effects.setTransition(o,c,s.from.y,o.from),o.to=e.effects.setTransition(o,c,s.to.y,o.to)),s.from.x!==s.to.x&&(y=y.concat(h),o.from=e.effects.setTransition(o,h,s.from.x,o.from),o.to=e.effects.setTransition(o,h,s.to.x,o.to));(v==="content"||v==="both")&&s.from.y!==s.to.y&&(y=y.concat(l).concat(f),o.from=e.effects.setTransition(o,l,s.from.y,o.from),o.to=e.effects.setTransition(o,l,s.to.y,o.to)),e.effects.save(o,y),o.show(),e.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),m&&(i=e.effects.getBaseline(m,r),o.from.top=(r.outerHeight-o.outerHeight())*i.y,o.from.left=(r.outerWidth-o.outerWidth())*i.x,o.to.top=(r.outerHeight-o.to.outerHeight)*i.y,o.to.left=(r.outerWidth-o.to.outerWidth)*i.x),o.css(o.from);if(v==="content"||v==="both")c=c.concat(["marginTop","marginBottom"]).concat(l),h=h.concat(["marginLeft","marginRight"]),f=u.concat(c).concat(h),o.find("*[width]").each(function(){var n=e(this),r={height:n.height(),width:n.width()};d&&e.effects.save(n,f),n.from={height:r.height*s.from.y,width:r.width*s.from.x},n.to={height:r.height*s.to.y,width:r.width*s.to.x},s.from.y!==s.to.y&&(n.from=e.effects.setTransition(n,c,s.from.y,n.from),n.to=e.effects.setTransition(n,c,s.to.y,n.to)),s.from.x!==s.to.x&&(n.from=e.effects.setTransition(n,h,s.from.x,n.from),n.to=e.effects.setTransition(n,h,s.to.x,n.to)),n.css(n.from),n.animate(n.to,t.duration,t.easing,function(){d&&e.effects.restore(n,f)})});o.animate(o.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){o.to.opacity===0&&o.css("opacity",o.from.opacity),p==="hide"&&o.hide(),e.effects.restore(o,y),d||(g==="static"?o.css({position:"relative",top:o.to.top,left:o.to.left}):e.each(["top","left"],function(e,t){o.css(t,function(t,n){var r=parseInt(n,10),i=e?o.to.left:o.to.top;return n==="auto"?i+"px":r+i+"px"})})),e.effects.removeWrapper(o),n()}})}})(jQuery);(function(e,t){e.effects.effect.shake=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"effect"),o=t.direction||"left",u=t.distance||20,a=t.times||3,f=a*2+1,l=Math.round(t.duration/f),c=o==="up"||o==="down"?"top":"left",h=o==="up"||o==="left",p={},d={},v={},m,g=r.queue(),y=g.length;e.effects.save(r,i),r.show(),e.effects.createWrapper(r),p[c]=(h?"-=":"+=")+u,d[c]=(h?"+=":"-=")+u*2,v[c]=(h?"-=":"+=")+u*2,r.animate(p,l,t.easing);for(m=1;m<a;m++)r.animate(d,l,t.easing).animate(v,l,t.easing);r.animate(d,l,t.easing).animate(p,l/2,t.easing).queue(function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}),y>1&&g.splice.apply(g,[1,0].concat(g.splice(y,f+1))),r.dequeue()}})(jQuery);(function(e,t){e.effects.effect.slide=function(t,n){var r=e(this),i=["position","top","bottom","left","right","width","height"],s=e.effects.setMode(r,t.mode||"show"),o=s==="show",u=t.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left",l,c={};e.effects.save(r,i),r.show(),l=t.distance||r[a==="top"?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(r).css({overflow:"hidden"}),o&&r.css(a,f?isNaN(l)?"-"+l:-l:l),c[a]=(o?f?"+=":"-=":f?"-=":"+=")+l,r.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}})(jQuery);(function(e,t){e.effects.effect.transfer=function(t,n){var r=e(this),i=e(t.to),s=i.css("position")==="fixed",o=e("body"),u=s?o.scrollTop():0,a=s?o.scrollLeft():0,f=i.offset(),l={top:f.top-u,left:f.left-a,height:i.innerHeight(),width:i.innerWidth()},c=r.offset(),h=e('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(t.className).css({top:c.top-u,left:c.left-a,height:r.innerHeight(),width:r.innerWidth(),position:s?"fixed":"absolute"}).animate(l,t.duration,t.easing,function(){h.remove(),n()})}})(jQuery);
/*!
 * jQuery BBQ: Back Button & Query Library - v1.2.1 - 2/17/2010
 * http://benalman.com/projects/jquery-bbq-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */

// Script: jQuery BBQ: Back Button & Query Library
//
// *Version: 1.2.1, Last updated: 2/17/2010*
// 
// Project Home - http://benalman.com/projects/jquery-bbq-plugin/
// GitHub       - http://github.com/cowboy/jquery-bbq/
// Source       - http://github.com/cowboy/jquery-bbq/raw/master/jquery.ba-bbq.js
// (Minified)   - http://github.com/cowboy/jquery-bbq/raw/master/jquery.ba-bbq.min.js (4.0kb)
// 
// About: License
// 
// Copyright (c) 2010 "Cowboy" Ben Alman,
// Dual licensed under the MIT and GPL licenses.
// http://benalman.com/about/license/
// 
// About: Examples
// 
// These working examples, complete with fully commented code, illustrate a few
// ways in which this plugin can be used.
// 
// Basic AJAX     - http://benalman.com/code/projects/jquery-bbq/examples/fragment-basic/
// Advanced AJAX  - http://benalman.com/code/projects/jquery-bbq/examples/fragment-advanced/
// jQuery UI Tabs - http://benalman.com/code/projects/jquery-bbq/examples/fragment-jquery-ui-tabs/
// Deparam        - http://benalman.com/code/projects/jquery-bbq/examples/deparam/
// 
// About: Support and Testing
// 
// Information about what version or versions of jQuery this plugin has been
// tested with, what browsers it has been tested in, and where the unit tests
// reside (so you can test it yourself).
// 
// jQuery Versions - 1.3.2, 1.4.1, 1.4.2
// Browsers Tested - Internet Explorer 6-8, Firefox 2-3.7, Safari 3-4,
//                   Chrome 4-5, Opera 9.6-10.1.
// Unit Tests      - http://benalman.com/code/projects/jquery-bbq/unit/
// 
// About: Release History
// 
// 1.2.1 - (2/17/2010) Actually fixed the stale window.location Safari bug from
//         <jQuery hashchange event> in BBQ, which was the main reason for the
//         previous release!
// 1.2   - (2/16/2010) Integrated <jQuery hashchange event> v1.2, which fixes a
//         Safari bug, the event can now be bound before DOM ready, and IE6/7
//         page should no longer scroll when the event is first bound. Also
//         added the <jQuery.param.fragment.noEscape> method, and reworked the
//         <hashchange event (BBQ)> internal "add" method to be compatible with
//         changes made to the jQuery 1.4.2 special events API.
// 1.1.1 - (1/22/2010) Integrated <jQuery hashchange event> v1.1, which fixes an
//         obscure IE8 EmulateIE7 meta tag compatibility mode bug.
// 1.1   - (1/9/2010) Broke out the jQuery BBQ event.special <hashchange event>
//         functionality into a separate plugin for users who want just the
//         basic event & back button support, without all the extra awesomeness
//         that BBQ provides. This plugin will be included as part of jQuery BBQ,
//         but also be available separately. See <jQuery hashchange event>
//         plugin for more information. Also added the <jQuery.bbq.removeState>
//         method and added additional <jQuery.deparam> examples.
// 1.0.3 - (12/2/2009) Fixed an issue in IE 6 where location.search and
//         location.hash would report incorrectly if the hash contained the ?
//         character. Also <jQuery.param.querystring> and <jQuery.param.fragment>
//         will no longer parse params out of a URL that doesn't contain ? or #,
//         respectively.
// 1.0.2 - (10/10/2009) Fixed an issue in IE 6/7 where the hidden IFRAME caused
//         a "This page contains both secure and nonsecure items." warning when
//         used on an https:// page.
// 1.0.1 - (10/7/2009) Fixed an issue in IE 8. Since both "IE7" and "IE8
//         Compatibility View" modes erroneously report that the browser
//         supports the native window.onhashchange event, a slightly more
//         robust test needed to be added.
// 1.0   - (10/2/2009) Initial release

(function($,window){
  '$:nomunge'; // Used by YUI compressor.
  
  // Some convenient shortcuts.
  var undefined,
    aps = Array.prototype.slice,
    decode = decodeURIComponent,
    
    // Method / object references.
    jq_param = $.param,
    jq_param_fragment,
    jq_deparam,
    jq_deparam_fragment,
    jq_bbq = $.bbq = $.bbq || {},
    jq_bbq_pushState,
    jq_bbq_getState,
    jq_elemUrlAttr,
    jq_event_special = $.event.special,
    
    // Reused strings.
    str_hashchange = 'hashchange',
    str_querystring = 'querystring',
    str_fragment = 'fragment',
    str_elemUrlAttr = 'elemUrlAttr',
    str_location = 'location',
    str_href = 'href',
    str_src = 'src',
    
    // Reused RegExp.
    re_trim_querystring = /^.*\?|#.*$/g,
    re_trim_fragment = /^.*\#/,
    re_no_escape,
    
    // Used by jQuery.elemUrlAttr.
    elemUrlAttr_cache = {};
  
  // A few commonly used bits, broken out to help reduce minified file size.
  
  function is_string( arg ) {
    return typeof arg === 'string';
  };
  
  // Why write the same function twice? Let's curry! Mmmm, curry..
  
  function curry( func ) {
    var args = aps.call( arguments, 1 );
    
    return function() {
      return func.apply( this, args.concat( aps.call( arguments ) ) );
    };
  };
  
  // Get location.hash (or what you'd expect location.hash to be) sans any
  // leading #. Thanks for making this necessary, Firefox!
  function get_fragment( url ) {
    return url.replace( /^[^#]*#?(.*)$/, '$1' );
  };
  
  // Get location.search (or what you'd expect location.search to be) sans any
  // leading #. Thanks for making this necessary, IE6!
  function get_querystring( url ) {
    return url.replace( /(?:^[^?#]*\?([^#]*).*$)?.*/, '$1' );
  };
  
  // Section: Param (to string)
  // 
  // Method: jQuery.param.querystring
  // 
  // Retrieve the query string from a URL or if no arguments are passed, the
  // current window.location.
  // 
  // Usage:
  // 
  // > jQuery.param.querystring( [ url ] );
  // 
  // Arguments:
  // 
  //  url - (String) A URL containing query string params to be parsed. If url
  //    is not passed, the current window.location is used.
  // 
  // Returns:
  // 
  //  (String) The parsed query string, with any leading "?" removed.
  //
  
  // Method: jQuery.param.querystring (build url)
  // 
  // Merge a URL, with or without pre-existing query string params, plus any
  // object, params string or URL containing query string params into a new URL.
  // 
  // Usage:
  // 
  // > jQuery.param.querystring( url, params [, merge_mode ] );
  // 
  // Arguments:
  // 
  //  url - (String) A valid URL for params to be merged into. This URL may
  //    contain a query string and/or fragment (hash).
  //  params - (String) A params string or URL containing query string params to
  //    be merged into url.
  //  params - (Object) A params object to be merged into url.
  //  merge_mode - (Number) Merge behavior defaults to 0 if merge_mode is not
  //    specified, and is as-follows:
  // 
  //    * 0: params in the params argument will override any query string
  //         params in url.
  //    * 1: any query string params in url will override params in the params
  //         argument.
  //    * 2: params argument will completely replace any query string in url.
  // 
  // Returns:
  // 
  //  (String) Either a params string with urlencoded data or a URL with a
  //    urlencoded query string in the format 'a=b&c=d&e=f'.
  
  // Method: jQuery.param.fragment
  // 
  // Retrieve the fragment (hash) from a URL or if no arguments are passed, the
  // current window.location.
  // 
  // Usage:
  // 
  // > jQuery.param.fragment( [ url ] );
  // 
  // Arguments:
  // 
  //  url - (String) A URL containing fragment (hash) params to be parsed. If
  //    url is not passed, the current window.location is used.
  // 
  // Returns:
  // 
  //  (String) The parsed fragment (hash) string, with any leading "#" removed.
  
  // Method: jQuery.param.fragment (build url)
  // 
  // Merge a URL, with or without pre-existing fragment (hash) params, plus any
  // object, params string or URL containing fragment (hash) params into a new
  // URL.
  // 
  // Usage:
  // 
  // > jQuery.param.fragment( url, params [, merge_mode ] );
  // 
  // Arguments:
  // 
  //  url - (String) A valid URL for params to be merged into. This URL may
  //    contain a query string and/or fragment (hash).
  //  params - (String) A params string or URL containing fragment (hash) params
  //    to be merged into url.
  //  params - (Object) A params object to be merged into url.
  //  merge_mode - (Number) Merge behavior defaults to 0 if merge_mode is not
  //    specified, and is as-follows:
  // 
  //    * 0: params in the params argument will override any fragment (hash)
  //         params in url.
  //    * 1: any fragment (hash) params in url will override params in the
  //         params argument.
  //    * 2: params argument will completely replace any query string in url.
  // 
  // Returns:
  // 
  //  (String) Either a params string with urlencoded data or a URL with a
  //    urlencoded fragment (hash) in the format 'a=b&c=d&e=f'.
  
  function jq_param_sub( is_fragment, get_func, url, params, merge_mode ) {
    var result,
      qs,
      matches,
      url_params,
      hash;
    
    if ( params !== undefined ) {
      // Build URL by merging params into url string.
      
      // matches[1] = url part that precedes params, not including trailing ?/#
      // matches[2] = params, not including leading ?/#
      // matches[3] = if in 'querystring' mode, hash including leading #, otherwise ''
      matches = url.match( is_fragment ? /^([^#]*)\#?(.*)$/ : /^([^#?]*)\??([^#]*)(#?.*)/ );
      
      // Get the hash if in 'querystring' mode, and it exists.
      hash = matches[3] || '';
      
      if ( merge_mode === 2 && is_string( params ) ) {
        // If merge_mode is 2 and params is a string, merge the fragment / query
        // string into the URL wholesale, without converting it into an object.
        qs = params.replace( is_fragment ? re_trim_fragment : re_trim_querystring, '' );
        
      } else {
        // Convert relevant params in url to object.
        url_params = jq_deparam( matches[2] );
        
        params = is_string( params )
          
          // Convert passed params string into object.
          ? jq_deparam[ is_fragment ? str_fragment : str_querystring ]( params )
          
          // Passed params object.
          : params;
        
        qs = merge_mode === 2 ? params                              // passed params replace url params
          : merge_mode === 1  ? $.extend( {}, params, url_params )  // url params override passed params
          : $.extend( {}, url_params, params );                     // passed params override url params
        
        // Convert params object to a string.
        qs = jq_param( qs );
        
        // Unescape characters specified via $.param.noEscape. Since only hash-
        // history users have requested this feature, it's only enabled for
        // fragment-related params strings.
        if ( is_fragment ) {
          qs = qs.replace( re_no_escape, decode );
        }
      }
      
      // Build URL from the base url, querystring and hash. In 'querystring'
      // mode, ? is only added if a query string exists. In 'fragment' mode, #
      // is always added.
      result = matches[1] + ( is_fragment ? '#' : qs || !matches[1] ? '?' : '' ) + qs + hash;
      
    } else {
      // If URL was passed in, parse params from URL string, otherwise parse
      // params from window.location.
      result = get_func( url !== undefined ? url : window[ str_location ][ str_href ] );
    }
    
    return result;
  };
  
  jq_param[ str_querystring ]                  = curry( jq_param_sub, 0, get_querystring );
  jq_param[ str_fragment ] = jq_param_fragment = curry( jq_param_sub, 1, get_fragment );
  
  // Method: jQuery.param.fragment.noEscape
  // 
  // Specify characters that will be left unescaped when fragments are created
  // or merged using <jQuery.param.fragment>, or when the fragment is modified
  // using <jQuery.bbq.pushState>. This option only applies to serialized data
  // object fragments, and not set-as-string fragments. Does not affect the
  // query string. Defaults to ",/" (comma, forward slash).
  // 
  // Note that this is considered a purely aesthetic option, and will help to
  // create URLs that "look pretty" in the address bar or bookmarks, without
  // affecting functionality in any way. That being said, be careful to not
  // unescape characters that are used as delimiters or serve a special
  // purpose, such as the "#?&=+" (octothorpe, question mark, ampersand,
  // equals, plus) characters.
  // 
  // Usage:
  // 
  // > jQuery.param.fragment.noEscape( [ chars ] );
  // 
  // Arguments:
  // 
  //  chars - (String) The characters to not escape in the fragment. If
  //    unspecified, defaults to empty string (escape all characters).
  // 
  // Returns:
  // 
  //  Nothing.
  
  jq_param_fragment.noEscape = function( chars ) {
    chars = chars || '';
    var arr = $.map( chars.split(''), encodeURIComponent );
    re_no_escape = new RegExp( arr.join('|'), 'g' );
  };
  
  // A sensible default. These are the characters people seem to complain about
  // "uglifying up the URL" the most.
  jq_param_fragment.noEscape( ',/' );
  
  // Section: Deparam (from string)
  // 
  // Method: jQuery.deparam
  // 
  // Deserialize a params string into an object, optionally coercing numbers,
  // booleans, null and undefined values; this method is the counterpart to the
  // internal jQuery.param method.
  // 
  // Usage:
  // 
  // > jQuery.deparam( params [, coerce ] );
  // 
  // Arguments:
  // 
  //  params - (String) A params string to be parsed.
  //  coerce - (Boolean) If true, coerces any numbers or true, false, null, and
  //    undefined to their actual value. Defaults to false if omitted.
  // 
  // Returns:
  // 
  //  (Object) An object representing the deserialized params string.
  
  $.deparam = jq_deparam = function( params, coerce ) {
    var obj = {},
      coerce_types = { 'true': !0, 'false': !1, 'null': null };
    
    // Iterate over all name=value pairs.
    $.each( params.replace( /\+/g, ' ' ).split( '&' ), function(j,v){
      var param = v.split( '=' ),
        key = decode( param[0] ),
        val,
        cur = obj,
        i = 0,
        
        // If key is more complex than 'foo', like 'a[]' or 'a[b][c]', split it
        // into its component parts.
        keys = key.split( '][' ),
        keys_last = keys.length - 1;
      
      // If the first keys part contains [ and the last ends with ], then []
      // are correctly balanced.
      if ( /\[/.test( keys[0] ) && /\]$/.test( keys[ keys_last ] ) ) {
        // Remove the trailing ] from the last keys part.
        keys[ keys_last ] = keys[ keys_last ].replace( /\]$/, '' );
        
        // Split first keys part into two parts on the [ and add them back onto
        // the beginning of the keys array.
        keys = keys.shift().split('[').concat( keys );
        
        keys_last = keys.length - 1;
      } else {
        // Basic 'foo' style key.
        keys_last = 0;
      }
      
      // Are we dealing with a name=value pair, or just a name?
      if ( param.length === 2 ) {
        val = decode( param[1] );
        
        // Coerce values.
        if ( coerce ) {
          val = val && !isNaN(val)            ? +val              // number
            : val === 'undefined'             ? undefined         // undefined
            : coerce_types[val] !== undefined ? coerce_types[val] // true, false, null
            : val;                                                // string
        }
        
        if ( keys_last ) {
          // Complex key, build deep object structure based on a few rules:
          // * The 'cur' pointer starts at the object top-level.
          // * [] = array push (n is set to array length), [n] = array if n is 
          //   numeric, otherwise object.
          // * If at the last keys part, set the value.
          // * For each keys part, if the current level is undefined create an
          //   object or array based on the type of the next keys part.
          // * Move the 'cur' pointer to the next level.
          // * Rinse & repeat.
          for ( ; i <= keys_last; i++ ) {
            key = keys[i] === '' ? cur.length : keys[i];
            cur = cur[key] = i < keys_last
              ? cur[key] || ( keys[i+1] && isNaN( keys[i+1] ) ? {} : [] )
              : val;
          }
          
        } else {
          // Simple key, even simpler rules, since only scalars and shallow
          // arrays are allowed.
          
          if ( $.isArray( obj[key] ) ) {
            // val is already an array, so push on the next value.
            obj[key].push( val );
            
          } else if ( obj[key] !== undefined ) {
            // val isn't an array, but since a second value has been specified,
            // convert val into an array.
            obj[key] = [ obj[key], val ];
            
          } else {
            // val is a scalar.
            obj[key] = val;
          }
        }
        
      } else if ( key ) {
        // No value was defined, so set something meaningful.
        obj[key] = coerce
          ? undefined
          : '';
      }
    });
    
    return obj;
  };
  
  // Method: jQuery.deparam.querystring
  // 
  // Parse the query string from a URL or the current window.location,
  // deserializing it into an object, optionally coercing numbers, booleans,
  // null and undefined values.
  // 
  // Usage:
  // 
  // > jQuery.deparam.querystring( [ url ] [, coerce ] );
  // 
  // Arguments:
  // 
  //  url - (String) An optional params string or URL containing query string
  //    params to be parsed. If url is omitted, the current window.location
  //    is used.
  //  coerce - (Boolean) If true, coerces any numbers or true, false, null, and
  //    undefined to their actual value. Defaults to false if omitted.
  // 
  // Returns:
  // 
  //  (Object) An object representing the deserialized params string.
  
  // Method: jQuery.deparam.fragment
  // 
  // Parse the fragment (hash) from a URL or the current window.location,
  // deserializing it into an object, optionally coercing numbers, booleans,
  // null and undefined values.
  // 
  // Usage:
  // 
  // > jQuery.deparam.fragment( [ url ] [, coerce ] );
  // 
  // Arguments:
  // 
  //  url - (String) An optional params string or URL containing fragment (hash)
  //    params to be parsed. If url is omitted, the current window.location
  //    is used.
  //  coerce - (Boolean) If true, coerces any numbers or true, false, null, and
  //    undefined to their actual value. Defaults to false if omitted.
  // 
  // Returns:
  // 
  //  (Object) An object representing the deserialized params string.
  
  function jq_deparam_sub( is_fragment, url_or_params, coerce ) {
    if ( url_or_params === undefined || typeof url_or_params === 'boolean' ) {
      // url_or_params not specified.
      coerce = url_or_params;
      url_or_params = jq_param[ is_fragment ? str_fragment : str_querystring ]();
    } else {
      url_or_params = is_string( url_or_params )
        ? url_or_params.replace( is_fragment ? re_trim_fragment : re_trim_querystring, '' )
        : url_or_params;
    }
    
    return jq_deparam( url_or_params, coerce );
  };
  
  jq_deparam[ str_querystring ]                    = curry( jq_deparam_sub, 0 );
  jq_deparam[ str_fragment ] = jq_deparam_fragment = curry( jq_deparam_sub, 1 );
  
  // Section: Element manipulation
  // 
  // Method: jQuery.elemUrlAttr
  // 
  // Get the internal "Default URL attribute per tag" list, or augment the list
  // with additional tag-attribute pairs, in case the defaults are insufficient.
  // 
  // In the <jQuery.fn.querystring> and <jQuery.fn.fragment> methods, this list
  // is used to determine which attribute contains the URL to be modified, if
  // an "attr" param is not specified.
  // 
  // Default Tag-Attribute List:
  // 
  //  a      - href
  //  base   - href
  //  iframe - src
  //  img    - src
  //  input  - src
  //  form   - action
  //  link   - href
  //  script - src
  // 
  // Usage:
  // 
  // > jQuery.elemUrlAttr( [ tag_attr ] );
  // 
  // Arguments:
  // 
  //  tag_attr - (Object) An object containing a list of tag names and their
  //    associated default attribute names in the format { tag: 'attr', ... } to
  //    be merged into the internal tag-attribute list.
  // 
  // Returns:
  // 
  //  (Object) An object containing all stored tag-attribute values.
  
  // Only define function and set defaults if function doesn't already exist, as
  // the urlInternal plugin will provide this method as well.
  $[ str_elemUrlAttr ] || ($[ str_elemUrlAttr ] = function( obj ) {
    return $.extend( elemUrlAttr_cache, obj );
  })({
    a: str_href,
    base: str_href,
    iframe: str_src,
    img: str_src,
    input: str_src,
    form: 'action',
    link: str_href,
    script: str_src
  });
  
  jq_elemUrlAttr = $[ str_elemUrlAttr ];
  
  // Method: jQuery.fn.querystring
  // 
  // Update URL attribute in one or more elements, merging the current URL (with
  // or without pre-existing query string params) plus any params object or
  // string into a new URL, which is then set into that attribute. Like
  // <jQuery.param.querystring (build url)>, but for all elements in a jQuery
  // collection.
  // 
  // Usage:
  // 
  // > jQuery('selector').querystring( [ attr, ] params [, merge_mode ] );
  // 
  // Arguments:
  // 
  //  attr - (String) Optional name of an attribute that will contain a URL to
  //    merge params or url into. See <jQuery.elemUrlAttr> for a list of default
  //    attributes.
  //  params - (Object) A params object to be merged into the URL attribute.
  //  params - (String) A URL containing query string params, or params string
  //    to be merged into the URL attribute.
  //  merge_mode - (Number) Merge behavior defaults to 0 if merge_mode is not
  //    specified, and is as-follows:
  //    
  //    * 0: params in the params argument will override any params in attr URL.
  //    * 1: any params in attr URL will override params in the params argument.
  //    * 2: params argument will completely replace any query string in attr
  //         URL.
  // 
  // Returns:
  // 
  //  (jQuery) The initial jQuery collection of elements, but with modified URL
  //  attribute values.
  
  // Method: jQuery.fn.fragment
  // 
  // Update URL attribute in one or more elements, merging the current URL (with
  // or without pre-existing fragment/hash params) plus any params object or
  // string into a new URL, which is then set into that attribute. Like
  // <jQuery.param.fragment (build url)>, but for all elements in a jQuery
  // collection.
  // 
  // Usage:
  // 
  // > jQuery('selector').fragment( [ attr, ] params [, merge_mode ] );
  // 
  // Arguments:
  // 
  //  attr - (String) Optional name of an attribute that will contain a URL to
  //    merge params into. See <jQuery.elemUrlAttr> for a list of default
  //    attributes.
  //  params - (Object) A params object to be merged into the URL attribute.
  //  params - (String) A URL containing fragment (hash) params, or params
  //    string to be merged into the URL attribute.
  //  merge_mode - (Number) Merge behavior defaults to 0 if merge_mode is not
  //    specified, and is as-follows:
  //    
  //    * 0: params in the params argument will override any params in attr URL.
  //    * 1: any params in attr URL will override params in the params argument.
  //    * 2: params argument will completely replace any fragment (hash) in attr
  //         URL.
  // 
  // Returns:
  // 
  //  (jQuery) The initial jQuery collection of elements, but with modified URL
  //  attribute values.
  
  function jq_fn_sub( mode, force_attr, params, merge_mode ) {
    if ( !is_string( params ) && typeof params !== 'object' ) {
      // force_attr not specified.
      merge_mode = params;
      params = force_attr;
      force_attr = undefined;
    }
    
    return this.each(function(){
      var that = $(this),
        
        // Get attribute specified, or default specified via $.elemUrlAttr.
        attr = force_attr || jq_elemUrlAttr()[ ( this.nodeName || '' ).toLowerCase() ] || '',
        
        // Get URL value.
        url = attr && that.attr( attr ) || '';
      
      // Update attribute with new URL.
      that.attr( attr, jq_param[ mode ]( url, params, merge_mode ) );
    });
    
  };
  
  $.fn[ str_querystring ] = curry( jq_fn_sub, str_querystring );
  $.fn[ str_fragment ]    = curry( jq_fn_sub, str_fragment );
  
  // Section: History, hashchange event
  // 
  // Method: jQuery.bbq.pushState
  // 
  // Adds a 'state' into the browser history at the current position, setting
  // location.hash and triggering any bound <hashchange event> callbacks
  // (provided the new state is different than the previous state).
  // 
  // If no arguments are passed, an empty state is created, which is just a
  // shortcut for jQuery.bbq.pushState( {}, 2 ).
  // 
  // Usage:
  // 
  // > jQuery.bbq.pushState( [ params [, merge_mode ] ] );
  // 
  // Arguments:
  // 
  //  params - (String) A serialized params string or a hash string beginning
  //    with # to merge into location.hash.
  //  params - (Object) A params object to merge into location.hash.
  //  merge_mode - (Number) Merge behavior defaults to 0 if merge_mode is not
  //    specified (unless a hash string beginning with # is specified, in which
  //    case merge behavior defaults to 2), and is as-follows:
  // 
  //    * 0: params in the params argument will override any params in the
  //         current state.
  //    * 1: any params in the current state will override params in the params
  //         argument.
  //    * 2: params argument will completely replace current state.
  // 
  // Returns:
  // 
  //  Nothing.
  // 
  // Additional Notes:
  // 
  //  * Setting an empty state may cause the browser to scroll.
  //  * Unlike the fragment and querystring methods, if a hash string beginning
  //    with # is specified as the params agrument, merge_mode defaults to 2.
  
  jq_bbq.pushState = jq_bbq_pushState = function( params, merge_mode ) {
    if ( is_string( params ) && /^#/.test( params ) && merge_mode === undefined ) {
      // Params string begins with # and merge_mode not specified, so completely
      // overwrite window.location.hash.
      merge_mode = 2;
    }
    
    var has_args = params !== undefined,
      // Merge params into window.location using $.param.fragment.
      url = jq_param_fragment( window[ str_location ][ str_href ],
        has_args ? params : {}, has_args ? merge_mode : 2 );
    
    // Set new window.location.href. If hash is empty, use just # to prevent
    // browser from reloading the page. Note that Safari 3 & Chrome barf on
    // location.hash = '#'.
    window[ str_location ][ str_href ] = url + ( /#/.test( url ) ? '' : '#' );
  };
  
  // Method: jQuery.bbq.getState
  // 
  // Retrieves the current 'state' from the browser history, parsing
  // location.hash for a specific key or returning an object containing the
  // entire state, optionally coercing numbers, booleans, null and undefined
  // values.
  // 
  // Usage:
  // 
  // > jQuery.bbq.getState( [ key ] [, coerce ] );
  // 
  // Arguments:
  // 
  //  key - (String) An optional state key for which to return a value.
  //  coerce - (Boolean) If true, coerces any numbers or true, false, null, and
  //    undefined to their actual value. Defaults to false.
  // 
  // Returns:
  // 
  //  (Anything) If key is passed, returns the value corresponding with that key
  //    in the location.hash 'state', or undefined. If not, an object
  //    representing the entire 'state' is returned.
  
  jq_bbq.getState = jq_bbq_getState = function( key, coerce ) {
    return key === undefined || typeof key === 'boolean'
      ? jq_deparam_fragment( key ) // 'key' really means 'coerce' here
      : jq_deparam_fragment( coerce )[ key ];
  };
  
  // Method: jQuery.bbq.removeState
  // 
  // Remove one or more keys from the current browser history 'state', creating
  // a new state, setting location.hash and triggering any bound
  // <hashchange event> callbacks (provided the new state is different than
  // the previous state).
  // 
  // If no arguments are passed, an empty state is created, which is just a
  // shortcut for jQuery.bbq.pushState( {}, 2 ).
  // 
  // Usage:
  // 
  // > jQuery.bbq.removeState( [ key [, key ... ] ] );
  // 
  // Arguments:
  // 
  //  key - (String) One or more key values to remove from the current state,
  //    passed as individual arguments.
  //  key - (Array) A single array argument that contains a list of key values
  //    to remove from the current state.
  // 
  // Returns:
  // 
  //  Nothing.
  // 
  // Additional Notes:
  // 
  //  * Setting an empty state may cause the browser to scroll.
  
  jq_bbq.removeState = function( arr ) {
    var state = {};
    
    // If one or more arguments is passed..
    if ( arr !== undefined ) {
      
      // Get the current state.
      state = jq_bbq_getState();
      
      // For each passed key, delete the corresponding property from the current
      // state.
      $.each( $.isArray( arr ) ? arr : arguments, function(i,v){
        delete state[ v ];
      });
    }
    
    // Set the state, completely overriding any existing state.
    jq_bbq_pushState( state, 2 );
  };
  
  // Event: hashchange event (BBQ)
  // 
  // Usage in jQuery 1.4 and newer:
  // 
  // In jQuery 1.4 and newer, the event object passed into any hashchange event
  // callback is augmented with a copy of the location.hash fragment at the time
  // the event was triggered as its event.fragment property. In addition, the
  // event.getState method operates on this property (instead of location.hash)
  // which allows this fragment-as-a-state to be referenced later, even after
  // window.location may have changed.
  // 
  // Note that event.fragment and event.getState are not defined according to
  // W3C (or any other) specification, but will still be available whether or
  // not the hashchange event exists natively in the browser, because of the
  // utility they provide.
  // 
  // The event.fragment property contains the output of <jQuery.param.fragment>
  // and the event.getState method is equivalent to the <jQuery.bbq.getState>
  // method.
  // 
  // > $(window).bind( 'hashchange', function( event ) {
  // >   var hash_str = event.fragment,
  // >     param_obj = event.getState(),
  // >     param_val = event.getState( 'param_name' ),
  // >     param_val_coerced = event.getState( 'param_name', true );
  // >   ...
  // > });
  // 
  // Usage in jQuery 1.3.2:
  // 
  // In jQuery 1.3.2, the event object cannot to be augmented as in jQuery 1.4+,
  // so the fragment state isn't bound to the event object and must instead be
  // parsed using the <jQuery.param.fragment> and <jQuery.bbq.getState> methods.
  // 
  // > $(window).bind( 'hashchange', function( event ) {
  // >   var hash_str = $.param.fragment(),
  // >     param_obj = $.bbq.getState(),
  // >     param_val = $.bbq.getState( 'param_name' ),
  // >     param_val_coerced = $.bbq.getState( 'param_name', true );
  // >   ...
  // > });
  // 
  // Additional Notes:
  // 
  // * Due to changes in the special events API, jQuery BBQ v1.2 or newer is
  //   required to enable the augmented event object in jQuery 1.4.2 and newer.
  // * See <jQuery hashchange event> for more detailed information.
  
  jq_event_special[ str_hashchange ] = $.extend( jq_event_special[ str_hashchange ], {
    
    // Augmenting the event object with the .fragment property and .getState
    // method requires jQuery 1.4 or newer. Note: with 1.3.2, everything will
    // work, but the event won't be augmented)
    add: function( handleObj ) {
      var old_handler;
      
      function new_handler(e) {
        // e.fragment is set to the value of location.hash (with any leading #
        // removed) at the time the event is triggered.
        var hash = e[ str_fragment ] = jq_param_fragment();
        
        // e.getState() works just like $.bbq.getState(), but uses the
        // e.fragment property stored on the event object.
        e.getState = function( key, coerce ) {
          return key === undefined || typeof key === 'boolean'
            ? jq_deparam( hash, key ) // 'key' really means 'coerce' here
            : jq_deparam( hash, coerce )[ key ];
        };
        
        old_handler.apply( this, arguments );
      };
      
      // This may seem a little complicated, but it normalizes the special event
      // .add method between jQuery 1.4/1.4.1 and 1.4.2+
      if ( $.isFunction( handleObj ) ) {
        // 1.4, 1.4.1
        old_handler = handleObj;
        return new_handler;
      } else {
        // 1.4.2+
        old_handler = handleObj.handler;
        handleObj.handler = new_handler;
      }
    }
    
  });
  
})(jQuery,this);

/*!
 * jQuery hashchange event - v1.2 - 2/11/2010
 * http://benalman.com/projects/jquery-hashchange-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */

// Script: jQuery hashchange event
//
// *Version: 1.2, Last updated: 2/11/2010*
// 
// Project Home - http://benalman.com/projects/jquery-hashchange-plugin/
// GitHub       - http://github.com/cowboy/jquery-hashchange/
// Source       - http://github.com/cowboy/jquery-hashchange/raw/master/jquery.ba-hashchange.js
// (Minified)   - http://github.com/cowboy/jquery-hashchange/raw/master/jquery.ba-hashchange.min.js (1.1kb)
// 
// About: License
// 
// Copyright (c) 2010 "Cowboy" Ben Alman,
// Dual licensed under the MIT and GPL licenses.
// http://benalman.com/about/license/
// 
// About: Examples
// 
// This working example, complete with fully commented code, illustrate one way
// in which this plugin can be used.
// 
// hashchange event - http://benalman.com/code/projects/jquery-hashchange/examples/hashchange/
// 
// About: Support and Testing
// 
// Information about what version or versions of jQuery this plugin has been
// tested with, what browsers it has been tested in, and where the unit tests
// reside (so you can test it yourself).
// 
// jQuery Versions - 1.3.2, 1.4.1, 1.4.2
// Browsers Tested - Internet Explorer 6-8, Firefox 2-3.7, Safari 3-4, Chrome, Opera 9.6-10.1.
// Unit Tests      - http://benalman.com/code/projects/jquery-hashchange/unit/
// 
// About: Known issues
// 
// While this jQuery hashchange event implementation is quite stable and robust,
// there are a few unfortunate browser bugs surrounding expected hashchange
// event-based behaviors, independent of any JavaScript window.onhashchange
// abstraction. See the following examples for more information:
// 
// Chrome: Back Button - http://benalman.com/code/projects/jquery-hashchange/examples/bug-chrome-back-button/
// Firefox: Remote XMLHttpRequest - http://benalman.com/code/projects/jquery-hashchange/examples/bug-firefox-remote-xhr/
// WebKit: Back Button in an Iframe - http://benalman.com/code/projects/jquery-hashchange/examples/bug-webkit-hash-iframe/
// Safari: Back Button from a different domain - http://benalman.com/code/projects/jquery-hashchange/examples/bug-safari-back-from-diff-domain/
// 
// About: Release History
// 
// 1.2   - (2/11/2010) Fixed a bug where coming back to a page using this plugin
//         from a page on another domain would cause an error in Safari 4. Also,
//         IE6/7 Iframe is now inserted after the body (this actually works),
//         which prevents the page from scrolling when the event is first bound.
//         Event can also now be bound before DOM ready, but it won't be usable
//         before then in IE6/7.
// 1.1   - (1/21/2010) Incorporated document.documentMode test to fix IE8 bug
//         where browser version is incorrectly reported as 8.0, despite
//         inclusion of the X-UA-Compatible IE=EmulateIE7 meta tag.
// 1.0   - (1/9/2010) Initial Release. Broke out the jQuery BBQ event.special
//         window.onhashchange functionality into a separate plugin for users
//         who want just the basic event & back button support, without all the
//         extra awesomeness that BBQ provides. This plugin will be included as
//         part of jQuery BBQ, but also be available separately.

(function($,window,undefined){
  '$:nomunge'; // Used by YUI compressor.
  
  // Method / object references.
  var fake_onhashchange,
    jq_event_special = $.event.special,
    
    // Reused strings.
    str_location = 'location',
    str_hashchange = 'hashchange',
    str_href = 'href',
    
    // IE6/7 specifically need some special love when it comes to back-button
    // support, so let's do a little browser sniffing..
    browser = $.browser,
    mode = document.documentMode,
    is_old_ie = browser.msie && ( mode === undefined || mode < 8 ),
    
    // Does the browser support window.onhashchange? Test for IE version, since
    // IE8 incorrectly reports this when in "IE7" or "IE8 Compatibility View"!
    supports_onhashchange = 'on' + str_hashchange in window && !is_old_ie;
  
  // Get location.hash (or what you'd expect location.hash to be) sans any
  // leading #. Thanks for making this necessary, Firefox!
  function get_fragment( url ) {
    url = url || window[ str_location ][ str_href ];
    return url.replace( /^[^#]*#?(.*)$/, '$1' );
  };
  
  // Property: jQuery.hashchangeDelay
  // 
  // The numeric interval (in milliseconds) at which the <hashchange event>
  // polling loop executes. Defaults to 100.
  
  $[ str_hashchange + 'Delay' ] = 100;
  
  // Event: hashchange event
  // 
  // Fired when location.hash changes. In browsers that support it, the native
  // window.onhashchange event is used (IE8, FF3.6), otherwise a polling loop is
  // initialized, running every <jQuery.hashchangeDelay> milliseconds to see if
  // the hash has changed. In IE 6 and 7, a hidden Iframe is created to allow
  // the back button and hash-based history to work.
  // 
  // Usage:
  // 
  // > $(window).bind( 'hashchange', function(e) {
  // >   var hash = location.hash;
  // >   ...
  // > });
  // 
  // Additional Notes:
  // 
  // * The polling loop and Iframe are not created until at least one callback
  //   is actually bound to 'hashchange'.
  // * If you need the bound callback(s) to execute immediately, in cases where
  //   the page 'state' exists on page load (via bookmark or page refresh, for
  //   example) use $(window).trigger( 'hashchange' );
  // * The event can be bound before DOM ready, but since it won't be usable
  //   before then in IE6/7 (due to the necessary Iframe), recommended usage is
  //   to bind it inside a $(document).ready() callback.
  
  jq_event_special[ str_hashchange ] = $.extend( jq_event_special[ str_hashchange ], {
    
    // Called only when the first 'hashchange' event is bound to window.
    setup: function() {
      // If window.onhashchange is supported natively, there's nothing to do..
      if ( supports_onhashchange ) { return false; }
      
      // Otherwise, we need to create our own. And we don't want to call this
      // until the user binds to the event, just in case they never do, since it
      // will create a polling loop and possibly even a hidden Iframe.
      $( fake_onhashchange.start );
    },
    
    // Called only when the last 'hashchange' event is unbound from window.
    teardown: function() {
      // If window.onhashchange is supported natively, there's nothing to do..
      if ( supports_onhashchange ) { return false; }
      
      // Otherwise, we need to stop ours (if possible).
      $( fake_onhashchange.stop );
    }
    
  });
  
  // fake_onhashchange does all the work of triggering the window.onhashchange
  // event for browsers that don't natively support it, including creating a
  // polling loop to watch for hash changes and in IE 6/7 creating a hidden
  // Iframe to enable back and forward.
  fake_onhashchange = (function(){
    var self = {},
      timeout_id,
      iframe,
      set_history,
      get_history;
    
    // Initialize. In IE 6/7, creates a hidden Iframe for history handling.
    function init(){
      // Most browsers don't need special methods here..
      set_history = get_history = function(val){ return val; };
      
      // But IE6/7 do!
      if ( is_old_ie ) {
        
        // Create hidden Iframe after the end of the body to prevent initial
        // page load from scrolling unnecessarily.
        iframe = $('<iframe src="javascript:0"/>').hide().insertAfter( 'body' )[0].contentWindow;
        
        // Get history by looking at the hidden Iframe's location.hash.
        get_history = function() {
          return get_fragment( iframe.document[ str_location ][ str_href ] );
        };
        
        // Set a new history item by opening and then closing the Iframe
        // document, *then* setting its location.hash.
        set_history = function( hash, history_hash ) {
          if ( hash !== history_hash ) {
            var doc = iframe.document;
            doc.open().close();
            doc[ str_location ].hash = '#' + hash;
          }
        };
        
        // Set initial history.
        set_history( get_fragment() );
      }
    };
    
    // Start the polling loop.
    self.start = function() {
      // Polling loop is already running!
      if ( timeout_id ) { return; }
      
      // Remember the initial hash so it doesn't get triggered immediately.
      var last_hash = get_fragment();
      
      // Initialize if not yet initialized.
      set_history || init();
      
      // This polling loop checks every $.hashchangeDelay milliseconds to see if
      // location.hash has changed, and triggers the 'hashchange' event on
      // window when necessary.
      (function loopy(){
        var hash = get_fragment(),
          history_hash = get_history( last_hash );
        
        if ( hash !== last_hash ) {
          set_history( last_hash = hash, history_hash );
          
          $(window).trigger( str_hashchange );
          
        } else if ( history_hash !== last_hash ) {
          window[ str_location ][ str_href ] = window[ str_location ][ str_href ].replace( /#.*/, '' ) + '#' + history_hash;
        }
        
        timeout_id = setTimeout( loopy, $[ str_hashchange + 'Delay' ] );
      })();
    };
    
    // Stop the polling loop, but only if an IE6/7 Iframe wasn't created. In
    // that case, even if there are no longer any bound event handlers, the
    // polling loop is still necessary for back/next to work at all!
    self.stop = function() {
      if ( !iframe ) {
        timeout_id && clearTimeout( timeout_id );
        timeout_id = 0;
      }
    };
    
    return self;
  })();
  
})(jQuery,this);

/**
 * jQuery Validation Plugin 1.8.1
 *
 * http://bassistance.de/jquery-plugins/jquery-plugin-validation/
 * http://docs.jquery.com/Plugins/Validation
 *
 * Copyright (c) 2006 - 2011 Jörn Zaefferer
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */

(function($) {

$.extend($.fn, {
	// http://docs.jquery.com/Plugins/Validation/validate
	validate: function( options ) {

		// if nothing is selected, return nothing; can't chain anyway
		if (!this.length) {
			options && options.debug && window.console && console.warn( "nothing selected, can't validate, returning nothing" );
			return;
		}

		// check if a validator for this form was already created
		var validator = $.data(this[0], 'validator');
		if ( validator ) {
			return validator;
		}

		validator = new $.validator( options, this[0] );
		$.data(this[0], 'validator', validator);

		if ( validator.settings.onsubmit ) {

			// allow suppresing validation by adding a cancel class to the submit button
			this.find("input, button").filter(".cancel").click(function() {
				validator.cancelSubmit = true;
			});

			// when a submitHandler is used, capture the submitting button
			if (validator.settings.submitHandler) {
				this.find("input, button").filter(":submit").click(function() {
					validator.submitButton = this;
				});
			}

			// validate the form on submit
			this.submit( function( event ) {
				if ( validator.settings.debug )
					// prevent form submit to be able to see console output
					event.preventDefault();

				function handle() {
					if ( validator.settings.submitHandler ) {
						if (validator.submitButton) {
							// insert a hidden input as a replacement for the missing submit button
							var hidden = $("<input type='hidden'/>").attr("name", validator.submitButton.name).val(validator.submitButton.value).appendTo(validator.currentForm);
						}
						validator.settings.submitHandler.call( validator, validator.currentForm );
						if (validator.submitButton) {
							// and clean up afterwards; thanks to no-block-scope, hidden can be referenced
							hidden.remove();
						}
						return false;
					}
					return true;
				}

				// prevent submit for invalid forms or custom submit handlers
				if ( validator.cancelSubmit ) {
					validator.cancelSubmit = false;
					return handle();
				}
				if ( validator.form() ) {
					if ( validator.pendingRequest ) {
						validator.formSubmitted = true;
						return false;
					}
					return handle();
				} else {
					validator.focusInvalid();
					return false;
				}
			});
		}

		return validator;
	},
	// http://docs.jquery.com/Plugins/Validation/valid
	valid: function() {
        if ( $(this[0]).is('form')) {
            return this.validate().form();
        } else {
            var valid = true;
            var validator = $(this[0].form).validate();
            this.each(function() {
				valid &= validator.element(this);
            });
            return valid;
        }
    },
	// attributes: space seperated list of attributes to retrieve and remove
	removeAttrs: function(attributes) {
		var result = {},
			$element = this;
		$.each(attributes.split(/\s/), function(index, value) {
			result[value] = $element.attr(value);
			$element.removeAttr(value);
		});
		return result;
	},
	// http://docs.jquery.com/Plugins/Validation/rules
	rules: function(command, argument) {
		var element = this[0];

		if (command) {
			var settings = $.data(element.form, 'validator').settings;
			var staticRules = settings.rules;
			var existingRules = $.validator.staticRules(element);
			switch(command) {
			case "add":
				$.extend(existingRules, $.validator.normalizeRule(argument));
				staticRules[element.name] = existingRules;
				if (argument.messages)
					settings.messages[element.name] = $.extend( settings.messages[element.name], argument.messages );
				break;
			case "remove":
				if (!argument) {
					delete staticRules[element.name];
					return existingRules;
				}
				var filtered = {};
				$.each(argument.split(/\s/), function(index, method) {
					filtered[method] = existingRules[method];
					delete existingRules[method];
				});
				return filtered;
			}
		}

		var data = $.validator.normalizeRules(
		$.extend(
			{},
			$.validator.metadataRules(element),
			$.validator.classRules(element),
			$.validator.attributeRules(element),
			$.validator.staticRules(element)
		), element);

		// make sure required is at front
		if (data.required) {
			var param = data.required;
			delete data.required;
			data = $.extend({required: param}, data);
		}

		return data;
	}
});

// Custom selectors
$.extend($.expr[":"], {
	// http://docs.jquery.com/Plugins/Validation/blank
	blank: function(a) {return !$.trim("" + a.value);},
	// http://docs.jquery.com/Plugins/Validation/filled
	filled: function(a) {return !!$.trim("" + a.value);},
	// http://docs.jquery.com/Plugins/Validation/unchecked
	unchecked: function(a) {return !a.checked;}
});

// constructor for validator
$.validator = function( options, form ) {
	this.settings = $.extend( true, {}, $.validator.defaults, options );
	this.currentForm = form;
	this.init();
};

$.validator.format = function(source, params) {
	if ( arguments.length == 1 )
		return function() {
			var args = $.makeArray(arguments);
			args.unshift(source);
			return $.validator.format.apply( this, args );
		};
	if ( arguments.length > 2 && params.constructor != Array  ) {
		params = $.makeArray(arguments).slice(1);
	}
	if ( params.constructor != Array ) {
		params = [ params ];
	}
	$.each(params, function(i, n) {
		source = source.replace(new RegExp("\\{" + i + "\\}", "g"), n);
	});
	return source;
};

$.extend($.validator, {

	defaults: {
		messages: {},
		groups: {},
		rules: {},
		errorClass: "error",
		validClass: "valid",
		errorElement: "label",
		focusInvalid: true,
		errorContainer: $( [] ),
		errorLabelContainer: $( [] ),
		onsubmit: true,
		ignore: [],
		ignoreTitle: false,
		onfocusin: function(element) {
			this.lastActive = element;

			// hide error label and remove error class on focus if enabled
			if ( this.settings.focusCleanup && !this.blockFocusCleanup ) {
				this.settings.unhighlight && this.settings.unhighlight.call( this, element, this.settings.errorClass, this.settings.validClass );
				this.addWrapper(this.errorsFor(element)).hide();
			}
		},
		onfocusout: function(element) {
			if ( !this.checkable(element) && (element.name in this.submitted || !this.optional(element)) ) {
				this.element(element);
			}
		},
		onkeyup: function(element) {
			if ( element.name in this.submitted || element == this.lastElement ) {
				this.element(element);
			}
		},
		onclick: function(element) {
			// click on selects, radiobuttons and checkboxes
			if ( element.name in this.submitted )
				this.element(element);
			// or option elements, check parent select in that case
			else if (element.parentNode.name in this.submitted)
				this.element(element.parentNode);
		},
		highlight: function(element, errorClass, validClass) {
			if (element.type === 'radio') {
				this.findByName(element.name).addClass(errorClass).removeClass(validClass);
			} else {
				$(element).addClass(errorClass).removeClass(validClass);
			}
		},
		unhighlight: function(element, errorClass, validClass) {
			if (element.type === 'radio') {
				this.findByName(element.name).removeClass(errorClass).addClass(validClass);
			} else {
				$(element).removeClass(errorClass).addClass(validClass);
			}
		}
	},

	// http://docs.jquery.com/Plugins/Validation/Validator/setDefaults
	setDefaults: function(settings) {
		$.extend( $.validator.defaults, settings );
	},

	messages: {
		required: "This field is required.",
		remote: "Please fix this field.",
		email: "Please enter a valid email address.",
		url: "Please enter a valid URL.",
		date: "Please enter a valid date.",
		dateISO: "Please enter a valid date (ISO).",
		number: "Please enter a valid number.",
		digits: "Please enter only digits.",
		creditcard: "Please enter a valid credit card number.",
		equalTo: "Please enter the same value again.",
		accept: "Please enter a value with a valid extension.",
		maxlength: $.validator.format("Please enter no more than {0} characters."),
		minlength: $.validator.format("Please enter at least {0} characters."),
		rangelength: $.validator.format("Please enter a value between {0} and {1} characters long."),
		range: $.validator.format("Please enter a value between {0} and {1}."),
		max: $.validator.format("Please enter a value less than or equal to {0}."),
		min: $.validator.format("Please enter a value greater than or equal to {0}.")
	},

	autoCreateRanges: false,

	prototype: {

		init: function() {
			this.labelContainer = $(this.settings.errorLabelContainer);
			this.errorContext = this.labelContainer.length && this.labelContainer || $(this.currentForm);
			this.containers = $(this.settings.errorContainer).add( this.settings.errorLabelContainer );
			this.submitted = {};
			this.valueCache = {};
			this.pendingRequest = 0;
			this.pending = {};
			this.invalid = {};
			this.reset();

			var groups = (this.groups = {});
			$.each(this.settings.groups, function(key, value) {
				$.each(value.split(/\s/), function(index, name) {
					groups[name] = key;
				});
			});
			var rules = this.settings.rules;
			$.each(rules, function(key, value) {
				rules[key] = $.validator.normalizeRule(value);
			});

			function delegate(event) {
				var validator = $.data(this[0].form, "validator"),
					eventType = "on" + event.type.replace(/^validate/, "");
				validator.settings[eventType] && validator.settings[eventType].call(validator, this[0] );
			}
			$(this.currentForm)
				.validateDelegate(":text, :password, :file, select, textarea", "focusin focusout keyup", delegate)
				.validateDelegate(":radio, :checkbox, select, option", "click", delegate);

			if (this.settings.invalidHandler)
				$(this.currentForm).bind("invalid-form.validate", this.settings.invalidHandler);
		},

		// http://docs.jquery.com/Plugins/Validation/Validator/form
		form: function() {
			this.checkForm();
			$.extend(this.submitted, this.errorMap);
			this.invalid = $.extend({}, this.errorMap);
			if (!this.valid())
				$(this.currentForm).triggerHandler("invalid-form", [this]);
			this.showErrors();
			return this.valid();
		},

		checkForm: function() {
			this.prepareForm();
			for ( var i = 0, elements = (this.currentElements = this.elements()); elements[i]; i++ ) {
				this.check( elements[i] );
			}
			return this.valid();
		},

		// http://docs.jquery.com/Plugins/Validation/Validator/element
		element: function( element ) {
			element = this.clean( element );
			this.lastElement = element;
			this.prepareElement( element );
			this.currentElements = $(element);
			var result = this.check( element );
			if ( result ) {
				delete this.invalid[element.name];
			} else {
				this.invalid[element.name] = true;
			}
			if ( !this.numberOfInvalids() ) {
				// Hide error containers on last error
				this.toHide = this.toHide.add( this.containers );
			}
			this.showErrors();
			return result;
		},

		// http://docs.jquery.com/Plugins/Validation/Validator/showErrors
		showErrors: function(errors) {
			if(errors) {
				// add items to error list and map
				$.extend( this.errorMap, errors );
				this.errorList = [];
				for ( var name in errors ) {
					this.errorList.push({
						message: errors[name],
						element: this.findByName(name)[0]
					});
				}
				// remove items from success list
				this.successList = $.grep( this.successList, function(element) {
					return !(element.name in errors);
				});
			}
			this.settings.showErrors
				? this.settings.showErrors.call( this, this.errorMap, this.errorList )
				: this.defaultShowErrors();
		},

		// http://docs.jquery.com/Plugins/Validation/Validator/resetForm
		resetForm: function() {
			if ( $.fn.resetForm )
				$( this.currentForm ).resetForm();
			this.submitted = {};
			this.prepareForm();
			this.hideErrors();
			this.elements().removeClass( this.settings.errorClass );
		},

		numberOfInvalids: function() {
			return this.objectLength(this.invalid);
		},

		objectLength: function( obj ) {
			var count = 0;
			for ( var i in obj )
				count++;
			return count;
		},

		hideErrors: function() {
			this.addWrapper( this.toHide ).hide();
		},

		valid: function() {
			return this.size() == 0;
		},

		size: function() {
			return this.errorList.length;
		},

		focusInvalid: function() {
			if( this.settings.focusInvalid ) {
				try {
					$(this.findLastActive() || this.errorList.length && this.errorList[0].element || [])
					.filter(":visible")
					.focus()
					// manually trigger focusin event; without it, focusin handler isn't called, findLastActive won't have anything to find
					.trigger("focusin");
				} catch(e) {
					// ignore IE throwing errors when focusing hidden elements
				}
			}
		},

		findLastActive: function() {
			var lastActive = this.lastActive;
			return lastActive && $.grep(this.errorList, function(n) {
				return n.element.name == lastActive.name;
			}).length == 1 && lastActive;
		},

		elements: function() {
			var validator = this,
				rulesCache = {};

			// select all valid inputs inside the form (no submit or reset buttons)
			return $(this.currentForm)
			.find("input, select, textarea")
			.not(":submit, :reset, :image, [disabled]")
			.not( this.settings.ignore )
			.filter(function() {
				!this.name && validator.settings.debug && window.console && console.error( "%o has no name assigned", this);

				// select only the first element for each name, and only those with rules specified
				if ( this.name in rulesCache || !validator.objectLength($(this).rules()) )
					return false;

				rulesCache[this.name] = true;
				return true;
			});
		},

		clean: function( selector ) {
			return $( selector )[0];
		},

		errors: function() {
			return $( this.settings.errorElement + "." + this.settings.errorClass, this.errorContext );
		},

		reset: function() {
			this.successList = [];
			this.errorList = [];
			this.errorMap = {};
			this.toShow = $([]);
			this.toHide = $([]);
			this.currentElements = $([]);
		},

		prepareForm: function() {
			this.reset();
			this.toHide = this.errors().add( this.containers );
		},

		prepareElement: function( element ) {
			this.reset();
			this.toHide = this.errorsFor(element);
		},

		check: function( element ) {
			element = this.clean( element );

			// if radio/checkbox, validate first element in group instead
			if (this.checkable(element)) {
				element = this.findByName( element.name ).not(this.settings.ignore)[0];
			}

			var rules = $(element).rules();
			var dependencyMismatch = false;
			for (var method in rules ) {
				var rule = { method: method, parameters: rules[method] };
				try {
					var result = $.validator.methods[method].call( this, element.value.replace(/\r/g, ""), element, rule.parameters );

					// if a method indicates that the field is optional and therefore valid,
					// don't mark it as valid when there are no other rules
					if ( result == "dependency-mismatch" ) {
						dependencyMismatch = true;
						continue;
					}
					dependencyMismatch = false;

					if ( result == "pending" ) {
						this.toHide = this.toHide.not( this.errorsFor(element) );
						return;
					}

					if( !result ) {
						this.formatAndAdd( element, rule );
						return false;
					}
				} catch(e) {
					this.settings.debug && window.console && console.log("exception occured when checking element " + element.id
						 + ", check the '" + rule.method + "' method", e);
					throw e;
				}
			}
			if (dependencyMismatch)
				return;
			if ( this.objectLength(rules) )
				this.successList.push(element);
			return true;
		},

		// return the custom message for the given element and validation method
		// specified in the element's "messages" metadata
		customMetaMessage: function(element, method) {
			if (!$.metadata)
				return;

			var meta = this.settings.meta
				? $(element).metadata()[this.settings.meta]
				: $(element).metadata();

			return meta && meta.messages && meta.messages[method];
		},

		// return the custom message for the given element name and validation method
		customMessage: function( name, method ) {
			var m = this.settings.messages[name];
			return m && (m.constructor == String
				? m
				: m[method]);
		},

		// return the first defined argument, allowing empty strings
		findDefined: function() {
			for(var i = 0; i < arguments.length; i++) {
				if (arguments[i] !== undefined)
					return arguments[i];
			}
			return undefined;
		},

		defaultMessage: function( element, method) {
			return this.findDefined(
				this.customMessage( element.name, method ),
				this.customMetaMessage( element, method ),
				// title is never undefined, so handle empty string as undefined
				!this.settings.ignoreTitle && element.title || undefined,
				$.validator.messages[method],
				"<strong>Warning: No message defined for " + element.name + "</strong>"
			);
		},

		formatAndAdd: function( element, rule ) {
			var message = this.defaultMessage( element, rule.method ),
				theregex = /\$?\{(\d+)\}/g;
			if ( typeof message == "function" ) {
				message = message.call(this, rule.parameters, element);
			} else if (theregex.test(message)) {
				message = jQuery.format(message.replace(theregex, '{$1}'), rule.parameters);
			}
			this.errorList.push({
				message: message,
				element: element
			});

			this.errorMap[element.name] = message;
			this.submitted[element.name] = message;
		},

		addWrapper: function(toToggle) {
			if ( this.settings.wrapper )
				toToggle = toToggle.add( toToggle.parent( this.settings.wrapper ) );
			return toToggle;
		},

		defaultShowErrors: function() {
			for ( var i = 0; this.errorList[i]; i++ ) {
				var error = this.errorList[i];
				this.settings.highlight && this.settings.highlight.call( this, error.element, this.settings.errorClass, this.settings.validClass );
				this.showLabel( error.element, error.message );
			}
			if( this.errorList.length ) {
				this.toShow = this.toShow.add( this.containers );
			}
			if (this.settings.success) {
				for ( var i = 0; this.successList[i]; i++ ) {
					this.showLabel( this.successList[i] );
				}
			}
			if (this.settings.unhighlight) {
				for ( var i = 0, elements = this.validElements(); elements[i]; i++ ) {
					this.settings.unhighlight.call( this, elements[i], this.settings.errorClass, this.settings.validClass );
				}
			}
			this.toHide = this.toHide.not( this.toShow );
			this.hideErrors();
			this.addWrapper( this.toShow ).show();
		},

		validElements: function() {
			return this.currentElements.not(this.invalidElements());
		},

		invalidElements: function() {
			return $(this.errorList).map(function() {
				return this.element;
			});
		},

		showLabel: function(element, message) {
			var label = this.errorsFor( element );
			if ( label.length ) {
				// refresh error/success class
				label.removeClass().addClass( this.settings.errorClass );

				// check if we have a generated label, replace the message then
				label.attr("generated") && label.html(message);
			} else {
				// create label
				label = $("<" + this.settings.errorElement + "/>")
					.attr({"for":  this.idOrName(element), generated: true})
					.addClass(this.settings.errorClass)
					.html(message || "");
				if ( this.settings.wrapper ) {
					// make sure the element is visible, even in IE
					// actually showing the wrapped element is handled elsewhere
					label = label.hide().show().wrap("<" + this.settings.wrapper + "/>").parent();
				}
				if ( !this.labelContainer.append(label).length )
					this.settings.errorPlacement
						? this.settings.errorPlacement(label, $(element) )
						: label.insertAfter(element);
			}
			if ( !message && this.settings.success ) {
				label.text("");
				typeof this.settings.success == "string"
					? label.addClass( this.settings.success )
					: this.settings.success( label );
			}
			this.toShow = this.toShow.add(label);
		},

		errorsFor: function(element) {
			var name = this.idOrName(element);
    		return this.errors().filter(function() {
				return $(this).attr('for') == name;
			});
		},

		idOrName: function(element) {
			return this.groups[element.name] || (this.checkable(element) ? element.name : element.id || element.name);
		},

		checkable: function( element ) {
			return /radio|checkbox/i.test(element.type);
		},

		findByName: function( name ) {
			// select by name and filter by form for performance over form.find("[name=...]")
			var form = this.currentForm;
			return $(document.getElementsByName(name)).map(function(index, element) {
				return element.form == form && element.name == name && element  || null;
			});
		},

		getLength: function(value, element) {
			switch( element.nodeName.toLowerCase() ) {
			case 'select':
				return $("option:selected", element).length;
			case 'input':
				if( this.checkable( element) )
					return this.findByName(element.name).filter(':checked').length;
			}
			return value.length;
		},

		depend: function(param, element) {
			return this.dependTypes[typeof param]
				? this.dependTypes[typeof param](param, element)
				: true;
		},

		dependTypes: {
			"boolean": function(param, element) {
				return param;
			},
			"string": function(param, element) {
				return !!$(param, element.form).length;
			},
			"function": function(param, element) {
				return param(element);
			}
		},

		optional: function(element) {
			return !$.validator.methods.required.call(this, $.trim(element.value), element) && "dependency-mismatch";
		},

		startRequest: function(element) {
			if (!this.pending[element.name]) {
				this.pendingRequest++;
				this.pending[element.name] = true;
			}
		},

		stopRequest: function(element, valid) {
			this.pendingRequest--;
			// sometimes synchronization fails, make sure pendingRequest is never < 0
			if (this.pendingRequest < 0)
				this.pendingRequest = 0;
			delete this.pending[element.name];
			if ( valid && this.pendingRequest == 0 && this.formSubmitted && this.form() ) {
				$(this.currentForm).submit();
				this.formSubmitted = false;
			} else if (!valid && this.pendingRequest == 0 && this.formSubmitted) {
				$(this.currentForm).triggerHandler("invalid-form", [this]);
				this.formSubmitted = false;
			}
		},

		previousValue: function(element) {
			return $.data(element, "previousValue") || $.data(element, "previousValue", {
				old: null,
				valid: true,
				message: this.defaultMessage( element, "remote" )
			});
		}

	},

	classRuleSettings: {
		required: {required: true},
		email: {email: true},
		url: {url: true},
		date: {date: true},
		dateISO: {dateISO: true},
		dateDE: {dateDE: true},
		number: {number: true},
		numberDE: {numberDE: true},
		digits: {digits: true},
		creditcard: {creditcard: true}
	},

	addClassRules: function(className, rules) {
		className.constructor == String ?
			this.classRuleSettings[className] = rules :
			$.extend(this.classRuleSettings, className);
	},

	classRules: function(element) {
		var rules = {};
		var classes = $(element).attr('class');
		classes && $.each(classes.split(' '), function() {
			if (this in $.validator.classRuleSettings) {
				$.extend(rules, $.validator.classRuleSettings[this]);
			}
		});
		return rules;
	},

	attributeRules: function(element) {
		var rules = {};
		var $element = $(element);

		for (var method in $.validator.methods) {
			var value = $element.attr(method);
			if (value) {
				rules[method] = value;
			}
		}

		// maxlength may be returned as -1, 2147483647 (IE) and 524288 (safari) for text inputs
		if (rules.maxlength && /-1|2147483647|524288/.test(rules.maxlength)) {
			delete rules.maxlength;
		}

		return rules;
	},

	metadataRules: function(element) {
		if (!$.metadata) return {};

		var meta = $.data(element.form, 'validator').settings.meta;
		return meta ?
			$(element).metadata()[meta] :
			$(element).metadata();
	},

	staticRules: function(element) {
		var rules = {};
		var validator = $.data(element.form, 'validator');
		if (validator.settings.rules) {
			rules = $.validator.normalizeRule(validator.settings.rules[element.name]) || {};
		}
		return rules;
	},

	normalizeRules: function(rules, element) {
		// handle dependency check
		$.each(rules, function(prop, val) {
			// ignore rule when param is explicitly false, eg. required:false
			if (val === false) {
				delete rules[prop];
				return;
			}
			if (val.param || val.depends) {
				var keepRule = true;
				switch (typeof val.depends) {
					case "string":
						keepRule = !!$(val.depends, element.form).length;
						break;
					case "function":
						keepRule = val.depends.call(element, element);
						break;
				}
				if (keepRule) {
					rules[prop] = val.param !== undefined ? val.param : true;
				} else {
					delete rules[prop];
				}
			}
		});

		// evaluate parameters
		$.each(rules, function(rule, parameter) {
			rules[rule] = $.isFunction(parameter) ? parameter(element) : parameter;
		});

		// clean number parameters
		$.each(['minlength', 'maxlength', 'min', 'max'], function() {
			if (rules[this]) {
				rules[this] = Number(rules[this]);
			}
		});
		$.each(['rangelength', 'range'], function() {
			if (rules[this]) {
				rules[this] = [Number(rules[this][0]), Number(rules[this][1])];
			}
		});

		if ($.validator.autoCreateRanges) {
			// auto-create ranges
			if (rules.min && rules.max) {
				rules.range = [rules.min, rules.max];
				delete rules.min;
				delete rules.max;
			}
			if (rules.minlength && rules.maxlength) {
				rules.rangelength = [rules.minlength, rules.maxlength];
				delete rules.minlength;
				delete rules.maxlength;
			}
		}

		// To support custom messages in metadata ignore rule methods titled "messages"
		if (rules.messages) {
			delete rules.messages;
		}

		return rules;
	},

	// Converts a simple string to a {string: true} rule, e.g., "required" to {required:true}
	normalizeRule: function(data) {
		if( typeof data == "string" ) {
			var transformed = {};
			$.each(data.split(/\s/), function() {
				transformed[this] = true;
			});
			data = transformed;
		}
		return data;
	},

	// http://docs.jquery.com/Plugins/Validation/Validator/addMethod
	addMethod: function(name, method, message) {
		$.validator.methods[name] = method;
		$.validator.messages[name] = message != undefined ? message : $.validator.messages[name];
		if (method.length < 3) {
			$.validator.addClassRules(name, $.validator.normalizeRule(name));
		}
	},

	methods: {

		// http://docs.jquery.com/Plugins/Validation/Methods/required
		required: function(value, element, param) {
			// check if dependency is met
			if ( !this.depend(param, element) )
				return "dependency-mismatch";
			switch( element.nodeName.toLowerCase() ) {
			case 'select':
				// could be an array for select-multiple or a string, both are fine this way
				var val = $(element).val();
				return val && val.length > 0;
			case 'input':
				if ( this.checkable(element) )
					return this.getLength(value, element) > 0;
			default:
				return $.trim(value).length > 0;
			}
		},

		// http://docs.jquery.com/Plugins/Validation/Methods/remote
		remote: function(value, element, param) {
			if ( this.optional(element) )
				return "dependency-mismatch";

			var previous = this.previousValue(element);
			if (!this.settings.messages[element.name] )
				this.settings.messages[element.name] = {};
			previous.originalMessage = this.settings.messages[element.name].remote;
			this.settings.messages[element.name].remote = previous.message;

			param = typeof param == "string" && {url:param} || param;

			if ( this.pending[element.name] ) {
				return "pending";
			}
			if ( previous.old === value ) {
				return previous.valid;
			}

			previous.old = value;
			var validator = this;
			this.startRequest(element);
			var data = {};
			data[element.name] = value;
			$.ajax($.extend(true, {
				url: param,
				mode: "abort",
				port: "validate" + element.name,
				dataType: "json",
				data: data,
				success: function(response) {
					validator.settings.messages[element.name].remote = previous.originalMessage;
					var valid = response === true;
					if ( valid ) {
						var submitted = validator.formSubmitted;
						validator.prepareElement(element);
						validator.formSubmitted = submitted;
						validator.successList.push(element);
						validator.showErrors();
					} else {
						var errors = {};
						var message = response || validator.defaultMessage( element, "remote" );
						errors[element.name] = previous.message = $.isFunction(message) ? message(value) : message;
						validator.showErrors(errors);
					}
					previous.valid = valid;
					validator.stopRequest(element, valid);
				}
			}, param));
			return "pending";
		},

		// http://docs.jquery.com/Plugins/Validation/Methods/minlength
		minlength: function(value, element, param) {
			return this.optional(element) || this.getLength($.trim(value), element) >= param;
		},

		// http://docs.jquery.com/Plugins/Validation/Methods/maxlength
		maxlength: function(value, element, param) {
			return this.optional(element) || this.getLength($.trim(value), element) <= param;
		},

		// http://docs.jquery.com/Plugins/Validation/Methods/rangelength
		rangelength: function(value, element, param) {
			var length = this.getLength($.trim(value), element);
			return this.optional(element) || ( length >= param[0] && length <= param[1] );
		},

		// http://docs.jquery.com/Plugins/Validation/Methods/min
		min: function( value, element, param ) {
			return this.optional(element) || value >= param;
		},

		// http://docs.jquery.com/Plugins/Validation/Methods/max
		max: function( value, element, param ) {
			return this.optional(element) || value <= param;
		},

		// http://docs.jquery.com/Plugins/Validation/Methods/range
		range: function( value, element, param ) {
			return this.optional(element) || ( value >= param[0] && value <= param[1] );
		},

		// http://docs.jquery.com/Plugins/Validation/Methods/email
		email: function(value, element) {
			// contributed by Scott Gonzalez: http://projects.scottsplayground.com/email_address_validation/
			return this.optional(element) || /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(value);
		},

		// http://docs.jquery.com/Plugins/Validation/Methods/url
		url: function(value, element) {
			// contributed by Scott Gonzalez: http://projects.scottsplayground.com/iri/
			return this.optional(element) || /^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value);
		},

		// http://docs.jquery.com/Plugins/Validation/Methods/date
		date: function(value, element) {
			return this.optional(element) || !/Invalid|NaN/.test(new Date(value));
		},

		// http://docs.jquery.com/Plugins/Validation/Methods/dateISO
		dateISO: function(value, element) {
			return this.optional(element) || /^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(value);
		},

		// http://docs.jquery.com/Plugins/Validation/Methods/number
		number: function(value, element) {
			return this.optional(element) || /^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(value);
		},

		// http://docs.jquery.com/Plugins/Validation/Methods/digits
		digits: function(value, element) {
			return this.optional(element) || /^\d+$/.test(value);
		},

		// http://docs.jquery.com/Plugins/Validation/Methods/creditcard
		// based on http://en.wikipedia.org/wiki/Luhn
		creditcard: function(value, element) {
			if ( this.optional(element) )
				return "dependency-mismatch";
			// accept only digits and dashes
			if (/[^0-9-]+/.test(value))
				return false;
			var nCheck = 0,
				nDigit = 0,
				bEven = false;

			value = value.replace(/\D/g, "");

			for (var n = value.length - 1; n >= 0; n--) {
				var cDigit = value.charAt(n);
				var nDigit = parseInt(cDigit, 10);
				if (bEven) {
					if ((nDigit *= 2) > 9)
						nDigit -= 9;
				}
				nCheck += nDigit;
				bEven = !bEven;
			}

			return (nCheck % 10) == 0;
		},

		// http://docs.jquery.com/Plugins/Validation/Methods/accept
		accept: function(value, element, param) {
			param = typeof param == "string" ? param.replace(/,/g, '|') : "png|jpe?g|gif";
			return this.optional(element) || value.match(new RegExp(".(" + param + ")$", "i"));
		},

		// http://docs.jquery.com/Plugins/Validation/Methods/equalTo
		equalTo: function(value, element, param) {
			// bind to the blur event of the target in order to revalidate whenever the target field is updated
			// TODO find a way to bind the event just once, avoiding the unbind-rebind overhead
			var target = $(param).unbind(".validate-equalTo").bind("blur.validate-equalTo", function() {
				$(element).valid();
			});
			return value == target.val();
		}

	}

});

// deprecated, use $.validator.format instead
$.format = $.validator.format;

})(jQuery);

// ajax mode: abort
// usage: $.ajax({ mode: "abort"[, port: "uniqueport"]});
// if mode:"abort" is used, the previous request on that port (port can be undefined) is aborted via XMLHttpRequest.abort()
;(function($) {
	var pendingRequests = {};
	// Use a prefilter if available (1.5+)
	if ( $.ajaxPrefilter ) {
		$.ajaxPrefilter(function(settings, _, xhr) {
			var port = settings.port;
			if (settings.mode == "abort") {
				if ( pendingRequests[port] ) {
					pendingRequests[port].abort();
				}
				pendingRequests[port] = xhr;
			}
		});
	} else {
		// Proxy ajax
		var ajax = $.ajax;
		$.ajax = function(settings) {
			var mode = ( "mode" in settings ? settings : $.ajaxSettings ).mode,
				port = ( "port" in settings ? settings : $.ajaxSettings ).port;
			if (mode == "abort") {
				if ( pendingRequests[port] ) {
					pendingRequests[port].abort();
				}
				return (pendingRequests[port] = ajax.apply(this, arguments));
			}
			return ajax.apply(this, arguments);
		};
	}
})(jQuery);

// provides cross-browser focusin and focusout events
// IE has native support, in other browsers, use event caputuring (neither bubbles)

// provides delegate(type: String, delegate: Selector, handler: Callback) plugin for easier event delegation
// handler is only called when $(event.target).is(delegate), in the scope of the jquery-object for event.target
;(function($) {
	// only implement if not provided by jQuery core (since 1.4)
	// TODO verify if jQuery 1.4's implementation is compatible with older jQuery special-event APIs
	if (!jQuery.event.special.focusin && !jQuery.event.special.focusout && document.addEventListener) {
		$.each({
			focus: 'focusin',
			blur: 'focusout'
		}, function( original, fix ){
			$.event.special[fix] = {
				setup:function() {
					this.addEventListener( original, handler, true );
				},
				teardown:function() {
					this.removeEventListener( original, handler, true );
				},
				handler: function(e) {
					arguments[0] = $.event.fix(e);
					arguments[0].type = fix;
					return $.event.handle.apply(this, arguments);
				}
			};
			function handler(e) {
				e = $.event.fix(e);
				e.type = fix;
				return $.event.handle.call(this, e);
			}
		});
	};
	$.extend($.fn, {
		validateDelegate: function(delegate, type, handler) {
			return this.bind(type, function(event) {
				var target = $(event.target);
				if (target.is(delegate)) {
					return handler.apply(target, arguments);
				}
			});
		}
	});
})(jQuery);

//DAIS: be careful when update there is custom code 

/// <reference path="jquery.validate.js" />

/*!
** Unobtrusive validation support library for jQuery and jQuery Validate
** Copyright (C) Microsoft Corporation. All rights reserved.
*/

/*jslint white: true, browser: true, onevar: true, undef: true, nomen: true, eqeqeq: true, plusplus: true, bitwise: true, regexp: true, newcap: true, immed: true, strict: false */
/*global document: false, jQuery: false */
/*high importance do NOT replace this file without function $.validator.unobtrusive.parseDynamicContent*/

(function ($) {
    var $jQval = $.validator,
        adapters,
        data_validation = "unobtrusiveValidation";

    function setValidationValues(options, ruleName, value) {
        options.rules[ruleName] = value;
        if (options.message) {
            options.messages[ruleName] = options.message;
        }
    }

    function splitAndTrim(value) {
        return value.replace(/^\s+|\s+$/g, "").split(/\s*,\s*/g);
    }

    function getModelPrefix(fieldName) {
        return fieldName.substr(0, fieldName.lastIndexOf(".") + 1);
    }

    function appendModelPrefix(value, prefix) {
        if (value.indexOf("*.") === 0) {
            value = value.replace("*.", prefix);
        }
        return value;
    }

    function onError(error, inputElement) {  // 'this' is the form element
        var container = $(this).find("[data-valmsg-for='" + inputElement[0].name + "']"),
            replace = $.parseJSON(container.attr("data-valmsg-replace")) !== false;

        container.removeClass("field-validation-valid").addClass("field-validation-error");
        error.data("unobtrusiveContainer", container);

        if (replace) {
            container.empty();
            error.removeClass("input-validation-error").appendTo(container);
        }
        else {
            error.hide();
        }
    }

    function onErrors(form, validator) {  // 'this' is the form element
        var container = $(this).find("[data-valmsg-summary=true]"),
            list = container.find("ul");

        if (list && list.length && validator.errorList.length) {
            list.empty();
            container.addClass("validation-summary-errors").removeClass("validation-summary-valid");

            $.each(validator.errorList, function () {
                $("<li />").html(this.message).appendTo(list);
            });
        }
    }

    function onSuccess(error) {  // 'this' is the form element
        var container = error.data("unobtrusiveContainer"),
            replace = $.parseJSON(container.attr("data-valmsg-replace"));

        if (container) {
            container.addClass("field-validation-valid").removeClass("field-validation-error");
            error.removeData("unobtrusiveContainer");

            if (replace) {
                container.empty();
            }
        }
    }

    function validationInfo(form) {
        var $form = $(form),
            result = $form.data(data_validation);

        if (!result) {
            result = {
                options: {  // options structure passed to jQuery Validate's validate() method
                    errorClass: "input-validation-error",
                    errorElement: "span",
                    errorPlacement: $.proxy(onError, form),
                    invalidHandler: $.proxy(onErrors, form),
                    messages: {},
                    rules: {},
                    success: $.proxy(onSuccess, form)
                },
                attachValidation: function () {
                    $form.validate(this.options);
                },
                validate: function () {  // a validation function that is called by unobtrusive Ajax
                    $form.validate();
                    return $form.valid();
                }
            };
            $form.data(data_validation, result);
        }

        return result;
    }

    $jQval.unobtrusive = {
        adapters: [],

        parseElement: function (element, skipAttach) {
            /// <summary>
            /// Parses a single HTML element for unobtrusive validation attributes.
            /// </summary>
            /// <param name="element" domElement="true">The HTML element to be parsed.</param>
            /// <param name="skipAttach" type="Boolean">[Optional] true to skip attaching the
            /// validation to the form. If parsing just this single element, you should specify true.
            /// If parsing several elements, you should specify false, and manually attach the validation
            /// to the form when you are finished. The default is false.</param>
            var $element = $(element),
                form = $element.parents("form")[0],
                valInfo, rules, messages;

            if (!form) {  // Cannot do client-side validation without a form
                return;
            }

            valInfo = validationInfo(form);
            valInfo.options.rules[element.name] = rules = {};
            valInfo.options.messages[element.name] = messages = {};

            $.each(this.adapters, function () {
                var prefix = "data-val-" + this.name,
                    message = $element.attr(prefix),
                    paramValues = {};

                if (message !== undefined) {  // Compare against undefined, because an empty message is legal (and falsy)
                    prefix += "-";

                    $.each(this.params, function () {
                        paramValues[this] = $element.attr(prefix + this);
                    });

                    this.adapt({
                        element: element,
                        form: form,
                        message: message,
                        params: paramValues,
                        rules: rules,
                        messages: messages
                    });
                }
            });

            jQuery.extend(rules, { "__dummy__": true });

            if (!skipAttach) {
                valInfo.attachValidation();
            }
        },

        parse: function (selector) {
            /// <summary>
            /// Parses all the HTML elements in the specified selector. It looks for input elements decorated
            /// with the [data-val=true] attribute value and enables validation according to the data-val-*
            /// attribute values.
            /// </summary>
            /// <param name="selector" type="String">Any valid jQuery selector.</param>
            $(selector).find(":input[data-val=true]").each(function () {
                $jQval.unobtrusive.parseElement(this, true);
            });

            $("form").each(function () {
                var info = validationInfo(this);
                if (info) {
                    info.attachValidation();
                }
            });
        }
    };

    adapters = $jQval.unobtrusive.adapters;

    adapters.add = function (adapterName, params, fn) {
        /// <summary>Adds a new adapter to convert unobtrusive HTML into a jQuery Validate validation.</summary>
        /// <param name="adapterName" type="String">The name of the adapter to be added. This matches the name used
        /// in the data-val-nnnn HTML attribute (where nnnn is the adapter name).</param>
        /// <param name="params" type="Array" optional="true">[Optional] An array of parameter names (strings) that will
        /// be extracted from the data-val-nnnn-mmmm HTML attributes (where nnnn is the adapter name, and
        /// mmmm is the parameter name).</param>
        /// <param name="fn" type="Function">The function to call, which adapts the values from the HTML
        /// attributes into jQuery Validate rules and/or messages.</param>
        /// <returns type="jQuery.validator.unobtrusive.adapters" />
        if (!fn) {  // Called with no params, just a function
            fn = params;
            params = [];
        }
        this.push({ name: adapterName, params: params, adapt: fn });
        return this;
    };

    adapters.addBool = function (adapterName, ruleName) {
        /// <summary>Adds a new adapter to convert unobtrusive HTML into a jQuery Validate validation, where
        /// the jQuery Validate validation rule has no parameter values.</summary>
        /// <param name="adapterName" type="String">The name of the adapter to be added. This matches the name used
        /// in the data-val-nnnn HTML attribute (where nnnn is the adapter name).</param>
        /// <param name="ruleName" type="String" optional="true">[Optional] The name of the jQuery Validate rule. If not provided, the value
        /// of adapterName will be used instead.</param>
        /// <returns type="jQuery.validator.unobtrusive.adapters" />
        return this.add(adapterName, function (options) {
            setValidationValues(options, ruleName || adapterName, true);
        });
    };

    adapters.addMinMax = function (adapterName, minRuleName, maxRuleName, minMaxRuleName, minAttribute, maxAttribute) {
        /// <summary>Adds a new adapter to convert unobtrusive HTML into a jQuery Validate validation, where
        /// the jQuery Validate validation has three potential rules (one for min-only, one for max-only, and
        /// one for min-and-max). The HTML parameters are expected to be named -min and -max.</summary>
        /// <param name="adapterName" type="String">The name of the adapter to be added. This matches the name used
        /// in the data-val-nnnn HTML attribute (where nnnn is the adapter name).</param>
        /// <param name="minRuleName" type="String">The name of the jQuery Validate rule to be used when you only
        /// have a minimum value.</param>
        /// <param name="maxRuleName" type="String">The name of the jQuery Validate rule to be used when you only
        /// have a maximum value.</param>
        /// <param name="minMaxRuleName" type="String">The name of the jQuery Validate rule to be used when you
        /// have both a minimum and maximum value.</param>
        /// <param name="minAttribute" type="String" optional="true">[Optional] The name of the HTML attribute that
        /// contains the minimum value. The default is "min".</param>
        /// <param name="maxAttribute" type="String" optional="true">[Optional] The name of the HTML attribute that
        /// contains the maximum value. The default is "max".</param>
        /// <returns type="jQuery.validator.unobtrusive.adapters" />
        return this.add(adapterName, [minAttribute || "min", maxAttribute || "max"], function (options) {
            var min = options.params.min,
                max = options.params.max;

            if (min && max) {
                setValidationValues(options, minMaxRuleName, [min, max]);
            }
            else if (min) {
                setValidationValues(options, minRuleName, min);
            }
            else if (max) {
                setValidationValues(options, maxRuleName, max);
            }
        });
    };

    adapters.addSingleVal = function (adapterName, attribute, ruleName) {
        /// <summary>Adds a new adapter to convert unobtrusive HTML into a jQuery Validate validation, where
        /// the jQuery Validate validation rule has a single value.</summary>
        /// <param name="adapterName" type="String">The name of the adapter to be added. This matches the name used
        /// in the data-val-nnnn HTML attribute(where nnnn is the adapter name).</param>
        /// <param name="attribute" type="String">[Optional] The name of the HTML attribute that contains the value.
        /// The default is "val".</param>
        /// <param name="ruleName" type="String" optional="true">[Optional] The name of the jQuery Validate rule. If not provided, the value
        /// of adapterName will be used instead.</param>
        /// <returns type="jQuery.validator.unobtrusive.adapters" />
        return this.add(adapterName, [attribute || "val"], function (options) {
            setValidationValues(options, ruleName || adapterName, options.params[attribute]);
        });
    };

    $jQval.addMethod("__dummy__", function (value, element, params) {
        return true;
    });

    $jQval.addMethod("regex", function (value, element, params) {
        var match;
        if (this.optional(element)) {
            return true;
        }

        match = new RegExp(params).exec(value);
        return (match && (match.index === 0) && (match[0].length === value.length));
    });

    adapters.addSingleVal("accept", "exts").addSingleVal("regex", "pattern");
    adapters.addBool("creditcard").addBool("date").addBool("digits").addBool("email").addBool("number").addBool("url");
    adapters.addMinMax("length", "minlength", "maxlength", "rangelength").addMinMax("range", "min", "max", "range");
    adapters.add("equalto", ["other"], function (options) {
        var prefix = getModelPrefix(options.element.name),
            other = options.params.other,
            fullOtherName = appendModelPrefix(other, prefix),
            element = $(options.form).find(":input[name=" + fullOtherName + "]")[0];

        setValidationValues(options, "equalTo", element);
    });
    adapters.add("required", function (options) {
        // jQuery Validate equates "required" with "mandatory" for checkbox elements
        if (options.element.tagName.toUpperCase() !== "INPUT" || options.element.type.toUpperCase() !== "CHECKBOX") {
            setValidationValues(options, "required", true);
        }
    });
    adapters.add("remote", ["url", "type", "additionalfields"], function (options) {
        var value = {
            url: options.params.url,
            type: options.params.type || "GET",
            data: {}
        },
            prefix = getModelPrefix(options.element.name);

        $.each(splitAndTrim(options.params.additionalfields || options.element.name), function (i, fieldName) {
            var paramName = appendModelPrefix(fieldName, prefix);
            value.data[paramName] = function () {
                return $(options.form).find(":input[name='" + paramName + "']").val();
            };
        });

        setValidationValues(options, "remote", value);
    });

    $(function () {
        $jQval.unobtrusive.parse(document);
    });
} (jQuery));


/// <reference path="jquery.validate.js" />
/// <reference path="jquery.validate.unobtrusive.js" />

(function ($) {
    $.validator.unobtrusive.parseDynamicContent = function (selector) {
        //use the normal unobstrusive.parse method
        $.validator.unobtrusive.parse(selector);

        //get the relevant form
        var form = $(selector).first().closest('form');

        //get the collections of unobstrusive validators, and jquery validators
        //and compare the two
        var unobtrusiveValidation = form.data('unobtrusiveValidation');
        var validator = form.validate();

        $.each(unobtrusiveValidation.options.rules, function (elname, elrules) {
            if ($('[name=\"' + elname + '\"]').attr("data-val") == "true") {
                if (validator.settings.rules[elname] == undefined) {
                    var args = {};
                    $.extend(args, elrules);
                    args.messages = unobtrusiveValidation.options.messages[elname];
                   $('[name=\"' + elname + '\"]').rules("add", args);
                } else {
                    $.each(elrules, function (rulename, data) {
                        if (validator.settings.rules[elname][rulename] == undefined) {
                            var args = {};
                            args[rulename] = data;
                            args.messages = unobtrusiveValidation.options.messages[elname][rulename];
                            $('[name=\"' + elname + '\"]').rules("add", args);
                        }
                    });
                }
            }
            else if ($('[name=\"' + elname + '\"]').attr("data-val") == "false") {
                if (validator.settings.rules[elname] == undefined) {
                } else {
                    $.each(elrules, function (rulename, data) {
                        $('[name=\"' + elname + '\"]').rules("remove");
                    });
                }
            }
        });
    }
} (jQuery));

var objLastContent = null;
var objLastImage = null;
var bHideLastPanel = true;
var bGrayPlus = false;

function ClearHighlight() { }

function HilightMe(obj) { }

function GetPageID() {
    var pageId = window.location.href;
    var iQuestionPos = pageId.indexOf("?");
    if (iQuestionPos > -1) pageId = pageId.substring(0, iQuestionPos);
    return pageId;
}

function openLastOpenedPagelet() {
    var cook = new CCookies();
    var pageletId = cook.readCookie(GetPageID() + "_lastOpenPageletId");
    if (null != pageletId) {
        showHideContent(pageletId, true);
    }
}

function setLastOpenedPagelet(pageletId, bDelete) {
    var cook = new CCookies();
    if (!bDelete)
        cook.saveCookie(GetPageID() + "_lastOpenPageletId", pageletId, 100);
    else
        cook.deleteCookie(GetPageID() + "_lastOpenPageletId");
}

function showHideContent(id, bOn) {
    if (isIE4)
        document.body.focus();

    var oContent = getSty(id + "_div");
    var oImage = getRef(id + "_img");
    if (!oContent || !oImage) return;

    if (bOn == null)
        bOn = (oContent.display.toLowerCase() == "none");

    var Store = new CCookies();
    Store.saveCookie(id, bOn);

    if (bOn == false) {
        oContent.display = "none";

        if (!bHideLastPanel) {
            if (!bGrayPlus)
                oImage.src = "/images/plus_exp.gif";
            else
                oImage.src = "/images/plus_gray.gif";
        }
        else {
            if (!bGrayPlus)
                oImage.src = "/common/pagelet/ul_plus.jpg";
            else
                oImage.src = "/images/plus_gray.gif";
            setLastOpenedPagelet(null, true);
        }

        objLastContent = null;
        objLastImage = null;
    }
    else {
        if (bHideLastPanel) {
            if (objLastContent) {
                objLastContent.display = "none";
                if (!bGrayPlus)
                    objLastImage.src = "/common/pagelet/ul_plus.jpg";
                else
                    objLastImage.src = "/images/plus_gray.gif";
            }

            oContent.display = "";
            if (!bGrayPlus)
                oImage.src = "/common/pagelet/ul_minus.jpg";
            else
                oImage.src = "/images/minus_gray.gif";
            setLastOpenedPagelet(id, false);
        }
        else {
            oContent.display = "";
            if (!bGrayPlus)
                oImage.src = "/images/minus_exp.gif";
            else
                oImage.src = "/images/minus_gray.gif";
        }

        objLastContent = oContent;
        objLastImage = oImage;
    }
}

// function for edit boxes
function txtNormal(obj) {
    obj.className = "edit1";
}
function txtFocus(obj) {
    obj.className = "edit2";
}

// functions for buttons
function btnNormal(obj) {
    window.status = "";
    obj.className = "button1";
}
function btnOnFocus(obj) {
    window.status = obj.value;
    obj.className = "button2";
}

function tdOnFocus(obj) {
    window.status = obj.value;
    obj.className = "td-red";
}

function tdNormal(obj) {
    window.status = obj.value;
    obj.className = "td-grey";
}

// functions for radio buttons
function radioNormal(obj) {
    obj.className = "radio1";
}
function radioOnFocus(obj) {
    obj.className = "radio2";
}

function getRadioValue(radioList) {
    for (var i = 0; i < radioList.length; i++) {
        if (radioList[i].checked) {
            return radioList[i].value;
        }
    }

    return "";
}

function setRadioValue(radioList, value) {
    for (var i = 0; i < radioList.length; i++) {
        radioList[i].checked = false;
        if (radioList[i].value == value) {
            return radioList[i].checked = true;
        }
    }

    return "";
}

function MySubmit(strUrl) {
    //	var wnd = top.open( "about:blank" , "WndDAIS", "scrollbars=1,toolbar=0,location=0,directories=0,status=1,menubar=0,resizable=1,width=400,height=400");
    //	wnd.focus();
    //	var oLay = getRef("mainContentDiv1")
    //	if(oLay && oLay.offsetHeight && oLay.style && oLay.style.height)
    //	{
    //		oLay.style.height = oLay.offsetHeight;
    //	}
    //18.03.2004 anyone: oLay.innerHTML = STR_LOADING + " ...";
    //18.03.2004 anyone:MyForm.target = "WndDAIS" new window for results;
    var MyForm = document.forms[0];

    MyForm.target = "_self";
    MyForm.action = strUrl;
    if (null != MyForm.onsubmit)
        if (!MyForm.onsubmit())
            return false;

    MyForm.submit();
    return false;
}

function MySubmitNoValidate(strUrl) {
    var oLay = getRef("mainContentDiv1")
    if (oLay && oLay.offsetHeight && oLay.style && oLay.style.height) {
        oLay.style.height = oLay.offsetHeight;
    }
    var MyForm = document.forms[0];

    //MyForm.target = "_blank";
    var oldAction = MyForm.action;
    var oldTarget = MyForm.target;
    MyForm.action = strUrl;

    var wnd = top.open("/blank.html", "WndBigDAIS", "scrollbars=1,toolbar=0,location=0,directories=0,status=1,menubar=0,resizable=1,width=700,height=600");
    wnd.focus();
    wnd.name = "dais_" + (new Date()).toUTCString() + "_" + Math.random();
    MyForm.target = wnd.name;

    MyForm.submit();

    MyForm.action = oldAction;
    MyForm.target = oldTarget;
    return false;
}

/*
plam 20090520
if page is /bg-BG/az/ti
form.action = "/page/default.aspx?...&xml_id=/bg-BG/az/ti"
want to go to 
/bg-BG/az/toj
*/
function MakeRequestAndAppendXmlID(postfixXmlId) {
    var MyForm = document.forms[0];

    var newAction = MyForm.action + "&";
    var nS = newAction.indexOf("&xml_id=");
    var nT = newAction.indexOf("&", nS + 1);
    var xmlid = newAction.substring(nS, nT);
    var N = xmlid.lastIndexOf("/");
    if (N != xmlid.length - 1)
        xmlid = xmlid.substring(0, N + 1);
    xmlid = xmlid + postfixXmlId;
    var strS = newAction.substring(0, nS);
    var strT = newAction.substring(nT);

    return strS + xmlid + strT;
}
function MakeRequestAndAppendXmlID_NormalSubmitTurbo(postfixXmlId) {
    var MyForm = document.forms[0];

    var oldAction = MyForm.action;
    var newAction = MakeRequestAndAppendXmlID(postfixXmlId);

    if (null != MyForm.onsubmit) {
        if (!MyForm.onsubmit()) {
            return false;
        }
    }

    MyForm.action = newAction;
    MyForm.target = "_self";

    MyForm.submit();

    MyForm.action = oldAction;
    return false;
}
function MakeRequestAndAppendXmlID_NormalSubmitTurboNoValidate(postfixXmlId) {
    var MyForm = document.forms[0];

    var oldAction = MyForm.action;
    var newAction = MakeRequestAndAppendXmlID(postfixXmlId);

    MyForm.action = newAction;
    MyForm.target = "_self";

    MyForm.submit();

    MyForm.action = oldAction;
    return false;
}

function MakeRequestAndAppendXmlID_MySubmitTurboNoValidate(postfixXmlId) {
    var MyForm = document.forms[0];

    var oldAction = MyForm.action;
    var oldTarget = MyForm.target;
    var newAction = MakeRequestAndAppendXmlID(postfixXmlId);

    MyForm.action = newAction;

    var wnd = top.open("/blank.html", "WndBigDAIS", "scrollbars=1,toolbar=0,location=0,directories=0,status=1,menubar=0,resizable=1,width=720,height=600");
    wnd.focus();
    wnd.name = "dais_" + (new Date()).toUTCString() + "_" + Math.random();
    MyForm.target = wnd.name;

    MyForm.submit();

    MyForm.action = oldAction;
    MyForm.target = oldTarget;
    return false;
}

function MakeRequestAppendXmlIDAndChangePath(postfixXmlId, oldPath, newPath) {
    var MyForm = document.forms[0];

    var newAction = MyForm.action + "&";
    var nS = newAction.indexOf("&xml_id=");
    var nT = newAction.indexOf("&", nS + 1);
    var xmlid = newAction.substring(nS, nT);
    var N = xmlid.lastIndexOf("/");
    if (N != xmlid.length - 1)
        xmlid = xmlid.substring(0, N + 1);
    xmlid = xmlid + postfixXmlId;
    xmlid = xmlid.replace(oldPath, newPath);
    var strS = newAction.substring(0, nS);
    var strT = newAction.substring(nT);

    return strS + xmlid + strT;
}


function MakeRequestAndChangeXmlID(newXmlId) {
    var MyForm = document.forms[0];

    var newAction = MyForm.action + "&";
    var nS = newAction.indexOf("&xml_id=");
    var nT = newAction.indexOf("&", nS + 1);
    var xmlid = newAction.substring(nS, nT);
    // &xml_id=/ == 9 characters
    var N = xmlid.indexOf("/", 9);
    if (N != xmlid.length - 1)
        xmlid = xmlid.substring(0, N + 1);
    xmlid = xmlid + newXmlId;
    var strS = newAction.substring(0, nS);
    var strT = newAction.substring(nT);

    return strS + xmlid + strT;
}

function MakeRequestToMVC(controller, action) {
    
    var url = MakeWorking(theme + "/mvc/" + controller + "/" + action + "?" + jQuery.param.querystring());
    return url;
}

function MakeRequestToMVCWithArea(controller, action, area) {

    var url = MakeWorking(theme + "/mvc/" +area + "/" + controller + "/" + action + "?" + jQuery.param.querystring());
    return url;
}

var StopSubmitSpecified = true;
var StopSubmit = false;

function CheckStopSubmit() {
    if (!StopSubmitSpecified)
        return true;

    if (StopSubmit)
        return false;

    StopSubmit = true;
    return true;
}

function DisablePaging() {
    var el = document.getElementById("divallpages");
    if (el)
        el.innerHTML = "";
}

function NormalSubmit(strUrl) {
    if (!CheckStopSubmit())
        return false;

    DisablePaging();

    var MyForm = document.forms[0];
    MyForm.target = "_self";
    if (strUrl != "")
        MyForm.action = strUrl;
    if (null != MyForm.onsubmit)
        if (!MyForm.onsubmit()) {
            StopSubmit = false;
            return false;
        }
    MyForm.submit();

    return false;
}

function NormalSubmitNoValidate(strUrl) {
    g_bNeedToConfirmOnUnload = false;
    var MyForm = document.forms[0];
    MyForm.target = "_self";
    //if(strUrl!="")
    MyForm.action = strUrl;

    MyForm.submit();

    return false;
}

function ExportSubmit(strUrl) {
    var MyForm = document.forms[0];
    MyForm.target = "_self";
    MyForm.action = strUrl;
    if (null != MyForm.onsubmit)
        if (!MyForm.onsubmit())
            return false;

    MyForm.submit();

    return false;
}

function OpenSmallWindow(strUrl) {
    var wnd = top.open(strUrl, "WndSmallDAIS", "scrollbars=0,toolbar=0,location=0,directories=0,status=1,menubar=0,resizable=0,width=280,height=200");
    wnd.focus();
    DAIS.APERSON.SECURITY.SessionCountdown.updateSessionCountdownToDefaultValue();
    return false;
}


function OpenBigWindow(strUrl) {
    var wnd = top.open(strUrl, "WndBigDAIS", "scrollbars=1,toolbar=0,location=0,directories=0,status=1,menubar=0,resizable=1,width=700,height=600");
    wnd.focus();
    DAIS.APERSON.SECURITY.SessionCountdown.updateSessionCountdownToDefaultValue();
    return false;
}

function OpenNewWindowFilledWith(str, strTitle) {
    var wnd = top.open("/blank.html", "wnd_signature", "scrollbars=1,toolbar=0,location=0,directories=0,status=1,menubar=0,resizable=1,width=560,height=300");

    wnd.document.clear();
    wnd.document.open();
    if (strTitle.length > 0)
        wnd.document.write("<html><head><title>" + strTitle + "</title></head><body bgcolor='#FFFFFF' text='#000000'><pre>");
    if (str.length > 0)
        wnd.document.write(str);
    if (strTitle.length > 0)
        wnd.document.write("</pre></body></html>");

    wnd.document.close();
    wnd.focus();
    if (window.event)
        window.event.cancelBubble = true;

    return false;
}

function CancelBubbleEvent() { if (window.event) event.cancelBubble = true; return true; }
function SpecialHRef(href) { CancelBubbleEvent(); document.location.href = href; }

function ReturnToOpener(bReload) {
    if (window.opener && (!window.opener.closed)) {
        if (bReload) {
            window.opener.location.reload(true);
        }
        window.opener.focus();
    }
    window.close();

    return false;
}

function showHelper(strUrl) {
    strUrl = MakeWorking(strUrl);
    var wnd = top.open(strUrl, "WndHelperDAIS", "scrollbars=1,toolbar=0,location=0,directories=0,status=1,menubar=0,resizable=1,width=400,height=350");
    wnd.focus();
    DAIS.APERSON.SECURITY.SessionCountdown.updateSessionCountdownToDefaultValue();
    return false;
}

function showHelperCustom(strUrl, sWidth, sHeight) {
    strUrl = MakeWorking(strUrl);
    var wnd = top.open(strUrl, "WndHelperDAIS", "scrollbars=1,toolbar=0,location=0,directories=0,status=1,menubar=0,resizable=1,width=" + sWidth + ",height=" + sHeight);
    wnd.focus();
    DAIS.APERSON.SECURITY.SessionCountdown.updateSessionCountdownToDefaultValue();
    return false;
}

function showHelpWindow(strHelpID) {
    var strUrl = "/help/?lang=" + strLang + "&id=" + strHelpID;
    strUrl = MakeWorking(strUrl);
    var wnd = top.open(strUrl, "WndHelpDAIS", "scrollbars=1,toolbar=0,location=0,directories=0,status=1,menubar=0,resizable=1,width=350,height=300");
    wnd.focus();
    DAIS.APERSON.SECURITY.SessionCountdown.updateSessionCountdownToDefaultValue();
}

function showPickerHelperNew(baseURL, helperAttrName, additionalParams, divId) {
    var helperElements = new Object();
    var selector = $("form");
    if (divId != null && divId != "") {
        selector = $("#" + divId);
    }
    selector.find("[" + helperAttrName + "]").each(function (element) {
        var $this = $(this);
        var attrVal = $this.attr(helperAttrName);
        helperElements[attrVal] = this.id;
    });

    if (divId != null || divId != '') {
        helperElements["divId"] = divId;
    }

    $.extend(helperElements, additionalParams);

    var url = $.param(helperElements);
    return showHelper(baseURL + "&amp;" + url);
}


function BindAllInputControls() {
    for (var k = 0; k < document.all.length; k++) {
        var s = document.all[k].id;
        var ss = s.substring(s.length - 5);

        if ("_Copy" == ss) {
            BindInputToSpan(s.substring(0, s.length - 5));
        }
        else if ("_CopyCheck" == s.substring(s.length - 10)) {
            BindCheckInputToSpan(s.substring(0, s.length - 10));
        }
        else if ("_CopySelect" == s.substring(s.length - 11)) {
            BindSelectInputToSpan(s.substring(0, s.length - 11));
        }
    }
}

function BindInputToSpan(strInputName) {
    eval("var oldHandle_" + strInputName + "  = document.forms[0]." + strInputName + ".onchange");
    eval("document.forms[0]." + strInputName + ".onchange = function() {UpdateBoundFieldValue(\"" + strInputName + "\");if(oldHandle_" + strInputName + ")oldHandle_" + strInputName + "();};");
}

function BindCheckInputToSpan(strInputName) {
    eval("document.forms[0]." + strInputName + ".onclick = function() {UpdateBoundCheckFieldValue(\"" + strInputName + "\");};");
}

function BindSelectInputToSpan(strInputName) {
    eval("var oldHandle_" + strInputName + " = document.forms[0]." + strInputName + ".onchange");
    eval("document.forms[0]." + strInputName + ".onchange= function() {UpdateBoundSelectFieldValue(\"" + strInputName + "\");if(oldHandle_" + strInputName + ")oldHandle_" + strInputName + "();}");
}

function UpdateBoundFieldValue(strInputName) {
    eval("document.all." + strInputName + "_Copy.innerHTML = document.forms[0]." + strInputName + ".value;");
}

function UpdateBoundCheckFieldValue(strInputName) {
    eval("document.all." + strInputName + "_CopyCheck.innerHTML = (document.forms[0]." + strInputName + ".checked?STR_YES:STR_NO);");
}

function UpdateBoundSelectFieldValue(strInputName) {
    eval("document.all." + strInputName + "_CopySelect.innerHTML = document.forms[0]." + strInputName + "[document.forms[0]." + strInputName + ".selectedIndex].text;");
}

var OnSubmitOldBackoStyle;

function CatchOnSubmitToValidate() {
    OnSubmitOldBackoStyle = document.forms[0].onsubmit;
    document.forms[0].onsubmit = ValidateInputFields;
}

function ValidateInputFields() {

    //alert(document.forms[0].elements[40].name);
    //alert(document.all.length);	

    var bRet = true;
    if (null != OnSubmitOldBackoStyle)
        bRet = OnSubmitOldBackoStyle();
    if (!bRet)
        return false;

    for (var k = 0; k < document.forms[0].elements.length; k++) {
        var s = document.forms[0].elements[k].id;
        var ss = s.substring(s.length - 6);


        var sds = s.substring(0, s.length - 6);

        //if we have such limit - radio must been checked
        var sdradio = s.substring(s.length - 11);
        if ("_LimitRadio" == sdradio) {
            eval("var mustcheckradio = document.forms[0]." + s + ".value");

            if (mustcheckradio == "true") {
                var sdradioelem = s.substring(0, s.length - 11);
                eval("var s = document.getElementById('" + sdradioelem + "_Name').innerHTML");

                j = 0;
                for (i = 0; i < document.forms[0].elements[sdradioelem].length; i++) {
                    if (document.forms[0].elements[sdradioelem][i].checked == true) {
                        j++;
                    }
                }
                if (j == 0) {
                    alert(STR_INCORRECT_FORMAT + s);
                    return false;
                }
            }
        }


        if ("_Limit" == ss) {

            eval("var mustchecklimit = document.forms[0]." + sds + "_CheckLimit");
            if (null != mustchecklimit) {
                if ("false" == mustchecklimit.value) {
                    continue;
                }
            }

            eval("var ctlchkboxexist = document.forms[0]." + sds + "_LimitExist");
            if (null != ctlchkboxexist) {
                eval("var ctlchkbox = document.forms[0]." + ctlchkboxexist.value);
                if (!ctlchkbox.checked) {
                    continue;
                }
            }

            eval("var trtr = document.forms[0]." + sds + ss + ".value;");
            eval("var vall = document.forms[0]." + sds + ".value;");
            //alert("var s = document.getElementById('" + sds + "_Name')");
            eval("var s = document.getElementById('" + sds + "_Name').innerHTML");

            if (
				("EGN" != trtr.substring(trtr.length - 3)) &&
				("BULSTAT" != trtr.substring(trtr.length - 7)) &&
				("TAXNUMBER" != trtr.substring(trtr.length - 9)) &&
				("BIN" != trtr.substring(trtr.length - 3)) &&
				("SWIFT" != trtr.substring(trtr.length - 5)) &&
				("BIRTH_DATE" != trtr.substring(trtr.length - 10)) &&
				("DATE_GT_TODAY" != trtr.substring(trtr.length - 13)) &&
				("DATE_L_TODAY" != trtr.substring(trtr.length - 12)) &&
				("DATE_G_TODAY" != trtr.substring(trtr.length - 12))
			) {
                eval("var b = StringValidater(vall, " + trtr + ");");

                if (!b) {
                    if ("_AMOUNT" == trtr.substring(trtr.length - 7)) {
                        alert(STR_INCORRECT_FORMAT + s + "\n" + STR_AMOUNT_FORMAT_DESC);
                    }
                    else {
                        if (-1 == trtr.indexOf("_MIN_SYMBOLS")) {
                            eval("var errorDesc = document.forms[0]." + sds + "_Desc");
                            if (null != errorDesc) {
                                alert(STR_INCORRECT_FORMAT + s + "\n" + errorDesc.value);
                            }
                            else {
                                alert(STR_INCORRECT_FORMAT + s);
                            }
                        }
                        else {
                            eval("var interval =  " + trtr + ";");
                            var interval_min = interval.slice(interval.indexOf(".{") + 2, interval.indexOf(","));
                            var interval_max = interval.slice(interval.lastIndexOf(",") + 1, interval.lastIndexOf("}"));
                            alert(STR_INCORRECT_FORMAT + s + "-" + STR_TEXT_MIN_SYMBOLS + interval_min + STR_DATE_AND + interval_max);
                        }
                    }

                    try {
                        eval("document.getElementById('" + sds + "_ErrText').style.display = '';");
                    }
                    catch (e)
					{ }

                    try {
                        eval("document.forms[0]." + sds + ".focus();");
                    }
                    catch (e)
					{ }
                    //eval("document.forms[0]." + sds + ".focus();");
                    //eval("document.forms[0]." + sds + ".select();");
                    return false;
                }
                else {
                    //tpetmezov 20091007 added new check for amount that can be zero
                    if ("_ALLOW_ZERO_AMOUNT" == trtr.substring(trtr.length - 18)) {
                        var valNumeric = new Number(vall.replace(",", "").replace(".", ""));
                        if (valNumeric < 0) {
                            alert(STR_AMOUNT_RESTRICTION);
                            eval("document.forms[0]." + sds + ".focus();");
                            return false;
                        }
                    }
                    else if ("_AMOUNT" == trtr.substring(trtr.length - 7)) {
                        var valNumeric = new Number(vall.replace(",", "").replace(".", ""));
                        if (valNumeric <= 0) {
                            alert(STR_AMOUNT_RESTRICTION);
                            eval("document.forms[0]." + sds + ".focus();");
                            return false;
                        }


                    }


                }

            }

            if ("EGN" == trtr.substring(trtr.length - 3)) {
                eval("var isBulgarianCitezenField = document.forms[0]." + sds + "_BG_CITEZEN;");
                var isBulgarianCitezen = true;
                if (isBulgarianCitezenField != null && isBulgarianCitezenField.value == '0') {
                    isBulgarianCitezen = false;
                }

                if (!CheckEGN1(vall, isBulgarianCitezen)) {
                    //if (!confirm(STR_INCORRECT_FORMAT + s)) 
                    //{
                    alert(STR_INCORRECT_FORMAT + s)
                    eval("document.forms[0]." + sds + ".focus();");
                    eval("document.forms[0]." + sds + ".select();");
                    return false;
                    //}
                }
            }

            if ("BULSTAT" == trtr.substring(trtr.length - 7)) {
                if (!CheckBULSTAT(vall)) {
                    //if (!confirm(STR_INCORRECT_FORMAT + s)) 
                    //{
                    alert(STR_INCORRECT_FORMAT + s)
                    eval("document.forms[0]." + sds + ".focus();");
                    eval("document.forms[0]." + sds + ".select();");
                    return false;
                    //}petmezov
                }
            }

            if ("TAXNUMBER" == trtr.substring(trtr.length - 9)) {
                if (!CheckTaxNumber(vall)) {
                    if (!confirm(STR_INCORRECT_FORMAT + s)) {
                        eval("document.forms[0]." + sds + ".focus();");
                        eval("document.forms[0]." + sds + ".select();");
                        return false;
                    }
                }
            }

            if ("ACCOUNT" == trtr.substring(trtr.length - 7)) {

                if (!CheckAccountNumber(vall)) {
                    alert(STR_INCORRECT_FORMAT + s);
                    eval("document.forms[0]." + sds + ".focus();");
                    eval("document.forms[0]." + sds + ".select();");
                    return false;
                }
            }

            if ("BIN" == trtr.substring(trtr.length - 3)) {
                if (!CheckBIN(vall)) {
                    alert(STR_INCORRECT_FORMAT + s);
                    eval("document.forms[0]." + sds + ".focus();");
                    eval("document.forms[0]." + sds + ".select();");
                    return false;
                }
            }

            if ("SWIFT" == trtr.substring(trtr.length - 5)) {
                if (!CheckSWIFT(vall)) {
                    alert(STR_INCORRECT_FORMAT + s);
                    eval("document.forms[0]." + sds + ".focus();");
                    eval("document.forms[0]." + sds + ".select();");
                    return false;

                }
            }
            if ("IBAN" == trtr.substring(trtr.length - 4)) {
                if (!CheckIBAN(vall)) {
                    alert(STR_INCORRECT_FORMAT + s);
                    eval("document.forms[0]." + sds + ".focus();");
                    eval("document.forms[0]." + sds + ".select();");
                    return false;

                }
            }
            if ("BIRTH_DATE" == trtr.substring(trtr.length - 10)) {
                if (!CheckDateWithToday(vall, 'lt')) {
                    alert(STR_INCORRECT_FORMAT + s);
                    eval("document.forms[0]." + sds + ".focus();");
                    eval("document.forms[0]." + sds + ".select();");
                    return false;

                }
            }
            if ("DATE_GT_TODAY" == trtr.substring(trtr.length - 13)) {
                if (!CheckDateWithToday(vall, 'gt')) {
                    alert(STR_INCORRECT_FORMAT + s);
                    eval("document.forms[0]." + sds + ".focus();");
                    eval("document.forms[0]." + sds + ".select();");
                    return false;

                }
            }
            if ("DATE_L_TODAY" == trtr.substring(trtr.length - 12)) {
                if (!CheckDateWithToday(vall, 'l')) {
                    alert(STR_INCORRECT_FORMAT + s);
                    eval("document.forms[0]." + sds + ".focus();");
                    eval("document.forms[0]." + sds + ".select();");
                    return false;

                }
            }
            if ("DATE_G_TODAY" == trtr.substring(trtr.length - 12)) {
                if (!CheckDateWithToday(vall, 'g')) {
                    alert(STR_INCORRECT_FORMAT + s);
                    eval("document.forms[0]." + sds + ".focus();");
                    eval("document.forms[0]." + sds + ".select();");
                    return false;

                }
            }

        }

        ss = s.substring(s.length - 10);
        sds = s.substring(0, s.length - 10);
        if ("_BindLimit" == ss) {
            eval("var strBindLimit = document.forms[0]." + s + ".value;");
            var arr = strBindLimit.split(";");
            eval("var strFirst = document.forms[0]." + arr[0] + ".value;");
            eval("var strSecond = document.forms[0]." + arr[1] + ".value;");

            if (strFirst == strSecond) {
                eval("var b = document.forms[0]." + sds + ".checked");
                if (b) {
                    alert(STR_SAME_BAES);
                    return false;
                }
            }
        }

    }

    if (document.forms[0].Rings)//todo:REMOVE IT
    {
        if (document.forms[0].Rings.checked == true) {
            return confirm(STR_RINGS);
        }
    }

    return bRet;
}


function CatchAllOnSubmitToValidate() {
    OnSubmitOldBackoStyle = document.forms[0].onsubmit;
    document.forms[0].onsubmit = ValidateAllInputFields;
}

function ValidateAllInputFields() {
    //    StopSubmitSpecified = false;
    var strFocusElement = "";
    var bRet = true;
    if (null != OnSubmitOldBackoStyle)
        bRet = OnSubmitOldBackoStyle();
    if (!bRet)
        return false;

    for (var k = 0; k < document.forms[0].elements.length; k++) {
        var s = document.forms[0].elements[k].id;
        var ss = s.substring(s.length - 6);

        var sds = s.substring(0, s.length - 6);

        if ("_Limit" == ss) {

            eval("var mustchecklimit = document.forms[0]." + sds + "_CheckLimit");
            if (null != mustchecklimit) {
                if ("false" == mustchecklimit.value) {
                    continue;
                }
            }

            eval("var trtr = document.forms[0]." + sds + ss + ".value;");
            eval("var vall = document.forms[0]." + sds + ".value;");
            eval("var s = document.getElementById('" + sds + "_Name').innerHTML");
            eval("var b;");

            eval("var mustthrowerror = document.forms[0]." + sds + "_Limit");
            if ((null != mustthrowerror) && ("THROW_ERROR" == mustthrowerror.value))
                eval("b = false;");
            else
                eval("b = StringValidater(vall, " + trtr + ");");

            if (!b) {
                try {
                    eval("document.getElementById('" + sds + "_ErrText').style.display = '';");
                }
                catch (e)
				{ }

                if (strFocusElement == "")
                    strFocusElement = sds;

                bRet = false;
            }
            else {
                if ("_ALLOW_ZERO_AMOUNT" == trtr.substring(trtr.length - 18)) {
                    var valNumeric = new Number(vall.replace(",", "").replace(".", ""));
                    if (valNumeric < 0) {
                        //alert(STR_AMOUNT_RESTRICTION);
                        eval("document.getElementById('" + sds + "_ErrText').innerHTML = '" + STR_AMOUNT_RESTRICTION + "';");
                        eval("document.getElementById('" + sds + "_ErrText').style.display = '';");
                        bRet = false;
                        continue;
                    }
                }
                else if ("_AMOUNT" == trtr.substring(trtr.length - 7)) {
                    var valNumeric = new Number(vall.replace(",", "").replace(".", ""));
                    if (valNumeric <= 0) {
                        //alert(STR_AMOUNT_RESTRICTION);
                        eval("document.getElementById('" + sds + "_ErrText').innerHTML = '" + STR_AMOUNT_RESTRICTION + "';");
                        eval("document.getElementById('" + sds + "_ErrText').style.display = '';");
                        bRet = false;
                        continue;
                    }
                }

                try {
                    eval("document.getElementById('" + sds + "_ErrText').style.display = 'none';");
                }
                catch (e)
				{ }
            }
        }
    } //for

    try {
        if (strFocusElement != "")
            eval("document.forms[0]." + strFocusElement + ".focus();");
    }
    catch (e)
	{ }

    return bRet;
} //ValidateAllInputFields


function ValidateGridFields(columnNames, rowCount) {
    var currRow = 0;

    for (var i = 0; i < rowCount; i++) {
        currRow = i + 1;
        for (var k = 0; k < columnNames.length; k++) {
            var s = columnNames[k];
            var sds = s + currRow;

            if (document.getElementById(s + "_Limit")) {

                eval("var mustchecklimit = document.getElementById('" + s + "_CheckLimit');");
                if (null != mustchecklimit) {
                    if ("false" == mustchecklimit.value)
                        continue;
                }

                eval("var trtr = document.getElementById('" + s + "_Limit').value;");
                eval("var vall = document.getElementById('" + sds + "').value;");
                eval("var s = document.getElementById('" + s + "_Name').innerHTML;");

                if (
				    ("EGN" != trtr.substring(trtr.length - 3)) &&
				    ("BULSTAT" != trtr.substring(trtr.length - 7)) &&
				    ("TAXNUMBER" != trtr.substring(trtr.length - 9)) &&
				    ("BIN" != trtr.substring(trtr.length - 3)) &&
				    ("SWIFT" != trtr.substring(trtr.length - 5)) &&
				    ("BIRTH_DATE" != trtr.substring(trtr.length - 10)) &&
				    ("DATE_GT_TODAY" != trtr.substring(trtr.length - 13)) &&
				    ("DATE_L_TODAY" != trtr.substring(trtr.length - 12)) &&
				    ("DATE_G_TODAY" != trtr.substring(trtr.length - 12))
			    ) {
                    eval("var b = StringValidater(vall, " + trtr + ");");

                    if (!b) {
                        if ("_AMOUNT" == trtr.substring(trtr.length - 7)) {
                            alert(STR_INCORRECT_FORMAT + s + " " + STR_LOANS_ON_ROW + " " + currRow + "\n" + STR_AMOUNT_FORMAT_DESC);
                        }
                        else {
                            if (-1 == trtr.indexOf("_MIN_SYMBOLS")) {
                                eval("var errorDesc = document.getElementById('" + sds + "_Desc');");
                                if (null != errorDesc)
                                    alert(STR_INCORRECT_FORMAT + s + " " + STR_LOANS_ON_ROW + " " + currRow + "\n" + errorDesc.value);
                                else
                                    alert(STR_INCORRECT_FORMAT + s + " " + STR_LOANS_ON_ROW + " " + currRow);
                            }
                            else {
                                eval("var interval =  " + trtr + ";");
                                var interval_min = interval.slice(interval.indexOf(".{") + 2, interval.indexOf(","));
                                var interval_max = interval.slice(interval.lastIndexOf(",") + 1, interval.lastIndexOf("}"));
                                alert(STR_INCORRECT_FORMAT + s + " " + STR_LOANS_ON_ROW + " " + currRow + "-" + STR_TEXT_MIN_SYMBOLS + interval_min + STR_DATE_AND + interval_max);
                            }
                        }

                        eval("document.getElementById('" + sds + "').focus();");
                        return false;
                    }
                    else {
                        if ("_ALLOW_ZERO_AMOUNT" == trtr.substring(trtr.length - 18)) {
                            var valNumeric = new Number(vall.replace(",", "").replace(".", ""));
                            if (valNumeric < 0) {
                                alert(STR_AMOUNT_RESTRICTION);
                                eval("document.getElementById('" + sds + "').focus();");
                                return false;
                            }
                        }
                        else if ("_AMOUNT" == trtr.substring(trtr.length - 7)) {
                            var valNumeric = new Number(vall.replace(",", "").replace(".", ""));
                            if (valNumeric <= 0) {
                                alert(STR_AMOUNT_RESTRICTION);
                                eval("document.getElementById('" + sds + "').focus();");
                                return false;
                            }
                        }
                    }
                }

                if ("EGN" == trtr.substring(trtr.length - 3)) {
                    eval("var isBulgarianCitezenField = document.getElementById('" + sds + "_BG_CITEZEN');");
                    var isBulgarianCitezen = true;
                    if (isBulgarianCitezenField != null && isBulgarianCitezenField.value == '0') {
                        isBulgarianCitezen = false;
                    }

                    if (!CheckEGN1(vall, isBulgarianCitezen)) {
                        alert(STR_INCORRECT_FORMAT + s + " " + STR_LOANS_ON_ROW + " " + currRow);
                        eval("document.getElementById('" + sds + "').focus();");
                        eval("document.getElementById('" + sds + "').select();");
                        return false;
                    }
                }
                if ("BULSTAT" == trtr.substring(trtr.length - 7)) {
                    if (!CheckBULSTAT(vall)) {
                        alert(STR_INCORRECT_FORMAT + s + " " + STR_LOANS_ON_ROW + " " + currRow);
                        eval("document.getElementById('" + sds + "').focus();");
                        eval("document.getElementById('" + sds + "').select();");
                        return false;
                    }
                }
                if ("TAXNUMBER" == trtr.substring(trtr.length - 9)) {
                    if (!CheckTaxNumber(vall)) {
                        if (!confirm(STR_INCORRECT_FORMAT + s)) {
                            eval("document.getElementById('" + sds + "').focus();");
                            eval("document.getElementById('" + sds + "').select();");
                            return false;
                        }
                    }
                }
                if ("ACCOUNT" == trtr.substring(trtr.length - 7)) {
                    if (!CheckAccountNumber(vall)) {
                        alert(STR_INCORRECT_FORMAT + s + " " + STR_LOANS_ON_ROW + " " + currRow);
                        eval("document.getElementById('" + sds + "').focus();");
                        eval("document.getElementById('" + sds + "').select();");
                        return false;
                    }
                }
                if ("BIN" == trtr.substring(trtr.length - 3)) {
                    if (!CheckBIN(vall)) {
                        alert(STR_INCORRECT_FORMAT + s + " " + STR_LOANS_ON_ROW + " " + currRow);
                        eval("document.getElementById('" + sds + "').focus();");
                        eval("document.getElementById('" + sds + "').select();");
                        return false;
                    }
                }
                if ("SWIFT" == trtr.substring(trtr.length - 5)) {
                    if (!CheckSWIFT(vall)) {
                        alert(STR_INCORRECT_FORMAT + s + " " + STR_LOANS_ON_ROW + " " + currRow);
                        eval("document.getElementById('" + sds + "').focus();");
                        eval("document.getElementById('" + sds + "').select();");
                        return false;
                    }
                }
                if ("IBAN" == trtr.substring(trtr.length - 4)) {
                    if (!CheckIBAN(vall)) {
                        alert(STR_INCORRECT_FORMAT + s + " " + STR_LOANS_ON_ROW + " " + currRow);
                        eval("document.getElementById('" + sds + "').focus();");
                        eval("document.getElementById('" + sds + "').select();");
                        return false;
                    }
                }
                if ("BIRTH_DATE" == trtr.substring(trtr.length - 10)) {
                    if (!CheckDateWithToday(vall, 'lt')) {
                        alert(STR_INCORRECT_FORMAT + s + " " + STR_LOANS_ON_ROW + " " + currRow);
                        eval("document.getElementById('" + sds + "').focus();");
                        eval("document.getElementById('" + sds + "').select();");
                        return false;
                    }
                }
                if ("DATE_GT_TODAY" == trtr.substring(trtr.length - 13)) {
                    if (!CheckDateWithToday(vall, 'gt')) {
                        alert(STR_INCORRECT_FORMAT + s + " " + STR_LOANS_ON_ROW + " " + currRow);
                        eval("document.getElementById('" + sds + "').focus();");
                        eval("document.getElementById('" + sds + "').select();");
                        return false;
                    }
                }
                if ("DATE_L_TODAY" == trtr.substring(trtr.length - 12)) {
                    if (!CheckDateWithToday(vall, 'l')) {
                        alert(STR_INCORRECT_FORMAT + s + " " + STR_LOANS_ON_ROW + " " + currRow);
                        eval("document.getElementById('" + sds + "').focus();");
                        eval("document.getElementById('" + sds + "').select();");
                        return false;
                    }
                }
                if ("DATE_G_TODAY" == trtr.substring(trtr.length - 12)) {
                    if (!CheckDateWithToday(vall, 'g')) {
                        alert(STR_INCORRECT_FORMAT + s + " " + STR_LOANS_ON_ROW + " " + currRow);
                        eval("document.getElementById('" + sds + "').focus();");
                        eval("document.getElementById('" + sds + "').select();");
                        return false;
                    }
                }
            } //document.getElementById(s+"_Limit")
        } //next k
    } //next i

    return true;
} //ValidateGridFields


function StringValidater(str, strRegExpr) {
    str = TrimString(str);
    eval("var re = " + strRegExpr)
    var bRes = re.test(str);
    if (bRes) {//so strRegExpr a substring of the str but is it the whole string
        var strRes = str.replace(re, "");
        bRes = (strRes == "")
    }
    return bRes;
}; //StringValidater

/*
0 = MSIE
1 = Netscape
2 = Opera
3 = Other
*/
function GetUserAgent() {
    var strVersion;

    if (-1 < navigator.userAgent.indexOf("Opera"))
        return 2;
    else if (-1 < navigator.userAgent.indexOf("Netscape"))
        return 1;
    else if (-1 < navigator.userAgent.indexOf("MSIE"))
        return 0;
    else
        return 3;
} //GetUserAgent()

function CancelValidation() {
    document.forms[0].onsubmit = null;
    return true;
}

function DAISConvertToDate(s) {
    if (!StringValidater(s, STR_LIMIT_DATE)) return null;

    var year, month, day;
    year = new Number(s.substring(6, 10));
    month = new Number(s.substring(3, 5));
    day = new Number(s.substring(0, 2));

    var dt = new Date();
    dt.setFullYear(year, month - 1, day);
    return dt;
}


function CCookies() {
    this.saveCookie = function (name, value, days) {
        if (days) {
            var date = new Date();
            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
            var expires = "; expires=" + date.toGMTString();
        }
        else expires = "";
        document.cookie = name + "=" + value + expires + "; path=/";
    };

    this.saveCookieToOpener = function (name, value, days) {
        if (days) {
            var date = new Date();
            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
            var expires = "; expires=" + date.toGMTString();
        }
        else expires = "";
        if (window.opener && (!window.opener.closed)) {
            window.opener.document.cookie = name + "=" + value + expires + "; path=/";
        }
    };

    this.readCookie = function (name) {
        var nameEQ = name + "=";
        var ca = document.cookie.split(';');
        for (var i = 0; i < ca.length; i++) {
            var c = ca[i];
            while (c.charAt(0) == ' ') c = c.substring(1, c.length);
            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
        }
        return null;
    };

    this.deleteCookie = function (name) {
        this.saveCookie(name, "", -1);
    }
}; //CCookies

function PreSubmitForm_Filters(where) {
    document.forms[0].rptResultTarget.value = where;
    return true;
}

//function LesThen(fisrt,second)
//{
//if(fisrt<second)
//	return true;
//else
//return false;
//}

function LesThen(a, b) {

    if (TrimString(b.toString()).indexOf(",") != -1) {
        b1 = '0' + b.substring(0, b.indexOf(",")) + '.' + b.substring(b.indexOf(",") + 1);
        b1 = parseFloat(b1);
    }
    else
        b1 = parseFloat(b);

    if (TrimString(a.toString()).indexOf(",") != -1) {
        a1 = '0' + a.substring(0, a.indexOf(",")) + '.' + a.substring(a.indexOf(",") + 1);
        a1 = parseFloat(a1);
    }
    else
        a1 = parseFloat(a);


    if (a1 < b1)
        return true;
    else
        return false;

}

function IsGreaterOrEqualThan(a, b) {

    if (TrimString(b.toString()).indexOf(",") != -1) {
        b1 = '0' + b.substring(0, b.indexOf(",")) + '.' + b.substring(b.indexOf(",") + 1);
        b1 = parseFloat(b1);
    }
    else
        b1 = parseFloat(b);

    if (TrimString(a.toString()).indexOf(",") != -1) {
        a1 = '0' + a.substring(0, a.indexOf(",")) + '.' + a.substring(a.indexOf(",") + 1);
        a1 = parseFloat(a1);
    }
    else
        a1 = parseFloat(a);

    return a1 >= b1;

}


function IsGreaterThan(a, b) {
    a1 = new Number(a);
    b1 = new Number(b);
    return a1 > b1;
}

//20.03.2004 anyone: use when print   
//!!! need element with id="HideWhenPrint" in page, span for example
//to do: make it work with any element id
function printInfo() {
    //window.onbeforeprint = hideInfo;
    //window.onafterprint = showInfo;
    window.print();

}

function hideInfo() {
    var h = document.getElementById("HideWhenPrint");
    h.style.display = 'none';
}
function showInfo() {
    var h = document.getElementById("HideWhenPrint");
    h.style.display = '';
}


function getX(who) {
    var off = 0;
    var tmpWho = who;
    //IE, opera 5+
    if (tmpWho.offsetParent != null && tmpWho.offsetLeft != null) while (tmpWho.offsetParent) { tmpWho = tmpWho.offsetParent; off += tmpWho.offsetLeft; }
    //must be Opera4 and NS
    if (who.x) return who.x;
    return off;
}
//=======================
function getY(who) {
    var off = who.offsetTop;
    var tmpWho = who;
    //IE, Opera 5+
    if (tmpWho.offsetParent != null && tmpWho.offsetTop != null) while (tmpWho.offsetParent) { tmpWho = tmpWho.offsetParent; off += tmpWho.offsetTop; }
    //must be Opera and NS
    if (who.y) return who.y;

    return off;
}

function TrimString(sInString) {
    sInString = sInString.replace(/^\s+/g, ""); // strip leading
    return sInString.replace(/\s+$/g, ""); // strip trailing
}

function IsBGNAccount(AccNumber) {
    var CntrNumber = AccNumber.substring(1, 2);

    if (CntrNumber == "0")
        return true;
    else
        return false;
}

function IsBudgetAccount(AccNumber) {

    var StartNumber = AccNumber.substring(0, 1);

    if (StartNumber == "3" || StartNumber == "5")
        return true;
    else
        return false;
}

function FillParentCtrl(strCtl, strValue) {
    if ("" == strCtl) return;
    if (window.opener) {
        if (!window.opener.closed) {
            var ctl = window.opener.document.getElementById(strCtl);
            ctl.value = strValue;
            //tpetmezov 20110401 - validate input in the opener.
            window.opener.validateFieldById(strCtl);
            window.opener.FireEventOnFieldById(strCtl,"change");

            window.opener.focus();
        }
    }
}

function ValidateParentCtrl(strCtl) {
    if ("" == strCtl) return;
    if (window.opener) {
        if (!window.opener.closed) {
            //tpetmezov 20110401 - validate input in the opener.
            window.opener.validateFieldById(strCtl);
        }
    }
}


function validateFieldById(id) {
    $('#' + id).valid();
}

function FireEventOnFieldById(id, event) {
    $('#' + id).trigger(event);
}


function SetDirtyMoneyParentControl() {
    if (window.opener) {
        if (!window.opener.closed) {
            window.opener.ShowHideDivDirtyMoney();
        }
    }
}

function ShowHideDivDirtyMoney() {
    if (myDM) {
        myDM.ShowHideDivDirtyMoney();
    }
}

function MakeWorking(lnk) {
    var re = new RegExp('&amp;', 'gi');
    var l = lnk.replace(re, '&');
    re = new RegExp('&#x26;', 'gi');
    l = l.replace(re, '&');
    return l;
}

function fRoundNum(val, numDec) {
    var fact = Math.pow(10, numDec)
    var ret = String(Math.round(val * fact) / fact)
    numDec++
    dot = ret.indexOf(".");
    if (dot == 0) {
        ret = "0" + ret;
    }
    else if (dot > 0) {
        while (ret.length < dot + numDec) ret = ret + "0";
    }
    return ret
}

function hideTooltip() {
    document.getElementById('tooltip').style.visibility = 'hidden';
}

function getPageLeft(el) {
    var left = 0;
    do
        left += el.offsetLeft;
    while ((el = el.offsetParent));
    return left;
}

function getPageTop(el) {
    var top = 0;
    do
        top += el.offsetTop;
    while ((el = el.offsetParent));
    return top;
}

var ibanField;
var bicField;
var bicNameField;
var doShowAlert;

function GetBICByIBAN(m_ibanField, URLtoSubmit, m_bicField, m_bicNameField, showAlert) {

    ibanField = m_ibanField;
    bicField = m_bicField;
    bicNameField = m_bicNameField;
    doShowAlert = showAlert;

    //var s = document.getElementById(ibanField + "_Name").innerHTML;
    var val = document.getElementById(ibanField).value;

    if (val.length == 0 || !CheckIBAN(val)) {
        //alert(STR_INCORRECT_FORMAT + s);
        //		eval("document.forms[0]." + ibanField + ".focus();");
        //		eval("document.forms[0]." + ibanField + ".select();");
        return false;

    }

    var rqBody = MakeWorking(
				"c2s=getBICByIBAN" +
				"&#x26;iban=" + val);


    $.daisAjax({
        cache: false,
        type: "POST",
        async: false,
        url: MakeRequestAndChangeXmlID('02Services/09Orders/.getBICByIBAN'),
        data: rqBody,
        dataType: "html",
        success: OnGetBICByIBANCompleted,
        error: HidePleaseWaitDialogAndShowGeneralError

    });
    return false;
}

function OnGetBICByIBANCompleted(data) {


    var obj = Sys.Serialization.JavaScriptSerializer.deserialize(data);

    if (obj.isOK) {

        if (bicField != '' && bicField != null) {
            $get(bicField).value = obj.bic;
        }
        if (bicNameField != '' && bicNameField != null) {
            $get(bicNameField).value = obj.bicName;
        }
    }
    else {

        if (bicField != '' && bicField != null) {
            $get(bicField).value = '';
        }
        if (bicNameField != '' && bicNameField != null) {
            $get(bicNameField).value = '';
        }

        if (doShowAlert) {
            alert(obj.errorMsg);
        }
        else {
            SetErrorMsgValidationSpan($get(ibanField).name, STR_ERR_IBAN_BAE);
        }
        return false;
    }
}

function CheckDirtyMoney() {
    if (!document.forms[0].DirtyMoney)
        return true;

    if (LesThen(30000, GetCheckSum())) {
        if (document.forms[0].DirtyMoney.value == "") {
            alert(STR_DIRTYMONEY);
            document.forms[0].DirtyMoney.focus();
            return false;
        }
    }
    return true;
}

function CheckStatForm() {
    if (document.forms[0].PayeeSituation)
        if (document.forms[0].PayeeSituation[1].checked) {
            if (document.forms[0].PayeeCountry.value == "100") {
                alert(STR_STAT_FORM_COUNTRY);
                return false;
            }
        }
    if (document.forms[0].PayerSituation)
        if (document.forms[0].PayerSituation[1].checked) {
            if (document.forms[0].PayerCountry.value == "100") {
                alert(STR_STAT_FORM_COUNTRY);
                return false;
            }
        }

    return true;
}

function Pair(first, second) {
    this.first = first;
    this.second = second;
}

function ToFloat(a) {
    var a1 = 0;
    if (TrimString(a.toString()).indexOf(",") != -1) {
        a1 = '0' + a.substring(0, a.indexOf(",")) + '.' + a.substring(a.indexOf(",") + 1);
        a1 = parseFloat(a1);
    }
    else {
        a1 = parseFloat(a);
    }
    return a1;
}

function ToFloatWithNullOrWhiteSpace(a) {
    if (a == null || TrimString(a.toString()) == "") {
        return 0;
    }
    else {
        return ToFloat(a);
    }
}

function toggleDisabled(el) {
    try {
        el.disabled = el.disabled ? false : true;
    }
    catch (E) {
    }
    if (el.childNodes && el.childNodes.length > 0) {
        for (var x = 0; x < el.childNodes.length; x++) {
            toggleDisabled(el.childNodes[x]);
        }
    }
}

function DisabledElement(el) {
    try {
        el.disabled = true;
    }
    catch (E) {
    }
    if (el.childNodes && el.childNodes.length > 0) {
        for (var x = 0; x < el.childNodes.length; x++) {
            DisabledElement(el.childNodes[x]);
        }
    }
}


//Online Registration Account  validation 
function HasAtleastOneFilledAccountOnlineRegistration(accountCountFields) {

    for (var i = 0; i < accountCountFields; i++) {
        var iban = document.getElementById("m_ctrl_iban_" + i);
        if (TrimString(iban.value).length != 0) {
            return true;
        }
    }
    return false;
}

function ValidateAccountsOnlineRegistration(accountCountFields) {
    var result = true;

    for (var i = 0; i < accountCountFields; i++) {
        if (!ValidateAccountOnlineRegistration(i)) {
            result = false;
            break;
        }
    }

    return result;
}

function ValidateAccountOnlineRegistration(Id) {
    var result = true;

    var iban = document.getElementById("m_ctrl_iban_" + Id);

    if (TrimString(iban.value).length != 0) {
        if (CheckIBAN(iban.value) && CheckValidBankIBAN(iban.value)) {


            if (!ValidateLimitsOnlineRegistration(Id)) {
                result = false;
            }
        }
        else {
            alert(STR_INCORRECT_FORMAT + 'IBAN');
            iban.select();
            iban.focus();
            result = false;
        }
    }

    return result;
}

function ValidateLimitsOnlineRegistration(Id) {

    if (!document.getElementById("m_ctrl_withoutLimits_" + Id).checked) {
        var limitLabel = document.getElementById("m_ctrl_Limit_Name").innerHTML + ' ';
        var docLimitLabel = limitLabel + document.getElementById("m_ctrl_DocumentLimit_Name").innerHTML;
        var dayLimitLabel = limitLabel + document.getElementById("m_ctrl_DayLimit_Name").innerHTML;
        var weekLimitLabel = limitLabel + document.getElementById("m_ctrl_WeekLimit_Name").innerHTML;

        var docLimit = document.getElementById("m_ctrl_limit_doc_" + Id);
        var dayLimit = document.getElementById("m_ctrl_limit_day_" + Id);
        var weekLimit = document.getElementById("m_ctrl_limit_week_" + Id);

        if (!StringValidater(docLimit.value, limitsRegEx)) {
            alert(STR_INCORRECT_FORMAT + docLimitLabel);
            docLimit.select();
            docLimit.focus();
            return false;
        }

        if (!StringValidater(dayLimit.value, limitsRegEx)) {
            alert(STR_INCORRECT_FORMAT + dayLimitLabel);
            dayLimit.select();
            dayLimit.focus();
            return false;
        }

        if (!StringValidater(weekLimit.value, limitsRegEx)) {
            alert(STR_INCORRECT_FORMAT + weekLimitLabel);
            weekLimit.select();
            weekLimit.focus();
            return false;
        }

    }


    return true;
}
function CheckForDuplicateIbans(accountCountFields) {
    for (var i = 0; i < accountCountFields; i++) {
        var iban = document.getElementById("m_ctrl_iban_" + i);
        if (TrimString(iban.value).length == 0) {
            continue;
        }
        else {
            for (var j = i + 1; j < accountCountFields; j++) {
                var iban2 = document.getElementById("m_ctrl_iban_" + j);
                if (TrimString(iban.value) == TrimString(iban2.value)) {
                    iban2.select();
                    iban2.focus();
                    return true;
                }
            }
        }
    }
    return false;
}

function show_dialog(dialogID) {
    $('#' + dialogID).dialog('open');
}

function SetNavigationItems(sectionID) {
    var navigDivId = "#navigLeft";
    var sectionSelectorID = "m_ctrl_navigLeft_sectionID_" + sectionID;

    if (sectionID == null || sectionID == "") {
        $(navigDivId).addClass("ui-accordion ui-widget ui-helper-reset")
		    .find("h3")
        //zakomentiraniq kod e za  razpynato menu.
        //.addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-top ui-accordion-header-active")
			    .addClass("ui-accordion-header ui-helper-reset ui-state-default  ui-corner-all ")
        //.prepend('<span class="ui-icon ui-icon-triangle-1-s"/>')
			    .prepend('<span class="ui-icon ui-icon-triangle-1-e"/>')
			    .click(function () {
			        if ($(this).find("a").attr("href") == '#') {
			            $(this).toggleClass("ui-accordion-header-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top")
				        .find(".ui-icon").toggleClass("ui-icon-triangle-1-e").toggleClass("ui-icon-triangle-1-s")
				        .end().next().toggleClass("ui-accordion-content-active").toggle('fast');
			            return false;
			        }
			    })
        //.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content-active").hide().show('fast');
			    .next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom ").hide();
        $(navigDivId)
	        .find("h4")
		        .addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all")
		        .prepend('<span class="ui-icon ui-icon-triangle-1-e"/>');
    }
    else {

        $(navigDivId).addClass("ui-accordion ui-widget ui-helper-reset")
		    .find("h3")
			    .addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ")
			    .prepend('<span class="ui-icon ui-icon-triangle-1-e"/>')
			    .click(function () {
			        if ($(this).find("a").attr("href") == '#') {
			            $(this).toggleClass("ui-accordion-header-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top")
				        .find(".ui-icon").toggleClass("ui-icon-triangle-1-e").toggleClass("ui-icon-triangle-1-s")
				        .end().next().toggleClass("ui-accordion-content-active").toggle('fast');
			            return false;
			        }
			    })
			    .next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom ").hide();
        $(navigDivId)
	        .find("h4")
		        .addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all")
		        .prepend('<span class="ui-icon ui-icon-triangle-1-e"/>');
        $("#" + sectionSelectorID)
            .find("h3").toggleClass("ui-corner-all")
			    .addClass(" ui-accordion-header-active ui-corner-top")
			    .find(".ui-icon").toggleClass("ui-icon-triangle-1-e").toggleClass("ui-icon-triangle-1-s").end()
                .next().addClass("ui-accordion-content-active").show('fast');

        //new
        $("#" + sectionSelectorID)
            .find("h4").find("a").addClass("NavigMenuSelectedItem");
        $("#" + sectionSelectorID)
            .find("h3").find("a").addClass("NavigMenuSelectedItem");
    }
}

function ExtractDateFromEGN(egn) {
    monthNum = egn.substring(2, 4);
    dayNum = egn.substring(4, 6);
    yearNum = egn.substring(0, 2);

    //"За родените преди 01.01.1900 г. към месеца се прибавя числото 20. За родените след 31.12.1999 г. към месеца се прибавя числото 40."
    switch (monthNum / 20) {
        case 0:
            yearAdd = "19";
            break;
        case 1:
            yearAdd = "18";
            break;
        case 2:
            yearAdd = "20";
            break;
        default:
            yearAdd = "19";
            break;
    }

    var dateString = dayNum + "." + monthNum + "." + yearAdd + yearNum;

    return dateString;
}

function GetAge(birthDate) {
    var today = new Date();
    today = new Date(today.getFullYear(), today.getMonth(), today.getDate());
    var age = today.getFullYear() - birthDate.getFullYear();
    var tmpDate = new Date(today.getFullYear() - age, today.getMonth(), today.getDate());
    if (birthDate > tmpDate)
        age--;
    return age;
}

function CreateBBTable() {
    $('div.bbDivTable').wrap("<table class='bbTable' cellspacing='0' cellpadding='0' width='100%' border='0'><tr><td class='resultRight' colspan='2' width='100%'></td></tr></table>");
    $('table.bbTable').prepend("<tr class='resultTop'>" +
                                "<td align='left' width='10'><img src='/images/tbl_bgroundLeft.jpg' alt='' height='15' width='10'/></td>" +
                                "<td align='right' style='z-index:-1'><img src='/images/tbl_bgroundRight.jpg' alt='' height='15' width='15'/></td>" +
                                "</tr>")
                       .append("<tr class='resultBottom'>" +
		                        "<td align='left' width='10'><img src='/images/tbl_bgroundLB.jpg' alt='' height='10' width='10'/></td>" +
		                        "<td align='right'><img src='/images/tbl_bgroundRB.jpg' alt='' height='10' width='10'/></td>" +
	                            "</tr>");
}

function MyParseFloat(val) {
    return ToFloat(val);
}

function MyParseFloat2(val) {
    if (val == "")
        return "";
    return ToFloat(val);
}

function StringFormat(str) {
    for (i = 1; i < arguments.length; i++) {
        str = str.replace('{' + (i - 1) + '}', arguments[i]);
    }
    return str;
}


function CheckIbanForCountry(ibanInput, checkIbanStruct, ibanStructure, checkIbanControl) {
    if (ibanInput != null) {
        var iban = ibanInput.value;

        if (checkIbanStruct == "1") {
            if (!StringValidater(iban, ibanStructure)) {
                alert(STR_INVALID_IBAN_STRUCTURE);
                ibanInput.focus();
                return false;
            }
        }

        if (checkIbanControl == "1") {
            if (!CheckIBANInternational(iban)) {
                alert(STR_INVALID_IBAN_CONTROL_NUMBER);
                ibanInput.focus();
                return false;
            }
        }

    }

    return true;
}

function SetDefaultValueIfEmpty(inputField, defaulValue) {
    if (inputField.value == "") {
        inputField.value = defaulValue;
    }
}

// 
function BitAnd(a, b) {
    var result = ((b & a) == a);
    return result;
}

function BoolAnd(a, b) {
    var result = (b && a);
    return result;
}

function IsTrue(a) {
    var result = new String(a);
    return result.toLowerCase()==='true';
}

function ShowPleaseWaitDialog() {
    ShowPleaseWaitDialog("");
}

function ShowPleaseWaitDialog(titleStr) {

    // alert(document.readyState);
    $(function () {
        var pleaseWaitDiv = $('#PleaseWaitDialog');
        pleaseWaitDiv.attr('title', titleStr);
        pleaseWaitDiv.dialog({
            modal: true,
            bgiframe: true,
            closeOnEscape: false,
            open: function (event, ui) { pleaseWaitDiv.parent().find(".ui-dialog-titlebar-close").hide(); }
        });
    });
}

function HidePleaseWaitDialog() {
    $(function () {
        var pleaseWaitDiv = $('#PleaseWaitDialog');
        //Remove the dialog functionality completely. This will return the element back to its pre-init state.
        if (pleaseWaitDiv.is(":data(dialog)")) {
            pleaseWaitDiv.dialog("destroy");
        }
    });
}

function ShowGeneralError() {
    //$("#generalAJAXError").css("display", "block");
    $(function () {
        var div = $('#generalAJAXError');
        div.dialog({
            modal: true,
            bgiframe: true
            //open: function (event, ui) { $(".ui-dialog-titlebar-close").hide(); }
        });
    });
}


function HidePleaseWaitDialogAndShowGeneralError() {
    HidePleaseWaitDialog();
    ShowGeneralError();
}
function HideGeneralError() {
    //$("#generalAJAXError").css("display", "none");
    $(function () {
        var div = $('#generalAJAXError');
        if (div.is(":data(dialog)")) {
            div.dialog('close');
        }
        //div.dialog('close');
    });
}

function MergeHtmlTables(firstTableId, secondTableId) {
    $("#" + firstTableId + " > tbody:last").append($("#" + secondTableId + " > tbody").html());
    $("#" + secondTableId).remove();
}

function Number2Currency(amount) {
    var result;
    var strAmountRest;
    var strAmount = amount.toString();

    if (IsGreaterThan(strAmount.indexOf(","), -1)) {
        strAmountRest = strAmount.substring(strAmount.indexOf(",") + 1);
        strAmount = strAmount.substring(0, strAmount.indexOf(","));
    }
    else if (IsGreaterThan(strAmount.indexOf("."), -1)) {
        strAmountRest = strAmount.substring(strAmount.indexOf(".") + 1);
        strAmount = strAmount.substring(0, strAmount.indexOf("."));
    }
    else {
        result = amount;
        return result;
    }

    var amountRest = (new Number("0." + strAmountRest));
    result = (new Number(strAmount)) + Math.round(amountRest * 100) / 100;

    return result;
}

function PadRightNumber(numberToPad, n) {
    var result;
    var strNumberRest;
    var strNumber = numberToPad.toString();
    var strSeparator;

    if (IsGreaterThan(strNumber.indexOf(","), -1)) {
        strNumberRest = strNumber.substring(strNumber.indexOf(",") + 1);
        strNumber = strNumber.substring(0, strNumber.indexOf(","));
        strSeparator = ",";
    }
    else if (IsGreaterThan(strNumber.indexOf("."), -1)) {
        strNumberRest = strNumber.substring(strNumber.indexOf(".") + 1);
        strNumber = strNumber.substring(0, strNumber.indexOf("."));
        strSeparator = ".";
    }
    else {
        result = numberToPad;
        return result;
    }

    while (strNumberRest.length < n) {
        strNumberRest = strNumberRest + "0";
    }

    result = strNumber + strSeparator + strNumberRest;
    return result;
}

//tpetmezov 20101228 : logic for showing and hiding approve button on payment pages 
function ShowHidePaymentApproveButton() {
    var signIds = $('input[name=m_ctrl_chb_Sign]:checked').val();
    var sendIDs = $('input[name=m_ctrl_chb_Send]:checked').val();
    if (signIds != null || sendIDs != null) {
        $('#m_ctrl_div_ApproveButton').attr('style', 'visibility:visible');
    }
    else {
        $('#m_ctrl_div_ApproveButton').attr('style', 'visibility:hidden;');
    }
    return true;

}
function ShowHidePaymentActionRow() {
    var signIds = $('input[name=m_ctrl_chb_Sign]:checked').val();
    if (signIds != null) {
        $('#m_ctrl_div_SignButton').attr('style', 'visibility:visible');
        $('#m_ctrl_div_SendButton').attr('style', 'visibility:visible');
        $('#m_ctrl_div_CancelButton').attr('style', 'visibility:visible');
    }
    else {
        $('#m_ctrl_div_SignButton').attr('style', 'visibility:hidden;');
        $('#m_ctrl_div_SendButton').attr('style', 'visibility:hidden;');
        $('#m_ctrl_div_CancelButton').attr('style', 'visibility:hidden;');
    }

}

//20110315 OR: get parameter from the URL query string
function getURLParameterByName(name) {
    var url = MakeWorking(window.location.href);

    name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
    var regexS = "[\\?&]" + name + "=([^&#]*)";
    var regex = new RegExp(regexS);
    var results = regex.exec(url);
    if (results == null)
        return "";
    else
        return decodeURIComponent(results[1].replace(/\+/g, " "));
}

//20110319 OR: copied from offline
function displayDialogHelper() {
    $(document).ready(function () {

        var $loading = $('<img src="/images/loading.gif" alt="loading" class="loadingGif" />');

        $('#payerPicker,#payeePicker,#bankCountryPicker1,#bankCountryPicker2,#choosecntr,#templates_link,#insurancePicker,.dialogPicker').each(function () {
            //            var $dialog = $('<div id="picker"></div>')
            //                .append($loading.clone());
            $(this).unbind('click');
            var $link = $(this).bind('click', function () {
                $(".ui-dialog-overlay").bgiframe();
                $dialog = $('<div id="picker"></div>')
                    .append($loading.clone());
                $dialog
                //added random query parameter, if IE cache pages and returns same info for the pickers
                .load($link.attr('href') + "&r=" + (+new Date()))
                .dialog({
                    autoOpen: false,
                    modal: true,
                    title: 'Bulbank eCash',
                    width: 800,
                    height: 'auto',
                    position: ['center', 'top'],
                    bgiframe: true,
                    //open: function (ev, ui) { $('html').css('overflow-x', 'hidden').css('overflow-y', 'auto'); $('.ui-widget-overlay').css('width', '100%').css('height', '100%'); },
                    close: function (ev, ui) { $(this).remove(); }

                });


                $link.click(function () {
                    $dialog.dialog('open');
                    return false;
                });
                return false;
            });
        });
    });
}

function displayDialogHelperForUrl(urlToLoad, titleToShow) {
    $(document).ready(function () {

        var $loading = $('<img src="/images/loading.gif" alt="loading" class="loadingGif" />');

        $(".ui-dialog-overlay").bgiframe();
        $dialog = $('<div id="picker"></div>')
                    .append($loading.clone());
        $dialog
        //added random query parameter, if IE cache pages and returns same info for the pickers
                .load(urlToLoad + "&r=" + (+new Date()))
                .dialog({
                    autoOpen: false,
                    modal: true,
                    title: titleToShow,
                    width: 800,
                    height: 'auto',
                    position: ['center', 'top'],
                    bgiframe: true,
                    //open: function (ev, ui) { $('html').css('overflow-x', 'hidden').css('overflow-y', 'auto'); $('.ui-widget-overlay').css('width', '100%').css('height', '100%'); },
                    close: function (ev, ui) {
                        //$('html').css('overflow', 'auto');
                        $(this).remove();
                    }

                });

        $dialog.dialog('open');

        return false;
    });
}

function addMonths(toDate, months) {
    var newDate = new Date(toDate.getFullYear(), toDate.getMonth() + parseInt(months), toDate.getDate());
    if (newDate.getDate() < toDate.getDate()) {//JS has a bug - for jan 31 returns 03 mar if add 1 month; fix the overflow
        newDate.setDate(newDate.getDate() - newDate.getDate());
    }
    return newDate;
}

function dateFormat_ddMMyyyy(dt) {
    return (dt.getDate() < 10 ? "0" + dt.getDate() : dt.getDate()) + '.' + ((dt.getMonth() + 1) < 10 ? "0" + (dt.getMonth() + 1) : (dt.getMonth() + 1)) + '.' + dt.getFullYear();
}


var fixrateField;
function GetCCYAndRateBySWIFT(m_ccyValue, m_fixrateField) {

    fixrateField = $("#" + m_fixrateField);

    var val = m_ccyValue;

    if (val.length == 0) {
        return false;
    }

    var rqBody = MakeWorking(
				"c2s=getCCYAndRateBySWIFT" +
				"&#x26;ccy=" + val);


    $.daisAjax({
        cache: false,
        type: "POST",
        url: MakeRequestAndChangeXmlID('02Services/09Orders/.getCCYAndRateBySWIFT'),
        data: rqBody,
        dataType: "html",
        success: OnGetCCYAndRateBySWIFTCompleted,
        error: HidePleaseWaitDialogAndShowGeneralError

    });

    return false;
}

function OnGetCCYAndRateBySWIFTCompleted(data) {


    var obj = Sys.Serialization.JavaScriptSerializer.deserialize(data);

    if (obj.isOK) {

        if (fixrateField != '' && fixrateField != null) {
            $(fixrateField).val(obj.fixrate);
            $(fixrateField).trigger("changeFixrate");
        }
    }
    else {

        if (fixrateField != '' && fixrateField != null) {
            $(fixrateField).val('');
        }
        alert(obj.errorMsg);
        return false;
    }
}

function CheckIbanForCountryNoAlert(ibanInput, checkIbanStruct, ibanStructure, checkIbanControl) {
    if (ibanInput != null) {
        var iban = ibanInput.value;

        if (checkIbanStruct == "1") {
            if (!StringValidater(iban, ibanStructure)) {
                //alert(STR_INVALID_IBAN_STRUCTURE);
                //ibanInput.focus();
                return false;
            }
        }

        if (checkIbanControl == "1") {
            if (!CheckIBANInternational(iban)) {
                //alert(STR_INVALID_IBAN_CONTROL_NUMBER);
                //ibanInput.focus();
                return false;
            }
        }

    }

    return true;
}

function SetErrorMsgValidationSpan(inputName, errorMsg) {
    var errObj = $('[data-valmsg-for="' + inputName + '"]');
    if (errObj && errObj != 'undefined') {
        errObj.removeClass('field-validation-valid').addClass('field-validation-error');
        errObj.get(0).innerHTML = errorMsg;
    }
}

function cloneToEmptyObj(obj) {
    if (obj == null || typeof (obj) != 'object' || Object.prototype.toString.call(obj) === '[object Date]') {
        return "";
    }

    var temp = new obj.constructor();
    for (var key in obj) {
        temp[key] = cloneToEmptyObj(obj[key]);
    }
    return temp;
}


function ClearConnectedSelects() {
    var select1 = $("#" + firstSelectId);
    select1.val("0");
    var select2 = $("#" + secondSelectId);
    select2.val("0");
}

//functions for two connected selects
function FillConnectedSelects() {

    //    $("#" + firstSelectId).css("width", "auto");
    //    $("#" + secondSelectId).css("width", "auto");

    FillBC();
    FillBA();

    $("#" + firstSelectId).change(function () {
        FillBA();
        $("#" + firstSelectId).trigger("bclchangebafill");
     });
   



}

function FillBC() {   
    var select = $("#" + firstSelectId);
    select.html('');

    select.append($('<option></option>').val(0).html(firstSelectFirstOptionStr));

    var bnkCount = 0;
    $.each(colBC,
		function (id, option) {
		    bnkCount++;
		    if (selBC == option.value) {
		        select.append($('<option selected="true"></option>').val(option.value).html(option.name).attr("title", option.name));
		    }
		    else {
		        select.append($('<option></option>').val(option.value).html(option.name).attr("title", option.name));
		    }
		}
	);

    if (bnkCount == 1) {
        $("#" + firstSelectId + " option[value='0']").remove();
    }


}

function FillBA() {
    FillSeconSelect(FillBA_Internal);
}

function FillSeconSelect(internalFill){
    /*zapazi selektiranata smetka i q wyzstanowi nakraq(ako move)*/
    if (document.getElementById(secondSelectId).options.length != 0)
        selBA = document.getElementById(secondSelectId).options[document.getElementById(secondSelectId).options.selectedIndex].value;

    var select = $("#" + secondSelectId);
    var indxBC = document.forms[0].bcl.options.selectedIndex;

    if (indxBC == 0) {
        select.html('');
        select.append($('<option></option>').val(0).html(secondSelectFirstOptionStr));

        for (indxBC = 0; LesThen(indxBC, mapBC_BA.length) ; indxBC++) {
            internalFill(select, indxBC);
        }
    }
    else {
        indxBC--;

        select.html('');
        select.append($('<option></option>').val(0).html(secondSelectFirstOptionStr));
        internalFill(select, indxBC);
    }

    //kogato imame samo edna realna stoinost mahame defaultnatata
    if (document.getElementById(secondSelectId).options.length == 2) {
        $("#" + secondSelectId + " option[value='0']").remove();
    }

}

function FillBA_Internal(select, indxBC) {
    var colBA = mapBC_BA[indxBC];
    //alert(colBA.length);

    for (var i = 0; LesThen(i, colBA.length); i++) {
        if (selBA == colBA[i][1]) {
            select.append($('<option selected="true"></option>').val(colBA[i][1]).html(colBA[i][0]));
        }
        else {
            select.append($('<option></option>').val(colBA[i][1]).html(colBA[i][0]));
        }
    }
}

function FillConnectedSelectsCards() {
    FillBC();
    FillSTCards();
    FillBACards();

    $("#" + firstSelectId).change(function () {
        FillSTCards();
        FillBACards();
    });

    $("#" + thirdSelectId).change(function () {
        FillBACards();
    });
}

function FillSTCards() {
    if (document.getElementById(thirdSelectId).options.length != 0)
        selST = document.getElementById(thirdSelectId).options[document.getElementById(thirdSelectId).options.selectedIndex].value;

    var select = $("#" + thirdSelectId);
    var indxBC = document.forms[0].bcl.options.selectedIndex;

    if (indxBC == 0) {
        select.html('');
        FillST_FirstOption(select);
        for (indxBC = 0; LesThen(indxBC, mapBC_State.length) ; indxBC++) {
            FillST_InternalCards(select, indxBC);
        }
    }
    else {
        indxBC--;

        select.html('');
        FillST_FirstOption(select);
        FillST_InternalCards(select, indxBC);
    }

    //kogato imame samo edna realna stoinost mahame defaultnatata
    if (document.getElementById(thirdSelectId).options.length == 2) {
        $("#" + thirdSelectId + " option[value='0']").remove();
    }

}

function FillST_FirstOption(select)
{
    if (selST == "0")
        select.append($('<option selected="true"></option>').val(0).html(thirdSelectFirstOptionStr));
    else
        select.append($('<option></option>').val(0).html(thirdSelectFirstOptionStr));
}

function FillST_InternalCards(select, indxBC) {
    var colBA = mapBC_State[indxBC];
    //alert(colBA.length);
    for (var i = 0; LesThen(i, colBA.length) ; i++) {
        var statusExists = false;

        select.find('option').each(function() {
            if ($(this).val() == colBA[i][0]) {
                statusExists = true;
            }
        });

        if (!statusExists) {
            if (selST == colBA[i][0] || (colBA[i][0] == "Активна" && selST!="0")) {
                select.append($('<option selected="true"></option>').val(colBA[i][0]).html(colBA[i][1]));
            }
            else {
                select.append($('<option></option>').val(colBA[i][0]).html(colBA[i][1]));
            }
        }
    }
}

function FillBACards() {
    FillSeconSelect(FillBA_InternalCards);
}


function FillBA_InternalCards(select, indxBC) {
    var colBA = mapBC_BA[indxBC];
    //alert(colBA.length);

    var indxST = $("#" + thirdSelectId + " option:selected").val();

    for (var i = 0; LesThen(i, colBA.length) ; i++) {
        if (indxST == 0 || colBA[i][0] == indxST) {

            if (selBA == colBA[i][1]) {
                select.append($('<option selected="true"></option>').val(colBA[i][1]).html(colBA[i][1]));
            }
            else {
                select.append($('<option></option>').val(colBA[i][1]).html(colBA[i][1]));
            }
        }
    }
}


var bankAccIDField;

function GetFundDeclarationByAccID(m_bankAccIDField) {

    bankAccIDField = m_bankAccIDField;
    eval("var val = document.getElementById('" + bankAccIDField + "').value");

    var rqBody = MakeWorking(
				"c2s=getFundDeclarationByClientID" +
				"&#x26;BankAccountID=" + val);

    var wRq = new Sys.Net.WebRequest();
    wRq.set_url(MakeRequestAndChangeXmlID('02Services/09Orders/.getFundDeclarationByClientID'));
    wRq.set_httpVerb("POST");
    wRq.set_body(rqBody);

    wRq.add_completed(OnGetFundDeclarationByAccID);
    wRq.invoke();

    return false;
}

function SetExcludedPaymentsInPacketPayment() {
    var excludedPaymentsList = $("#m_ctrl_ExcludedPayments").val().split(',');
    for (var i = 0; IsGreaterThan(excludedPaymentsList.length, i); i++) {
        $("[excludedPaymentID='" + excludedPaymentsList[i] + "']").attr("checked", "true");
    }
}

// end 



//Sign file 

function btnSignFile_onclick(orgfile, file_encoding, file_content, file_content_s, file_encoding_text, shouldSign) {

    if (typeof FileReader == "undefined") {
        btnSign_onclick1(orgfile, file_encoding, file_content, file_content_s, shouldSign);

    }
    else {
        btnSign_onclick2(file_encoding, file_encoding_text, shouldSign);
    }
    return false;
}

//IE 
function btnSign_onclick1(orgfile, file_encoding, file_content, file_content_s, shouldSign) {
    try {
        var fso = new ActiveXObject("Scripting.FileSystemObject");

    }
    catch (err) {
        var j = SetCustomValidationError(STR_FILE_CANNOT_BE_READ_IE, 'orgfile');
        fillValidatioSumarry(j);
        return false;
    }
    //read
    var f = fso.OpenTextFile(orgfile, 1, false, file_encoding);
    var Content = f.ReadAll();

    try { // check for wrong encoding
        string = encodeURIComponent(Content);
    }
    catch (ex) {
        f.close();
        f = null;
        fso = null;

        var j = SetCustomValidationError(STR_FILE_INCORRECT_ENCODING, 'orgfile');
        fillValidatioSumarry(j);
        return false;
    }

    f.close();
    f = null;

    signFileContent1(Content, shouldSign);

    fso = null;
}

function btnSign_onclick2(file_encoding, file_encoding_text, shouldSign) {
    var reader = new FileReader();
    reader.onloadend = (function (e) { signFileContent(e, shouldSign); });
    reader.onerror = errorHandler;

    var encodingText = file_encoding_text;

    if (file_encoding == "-1")
        encodingText = "UTF-16";

    reader.readAsText(document.getElementById("orgfile").files[0], encodingText);
    return false;
}

function signFileContent(evt, shouldSign) {
    var Content = evt.target.result;
    try { // check for wrong encoding
        string = encodeURIComponent(Content);
    }
    catch (ex) {
        var j = SetCustomValidationError(STR_FILE_INCORRECT_ENCODING, 'orgfile');
        fillValidatioSumarry(j);
        return false;
    }
    signFileContent1(Content, shouldSign);
}

function signFileContent1(Content, shouldSign) {
    Content = Content.replace(/\r\n/g, "\n");
    Content = Content.replace(/\n/g, "\r\n");
  
    //null терминатора реже Content-а и подаваме различно съдържание, от това, което сме подписали.
    var nPos = Content.indexOf("\0");
    if (nPos != -1) {
        Content = Content.substr(0, nPos);
    }

    if (Content != null) {
        if (IsGreaterThan(Content.length, 0)) {

            if (Content.charCodeAt(0) == 65279) {
                //file starts with BOM, remove it
                Content = Content.substring(1);
            }

            var Message;
            if (shouldSign) {
                Message = DoSign(Content);
                document.getElementById("Signature").value = Message;
            }
            document.getElementById("FileContent").value = Content            

            $('#FileName').val($('#orgfile').val());
            $('#Encoding').val($("#EncodingPicker option:selected").text());

            if (shouldSign) {
                //if user pres cancel not to submit to the server 
                if (doesSignatureStartWithM(Message)) {
                    if (typeof isSave != "undefined") {
                        DisableSave();
                        ShowPleaseWaitDialog();
                        isSave = true;
                    }
                }
            }
            ajaxSubmitSave();
        }
        else {
            var j = SetCustomValidationError(ID_STR_UPLOAD_ERROR, 'orgfile')
            fillValidatioSumarry(j);
            return false;
        }
    }
    else {
        var j = SetCustomValidationError(ID_STR_UPLOAD_ERROR, 'orgfile')
        fillValidatioSumarry(j);
        return false;
    }
}

function doesSignatureStartWithM(signedData) {
    var result = false;
    if (signedData != null && signedData.indexOf("M") == 0) {
        result = true;
    }

    return result;
}

function errorHandler(evt) {
    if (evt.target.error.code == evt.target.error.NOT_READABLE_ERR) {
        // The file could not be read
        //alert("The file could not be read. Are you select wrong file format?");
        var j = SetCustomValidationError('The file could not be read. Are you select wrong file format?', 'orgfile')
        fillValidatioSumarry(j);
        return false;
    }
    else {
        //alert("The file could not be read error code:" + evt.target.error.code);
        var j = SetCustomValidationError("The file could not be read error code:" + evt.target.error.code, 'orgfile')
        fillValidatioSumarry(j);
        return false;
    }
}
//end sign file 

function escapeHTML(s) {
    return s
      .replace(/&/g, '&amp;')
      .replace(/</g, '&lt;')
      .replace(/>/g, '&gt;');
}

function escapeURL(s) {
    return s
      .replace(/&amp;/g, "&");
}

function CreateSortHeaderOnTables() {

    $("thead").find("[user_order_by_class]").each(function () {
        $(this).click(function () {
            SetUserOrderByPropertiesAndSubmit($(this).attr("user_order_by_class"), 'DESC', $(this).attr("user_order_by_class_use_ajax"));
        });
    });
    var userOrderByClass = $("#user_orderby").val();
    var userOrderByType = $("#user_orderby_type").val();
    if (userOrderByClass != "") {
        var HeaderEl = $("thead").find("[user_order_by_class='" + userOrderByClass + "']");
        // change class
        if (userOrderByType == "DESC") {
            $(HeaderEl).addClass('desc');
        }
        else {
            $(HeaderEl).addClass('asc');
        }

        $(HeaderEl).unbind('click');
        $(HeaderEl).click(function () {
            var type = 'DESC';
            if (userOrderByType == 'DESC') {
                type = 'ASC';
            }
            SetUserOrderByPropertiesAndSubmit(userOrderByClass, type, HeaderEl.attr("user_order_by_class_use_ajax"));
        });
    }
}
function SetUserOrderByPropertiesAndSubmit(className, type, useAjax) {
    document.forms[0].user_orderby.value = className;
    document.forms[0].user_orderby_type.value = type;

    if (useAjax == "true") {
        SubmitAJAX();
    }
    else {
        document.forms[0].submit();
    }
}





function SetClickActionToTablesWithDetails() {
    $("table.data a.toggler").click(
			        function () {
			            var tableRow = $(this).parent().parent();
			            tableRow.toggleClass("selected");

			            var nextRow = tableRow.nextAll(".detail")[0];
			            $(nextRow).toggle();
			        }
		        );
}

function LoadQuickLinks(url) {
    $.daisAjax({
        cache: false,
        type: "POST",
        url: url,
        data: MakeWorking("c2s=userpagelets&amp;PageletClassName=DAIS.eBank.Client.WEB.Applications.Personal.Preferences.CAdapterQuickLinks"),
        dataType: "html",
        success: function (data) {
            $("#m_ctrl_span_QuickLinks_pgl_js").html(data);
        },
        error: function (data) {
            $("#m_ctrl_span_QuickLinks_pgl_js").html(STR_AJAX_ERROR);
        }
    });
}

function GetCurrentDate() {
    var now = new Date();

    return now.format(STR_DATE_FORMAT_DD_MM_YYYY);
}

function OnDocumentReadyActions() {
    CreateBBTable();
    CreateSortHeaderOnTables();
    AddClickTracking();
}

function AddClickTracking() {
    
    $("a[button-tracking='true'],button[button-tracking='true']").each(function () {
        $(this).on("click", function (event) {

            var url = MakeRequestToMVC("ButtonClickTracking", "AddTracking");
            $.daisAjax({
                cache: false,
                type: "POST",
                url: url,
                data: "trackingID=" + $(this).attr("trackingID"),
                dataType: "html",
                success: function (data) { }
            });
        });

    });

}

function SetDefaultPagingProperties() {
	$("#curr_page").val("1");
    return true;
}

function AjaxRequestErrorLoginFail() {
    ShowModalDiv("AjaxRequestErrorLoginFail");
}

function AjaxRequestErrorCertFail() {
    ShowModalDiv("AjaxRequestErrorCertFail");
    $('body').trigger("AjaxRequestErrorCertFailActions");
}

function AjaxRequestErrorLoginFailAdvSpl() {
    ShowModalDiv("AjaxRequestErrorLoginFailAdvSpl");
}


function ShowModalDiv(divID, options) {

    var defaults = {
        modal: true
        , bgiframe: true
        , closeOnEscape: false
        , width: 300
        , hideCloseButton : true
    };
    var options = $.extend(defaults, options);
    // alert(document.readyState);
    $(function () {
        var div = $('#' + divID);
        //div.attr('title', titleStr);
        div.dialog({
            modal: options['modal'],
            bgiframe: options['bgiframe'],
            closeOnEscape: options['closeOnEscape'],
            width : options['width'],
            close: options['close'],
            open: function (event, ui) {
                if (options["hideCloseButton"]) {
                    $(".ui-dialog-titlebar-close").hide();
                }
            }
        });
    });
}
function HideModalDiv(divID) {
    $(function () {
        var modalDiv = $('#' + divID);
        //Remove the dialog functionality completely. This will return the element back to its pre-init state.
        if (modalDiv.is(":data(dialog)")) {
            modalDiv.dialog("destroy");
        }
    });
}

function SetScrollsForDataTables() {

    var tableData = $(".data");
    
    var contentWidth = $("#content").width();
    var w = ($(tableData).width() > contentWidth);
    if (w) {

        tableData.wrap("<div class='dataDiv' />")
        var element = $(".dataDiv");
        element.css('width', contentWidth);
        $(element).css('overflow-x', 'scroll');

        if ($(tableData).height() > 550) {
            element.css('height', '550px');
            $(element).css('overflow-y', 'scroll');
        }
      
    }
}


// Deposits logic for dependable selects
function FillConnectedSelectsForDeposits() {
    Fill_CCY();
    Fill_Term(selTerm);

    $("#ccy").change(Fill_TermByCCY);
    $("#Term").change(Fill_CCYByTerm);
}

function Fill_CCY() {
    var select = $("#ccy");
    select.html('');

    var bnkCount = 0;
    $.each(mapCcy_Term,
		function (id, option) {
		    bnkCount++;
		    if (selCCY == option.CCY.Value) {
		        select.append($('<option selected="true"></option>').val(option.CCY.Value).html(option.CCY.Name).attr("title", option.CCY.Name));
		    }
		    else {
		        select.append($('<option></option>').val(option.CCY.Value).html(option.CCY.Name).attr("title", option.CCY.Name));
		    }
		}
	);
}

function Fill_TermByCCY() {
    Fill_Term(null);
}

function Fill_Term(m_selTerm) {

    var select = $("#Term");
    var selectedCCY = $("#ccy").val();
    if (m_selTerm == null) {
        selTerm = $("#Term").val();
    }

    var colTerm = GetMapCCY_TermByCCY(selectedCCY).TermList;

    FillSelectWithOptions(colTerm, selTerm, select);
}


function Fill_CCYByTerm() {
    var select = $("#ccy");
    var selectedTerm = $("#Term").val();
    selCCY = $("#ccy").val();
    var colCCY = GetMapTerm_CCYByTerm(selectedTerm).CCYList;

    FillSelectWithOptions(colCCY, selCCY, select);

}

function FillSelectWithOptions(colection, selectedValue, selectEl) {
    selectEl.html('');
    $.each(colection,
		    function (id, option) {

		        if (selectedValue == option.Value) {
		            selectEl.append($('<option selected="true"></option>').val(option.Value).html(option.Name).attr("title", option.Name));
		        }
		        else {
		            selectEl.append($('<option></option>').val(option.Value).html(option.Name).attr("title", option.Name));
		        }
		    }
	    );

}

function GetMapCCY_TermByCCY(ccy) {
    for (var i = 0; LesThen(i, mapCcy_Term.length); i++) {
        if (mapCcy_Term[i].CCY.Value == ccy) {
            return mapCcy_Term[i];
        }
    }
}

function GetMapTerm_CCYByTerm(term) {
    for (var i = 0; LesThen(i, mapTerm_Ccy.length); i++) {
        if (mapTerm_Ccy[i].Term.Value == term) {
            return mapTerm_Ccy[i];
        }
    }
}
//End Deposits logic for dependable selects

    function ShowHideElements(selected, elementToShow, elementToHide) {
            if (selected) {
                $("#" + elementToShow).show();
                $("#" + elementToHide).hide();
            }
            else {
                $("#" + elementToShow).hide();
                $("#" + elementToHide).show();
            }
        }

    function contains(arr, findValue) {
        var i = arr.length;
     
        while (i--) {
            if (arr[i] === findValue) 
                return true;
        }
        return false;
    }

    function IsElementChecked(id) {
    
        if ($(id).is(":checked")) {
                return true;
        }

        return false;
    }
    
    function startsWithFilterFunction(searchedItem, searchedText) {
        return searchedItem.slice(0, searchedText.length) == searchedText
    }
    
    function containsFilterFunction(searchedItem, searchedText) {
        return LesThen(-1, searchedItem.indexOf(searchedText));
    }

    function FillPickerSelectWithSearcedItems(selectCtl, arrSearchedItems, searchedText, shouldSelectTopOption, filterFunction, caseSensitive) {
        if (filterFunction === undefined || filterFunction === null)
        {
            filterFunction = containsFilterFunction;
        }
        if (caseSensitive === undefined || caseSensitive === null)
        {
            caseSensitive= false;
        }

        var searchedTextTmp = searchedText;
        if (!caseSensitive) {
            searchedTextTmp = searchedTextTmp.toUpperCase();
        }

        var realSelectWidthForIE7 = selectCtl.width() + 2; // +2 for the padding
        selectCtl.find("option").remove().end();
        
        for (var k = 0; LesThen(k, arrSearchedItems.length) ; k++) {
            var searchedItemTmp = arrSearchedItems[k];
            if (!caseSensitive){
                searchedItemTmp = searchedItemTmp.toUpperCase();
            }
            if (filterFunction(searchedItemTmp, searchedTextTmp)) {
                selectCtl.append($("<option></option>")
                    .attr("value", arrSearchedItems[k].substring(0, arrSearchedItems[k].indexOf(' #')))
                    .text(arrSearchedItems[k].substring(arrSearchedItems[k].indexOf(' # ') + 3, arrSearchedItems[k].length)));
            }
        }
        if (shouldSelectTopOption)
            selectCtl.find("option:first").attr('selected', 'selected');

        if (isIE7()) {
            selectCtl.width(realSelectWidthForIE7);
        }
    }

    function isIE7() {
        var usingIE7 = false;
        if (/MSIE (\d+\.\d+);/.test(navigator.userAgent)) {
            var version = new Number(RegExp.$1);
            if (version == 7) {
                usingIE7 = true;
            }
        }
        return usingIE7;
    }

    function determineIEVersion() {
        var ieVersion;
        if (isIE7())
            ieVersion = 7;
        else {
            if (/MSIE (\d+\.\d+);/.test(navigator.userAgent)) {
                ieVersion = new Number(RegExp.$1);
            }
        }
        return ieVersion;
    }
    function GenerateNewCaptcha(captchaURL, captchaContainer) {
        $.daisAjax({
            cache: false,
            background: true,
            type: "POST",
            url: captchaURL,
            dataType: "json",
            success: function (data) {
                if (!(captchaContainer)) {
                    captchaContainer = $("form");
                }
                $(captchaContainer).find("[data-captcha ='EncodedCode']").val(data.EncodedCode);
                $(captchaContainer).find("[data-captcha ='Code']").val("");
                setImgSrc($(captchaContainer).find("[data-captcha ='Img']"), data.ImgSrc);
            },
            error: function () {
                //alert(ID_STR_CAPTCHA_NEW_IMAGE_ERROR);
            }
        });
    }

    function setImgSrc(img, src) {
//        if (f) {
//            g_cookieManager.GenerateCookie(window.top.name);
//        }
//        var deleteC = null;
//        deleteC = function () {
//            if (g_cookieManager) {
//                g_cookieManager.DeleteCookie();
//            }
//            $(img).unbind("load", deleteC);
//        }

//        $(img).load(deleteC);
        $(img).attr("src", src);
    }

    function isFirefox() {
        return /Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent);
    }

    function isIE() {        
        return /Trident\/(\d+\.\d+);/.test(navigator.userAgent) || /MSIE (\d+\.\d+);/.test(navigator.userAgent);
    }

    function MarkMessageAsReadAndSubmit(messageID, redirectURL) {

        var url = MakeRequestToMVC("Messages", "MarkMessageAsRead");
        $.daisAjax({
            cache: false,
            type: "POST",
            url: url,
            data: "messageID=" + messageID,
            dataType: "html",
            success: function (data) { NormalSubmit(redirectURL); }
        });
       
    }

    // makes long string to be a given length and hides some of the symbols by "..."
    function trimLongStringTo(string, length) {
        if (!string  || !length) {
            return string;
        }

        if (length < 4) {
            return string;
        }

        var firstHalf = string.substr(0, length/2);
        var secondHalf = string.substr(string.length - (length / 2) + 3)

        return firstHalf + "..." + secondHalf;
    }


    // the goal is not to have a single-word string longer than given length because it breaks the tables 
    // ex:  "my file is named 2014061322235908874345_new_subscriptions_and_canceled_subscriptions.csv" -> 
    //      "my file is named 20140613...s.csv"
    // checks each word(separated by space) if longer then given length
    // if so - trims and masks it 
    //ex: trimLongStringTo("short toolongword short", 10) = "short toolo...rd short"
    function trimAndMaskWordsLongerThen(string, length) {
        if (!string || !length) {
            return string;
        }

        if (LesThen(string.length, length + 1)) {
            return string;
        }

        var words = string.split(" "); // takes the words - separated by empty string 
        for (var i = 0; LesThen(i, words.length) ; i++) {
            if (LesThen(length, words[i].length)) {

                words[i] = trimLongStringTo(words[i], length);
            }
        }

        return words.join(" ");
    }

    function TransliterateContent(sourceElement, destinationID) {
        var url = MakeRequestToMVC("Transliterate", "TransliterateString");
        if (isNullOrWhitespaces(sourceElement.value)) {
            $("#" + destinationID).val("");
        }
        else {
            $.daisAjax({
                cache: false,
                type: "POST",
                url: url,
                data: "str=" + sourceElement.value,
                dataType: "html",
                success: function (data) {
                    $("#" + destinationID).val(data);
                }
            });
        }
        
    }

    // each element with given class and attribute 
    // will be trimmed to the given lenght
    function trimWords(element_class, attribute_lenght) {
        $("." + element_class).each(function () {
            var $this = $(this);
            var lengthS = $this.attr(attribute_lenght);
            if (lengthS) {
                var lenght = ToFloat(lengthS);
                if (LesThen(0, lenght)) {
                    var string = $this.html();
                    var trimmedString = trimAndMaskWordsLongerThen(string, lenght);
                    $this.html(trimmedString);
                }
            }
        });
    }

    function isNullOrWhitespaces(input) {
        if (input == null) {
            return true;
        }
        return input.replace(/\s/g, '').length < 1;
    }

    function exportPdf(obj) {

    	ShowPleaseWaitDialog();

    	$.fileDownload($(obj).attr('export-href'), {
    		successCallback: function () {

    			HidePleaseWaitDialog();
    		},
    		failCallback: function () {

    			HidePleaseWaitDialog();
    		}
    	});
    	return false; //this is critical to stop the click event which will trigger a normal file download!
    }

    function CheckForCookies() {
        if (!navigator.cookieEnabled)
        {
            ShowModalDiv("CookiesDisabled");
        }
    }
    

    function checkPolicyCookie() {
        //jQuery('#cookiesPrivacy').animate({height: "0px";}, 1000);
        var cookieName = "DAIS_TS_cookies_policy_BBO"
        var accepted = getCookie(cookieName);
        if (!accepted) {
            jQuery('#cookiesPrivacy').show();
            jQuery('.cookiesCloseBtn').live('click', function (e) {
                e.preventDefault();
                if (jQuery(this).attr('class') == 'cookiesCloseBtn') {
                    jQuery('#cookiesPrivacy').animate({ height: "0px" }, 1000, function () {
                        jQuery(this).hide();
                    });
                    setCookie(cookieName, 1, 1);
                }
            })
        }
    }

    function getCookie(c_name) {
        var c_value = document.cookie;
        var c_start = c_value.indexOf(" " + c_name + "=");
        if (c_start == -1) {
            c_start = c_value.indexOf(c_name + "=");
        }
        if (c_start == -1) {
            c_value = null;
        } else {
            c_start = c_value.indexOf("=", c_start) + 1;
            var c_end = c_value.indexOf(";", c_start);
            if (c_end == -1) {
                c_end = c_value.length;
            }
            c_value = unescape(c_value.substring(c_start, c_end));
        }
        return c_value;
    }

    function setCookie(c_name, value, exdays) {
        var exdate = new Date();
        exdate.setFullYear(exdate.getFullYear() + exdays);
        var c_value = escape(value) + ((exdays == null) ? "" : "; expires=" + exdate.toUTCString());
        document.cookie = c_name + "=" + c_value + ";path=/";
    }

    function ClearAndSubmitToMovements(url, acc)
    {
        $("#content :input").attr("disabled", "true"); 
        $("#content :submit").attr("disabled", "true"); 
						
        $('<input />').attr('type', 'hidden').attr('name', 'acc').attr('value', acc).appendTo('#m_Form');
        //$('<input />').attr('type', 'hidden').attr('name', 'gen_type').attr('value', 'gen_type_Period').appendTo('#m_Form');

        return NormalSubmit(url);
    }

    function showDownloadPDFError() {
        $("<div></div>").append($("iframe[name='GetDocument']").contents().find("#ErrorResultDiv")).dialog({
            modal: true
        });
    }

    function SubmitToIFrame(form, frame, action, callback) {
        var loadingPanelContainer = $(".MainPanel");
        var formTarget = form.attr("target");
        var formEncType = form.attr("enctype");
        var formAction = form.attr("action");
        form.attr("target", frame.attr("id"));
        form.attr("enctype", "multipart/form-data");
        form.attr("action", action || formAction);

        $(frame).one("load", function () {
            var txt = $(frame).contents().find("div:first").text();
            var result = $.daisJsonDeserialize(txt);
            if (typeof (callback) === "function")
                callback(result);
        });

        form.submit();
        form.attr("target", formTarget);
        form.attr("enctype", formEncType);
        form.attr("action", formAction);
    }

    function InitMultiFile() {
        $("input[type=file].multi").MultiFile();
    }

    function fillValidationSummary(data) {
        var container = $("form").find("[data-valmsg-summary-server-side=true]"),
                list = container.find("ul");

        if (list && list.length) {
            list.empty();
            container.addClass("validation-summary-errors").removeClass("validation-summary-valid");

            for (var i = 0; i < data.Fields.length; i++) {
                var f = data.Fields[i];

                if (f.Errors && f.Errors.length > 0) {
                    $.each(f.Errors, function () {
                        $("<li />").html(this.ErrorMessage).appendTo(list);
                    });
                }
            }
        }
    }

    function clearValidationSummary() {
        var container = $("form").find("[data-valmsg-summary-server-side=true]"),
                list = container.find("ul");

        if (list && list.length) {
            list.empty();
            container.addClass("validation-summary-valid").removeClass("validation-summary-errors");
        }
    }

/**
* jQuery Guid v1.0.0-1
* Requires jQuery 1.2.6+ (Not tested with earlier versions).
* Copyright (c) 2010 Aaron E. [jquery at happinessinmycheeks dot com] 
* Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
*	Usage:
*		jQuery.Guid.Value() // Returns value of internal Guid. If no guid has been specified, returns a new one (value is then stored internally).
*		jQuery.Guid.New() // Returns a new Guid and sets it's value internally. Also accepts GUID, Sets it internally.
*		jQuery.Guid.Empty() // Returns an empty Guid 00000000-0000-0000-0000-000000000000.
*		jQuery.Guid.IsEmpty() // Returns boolean. True if empty/undefined/blank/null.
*		jQuery.Guid.IsValid() // Returns boolean. True valid guid, false if not.
*		jQuery.Guid.Set() // Retrns Guid. Sets Guid to user specified Guid, if invalid, returns an empty guid.
*
*/

jQuery.extend({
    Guid: {
        Set: function (val) {
            var value;
            if (arguments.length == 1) {
                if (this.IsValid(arguments[0])) {
                    value = arguments[0];
                } else {
                    value = this.Empty();
                }
            }
            $(this).data("value", value);
            return value;
        },

        Empty: function () {
            return "00000000-0000-0000-0000-000000000000";
        },

        IsEmpty: function (gid) {
            return gid == this.Empty() || typeof (gid) == 'undefined' || gid == null || gid == '';
        },

        IsValid: function (value) {
            rGx = new RegExp("\\b(?:[A-F0-9]{8})(?:-[A-F0-9]{4}){3}-(?:[A-F0-9]{12})\\b");
            return rGx.exec(value) != null;
        },

        New: function () {
            if (arguments.length == 1 && this.IsValid(arguments[0])) {
                $(this).data("value", arguments[0]);
                value = arguments[0];
                return value;
            }

            var res = [], hv;
            var rgx = new RegExp("[2345]");
            for (var i = 0; i < 8; i++) {
                hv = (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);
                if (rgx.exec(i.toString()) != null) {
                    if (i == 3) { hv = "6" + hv.substr(1, 3); }
                    //res.push("-");
                }
                res.push(hv.toUpperCase());
            }
            value = res.join('');
            $(this).data("value", value);
            return value;
        },

        Value: function () {
            if ($(this).data("value")) {
                return $(this).data("value");
            }
            var val = this.New();
            $(this).data("value", val);
            return val;
        }
    }
})();

/* Copyright (c) 2010 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Version 2.1.2
 */
(function(a){a.fn.bgiframe=(a.browser.msie&&/msie 6\.0/i.test(navigator.userAgent)?function(d){d=a.extend({top:"auto",left:"auto",width:"auto",height:"auto",opacity:true,src:"javascript:false;"},d);var c='<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+d.src+'"style="display:block;position:absolute;z-index:-1;'+(d.opacity!==false?"filter:Alpha(Opacity='0');":"")+"top:"+(d.top=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+'px')":b(d.top))+";left:"+(d.left=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+'px')":b(d.left))+";width:"+(d.width=="auto"?"expression(this.parentNode.offsetWidth+'px')":b(d.width))+";height:"+(d.height=="auto"?"expression(this.parentNode.offsetHeight+'px')":b(d.height))+';"/>';return this.each(function(){if(a(this).children("iframe.bgiframe").length===0){this.insertBefore(document.createElement(c),this.firstChild)}})}:function(){return this});a.fn.bgIframe=a.fn.bgiframe;function b(c){return c&&c.constructor===Number?c+"px":c}})(jQuery);
/*
 * jQuery Format Plugin v1.2
 * http://www.asual.com/jquery/format/
 *
 * Copyright (c) 2009-2011 Rostislav Hristov
 * Uses code by Matt Kruse
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Date: 2011-11-24 19:45:33 +0200 (Thu, 24 Nov 2011)
 */
(function(z){z.format=function(){var o={date:{format:"MMM dd, yyyy h:mm:ss a",monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],daysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortDateFormat:"M/d/yyyy h:mm a",longDateFormat:"EEEE, MMMM dd, yyyy h:mm:ss a"},
number:{format:"#,##0.0#",groupingSeparator:",",decimalSeparator:"."}};return{locale:function(b){a={a:6};if(b)for(var i in b)for(var g in b[i])o[i][g]=b[i][g];return o},date:function(b,i){var g=0,h=0,c=0;c=h="";var l,e;if(typeof b=="string"){var m=function(r,v,y,w){for(w=w;w>=y;w--){var x=r.substring(v,v+w);if(x.length>=y&&(new RegExp(/^\d+$/)).test(x))return x}return null};if(typeof i=="undefined")i=o.date.format;var d=0,n=new Date,j=n.getYear(),f=n.getMonth()+1,p=1,k=n.getHours(),t=n.getMinutes(),
u=n.getSeconds();n=n.getMilliseconds();for(var s="",q;g<i.length;){c="";for(h=i.charAt(g);i.charAt(g)==h&&g<i.length;)c+=i.charAt(g++);if(c.indexOf("MMMM")>-1&&c.length>4)c="MMMM";if(c.indexOf("EEEE")>-1&&c.length>4)c="EEEE";if(c=="yyyy"||c=="yy"||c=="y"){if(c=="yyyy")e=l=4;if(c=="yy")e=l=2;if(c=="y"){l=2;e=4}j=m(b,d,l,e);if(j===null)return 0;d+=j.length;if(j.length==2){j=parseInt(j,10);j=j>70?1900+j:2E3+j}}else if(c=="MMMM"){h=f=0;for(c=o.date.monthsFull.length;h<c;h++){q=o.date.monthsFull[h];if(b.substring(d,
d+q.length).toLowerCase()==q.toLowerCase()){f=h+1;d+=q.length;break}}if(f<1||f>12)return 0}else if(c=="MMM"){h=f=0;for(c=o.date.monthsShort.length;h<c;h++){q=o.date.monthsShort[h];if(b.substring(d,d+q.length).toLowerCase()==q.toLowerCase()){f=h+1;d+=q.length;break}}if(f<1||f>12)return 0}else if(c=="EEEE"){h=0;for(c=o.date.daysFull.length;h<c;h++){q=o.date.daysFull[h];if(b.substring(d,d+q.length).toLowerCase()==q.toLowerCase()){d+=q.length;break}}}else if(c=="EEE"){h=0;for(c=o.date.daysShort.length;h<
c;h++){q=o.date.daysShort[h];if(b.substring(d,d+q.length).toLowerCase()==q.toLowerCase()){d+=q.length;break}}}else if(c=="MM"||c=="M"){f=m(b,d,1,2);if(f===null||f<1||f>12)return 0;d+=f.length}else if(c=="dd"||c=="d"){p=m(b,d,1,2);if(p===null||p<1||p>31)return 0;d+=p.length}else if(c=="hh"||c=="h"){k=m(b,d,1,2);if(k===null||k<1||k>12)return 0;d+=k.length}else if(c=="HH"||c=="H"){k=m(b,d,1,2);if(k===null||k<0||k>23)return 0;d+=k.length}else if(c=="KK"||c=="K"){k=m(b,d,1,2);if(k===null||k<0||k>11)return 0;
d+=k.length}else if(c=="kk"||c=="k"){k=m(b,d,1,2);if(k===null||k<1||k>24)return 0;d+=k.length;k--}else if(c=="mm"||c=="m"){t=m(b,d,1,2);if(t===null||t<0||t>59)return 0;d+=t.length}else if(c=="ss"||c=="s"){u=m(b,d,1,2);if(u===null||u<0||u>59)return 0;d+=u.length}else if(c=="SSS"||c=="SS"||c=="S"){n=m(b,d,1,3);if(n===null||n<0||n>999)return 0;d+=n.length}else if(c=="a"){s=b.substring(d,d+2).toLowerCase();if(s=="am")s="AM";else if(s=="pm")s="PM";else return 0;d+=2}else if(c!=b.substring(d,d+c.length))return 0;
else d+=c.length}if(d!=b.length)return 0;if(f==2)if(j%4===0&&j%100!==0||j%400===0){if(p>29)return 0}else if(p>28)return 0;if(f==4||f==6||f==9||f==11)if(p>30)return 0;if(k<12&&s=="PM")k=k-0+12;else if(k>11&&s=="AM")k-=12;return new Date(j,f-1,p,k,t,u,n)}else{g=function(r,v){if(typeof v=="undefined"||v==2)return(r>=0&&r<10?"0":"")+r;else{if(r>=0&&r<10)return"00"+r;if(r>=10&&r<100)return"0"+r;return r}};if(typeof i=="undefined")i=o.date.format;e=b.getYear();if(e<1E3)e=String(e+1900);m=b.getMonth()+1;
d=b.getDate();j=b.getDay();f=b.getHours();p=b.getMinutes();l=b.getSeconds();k=b.getMilliseconds();b={y:e,yyyy:e,yy:String(e).substring(2,4),M:m,MM:g(m),MMM:o.date.monthsShort[m-1],MMMM:o.date.monthsFull[m-1],d:d,dd:g(d),EEE:o.date.daysShort[j],EEEE:o.date.daysFull[j],H:f,HH:g(f)};b.h=f===0?12:f>12?f-12:f;b.hh=g(b.h);b.k=f!==0?f:24;b.kk=g(b.k);b.K=f>11?f-12:f;b.KK=g(b.K);b.a=f>11?"PM":"AM";b.m=p;b.mm=g(p);b.s=l;b.ss=g(l);b.S=k;b.SS=g(k);b.SSS=g(k,3);e="";g=0;c=h="";for(l=false;g<i.length;){c="";h=
i.charAt(g);if(h=="'"){g++;if(i.charAt(g)==h){e+=h;g++}else l=!l}else{for(;i.charAt(g)==h;)c+=i.charAt(g++);if(c.indexOf("MMMM")!=-1&&c.length>4)c="MMMM";if(c.indexOf("EEEE")!=-1&&c.length>4)c="EEEE";e+=typeof b[c]!="undefined"&&!l?b[c]:c}}return e}},number:function(b,i){var g,h,c,l,e;if(typeof b=="string"){g=o.number.groupingSeparator;c=o.number.decimalSeparator;l=b.indexOf(c);e=1;if(l!=-1)e=Math.pow(10,b.length-l-1);b=b.replace(new RegExp("["+g+"]","g"),"");b=b.replace(new RegExp("["+c+"]"),".");
return Math.round(b*e)/e}else{if(typeof i=="undefined"||i.length<1)i=o.number.format;g=",";h=i.lastIndexOf(g);c=".";l=i.indexOf(c);var m=g="";c=b<0;var d=i.substr(l+1).replace(/#/g,"").length,n=i.substr(l+1).length,j=10;b=Math.abs(b);if(l!=-1){m=o.number.decimalSeparator;if(n>0){e=1E3;j=Math.pow(j,n);var f=Math.round(parseInt(b*j*e-Math.round(b)*j*e,10)/e);f=String(f<0?Math.round(parseInt(b*j*e-parseInt(b,10)*j*e,10)/e):f);var p=b.toString().split(".");if(typeof p[1]!="undefined")for(e=0;e<n;e++)if(p[1].substr(e,
1)=="0"&&e<n-1&&(f.length!=n||f.substr(0,1)=="0"))f="0"+f;else break;for(e=0;e<n-m.length;e++)f+="0";p="";for(e=0;e<f.length;e++){n=f.substr(e,1);if(e>=d&&n=="0"&&/^0*$/.test(f.substr(e+1)))break;p+=n}m+=p}if(m==o.number.decimalSeparator)m=""}if(l!==0){g=m!=""?String(parseInt(Math.round(b*j)/j,10)):String(Math.round(b));b=o.number.groupingSeparator;d=0;if(h!=-1){d=l!=-1?l-h:i.length-h;d--}if(d>0){h=0;j="";for(e=g.length;e--;){if(h!==0&&h%d===0)j=b+j;j=g.substr(e,1)+j;h++}g=j}i=l!=-1?i.substr(0,l).replace(new RegExp("#|"+
b,"g"),"").length:i.replace(new RegExp("#|"+b,"g"),"").length;for(e=g.length;e<i;e++)g="0"+g}i=g+m;return(c?"-":"")+i}}}}()})(jQuery);

/**
 * This jQuery plugin displays pagination links inside the selected elements.
 * 
 * This plugin needs at least jQuery 1.4.2
 *
 * @author Gabriel Birke (birke *at* d-scribe *dot* de)
 * @version 2.2
 * @param {int} maxentries Number of entries to paginate
 * @param {Object} opts Several options (see README for documentation)
 * @return {Object} jQuery Object
 */
 (function($){
	/**
	 * @class Class for calculating pagination values
	 */
	$.PaginationCalculator = function(maxentries, opts) {
		this.maxentries = maxentries;
		this.opts = opts;
	}
	
	$.extend($.PaginationCalculator.prototype, {
		/**
		 * Calculate the maximum number of pages
		 * @method
		 * @returns {Number}
		 */
		numPages:function() {
			return Math.ceil(this.maxentries/this.opts.items_per_page);
		},
		/**
		 * Calculate start and end point of pagination links depending on 
		 * current_page and num_display_entries.
		 * @returns {Array}
		 */
		getInterval:function(current_page)  {
			var ne_half = Math.floor(this.opts.num_display_entries/2);
			var np = this.numPages();
			var upper_limit = np - this.opts.num_display_entries;
			var start = current_page > ne_half ? Math.max( Math.min(current_page - ne_half, upper_limit), 0 ) : 0;
			var end = current_page > ne_half?Math.min(current_page+ne_half + (this.opts.num_display_entries % 2), np):Math.min(this.opts.num_display_entries, np);
			return {start:start, end:end};
		}
	});
	
	// Initialize jQuery object container for pagination renderers
	$.PaginationRenderers = {}
	
	/**
	 * @class Default renderer for rendering pagination links
	 */
	$.PaginationRenderers.defaultRenderer = function(maxentries, opts) {
		this.maxentries = maxentries;
		this.opts = opts;
		this.pc = new $.PaginationCalculator(maxentries, opts);
	}
	$.extend($.PaginationRenderers.defaultRenderer.prototype, {
		/**
		 * Helper function for generating a single link (or a span tag if it's the current page)
		 * @param {Number} page_id The page id for the new item
		 * @param {Number} current_page 
		 * @param {Object} appendopts Options for the new item: text and classes
		 * @returns {jQuery} jQuery object containing the link
		 */
		createLink:function(page_id, current_page, appendopts){
			var lnk, np = this.pc.numPages();
			page_id = page_id<0?0:(page_id<np?page_id:np-1); // Normalize page id to sane value
			appendopts = $.extend({text:page_id+1, classes:""}, appendopts||{});
			if(page_id == current_page){
				lnk = $("<span class='current'>" + appendopts.text + "</span>");
			}
			else
			{
				lnk = $("<a>" + appendopts.text + "</a>")
					.attr('href', this.opts.link_to.replace(/__id__/,page_id));
			}
			if(appendopts.classes){ lnk.addClass(appendopts.classes); }
			lnk.data('page_id', page_id);
			return lnk;
		},
		// Generate a range of numeric links 
		appendRange:function(container, current_page, start, end, opts) {
			var i;
			for(i=start; i<end; i++) {
				this.createLink(i, current_page, opts).appendTo(container);
			}
		},
		getLinks:function(current_page, eventHandler) {
			var begin, end,
				interval = this.pc.getInterval(current_page),
				np = this.pc.numPages(),
				fragment = $("<div class='pagination'></div>");
			
			// Generate "Previous"-Link
			if(this.opts.prev_text && (current_page > 0 || this.opts.prev_show_always)){
				fragment.append(this.createLink(current_page-1, current_page, {text:this.opts.prev_text, classes:"prev"}));
			}
			// Generate starting points
			if (interval.start > 0 && this.opts.num_edge_entries > 0)
			{
				end = Math.min(this.opts.num_edge_entries, interval.start);
				this.appendRange(fragment, current_page, 0, end, {classes:'sp'});
				if(this.opts.num_edge_entries < interval.start && this.opts.ellipse_text)
				{
					jQuery("<span>"+this.opts.ellipse_text+"</span>").appendTo(fragment);
				}
			}
			// Generate interval links
			this.appendRange(fragment, current_page, interval.start, interval.end);
			// Generate ending points
			if (interval.end < np && this.opts.num_edge_entries > 0)
			{
				if(np-this.opts.num_edge_entries > interval.end && this.opts.ellipse_text)
				{
					jQuery("<span>"+this.opts.ellipse_text+"</span>").appendTo(fragment);
				}
				begin = Math.max(np-this.opts.num_edge_entries, interval.end);
				this.appendRange(fragment, current_page, begin, np, {classes:'ep'});
				
			}
			// Generate "Next"-Link
			if(this.opts.next_text && (current_page < np-1 || this.opts.next_show_always)){
				fragment.append(this.createLink(current_page+1, current_page, {text:this.opts.next_text, classes:"next"}));
			}
			$('a', fragment).click(eventHandler);
			return fragment;
		}
	});
	
	// Extend jQuery
	$.fn.pagination = function(maxentries, opts){
		
		// Initialize options with default values
		opts = jQuery.extend({
			items_per_page:10,
			num_display_entries:11,
			current_page:0,
			num_edge_entries:0,
			link_to:"#",
			prev_text:"Prev",
			next_text:"Next",
			ellipse_text:"...",
			prev_show_always:true,
			next_show_always:true,
			renderer:"defaultRenderer",
			load_first_page:false,
			callback:function(){return false;}
		},opts||{});
		
		var containers = this,
			renderer, links, current_page;
		
		/**
		 * This is the event handling function for the pagination links. 
		 * @param {int} page_id The new page number
		 */
		function paginationClickHandler(evt){
			var links, 
				new_current_page = $(evt.target).data('page_id'),
				continuePropagation = selectPage(new_current_page);
			if (!continuePropagation) {
				evt.stopPropagation();
			}
			return continuePropagation;
		}
		
		/**
		 * This is a utility function for the internal event handlers. 
		 * It sets the new current page on the pagination container objects, 
		 * generates a new HTMl fragment for the pagination links and calls
		 * the callback function.
		 */
		function selectPage(new_current_page) {
			// update the link display of a all containers
			containers.data('current_page', new_current_page);
			links = renderer.getLinks(new_current_page, paginationClickHandler);
			containers.empty();
			links.appendTo(containers);
			// call the callback and propagate the event if it does not return false
			var continuePropagation = opts.callback(new_current_page, containers);
			return continuePropagation;
		}
		
		// -----------------------------------
		// Initialize containers
		// -----------------------------------
		current_page = opts.current_page;
		containers.data('current_page', current_page);
		// Create a sane value for maxentries and items_per_page
		maxentries = (!maxentries || maxentries < 0)?1:maxentries;
		opts.items_per_page = (!opts.items_per_page || opts.items_per_page < 0)?1:opts.items_per_page;
		
		if(!$.PaginationRenderers[opts.renderer])
		{
			throw new ReferenceError("Pagination renderer '" + opts.renderer + "' was not found in jQuery.PaginationRenderers object.");
		}
		renderer = new $.PaginationRenderers[opts.renderer](maxentries, opts);
		
		// Attach control events to the DOM elements
		var pc = new $.PaginationCalculator(maxentries, opts);
		var np = pc.numPages();
		containers.bind('setPage', {numPages:np}, function(evt, page_id) { 
				if(page_id >= 0 && page_id < evt.data.numPages) {
					selectPage(page_id); return false;
				}
		});
		containers.bind('prevPage', function(evt){
				var current_page = $(this).data('current_page');
				if (current_page > 0) {
					selectPage(current_page - 1);
				}
				return false;
		});
		containers.bind('nextPage', {numPages:np}, function(evt){
				var current_page = $(this).data('current_page');
				if(current_page < evt.data.numPages - 1) {
					selectPage(current_page + 1);
				}
				return false;
		});
		
		// When all initialisation is done, draw the links
		links = renderer.getLinks(current_page, paginationClickHandler);
		containers.empty();
		links.appendTo(containers);
		// call callback function
		if(opts.load_first_page) {
			opts.callback(current_page, containers);
		}
	} // End of $.fn.pagination block
	
})(jQuery);

(function(a){var r=a.fn.domManip,d="_tmplitem",q=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,b={},f={},e,p={key:0,data:{}},h=0,c=0,l=[];function g(e,d,g,i){var c={data:i||(d?d.data:{}),_wrap:d?d._wrap:null,tmpl:null,parent:d||null,nodes:[],calls:u,nest:w,wrap:x,html:v,update:t};e&&a.extend(c,e,{nodes:[],parent:d});if(g){c.tmpl=g;c._ctnt=c._ctnt||c.tmpl(a,c);c.key=++h;(l.length?f:b)[h]=c}return c}a.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(f,d){a.fn[f]=function(n){var g=[],i=a(n),k,h,m,l,j=this.length===1&&this[0].parentNode;e=b||{};if(j&&j.nodeType===11&&j.childNodes.length===1&&i.length===1){i[d](this[0]);g=this}else{for(h=0,m=i.length;h<m;h++){c=h;k=(h>0?this.clone(true):this).get();a.fn[d].apply(a(i[h]),k);g=g.concat(k)}c=0;g=this.pushStack(g,f,i.selector)}l=e;e=null;a.tmpl.complete(l);return g}});a.fn.extend({tmpl:function(d,c,b){return a.tmpl(this[0],d,c,b)},tmplItem:function(){return a.tmplItem(this[0])},template:function(b){return a.template(b,this[0])},domManip:function(d,l,j){if(d[0]&&d[0].nodeType){var f=a.makeArray(arguments),g=d.length,i=0,h;while(i<g&&!(h=a.data(d[i++],"tmplItem")));if(g>1)f[0]=[a.makeArray(d)];if(h&&c)f[2]=function(b){a.tmpl.afterManip(this,b,j)};r.apply(this,f)}else r.apply(this,arguments);c=0;!e&&a.tmpl.complete(b);return this}});a.extend({tmpl:function(d,h,e,c){var j,k=!c;if(k){c=p;d=a.template[d]||a.template(null,d);f={}}else if(!d){d=c.tmpl;b[c.key]=c;c.nodes=[];c.wrapped&&n(c,c.wrapped);return a(i(c,null,c.tmpl(a,c)))}if(!d)return[];if(typeof h==="function")h=h.call(c||{});e&&e.wrapped&&n(e,e.wrapped);j=a.isArray(h)?a.map(h,function(a){return a?g(e,c,d,a):null}):[g(e,c,d,h)];return k?a(i(c,null,j)):j},tmplItem:function(b){var c;if(b instanceof a)b=b[0];while(b&&b.nodeType===1&&!(c=a.data(b,"tmplItem"))&&(b=b.parentNode));return c||p},template:function(c,b){if(b){if(typeof b==="string")b=o(b);else if(b instanceof a)b=b[0]||{};if(b.nodeType)b=a.data(b,"tmpl")||a.data(b,"tmpl",o(b.innerHTML));return typeof c==="string"?(a.template[c]=b):b}return c?typeof c!=="string"?a.template(null,c):a.template[c]||a.template(null,q.test(c)?c:a(c)):null},encode:function(a){return(""+a).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}});a.extend(a.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){_=_.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(_,$1,$2);_=[];",close:"call=$item.calls();_=call._.concat($item.wrap(call,_));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){_.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){_.push($.encode($1a));}"},"!":{open:""}},complete:function(){b={}},afterManip:function(f,b,d){var e=b.nodeType===11?a.makeArray(b.childNodes):b.nodeType===1?[b]:[];d.call(f,b);m(e);c++}});function i(e,g,f){var b,c=f?a.map(f,function(a){return typeof a==="string"?e.key?a.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+d+'="'+e.key+'" $2'):a:i(a,e,a._ctnt)}):e;if(g)return c;c=c.join("");c.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(f,c,e,d){b=a(e).get();m(b);if(c)b=j(c).concat(b);if(d)b=b.concat(j(d))});return b?b:j(c)}function j(c){var b=document.createElement("div");b.innerHTML=c;return a.makeArray(b.childNodes)}function o(b){return new Function("jQuery","$item","var $=jQuery,call,_=[],$data=$item.data;with($data){_.push('"+a.trim(b).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(m,l,j,d,b,c,e){var i=a.tmpl.tag[j],h,f,g;if(!i)throw"Template command not found: "+j;h=i._default||[];if(c&&!/\w$/.test(b)){b+=c;c=""}if(b){b=k(b);e=e?","+k(e)+")":c?")":"";f=c?b.indexOf(".")>-1?b+c:"("+b+").call($item"+e:b;g=c?f:"(typeof("+b+")==='function'?("+b+").call($item):("+b+"))"}else g=f=h.$1||"null";d=k(d);return"');"+i[l?"close":"open"].split("$notnull_1").join(b?"typeof("+b+")!=='undefined' && ("+b+")!=null":"true").split("$1a").join(g).split("$1").join(f).split("$2").join(d?d.replace(/\s*([^\(]+)\s*(\((.*?)\))?/g,function(d,c,b,a){a=a?","+a+")":b?")":"";return a?"("+c+").call($item"+a:d}):h.$2||"")+"_.push('"})+"');}return _;")}function n(c,b){c._wrap=i(c,true,a.isArray(b)?b:[q.test(b)?b:a(b).html()]).join("")}function k(a){return a?a.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function s(b){var a=document.createElement("div");a.appendChild(b.cloneNode(true));return a.innerHTML}function m(o){var n="_"+c,k,j,l={},e,p,i;for(e=0,p=o.length;e<p;e++){if((k=o[e]).nodeType!==1)continue;j=k.getElementsByTagName("*");for(i=j.length-1;i>=0;i--)m(j[i]);m(k)}function m(j){var p,i=j,k,e,m;if(m=j.getAttribute(d)){while(i.parentNode&&(i=i.parentNode).nodeType===1&&!(p=i.getAttribute(d)));if(p!==m){i=i.parentNode?i.nodeType===11?0:i.getAttribute(d)||0:0;if(!(e=b[m])){e=f[m];e=g(e,b[i]||f[i],null,true);e.key=++h;b[h]=e}c&&o(m)}j.removeAttribute(d)}else if(c&&(e=a.data(j,"tmplItem"))){o(e.key);b[e.key]=e;i=a.data(j.parentNode,"tmplItem");i=i?i.key:0}if(e){k=e;while(k&&k.key!=i){k.nodes.push(j);k=k.parent}delete e._ctnt;delete e._wrap;a.data(j,"tmplItem",e)}function o(a){a=a+n;e=l[a]=l[a]||g(e,b[e.parent.key+n]||e.parent,null,true)}}}function u(a,d,c,b){if(!a)return l.pop();l.push({_:a,tmpl:d,item:this,data:c,options:b})}function w(d,c,b){return a.tmpl(a.template(d),c,b,this)}function x(b,d){var c=b.options||{};c.wrapped=d;return a.tmpl(a.template(b.tmpl),b.data,c,b.item)}function v(d,c){var b=this._wrap;return a.map(a(a.isArray(b)?b.join(""):b).filter(d||"*"),function(a){return c?a.innerText||a.textContent:a.outerHTML||s(a)})}function t(){var b=this.nodes;a.tmpl(null,null,null,this).insertBefore(b[0]);a(b).remove()}})(jQuery)
// This function gets called when the end-user clicks on some date.
function selected(cal, date) {
  cal.sel.value = date; // just update the date in the input field.
  cal.callCloseHandler();
}

// And this gets called when the end-user clicks on the _selected_ date,
// or clicks on the "Close" button.  It just hides the calendar without
// destroying it.
function closeHandler(cal) {
  cal.hide();                        // hide the calendar
  
  // Revision on 2003.10.13
  if (null != cal.sel.onchange) cal.sel.onchange();
}

// This function shows the calendar under the element having the given id.
// It takes care of catching "mousedown" signals on document and hiding the
// calendar if the click was outside.
function showCalendar(id)
{ 
    var el = document.getElementById(id);
    //custom class for restyling calendar;
    var customClass;
    if (document.getElementById('product-wizard')) {
        customClass = 'new-style-calendar';
    }
  if(calendar != null)
  { // we already have some calendar created
    calendar.hide();                 // so we hide it first.
  }
  else
  {
    // first-time call, create the calendar.
    var cal = new Calendar(true, null, selected, closeHandler);
    // cal.weekNumbers = false;
    calendar = cal;                  // remember it in the global var
    cal.setRange(1900, 2070);        // min/max year allowed.
    cal.create();
    cal.element.className += " "+customClass || "";
  }
  calendar.setDateFormat("dd.mm.y");    // set the specified date format
  calendar.parseDate(el.value);      // try to parse the text in field
  calendar.sel = el;                 // inform it what input field we use
  //calendar.showAtElement(el);        // show the calendar below it
  
  var p = Calendar.getAbsolutePos(el);
  calendar.showAt(p.x + el.offsetWidth - 200, p.y + el.offsetHeight);

  return false;
}

var STR_PB_BAE_HEADER	= "UNCRBGSF";
var STR_BANK_BAU        = "BFTB7630";

var fixingEuro = 1.95583

var STR_LIMIT_AMOUNT	= "/[0-9]{1,11}[.|,]{0,1}[0-9]{0,2}/";
var STR_LIMIT_AMOUNT_OPTIONAL	= "/[0-9]{0,11}[.|,]{0,1}[0-9]{0,2}/";
var STR_LIMIT_ALLOW_ZERO_AMOUNT	= "/[0-9]{1,11}[.|,]{0,1}[0-9]{0,2}/";
var STR_LIMIT_AMOUNT_NOTIF = "/[*]{1}|[0-9]{1,16}[.|,]{0,1}[0-9]{0,2}/";

var STR_LIMIT_BAE		= "/[0-9]{8}/";
var STR_LIMIT_PERSONID	= "/[0-9]{9}/";
var STR_LIMIT_NEWBNAKACCID	= "/[a-zA-Z0-9]{1,9}/";
var STR_LIMIT_FINCENTER	= "/.{1,7}/";
var STR_LIMIT_BIN		= "/[0-9]{10}|[?]{10}|[ ]|/";
var STR_LIMIT_ACCOUNT	= "/[0-9]{10}/";
var STR_LIMIT_TICKETID	= "/[0-9]{1,20}/";

var STR_LIMIT_ACCOUNT_F_CCY		= "/.{1,33}/";
var STR_LIMIT_PAYEE_NAME_F_CCY	= "/.{1,65}/";
var STR_LIMIT_CMN_NAME_F_CCY	= "/.{0,65}/";
var STR_LIMIT_PMT_CODE_F_CCY	= "/.{1,13}/";
var STR_LIMIT_CORR_BANK_F_CCY	= "/.{0,27}/";
var STR_LIMIT_DESCRIPTION_F_CCY = "/.{0,65}/";


var STR_LIMIT_MFNUMBER		= "/[0-9]{8}/";
var STR_LIMIT_BRBANKCODE	= "/.{0,10}/";
var STR_LIMIT_DT_KT_NAME	= "/.{1,26}/";
var STR_LIMIT_BENEF	= "/.{1,26}/";
var STR_LIMIT_EGN			= "/[0-9]{10}/";
var STR_LIMIT_BULSTAT		= "/[0-9]{13}|[0-9]{9}/";
var STR_LIMIT_EIK_EGN_LENGTH= "/[0-9]{13}|[0-9]{9,10}/";
var STR_LIMIT_TAXNUMBER		= "/[0-9]{10}/";
var STR_LIMIT_DATE			= "/[0-9]{2}[.]{1}[0-9]{2}[.]{1}[0-9]{4}/";
var STR_LIMIT_TEMPLATE_NAME = "/.{1,26}/";
var STR_LIMIT_DESCRIPTIONS	= "/.{1,26}/";

var STR_LIMIT_NUMBER_STANDART   = "/[0-9]{1,10}/";
var STR_LIMIT_NUMBER_STANDART_OPTIONAL = "/[0-9]{0,10}/";
var STR_LIMIT_NUMBER_OPTIONAL   = "/[0-9]{0,20}/";
var STR_LIMIT_NUMBER_OPTIONAL_2 = "/[0-9]{0,2}/";
var STR_LIMIT_NUMBER_1          = "/[0-9]{1}/";
var STR_LIMIT_NUMBER_2          = "/[0-9]{1,2}/";
var STR_LIMIT_NUMBER_2_NO_ZERO  = "/[1-9]{1,2}/";
var STR_LIMIT_NUMBER_3          = "/[0-9]{1,3}/";
var STR_LIMIT_NUMBER_3_NO_ZERO  = "/[1-9]{1,3}/";
var STR_LIMIT_NUMBER_NO_ZERO = "/[1-9]{1}[0-9]{0,9}/";
var STR_LIMIT_DOCUMENT_TYPE	    = "/[1-9]{1}/";
var STR_LIMIT_PARAGRAPH	        = "/[0-9]{6}/";
var STR_LIMIT_BIN_PAYEE	        = "/[0-9]{10}|[?]{10}/";
var STR_LIMIT_DOCUMENT_NUMBER	= "/.{0,33}/";
var STR_LIMIT_SHNAME = "/.{1,32}/";
var STR_LIMIT_NUMBER_STANDART_5_DIGITS = "/[1-9]{1}[0-9]{0,4}/";

var STR_EXPDAYS	= "/[0-9]{1,2}/";

var STR_LIMIT_REQUIRED = "/.{1,}/";
var STR_LIMIT_EQ_4    = "/.{4}/";
var STR_LIMIT_10	= "/.{1,10}/";
var STR_LIMIT_35	= "/.{1,35}/";
var STR_LIMIT_255	= "/.{1,255}/";
var STR_LIMIT_20	= "/.{1,20}/";
var STR_LIMIT_16	= "/.{1,16}/";
var STR_LIMIT_17 = "/.{1,17}/";
var STR_LIMIT_35_OPTIONAL	= "/.{0,35}/";
var STR_LIMIT_40_OPTIONAL = "/.{0,40}/";
var STR_LIMIT_64 = "/.{1,64}/";
var STR_LIMIT_105 = "/.{1,105}/";
var STR_LIMIT_105_OPTIONAL = "/.{0,105}/";
var STR_LIMIT_128 = "/.{1,128}/";
var STR_LIMIT_128_OPTIONAL = "/.{0,128}/";
var STR_LIMIT_LATIN_SYMBOLS_22 = "/[a-zA-Z0-9\ -]{1,22}/";
var STR_LIMIT_LATIN_35_SW = "/^[a-zA-Z0-9][a-zA-Z0-9 ()-\\/,.?:]{1,35}/";
var STR_LIMIT_LATIN_35	= "/^[a-zA-Z0-9\"][a-zA-Z0-9\" ()-\\/,.]{1,35}/";
var STR_LIMIT_LATIN_70	= "/^[a-zA-Z0-9\"][a-zA-Z0-9\" ()-\\/,.]{1,70}/";
var STR_LIMIT_LATIN_105 = "/^[a-zA-Z0-9\"][a-zA-Z0-9\" ()-\\/,.]{1,105}/";
var STR_LIMIT_LATIN_105_ALL = "/.{1,105}/";
var STR_LIMIT_LATIN_105_ALL_MIN_SYMBOLS = "/.{10,105}/";
var STR_LIMIT_LATIN_105_OPTIONAL = "/.{0,105}/";
var STR_LIMIT_LATIN_140 = "/^[a-zA-Z0-9\"][a-zA-Z0-9\" ()-\\/,.]{1,140}/";
var STR_LIMIT_LATIN_140_OPTIONAL = "/[a-zA-Z0-9\" ()-\\/,.]{0,140}/";
var STR_LIMIT_LATIN_35_OPTIONAL	= "/[a-zA-Z0-9\" ()-\\/,.]{0,35}/";
var STR_LIMIT_LATIN_70_OPTIONAL	= "/[a-zA-Z0-9\" ()-\\/,.]{0,70}/";
var STR_LIMIT_CUSTOMERID = "/.{1,18}/";
var STR_LIMIT_BNB_NUMBER = "/[0-9]{10,12}|.{0}/";

var STR_LIMIT_RATE	= "/[0-9]{1,5}([.|,][0-9]{1,7}){0,1}|.{0}/";//FX only
var STR_LIMIT_NUMBER_NOI_CODE = "/[0-9]{9,13}/";
var STR_LIMIT_NUMBER_NOI_NBR = "/[0-9]{1,5}/";
var STR_LIMIT_NUMBER_NOI_PERIOD = "/[0-9]{6}/";
var STR_LIMIT_NUMBER_6 = "/[0-9]{1,6}/";
var STR_LIMIT_NUMBER_4_OPTIONAL = "/[0-9]{0,4}/";
var STR_LIMIT_SEBRA_PARAGRAPH = "/[0-9]{2}[A-Z0-9]{0,4}|B{1}[0-9]{1}[A-Z0-9]{0,4}/";
var STR_LIMIT_SEBRA_ACTIVITY_CODE = "/[A-Z0-9]{0,4}/";
var STR_LIMIT_NO_SWIFT_SYMBOLS = "[^ \r\n\/?:()\-.,'+0-9A-Za-z]";
var STR_LIMIT_LATIN_FOREIGN_BULSTAT_13 = "/[a-zA-Z0-9]{1,13}/";

//admin
var ID_STR_CLIENT_NAME = "/.{1,64}/";
var ID_STR_CLIENT_NAME_512 = "/.{1,512}/";
var ID_STR_EMAIL			= "/.+@.+[.].+/i";
var ID_STR_EMAIL_NO_CIR = "/^[a-zA-Z0-9_\.\-]{1,}[@]{1}(\\w+\\-*\\.?)+(\\w+\\-*)*[.]{1}[a-zA-Z]{2,4}$/";
var ID_STR_EMAIL_NO_CIR_OPTIONAL     = "/[a-zA-Z0-9_\.\-]{1,}[@]{1}[a-zA-Z0-9\-\.]{1,}[.]{1}[a-zA-Z]{2,4}|.{0}/";
var STR_LIMIT_PHONE = "/[0-9]{1,30}/";
var STR_LIMIT_PHONE_X = "/[0-9X]{1,30}/";
var ID_STR_AP_ID_CARD_NO	= "/.{1,20}/";

var STR_LIMIT_AREA_CODE = "/^[1-9]{1}[0-9]{0,5}/";
var STR_LIMIT_PHONE_NUMBER_23 = "/[0-9]{1,23}/";
var STR_LIMIT_PHONE_NUMBER = "/[0-9]{1,32}/";
var STR_LIMIT_PHONE_NUMBER_15 = "/[0-9]{1,15}/";
var STR_LIMIT_PHONE_NUMBER_OPTIONAL = "/[0-9]{0,32}/";

var STR_LIMIT_IBAN = "/[Bb][Gg][0-9]{2}[a-zA-Z]{4}[0-9]{6}[a-zA-Z0-9]{8}/";
var STR_LIMIT_BIC = "/[A-Z]{6}[A-Z0-9]{2}/";
var STR_LIMIT_SWIFTN = "/^[A-Z]{6}[A-Z0-9]{2}([A-Z0-9]{3})?$/"; //old swift davahme i malki bukwi
var STR_LIMIT_ADDRESS_105	= "/[A-Za-zА-Яа-я0-9\., ]{1,105}/";
var STR_LIMIT_TEXT_32	    = "/[A-Za-zА-Яа-я0-9, _\.\-]{1,32}/";
var STR_LIMIT_TEXT_64	    = "/[A-Za-zА-Яа-я0-9, _\.\-]{1,64}/";
var STR_LIMIT_YEAR = "/[0-9]{4}/";
var STR_LIMIT_CCY = "/[A-Z]{3}/";

var STR_LIMIT_AP_NAME = "/[A-Za-zА-Яа-я0-9\ -]{1,64}/";
var STR_LIMIT_AP_NAME_BG = "/[А-Яа-я\ '\-]{1,64}/";
var STR_LIMIT_AP_NAME_EN = "/[[A-Za-z\ '\-]{1,64}/";
var STR_LIMIT_AP_ID_CARD = "/[A-Za-zА-Яа-я0-9]{1,20}/";
var STR_LIMIT_AP_ADDRESS = "/[.,A-Za-zА-Яа-я0-9\ -]{1,128}/";
var STR_LIMIT_AP_PHONE = "/[0-9]{0,20}/";
var STR_LIMIT_AP_ID_OPTIONAL = "/[A-ZА-Я0-9]{0,20}/";

var STR_CCYSWIFT_HOME = "BGN";
var STR_IBAN_BG = "BG";
var STR_IBAN_BANK_ID = "UNCR";
var STR_LIMIT_8_DIGIT_NUMBER_OPTIONAL = "/[0-9]{8}|.{0}/";

var STR_LIMIT_12_DIGIT_NUMBER = "/[0-9]{12}/"
var STR_DATE_FORMAT_DD_MM_YYYY = "dd.MM.yyyy";

var AbroadPaymentDeclarationAmount = 30000;
var StatFormAmount = 10000000000000;
var StatFormAmountOld = 100000;
var DirtyMoneyAmount = 30000;

var SEPAPaymentApplication = '1'; //Sepa countries
var EEAPaymentApplication = "2"; //EEA countries
var SessionCountdownMinutesAfterShowMessage = 1;
var BGCountryIsoCode = "100"; //BG country
/***************************************************************
*	CheckEGN()
*	Description:	Function for validating EGN.
*	Author:			Vasil Bachvarov
*	Company:		DAIS - Software, Electronics and Trade, Ltd.
*	Date:			08.10.2003
*	Example:		8103204285
****************************************************************/

function CheckEGN1(sEGN, isBulgarianCitezen)
{
    if(isBulgarianCitezen)
    {
        return CheckEGN(sEGN);
    }
    else
    {
        eval("var b = StringValidater(sEGN, " + STR_LIMIT_NUMBER_STANDART + ");");
        return b;
    }
}
function CheckEGN(sEGN)
{
	if (sEGN.length!=10) return false;
	
	var arrWeightVector = new Array(2,4,8,5,10,9,7,3,6);
	var sum = 0;
	
	for (var k=0; k<9; k++) { 
		sum += new Number(sEGN.charAt(k).valueOf()) * arrWeightVector[k]; 
	}
	
	sum = (sum % 11) % 10;
	
	if ((new String(sum))!=sEGN.charAt(9)) return false;
	
	var nDay = new Number(sEGN.substring(4, 6));
	var nMonth = new Number(sEGN.substring(2, 4));
	var nYear = new Number(sEGN.substring(0, 2));
	
	if (31<nDay) return false;
	
	if (!((nMonth>=1 && nMonth<=12) || (nMonth>=21 && nMonth<=32) || (nMonth>=41 && nMonth<=52))) return false
	
	return true;
}

function CheckSWIFT(sSWIFT)
{
    eval("var re = " + STR_LIMIT_SWIFTN);
    return re.test(sSWIFT);
    	
}

function CheckSwiftSymbols(value) {
	var re = new RegExp(STR_LIMIT_NO_SWIFT_SYMBOLS);
	return !value.match(re);
}

/***************************************************************
*	CheckTaxNumber()
*	Description:	Function for validating tax number.
*	Author:			Vasil Bachvarov
*	Company:		DAIS - Software, Electronics and Trade, Ltd.
*	Date:			08.10.2003
*	Example:		1212121220
****************************************************************/
function CheckTaxNumber(sTaxNumber)
{
	if (sTaxNumber.length!=10) return false;

	var arrWeightVector = new Array(4,3,2,7,6,5,4,3,2);
	var sum = 0;
	
	for (var k=0; k<9; k++)
	{
		sum += new Number(sTaxNumber.charAt(k).valueOf()) * arrWeightVector[k];
	}

	sum = (11-sum%11)%11;
	
	return ((new String(sum))==sTaxNumber.charAt(9));
}

/***************************************************************
*	CheckBULSTAT_9()
*	Description:	Function for validating BULSTAT 9.
*	Author:			Vasil Bachvarov
*	Company:		DAIS - Software, Electronics and Trade, Ltd.
*	Date:			08.10.2003
*	Example:		121212114
****************************************************************/
function CheckBULSTAT_9(sBULSTAT)
{
	if (sBULSTAT.length!=9) return false;

	var arrWeightVector = new Array(1,2,3,4,5,6,7,8);
	var arrWeightVector1 = new Array(3,4,5,6,7,8,9,10);
	var sum = 0;
	
	for (var k=0; k<8; k++)
	{
		sum += new Number(sBULSTAT.charAt(k).valueOf()) * arrWeightVector[k];
	}
	
	sum = sum%11;
	
	if (10==sum)
	{
		sum = 0;
		for (var k=0; k<8; k++)
		{
			sum += new Number(sBULSTAT.charAt(k).valueOf()) * arrWeightVector1[k];
		}
		
		sum = (sum%11)%10;
	}
	
	return ((new String(sum))==sBULSTAT.charAt(8));
}

/***************************************************************
*	CheckBULSTAT_13()
*	Description:	Function for validating BULSTAT 9.
*	Author:			Vasil Bachvarov
*	Company:		DAIS - Software, Electronics and Trade, Ltd.
*	Date:			08.10.2003
*	Example:		1212121140008
****************************************************************/
function CheckBULSTAT_13(sBULSTAT)
{
	if (sBULSTAT.length!=13) return false;
	
	if (!CheckBULSTAT_9(sBULSTAT.substring(0, 9))) return false;

	var arrWeightVector = new Array(2,7,3,5);
	var arrWeightVector1 = new Array(4,9,5,7);
	var sum = 0;
	
	for (var k=8; k<12; k++)
	{
		sum += new Number(sBULSTAT.charAt(k).valueOf()) * arrWeightVector[k-8];
	}
	
	sum = sum%11;
	
	if (10==sum)
	{
		sum = 0;
		for (var k=8; k<12; k++)
		{
			sum += new Number(sBULSTAT.charAt(k).valueOf()) * arrWeightVector1[k-8];
		}
		
		sum = (sum%11)%10;
	}
	
	return ((new String(sum))==sBULSTAT.charAt(12));
}

function CheckBULSTAT(sBULSTAT)
{
	if (CheckBULSTAT_9(sBULSTAT)) return true;
	if (CheckBULSTAT_13(sBULSTAT)) return true;
	return false;
}

/***************************************************************
*	CheckAccountNumber()
*	Description:	Function for validating account number and BIN.
*	Author:			Vasil Bachvarov
*	Company:		DAIS - Software, Electronics and Trade, Ltd.
*	Date:			24.10.2003
*	Example:		1234567890
****************************************************************/
function CheckAccountNumber(strAccNo)
{
	
	if (strAccNo.length!=10) return false;
	
	var arrWeightVector = new Array(2,4,8,5,10,9,7,3,6);
	var sum = 0;
	
	for (var k=0; k<9; k++) { 
		sum += new Number(strAccNo.charAt(k).valueOf()) * arrWeightVector[k]; 
	}
	
	sum = (sum % 11) % 10;
	
	if ((new String(sum))!=strAccNo.charAt(9)) return false;
	
	return true;
}

function CheckBIN(strBIN)
{
	if (""==strBIN) return true;
	if ("0000000000"==strBIN) return false;
	return CheckAccountNumber(strBIN);
}

function Convert2BISERASymbols(str2)
{
	var str = str2.toUpperCase();
	var l = str.length;
	var res = "";
	
	//anyone 20090511 "Достъп и обмен на данни чрез БИСЕРА" Версия 3.1/18.09.2007
      var arrBISERASymbols = new Array("А","Б","В","Г","Д","Е","Ж","З","И","Й","К","Л","М","Н","О","П","Р","С","Т","У","Ф","Х","Ц","Ч","Ш","Щ","Ъ","Ь","Ю","Я","{","}","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z",":",";","<","=",">","?","@","!",'"',"#","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9"," ");
    
      for (var k=0; k<l; k++)
      {
            var c = str.charAt(k);//uppercased
            var c2 = str2.charAt(k);//original
            
            var isValidBiseraSymbol = false;
            
            for (var i = 0; i < arrBISERASymbols.length; i++) {
                if (c == arrBISERASymbols[i]) 
                    isValidBiseraSymbol = true;         
            }
            if (isValidBiseraSymbol) 
                {
                      res += c2;                     
                }
          else
          {
                res += "?";
        }
      }
      return res;

}

function checkForBisera(strobj)
{

	var cnt = strobj.length;
	var testBisera="";

	for (var i=0; i<cnt; i++)
		{
			var str=eval("document.forms[0]."+strobj[i]+".value");//value to check
			
			str=TrimString(str);	
			
			if (str!="")
			{
				testBisera = Convert2BISERASymbols(str);
				if(testBisera.charAt(0)=="-")
					testBisera="?"+testBisera.substring(1);
								
				if(str!=testBisera)
				{					
					eval("tmp = document.forms[0]."+strobj[i]);				
					tmp.value = testBisera;
					tmp.focus();					
					alert(STR_BISERA_CHECK);
					return true;
				}
			}		
		}	
	return false;

}

function checkForBiseraInObjArray(strobj) {

    var cnt = strobj.length;
    var testBisera = "";

    for (var i = 0; i < cnt; i++) {
        var str = strobj[i].val(); //value to check

        str = TrimString(str);

        if (str != "") {
            testBisera = Convert2BISERASymbols(str);
            if (testBisera.charAt(0) == "-")
                testBisera = "?" + testBisera.substring(1);

            if (str != testBisera) {
                tmp.val(testBisera);
                tmp.focus();
                alert(STR_BISERA_CHECK);
                return true;
            }
        }
    }
    return false;

}

//tpetmezov 20110404
function checkForBiseraNew(value, el) {

    var testBisera = "";

    str = TrimString(value);

    if (str != "") {
        testBisera = Convert2BISERASymbols(str);
        if (testBisera.charAt(0) == "-")
            testBisera = "?" + testBisera.substring(1);

        if (str != testBisera) {
            el.value = testBisera;
            return false;
        }
    }

    return true;

}

/***************************************************************
*	CheckIBANInternational()		
*	Description:	Function for validating International IBANs
*	Author:			Anelia Brezoeva, Vladi kaza kak da smqtam modul-a
*	Company:		DAIS - Software
*	Date:			12.4.2006
*	Example:		BG33AAAA12311012345678
****************************************************************/
function CheckIBANInternational(sIBAN) 
{
    if (sIBAN.length == 0) return true;
    var arrLettersToNumbers = new Array();
    arrLettersToNumbers[65] = 10;
    arrLettersToNumbers[66] = 11;
    arrLettersToNumbers[67] = 12;
    arrLettersToNumbers[68] = 13;
    arrLettersToNumbers[69] = 14;
    arrLettersToNumbers[70] = 15;
    arrLettersToNumbers[71] = 16;
    arrLettersToNumbers[72] = 17;
    arrLettersToNumbers[73] = 18;
    arrLettersToNumbers[74] = 19;
    arrLettersToNumbers[75] = 20;
    arrLettersToNumbers[76] = 21;
    arrLettersToNumbers[77] = 22;
    arrLettersToNumbers[78] = 23;
    arrLettersToNumbers[79] = 24;
    arrLettersToNumbers[80] = 25;
    arrLettersToNumbers[81] = 26;
    arrLettersToNumbers[82] = 27;
    arrLettersToNumbers[83] = 28;
    arrLettersToNumbers[84] = 29;
    arrLettersToNumbers[85] = 30;
    arrLettersToNumbers[86] = 31;
    arrLettersToNumbers[87] = 32;
    arrLettersToNumbers[88] = 33;
    arrLettersToNumbers[89] = 34;
    arrLettersToNumbers[90] = 35;

    //първите 4 знака се преместват на края
    modifiedIBAN = sIBAN.substring(4, sIBAN.length) + sIBAN.substring(0, 4);

    transformedIBAN = "";
    //буквите се заменят с числа v transformedIBAN
    for (var k = 0; k < sIBAN.length; k++) {
        var c = modifiedIBAN.charAt(k);
        if (c >= 'A' && c <= 'Z') {
            //letter
            transformedIBAN += arrLettersToNumbers[modifiedIBAN.charCodeAt(k)];
        }
        else if (c >= '0' && c <= '9') {
            //number
            transformedIBAN += c;
        }
        else
            return false;
    }

    strbase = transformedIBAN.substring(0, transformedIBAN.length - 2) + "00";

    //ostatyk za base (bez controlno chislo)

    k = DAISModule(strbase, 97);

    var ctrlNumber = new Number(sIBAN.substring(2, 4))

    if ((98 - k) != ctrlNumber)
        return false; //controlno chislo ne sywpada s izchislenoto

    //ostatyk za IBAN
    k = DAISModule(transformedIBAN, 97)

    if (k != 1)
        return false; //newalidno kontrolno chislo

    return true;
}

/***************************************************************
*	CheckIBAN()		
*	Description:	Function for validating BG IBANs
*	Author:			Anelia Brezoeva, Vladi kaza kak da smqtam modul-a
*	Company:		DAIS - Software
*	Date:			12.4.2006
*	Example:		BG33AAAA12311012345678
****************************************************************/
function CheckIBAN(sIBAN)
{
	if (sIBAN.length==0) return true;
	
	if (sIBAN.length!=22) return false;
	
	sIBAN= sIBAN.toUpperCase();
	
	var arrLettersToNumbers = new Array();	
	arrLettersToNumbers[65] = 10;
	arrLettersToNumbers[66] = 11;
	arrLettersToNumbers[67] = 12;
	arrLettersToNumbers[68] = 13;
	arrLettersToNumbers[69] = 14;
	arrLettersToNumbers[70] = 15;
	arrLettersToNumbers[71] = 16;
	arrLettersToNumbers[72] = 17;
	arrLettersToNumbers[73] = 18;
	arrLettersToNumbers[74] = 19;
	arrLettersToNumbers[75] = 20;
	arrLettersToNumbers[76] = 21;
	arrLettersToNumbers[77] = 22;
	arrLettersToNumbers[78] = 23;
	arrLettersToNumbers[79] = 24;
	arrLettersToNumbers[80] = 25;
	arrLettersToNumbers[81] = 26;
	arrLettersToNumbers[82] = 27;
	arrLettersToNumbers[83] = 28;
	arrLettersToNumbers[84] = 29;
	arrLettersToNumbers[85] = 30;
	arrLettersToNumbers[86] = 31;
	arrLettersToNumbers[87] = 32;
	arrLettersToNumbers[88] = 33;
	arrLettersToNumbers[89] = 34;
	arrLettersToNumbers[90] = 35;
	
	//първите 4 знака се преместват на края
	modifiedIBAN = sIBAN.substring(4,sIBAN.length)+ sIBAN.substring(0,4);
	
	transformedIBAN="";
	//буквите се заменят с числа v transformedIBAN
	for (var k=0; k<sIBAN.length; k++)
	{
		var c = modifiedIBAN.charAt(k);
		if(c>='A' && c<='Z') 
		{
			//letter
			transformedIBAN += arrLettersToNumbers[modifiedIBAN.charCodeAt(k)];
		}
		else if(c>='0' && c<='9')
		{
			//number
			transformedIBAN += c;
		}
		else
			return false;			
	}
		
	strbase = transformedIBAN.substring(0,transformedIBAN.length-2)	+ "00";
	
	//ostatyk za base (bez controlno chislo)
	
	k=DAISModule(strbase,97);
	
	var ctrlNumber = new Number(sIBAN.substring(2,4))
	
	if((98 - k)!=ctrlNumber)
		return false;//controlno chislo ne sywpada s izchislenoto
	
	//ostatyk za IBAN
	k = DAISModule(transformedIBAN,97)
		
	if(k!=1)
		return false;//newalidno kontrolno chislo

	return true;
}

function DAISModule(strBigNumber,SmallNumber)
{
	k=0;
	for (var i=0; i<strBigNumber.length; i++)
	{		
		k=(10*k + new Number(strBigNumber.charAt(i))) % SmallNumber;		
	
	}
	return k;
}

// tpetmezov 20090724 Check if the IBAN is valid for the current Bank
function CheckValidBankIBAN(sIBAN)
{
    //IBAN should looks like BG_|_UNCR_.... or BG_|_ bank code
    
    sIBAN= sIBAN.toUpperCase();
    
    if(sIBAN.substring(0,2) != STR_IBAN_BG)
    {
        return false;
    }
    else if(sIBAN.substring(4,4+STR_IBAN_BANK_ID.length) != STR_IBAN_BANK_ID)
    {
        return false;
    }
    
    return true;
}

/***************************************************************
*	CheckDate()		
*	Description:	Function for validating date both filled or get from the calendar picker.
*	Author:			Anelia Brezoeva
*	Company:		DAIS - Software, Electronics and Trade, Ltd.
*	Date:			26.04.2004
*	Example:		not 42.13.2004
****************************************************************/


function isInteger(s){
	var i;
    for (i = 0; i < s.length; i++){   
        // Check that current character is number.
        var c = s.charAt(i);
        if (((c < "0") || (c > "9"))) return false;
    }
    // All characters are numbers.
    return true;
}

function stripCharsInBag(s, bag){
	var i;
    var returnString = "";
    // Search through string's characters one by one.
    // If character is not in bag, append to returnString.
    for (i = 0; i < s.length; i++){   
        var c = s.charAt(i);
        if (bag.indexOf(c) == -1) returnString += c;
    }
    return returnString;
}

function daysInFebruary (year){
	// February has 29 days in any year evenly divisible by four,
    // EXCEPT for centurial years which are not also divisible by 400.
    return (((year % 4 == 0) && ( (!(year % 100 == 0)) || (year % 400 == 0))) ? 29 : 28 );
}
function DaysArray(n) {
	for (var i = 1; i <= n; i++) {
		this[i] = 31
		if (i==4 || i==6 || i==9 || i==11) {this[i] = 30}
		if (i==2) {this[i] = 29}
   } 
   return this
}

function CheckDate(sDateid){

	sDate=sDateid.value;
	
	if (sDate.length!=0)
	{
		if(sDate.length!=10) {
		alert(STR_INCORRECT_FORMAT+STR_DATE_FORMAT);
		sDateid.focus();
		return false;
		} 
	}else {
		return true
		}
	 
	
	var dtCh= ".";
	var minYear=1900;
	var maxYear=2100;

	var daysInMonth = DaysArray(12)
	var pos1=sDate.indexOf(dtCh)
	var pos2=sDate.indexOf(dtCh,pos1+1)
	var strDay=sDate.substring(0,pos1)
	var strMonth=sDate.substring(pos1+1,pos2)
	var strYear=sDate.substring(pos2+1)
	strYr=strYear
	if (strDay.charAt(0)=="0" && strDay.length>1) strDay=strDay.substring(1)
	if (strMonth.charAt(0)=="0" && strMonth.length>1) strMonth=strMonth.substring(1)
	for (var i = 1; i <= 3; i++) {
		if (strYr.charAt(0)=="0" && strYr.length>1) strYr=strYr.substring(1)
	}
	month=parseInt(strMonth)
	day=parseInt(strDay)
	year=parseInt(strYr)
	if (pos1==-1 || pos2==-1){
		alert(STR_INCORRECT_FORMAT+STR_DATE_FORMAT);
		sDateid.focus();
		return false
	}
	if (strDay.length<1 || day<1 || day>31 || (month==2 && day>daysInFebruary(year)) || day > daysInMonth[month]){
		alert(STR_INCORRECT_FORMAT+STR_DATE_DAY);
		sDateid.focus();
		return false
	}
	if (strMonth.length<1 || month<1 || month>12){
		alert(STR_INCORRECT_FORMAT+STR_DATE_MONTH);
		sDateid.focus();
		return false
	}
	
	if (strYear.length != 4 || year==0 || year<minYear || year>maxYear){
		alert(STR_DATE_YEAR+minYear+STR_DATE_AND+maxYear);
		sDateid.focus();
		return false
	}
	if (sDate.indexOf(dtCh,pos2+1)!=-1 || isInteger(stripCharsInBag(sDate, dtCh))==false){
		alert(STR_INCORRECT_FORMAT+STR_DATE_FORMAT);
		sDateid.focus();
		return false
	}
	return true
}

function dateCompare(d1,d2)
	{
		if (d1>d2)
		return false;
		else
		return true;
	}
	
	function string2date(sDate)
	{
	var dDate;
	
	var dtCh= ".";
	var pos1=sDate.indexOf(dtCh);
	var pos2=sDate.indexOf(dtCh,pos1+1);
	var strDay=sDate.substring(0,pos1);
	var strMonth=sDate.substring(pos1+1,pos2);
	var strYear=sDate.substring(pos2+1);
	
	dDate = new Date(strYear,strMonth-1,strDay);
		
	return dDate;
	}

	function dateDiffInDays(d1, d2)
	{
	    return Math.ceil((d2 - d1) / (1000 * 3600 * 24));
	}

    function dateDiffInDaysStr(strD1, strD2)
	{
        var d1 = string2date(strD1);
        var d2 = string2date(strD2);
	    return Math.ceil((d2 - d1) / (1000 * 3600 * 24));
	}

function CheckDate2(strDateid)
{
    var strValue = document.getElementById(strDateid).value;
    
    var dtCh= ".";
    var pos1 = strValue.indexOf(dtCh);
    var day     = 0;
    var month   = 0;
    var year    = 0;
    var bReturn = true;
    
    eval("var s = document.getElementById('" + strDateid + "_Name').innerHTML");
    
    if(pos1 == -1)
    {
        if(strValue.length != 8)
        {
            alert(STR_INCORRECT_FORMAT + s + ": " + STR_DATE_FORMAT_2);
		    document.getElementById(strDateid).focus();
		    return false;
		}
		
        day     = Number(strValue.substring(0,2));
        month   = Number(strValue.substring(2,4));
        year    = Number(strValue.substring(4,8));
    }
    else
    {
        if(strValue.length != 10)
        {
            alert(STR_INCORRECT_FORMAT + s + ": " + STR_DATE_FORMAT);
		    document.getElementById(strDateid).focus();
		    return false;
		}

	    day     = Number(strValue.substring(0,2));
        month   = Number(strValue.substring(3,5));
        year    = Number(strValue.substring(6,10));
    }

    var minYear = 1900;
	var maxYear = 2100;
    var daysInMonth = DaysArray(12);

    if (day < 1 || day > 31 || (month == 2 && day > daysInFebruary(year)) || day > daysInMonth[month])
	{
	    alert(STR_INCORRECT_FORMAT + s + ": " + STR_DATE_DAY);
	    bReturn = false;
    }
    
    if (month < 1 || month > 12)
    {
		alert(STR_INCORRECT_FORMAT + s + ": " + STR_DATE_MONTH);
		bReturn = false;
	}
	
	if (year == 0 || year < minYear || year > maxYear)
	{
		alert(STR_INCORRECT_FORMAT + s + ": " + STR_DATE_YEAR + minYear + STR_DATE_AND + maxYear);
		bReturn = false;
	}

    if(!bReturn)
        document.getElementById(strDateid).focus();

	return bReturn;
}//CheckDate2


function CheckSwiftContryIsoCode(swiftCodeInput, countryIsoCode) 
 {
     if (swiftCodeInput != null && TrimString(swiftCodeInput.value).length != 0 && TrimString(countryIsoCode).length != 0) 
     {
         var swiftCode = swiftCodeInput.value;
         var swiftIsoCode = swiftCode.substring(4, 6).toUpperCase();

         if (swiftIsoCode == countryIsoCode)
             return true;
         else 
         {
             alert(STR_INVALID_SWIFT_CODE);
             swiftCodeInput.focus();
             return false;
         }
     }
     return true;
 }
 
 function CheckBirthDate(dateStr)
 {
    if (dateStr.length ==0)
	{
	    return false;
	}
	
	var today = new Date();
	var birthDate = string2date(dateStr);
	
	if(today < birthDate)
	{
	    return false;
	}
	
	return true;
	
 }
  function CheckDateWithToday(dateStr, comparer)
 {
    if (dateStr.length ==0)
	{
	    return false;
	}
	
	var result = true;
	var today = new Date();
    today = new Date(today.getFullYear(), today.getMonth(), today.getDate());
	var date = string2date(dateStr);

	switch(comparer)
	{
	    case 'lt' :
	        if(date >= today)
	            result = false;
	        break;
	     case 'l' :
	        if(date > today)
	            result = false;
	        break;
	     case 'gt' :
	        if(date <= today)
	            result = false;
	        break;
	     case 'g' :
	        if(date < today)
	            result = false;
	        break;
	     default : 
	            result = false;
	            break;   
	}
	
	return result;

}

function GetStrLimitNumber(numberLenght) {
    var result = "/[0-9]{1," + numberLenght + "}/";
    return result;
}

function GetStrLimitNDigitNumber(numberOfDigits) {
    return "/[0-9]{"+ numberOfDigits +"}/";
}

function GetStrLimitNumber1(fromLenghtm, toLenght) {
    var result = "/[0-9]{" + fromLenghtm + "," + toLenght + "}/";
    return result;
}

function GetStrLimit(fromLenghtm, toLenght) {
    var result = "/.{" + fromLenghtm + "," + toLenght + "}/";
    return result;
}


function ValidatePhoneNumberWithCode(phoneNumber, code, numberOfDigits) {

    if (phoneNumber.substring(0, code.length) != code) {
        return false;
    }

    var b = false;
    if (phoneNumber != "") {
            b = StringValidater(phoneNumber, GetStrLimitNDigitNumber(numberOfDigits));
    }

    if (!b) {
        return false;
    }
    return true;
}


$(document).ready(function () {
    $.validator.methods.number = function (value, element) {
        return true;
    };

    $.validator.methods.range = function (value, element, param) {
        var f = ToFloat(value);
        return this.optional(element) || (f >= param[0] && f <= param[1]);
    };






});


// Custom validation for jquery 

$.validator.addMethod("iban",
    function (value, element) {
        return (!value && this.optional(element)) || CheckIBAN(value);
    }, '');
    $.validator.unobtrusive.adapters.addBool("iban");

$.validator.addMethod("bulstat",
    function (value, element) {
        return (!value && this.optional(element)) || CheckBULSTAT(value);
    }, '');
    $.validator.unobtrusive.adapters.addBool("bulstat");

$.validator.addMethod("swift",
    function (value, element) {
        return (!value && this.optional(element)) || CheckSWIFT(value);
    }, '');
    $.validator.unobtrusive.adapters.addBool("swift");
$.validator.addMethod("egn",
    function (value, element) {
        return (!value && this.optional(element)) || CheckEGN(value);
    }, '');
    $.validator.unobtrusive.adapters.addBool("egn");
$.validator.addMethod("bisera",
    function (value, element) {
        return (!value && this.optional(element)) || checkForBiseraNew(value,element);
    }, '');
    $.validator.unobtrusive.adapters.addBool("bisera");
$.validator.addMethod("taxnumber",
    function (value, element) {
        return (!value && this.optional(element)) || CheckTaxNumber(value);
    }, '');
    $.validator.unobtrusive.adapters.addBool("taxnumber");

$.validator.addMethod("rings",
    function (value, element) {
        return CheckRings(value, element); //(!value && this.optional(element)) || 
    }, '');
    $.validator.unobtrusive.adapters.addBool("rings");

    function CheckRings(value, element) {
        var amount = $("[data-rings='Amount']").val();
        var payeeBIC = $("[data-rings='PayeeBIC']").val();
        if (payeeBIC.substring(0, STR_PB_BAE_HEADER.length) != STR_PB_BAE_HEADER)
        {
            if (IsGreaterThan(ToFloat(amount), 99999) && element.value != "checked")
                {return false; }
        }
        return true;
    }

    $.validator.addMethod("swiftsymbols",
       function (value, element) {
           return (!value && this.optional(element)) || CheckSwiftSymbols(value);
       }, '');
    $.validator.unobtrusive.adapters.addBool("swiftsymbols");

    function GetInvalidSwiftSymbols(value) {
        var re = new RegExp(STR_LIMIT_NO_SWIFT_SYMBOLS, 'g');
        return value.match(re);    
    }

    $.validator.addMethod("swiftsymbolsprintallincorectcharacters",
        function (value, element) {
            return (!value && this.optional(element)) || CheckSwiftSymbols(value);
        }, function (params, element) {
            return FormatInvalidSymbols(STR_LIMIT_NO_SWIFT_SYMBOLS, element, ID_STR_SWIFT_SYMBOLS_ERROR_MSG);
        });
    $.validator.unobtrusive.adapters.addBool("swiftsymbolsprintallincorectcharacters");

$.validator.addMethod("ringsbae",
    function (value, element) {
        return CheckRingsBAE(value, element); //(!value && this.optional(element)) || 
    }, '');
    $.validator.unobtrusive.adapters.addBool("ringsbae");

    function CheckRingsBAE(value, element) {
        var payeeBIC = $("[data-rings='PayeeBIC']").val();
        if (payeeBIC.substring(0, STR_PB_BAE_HEADER.length) == STR_PB_BAE_HEADER && element.value == "checked") {
            return false;
        }

        return true;
    }


    $.validator.addMethod("idrequired",
    function (value, element) {
        return Checkidrequired(value, element);
    }, '');
    $.validator.unobtrusive.adapters.addBool("idrequired");

    function Checkidrequired(value, element) {
        var LiabilityPersonBULSTAT = $("[data-idrequired='LiabilityPersonBULSTAT']").val();
        var LiabilityPersonEGN = value;
        var LiabilityPersonID = $("[data-idrequired='LiabilityPersonID']").val();
        if (!LiabilityPersonBULSTAT && !LiabilityPersonEGN && !LiabilityPersonID
            || (LiabilityPersonEGN && LiabilityPersonID)
            || (LiabilityPersonEGN && LiabilityPersonBULSTAT)
            || (LiabilityPersonBULSTAT && LiabilityPersonID)) {
            return false;
        }

        return true;
    }

    $.validator.addMethod("fccyswift",
    function (value, element) {
        return CheckSwiftAndBenDate(value, element); //(!value && this.optional(element)) || 
    }, '');
    $.validator.unobtrusive.adapters.addBool("fccyswift");

    function CheckSwiftAndBenDate(value, element) {

        var Beneficiary_value_date = $("[data-fccyswift='Beneficiary_value_date']");

        if (value == "UNCRBGSF" && $(Beneficiary_value_date).val() != 'SAMEDAY') {
            //Промяната се отнася за вътрешнобанков валутен превод и периодични преводи, вече не се хвърля грешка, а се сменя стойността на вальора
            $(Beneficiary_value_date).val("SAMEDAY");
        }

        return true;
    }

    $.validator.addMethod("enclosure",
    function (value, element) {
        return CheckEnclosure(value, element); //(!value && this.optional(element)) || 
    }, '');
    $.validator.unobtrusive.adapters.addBool("enclosure");

    function CheckEnclosure(value, element) {
        var Subtype = $("[data-enclosure='Subtype']").val(); //Amount * CCYRate/FixRate
        var Amount = $("[data-enclosure='Amount']").val();
        var FixRate = $("[data-enclosure='FixRate']").val();
        var Direction = $("[data-enclosure='Direction']").val();
        var BenefType = $("[data-enclosure='BenefType']").val();
        var InLeva = ToFloat(Amount * FixRate);
        var selectionConetnt = $("form");
        var isEEACountry = CheckCountryPaymentApplicationNoAlert(selectionConetnt, EEAPaymentApplication);

        if (Subtype == 0 && IsGreaterOrEqualThan(InLeva, 30000) && (Direction == "A" && BenefType == "A") && !value && !isEEACountry) {
            return false; 
        }	

        return true;
    }

    $.validator.addMethod("ibanforcountry",
    function (value, element) {
        return IbanAndSwiftCheck(value, element,'iban'); //(!value && this.optional(element)) || 
    }, '');
    $.validator.unobtrusive.adapters.addBool("ibanforcountry");

    $.validator.addMethod("swiftforcountry",
    function (value, element) {
        return IbanAndSwiftCheck(value, element, 'swift'); //(!value && this.optional(element)) || 
    }, '');
    $.validator.unobtrusive.adapters.addBool("swiftforcountry");


    function IbanAndSwiftCheck(value, element, type) {

        var selectionConetnt = $("form");
        var arrayIndex = $(element).attr("data-arrayindex");
        if (arrayIndex != null && arrayIndex != "") {
            var arrayDivPrefixId = $("#ArrayDivPrefixId").val();
            selectionConetnt = $("#" + arrayDivPrefixId + arrayIndex);
            return IbanAndSwiftCheck1(value, element, type, selectionConetnt);
        }
        else {
            return IbanAndSwiftCheck1(value, element, type, selectionConetnt);
        }
    }

    function IbanAndSwiftCheck1(value, element, type, selectionConetnt) {
        var PayeeCountryCode = selectionConetnt.find("[data-ibanandswift='PayeeCountryCode']").val();
        var ctrlPayeeIBAN = selectionConetnt.find("[data-ibanandswift='PayeeAccountNumber']")[0];
        var PayeeIBAN = selectionConetnt.find("[data-ibanandswift='PayeeAccountNumber']").val();
        var ForeignCCYPaymentType = selectionConetnt.find("[data-ibanandswift='ForeignCCYPaymentType']").val();
        var CheckIbanStruct = selectionConetnt.find("[data-ibanandswift='PayeeCheckIbanStruct']").val();
        var IbanStructure = selectionConetnt.find("[data-ibanandswift='PayeeIbanStructure']").val();
        var CheckIbanControl = selectionConetnt.find("[data-ibanandswift='PayeeCheckIbanControl']").val();
        var ctrlPayeeBankSWIFT = selectionConetnt.find("[data-ibanandswift='PayeeBankSWIFT']")[0];
        var PayeeBankSWIFT = selectionConetnt.find("[data-ibanandswift='PayeeBankSWIFT']").val();
        var CountryIsoCode = selectionConetnt.find("[data-ibanandswift='PayeeIsoCountryCode']").val();


        if (type == 'iban') 
        {
            if (TrimString(PayeeCountryCode).length != 0) 
            {
                if (PayeeIBAN != null) 
                {
                    if (TrimString(PayeeIBAN).length != 0) 
                    {
                        if (ForeignCCYPaymentType != "C") 
                        {
                            if (!CheckIbanForCountryNoAlert(ctrlPayeeIBAN, CheckIbanStruct, IbanStructure, CheckIbanControl))
                                return false;
                        }
                    }
                }
            }
            return true;
        }
        else if (type == 'swift') 
        {
            if (PayeeBankSWIFT != null) 
            {
                if (TrimString(CountryIsoCode).length != 0) 
                {
                    if (TrimString(PayeeBankSWIFT).length != 0) 
                    {
                        if (!CheckSwiftContryIsoCodeNoAlert(ctrlPayeeBankSWIFT, CountryIsoCode)) 
                        return false;
                    }
                }
            }
        return true;
      }
    return true;
    }

    $.validator.addMethod("expenses",
    function (value, element) {
        return CheckExpenses(value, element); //(!value && this.optional(element)) || 
    }, '');
    $.validator.unobtrusive.adapters.addBool("expenses");

    function CheckExpenses(value, element) {
        var paymentType = $("#ForeignCCYPaymentType").val();

        if (paymentType == "C" && value == "B") {
            return false;
        }

        return true;
    }

    $.validator.addMethod("payeebank",
    function (value, element) {
        return CheckPayeeBank(value, element); //(!value && this.optional(element)) || 
    }, '');
    $.validator.unobtrusive.adapters.addBool("payeebank");

    function CheckPayeeBank(value, element) {
        //value = PayeeBankSWIFT
        var PayeeBankName = $("[data-payeebank='PayeeBankName']").val();
        var PayeeBankCity = $("[data-payeebank='PayeeBankCity']").val();
        var PayeeBankCountry = $("[data-payeebank='PayeeBankCountry']").val();

        if (value == "") {

            if (PayeeBankName == "") {
                return false;
            }
            if (PayeeBankCity == "") {
                return false;
            }
            if (PayeeBankCountry == "") {
                return false;
            }
        } 
        else if (!CheckSWIFT(value)){
            return false;
        }

        return true;
    }


    function CheckSwiftContryIsoCodeNoAlert(swiftCodeInput, countryIsoCode) {
        if (swiftCodeInput != null && TrimString(swiftCodeInput.value).length != 0 && TrimString(countryIsoCode).length != 0) {
            var swiftCode = swiftCodeInput.value;
            var swiftIsoCode = swiftCode.substring(4, 6).toUpperCase();

            if (swiftIsoCode == countryIsoCode)
                return true;
            else {
                //alert(STR_INVALID_SWIFT_CODE);
                //swiftCodeInput.focus();
                return false;
            }
        }
        return true;
    }

    $.validator.addMethod("ibanpaymentapplication",
    function (value, element) {
        return CheckCountryPaymentApplication(value, element, "IBAN"); //(!value && this.optional(element)) || 
    }, '');
    $.validator.unobtrusive.adapters.addBool("ibanpaymentapplication");

    $.validator.addMethod("countrypaymentapplication",
        function (value, element) {
            return CheckCountryPaymentApplication(value, element, "country"); //(!value && this.optional(element)) || 
        }, '');
    $.validator.unobtrusive.adapters.addBool("countrypaymentapplication");


    function CheckCountryPaymentApplication(value, element, type) {
        var selectionConetnt = $("form");
        var arrayIndex = $(element).attr("data-arrayindex");
        if (arrayIndex != null && arrayIndex != "") {
            var arrayDivPrefixId = $("#ArrayDivPrefixId").val();
            selectionConetnt = $("#" + arrayDivPrefixId + arrayIndex);
            return CheckCountryPaymentApplicationNoAlert(selectionConetnt, SEPAPaymentApplication, type);
        }
        else {
            return CheckCountryPaymentApplicationNoAlert(selectionConetnt, SEPAPaymentApplication, type);
        }
    }

    function CheckCountryPaymentApplicationNoAlert(selectionConetnt, paymentApplication, type) {
        if (type == "country") {
            var PayeeCountryPaymentApplication = selectionConetnt.find("[data-countrypaymentapplication='PayeeCountryPaymentApplication']").val();           
        }
        else if (type == "IBAN")
        {
            var PayeeCountryPaymentApplication = selectionConetnt.find("[data-ibanpaymentapplication='IBANCountryPaymentApplication']").val();
        }
        else
        {
            var PayeeCountryPaymentApplication = selectionConetnt.find("[data-countrypaymentapplication='PayeeCountryPaymentApplication']").val();
        }
        if (PayeeCountryPaymentApplication != null) {
            if (!BitAnd(paymentApplication, PayeeCountryPaymentApplication)) {
                return false;
            }
        }
        return true;
    }

    $.validator.addMethod("transactionamountlimit",
    function (value, element) {
        return ValidateTransactionAmount(value, element); //(!value && this.optional(element)) || 
    }, '');
    $.validator.unobtrusive.adapters.addBool("transactionamountlimit");

    function ValidateTransactionAmount(value, element) {

        var transactionLimitInBGN = $("#transactionAmountLimit").val();
        var amt = MyParseFloat(value);
        if (IsGreaterThan(amt * fixingEuro, transactionLimitInBGN)) {

            return false;
        }
        return true;
    }

	$.validator.addMethod("priorityiban",
    function (value, element) {
        return CheckPriorityAndIBAN(value, element); //(!value && this.optional(element)) || 
    }, '');
    $.validator.unobtrusive.adapters.addBool("priorityiban");

    $.validator.addMethod("egnbulstat",
    function (value, element) {
        var result = ((!value && this.optional(element)) || CheckEGN(value));
        if (result) {
            return true;
        }
        else {
            result = (!value && this.optional(element)) || CheckBULSTAT(value);
            if (result) {
                return true;
            }
            else {
                return (!value && this.optional(element)) || CheckPersonalIdentificationNumber(value);
            }
        }
    }, '');
    $.validator.unobtrusive.adapters.addBool("egnbulstat");

    $.validator.addMethod("checkboxtrue",
    function (value, element) {
        return element.checked;
    }, '');
    $.validator.unobtrusive.adapters.addBool("checkboxtrue");

    jQuery.validator.addMethod("todaydatecompare", function (value, element, validationtype) {
        return this.optional(element) || TodayDateCompare(validationtype, value);
    }, "");

    function TodayDateCompare(validationtype, value) {

        var compare = "";
        switch (validationtype) {
            case 'LessOrEqualThan':
                compare = "l";
                break;
            case 'LessThan':
                compare = "lt";
                break;
            case 'GreaterOrEqual':
                compare = "g";
                break;
            case 'GreaterThan':
                compare = "gt";
                break;
            default:
                return false;
                break;
        }
        return CheckDateWithToday(value, compare);
    }
    $.validator.unobtrusive.adapters.addSingleVal("todaydatecompare", "validationtype");

    $.validator.addMethod("liabilitylocumenttypeiban",
       function (value, element) {
           return ValidateLiabilityDocumentTypeIBAN(value, element); //(!value && this.optional(element)) || 
       }, '');
    $.validator.unobtrusive.adapters.addBool("liabilitylocumenttypeiban");

    function ValidateLiabilityDocumentTypeIBAN(value, element) {

        var result = true;
        var payeeIban = $("#PayeeIBAN").val();
        if (payeeIban != "") {
            if (payeeIban.substring(12, 14) == "81" || payeeIban.substring(12, 14) == "88") {
                if (value != "9") {
                    result = false;
                }
            }
            else if (payeeIban.substring(12, 14) == "82") {
                if (value != "2" && value != "3" && value != "6" && value != "9") {
                    result = false;
                }
            }
        }

        return result;
    }
    $.validator.addMethod("closedbudgetiban",
           function (value, element) {
               return ValidateTransactionAmount(value, element); //(!value && this.optional(element)) || 
           }, '');
    $.validator.unobtrusive.adapters.addBool("closedbudgetiban");

    function ValidateTransactionAmount(value, element) {

        var result = true;
/*
plam 20140226 - махаме проверката за бюджетен превод при въвеждане на IBAN на получателя с идентификатори за вид сметка "85" и "86".
        if (value != "") {
            if (value.substring(12, 14) == "85" || value.substring(12, 14) == "86") {
                    result = false;
            }
        }
*/
            return result;
        }

    $.validator.addMethod("ibanbic",
    function (value, element) {
        return ValidateIbanBulbankBicPrefix(value, element);  
    }, '');

    function ValidateIbanBulbankBicPrefix(value, element) {
        var result = true;
        if (value != "") {
            if (value.length < STR_IBAN_BANK_ID.length + 4 || value.substring(4, 4 + STR_IBAN_BANK_ID.length) != STR_IBAN_BANK_ID) {
                return false;
            }
        }
        return result;
    }
    $.validator.unobtrusive.adapters.addBool("ibanbic");

    function CheckPersonalIdentificationNumber(sPIN) {
        if (sPIN.length != 10) return false;

        var arrWeighVector = [21, 19, 17, 13, 11, 9, 7, 3, 1];
        var sum = 0;

        for (var k = 0; k < 9; k++) {
            sum += Number(sPIN[k]) * arrWeighVector[k];
        }

        sum = sum % 10;

        if (sum != sPIN[9]) return false;

        return true;
    };

    $.validator.addMethod("notbulbankbic",
		function (value, element) {
			return CheckBIC(value, element); //(!value && this.optional(element)) || 
		}, '');
    $.validator.unobtrusive.adapters.addBool("notbulbankbic");

    $.validator.addMethod("isibanownbank",
           function (value, element) {
               return !CheckValidBankIBAN(value); //(!value && this.optional(element)) || 
           }, '');
    $.validator.unobtrusive.adapters.addBool("isibanownbank");

    $.validator.addMethod("customregex", function (value, element, params) {
        var match;
        if (this.optional(element)) {
            return true;
        }

        match = new RegExp(params).exec(value);
        return (match && (match.index === 0) && (match[0].length === value.length));
    }, '');
    $.validator.unobtrusive.adapters.addSingleVal("customregex", "pattern");

    $.validator.addMethod("customregexprintallincorectcharacters", function (value, element, params) {
        var match;
        if (this.optional(element)) {
            return true;
        }
        match = new RegExp(params).exec(value);
        return !match;
        }, function (params, element) {
            return FormatInvalidSymbols(params, element, ID_STR_INVALID_SYMBOLS_ERROR_MSG);
        });
    $.validator.unobtrusive.adapters.addSingleVal("customregexprintallincorectcharacters", "pattern");
   
    function GetInvalidSymbols(value, pattern) {
        var re = new RegExp(pattern, 'g');
        return value.match(re);
    }

    function CheckBIC(value, element) {

            if (value == STR_PB_BAE_HEADER) {
                return false;
            }

            return true;
        }

    function FormatInvalidSymbols(params, element, errorMsg) 
    {
        var formatedInvalidSymbols = "";
        var invalidSymbols = GetInvalidSymbols($(element).val(), params);
        $.each(invalidSymbols, function (index, value) {
            if (index == invalidSymbols.length - 1) {
                formatedInvalidSymbols = formatedInvalidSymbols.concat(value);
            }
            else {
                formatedInvalidSymbols = formatedInvalidSymbols.concat(value + ",");
            } 
        });
    
        return errorMsg + formatedInvalidSymbols; 
    }
    
    
function SignDigest(who)
{
	if(window.event)
		window.event.cancelBubble = true;

	var nID = who.value;
	if(!who.checked)
	{
		eval("document.forms[0].sign_" + nID + ".value=''");
		return true;
	}
	eval("src = document.forms[0].digest_" + nID + ".value");
	dest = DoSign(src);
	if (""==dest)
	{
		eval("document.forms[0].sign_" + nID + ".value=''");
		return false;
	}
	
	eval("document.forms[0].sign_" + nID + ".value=dest");
	return true;
}

function SignDigestForCheckBox(who) {
    if (window.event)
        window.event.cancelBubble = true;

    var nID = who.value;
    if (!who.checked) {
        eval("document.forms[0].sign_" + nID + ".value=''");
        var resDeferred = $.Deferred();
        resDeferred.resolve(true);
        return resDeferred;
    }
    
    return SignDigest1(nID);
}



function SignDigest1(nID) {
	var resDeferred = $.Deferred();

	var obj = {};
	obj.digest = document.getElementById("digest_" + nID).value;
	obj.digestValue = document.getElementById("biss_digestValue_" + nID).value;
	obj.signedContentsCert = document.getElementById("biss_signedContentsCert").value;
	obj.signedDigestValue = document.getElementById("biss_signedDigestValue_" + nID).value;
	obj.signerCertificate = document.getElementById("biss_signerCertificate").value;

	var tmp = DoSignAsync(obj).done(function (dest){
		if ("" == dest) {
			eval("document.forms[0].sign_" + nID + ".value=''");
			resDeferred.resolve(false);
		}
		else{
			eval("document.forms[0].sign_" + nID + ".value=dest");
			resDeferred.resolve(true);
		}
	});

	return resDeferred;
}

function SignDigestOnCancel(str)
{
	if(window.event)
		window.event.cancelBubble = true;

	var nID = str;
	
	eval("src = document.forms[0].digest_" + nID + ".value");
	dest = DoSign(src);
	if (""==dest)
	{
		eval("document.forms[0].sign_" + nID + ".value=''");
		return false;
	}
	
	eval("document.forms[0].sign_" + nID + ".value=dest");
	
	//return true;
}
// CAPICOM constants 
var CAPICOM_STORE_OPEN_READ_ONLY = 0;
var CAPICOM_CURRENT_USER_STORE = 2;
var CAPICOM_CERTIFICATE_FIND_SHA1_HASH = 0;
var CAPICOM_CERTIFICATE_FIND_EXTENDED_PROPERTY = 6;
var CAPICOM_CERTIFICATE_FIND_TIME_VALID = 9;
var CAPICOM_CERTIFICATE_FIND_KEY_USAGE = 12;
var CAPICOM_DIGITAL_SIGNATURE_KEY_USAGE = 0x00000080;
var CAPICOM_AUTHENTICATED_ATTRIBUTE_SIGNING_TIME = 0;
var CAPICOM_INFO_SUBJECT_SIMPLE_NAME = 0;
var CAPICOM_ENCODE_BASE64 = 0;
var CAPICOM_E_CANCELLED = -2138568446;
var CERT_KEY_SPEC_PROP_ID = 6;
 
 
function IsCAPICOMInstalled()
{
	if(typeof(oCAPICOM) == "object")
	{
		if( (oCAPICOM.object != null) )
     	{
      		// We found CAPICOM!
     		return true;
     	}
	}
}


function FindCertificateByHash()
{
	
	try
	{
		// instantiate the CAPICOM objects
		var MyStore = new ActiveXObject("CAPICOM.Store");
		// open the current users personal certificate store
		MyStore.Open(CAPICOM_CURRENT_USER_STORE, "My", CAPICOM_STORE_OPEN_READ_ONLY);

		// find all of the certificates that have the specified hash
		var FilteredCertificates = MyStore.Certificates.Find(CAPICOM_CERTIFICATE_FIND_SHA1_HASH, strUserCertigicateThumbprint);

		var Signer = new ActiveXObject("CAPICOM.Signer");
		Signer.Certificate = FilteredCertificates.Item(1);
		return Signer;

		// Clean Up
		MyStore = null;
		FilteredCertificates = null;		
	}
	catch (e)
	{
		if (e.number != CAPICOM_E_CANCELLED)
		{
	   		//alert("An error occurred while opening your personal certificate store, aborting");
		    return new ActiveXObject("CAPICOM.Signer"); 
		}
	}
}

function HasCertificateInBrowser() {

	return true;//PLAM TODO BISS

    if (window.crypto && window.crypto.signText)
    {
        //not IE
        return true;
    }
    else {
        //IE
        // instantiate the CAPICOM objects
        var MyStore = new ActiveXObject("CAPICOM.Store");
        // open the current users personal certificate store
        MyStore.Open(CAPICOM_CURRENT_USER_STORE, "My", CAPICOM_STORE_OPEN_READ_ONLY);

        // find all of the certificates that have the specified hash
        var FilteredCertificates = MyStore.Certificates.Find(CAPICOM_CERTIFICATE_FIND_SHA1_HASH, strUserCertigicateThumbprint);
        if (FilteredCertificates.Count == 0) {
            return false;
        }
        else {
            return true;
        }
    }
}

function DoSignAsync(obj)
{
	var resDeferred = $.Deferred();

	BISS_getversion().done(function (result) {
		var tmp = BISS_sign(obj).done(resDeferred.resolve);
	}).fail(function (result) {
		var res = DoSign(obj.digest);
		resDeferred.resolve(res);
	});
	return resDeferred;
}

function DoSign(src)
{
	if(!top.g_UserHasCertInSSL)
	{
		var res = confirm(ID_STR_CAPICOM_JS_DoSign_confirm);
		if(!res)
			return "";
	}
		
	if(window.crypto && window.crypto.signText)
		return DoSign_NS(src);
		
	return DoSign_IE(src);
}
  
function DoSign_NS(src)
{
	var s = crypto.signText(src, "ask" );
	return s;
}

  
function DoSign_IE(src)
{
	try
	{		
	    return SignInIE(src);
	}
	catch (e)
	{
		if (e.number != CAPICOM_E_CANCELLED)
		{
			alert("An error occurred when attempting to sign the content, the errot was: " + e.description);
		}
	}
	return "";
}

function DoSignWizard(src) {
    if (!top.g_UserHasCertInSSL) {
        var res = confirm(ID_STR_CAPICOM_JS_DoSign_confirm);
        if (!res)
            return "userCanceled";
    }

    if (window.crypto && window.crypto.signText)
        return DoSign_NS(src);

    return SignInIE(src);
}

function SignInIE(src) {
    // instantiate the CAPICOM objects
    var SignedData = new ActiveXObject("CAPICOM.SignedData");
    var TimeAttribute = new ActiveXObject("CAPICOM.Attribute");

    // Set the data that we want to sign
    SignedData.Content = src;

    // Set the Certificate we would like to sign with
    var Signer = FindCertificateByHash();

    // Set the time in which we are applying the signature
    var Today = new Date();
    TimeAttribute.Name = CAPICOM_AUTHENTICATED_ATTRIBUTE_SIGNING_TIME;
    TimeAttribute.Value = Today.getVarDate();
    Today = null;
    Signer.AuthenticatedAttributes.Add(TimeAttribute);

    // Do the Sign operation
    var szSignature = SignedData.Sign(Signer, true, CAPICOM_ENCODE_BASE64);
    return szSignature;
}


///////////////////////////////////////////////////////////////////////////////	
//begin BISS
///////////////////////////////////////////////////////////////////////////////	
var uri_BIS_SERVER = "https://localhost:53952/";

function BISS_sign(obj) {

	var digestValue = obj.digestValue;
	var signedDigestValue = obj.signedDigestValue;
	var signedDigestValueCert = obj.signedContentsCert;
	var signerCertificate = obj.signerCertificate;

	var jsonObject = {
		version: "1.0",
		signatureType: "signature",
		contentType: "digest",
		hashAlgorithm: "SHA1",
		contents: [digestValue],
		signedContents: [signedDigestValue],
		signedContentsCert: [signedDigestValueCert],
		signerCertificateB64: signerCertificate
	};

	var resDeferred = $.Deferred();

	$.ajax({
		type: "POST",
		url: uri_BIS_SERVER + "sign",
		crossDomain: true,
		data: JSON.stringify(jsonObject),
		contentType: "application/json",
		dataType: "json",
		doNotKillOtherReq: true,
		success: function (result) {
			resDeferred.resolve(result.signatures[0]);
		},
		error: function (jqXHR, textStatus, errorThrown) {
			//alert("error sign:" + jqXHR.responseText + "..." + textStatus + "..." + errorThrown);
			resDeferred.reject();
		}
	});

	 return resDeferred;
}

function BISS_getversion()
{
	var ajaxResult = $.Deferred();

	$.ajax({
		type: "GET",
		url: uri_BIS_SERVER + "version",
		//async: false,
		crossDomain: true,
		dataType: "json",
		doNotKillOtherReq: true,
		success: function (result) {
			var res = result && result.version;
			if (res)
				ajaxResult.resolve(res);
			else
				ajaxResult.reject(res);
		},
		error: function (jqXHR, textStatus, errorThrown) {
			ajaxResult.reject(false);
		},
		timeout: 2000
	});
	
	return ajaxResult;
	//return res;
}

//var SignDigest = (function () {

//    var constructor = function (signer) {
//        this.Signer = signer;
//        }
//    var members = {
//        SignDigest :function (who) {
//            if (window.event)
//                window.event.cancelBubble = true;

//            var nID = who.value;

//            var tokenSignature = document.getElementById('tkn_sign_' + nID);

//            if (tokenSignature != null && tokenSignature.value != null && tokenSignature.value != '') {
//                alert(STR_PAYMENT_ALREADEY_SIGNED);
//                return false;
//            }

//            if (!who.checked) {
//                eval("document.forms[0].sign_" + nID + ".value=''");
//                return true;
//            }


//            eval("src = document.forms[0].digest_" + nID + ".value");
//            dest = this.Signer.DoSign(src);  
                       
//            if (tokenSignature != null && tokenSignature.value != null && tokenSignature.value != '') {
//                alert(STR_PAYMENT_ALREADEY_SIGNED);
//                return false;
//            }

//            if (!dest.Success) {
//                eval("document.forms[0].sign_" + nID + ".value=''");
//                return false;
//            }

//            eval("document.forms[0].sign_" + nID + ".value=dest.Signature");
//            return true;
//        },

//        SignDigestOnCancel :function (str) {
//            if (window.event)
//                window.event.cancelBubble = true;

//            var nID = str;

//            eval("src = document.forms[0].digest_" + nID + ".value");
//            dest = this.Signer.DoSign(src);
//            if (!dest.Success) {
//                eval("document.forms[0].sign_" + nID + ".value=''");
//                return false;
//            }

//            eval("document.forms[0].sign_" + nID + ".value=dest.Signature");

//            //return true;
//        }
//    }
//    $.extend(constructor.prototype, members)

//    return constructor;
//})();

var Signer = (function () {
	var constructor = function (Thumbprint) {
		this.Thumbprint = Thumbprint;
    }
	var members = {
		Constants: {
			CAPICOM_STORE_OPEN_READ_ONLY: 0,
			CAPICOM_CURRENT_USER_STORE: 2,
			CAPICOM_CERTIFICATE_FIND_SHA1_HASH: 0,
			CAPICOM_CERTIFICATE_FIND_EXTENDED_PROPERTY: 6,
			CAPICOM_CERTIFICATE_FIND_TIME_VALID: 9,
			CAPICOM_CERTIFICATE_FIND_KEY_USAGE: 12,
			CAPICOM_DIGITAL_SIGNATURE_KEY_USAGE: 0x00000080,
			CAPICOM_AUTHENTICATED_ATTRIBUTE_SIGNING_TIME: 0,
			CAPICOM_INFO_SUBJECT_SIMPLE_NAME: 0,
			CAPICOM_ENCODE_BASE64: 0,
			CAPICOM_E_CANCELLED: -2138568446,
			CERT_KEY_SPEC_PROP_ID: 6
		},
		DoSign: function (src) {
			if (window.crypto && window.crypto.signText)
				return this.DoSign_NS(src);
			return this.DoSign_IE(src);
		},
		DoSign_IE: function (src) {
			try {
				// instantiate the CAPICOM objects
				var SignedData = new ActiveXObject("CAPICOM.SignedData");
				var Signer = new ActiveXObject("CAPICOM.Signer");
				var TimeAttribute = new ActiveXObject("CAPICOM.Attribute");

				// Set the data that we want to sign
				SignedData.Content = src;

				// Set the Certificate we would like to sign with
				var cert = this.FindCertificateByHash();
				
				if (cert != null)
					Signer.Certificate = cert;

				// Set the time in which we are applying the signature
				var Today = new Date();
				TimeAttribute.Name = this.Constants.CAPICOM_AUTHENTICATED_ATTRIBUTE_SIGNING_TIME;
				TimeAttribute.Value = Today.getVarDate();
				Today = null;
				Signer.AuthenticatedAttributes.Add(TimeAttribute);

				// Do the Sign operation
				var szSignature = SignedData.Sign(Signer, true, this.Constants.CAPICOM_ENCODE_BASE64);

				return { Success: true, Signature: szSignature };
			}
			catch (e) {
				if (e.number != this.Constants.CAPICOM_E_CANCELLED) {
					alert("An error occurred when attempting to sign the content, the error was: " + e.description);
				}
			}
			return { Success: false, Signature: "" };
		},
		DoSign_NS: function (src) {
			var s = crypto.signText(src, "ask");

			if (s.substring(0, 5) == "error")
				return { Success: false, Signature: "" }; ;

			return { Success: true, Signature: s };
		},
		IsCAPICOMInstalled: function () {
			if (typeof (oCAPICOM) == "object") {
				if ((oCAPICOM.object != null)) {
					// We found CAPICOM!
					return true;
				}
			}
		},
		FindCertificateByHash: function () {
			if (this.Thumbprint == null)
				return null;

			try {
				// instantiate the CAPICOM objects
				var MyStore = new ActiveXObject("CAPICOM.Store");
				// open the current users personal certificate store
				MyStore.Open(this.Constants.CAPICOM_CURRENT_USER_STORE, "My", this.Constants.CAPICOM_STORE_OPEN_READ_ONLY);

				// find all of the certificates that have the specified hash
				var FilteredCertificates = MyStore.Certificates.Find(this.Constants.CAPICOM_CERTIFICATE_FIND_SHA1_HASH, this.Thumbprint);
				return FilteredCertificates.Item(1);

				// Clean Up
				MyStore = null;
				FilteredCertificates = null;
			}
			catch (e) {
				if (e.number != this.Constants.CAPICOM_E_CANCELLED) {
					alert("An error occurred while opening your personal certificate store, aborting");
					return null;
				}
			}
		}
	}
	$.extend(constructor.prototype, members)

	return constructor;
})();
var pmActions;



PaymentActionClass = function () {
	var id;
	var lblAfterAction;
	var m_img_Sign;
	var m_img_Edit;
	var m_img_Cancel;
	var mycheckbox;
	var m_PaymentInfoMsg;
	var m_ctrl_AfterActionDiv;

	this.set_class = function (identifier) {
		id = identifier;
		SetClassVars();
	}
	this.set_class_withoutInputId = function (identifier) {
		id = "";
		SetClassVars();
		id = identifier;

	}

	SetClassVars = function () {
		lblAfterAction = $get("lbl_AfterAction_" + id);
		m_img_Sign = $get("m_img_Sign_" + id);
		m_img_Edit = $get("m_img_Edit_" + id);
		m_img_Cancel = $get("m_img_Cancel_" + id);
		mycheckbox = $('input[name=m_ctrl_chb_Sign][value=' + id + ']');
		m_PaymentInfoMsg = $get("m_PaymentInfoMsg_" + id);
		m_ctrl_AfterActionDiv = $get("m_ctrl_AfterActionDiv_" + id);
	}

	this.GetPaymentInfoSingAndSend = function () {
		HideGeneralError();
		ShowPleaseWaitDialog();
		var rqBody = MakeWorking(
    "c2s=processone" +
    "&#x26;getDigest=true" +
    "&#x26;m_ctrl_chb_Sign=" + id);
		var requrl = MakeRequestAndChangeXmlID("02Services/09Orders/20Manage/.processone");
		$.daisAjax({
			cache: false,
			type: "POST",
			url: requrl,
			data: rqBody,
			dataType: "json",
			success: OnGetPaymentInfoCompleted,
			error: function () {
				HidePleaseWaitDialog();
				ShowGeneralError();
			}
		});
	}

	OnGetPaymentInfoCompleted = function (data) {
		HidePleaseWaitDialog();
		$('#digest_' + data.id).val(data.digest);
		$('#biss_digestValue_' + data.id).val(data.digestValue);
		$('#biss_signedContentsCert').val(data.signedContentsCert);
		$('#biss_signedDigestValue_' + data.id).val(data.signedDigestValue);
		$('#biss_signerCertificate').val(data.signerCertificate);
		if (data.IsClientCertificateNeeded) {
			_GetThumbPrint();
		}
		else {
			_DidSend();
		}
	}

	this.GetThumbPrint = function () { _GetThumbPrint(); }
	_GetThumbPrint = function () {

		HideGeneralError();
		ShowPleaseWaitDialog();
		var rqBody = MakeWorking("c2s=APerson Certificate ThumbPrint");
		var requrl = MakeRequestAndChangeXmlID("02Services/09Orders/20Manage/");
		$.daisAjax({
			cache: false,
			type: "POST",
			url: requrl,
			data: rqBody,
			dataType: "json",
			success: OnGetThumbPrintCompleted,
			error: OnErrorGetThumbPrint
		});
	}

	OnGetThumbPrintCompleted = function (data) {
		HidePleaseWaitDialog();
		strUserCertigicateThumbprint = data;
		_DidSignDigest();
	}

	OnErrorGetThumbPrint = function (data) {
		ShowGeneralError();
	}

	this.DidSignDigest = function () { _DidSignDigest(); }
	_DidSignDigest = function () {
		HideGeneralError();
		if (strUserCertigicateThumbprint == null || strUserCertigicateThumbprint == "") {
			if (lblAfterAction != null) {
				lblAfterAction.innerHTML = '';
				lblAfterAction.innerHTML = STR_NO_CERT_IN_BBO;
				lblAfterAction.className = "AfterSignError";
			}
			return false;
		}

		if (!HasCertificateInBrowser()) {
			if (lblAfterAction != null) {
				lblAfterAction.innerHTML = '';
				lblAfterAction.innerHTML = STR_NO_CERT_IN_BROWSER;
				lblAfterAction.className = "AfterSignError";
			}
			return false;
		}

		var tmp = SignDigest1(id).done(function (result) {
			if(result){
				ShowPleaseWaitDialog();

				var rqBody = MakeWorking(
						"c2s=processone" +
						"&#x26;m_ctrl_chb_Sign=" + id +
						"&#x26;digest_" + id + "=" + encodeURIComponent($get("digest_" + id).value) +
						"&#x26;sign_" + id + "=" + encodeURIComponent($get("sign_" + id).value)
					);

				var requrl = MakeRequestAndChangeXmlID("02Services/09Orders/20Manage/.processone");
		
				$.daisAjax({
					cache: false,
					type: "POST",
					url: requrl,
					data: rqBody,
					dataType: "html",
					success: OnDidSignDigestCompleted,
					error: HidePleaseWaitDialogAndShowGeneralError

				});
			};
		});
	}

	OnDidSignDigestCompleted = function (data) {
		HidePleaseWaitDialog();


	
		var error = false;
		try {
			var obj = Sys.Serialization.JavaScriptSerializer.deserialize(data);
		}
		catch (err) {
			error = true;
		}

		if (!error) {
			if (obj.code === 0) {
				_ShowUserMessage(obj, 'AfterSignOK');

				if (m_img_Sign != null)
					m_img_Sign.style.display = "none";
				if (m_PaymentInfoMsg != null)
					m_PaymentInfoMsg.style.display = "none";
				if (m_ctrl_AfterActionDiv != null)
					m_ctrl_AfterActionDiv.style.display = "";
				if (m_img_Edit != null)
					m_img_Edit.style.display = "none";

				_DidSend();
			}
			else {
				_ShowUserMessage(obj, 'AfterSignError');
			}
		}
		else {
			ShowGeneralError();
		}
	}

	this.DidSend = function () { _DidSend() };
	_DidSend = function () {
		HideGeneralError();
		ShowPleaseWaitDialog();

		var rqBody = MakeWorking(
				"c2s=processone" +
				"&#x26;m_ctrl_chb_Send=" + id
                + "&#x26;authorization_code=" + getURLParameterByName("authorization_code")
            );

		

		var requrl = MakeRequestAndChangeXmlID("02Services/09Orders/20Manage/.processone");
		

		$.daisAjax({
		    cache: false,
		    type: "POST",
		    url: requrl,
		    data: rqBody,
		    dataType: "html",
		    success: _OnDidSendCompleted,
		    error: HidePleaseWaitDialogAndShowGeneralError

		});

		return false;
	}

	this.OnDidSendCompleted = function (data) { _OnDidSendCompleted(data) };
	_OnDidSendCompleted = function (data) {
		HidePleaseWaitDialog();

	
		var error = false;
		try {
			var obj = Sys.Serialization.JavaScriptSerializer.deserialize(data);
		}
		catch (err) {
			error = true;
		}

		if (!error) {
			if (obj.code === 1) {//must call authorization                
				ShowPleaseWaitDialog();

				var url = MakeRequestAndChangeXmlID("02Services/09Orders/20Manage/.authorizeone") + "m_ctrl_chb_Send=" + obj.id;

				displayDialogHelperForUrl(url, "Оторизация");
				HidePleaseWaitDialog();

				return false;
			}
			else
				if (obj.multiSend[0].code === 0) {
					_ShowUserMessage(obj.multiSend[0], 'AfterSignOK');

					if (m_img_Sign != null)
						m_img_Sign.style.display = "none";
					if (m_PaymentInfoMsg != null)
						m_PaymentInfoMsg.style.display = "none";
					if (m_ctrl_AfterActionDiv != null)
						m_ctrl_AfterActionDiv.style.display = "";
					if (m_img_Edit != null)
						m_img_Edit.style.display = "none";
					if (m_img_Cancel != null)
						m_img_Cancel.style.display = "none";

					if (mycheckbox != null) {
						mycheckbox.attr('disabled', 'disabled');
						mycheckbox.removeAttr('checked');
		            }

		            if (typeof DoActionAfterDidSendCompleted == 'function') {
		                DoActionAfterDidSendCompleted();
		            }
				}
				else {
					_ShowUserMessage(obj.multiSend[0], 'AfterSignError');
					if (m_ctrl_AfterActionDiv != null)
						m_ctrl_AfterActionDiv.style.display = "";
					if (!obj.multiSend[0].IsClientCertificateNeeded) {
						if (m_img_Edit != null)
							m_img_Edit.style.display = "none";
					}
				}
		}
		else {
			ShowGeneralError();
		}
	}


	this.DidDelete = function () {
		HideGeneralError();
		var retval = confirm(ID_STR_ORDER_DELETE_QUESTION);
		if (!retval)
			return false;

		ShowPleaseWaitDialog();

		var rqBody = MakeWorking(
				"c2s=processone" +
				"&#x26;pmt_id=" + id
				+ "&#x26;pmt_inc_type=1"
            );

		var requrl = MakeRequestAndChangeXmlID("02Services/09Orders/20Manage/.processone");
		

		$.daisAjax({
		    cache: false,
		    type: "POST",
		    url: requrl,
		    data: rqBody,
		    dataType: "html",
		    success: _OnDidDeleteCompleted,
		    error: HidePleaseWaitDialogAndShowGeneralError

		});

		return false;
	}

	_OnDidDeleteCompleted = function (data) {
		HidePleaseWaitDialog();

	
		var error = false;
		try {
			var obj = Sys.Serialization.JavaScriptSerializer.deserialize(data);
		}
		catch (err) {
			error = true;
		}

		if (!error) {
			if (obj.code === 0) {
				_ShowUserMessage(obj, 'AfterSignOK');

				if (m_img_Sign != null)
					m_img_Sign.style.display = "none";
				if (m_PaymentInfoMsg != null)
					m_PaymentInfoMsg.style.display = "none";
				if (m_ctrl_AfterActionDiv != null)
					m_ctrl_AfterActionDiv.style.display = "";
				if (m_img_Edit != null)
					m_img_Edit.style.display = "none";
				if (m_img_Cancel != null)
					m_img_Cancel.style.display = "none";

				if (mycheckbox != null) {
					mycheckbox.attr('disabled', 'disabled');
					mycheckbox.removeAttr('checked');
				}
			}
			else {
				_ShowUserMessage(obj, 'AfterSignError');
			}
		}
		else {
			ShowGeneralError();
		}
	}

	function _ShowUserMessage(o, setClass) {
		if (o.text !== '' && o.text !== null) {
			if (lblAfterAction != null) {
				lblAfterAction.innerHTML = '';
				lblAfterAction.innerHTML = o.text;
				lblAfterAction.className = setClass;
			}
		}

		if (o.statusText !== '' && o.statusText !== null) {
			var lblAfterStatus = $get("lbl_AfterSign_" + o.id);
			if (lblAfterStatus != null) {
				lblAfterStatus.innerHTML = '';
				lblAfterStatus.innerHTML = o.statusText;
			}
		}
	}

}
//for all
CalcInLeva = function (Amount, FixRate) {
	if (Amount != undefined)
	{
		var checksum = ToFloat(Amount.val());
		if (FixRate != undefined) {
			checksum = ToFloat(Amount.val()) * ToFloat(FixRate.val());
		}
		return checksum;
	}

	return 0;
}

StatFormClass = function () {
    this.LoadStatForm = true;

    var Amount;
    var div_;
    var FixRate;
    var Direction;
    var PayeeSituation_L; var PayeeSituation_F; var PayeeSituation;
    var PayerSituation_L; var PayerSituation_F;
    var CreditNo;
    var PayeeAddressStat;
    var PayerAddressStat;
    var PayeeCountry;
    var PayerCountry;
    var PayeeCountryName;
    var PayerCountryName;
    var callcountry_payee;
    var callcountry_payer;
    var OpCode;
    var OpCodeName;
    var callopcode;
    var m_ctrl_ShouldFillStatForm;
    var Subtype;
    //fccy
    var PayerAddressCountryCode; var PayerAddressCountryName; var PayeeCountryCode; var PayeeBankCountryName; var PayeeAddress; var PayerAddress; var PayerAddressCity;
    var PayerName; var PayeeName; var Type;
    var SetPayeeSituationToF;

    this.set_class = function (AttrName) {
        $("form").find("[" + AttrName + "]").each(function () {
            var $this = $(this);
            var attrVal = $this.attr(AttrName);

            if (attrVal == "doc_type") {
                Type = $this;
            }

            if (attrVal == "Amount") {
                Amount = $this;
                if (Type == "105" && Subtype == 1) {
                }
                else {
                    Amount.blur(function () {
                        CalcMoneyStatForm();
                    });
                }
            }
            if (attrVal == "CCY") {
                $this.blur(function () {
                    CalcMoneyStatForm();
                });
            }
            if (attrVal == "div_") {
                div_ = $this;
            }
            if (attrVal == "FixRate") {
                FixRate = $this;
                $this.on("changeFixrate", function () {
                    CalcMoneyStatForm();
                });
            }
            if (attrVal == "Direction") {
                Direction = $this;
            }
            if (attrVal == "PayeeSituation_L") {
                PayeeSituation_L = $this;
                PayeeSituation_L.change(function ()
                { CalcMoneyStatForm(false); });
            }
            if (attrVal == "PayeeSituation_F") {
                PayeeSituation_F = $this;
                PayeeSituation_F.change(function ()
                { ClearPayeeCountry(); CalcMoneyStatForm(false); });
            }
            if (attrVal == "PayerSituation_L") {
                PayerSituation_L = $this;
                PayerSituation_L.change(function ()
                { CalcMoneyStatForm(false); });
            }
            if (attrVal == "PayerSituation_F") {
                PayerSituation_F = $this;
                PayerSituation_F.change(function ()
                { CalcMoneyStatForm(false); });
            }
            if (attrVal == "CreditNo") {
                CreditNo = $this;
            }
            if (attrVal == "PayeeAddressStat") {
                PayeeAddressStat = $this;
            }
            if (attrVal == "PayerAddressStat") {
                PayerAddressStat = $this;
            }
            if (attrVal == "PayeeCountry") {
                PayeeCountry = $this;
            }
            if (attrVal == "PayerCountry") {
                PayerCountry = $this;
            }
            if (attrVal == "PayeeCountryName") {
                PayeeCountryName = $this;
            }
            if (attrVal == "PayerCountryName") {
                PayerCountryName = $this;
            }
            if (attrVal == "callcountry_payee") {
                callcountry_payee = $this;
            }
            if (attrVal == "callcountry_payer") {
                callcountry_payer = $this;
            }
            if (attrVal == "callopcode") {
                callopcode = $this;
            }
            if (attrVal == "OpCodeName") {
                OpCodeName = $this;
            }
            if (attrVal == "OpCode") {
                OpCode = $this;
            }
            //fccy
            if (attrVal == "Subtype") {
                Subtype = $this;
            }
            if (attrVal == "PayerAddressCountryCode") {
                PayerAddressCountryCode = $this;
            }
            if (attrVal == "PayerAddressCountryName") {
                PayerAddressCountryName = $this;
            }
            if (attrVal == "PayeeCountryCode") {
                PayeeCountryCode = $this;
            }
            if (attrVal == "PayeeBankCountryName") {
                PayeeBankCountryName = $this;
            }
            if (attrVal == "PayeeAddress") {
                PayeeAddress = $this;
                if (Subtype == 0) {
                    PayeeAddress.blur(function ()
                    { FillStatFormFCCY(); });
                }
            }
            if (attrVal == "PayerAddress") {
                PayerAddress = $this;
                if (Subtype == 0) {
                    PayerAddress.blur(function ()
                    { FillStatFormFCCY(); });
                }
            }
            if (attrVal == "PayerAddressCity") {
                PayerAddressCity = $this;
                if (Subtype == 0) {
                    PayerAddress.blur(function ()
                    { FillStatFormFCCY(); });
                }
            }
            if (attrVal == "PayerName") {
                PayerName = $this;
                if (Subtype == 0) {
                    PayerName.change(function ()
                    { FillStatFormFCCY(); });
                }
            }
            if (attrVal == "PayeeName") {
                PayeeName = $this;
                if (Subtype == 0) {
                    PayeeName.change(function ()
                    { FillStatFormFCCY(); });
                }
            }
            if (attrVal == "SetPayeeSituationToF") {
            	SetPayeeSituationToF = $this;            	
            }
            if (attrVal == "PayeeSituation") {
            	PayeeSituation = $this;
            }
            
        });
    }

    this.ShowHideDivStatForm = function () { CalcMoneyStatForm(this.LoadStatForm); }

    CalcMoneyStatForm = function (loadStatForm) {

        var InLeva = CalcInLeva(Amount, FixRate);
        if (IsGreaterOrEqualThan(InLeva, StatFormAmount)) {

            if (Direction != undefined && loadStatForm != false) {
                // FCCY PAYER
                PayerSituation_L.attr("disabled", false);
                PayerSituation_F.attr("disabled", false);

                if (PayerAddressCountryCode.val() == "100") {
                    PayerSituation_L.attr("checked", true);
                    PayerSituation_F.attr("disabled", true);
                }
                else {
                    PayerSituation_F.attr("checked", true);
                    PayerSituation_L.attr("disabled", true);
                }

                if (PayeeCountryCode.val() == "100") {
                    PayeeSituation_L.attr("checked", true);
                    //PayeeSituation_F.attr("disabled", true);
                }
                else {
                    PayeeSituation_F.attr("checked", true);
                    //PayeeSituation_L.attr("disabled", true);
                }
            }

            // PAYEE
            if (Direction != undefined) {
                PayeeSituation_L.attr("disabled", false);
                PayeeSituation_F.attr("disabled", false);

                switch (Direction.val()) {
                    case "AA":
                        div_.css("display", "");
                        SetNeed();
                        if (loadStatForm != false) // fccy
                            FillStatFormFCCY();
                        return;
                    case "DD":
                        PayeeSituation_L.attr("checked", "checked");
                        PayeeSituation_F.attr("disabled", true);
                        break;
                    case "DA":
                        PayeeSituation_F.attr("checked", "checked");
                        PayeeSituation_L.attr("disabled", true);
                        break;
                }
            }

            CheckNeed();
            div_.css("display", "");

            if (Direction != undefined && loadStatForm != false) // fccy
                FillStatFormFCCY();
        }
        else {
            SetNotNeed();
            div_.css("display", "none");
        }
    }

    CheckNeed = function () {
        if (PayerSituation_L.prop("checked") == PayeeSituation_L.prop("checked")) {
            SetNotNeed();
        }
        else {
            SetNeed();
        }
    }

    SetNeed = function () {
        EnableFieldStatForm(CreditNo);
        EnableFieldStatForm(PayerAddressStat);
        EnableFieldStatForm(PayeeAddressStat);
        callopcode.css("display", "");

        if (PayerSituation_L.prop("checked") == true) {
            PayerCountry.val("100");
            PayerCountryName.val(STR_BGNAME);
            callcountry_payer.css("display", "none");
        }
        else if (PayerSituation_F.prop("checked") == true) {
            callcountry_payer.css("display", "");
        }
        else {
            PayerSituation_L.attr("checked", true);
            PayerCountry.val("100");
            PayerCountryName.val(STR_BGNAME);
            callcountry_payer.css("display", "none");
        }

        if (PayeeSituation_L.prop("checked") == true) {
            PayeeCountry.val("100");
            PayeeCountryName.val(STR_BGNAME);
            callcountry_payee.css("display", "none");
        }
        else if (PayeeSituation_F.prop("checked") == true) {
            callcountry_payee.css("display", "");
        }
        else {
            PayeeSituation_L.attr("checked", true);
            PayeeCountry.val("100");
            PayeeCountryName.val(STR_BGNAME);
            callcountry_payee.css("display", "none");
        }

        SetAllStatFields(true);
        m_ctrl_ShouldFillStatForm = true;
    }

    SetNotNeed = function () {
        DisableFieldStatForm(CreditNo);
        DisableFieldStatForm(PayerAddressStat);
        DisableFieldStatForm(PayeeAddressStat);
        callcountry_payee.css("display", "none");
        callcountry_payer.css("display", "none");
        callopcode.css("display", "none");

        OpCode.val("");
        OpCodeName.val("");
        PayerCountry.val("");
        PayerCountryName.val("");
        ClearPayeeCountry();

        PayerSituation_L.attr("checked", true);
        PayeeSituation_L.attr("checked", true);


        if (PayeeSituation_F.prop("checked") == false && PayeeSituation_L.prop("checked") == false) {
        	if ((SetPayeeSituationToF != null || SetPayeeSituationToF != undefined) && SetPayeeSituationToF.val() == 'true') {        		
        		//because of the hidden the field, the event "SetPayeeSituetion" needs to be fired
        		SetCheckedPayeeSituation(PayeeSituation_F);
        	}
        	else {
        		PayeeSituation_L.attr("checked", true);
        	}        	
        }
        if (PayerSituation_F.prop("checked") == false && PayerSituation_L.prop("checked") == false) {
            PayerSituation_L.attr("checked", true);
        }

       
        	SetAllStatFields(false);
        	m_ctrl_ShouldFillStatForm = false;
    }

    SetCheckedPayeeSituation = function(obj){
    	obj.attr("checked", true);
    	PayeeSituation.val(obj.val());
    }

    DisableFieldStatForm = function (obj) {
        obj.removeClass("inputedit").addClass("inputro");
        obj.attr("disabled", true);
        obj.val("");
    }

    EnableFieldStatForm = function (obj) {
        obj.removeClass("inputro").addClass("inputedit");
        obj.removeAttr("disabled");
    }

    SetAllStatFields = function (bValidate) {

        PayerAddressStat.attr("data-val", bValidate);
        PayeeAddressStat.attr("data-val", bValidate);
        PayeeCountryName.attr("data-val", bValidate);
        PayerCountryName.attr("data-val", bValidate);
        OpCodeName.attr("data-val", bValidate);
        CreditNo.attr("data-val", bValidate);

        var form = div_.first().closest('form');
        $.validator.unobtrusive.parseDynamicContent(form);
    }

    FillStatFormFCCY = function () {
        if (m_ctrl_ShouldFillStatForm == true) {
            PayerCountry.val(PayerAddressCountryCode.val());
            PayerCountryName.val(PayerAddressCountryName.val());
            PayerAddressStat.val(PayerAddress.val() + ' ' + PayerAddressCity.val());
            PayerAddressStat.val(jQuery.trim(PayerAddressStat.val()));

            PayeeCountry.val(PayeeCountryCode.val());
            PayeeCountryName.val(PayeeBankCountryName.val());
            PayeeAddressStat.val(PayeeAddress.val());

            if (PayeeCountryCode.val() == "100")
                PayeeSituation_L.attr("checked", true);
            //else
            //PayeeSituation_F.attr("checked", true);
            //Ako e prevod za stranata za 4uzdestranno lice trqbva da e selectnato 4uzdestranno lice v stat formata
            if (Direction.val() == "DA") {
                PayeeSituation_F.attr("checked", true);
                if (PayeeCountryCode.val() == "100") {
                    PayeeCountry.val("");
                    PayeeCountryName.val("");
                }
            }
        }
    }

    function ClearPayeeCountry() {
        PayeeCountry.val("");
        PayeeCountryName.val("");
    }

    ValidateStatForm = function () {
        ValidateFieldOnAnotherFieldChange(PayerCountryName);
        ValidateFieldOnAnotherFieldChange(PayeeCountryName);
        ValidateFieldOnAnotherFieldChange(PayerAddressStat);
        ValidateFieldOnAnotherFieldChange(PayeeAddressStat);
        ValidateFieldOnAnotherFieldChange(OpCodeName);
        ValidateFieldOnAnotherFieldChange(CreditNo);
    }
}

var myDM;

DirtyMoneyClass = function () {
    var DirtyMoney;
    var div_;
    var Amount;
    var FixRate;
    var DirtyPicker;
    var col_dm_dirtymoney_keys;
    var col_dm_dirtymoney;
    var BankAccountId;
    var ShouldCalcMoney;

    this.ShowHideDivDirtyMoney = function () {

        if (ShouldCalcMoney) {
            CalcMoneyDirtyMoney();
        }
    }

    CalcMoneyDirtyMoney = function () {
        var InLeva = CalcInLeva(Amount, FixRate);

        if (!IsGreaterThan(InLeva, 30000)) {
            div_.css("display", "none");
            DirtyMoney.removeClass("inputedit").addClass("inputro");
            DirtyMoney.val("");
            DirtyMoney.prop("readonly", true);
            SetAllDMFields(false);
        }
        else {
            div_.css("display", "");
            DirtyMoney.removeClass("inputro").addClass("inputedit");
            //DirtyMoney.val("");
            DirtyMoney.prop("readonly", false);
            if (!arrBankClientsDirtyMoneyOK || !arrBankClientsDirtyMoneyOK[BankAccountId.val()]) {
                SetAllDMFields(true);
            }
            else {
                SetAllDMFields(false);
            }
        }
    }

    SetAllDMFields = function (bValidate) {
        SetValidationCheck(DirtyMoney, bValidate);
    }

    this.set_class = function (AttrName) {

        ShouldCalcMoney = true;

        $("form").find("[" + AttrName + "]").each(function () {
            var $this = $(this);
            var attrVal = $this.attr(AttrName);
            if (attrVal == "Amount") {
                Amount = $this;
                Amount.blur(function () {
                    CalcMoneyDirtyMoney();
                });
            }
            if (attrVal == "CCY") {
                $this.blur(function () {
                    CalcMoneyDirtyMoney();
                });
            }

            if (attrVal == "BankAccountId") {
                BankAccountId = $this;
            }

            if (attrVal == "div_") {
                div_ = $this;
            }
            if (attrVal == "DirtyMoney") {
                DirtyMoney = $this;
            }
            if (attrVal == "FixRate") {
                FixRate = $this;
                $this.on("changeFixrate",function () {
                    CalcMoneyDirtyMoney();
                });
            }
            if (attrVal == "col_dm_dirtymoney_keys") {
                col_dm_dirtymoney_keys = $this;
            }
            if (attrVal == "col_dm_dirtymoney") {
                col_dm_dirtymoney = $this;
            }
            if (attrVal == "DirtyPicker") {
                DirtyPicker = $this;
                DirtyPicker.change(function () {
                    HideDMP();
                });
                DirtyPicker.blur(function () {
                    HideDMP();
                });
            }

            if (attrVal == "ShouldCalcMoney" && $this.val() == 'false') {
                ShouldCalcMoney = false;
            }
        });
    }

    HideDMP = function () {
        DirtyMoney.val(DirtyPicker.val());
        col_dm_dirtymoney_keys.css("display", "none");
        col_dm_dirtymoney.css("display", "");
        DirtyMoney.focus();
        DirtyMoney.valid();
    }
}

var myAD;

AbroadDeclarationClass = function () {
    var div_;
    var selector;
    var AbroadDeclarationElements = new Array();
    var FixRate;
    var Subtype;
    var BankAccountId;
    var Model_PaymentBaseInfo_Amount;
    var Model_PaymentBaseInfo_CCY;
    var ShouldCalcMoney;

    var UploadPaymentDoc_true;
    var UploadPaymentDoc_false;
    var PayIncomeTax;
    var PaymentReason;
    var UploadPaymentReasonDoc
    var UploadPaymentReasonPaperDoc;
    var HasOtherPaymentReason;
    var EnableAbroadPaymentDeclaration;

    AbroadDeclaration = function () {
        this.Amount;
        this.CCY;
        this.PayeeBankCountry;
        this.PayeeCountryPaymentApplication;
    }

    this.ShowHideDivAbroadDeclaration = function () {

        if (ShouldCalcMoney) {
            CalcAbroadDeclarationMoney();
        }
    }

    this.EnableDisableAbroadDeclaration = function () {
        if (!EnableAbroadPaymentDeclaration.prop("checked")) {
            div_.find('input').prop('disabled', true);
            EnableAbroadPaymentDeclaration.prop('disabled', false);
            SetAllADFields(false);

            OnClickPayIncomeTax();

            OnClickUploadPaymentDoc();
        }
        else {
            div_.find('input').prop('disabled', false);
            OnClickHasDoubleTaxationAgreement();

            SetAllADFields(true);

            OnClickPayIncomeTax();

            OnClickUploadPaymentDoc();
        }
    }

    CalcAbroadDeclarationMoney = function () {
        if (!NeedDeclaration()) {
            div_.css("display", "none");
            SetAllADFields(false);

            OnClickPayIncomeTax();

            OnClickUploadPaymentDoc();
        }
        else {  
            div_.css("display", "");
            
            if (AbroadDeclarationElements[0] != undefined) {
                if (Model_PaymentBaseInfo_Amount)
                    Model_PaymentBaseInfo_Amount.html(AbroadDeclarationElements[0].Amount.val());

                if (Model_PaymentBaseInfo_CCY)
                    Model_PaymentBaseInfo_CCY.html(AbroadDeclarationElements[0].CCY.val());
            }
            SetAllADFields(true);

            OnClickPayIncomeTax();

            OnClickUploadPaymentDoc();
        }
    }

    SetAllADFields = function (bValidate) {
        if(!bValidate)
        {
            UploadPaymentDoc_true.attr("checked", false);
            UploadPaymentDoc_false.attr("checked", false);
            UploadPaymentReasonDoc.attr("checked", false);
            UploadPaymentReasonPaperDoc.attr("checked", false);
            HasOtherPaymentReason.attr("checked", false);
            PaymentReason.val("");
            PayIncomeTax.attr("checked", false);
        }

        SetValidationCheck(UploadPaymentDoc_true, bValidate);
        SetValidationCheck(UploadPaymentDoc_false, bValidate);
        SetValidationCheck(PaymentReason, bValidate);
    }

    NeedDeclaration = function () {
        for (var i = 0; i < AbroadDeclarationElements.length ; i++) {
            if (AbroadDeclarationElements[i] != undefined) {
                var InLeva = CalcInLeva(AbroadDeclarationElements[i].Amount, FixRate);

                if ((Subtype.val() == "0" || !Subtype.val())
                    && IsGreaterOrEqualThan(InLeva, AbroadPaymentDeclarationAmount)
                    && AbroadDeclarationElements[i].PayeeCountryPaymentApplication.val() != ""
                    && !BitAnd(EEAPaymentApplication, AbroadDeclarationElements[i].PayeeCountryPaymentApplication.val())) {
                    return true;
                }
            }
        }
        return false;
    }

    this.ChangeAbroadDeclarationPanelForPacketPayment = function (paymentType, paymentSubType) {
        if (paymentType == '0') {
            if (paymentSubType == '105')  //FCCY
            {
                div_.css("display", "");
            }
            else {
                div_.css("display", "none");
            }
        }
        else if (paymentType == '1')  // telebank
        {
            div_.css("display", "");
        }
        else if (paymentType == '2') // SEPA
        {
            div_.css("display", "");
        }
        else {
            div_.css("display", "none");
        }
    }

    FillArrayElement = function (Selector, AttrName) {
        var item = new AbroadDeclaration();
        Selector.find("[" + AttrName + "]").each(function () {

            var $this = $(this);
            var attrVal = $this.attr(AttrName);
            if (attrVal == "Amount") {
                item.Amount = $this;
                $this.blur(function () {
                    CalcAbroadDeclarationMoney();
                });
            }

            if (attrVal == "PayeeCountryPaymentApplication") {
                item.PayeeCountryPaymentApplication = $this;
                $this.change(function () {
                    CalcAbroadDeclarationMoney();
                });
            }

            if (attrVal == "PayeeBankCountry") {
                item.PayeeBankCountry = $this;
                $this.change(function () {
                    CalcAbroadDeclarationMoney();
                });
            }

            if (attrVal == "CCY") {
                item.CCY = $this;
                $this.blur(function () {
                    CalcAbroadDeclarationMoney();
                });
            }
        });

        AbroadDeclarationElements.push(item);
    }

    FillGlobalElements = function (AttrName) {
        $("form").find("[" + AttrName + "]").each(function () {
            var $this = $(this);
            var attrVal = $this.attr(AttrName);

            if (attrVal == "BankAccountId") {
                BankAccountId = $this;
            }

            if (attrVal == "Subtype") {
                Subtype = $this;
            }

            if (attrVal == "div_") {
                div_ = $this;
            }

            if (attrVal == "FixRate") {
                FixRate = $this;
            }

            if (attrVal == "Model_PaymentBaseInfo_Amount") {
                Model_PaymentBaseInfo_Amount = $this;
            }

            if (attrVal == "Model_PaymentBaseInfo_CCY") {
                Model_PaymentBaseInfo_CCY = $this;
            }

            if (attrVal == "ShouldCalcMoney" && $this.val() == 'false') {
                ShouldCalcMoney = false;
            }                      

            if (attrVal == "UploadPaymentDoc_true") {
                UploadPaymentDoc_true = $this;
            }

            if (attrVal == "UploadPaymentDoc_false") {
                UploadPaymentDoc_false = $this;
            }

            if (attrVal == "PayIncomeTax") {
                PayIncomeTax = $this;
            }

            if (attrVal == "PaymentReason") {
                PaymentReason = $this;
            }

            if (attrVal == "UploadPaymentReasonDoc") {
                UploadPaymentReasonDoc = $this;
            }

            if (attrVal == "UploadPaymentReasonPaperDoc") {
                UploadPaymentReasonPaperDoc = $this;
            }

            if (attrVal == "HasOtherPaymentReason") {
                HasOtherPaymentReason = $this;
            }

            if (attrVal == "EnableAbroadPaymentDeclaration") {
                EnableAbroadPaymentDeclaration = $this;
            }
           
        });
    }

    this.set_class = function (AttrName, SelectorValue) {
        ShouldCalcMoney = true;
        if (SelectorValue != null && SelectorValue != undefined) {
            selectors = $("form").find("[" + AttrName + "='" + SelectorValue + "']");
                selectors.each(function () {
                    FillArrayElement($(this), AttrName);
                });
        }
        else {
            FillArrayElement($("form"), AttrName);
        }
        FillGlobalElements(AttrName);
    }

    this.AddElement = function (selector, AttrName)
    {
        FillArrayElement($("#" + selector), AttrName);
    }

    this.RemoveElement = function (index)
    {
        AbroadDeclarationElements[index] = undefined;
        CalcAbroadDeclarationMoney();
    }
}

function SetCustomValidationError(vErrorMessage, vFieldName) {
    //set error msg
    var error = new Object();
    error.ErrorMessage = vErrorMessage;

    var errs = new Object();
    errs.Errors = new Array();
    errs.Errors[0] = error;
    errs.FieldName = vFieldName;

    var j = new Object();
    j.Fields = new Array();
    j.Fields[0] = errs;

    return j;
}

function SetValidationCheck(element, bValidate) {


    element.attr("data-val", bValidate);

    if (bValidate) {
        //enable validation

        $.validator.unobtrusive.parseElement(element.get(0), false);

        var unobtrusiveValidation = element.first().closest('form').data("unobtrusiveValidation");

        var elname = element.attr("name");
        var elrules = unobtrusiveValidation.options.rules[elname];
        var args = {};
        $.extend(args, elrules);
        args.messages = unobtrusiveValidation.options.messages[elname];
        element.rules("add", args);
    }
    else {
        //disable validation
        element.rules("remove");
        element.valid();
        $("[data-valmsg-for='" + element[0].name + "']").removeClass("field-validation-error").addClass("field-validation-valid");
    }
}


function SetValidationCheckForElementsInContainer(container, bValidate) {
    container.find("[data-val]").each(function () {
        SetValidationCheck($(this), bValidate);
    });
}

function SetEmptyValuesForElementsInContainer(container) {
    container.find("input").each(function () {
        $(this).val("");
    });
}

function RemoveValidationRuleAndChangeAttrName(element, rule, shouldValidate) {
    RemoveValidationRule(element, rule, shouldValidate);
    element.attr("not-use-data-val-" + rule, element.attr('data-val-' + rule));
    element.removeAttr('data-val-' + rule);
}
function RemoveValidationRule(element, rule, shouldValidate) {
    element.rules("remove", rule);
    if (shouldValidate) {
        element.valid();
    }
}

function AddExistingValidationRule(element, rule) {
    element.attr("data-val-" + rule, element.attr('not-use-data-val-' + rule));
    element.removeAttr('not-use-data-val-' + rule);
    SetValidationCheck(element, true);
}

function SetValidationForElementsInConteiner(conteiner) {
    conteiner.find("[data-val = 'true']").each(function () {
        SetValidationCheck($(this), true);
    });
}

function ValidateFieldOnAnotherFieldChange(field) {
    if (field.val() != "" || field.attr("data-val") == false || field.attr("data-val") == "false") {
        var fieldObj = $('[data-valmsg-for="' + field.get(0).name + '"]');
        if (fieldObj && fieldObj != 'undefined') {
            fieldObj.get(0).innerHTML = "";
        }
        field.valid();
    }
}

(function ($) {

    $.fn.resetValidation = function () {
        /// <summary>
        /// removes  all mvc related not custom validation messages
        /// given a jQuery selected form or child
        /// </summary>

        var $form = this.closest('form');

        //reset jQuery Validate's internals
        var validator = $form.validate();
        validator.resetForm();

        //reset unobtrusive validation summary, if it exists
        $form.find("[data-valmsg-summary-server-side=true]")
            .removeClass("validation-summary-errors")
            .addClass("validation-summary-valid")
            .find("ul").empty();

        //reset unobtrusive field level, if it exists
        $form.find("[data-valmsg-replace]")
            .removeClass("field-validation-error")
            .addClass("field-validation-valid")
            .empty();

        return $form;
    };
})(jQuery);
function fillValidatioSumarry(data)
{
    var container = $("form").find("[data-valmsg-summary-server-side=true]"),
            list = container.find("ul");

	if (list && list.length)
	{
		list.empty();
		container.addClass("validation-summary-errors").removeClass("validation-summary-valid");

		for (var i = 0; i < data.Fields.length; i++)
		{
			var f = data.Fields[i];

			if (f.Errors && f.Errors.length > 0)
			{
				$.each(f.Errors, function ()
				{
					$("<li />").html(this.ErrorMessage).appendTo(list);
				});
			}
		}
	}
}

function fillValidatioSumarryFromString(data) {
    if (data != null && data != "") {
        var container = $("form").find("[data-valmsg-summary-server-side=true]"),
            list = container.find("ul");

        if (list && list.length) {
            list.empty();
            container.addClass("validation-summary-errors").removeClass("validation-summary-valid");

            var arr = data.split(" @ ");

            for (var i = 0; i < arr.length - 1; i++) {
                var f = arr[i];

                $("<li />").html(f).appendTo(list);

            }
        }
    }
}

function fillValidatioSumarryErrorData(data) {

    if (data != null && data != "") {
        var container = $("form").find("[data-valmsg-summary-server-side=true]"),
            list = container.find("ul");

        if (list && list.length) {
            list.empty();
            container.addClass("validation-summary-errors").removeClass("validation-summary-valid");

            for (var i = 0; i < data.ErrorResStrList.length ; i++) {
                var f = data.ErrorResStrList[i];

                $("<li />").html(f).appendTo(list);

            }
        }
    }
}

function fillValidatioSumarryErrorData2(data) {

    if (data != null && data != "") {
        var container = $("form").find("[data-valmsg-summary-server-side=true]"),
            list = container.find("ul");

        if (list && list.length) {
            list.empty();
            container.addClass("validation-summary-errors").removeClass("validation-summary-valid");

            for (var i = 0; i < data.ErrorStrList.length ; i++) {
                var f = data.ErrorStrList[i];

                $("<li />").html(f).appendTo(list);

            }
        }
    }
}

function EmptyValidatioSumarry() {
    var container = $("form").find("[data-valmsg-summary-server-side=true]"),
        list = container.find("ul");

    if (list)
        if (list.length) {
            list.empty();
            container.removeClass("validation-summary-errors").addClass("validation-summary-valid");
        }
}
//DAIS: be careful when update there is custom code 
//tpetmezov 20110520 fixes for regEx
//var memoizeBindingAttributeSyntaxRegex = /(<[a-z]+\d*(\s+(?!data-bind=)[a-z0-9]+(=(\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind=(["'])([\s\S]*?)\5/gi;


// Knockout JavaScript library v1.2.0
// (c) Steven Sanderson - http://knockoutjs.com/
// License: MIT (http://www.opensource.org/licenses/mit-license.php)

(function(window,undefined){ 
var ko = window["ko"] = {};
// Google Closure Compiler helpers (used only to make the minified file smaller)
ko.exportSymbol = function(publicPath, object) {
	var tokens = publicPath.split(".");
	var target = window;
	for (var i = 0; i < tokens.length - 1; i++)
		target = target[tokens[i]];
	target[tokens[tokens.length - 1]] = object;
};
ko.exportProperty = function(owner, publicName, object) {
  owner[publicName] = object;
};
ko.utils = new (function () {
    var stringTrimRegex = /^(\s|\u00A0)+|(\s|\u00A0)+$/g;
    var isIe6 = /MSIE 6/i.test(navigator.userAgent);
    var isIe7 = /MSIE 7/i.test(navigator.userAgent);
    var knownMouseEvents = { "click" : 1, "dblclick" : 1, "mousedown" : 1, "mouseup" : 1, "mousemove" : 1, "mouseover" : 1, "mouseout" : 1, "mouseenter" : 1, "mouseleave" : 1 };

    function isClickOnCheckableElement(element, eventType) {
        if ((element.tagName != "INPUT") || !element.type) return false;
        if (eventType.toLowerCase() != "click") return false;
        var inputType = element.type.toLowerCase();
        return (inputType == "checkbox") || (inputType == "radio");
    }
    
    return {
        fieldsIncludedWithJsonPost: ['authenticity_token', /^__RequestVerificationToken(_.*)?$/],
        
        arrayForEach: function (array, action) {
            for (var i = 0, j = array.length; i < j; i++)
                action(array[i]);
        },

        arrayIndexOf: function (array, item) {
            if (typeof array.indexOf == "function")
                return array.indexOf(item);
            for (var i = 0, j = array.length; i < j; i++)
                if (array[i] == item)
                    return i;
            return -1;
        },

        arrayFirst: function (array, predicate, predicateOwner) {
            for (var i = 0, j = array.length; i < j; i++)
                if (predicate.call(predicateOwner, array[i]))
                    return array[i];
            return null;
        },

        arrayRemoveItem: function (array, itemToRemove) {
            var index = ko.utils.arrayIndexOf(array, itemToRemove);
            if (index >= 0)
                array.splice(index, 1);
        },

        arrayGetDistinctValues: function (array) {
            array = array || [];
            var result = [];
            for (var i = 0, j = array.length; i < j; i++) {
                if (ko.utils.arrayIndexOf(result, array[i]) < 0)
                    result.push(array[i]);
            }
            return result;
        },

        arrayMap: function (array, mapping) {
            array = array || [];
            var result = [];
            for (var i = 0, j = array.length; i < j; i++)
                result.push(mapping(array[i]));
            return result;
        },

        arrayFilter: function (array, predicate) {
            array = array || [];
            var result = [];
            for (var i = 0, j = array.length; i < j; i++)
                if (predicate(array[i]))
                    result.push(array[i]);
            return result;
        },
        
        arrayPushAll: function (array, valuesToPush) {
            for (var i = 0, j = valuesToPush.length; i < j; i++)
                array.push(valuesToPush[i]);	
        },

        emptyDomNode: function (domNode) {
            while (domNode.firstChild) {
                ko.removeNode(domNode.firstChild);
            }
        },

        setDomNodeChildren: function (domNode, childNodes) {
            ko.utils.emptyDomNode(domNode);
            if (childNodes) {
                ko.utils.arrayForEach(childNodes, function (childNode) {
                    domNode.appendChild(childNode);
                });
            }
        },

        replaceDomNodes: function (nodeToReplaceOrNodeArray, newNodesArray) {
            var nodesToReplaceArray = nodeToReplaceOrNodeArray.nodeType ? [nodeToReplaceOrNodeArray] : nodeToReplaceOrNodeArray;
            if (nodesToReplaceArray.length > 0) {
                var insertionPoint = nodesToReplaceArray[0];
                var parent = insertionPoint.parentNode;
                for (var i = 0, j = newNodesArray.length; i < j; i++)
                    parent.insertBefore(newNodesArray[i], insertionPoint);
                for (var i = 0, j = nodesToReplaceArray.length; i < j; i++) {
                    ko.removeNode(nodesToReplaceArray[i]);
                }
            }
        },

        setOptionNodeSelectionState: function (optionNode, isSelected) {
            // IE6 sometimes throws "unknown error" if you try to write to .selected directly, whereas Firefox struggles with setAttribute. Pick one based on browser.
            if (navigator.userAgent.indexOf("MSIE 6") >= 0)
                optionNode.setAttribute("selected", isSelected);
            else
                optionNode.selected = isSelected;
        },

        getElementsHavingAttribute: function (rootNode, attributeName) {
            if ((!rootNode) || (rootNode.nodeType != 1)) return [];
            var results = [];
            if (rootNode.getAttribute(attributeName) !== null)
                results.push(rootNode);
            var descendants = rootNode.getElementsByTagName("*");
            for (var i = 0, j = descendants.length; i < j; i++)
                if (descendants[i].getAttribute(attributeName) !== null)
                    results.push(descendants[i]);
            return results;
        },

        stringTrim: function (string) {
            return (string || "").replace(stringTrimRegex, "");
        },

        stringTokenize: function (string, delimiter) {
            var result = [];
            var tokens = (string || "").split(delimiter);
            for (var i = 0, j = tokens.length; i < j; i++) {
                var trimmed = ko.utils.stringTrim(tokens[i]);
                if (trimmed !== "")
                    result.push(trimmed);
            }
            return result;
        },
        
        stringStartsWith: function (string, startsWith) {        	
            string = string || "";
            if (startsWith.length > string.length)
                return false;
            return string.substring(0, startsWith.length) === startsWith;
        },

        evalWithinScope: function (expression, scope) {
            if (scope === undefined)
                return (new Function("return " + expression))();
            with (scope) { return eval("(" + expression + ")"); }
        },

        domNodeIsContainedBy: function (node, containedByNode) {
            if (containedByNode.compareDocumentPosition)
                return (containedByNode.compareDocumentPosition(node) & 16) == 16;
            while (node != null) {
                if (node == containedByNode)
                    return true;
                node = node.parentNode;
            }
            return false;
        },

        domNodeIsAttachedToDocument: function (node) {
            return ko.utils.domNodeIsContainedBy(node, document);
        },

        registerEventHandler: function (element, eventType, handler) {
            if (typeof jQuery != "undefined") {
                if (isClickOnCheckableElement(element, eventType)) {
                    // For click events on checkboxes, jQuery interferes with the event handling in an awkward way:
                    // it toggles the element checked state *after* the click event handlers run, whereas native
                    // click events toggle the checked state *before* the event handler. 
                    // Fix this by intecepting the handler and applying the correct checkedness before it runs.            	
                    var originalHandler = handler;
                    handler = function(event, eventData) {
                        var jQuerySuppliedCheckedState = this.checked;
                        if (eventData)
                            this.checked = eventData.checkedStateBeforeEvent !== true;
                        originalHandler.call(this, event);
                        this.checked = jQuerySuppliedCheckedState; // Restore the state jQuery applied
                    };                	
                }
                jQuery(element)['bind'](eventType, handler);
            } else if (typeof element.addEventListener == "function")
                element.addEventListener(eventType, handler, false);
            else if (typeof element.attachEvent != "undefined")
                element.attachEvent("on" + eventType, function (event) {
                    handler.call(element, event);
                });
            else
                throw new Error("Browser doesn't support addEventListener or attachEvent");
        },

        triggerEvent: function (element, eventType) {
            if (!(element && element.nodeType))
                throw new Error("element must be a DOM node when calling triggerEvent");

            if (typeof jQuery != "undefined") {
                var eventData = [];
                if (isClickOnCheckableElement(element, eventType)) {
                    // Work around the jQuery "click events on checkboxes" issue described above by storing the original checked state before triggering the handler
                    eventData.push({ checkedStateBeforeEvent: element.checked });
                }
                jQuery(element)['trigger'](eventType, eventData);
            } else if (typeof document.createEvent == "function") {
                if (typeof element.dispatchEvent == "function") {
                    var eventCategory = (eventType in knownMouseEvents ? "MouseEvents" : "HTMLEvents");
                    var event = document.createEvent(eventCategory);
                    event.initEvent(eventType, true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, element);
                    element.dispatchEvent(event);
                }
                else
                    throw new Error("The supplied element doesn't support dispatchEvent");
            } else if (typeof element.fireEvent != "undefined") {
                // Unlike other browsers, IE doesn't change the checked state of checkboxes/radiobuttons when you trigger their "click" event
                // so to make it consistent, we'll do it manually here
                if (eventType == "click") {
                    if ((element.tagName == "INPUT") && ((element.type.toLowerCase() == "checkbox") || (element.type.toLowerCase() == "radio")))
                        element.checked = element.checked !== true;
                }
                element.fireEvent("on" + eventType);
            }
            else
                throw new Error("Browser doesn't support triggering events");
        },

        unwrapObservable: function (value) {
            return ko.isObservable(value) ? value() : value;
        },

        domNodeHasCssClass: function (node, className) {
            var currentClassNames = (node.className || "").split(/\s+/);
            return ko.utils.arrayIndexOf(currentClassNames, className) >= 0;
        },

        toggleDomNodeCssClass: function (node, className, shouldHaveClass) {
            var hasClass = ko.utils.domNodeHasCssClass(node, className);
            if (shouldHaveClass && !hasClass) {
                node.className = (node.className || "") + " " + className;
            } else if (hasClass && !shouldHaveClass) {
                var currentClassNames = (node.className || "").split(/\s+/);
                var newClassName = "";
                for (var i = 0; i < currentClassNames.length; i++)
                    if (currentClassNames[i] != className)
                        newClassName += currentClassNames[i] + " ";
                node.className = ko.utils.stringTrim(newClassName);
            }
        },

        range: function (min, max) {
            min = ko.utils.unwrapObservable(min);
            max = ko.utils.unwrapObservable(max);
            var result = [];
            for (var i = min; i <= max; i++)
                result.push(i);
            return result;
        },
        
        makeArray: function(arrayLikeObject) {
            var result = [];
            for (var i = arrayLikeObject.length - 1; i >= 0; i--){
                result.push(arrayLikeObject[i]);
            };
            return result;
        },
        
        isIe6 : isIe6,
        isIe7 : isIe7,
        
        getFormFields: function(form, fieldName) {
            var fields = ko.utils.makeArray(form.getElementsByTagName("INPUT")).concat(ko.utils.makeArray(form.getElementsByTagName("TEXTAREA")));
            var isMatchingField = (typeof fieldName == 'string') 
                ? function(field) { return field.name === fieldName }
                : function(field) { return fieldName.test(field.name) }; // Treat fieldName as regex or object containing predicate
            var matches = [];
            for (var i = fields.length - 1; i >= 0; i--) {
                if (isMatchingField(fields[i]))
                    matches.push(fields[i]);
            };
            return matches;
        },
        
        parseJson: function (jsonString) {
            if (typeof jsonString == "string") {
                jsonString = ko.utils.stringTrim(jsonString);
                if (jsonString) {
                    if (window.JSON && window.JSON.parse) // Use native parsing where available
                        return window.JSON.parse(jsonString);
                    return (new Function("return " + jsonString))(); // Fallback on less safe parsing for older browsers
                }
            }	
            return null;
        },

        stringifyJson: function (data) {
            if ((typeof JSON == "undefined") || (typeof JSON.stringify == "undefined"))
                throw new Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");
            return JSON.stringify(ko.utils.unwrapObservable(data));
        },

        postJson: function (urlOrForm, data, options) {
            options = options || {};
            var params = options['params'] || {};
            var includeFields = options['includeFields'] || this.fieldsIncludedWithJsonPost;
            var url = urlOrForm;
            
            // If we were given a form, use its 'action' URL and pick out any requested field values 	
            if((typeof urlOrForm == 'object') && (urlOrForm.tagName == "FORM")) {
                var originalForm = urlOrForm;
                url = originalForm.action;
                for (var i = includeFields.length - 1; i >= 0; i--) {
                    var fields = ko.utils.getFormFields(originalForm, includeFields[i]);
                    for (var j = fields.length - 1; j >= 0; j--)        				
                        params[fields[j].name] = fields[j].value;
                }
            }        	
            
            data = ko.utils.unwrapObservable(data);
            var form = document.createElement("FORM");
            form.style.display = "none";
            form.action = url;
            form.method = "post";
            for (var key in data) {
                var input = document.createElement("INPUT");
                input.name = key;
                input.value = ko.utils.stringifyJson(ko.utils.unwrapObservable(data[key]));
                form.appendChild(input);
            }
            for (var key in params) {
                var input = document.createElement("INPUT");
                input.name = key;
                input.value = params[key];
                form.appendChild(input);
            }            
            document.body.appendChild(form);
            options['submitter'] ? options['submitter'](form) : form.submit();
            setTimeout(function () { form.parentNode.removeChild(form); }, 0);
        }
    }
})();

ko.exportSymbol('ko.utils', ko.utils);
ko.exportSymbol('ko.utils.arrayForEach', ko.utils.arrayForEach);
ko.exportSymbol('ko.utils.arrayFirst', ko.utils.arrayFirst);
ko.exportSymbol('ko.utils.arrayFilter', ko.utils.arrayFilter);
ko.exportSymbol('ko.utils.arrayGetDistinctValues', ko.utils.arrayGetDistinctValues);
ko.exportSymbol('ko.utils.arrayIndexOf', ko.utils.arrayIndexOf);
ko.exportSymbol('ko.utils.arrayMap', ko.utils.arrayMap);
ko.exportSymbol('ko.utils.arrayPushAll', ko.utils.arrayPushAll);
ko.exportSymbol('ko.utils.arrayRemoveItem', ko.utils.arrayRemoveItem);
ko.exportSymbol('ko.utils.fieldsIncludedWithJsonPost', ko.utils.fieldsIncludedWithJsonPost);
ko.exportSymbol('ko.utils.getElementsHavingAttribute', ko.utils.getElementsHavingAttribute);
ko.exportSymbol('ko.utils.getFormFields', ko.utils.getFormFields);
ko.exportSymbol('ko.utils.postJson', ko.utils.postJson);
ko.exportSymbol('ko.utils.parseJson', ko.utils.parseJson);
ko.exportSymbol('ko.utils.registerEventHandler', ko.utils.registerEventHandler);
ko.exportSymbol('ko.utils.stringifyJson', ko.utils.stringifyJson);
ko.exportSymbol('ko.utils.range', ko.utils.range);
ko.exportSymbol('ko.utils.toggleDomNodeCssClass', ko.utils.toggleDomNodeCssClass);
ko.exportSymbol('ko.utils.triggerEvent', ko.utils.triggerEvent);
ko.exportSymbol('ko.utils.unwrapObservable', ko.utils.unwrapObservable);

if (!Function.prototype['bind']) {
    // Function.prototype.bind is a standard part of ECMAScript 5th Edition (December 2009, http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-262.pdf)
    // In case the browser doesn't implement it natively, provide a JavaScript implementation. This implementation is based on the one in prototype.js
    Function.prototype['bind'] = function (object) {
        var originalFunction = this, args = Array.prototype.slice.call(arguments), object = args.shift();
        return function () {
            return originalFunction.apply(object, args.concat(Array.prototype.slice.call(arguments)));
        }; 
    };
}
ko.utils.domData = new (function () {
    var uniqueId = 0;
    var dataStoreKeyExpandoPropertyName = "__ko__" + (new Date).getTime();
    var dataStore = {};
    return {
        get: function (node, key) {
            var allDataForNode = ko.utils.domData.getAll(node, false);
            return allDataForNode === undefined ? undefined : allDataForNode[key];
        },
        set: function (node, key, value) {
            if (value === undefined) {
                // Make sure we don't actually create a new domData key if we are actually deleting a value
                if (ko.utils.domData.getAll(node, false) === undefined)
                    return;
            }
            var allDataForNode = ko.utils.domData.getAll(node, true);
            allDataForNode[key] = value;
        },
        getAll: function (node, createIfNotFound) {
            var dataStoreKey = node[dataStoreKeyExpandoPropertyName];
            if (!dataStoreKey) {
                if (!createIfNotFound)
                    return undefined;
                dataStoreKey = node[dataStoreKeyExpandoPropertyName] = "ko" + uniqueId++;
                dataStore[dataStoreKey] = {};
            }
            return dataStore[dataStoreKey];
        },
        clear: function (node) {
            var dataStoreKey = node[dataStoreKeyExpandoPropertyName];
            if (dataStoreKey) {
                delete dataStore[dataStoreKey];
                node[dataStoreKeyExpandoPropertyName] = null;
            }
        }
    }
})();
ko.utils.domNodeDisposal = new (function () {
    var domDataKey = "__ko_domNodeDisposal__" + (new Date).getTime();
    
    function getDisposeCallbacksCollection(node, createIfNotFound) {
        var allDisposeCallbacks = ko.utils.domData.get(node, domDataKey);
        if ((allDisposeCallbacks === undefined) && createIfNotFound) {
            allDisposeCallbacks = [];
            ko.utils.domData.set(node, domDataKey, allDisposeCallbacks);
        }
        return allDisposeCallbacks;
    }
    function destroyCallbacksCollection(node) {
        ko.utils.domData.set(node, domDataKey, undefined);
    }
    
    function cleanSingleNode(node) {
        // Run all the dispose callbacks
        var callbacks = getDisposeCallbacksCollection(node, false);
        if (callbacks) {
            callbacks = callbacks.slice(0); // Clone, as the array may be modified during iteration (typically, callbacks will remove themselves)
            for (var i = 0; i < callbacks.length; i++)
                callbacks[i](node);
        }	
        
        // Also erase the DOM data
        ko.utils.domData.clear(node);		
        
        // Special support for jQuery here because it's so commonly used.
        // Many jQuery plugins (including jquery.tmpl) store data using jQuery's equivalent of domData
        // so notify it to tear down any resources associated with the node & descendants here.
        if ((typeof jQuery == "function") && (typeof jQuery['cleanData'] == "function"))
            jQuery['cleanData']([node]);			
    }
    
    return {
        addDisposeCallback : function(node, callback) {
            if (typeof callback != "function")
                throw new Error("Callback must be a function");
            getDisposeCallbacksCollection(node, true).push(callback);
        },
        
        removeDisposeCallback : function(node, callback) {
            var callbacksCollection = getDisposeCallbacksCollection(node, false);
            if (callbacksCollection) {
                ko.utils.arrayRemoveItem(callbacksCollection, callback);
                if (callbacksCollection.length == 0)
                    destroyCallbacksCollection(node);
            }
        },
        
        cleanNode : function(node) {
            if ((node.nodeType != 1) && (node.nodeType != 9))
                return;
            cleanSingleNode(node);
            var descendants = node.getElementsByTagName("*");
            for (var i = 0, j = descendants.length; i < j; i++)
                cleanSingleNode(descendants[i]);
        },
        
        removeNode : function(node) {
            ko.cleanNode(node);
            if (node.parentNode)
                node.parentNode.removeChild(node);
        }
    }
})();
ko.cleanNode = ko.utils.domNodeDisposal.cleanNode; // Shorthand name for convenience
ko.removeNode = ko.utils.domNodeDisposal.removeNode; // Shorthand name for convenience
ko.exportSymbol('ko.cleanNode', ko.cleanNode); 
ko.exportSymbol('ko.removeNode', ko.removeNode);
ko.exportSymbol('ko.utils.domNodeDisposal', ko.utils.domNodeDisposal);
ko.exportSymbol('ko.utils.domNodeDisposal.addDisposeCallback', ko.utils.domNodeDisposal.addDisposeCallback);
ko.exportSymbol('ko.utils.domNodeDisposal.removeDisposeCallback', ko.utils.domNodeDisposal.removeDisposeCallback);
ko.memoization = (function () {
    var memos = {};

    function randomMax8HexChars() {
        return (((1 + Math.random()) * 0x100000000) | 0).toString(16).substring(1);
    }
    function generateRandomId() {
        return randomMax8HexChars() + randomMax8HexChars();
    }
    function findMemoNodes(rootNode, appendToArray) {
        if (!rootNode)
            return;
        if (rootNode.nodeType == 8) {
            var memoId = ko.memoization.parseMemoText(rootNode.nodeValue);
            if (memoId != null)
                appendToArray.push({ domNode: rootNode, memoId: memoId });
        } else if (rootNode.nodeType == 1) {
            for (var i = 0, childNodes = rootNode.childNodes, j = childNodes.length; i < j; i++)
                findMemoNodes(childNodes[i], appendToArray);
        }
    }

    return {
        memoize: function (callback) {
            if (typeof callback != "function")
                throw new Error("You can only pass a function to ko.memoization.memoize()");
            var memoId = generateRandomId();
            memos[memoId] = callback;
            return "<!--[ko_memo:" + memoId + "]-->";
        },

        unmemoize: function (memoId, callbackParams) {
            var callback = memos[memoId];
            if (callback === undefined)
                throw new Error("Couldn't find any memo with ID " + memoId + ". Perhaps it's already been unmemoized.");
            try {
                callback.apply(null, callbackParams || []);
                return true;
            }
            finally { delete memos[memoId]; }
        },

        unmemoizeDomNodeAndDescendants: function (domNode, extraCallbackParamsArray) {
            var memos = [];
            findMemoNodes(domNode, memos);
            for (var i = 0, j = memos.length; i < j; i++) {
                var node = memos[i].domNode;
                var combinedParams = [node];
                if (extraCallbackParamsArray)
                    ko.utils.arrayPushAll(combinedParams, extraCallbackParamsArray);
                ko.memoization.unmemoize(memos[i].memoId, combinedParams);
                node.nodeValue = ""; // Neuter this node so we don't try to unmemoize it again
                if (node.parentNode)
                    node.parentNode.removeChild(node); // If possible, erase it totally (not always possible - someone else might just hold a reference to it then call unmemoizeDomNodeAndDescendants again)
            }
        },

        parseMemoText: function (memoText) {
            var match = memoText.match(/^\[ko_memo\:(.*?)\]$/);
            return match ? match[1] : null;
        }
    };
})();

ko.exportSymbol('ko.memoization', ko.memoization);
ko.exportSymbol('ko.memoization.memoize', ko.memoization.memoize);
ko.exportSymbol('ko.memoization.unmemoize', ko.memoization.unmemoize);
ko.exportSymbol('ko.memoization.parseMemoText', ko.memoization.parseMemoText);
ko.exportSymbol('ko.memoization.unmemoizeDomNodeAndDescendants', ko.memoization.unmemoizeDomNodeAndDescendants);

ko.subscription = function (callback, disposeCallback) {
    this.callback = callback;
    this.dispose = function () {
        this.isDisposed = true;
        disposeCallback();
    }['bind'](this);
    
    ko.exportProperty(this, 'dispose', this.dispose);
};

ko.subscribable = function () {
    var _subscriptions = [];

    this.subscribe = function (callback, callbackTarget) {
        var boundCallback = callbackTarget ? callback.bind(callbackTarget) : callback;

        var subscription = new ko.subscription(boundCallback, function () {
            ko.utils.arrayRemoveItem(_subscriptions, subscription);
        });
        _subscriptions.push(subscription);
        return subscription;
    };

    this.notifySubscribers = function (valueToNotify) {
        ko.utils.arrayForEach(_subscriptions.slice(0), function (subscription) {
            // In case a subscription was disposed during the arrayForEach cycle, check
            // for isDisposed on each subscription before invoking its callback
            if (subscription && (subscription.isDisposed !== true))
                subscription.callback(valueToNotify);
        });
    };

    this.getSubscriptionsCount = function () {
        return _subscriptions.length;
    };
    
    ko.exportProperty(this, 'subscribe', this.subscribe);
    ko.exportProperty(this, 'notifySubscribers', this.notifySubscribers);
    ko.exportProperty(this, 'getSubscriptionsCount', this.getSubscriptionsCount);
}

ko.isSubscribable = function (instance) {
    return typeof instance.subscribe == "function" && typeof instance.notifySubscribers == "function";
};

ko.exportSymbol('ko.subscribable', ko.subscribable);
ko.exportSymbol('ko.isSubscribable', ko.isSubscribable);

ko.dependencyDetection = (function () {
    var _detectedDependencies = [];

    return {
        begin: function () {
            _detectedDependencies.push([]);
        },

        end: function () {
            return _detectedDependencies.pop();
        },

        registerDependency: function (subscribable) {
            if (!ko.isSubscribable(subscribable))
                throw "Only subscribable things can act as dependencies";
            if (_detectedDependencies.length > 0) {
                _detectedDependencies[_detectedDependencies.length - 1].push(subscribable);
            }
        }
    };
})();
ko.observable = function (initialValue) {
    var _latestValue = initialValue;

    function observable() {
        if (arguments.length > 0) {
            // Write
            _latestValue = arguments[0];
            observable.notifySubscribers(_latestValue);
            return this; // Permits chained assignments
        }
        else {
            // Read
            ko.dependencyDetection.registerDependency(observable); // The caller only needs to be notified of changes if they did a "read" operation
            return _latestValue;
        }
    }
    observable.__ko_proto__ = ko.observable;
    observable.valueHasMutated = function () { observable.notifySubscribers(_latestValue); }

    ko.subscribable.call(observable);
    
    ko.exportProperty(observable, "valueHasMutated", observable.valueHasMutated);
    
    return observable;
}
ko.isObservable = function (instance) {
    if ((instance === null) || (instance === undefined) || (instance.__ko_proto__ === undefined)) return false;
    if (instance.__ko_proto__ === ko.observable) return true;
    return ko.isObservable(instance.__ko_proto__); // Walk the prototype chain
}
ko.isWriteableObservable = function (instance) {
    // Observable
    if ((typeof instance == "function") && instance.__ko_proto__ === ko.observable)
        return true;
    // Writeable dependent observable
    if ((typeof instance == "function") && (instance.__ko_proto__ === ko.dependentObservable) && (instance.hasWriteFunction))
        return true;
    // Anything else
    return false;
}


ko.exportSymbol('ko.observable', ko.observable);
ko.exportSymbol('ko.isObservable', ko.isObservable);
ko.exportSymbol('ko.isWriteableObservable', ko.isWriteableObservable);

ko.observableArray = function (initialValues) {
    if (arguments.length == 0) {
        // Zero-parameter constructor initializes to empty array
        initialValues = [];
    }
    if ((initialValues !== null) && (initialValues !== undefined) && !('length' in initialValues))
        throw new "The argument passed when initializing an observable array must be an array, or null, or undefined.";
    var result = new ko.observable(initialValues);

    ko.utils.arrayForEach(["pop", "push", "reverse", "shift", "sort", "splice", "unshift"], function (methodName) {
        result[methodName] = function () {
            var underlyingArray = result();
            var methodCallResult = underlyingArray[methodName].apply(underlyingArray, arguments);
            result.valueHasMutated();
            return methodCallResult;
        };
    });

    ko.utils.arrayForEach(["slice"], function (methodName) {
        result[methodName] = function () {
            var underlyingArray = result();
            return underlyingArray[methodName].apply(underlyingArray, arguments);
        };
    });

    result.remove = function (valueOrPredicate) {
        var underlyingArray = result();
        var remainingValues = [];
        var removedValues = [];
        var predicate = typeof valueOrPredicate == "function" ? valueOrPredicate : function (value) { return value === valueOrPredicate; };
        for (var i = 0, j = underlyingArray.length; i < j; i++) {
            var value = underlyingArray[i];
            if (!predicate(value))
                remainingValues.push(value);
            else
                removedValues.push(value);
        }
        result(remainingValues);
        return removedValues;
    };

    result.removeAll = function (arrayOfValues) {
        // If you passed zero args, we remove everything
        if (arrayOfValues === undefined) {
            var allValues = result();
            result([]);
            return allValues;
        }
        
        // If you passed an arg, we interpret it as an array of entries to remove
        if (!arrayOfValues)
            return [];
        return result.remove(function (value) {
            return ko.utils.arrayIndexOf(arrayOfValues, value) >= 0;
        });
    };
    
    result.destroy = function (valueOrPredicate) {
        var underlyingArray = result();
        var predicate = typeof valueOrPredicate == "function" ? valueOrPredicate : function (value) { return value === valueOrPredicate; };
        for (var i = underlyingArray.length - 1; i >= 0; i--) {
            var value = underlyingArray[i];
            if (predicate(value))
                underlyingArray[i]["_destroy"] = true;
        }
        result.valueHasMutated();
    };
    
    result.destroyAll = function (arrayOfValues) {
        // If you passed zero args, we destroy everything
        if (arrayOfValues === undefined)
            return result.destroy(function() { return true });
                
        // If you passed an arg, we interpret it as an array of entries to destroy
        if (!arrayOfValues)
            return [];
        return result.destroy(function (value) {
            return ko.utils.arrayIndexOf(arrayOfValues, value) >= 0;
        });		    	
    };

    result.indexOf = function (item) {
        var underlyingArray = result();
        return ko.utils.arrayIndexOf(underlyingArray, item);
    };
    
    result.replace = function(oldItem, newItem) {
        var index = result.indexOf(oldItem);
        if (index >= 0) {
            result()[index] = newItem;
            result.valueHasMutated();
        }	
    };
    
    ko.exportProperty(result, "remove", result.remove);
    ko.exportProperty(result, "removeAll", result.removeAll);
    ko.exportProperty(result, "destroy", result.destroy);
    ko.exportProperty(result, "destroyAll", result.destroyAll);
    ko.exportProperty(result, "indexOf", result.indexOf);
    
    return result;
}

ko.exportSymbol('ko.observableArray', ko.observableArray);
ko.dependentObservable = function (evaluatorFunctionOrOptions, evaluatorFunctionTarget, options) {
    var _latestValue, _hasBeenEvaluated = false;
    
    if (evaluatorFunctionOrOptions && typeof evaluatorFunctionOrOptions == "object") {
        // Single-parameter syntax - everything is on this "options" param
        options = evaluatorFunctionOrOptions;
    } else {
        // Multi-parameter syntax - construct the options according to the params passed
        options = options || {};
        options["read"] = evaluatorFunctionOrOptions || options["read"];
        options["owner"] = evaluatorFunctionTarget || options["owner"];
    }
    // By here, "options" is always non-null
    
    if (typeof options["read"] != "function")
        throw "Pass a function that returns the value of the dependentObservable";
        
    // Build "disposeWhenNodeIsRemoved" and "disposeWhenNodeIsRemovedCallback" option values
    // (Note: "disposeWhenNodeIsRemoved" option both proactively disposes as soon as the node is removed using ko.removeNode(),
    // plus adds a "disposeWhen" callback that, on each evaluation, disposes if the node was removed by some other means.)
    var disposeWhenNodeIsRemoved = (typeof options["disposeWhenNodeIsRemoved"] == "object") ? options["disposeWhenNodeIsRemoved"] : null;
    var disposeWhenNodeIsRemovedCallback = null;
    if (disposeWhenNodeIsRemoved) {
        disposeWhenNodeIsRemovedCallback = function() { dependentObservable.dispose() };
        ko.utils.domNodeDisposal.addDisposeCallback(disposeWhenNodeIsRemoved, disposeWhenNodeIsRemovedCallback);
        var existingDisposeWhenFunction = options["disposeWhen"];
        options["disposeWhen"] = function () {
            return (!ko.utils.domNodeIsAttachedToDocument(disposeWhenNodeIsRemoved)) 
                || ((typeof existingDisposeWhenFunction == "function") && existingDisposeWhenFunction());
        }    	
    }
    
    var _subscriptionsToDependencies = [];
    function disposeAllSubscriptionsToDependencies() {
        ko.utils.arrayForEach(_subscriptionsToDependencies, function (subscription) {
            subscription.dispose();
        });
        _subscriptionsToDependencies = [];
    }

    function replaceSubscriptionsToDependencies(newDependencies) {
        disposeAllSubscriptionsToDependencies();
        ko.utils.arrayForEach(newDependencies, function (dependency) {
            _subscriptionsToDependencies.push(dependency.subscribe(evaluate));
        });
    };
    
    function evaluate() {
        // Don't dispose on first evaluation, because the "disposeWhen" callback might
        // e.g., dispose when the associated DOM element isn't in the doc, and it's not
        // going to be in the doc until *after* the first evaluation
        if ((_hasBeenEvaluated) && typeof options["disposeWhen"] == "function") {
            if (options["disposeWhen"]()) {
                dependentObservable.dispose();
                return;
            }
        }

        try {
            ko.dependencyDetection.begin();
            _latestValue = options["owner"] ? options["read"].call(options["owner"]) : options["read"]();
        } finally {
            var distinctDependencies = ko.utils.arrayGetDistinctValues(ko.dependencyDetection.end());
            replaceSubscriptionsToDependencies(distinctDependencies);
        }

        dependentObservable.notifySubscribers(_latestValue);
        _hasBeenEvaluated = true;
    }

    function dependentObservable() {
        if (arguments.length > 0) {
            if (typeof options["write"] === "function") {
                // Writing a value
                var valueToWrite = arguments[0];
                options["owner"] ? options["write"].call(options["owner"], valueToWrite) : options["write"](valueToWrite);
            } else {
                throw "Cannot write a value to a dependentObservable unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.";
            }
        } else {
            // Reading the value
            if (!_hasBeenEvaluated)
                evaluate();
            ko.dependencyDetection.registerDependency(dependentObservable);
            return _latestValue;
        }
    }
    dependentObservable.__ko_proto__ = ko.dependentObservable;
    dependentObservable.getDependenciesCount = function () { return _subscriptionsToDependencies.length; }
    dependentObservable.hasWriteFunction = typeof options["write"] === "function";
    dependentObservable.dispose = function () {
        if (disposeWhenNodeIsRemoved)
            ko.utils.domNodeDisposal.removeDisposeCallback(disposeWhenNodeIsRemoved, disposeWhenNodeIsRemovedCallback);
        disposeAllSubscriptionsToDependencies();
    };
    
    ko.subscribable.call(dependentObservable);
    if (options['deferEvaluation'] !== true)
        evaluate();
    
    ko.exportProperty(dependentObservable, 'dispose', dependentObservable.dispose);
    ko.exportProperty(dependentObservable, 'getDependenciesCount', dependentObservable.getDependenciesCount);
    
    return dependentObservable;
};
ko.dependentObservable.__ko_proto__ = ko.observable;

ko.exportSymbol('ko.dependentObservable', ko.dependentObservable);

(function() {    
    var maxNestedObservableDepth = 10; // Escape the (unlikely) pathalogical case where an observable's current value is itself (or similar reference cycle)
    
    ko.toJS = function(rootObject) {
        if (arguments.length == 0)
            throw new Error("When calling ko.toJS, pass the object you want to convert.");
        
        // We just unwrap everything at every level in the object graph
        return mapJsObjectGraph(rootObject, function(valueToMap) {
            // Loop because an observable's value might in turn be another observable wrapper
            for (var i = 0; ko.isObservable(valueToMap) && (i < maxNestedObservableDepth); i++)
                valueToMap = valueToMap();
            return valueToMap;
        });
    };

    ko.toJSON = function(rootObject) {
        var plainJavaScriptObject = ko.toJS(rootObject);
        return ko.utils.stringifyJson(plainJavaScriptObject);
    };
    
    function mapJsObjectGraph(rootObject, mapInputCallback, visitedObjects) {
        visitedObjects = visitedObjects || new objectLookup();
        
        rootObject = mapInputCallback(rootObject);
        var canHaveProperties = (typeof rootObject == "object") && (rootObject !== null) && (rootObject !== undefined);
        if (!canHaveProperties)
            return rootObject;
            
        var outputProperties = rootObject instanceof Array ? [] : {};
        visitedObjects.save(rootObject, outputProperties);            
        
        visitPropertiesOrArrayEntries(rootObject, function(indexer) {
            var propertyValue = mapInputCallback(rootObject[indexer]);
            
            switch (typeof propertyValue) {
                case "boolean":
                case "number":
                case "string":
                case "function":
                    outputProperties[indexer] = propertyValue;
                    break;
                case "object":
                case "undefined":				
                    var previouslyMappedValue = visitedObjects.get(propertyValue);
                    outputProperties[indexer] = (previouslyMappedValue !== undefined)
                        ? previouslyMappedValue
                        : mapJsObjectGraph(propertyValue, mapInputCallback, visitedObjects);
                    break;							
            }
        });
        
        return outputProperties;
    }
    
    function visitPropertiesOrArrayEntries(rootObject, visitorCallback) {
        if (rootObject instanceof Array) {
            for (var i = 0; i < rootObject.length; i++)
                visitorCallback(i);
        } else {
            for (var propertyName in rootObject)
                visitorCallback(propertyName);
        }
    };    
    
    function objectLookup() {
        var keys = [];
        var values = [];
        this.save = function(key, value) {
            var existingIndex = ko.utils.arrayIndexOf(keys, key);
            if (existingIndex >= 0)
                values[existingIndex] = value;
            else {
                keys.push(key);
                values.push(value);	
            }				
        };
        this.get = function(key) {
            var existingIndex = ko.utils.arrayIndexOf(keys, key);
            return (existingIndex >= 0) ? values[existingIndex] : undefined;
        };
    };
})();

ko.exportSymbol('ko.toJS', ko.toJS);
ko.exportSymbol('ko.toJSON', ko.toJSON);(function () {
    // Normally, SELECT elements and their OPTIONs can only take value of type 'string' (because the values
    // are stored on DOM attributes). ko.selectExtensions provides a way for SELECTs/OPTIONs to have values
    // that are arbitrary objects. This is very convenient when implementing things like cascading dropdowns.
    ko.selectExtensions = {
        readValue : function(element) {
            if (element.tagName == 'OPTION') {
                if (element['__ko__hasDomDataOptionValue__'] === true)
                    return ko.utils.domData.get(element, ko.bindingHandlers.options.optionValueDomDataKey);
                return element.getAttribute("value");
            } else if (element.tagName == 'SELECT')
                return element.selectedIndex >= 0 ? ko.selectExtensions.readValue(element.options[element.selectedIndex]) : undefined;
            else
                return element.value;
        },
        
        writeValue: function(element, value) {
            if (element.tagName == 'OPTION') {
                switch(typeof value) {
                    case "string":
                    case "number":
                        ko.utils.domData.set(element, ko.bindingHandlers.options.optionValueDomDataKey, undefined);
                        if ('__ko__hasDomDataOptionValue__' in element) { // IE <= 8 throws errors if you delete non-existent properties from a DOM node
                            delete element['__ko__hasDomDataOptionValue__'];
                        }
                        element.value = value;                                   
                        break;
                    default:
                        // Store arbitrary object using DomData
                        ko.utils.domData.set(element, ko.bindingHandlers.options.optionValueDomDataKey, value);
                        element['__ko__hasDomDataOptionValue__'] = true;
                        element.value = "";
                        break;
                }			
            } else if (element.tagName == 'SELECT') {
                for (var i = element.options.length - 1; i >= 0; i--) {
                    if (ko.selectExtensions.readValue(element.options[i]) == value) {
                        element.selectedIndex = i;
                        break;
                    }
                }
            } else {
                if ((value === null) || (value === undefined))
                    value = "";
                element.value = value;
            }
        }
    };        
})();

ko.exportSymbol('ko.selectExtensions', ko.selectExtensions);
ko.exportSymbol('ko.selectExtensions.readValue', ko.selectExtensions.readValue);
ko.exportSymbol('ko.selectExtensions.writeValue', ko.selectExtensions.writeValue);

ko.jsonExpressionRewriting = (function () {
    var restoreCapturedTokensRegex = /\[ko_token_(\d+)\]/g;
    var javaScriptAssignmentTarget = /^[\_$a-z][\_$a-z0-9]*(\[.*?\])*(\.[\_$a-z][\_$a-z0-9]*(\[.*?\])*)*$/i;
    var javaScriptReservedWords = ["true", "false"];

    function restoreTokens(string, tokens) {
        return string.replace(restoreCapturedTokensRegex, function (match, tokenIndex) {
            return tokens[tokenIndex];
        });
    }

    function isWriteableValue(expression) {
        if (ko.utils.arrayIndexOf(javaScriptReservedWords, ko.utils.stringTrim(expression).toLowerCase()) >= 0)
            return false;
        return expression.match(javaScriptAssignmentTarget) !== null;
    }

    return {
        parseJson: function (jsonString) {
            jsonString = ko.utils.stringTrim(jsonString);
            if (jsonString.length < 3)
                return {};

            // We're going to split on commas, so first extract any blocks that may contain commas other than those at the top level
            var tokens = [];
            var tokenStart = null, tokenEndChar;
            for (var position = jsonString.charAt(0) == "{" ? 1 : 0; position < jsonString.length; position++) {
                var c = jsonString.charAt(position);
                if (tokenStart === null) {
                    switch (c) {
                        case '"':
                        case "'":
                        case "/":
                            tokenStart = position;
                            tokenEndChar = c;
                            break;
                        case "{":
                            tokenStart = position;
                            tokenEndChar = "}";
                            break;
                        case "[":
                            tokenStart = position;
                            tokenEndChar = "]";
                            break;
                    }
                } else if (c == tokenEndChar) {
                    var token = jsonString.substring(tokenStart, position + 1);
                    tokens.push(token);
                    var replacement = "[ko_token_" + (tokens.length - 1) + "]";
                    jsonString = jsonString.substring(0, tokenStart) + replacement + jsonString.substring(position + 1);
                    position -= (token.length - replacement.length);
                    tokenStart = null;
                }
            }

            // Now we can safely split on commas to get the key/value pairs
            var result = {};
            var keyValuePairs = jsonString.split(",");
            for (var i = 0, j = keyValuePairs.length; i < j; i++) {
                var pair = keyValuePairs[i];
                var colonPos = pair.indexOf(":");
                if ((colonPos > 0) && (colonPos < pair.length - 1)) {
                    var key = ko.utils.stringTrim(pair.substring(0, colonPos));
                    var value = ko.utils.stringTrim(pair.substring(colonPos + 1));
                    if (key.charAt(0) == "{")
                        key = key.substring(1);
                    if (value.charAt(value.length - 1) == "}")
                        value = value.substring(0, value.length - 1);
                    key = ko.utils.stringTrim(restoreTokens(key, tokens));
                    value = ko.utils.stringTrim(restoreTokens(value, tokens));
                    result[key] = value;
                }
            }
            return result;
        },

        insertPropertyAccessorsIntoJson: function (jsonString) {
            var parsed = ko.jsonExpressionRewriting.parseJson(jsonString);
            var propertyAccessorTokens = [];
            for (var key in parsed) {
                var value = parsed[key];
                if (isWriteableValue(value)) {
                    if (propertyAccessorTokens.length > 0)
                        propertyAccessorTokens.push(", ");
                    propertyAccessorTokens.push(key + " : function(__ko_value) { " + value + " = __ko_value; }");
                }
            }

            if (propertyAccessorTokens.length > 0) {
                var allPropertyAccessors = propertyAccessorTokens.join("");
                jsonString = jsonString + ", '_ko_property_writers' : { " + allPropertyAccessors + " } ";
            }

            return jsonString;
        }
    };
})();

ko.exportSymbol('ko.jsonExpressionRewriting', ko.jsonExpressionRewriting);
ko.exportSymbol('ko.jsonExpressionRewriting.parseJson', ko.jsonExpressionRewriting.parseJson);
ko.exportSymbol('ko.jsonExpressionRewriting.insertPropertyAccessorsIntoJson', ko.jsonExpressionRewriting.insertPropertyAccessorsIntoJson);

(function () {
    var defaultBindingAttributeName = "data-bind";
    ko.bindingHandlers = {};

    function parseBindingAttribute(attributeText, viewModel) {
        try {
            var json = " { " + ko.jsonExpressionRewriting.insertPropertyAccessorsIntoJson(attributeText) + " } ";
            return ko.utils.evalWithinScope(json, viewModel === null ? window : viewModel);
        } catch (ex) {
            throw new Error("Unable to parse binding attribute.\nMessage: " + ex + ";\nAttribute value: " + attributeText);
        }
    }

    function invokeBindingHandler(handler, element, dataValue, allBindings, viewModel) {
        handler(element, dataValue, allBindings, viewModel);
    }

    ko.applyBindingsToNode = function (node, bindings, viewModel, bindingAttributeName) {
        var isFirstEvaluation = true;
        bindingAttributeName = bindingAttributeName || defaultBindingAttributeName;

        // Each time the dependentObservable is evaluated (after data changes),
        // the binding attribute is reparsed so that it can pick out the correct
        // model properties in the context of the changed data.
        // DOM event callbacks need to be able to access this changed data,
        // so we need a single parsedBindings variable (shared by all callbacks
        // associated with this node's bindings) that all the closures can access.
        var parsedBindings;
        function makeValueAccessor(bindingKey) {
            return function () { return parsedBindings[bindingKey] }
        }
        function parsedBindingsAccessor() {
            return parsedBindings;
        }
        
        new ko.dependentObservable(
            function () {
                var evaluatedBindings = (typeof bindings == "function") ? bindings() : bindings;
                parsedBindings = evaluatedBindings || parseBindingAttribute(node.getAttribute(bindingAttributeName), viewModel);
                
                // First run all the inits, so bindings can register for notification on changes
                if (isFirstEvaluation) {
                    for (var bindingKey in parsedBindings) {
                        if (ko.bindingHandlers[bindingKey] && typeof ko.bindingHandlers[bindingKey]["init"] == "function")
                            invokeBindingHandler(ko.bindingHandlers[bindingKey]["init"], node, makeValueAccessor(bindingKey), parsedBindingsAccessor, viewModel);	
                    }                	
                }
                
                // ... then run all the updates, which might trigger changes even on the first evaluation
                for (var bindingKey in parsedBindings) {
                    if (ko.bindingHandlers[bindingKey] && typeof ko.bindingHandlers[bindingKey]["update"] == "function")
                        invokeBindingHandler(ko.bindingHandlers[bindingKey]["update"], node, makeValueAccessor(bindingKey), parsedBindingsAccessor, viewModel);
                }
            },
            null,
            { 'disposeWhenNodeIsRemoved' : node }
        );
        isFirstEvaluation = false;
    };

    ko.applyBindings = function (viewModel, rootNode) {
        if (rootNode && (rootNode.nodeType == undefined))
            throw new Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node (note: this is a breaking change since KO version 1.05)");
        rootNode = rootNode || window.document.body; // Make "rootNode" parameter optional
                
        var elemsWithBindingAttribute = ko.utils.getElementsHavingAttribute(rootNode, defaultBindingAttributeName);
        ko.utils.arrayForEach(elemsWithBindingAttribute, function (element) {
            ko.applyBindingsToNode(element, null, viewModel);
        });
    };
    
    ko.exportSymbol('ko.bindingHandlers', ko.bindingHandlers);
    ko.exportSymbol('ko.applyBindings', ko.applyBindings);
    ko.exportSymbol('ko.applyBindingsToNode', ko.applyBindingsToNode);
})();// For certain common events (currently just 'click'), allow a simplified data-binding syntax
// e.g. click:handler instead of the usual full-length event:{click:handler}
var eventHandlersWithShortcuts = ['click'];
ko.utils.arrayForEach(eventHandlersWithShortcuts, function(eventName) {
    ko.bindingHandlers[eventName] = {
        'init': function(element, valueAccessor, allBindingsAccessor, viewModel) {
            var newValueAccessor = function () {
                var result = {};
                result[eventName] = valueAccessor();
                return result;
            };
            return ko.bindingHandlers['event']['init'].call(this, element, newValueAccessor, allBindingsAccessor, viewModel);
        }
    }	
});


ko.bindingHandlers['event'] = {
    'init' : function (element, valueAccessor, allBindingsAccessor, viewModel) {
        var eventsToHandle = valueAccessor() || {};
        for(var eventNameOutsideClosure in eventsToHandle) {
            (function() {
                var eventName = eventNameOutsideClosure; // Separate variable to be captured by event handler closure
                if (typeof eventName == "string") {
                    ko.utils.registerEventHandler(element, eventName, function (event) {
                        var handlerReturnValue;
                        var handlerFunction = valueAccessor()[eventName];
                        var allBindings = allBindingsAccessor();
                        
                        try { 
                            handlerReturnValue = handlerFunction.apply(viewModel, arguments);                     	
                        } finally {
                            if (handlerReturnValue !== true) { // Normally we want to prevent default action. Developer can override this be explicitly returning true.
                                if (event.preventDefault)
                                    event.preventDefault();
                                else
                                    event.returnValue = false;
                            }
                        }
                        
                        var bubble = allBindings[eventName + 'Bubble'] !== false;
                        if (!bubble) {
                            event.cancelBubble = true;
                            if (event.stopPropagation)
                                event.stopPropagation();
                        }
                    });
                }
            })();
        }
    }
};

ko.bindingHandlers['submit'] = {
    'init': function (element, valueAccessor, allBindingsAccessor, viewModel) {
        if (typeof valueAccessor() != "function")
            throw new Error("The value for a submit binding must be a function to invoke on submit");
        ko.utils.registerEventHandler(element, "submit", function (event) {
            var handlerReturnValue;
            var value = valueAccessor();
            try { handlerReturnValue = value.call(viewModel, element); }
            finally {
                if (handlerReturnValue !== true) { // Normally we want to prevent default action. Developer can override this be explicitly returning true.
                    if (event.preventDefault)
                        event.preventDefault();
                    else
                        event.returnValue = false;
                }
            }
        });
    }
};

ko.bindingHandlers['visible'] = {
    'update': function (element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor());
        var isCurrentlyVisible = !(element.style.display == "none");
        if (value && !isCurrentlyVisible)
            element.style.display = "";
        else if ((!value) && isCurrentlyVisible)
            element.style.display = "none";
    }
}

ko.bindingHandlers['enable'] = {
    'update': function (element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor());
        if (value && element.disabled)
            element.removeAttribute("disabled");
        else if ((!value) && (!element.disabled))
            element.disabled = true;
    }
};

ko.bindingHandlers['disable'] = { 
    'update': function (element, valueAccessor) { 
        ko.bindingHandlers['enable']['update'](element, function() { return !ko.utils.unwrapObservable(valueAccessor()) }); 		
    } 	
};

ko.bindingHandlers['value'] = {
    'init': function (element, valueAccessor, allBindingsAccessor) {    	
        var eventName = allBindingsAccessor()["valueUpdate"] || "change";
        
        // The syntax "after<eventname>" means "run the handler asynchronously after the event"
        // This is useful, for example, to catch "keydown" events after the browser has updated the control
        // (otherwise, ko.selectExtensions.readValue(this) will receive the control's value *before* the key event)
        var handleEventAsynchronously = false;
        if (ko.utils.stringStartsWith(eventName, "after")) {
            handleEventAsynchronously = true;
            eventName = eventName.substring("after".length);
        }
        var runEventHandler = handleEventAsynchronously ? function(handler) { setTimeout(handler, 0) }
                                                        : function(handler) { handler() };
        
        ko.utils.registerEventHandler(element, eventName, function () {
            runEventHandler(function() {
                var modelValue = valueAccessor();
                var elementValue = ko.selectExtensions.readValue(element);
                if (ko.isWriteableObservable(modelValue))
                    modelValue(elementValue);
                else {
                    var allBindings = allBindingsAccessor();
                    if (allBindings['_ko_property_writers'] && allBindings['_ko_property_writers']['value'])
                        allBindings['_ko_property_writers']['value'](elementValue); 
                }
            });
        });
    },
    'update': function (element, valueAccessor) {
        var newValue = ko.utils.unwrapObservable(valueAccessor());
        var elementValue = ko.selectExtensions.readValue(element);
        var valueHasChanged = (newValue != elementValue);
        
        // JavaScript's 0 == "" behavious is unfortunate here as it prevents writing 0 to an empty text box (loose equality suggests the values are the same). 
        // We don't want to do a strict equality comparison as that is more confusing for developers in certain cases, so we specifically special case 0 != "" here.
        if ((newValue === 0) && (elementValue !== 0) && (elementValue !== "0"))
            valueHasChanged = true;
        
        if (valueHasChanged) {
            var applyValueAction = function () { ko.selectExtensions.writeValue(element, newValue); };
            applyValueAction();

            // Workaround for IE6 bug: It won't reliably apply values to SELECT nodes during the same execution thread
            // right after you've changed the set of OPTION nodes on it. So for that node type, we'll schedule a second thread
            // to apply the value as well.
            var alsoApplyAsynchronously = element.tagName == "SELECT";
            if (alsoApplyAsynchronously)
                setTimeout(applyValueAction, 0);
        }
        
        // For SELECT nodes, you're not allowed to have a model value that disagrees with the UI selection, so if there is a
        // difference, treat it as a change that should be written back to the model
        if (element.tagName == "SELECT") {
            elementValue = ko.selectExtensions.readValue(element);
            if(elementValue !== newValue)
                ko.utils.triggerEvent(element, "change");
        }
    }
};

ko.bindingHandlers['options'] = {
    'update': function (element, valueAccessor, allBindingsAccessor) {
        if (element.tagName != "SELECT")
            throw new Error("options binding applies only to SELECT elements");

        var previousSelectedValues = ko.utils.arrayMap(ko.utils.arrayFilter(element.childNodes, function (node) {
            return node.tagName && node.tagName == "OPTION" && node.selected;
        }), function (node) {
            return ko.selectExtensions.readValue(node) || node.innerText || node.textContent;
        });
        var previousScrollTop = element.scrollTop;

        var value = ko.utils.unwrapObservable(valueAccessor());
        var selectedValue = element.value;
        ko.utils.emptyDomNode(element);

        if (value) {
            var allBindings = allBindingsAccessor();
            if (typeof value.length != "number")
                value = [value];
            if (allBindings['optionsCaption']) {
                var option = document.createElement("OPTION");
                option.innerHTML = allBindings['optionsCaption'];
                ko.selectExtensions.writeValue(option, undefined);
                element.appendChild(option);
            }
            for (var i = 0, j = value.length; i < j; i++) {
                var option = document.createElement("OPTION");
                var optionValue = typeof allBindings['optionsValue'] == "string" ? value[i][allBindings['optionsValue']] : value[i];
                
                // Pick some text to appear in the drop-down list for this data value
                var optionsTextValue = allBindings['optionsText'];
                if (typeof optionsTextValue == "function")
                    optionText = optionsTextValue(value[i]); // Given a function; run it against the data value
                else if (typeof optionsTextValue == "string")
                    optionText = value[i][optionsTextValue]; // Given a string; treat it as a property name on the data value
                else
                    optionText = optionValue;				 // Given no optionsText arg; use the data value itself
                    
                optionValue = ko.utils.unwrapObservable(optionValue);
                optionText = ko.utils.unwrapObservable(optionText);
                ko.selectExtensions.writeValue(option, optionValue);
                option.innerHTML = optionText.toString();
                element.appendChild(option);
            }

            // IE6 doesn't like us to assign selection to OPTION nodes before they're added to the document.
            // That's why we first added them without selection. Now it's time to set the selection.
            var newOptions = element.getElementsByTagName("OPTION");
            var countSelectionsRetained = 0;
            for (var i = 0, j = newOptions.length; i < j; i++) {
                if (ko.utils.arrayIndexOf(previousSelectedValues, ko.selectExtensions.readValue(newOptions[i])) >= 0) {
                    ko.utils.setOptionNodeSelectionState(newOptions[i], true);
                    countSelectionsRetained++;
                }
            }
            
            if (previousScrollTop)
                element.scrollTop = previousScrollTop;
        }
    }
};
ko.bindingHandlers['options'].optionValueDomDataKey = '__ko.bindingHandlers.options.optionValueDomData__';

ko.bindingHandlers['selectedOptions'] = {
    getSelectedValuesFromSelectNode: function (selectNode) {
        var result = [];
        var nodes = selectNode.childNodes;
        for (var i = 0, j = nodes.length; i < j; i++) {
            var node = nodes[i];
            if ((node.tagName == "OPTION") && node.selected)
                result.push(ko.selectExtensions.readValue(node));
        }
        return result;
    },
    'init': function (element, valueAccessor, allBindingsAccessor) {
        ko.utils.registerEventHandler(element, "change", function () { 
            var value = valueAccessor();
            if (ko.isWriteableObservable(value))
                value(ko.bindingHandlers['selectedOptions'].getSelectedValuesFromSelectNode(this));
            else {
                var allBindings = allBindingsAccessor();
                if (allBindings['_ko_property_writers'] && allBindings['_ko_property_writers']['value'])
                    allBindings['_ko_property_writers']['value'](ko.bindingHandlers['selectedOptions'].getSelectedValuesFromSelectNode(this));
            }
        });    	
    },
    'update': function (element, valueAccessor) {
        if (element.tagName != "SELECT")
            throw new Error("values binding applies only to SELECT elements");

        var newValue = ko.utils.unwrapObservable(valueAccessor());
        if (newValue && typeof newValue.length == "number") {
            var nodes = element.childNodes;
            for (var i = 0, j = nodes.length; i < j; i++) {
                var node = nodes[i];
                if (node.tagName == "OPTION")
                    ko.utils.setOptionNodeSelectionState(node, ko.utils.arrayIndexOf(newValue, ko.selectExtensions.readValue(node)) >= 0);
            }
        }
    }
};

ko.bindingHandlers['text'] = {
    'update': function (element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor());
        if ((value === null) || (value === undefined))
            value = "";
        typeof element.innerText == "string" ? element.innerText = value
                                             : element.textContent = value;
    }
};

ko.bindingHandlers['html'] = {
    'update': function (element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor());
        if ((value === null) || (value === undefined))
            value = "";
        element.innerHTML = value;
    }
};

ko.bindingHandlers['css'] = {
    'update': function (element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor() || {});
        for (var className in value) {
            if (typeof className == "string") {
                var shouldHaveClass = ko.utils.unwrapObservable(value[className]);
                ko.utils.toggleDomNodeCssClass(element, className, shouldHaveClass);
            }
        }
    }
};

ko.bindingHandlers['style'] = {
    'update': function (element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor() || {});
        for (var styleName in value) {
            if (typeof styleName == "string") {
                var styleValue = ko.utils.unwrapObservable(value[styleName]);
                element.style[styleName] = styleValue || ""; // Empty string removes the value, whereas null/undefined have no effect
            }
        }
    }
};

ko.bindingHandlers['uniqueName'] = {
    'init': function (element, valueAccessor) {
        if (valueAccessor()) {
            element.name = "ko_unique_" + (++ko.bindingHandlers['uniqueName'].currentIndex);

            // Workaround IE 6 issue - http://www.matts411.com/post/setting_the_name_attribute_in_ie_dom/
            if (ko.utils.isIe6)
                element.mergeAttributes(document.createElement("<input name='" + element.name + "'/>"), false);
        }
    }
};
ko.bindingHandlers['uniqueName'].currentIndex = 0;

ko.bindingHandlers['checked'] = {
    'init': function (element, valueAccessor, allBindingsAccessor) {
        var updateHandler = function() {            
            var valueToWrite;
            if (element.type == "checkbox") {
                valueToWrite = element.checked;
            } else if ((element.type == "radio") && (element.checked)) {
                valueToWrite = element.value;
            } else {
                return; // "checked" binding only responds to checkboxes and selected radio buttons
            }
            
            var modelValue = valueAccessor();                 
            if ((element.type == "checkbox") && (ko.utils.unwrapObservable(modelValue) instanceof Array)) {
                // For checkboxes bound to an array, we add/remove the checkbox value to that array
                // This works for both observable and non-observable arrays
                var existingEntryIndex = ko.utils.arrayIndexOf(ko.utils.unwrapObservable(modelValue), element.value);
                if (element.checked && (existingEntryIndex < 0))
                    modelValue.push(element.value);
                else if ((!element.checked) && (existingEntryIndex >= 0))
                    modelValue.splice(existingEntryIndex, 1);
            } else if (ko.isWriteableObservable(modelValue)) {            	
                if (modelValue() !== valueToWrite) { // Suppress repeated events when there's nothing new to notify (some browsers raise them)
                    modelValue(valueToWrite);
                }
            } else {
                var allBindings = allBindingsAccessor();
                if (allBindings['_ko_property_writers'] && allBindings['_ko_property_writers']['checked']) {
                    allBindings['_ko_property_writers']['checked'](valueToWrite);
                }
            }
        };
        ko.utils.registerEventHandler(element, "click", updateHandler);

        // IE 6 won't allow radio buttons to be selected unless they have a name
        if ((element.type == "radio") && !element.name)
            ko.bindingHandlers['uniqueName']['init'](element, function() { return true });
    },
    'update': function (element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor());
        
        if (element.type == "checkbox") {        	
            if (value instanceof Array) {
                // When bound to an array, the checkbox being checked represents its value being present in that array
                element.checked = ko.utils.arrayIndexOf(value, element.value) >= 0;
            } else {
                // When bound to anything other value (not an array), the checkbox being checked represents the value being trueish
                element.checked = value;	
            }            
            
            // Workaround for IE 6 bug - it fails to apply checked state to dynamically-created checkboxes if you merely say "element.checked = true"
            if (value && ko.utils.isIe6) 
                element.mergeAttributes(document.createElement("<input type='checkbox' checked='checked' />"), false);
        } else if (element.type == "radio") {
            element.checked = (element.value == value);
            
            // Workaround for IE 6/7 bug - it fails to apply checked state to dynamically-created radio buttons if you merely say "element.checked = true"
            if ((element.value == value) && (ko.utils.isIe6 || ko.utils.isIe7))
                element.mergeAttributes(document.createElement("<input type='radio' checked='checked' />"), false);
        }
    }
};

ko.bindingHandlers['attr'] = {
    update: function(element, valueAccessor, allBindingsAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor()) || {};
        for (var attrName in value) {
            if (typeof attrName == "string") {
                var attrValue = ko.utils.unwrapObservable(value[attrName]);
                
                // To cover cases like "attr: { checked:someProp }", we want to remove the attribute entirely 
                // when someProp is a "no value"-like value (strictly null, false, or undefined)
                // (because the absence of the "checked" attr is how to mark an element as not checked, etc.)                
                if ((attrValue === false) || (attrValue === null) || (attrValue === undefined))
                    element.removeAttribute(attrName);
                else 
                    element.setAttribute(attrName, attrValue.toString());
            }
        }
    }
};
ko.templateEngine = function () {
    this['renderTemplate'] = function (templateName, data, options) {
        throw "Override renderTemplate in your ko.templateEngine subclass";
    },
    this['isTemplateRewritten'] = function (templateName) {
        throw "Override isTemplateRewritten in your ko.templateEngine subclass";
    },
    this['rewriteTemplate'] = function (templateName, rewriterCallback) {
        throw "Override rewriteTemplate in your ko.templateEngine subclass";
    },
    this['createJavaScriptEvaluatorBlock'] = function (script) {
        throw "Override createJavaScriptEvaluatorBlock in your ko.templateEngine subclass";
    }
};

ko.exportSymbol('ko.templateEngine', ko.templateEngine);

ko.templateRewriting = (function () {
    //tpetmezov 20110520 fixes for regEx
    //var memoizeBindingAttributeSyntaxRegex = /(<[a-z]+\d*(\s+(?!data-bind=)[a-z0-9]+(=(\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind=(["'])([\s\S]*?)\5/gi;
    var memoizeBindingAttributeSyntaxRegex = /(<.+\d*(\s+(?!data-bind=)[a-z0-9]+(=(\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind=(["'])([\s\S]*?)\5/gi;
    return {
        ensureTemplateIsRewritten: function (template, templateEngine) {
            if (!templateEngine['isTemplateRewritten'](template))
                templateEngine['rewriteTemplate'](template, function (htmlString) {
                    return ko.templateRewriting.memoizeBindingAttributeSyntax(htmlString, templateEngine);
                });
        },

        memoizeBindingAttributeSyntax: function (htmlString, templateEngine) {
            return htmlString.replace(memoizeBindingAttributeSyntaxRegex, function () {
                var tagToRetain = arguments[1];
                var dataBindAttributeValue = arguments[6];

                dataBindAttributeValue = ko.jsonExpressionRewriting.insertPropertyAccessorsIntoJson(dataBindAttributeValue);

                // For no obvious reason, Opera fails to evaluate dataBindAttributeValue unless it's wrapped in an additional anonymous function,
                // even though Opera's built-in debugger can evaluate it anyway. No other browser requires this extra indirection.
                var applyBindingsToNextSiblingScript = "ko.templateRewriting.applyMemoizedBindingsToNextSibling(function() { \
                    return (function() { return { " + dataBindAttributeValue + " } })() \
                })";
                return templateEngine['createJavaScriptEvaluatorBlock'](applyBindingsToNextSiblingScript) + tagToRetain;
            });
        },

        applyMemoizedBindingsToNextSibling: function (bindings) {
            return ko.memoization.memoize(function (domNode, viewModel) {
                if (domNode.nextSibling)
                    ko.applyBindingsToNode(domNode.nextSibling, bindings, viewModel);
            });
        }
    }
})();

ko.exportSymbol('ko.templateRewriting', ko.templateRewriting);
ko.exportSymbol('ko.templateRewriting.applyMemoizedBindingsToNextSibling', ko.templateRewriting.applyMemoizedBindingsToNextSibling); // Exported only because it has to be referenced by string lookup from within rewritten template

(function () {
    var _templateEngine;
    ko.setTemplateEngine = function (templateEngine) {
        if ((templateEngine != undefined) && !(templateEngine instanceof ko.templateEngine))
            throw "templateEngine must inherit from ko.templateEngine";
        _templateEngine = templateEngine;
    }

    function getFirstNodeFromPossibleArray(nodeOrNodeArray) {
        return nodeOrNodeArray.nodeType ? nodeOrNodeArray
                                        : nodeOrNodeArray.length > 0 ? nodeOrNodeArray[0]
                                        : null;
    }

    function executeTemplate(targetNodeOrNodeArray, renderMode, template, data, options) {
        var dataForTemplate = ko.utils.unwrapObservable(data);

        options = options || {};
        var templateEngineToUse = (options['templateEngine'] || _templateEngine);
        ko.templateRewriting.ensureTemplateIsRewritten(template, templateEngineToUse);
        var renderedNodesArray = templateEngineToUse['renderTemplate'](template, dataForTemplate, options);

        // Loosely check result is an array of DOM nodes
        if ((typeof renderedNodesArray.length != "number") || (renderedNodesArray.length > 0 && typeof renderedNodesArray[0].nodeType != "number"))
            throw "Template engine must return an array of DOM nodes";

        if (renderedNodesArray)
            ko.utils.arrayForEach(renderedNodesArray, function (renderedNode) {
                ko.memoization.unmemoizeDomNodeAndDescendants(renderedNode, [data]);
            });

        switch (renderMode) {
            case "replaceChildren": ko.utils.setDomNodeChildren(targetNodeOrNodeArray, renderedNodesArray); break;
            case "replaceNode": ko.utils.replaceDomNodes(targetNodeOrNodeArray, renderedNodesArray); break;
            case "ignoreTargetNode": break;
            default: throw new Error("Unknown renderMode: " + renderMode);
        }

        if (options['afterRender'])
            options['afterRender'](renderedNodesArray, data);

        return renderedNodesArray;
    }

    ko.renderTemplate = function (template, data, options, targetNodeOrNodeArray, renderMode) {
        options = options || {};
        if ((options['templateEngine'] || _templateEngine) == undefined)
            throw "Set a template engine before calling renderTemplate";
        renderMode = renderMode || "replaceChildren";

        if (targetNodeOrNodeArray) {
            var firstTargetNode = getFirstNodeFromPossibleArray(targetNodeOrNodeArray);
            
            var whenToDispose = function () { return (!firstTargetNode) || !ko.utils.domNodeIsAttachedToDocument(firstTargetNode); }; // Passive disposal (on next evaluation)
            var activelyDisposeWhenNodeIsRemoved = (firstTargetNode && renderMode == "replaceNode") ? firstTargetNode.parentNode : firstTargetNode;
            
            return new ko.dependentObservable( // So the DOM is automatically updated when any dependency changes                
                function () {
                    // Support selecting template as a function of the data being rendered
                    var templateName = typeof(template) == 'function' ? template(data) : template; 

                    var renderedNodesArray = executeTemplate(targetNodeOrNodeArray, renderMode, templateName, data, options);
                    if (renderMode == "replaceNode") {
                        targetNodeOrNodeArray = renderedNodesArray;
                        firstTargetNode = getFirstNodeFromPossibleArray(targetNodeOrNodeArray);
                    }
                },
                null,
                { 'disposeWhen': whenToDispose, 'disposeWhenNodeIsRemoved': activelyDisposeWhenNodeIsRemoved }
            );
        } else {
            // We don't yet have a DOM node to evaluate, so use a memo and render the template later when there is a DOM node
            return ko.memoization.memoize(function (domNode) {
                ko.renderTemplate(template, data, options, domNode, "replaceNode");
            });
        }
    };

    ko.renderTemplateForEach = function (template, arrayOrObservableArray, options, targetNode) {
        return new ko.dependentObservable(function () {
            var unwrappedArray = ko.utils.unwrapObservable(arrayOrObservableArray) || [];
            if (typeof unwrappedArray.length == "undefined") // Coerce single value into array
                unwrappedArray = [unwrappedArray];

            // Filter out any entries marked as destroyed
            var filteredArray = ko.utils.arrayFilter(unwrappedArray, function(item) { 
                return options['includeDestroyed'] || !item['_destroy'];
            });

            ko.utils.setDomNodeChildrenFromArrayMapping(targetNode, filteredArray, function (arrayValue) {
                // Support selecting template as a function of the data being rendered
                var templateName = typeof(template) == 'function' ? template(arrayValue) : template;
                
                return executeTemplate(null, "ignoreTargetNode", templateName, arrayValue, options);
            }, options);
        }, null, { 'disposeWhenNodeIsRemoved': targetNode });
    };

    var templateSubscriptionDomDataKey = '__ko__templateSubscriptionDomDataKey__';
    function disposeOldSubscriptionAndStoreNewOne(element, newSubscription) {
        var oldSubscription = ko.utils.domData.get(element, templateSubscriptionDomDataKey);
        if (oldSubscription && (typeof(oldSubscription.dispose) == 'function'))
            oldSubscription.dispose();
        ko.utils.domData.set(element, templateSubscriptionDomDataKey, newSubscription);
    }
    
    ko.bindingHandlers['template'] = {
        'update': function (element, valueAccessor, allBindingsAccessor, viewModel) {
            var bindingValue = ko.utils.unwrapObservable(valueAccessor());
            var templateName = typeof bindingValue == "string" ? bindingValue : bindingValue.name;
            
            var templateSubscription;
            if (typeof bindingValue['foreach'] != "undefined") {
                // Render once for each data point
                templateSubscription = ko.renderTemplateForEach(templateName, bindingValue['foreach'] || [], { 'templateOptions': bindingValue['templateOptions'], 'afterAdd': bindingValue['afterAdd'], 'beforeRemove': bindingValue['beforeRemove'], 'includeDestroyed': bindingValue['includeDestroyed'], 'afterRender': bindingValue['afterRender'] }, element);
            }
            else {
                // Render once for this single data point (or use the viewModel if no data was provided)
                var templateData = bindingValue['data'];
                templateSubscription = ko.renderTemplate(templateName, typeof templateData == "undefined" ? viewModel : templateData, { 'templateOptions': bindingValue['templateOptions'], 'afterRender': bindingValue['afterRender'] }, element);
            }
            
            // It only makes sense to have a single template subscription per element (otherwise which one should have its output displayed?)
            disposeOldSubscriptionAndStoreNewOne(element, templateSubscription);
        }
    };
})();

ko.exportSymbol('ko.setTemplateEngine', ko.setTemplateEngine);
ko.exportSymbol('ko.renderTemplate', ko.renderTemplate);

(function () {
    // Simple calculation based on Levenshtein distance.
    function calculateEditDistanceMatrix(oldArray, newArray, maxAllowedDistance) {
        var distances = [];
        for (var i = 0; i <= newArray.length; i++)
            distances[i] = [];

        // Top row - transform old array into empty array via deletions
        for (var i = 0, j = Math.min(oldArray.length, maxAllowedDistance); i <= j; i++)
            distances[0][i] = i;

        // Left row - transform empty array into new array via additions
        for (var i = 1, j = Math.min(newArray.length, maxAllowedDistance); i <= j; i++) {
            distances[i][0] = i;
        }

        // Fill out the body of the array
        var oldIndex, oldIndexMax = oldArray.length, newIndex, newIndexMax = newArray.length;
        var distanceViaAddition, distanceViaDeletion;
        for (oldIndex = 1; oldIndex <= oldIndexMax; oldIndex++) {
            var newIndexMinForRow = Math.max(1, oldIndex - maxAllowedDistance);
            var newIndexMaxForRow = Math.min(newIndexMax, oldIndex + maxAllowedDistance);
            for (newIndex = newIndexMinForRow; newIndex <= newIndexMaxForRow; newIndex++) {
                if (oldArray[oldIndex - 1] === newArray[newIndex - 1])
                    distances[newIndex][oldIndex] = distances[newIndex - 1][oldIndex - 1];
                else {
                    var northDistance = distances[newIndex - 1][oldIndex] === undefined ? Number.MAX_VALUE : distances[newIndex - 1][oldIndex] + 1;
                    var westDistance = distances[newIndex][oldIndex - 1] === undefined ? Number.MAX_VALUE : distances[newIndex][oldIndex - 1] + 1;
                    distances[newIndex][oldIndex] = Math.min(northDistance, westDistance);
                }
            }
        }

        return distances;
    }

    function findEditScriptFromEditDistanceMatrix(editDistanceMatrix, oldArray, newArray) {
        var oldIndex = oldArray.length;
        var newIndex = newArray.length;
        var editScript = [];
        var maxDistance = editDistanceMatrix[newIndex][oldIndex];
        if (maxDistance === undefined)
            return null; // maxAllowedDistance must be too small
        while ((oldIndex > 0) || (newIndex > 0)) {
            var me = editDistanceMatrix[newIndex][oldIndex];
            var distanceViaAdd = (newIndex > 0) ? editDistanceMatrix[newIndex - 1][oldIndex] : maxDistance + 1;
            var distanceViaDelete = (oldIndex > 0) ? editDistanceMatrix[newIndex][oldIndex - 1] : maxDistance + 1;
            var distanceViaRetain = (newIndex > 0) && (oldIndex > 0) ? editDistanceMatrix[newIndex - 1][oldIndex - 1] : maxDistance + 1;
            if ((distanceViaAdd === undefined) || (distanceViaAdd < me - 1)) distanceViaAdd = maxDistance + 1;
            if ((distanceViaDelete === undefined) || (distanceViaDelete < me - 1)) distanceViaDelete = maxDistance + 1;
            if (distanceViaRetain < me - 1) distanceViaRetain = maxDistance + 1;

            if ((distanceViaAdd <= distanceViaDelete) && (distanceViaAdd < distanceViaRetain)) {
                editScript.push({ status: "added", value: newArray[newIndex - 1] });
                newIndex--;
            } else if ((distanceViaDelete < distanceViaAdd) && (distanceViaDelete < distanceViaRetain)) {
                editScript.push({ status: "deleted", value: oldArray[oldIndex - 1] });
                oldIndex--;
            } else {
                editScript.push({ status: "retained", value: oldArray[oldIndex - 1] });
                newIndex--;
                oldIndex--;
            }
        }
        return editScript.reverse();
    }

    ko.utils.compareArrays = function (oldArray, newArray, maxEditsToConsider) {
        if (maxEditsToConsider === undefined) {
            return ko.utils.compareArrays(oldArray, newArray, 1)                 // First consider likely case where there is at most one edit (very fast)
                || ko.utils.compareArrays(oldArray, newArray, 10)                // If that fails, account for a fair number of changes while still being fast
                || ko.utils.compareArrays(oldArray, newArray, Number.MAX_VALUE); // Ultimately give the right answer, even though it may take a long time
        } else {
            oldArray = oldArray || [];
            newArray = newArray || [];
            var editDistanceMatrix = calculateEditDistanceMatrix(oldArray, newArray, maxEditsToConsider);
            return findEditScriptFromEditDistanceMatrix(editDistanceMatrix, oldArray, newArray);
        }
    };    
})();

ko.exportSymbol('ko.utils.compareArrays', ko.utils.compareArrays);

(function () {
    // Objective:
    // * Given an input array, a container DOM node, and a function from array elements to arrays of DOM nodes,
    //   map the array elements to arrays of DOM nodes, concatenate together all these arrays, and use them to populate the container DOM node
    // * Next time we're given the same combination of things (with the array possibly having mutated), update the container DOM node
    //   so that its children is again the concatenation of the mappings of the array elements, but don't re-map any array elements that we
    //   previously mapped - retain those nodes, and just insert/delete other ones

    function mapNodeAndRefreshWhenChanged(containerNode, mapping, valueToMap) {
        // Map this array value inside a dependentObservable so we re-map when any dependency changes
        var mappedNodes = [];
        var dependentObservable = ko.dependentObservable(function() {
            var newMappedNodes = mapping(valueToMap) || [];
            
            // On subsequent evaluations, just replace the previously-inserted DOM nodes
            if (mappedNodes.length > 0)
                ko.utils.replaceDomNodes(mappedNodes, newMappedNodes);
            
            // Replace the contents of the mappedNodes array, thereby updating the record
            // of which nodes would be deleted if valueToMap was itself later removed
            mappedNodes.splice(0, mappedNodes.length);
            ko.utils.arrayPushAll(mappedNodes, newMappedNodes);
        }, null, { 'disposeWhenNodeIsRemoved': containerNode, 'disposeWhen': function() { return (mappedNodes.length == 0) || !ko.utils.domNodeIsAttachedToDocument(mappedNodes[0]) } });
        return { mappedNodes : mappedNodes, dependentObservable : dependentObservable };
    }

    ko.utils.setDomNodeChildrenFromArrayMapping = function (domNode, array, mapping, options) {
        // Compare the provided array against the previous one
        array = array || [];
        options = options || {};
        var isFirstExecution = ko.utils.domData.get(domNode, "setDomNodeChildrenFromArrayMapping_lastMappingResult") === undefined;
        var lastMappingResult = ko.utils.domData.get(domNode, "setDomNodeChildrenFromArrayMapping_lastMappingResult") || [];
        var lastArray = ko.utils.arrayMap(lastMappingResult, function (x) { return x.arrayEntry; });
        var editScript = ko.utils.compareArrays(lastArray, array);

        // Build the new mapping result
        var newMappingResult = [];
        var lastMappingResultIndex = 0;
        var nodesToDelete = [];
        var nodesAdded = [];
        var insertAfterNode = null;
        for (var i = 0, j = editScript.length; i < j; i++) {
            switch (editScript[i].status) {
                case "retained":
                    // Just keep the information - don't touch the nodes
                    var dataToRetain = lastMappingResult[lastMappingResultIndex];
                    newMappingResult.push(dataToRetain);
                    if (dataToRetain.domNodes.length > 0)
                        insertAfterNode = dataToRetain.domNodes[dataToRetain.domNodes.length - 1];
                    lastMappingResultIndex++;
                    break;

                case "deleted":
                    // Stop tracking changes to the mapping for these nodes
                    lastMappingResult[lastMappingResultIndex].dependentObservable.dispose();
                
                    // Queue these nodes for later removal
                    ko.utils.arrayForEach(lastMappingResult[lastMappingResultIndex].domNodes, function (node) {
                        nodesToDelete.push({
                          element: node,
                          index: i,
                          value: editScript[i].value
                        });
                        insertAfterNode = node;
                    });
                    lastMappingResultIndex++;
                    break;

                case "added": 
                    var mapData = mapNodeAndRefreshWhenChanged(domNode, mapping, editScript[i].value);
                    var mappedNodes = mapData.mappedNodes;
                    
                    // On the first evaluation, insert the nodes at the current insertion point
                    newMappingResult.push({ arrayEntry: editScript[i].value, domNodes: mappedNodes, dependentObservable: mapData.dependentObservable });
                    for (var nodeIndex = 0, nodeIndexMax = mappedNodes.length; nodeIndex < nodeIndexMax; nodeIndex++) {
                        var node = mappedNodes[nodeIndex];
                        nodesAdded.push({
                          element: node,
                          index: i,
                          value: editScript[i].value
                        });
                        if (insertAfterNode == null) {
                            // Insert at beginning
                            if (domNode.firstChild)
                                domNode.insertBefore(node, domNode.firstChild);
                            else
                                domNode.appendChild(node);
                        } else {
                            // Insert after insertion point
                            if (insertAfterNode.nextSibling)
                                domNode.insertBefore(node, insertAfterNode.nextSibling);
                            else
                                domNode.appendChild(node);
                        }
                        insertAfterNode = node;
                    }    		
                    break;
            }
        }
        
        ko.utils.arrayForEach(nodesToDelete, function (node) { ko.cleanNode(node.element) });

        var invokedBeforeRemoveCallback = false;
        if (!isFirstExecution) {
            if (options['afterAdd']) {
                for (var i = 0; i < nodesAdded.length; i++)
                    options['afterAdd'](nodesAdded[i].element, nodesAdded[i].index, nodesAdded[i].value);
            }
            if (options['beforeRemove']) {
                for (var i = 0; i < nodesToDelete.length; i++)
                    options['beforeRemove'](nodesToDelete[i].element, nodesToDelete[i].index, nodesToDelete[i].value);
                invokedBeforeRemoveCallback = true;
            }
        }
        if (!invokedBeforeRemoveCallback)
            ko.utils.arrayForEach(nodesToDelete, function (node) {
                if (node.element.parentNode)
                    node.element.parentNode.removeChild(node.element);
            });

        // Store a copy of the array items we just considered so we can difference it next time
        ko.utils.domData.set(domNode, "setDomNodeChildrenFromArrayMapping_lastMappingResult", newMappingResult);
    }
})();

ko.exportSymbol('ko.utils.setDomNodeChildrenFromArrayMapping', ko.utils.setDomNodeChildrenFromArrayMapping);

ko.jqueryTmplTemplateEngine = function () {
    // Detect which version of jquery-tmpl you're using. Unfortunately jquery-tmpl 
    // doesn't expose a version number, so we have to infer it.
    this.jQueryTmplVersion = (function() {        
        if ((typeof(jQuery) == "undefined") || !jQuery['tmpl'])
            return 0;
        // Since it exposes no official version number, we use our own numbering system. To be updated as jquery-tmpl evolves.
        if (jQuery['tmpl']['tag']) {
            if (jQuery['tmpl']['tag']['tmpl'] && jQuery['tmpl']['tag']['tmpl']['open']) {
                if (jQuery['tmpl']['tag']['tmpl']['open'].toString().indexOf('__') >= 0) {
                    return 3; // Since 1.0.0pre, custom tags should append markup to an array called "__"
                }
            }
            return 2; // Prior to 1.0.0pre, custom tags should append markup to an array called "_"
        }
        return 1; // Very old version doesn't have an extensible tag system
    })();

    this['getTemplateNode'] = function (template) {
        var templateNode = document.getElementById(template);
        if (templateNode == null)
            throw new Error("Cannot find template with ID=" + template);
        return templateNode;
    }

    // These two only needed for jquery-tmpl v1
    var aposMarker = "__ko_apos__";
    var aposRegex = new RegExp(aposMarker, "g");
    
    this['renderTemplate'] = function (templateId, data, options) {
        options = options || {};
        if (this.jQueryTmplVersion == 0)
            throw new Error("jquery.tmpl not detected.\nTo use KO's default template engine, reference jQuery and jquery.tmpl. See Knockout installation documentation for more details.");
        
        if (this.jQueryTmplVersion == 1) {    	
            // jquery.tmpl v1 doesn't like it if the template returns just text content or nothing - it only likes you to return DOM nodes.
            // To make things more flexible, we can wrap the whole template in a <script> node so that jquery.tmpl just processes it as
            // text and doesn't try to parse the output. Then, since jquery.tmpl has jQuery as a dependency anyway, we can use jQuery to
            // parse that text into a document fragment using jQuery.clean().        
            var templateTextInWrapper = "<script type=\"text/html\">" + this['getTemplateNode'](templateId).text + "</script>";
            var renderedMarkupInWrapper = jQuery['tmpl'](templateTextInWrapper, data);
            var renderedMarkup = renderedMarkupInWrapper[0].text.replace(aposRegex, "'");;
            return jQuery['clean']([renderedMarkup], document);
        }
        
        // It's easier with jquery.tmpl v2 and later - it handles any DOM structure
        if (!(templateId in jQuery['template'])) {
            // Precache a precompiled version of this template (don't want to reparse on every render)
            var templateText = this['getTemplateNode'](templateId).text;
            jQuery['template'](templateId, templateText);
        }        
        data = [data]; // Prewrap the data in an array to stop jquery.tmpl from trying to unwrap any arrays
        
        var resultNodes = jQuery['tmpl'](templateId, data, options['templateOptions']);
        resultNodes['appendTo'](document.createElement("div")); // Using "appendTo" forces jQuery/jQuery.tmpl to perform necessary cleanup work
        jQuery['fragments'] = {}; // Clear jQuery's fragment cache to avoid a memory leak after a large number of template renders
        return resultNodes; 
    },

    this['isTemplateRewritten'] = function (templateId) {
        // It must already be rewritten if we've already got a cached version of it
        // (this optimisation helps on IE < 9, because it greatly reduces the number of getElementById calls)
        if (templateId in jQuery['template'])
            return true;
        
        return this['getTemplateNode'](templateId).isRewritten === true;
    },

    this['rewriteTemplate'] = function (template, rewriterCallback) {
        var templateNode = this['getTemplateNode'](template);
        var rewritten = rewriterCallback(templateNode.text);     
        
        if (this.jQueryTmplVersion == 1) {
            // jquery.tmpl v1 falls over if you use single-quotes, so replace these with a temporary marker for template rendering, 
            // and then replace back after the template was rendered. This is slightly complicated by the fact that we must not interfere
            // with any code blocks - only replace apos characters outside code blocks.
            rewritten = ko.utils.stringTrim(rewritten);
            rewritten = rewritten.replace(/([\s\S]*?)(\${[\s\S]*?}|{{[\=a-z][\s\S]*?}}|$)/g, function(match) {
                // Called for each non-code-block followed by a code block (or end of template)
                var nonCodeSnippet = arguments[1];
                var codeSnippet = arguments[2];
                return nonCodeSnippet.replace(/\'/g, aposMarker) + codeSnippet;
            });         	
        }
        
        templateNode.text = rewritten;
        templateNode.isRewritten = true;
    },

    this['createJavaScriptEvaluatorBlock'] = function (script) {
        if (this.jQueryTmplVersion == 1)
            return "{{= " + script + "}}";
            
        // From v2, jquery-tmpl does some parameter parsing that fails on nontrivial expressions.
        // Prevent it from messing with the code by wrapping it in a further function.
        return "{{ko_code ((function() { return " + script + " })()) }}";
    },

    this.addTemplate = function (templateName, templateMarkup) {
        document.write("<script type='text/html' id='" + templateName + "'>" + templateMarkup + "</script>");
    }
    ko.exportProperty(this, 'addTemplate', this.addTemplate);
    
    if (this.jQueryTmplVersion > 1) {
        jQuery['tmpl']['tag']['ko_code'] = {
            open: (this.jQueryTmplVersion < 3 ? "_" : "__") + ".push($1 || '');"
        };
    }    
};

ko.jqueryTmplTemplateEngine.prototype = new ko.templateEngine();

// Use this one by default
ko.setTemplateEngine(new ko.jqueryTmplTemplateEngine());

ko.exportSymbol('ko.jqueryTmplTemplateEngine', ko.jqueryTmplTemplateEngine);})(window);                  

// Knockout Mapping plugin v1.0pre
// (c) 2011 Steven Sanderson, Roy Jacobs - http://knockoutjs.com/
// License: Ms-Pl (http://www.opensource.org/licenses/ms-pl.html)

ko.exportSymbol = function (q, u) { for (var i = q.split("."), r = window, o = 0; o < i.length - 1; o++) r = r[i[o]]; r[i[i.length - 1]] = u }; ko.exportProperty = function (q, u, i) { q[u] = i };
(function () {
    function q(a) { if (a && typeof a === "object" && a.constructor == (new Date).constructor) return "date"; return typeof a } function u() { ko.dependentObservable = function (a, b, c) { c = c || {}; c.deferEvaluation = true; a = new x(a, b, c); a.__ko_proto__ = x; return a } } function i(a, b, c, d, e, s) {
        var h = ko.utils.unwrapObservable(b) instanceof Array; if (ko.mapping.isMapped(a)) c = ko.utils.unwrapObservable(a)[l]; d = d || new A; if (d.get(b)) return a; e = e || ""; if (h) {
            s = []; var g = function (f) { return f }; if (c[e] && c[e].key) g = c[e].key; if (!ko.isObservable(a)) {
                a =
ko.observableArray([]); a.mappedRemove = function (f) { var j = typeof f == "function" ? f : function (k) { return k === g(f) }; return a.remove(function (k) { return j(g(k)) }) }; a.mappedRemoveAll = function (f) { var j = v(f, g); return a.remove(function (k) { return ko.utils.arrayIndexOf(j, g(k)) != -1 }) }; a.mappedDestroy = function (f) { var j = typeof f == "function" ? f : function (k) { return k === g(f) }; return a.destroy(function (k) { return j(g(k)) }) }; a.mappedDestroyAll = function (f) {
    var j = v(f, g); return a.destroy(function (k) {
        return ko.utils.arrayIndexOf(j,
g(k)) != -1
    })
}; a.mappedIndexOf = function (f) { var j = v(a(), g); f = g(f); return ko.utils.arrayIndexOf(j, f) } 
            } h = v(ko.utils.unwrapObservable(a), g).sort(); var p = v(b, g).sort(); h = ko.utils.compareArrays(h, p); p = []; for (var y = 0, D = h.length; y < D; y++) {
                var t = h[y], m; switch (t.status) {
                    case "added": var n = o(ko.utils.unwrapObservable(b), t.value, g); m = ko.utils.unwrapObservable(i(undefined, n, c, d, e, a)); n = ko.utils.arrayIndexOf(ko.utils.unwrapObservable(b), n); p[n] = m; break; case "retained": n = o(ko.utils.unwrapObservable(b), t.value, g); m =
o(a, t.value, g); i(m, n, c, d, e, a); n = ko.utils.arrayIndexOf(ko.utils.unwrapObservable(b), n); p[n] = m; break; case "deleted": m = o(a, t.value, g)
                } s.push({ event: t.status, item: m })
            } a(p); c[e] && c[e].arrayChanged && ko.utils.arrayForEach(s, function (f) { c[e].arrayChanged(f.event, f.item) })
        } else if (z(b)) {
            if (!a) if (c[e] && c[e].create instanceof Function) { u(); m = c[e].create({ data: b, parent: s }); ko.dependentObservable = x; return m } else a = {}; d.save(b, a); B(b, function (f) {
                var j = d.get(b[f]); a[f] = j ? j : i(a[f], b[f], c, d, f, a); c.mappedProperties[C(e,
b, f)] = true
            })
        } else switch (q(b)) { case "function": a = b; break; default: if (ko.isWriteableObservable(a)) a(ko.utils.unwrapObservable(b)); else a = ko.observable(ko.utils.unwrapObservable(b)) } return a
    } function r(a, b) { var c; if (b) c = b(a); c || (c = a); return ko.utils.unwrapObservable(c) } function o(a, b, c) {
        a = ko.utils.arrayFilter(ko.utils.unwrapObservable(a), function (d) { return r(d, c) == b }); if (a.length == 0) throw Error("When calling ko.update*, the key '" + b + "' was not found!"); if (a.length > 1 && z(a[0])) throw Error("When calling ko.update*, the key '" +
b + "' was not unique!"); return a[0]
    } function v(a, b) { return ko.utils.arrayMap(ko.utils.unwrapObservable(a), function (c) { return b ? r(c, b) : c }) } function B(a, b) { if (a instanceof Array) for (var c = 0; c < a.length; c++) b(c); else for (c in a) b(c) } function z(a) { return q(a) == "object" && a !== null && a !== undefined } function C(a, b, c) { var d = a || ""; if (b instanceof Array) { if (a) d += "[" + c + "]" } else { if (a) d += "."; d += c } return d } function A() {
        var a = [], b = []; this.save = function (c, d) {
            var e = ko.utils.arrayIndexOf(a, c); if (e >= 0) b[e] = d; else {
                a.push(c);
                b.push(d)
            } 
        }; this.get = function (c) { c = ko.utils.arrayIndexOf(a, c); return c >= 0 ? b[c] : undefined } 
    } ko.mapping = {}; var l = "__ko_mapping__", x = ko.dependentObservable, w = { include: ["_destroy"], ignore: [] }; ko.mapping.fromJS = function (a, b, c) { if (arguments.length == 0) throw Error("When calling ko.fromJS, pass the object you want to convert."); var d = b; d = d || {}; if (d.create instanceof Function || d.key instanceof Function || d.arrayChanged instanceof Function) d = { "": d }; d.mappedProperties = {}; b = d; d = i(c, a, b); d[l] = d[l] || {}; d[l] = b; return d };
    ko.mapping.fromJSON = function (a, b) { var c = ko.utils.parseJson(a); return ko.mapping.fromJS(c, b) }; ko.mapping.isMapped = function (a) { return (a = ko.utils.unwrapObservable(a)) && a[l] }; ko.mapping.updateFromJS = function (a, b) {
        if (arguments.length < 2) throw Error("When calling ko.updateFromJS, pass: the object to update and the object you want to update from."); if (!a) throw Error("The object is undefined."); if (!a[l]) throw Error("The object you are trying to update was not created by a 'fromJS' or 'fromJSON' mapping.");
        return i(a, b, a[l])
    }; ko.mapping.updateFromJSON = function (a, b, c) { b = ko.utils.parseJson(b); return ko.mapping.updateFromJS(a, b, c) }; ko.mapping.toJS = function (a, b) {
        if (arguments.length == 0) throw Error("When calling ko.mapping.toJS, pass the object you want to convert."); b = b || {}; b.ignore = b.ignore || w.ignore; if (!(b.ignore instanceof Array)) b.ignore = [b.ignore]; b.include = b.include || w.include; if (!(b.include instanceof Array)) b.include = [b.include]; return ko.mapping.visitModel(a, function (c) { return ko.utils.unwrapObservable(c) },
b)
    }; ko.mapping.toJSON = function (a, b) { var c = ko.mapping.toJS(a, b); return ko.utils.stringifyJson(c) }; ko.mapping.defaultOptions = function () { if (arguments.length > 0) w = arguments[0]; else return w }; ko.mapping.visitModel = function (a, b, c) {
        c = c || {}; c.visitedObjects = c.visitedObjects || new A; var d, e = ko.utils.unwrapObservable(a); if (z(e)) { b(a, c.parentName); d = e instanceof Array ? [] : {} } else return b(a, c.parentName); c.visitedObjects.save(a, d); var s = c.parentName; B(e, function (h) {
            if (!(c.ignore && ko.utils.arrayIndexOf(c.ignore,
h) != -1)) { var g = e[h]; c.parentName = C(s, e, h); if (c.include && ko.utils.arrayIndexOf(c.include, h) === -1) if (e[l] && e[l].mappedProperties && !e[l].mappedProperties[h] && !(e instanceof Array)) return; switch (q(ko.utils.unwrapObservable(g))) { case "object": case "undefined": var p = c.visitedObjects.get(g); d[h] = p !== undefined ? p : ko.mapping.visitModel(g, b, c); break; default: d[h] = b(g, c.parentName) } } 
        }); return d
    }; ko.exportSymbol("ko.mapping", ko.mapping); ko.exportSymbol("ko.mapping.fromJS", ko.mapping.fromJS); ko.exportSymbol("ko.mapping.fromJSON",
ko.mapping.fromJSON); ko.exportSymbol("ko.mapping.isMapped", ko.mapping.isMapped); ko.exportSymbol("ko.mapping.defaultOptions", ko.mapping.defaultOptions); ko.exportSymbol("ko.mapping.toJS", ko.mapping.toJS); ko.exportSymbol("ko.mapping.toJSON", ko.mapping.toJSON); ko.exportSymbol("ko.mapping.updateFromJS", ko.mapping.updateFromJS); ko.exportSymbol("ko.mapping.updateFromJSON", ko.mapping.updateFromJSON); ko.exportSymbol("ko.mapping.visitModel", ko.mapping.visitModel)
})();


$(document).ready(function () {
    $.ajaxRequests = [];
    $(this).ajaxSend(function (event, jqXHR, ajaxOptions) {


        if (!ajaxOptions.background && ajaxOptions.async) {

            if (!ajaxOptions.doNotKillOtherReq) {
                $.each($.ajaxRequests, function (i, v) { v.abort() });
                $.ajaxRequests = [];
            }

            $.ajaxRequests.push(jqXHR);

            var loadingPanel
            if (ajaxOptions.loadingPanel)
                loadingPanel = ajaxOptions.loadingPanel;
            else {
                var dummyPanel = $('<div id="dummyPanel" class="clearfix"></div>');
                loadingPanel = dummyPanel;
            }

            loadingPanel.loadingpanel();
            loadingPanel.loadingpanel("show");

            jqXHR.complete(function (jqXHR, progressPanel) {
                loadingPanel.loadingpanel();
                loadingPanel.loadingpanel("hide");
                $.ajaxRequests = $.grep($.ajaxRequests, function (n, i) { return n != jqXHR; });
            });
        }
        else {
            $.ajaxRequests.push(jqXHR);
        }
    });
});

(function ($) {
    $.daisAjax = function (options) {
        var defaults = {
            cache: false,
            doNotKillOtherReq: true,
            background: true
        };

        options.url = options.url + "&ajaxRequest=true";
        var optionsFixed = $.extend({},defaults, options);

        optionsFixed.success = function (data, status, jqXHR) {
            try {
                var sessionCountdown = jqXHR.getResponseHeader("DAIS_SessionCountdown");
                if (sessionCountdown != null) {
                    DAIS.APERSON.SECURITY.SessionCountdown.updateSessionCountdown(sessionCountdown);
                }
                var j ;
                if (typeof (data) == "string") {
                    j = Sys.Serialization.JavaScriptSerializer.deserialize(data);
                } else
                {
                    j = data;
                }
                if (j.ClassType == "AjaxRequestError") {
                    if (j.ErrorType == "OnCertFail") {
                        $('body').trigger("AjaxRequestErrorCertFail");
                    }
                    else if (j.ErrorType == "OnLoginFailAdvSpl") {
                        $('body').trigger("AjaxRequestErrorLoginFailAdvSpl");
                    }
                    else {
                        $('body').trigger("AjaxRequestErrorLoginFail");
                    }
                }
                else if (j.ClassType == "ApplicationError") {
                    $('body').trigger("AjaxRequestError", j);
                    if (options["error"] != null) {
                        options["error"].call(this);
                    }
                }
                else {
                    options["success"].call(this, data);
                }
            }
            catch (err) {
                options["success"].call(this, data);
            }
        };

        $.ajax(optionsFixed);
    };


    $.daisAjaxJson = function (options) {

        var defaults = {
            url: ""
           , contentType: "application/json"
           , type: "POST"
           , dataType: "text"
           , cache: false
           , background: false
           , success: function (data) { }
           , error: function () { }
           , before: function () { }
           , loadingPanelContainer: $("#main")
        };
        var extendedOptions = $.extend({}, defaults, options);

        var superOptions = {
            success: function (data) {
                $.daisDebugLog("DAIS JSON AJAX Success: " + data);
                extendedOptions["success"].call(this, $.daisJsonDeserialize(data));
            },
            error: function (xhr, ajaxOptions, thrownError) {
                $.daisDebugLog("DAIS JSON AJAX Error");
                extendedOptions["error"].call(this, thrownError);
            }
        };

        var finalOptions = $.extend({}, extendedOptions, superOptions);

        $.daisAjax(finalOptions);
    }

})(jQuery);


(function ($) {
    $.fn.daisLoadHtmlPanel = function (options) {

        var defaults = {
            url: ""
            , loadingPanelContainer: $(this)
            , loadingPanelTemplate: ""
            , data: null
            , doNotKillOtherReq: true
            , success: function (data) { }
            , background: false
        };
        var options = $.extend(defaults, options);

        return this.each(function () {
            var panel = $(this);

            var type = "GET";
            if (options["data"] != null) {
                type = "POST";
            }

            $.daisAjax({
                cache: false,
                type: type,
                url: options["url"],
                dataType: "html",
                contentType: options["contentType"],
                data: options["data"],
                loadingPanel: options["loadingPanelContainer"],
                doNotKillOtherReq: options["doNotKillOtherReq"],
                beforeSend: function (jqXHR, settings) {
                    $.daisDebugLog("DAIS AJAX Before Send");
                    jqXHR.complete(function (jqXHR, progressPanel) {
                        $.daisDebugLog("DAIS AJAX Complete");
                    });
                },
                background: options["background"],
                success: function (data) {
                    $.daisDebugLog("DAIS AJAX Success");
                    $(panel).html(data)
                    options["success"].call($(panel), data);
                },
                error: function () {
                    $.daisDebugLog("DAIS AJAX Error");
                }
            });
        });
    }
})(jQuery);



(function ($) {
    $.fn.daisLinkForHtmlPanel = function (panel, options) {
        return this.each(function () {
            $(this).click(function (event) {
                $.daisDebugLog("DAIS Ajax link click");
                $(panel).daisLoadHtmlPanel($.extend({ url: $(this).attr('href') }, options));
                event.preventDefault();
            });
        });
    }
})(jQuery);

(function ($) {
    $.fn.daisLinkForDialog = function (options) {
        return this.each(function () {

            var container = $("<div></div>");
            container.hide();
            $(this).parent().append(container);

            var that = this;

            var doptions = {
                title: $(that).text(),
                modal: true,
                autoOpen: false,
                height: 500,
                width: 500,
                open: function () {
                },
                close: function () {
                    $(container).empty();
                }
            };

            $(this).click(function (event) {
                $.daisDebugLog("DAIS Ajax link click");

                container.dialog($.extend($.extend({}, doptions), options));

                $(container).daisLoadHtmlPanel({
                    url: $(that).attr('href')
                    , doNotKillOtherReq: true
                    , loadingPanelContainer: $("form")
                    , success: function () {
                        container.append($('<a href="javascript:void(0);" style="width:60px; text-align: center;float:right;" class="btn red" onclick="$(\'.ui-dialog-titlebar-close\').trigger(\'click\');"><span>' + ID_STR_CLOSE + '</span></a>'))
                        container.dialog("open");
                    }
                });

                event.preventDefault();
            });
        });
    }
})(jQuery);

(function ($) {
    $.fn.daisLoadPanelFromTemplate = function (options) {

        var defaults = {
            url: ""
            , success: function (data) { }
            , error: function () { }
            , before: function () { }
            , loadingPanelContainer: $("body")
            , loadingPanelTemplate: ""
            , data: $("form").serialize()
            , background: false
        };
        var options = $.extend(defaults, options);

        return this.each(function () {
            var panel = $(this);

            $.daisAjax({
                cache: false,
                type: "POST",
                url: options["url"],
                dataType: "text",
                data: options["data"],
                loadingPanel: options["loadingPanelContainer"],
                background : options["background"],
                beforeSend: function (jqXHR, settings) {
                    $.daisDebugLog("DAIS JSON AJAX Before Send");
                    jqXHR.complete(function (jqXHR, progressPanel) {
                        $.daisDebugLog("DAIS AJAX Complete");
                    });
                    options["before"].call($(panel));
                },
                success: function (data) {
                    $.daisDebugLog("DAIS JSON AJAX Success: " + data);
                    options["success"].call($(panel), $.daisJsonDeserialize(data));
                },
                error: function (xhr, ajaxOptions, thrownError) {
                    $.daisDebugLog("DAIS JSON AJAX Error");
                    options["error"].call($(panel), thrownError);
                }
            });
        });
    }
    $.fn.daisJsonRequest = $.fn.daisLoadPanelFromTemplate;
})(jQuery);

(function ($) {
    $.daisJsonDeserialize = function (text) {
        return Sys.Serialization.JavaScriptSerializer.deserialize(text);
    }
})(jQuery);


(function ($) {
    $.fn.daisAddLoadingPanel = function (options) {

        var defaults = {
            loadingPanelTemplate: function () {
                var progressPanel = $('<div class="dais-loading-panel"></div>');
                var image = $('<img class="loadinganimation" src="/images/loading.gif" alt="Loading..."  />');
                progressPanel.append(image);
                return progressPanel;
            }
        };
        var options = $.extend(defaults, options);

        return this.each(function () {
            var panel = $(this);

            var loadingPanel = $(options["loadingPanelTemplate"].call(panel));

            loadingPanel.hide();

            panel.append(loadingPanel);
            loadingPanel.show();

            loadingPanel.width(panel.width());
            loadingPanel.height(panel.height());
            loadingPanel.css("z-index", 2002);

            loadingPanel.position({
                of: panel,
                at: "top left"
            });

            loadingPanel.children().position({
                of: loadingPanel,
                at: "center center"
            });
        });
    }
})(jQuery);

(function ($) {
    $.fn.daisRemoveLoadingPanel = function (options) {

        return this.each(function () {
            var panel = $(this);

            panel.find(".dais-loading-panel").hide().remove();
        });
    }
})(jQuery);

(function ($) {
    $.fn.daisSerialize = function () {
        var panel = $(this);
        return $("<form> </form>").html($(this).html()).serialize();
    }
})(jQuery);

(function ($) {
    $.daisDebugLog = function (data) {
        //console.log(data);
    }
})(jQuery);



function selectedPicker(event, data) {
    var shortCut = data.item.value;
    var helper = data.helper;
    var helperAttr = "data-helper-" + helper;

    var baseUrl;

    if (data.options.url == null)
        baseUrl = MakeWorking(MakeRequestAndChangeXmlID("ebanking/03transfers/.apahelper") + "&c2s=APAHelper");
    else
        baseUrl = data.options.url;

    $.daisAjax({
        cache: false,
        async: false,
        type: "POST",
        url: baseUrl,
        dataType: "text",
        data: 'shortCut=' + shortCut,
        background: true,
        success: function (data) {
            var apaHelper = $.daisJsonDeserialize(data);

            $.daisDebugLog("DAIS JSON AJAX Success: " + data);

            $("[" + helperAttr + "]").each(function () {
                var that = $(this);

                var attrVal = that.attr(helperAttr);
                var fromHelper = apaHelper[attrVal];

                var maxlength = that.attr(maxlength);

                if (maxlength != null && maxlength > 0)
                    fromHelper = fromHelper.substr(0, maxlength);

                that.val(fromHelper);
                that.trigger("change");
            });

        }
    });
}



(function ($) {
    $.fn.daisPaging = function (action, paging, callback) {
        return this.each(function () {
            var self = this;
            if (action == 'create') {
                $(this).html('');
                var cnt = $("<div>");
                var div = $(this)

                //cnt.attr("style" , "float:left");
                $(this).append(cnt);

                cnt.pagination(paging.TotalResults, {
                    items_per_page: paging.ResultsForPage < 0 ? 0 : paging.ResultsForPage
                        , current_page: (paging.CurrentPage == null || paging.CurrentPage <= 0 ? 1 : paging.CurrentPage) - 1
                    //                      , prev_text:"P11rev"
                    //			            , next_text:"Ne11xt"
                        , callback: function (new_page_index, pagination_container) {
                            
                            div.find("[name='Paging.CurrentPage']").val(new_page_index + 1);
                            callback.call(this, new_page_index);
                            $(self).show();
                            return false;
                        }
                });
            }

            if (action == 'init' || action == 'create') {
                $(this).append($("<input name='Paging.CurrentPage' type='hidden' />"));
                $(this).find("[name='Paging.CurrentPage']").val(paging.CurrentPage == null ? 1 : paging.CurrentPage)
                
                //draw resulets for page select
                var labelResPerPage = $("<label style='' for='Paging_ResultsForPage'>" + STR_RESULTS_PER_PAGE +  "</label>" );

                var selectNumPages =  $("<select id='Paging_ResultsForPage' class='' name='Paging.ResultsForPage'>"
                        + "<option value='5'>5</option><option value='10'>10</option><option value='20'>20</option></option>" 
                        + "<option value='-1'>" + STR_ALL + "</option>"
                        + "</select>");
                $(this).prepend(selectNumPages).prepend(labelResPerPage);

                //set selected results for page
                selectNumPages.val(paging.ResultsForPage).attr('selected', true);
                
                //selectNumPages.selectmenu(
                //    { width : 63
                //    } 
                //);
                if ((!paging.TotalResults) || paging.TotalResults == 0 ){
                    $(self).hide();
                }else{
                    $(self).show();
                }
                //ne e qko nali ? 
                if (cnt){
                    if ( (!paging.ResultsForPage) || paging.ResultsForPage == -1 ){
                        cnt.children('.pagination').children().each(function () { $(this).hide(); });
                    }
                }
                //bind change event 
                selectNumPages.change(function(){
                    reset();
                    callback.call(this, 0);
                    $(self).show();
                    return false;
                });
                
            }
            if (action == 'reset') {
                reset();
            }

            function reset(){ 
                $(self).find("[name='Paging.CurrentPage']").val(1);
            }

        });
    }
})(jQuery);

(function ($) {
    $.daisJsonDeserialize = function (text) {
        return Sys.Serialization.JavaScriptSerializer.deserialize(text);
    }
})(jQuery);
(function ($) {
    $.daisJsonSerialize = function (text) {
        return Sys.Serialization.JavaScriptSerializer.serialize(text);
    }
})(jQuery);


(function ($)
{
	$.widget("ui.combobox", {
		_create: function ()
		{
			var self = this,
					select = this.element.hide(),
					selected = select.children(":selected"),
					value = selected.val() ? selected.text() : "";
			var input = this.input = $("<input>")
					.insertAfter(select)
					.val(value)
					.attr("size", select.attr("size"))
					//.attr("class", select.attr("class"))
					.autocomplete({
						delay: 0,
						minLength: 0,
						source: function (request, response)
						{
							var matcher = new RegExp($.ui.autocomplete.escapeRegex(request.term), "i");
							response(select.children("option").map(function ()
							{
								var text = $(this).text();
								if (this.value && (!request.term || matcher.test(text)))
									return {
										label: text.replace(
											new RegExp(
												"(?![^&;]+;)(?!<[^<>]*)(" +
												$.ui.autocomplete.escapeRegex(request.term) +
												")(?![^<>]*>)(?![^&;]+;)", "gi"
											), "<strong>$1</strong>"),
										value: text,
										option: this
									};
							}));
						},
						select: function (event, ui)
						{
							ui.item.option.selected = true;
							self._trigger("selected", event, {
								item: ui.item.option,
								helper: self.options["helper"],
								options: self.options
							});
						},
						change: function (event, ui)
						{
							if (!ui.item)
							{
								var matcher = new RegExp("^" + $.ui.autocomplete.escapeRegex($(this).val()) + "$", "i"),
									valid = false;
								select.children("option").each(function ()
								{
									if ($(this).text().match(matcher))
									{
										this.selected = valid = true;
										return false;
									}
								});
								if (!valid)
								{
									// remove invalid value, as it didn't match anything
									$(this).val("");
									select.val("");
									input.data("autocomplete").term = "";
									return false;
								}
							}
						}
					})
					.addClass("ui-widget ui-widget-content ui-corner-left");

			input.data("autocomplete")._renderItem = function (ul, item)
			{
				return $("<li></li>")
						.data("item.autocomplete", item)
						.append("<a>" + item.label + "</a>")
						.appendTo(ul);
			};

			this.button = $("<button type='button'>&nbsp;</button>")
					.attr("tabIndex", -1)
					.attr("title", "Show All Items")
					.insertAfter(input)
					.button({
						icons: {
							primary: "ui-icon-triangle-1-s"
						},
						text: false
					})
					.removeClass("ui-corner-all")
					.addClass("ui-corner-right ui-button-icon")
					.click(function ()
					{
						// close if already visible
						if (input.autocomplete("widget").is(":visible"))
						{
							input.autocomplete("close");
							return;
						}

						// work around a bug (likely same cause as #5265)
						$(this).blur();

						// pass empty string as value to search for, displaying all results
						input.autocomplete("search", "");
						input.focus();
					});
		},

		destroy: function ()
		{
			this.input.remove();
			this.button.remove();
			this.element.show();
			$.Widget.prototype.destroy.call(this);
		},

		options: {}

	});
})(jQuery);


(function () {
    $.widget("ui.loadingpanel", {
        options: {
            loadingPanelTemplate: function () {
                var progressPanel = $('<div class="dais-loading-panel"></div>');
                var image = $('<img class="loadinganimation" src="/images/loading.gif" alt="Loading..."  />');
                progressPanel.append(image);
                return progressPanel;
            },
            loadingPanelSelector: function () {
                return $(this).find(".dais-loading-panel:first");
            }
        },
        _create: function () {
            $.data(this.element, "loadingpanel_count", 0)
        },
        _show: function () {
            var panel = $(this.element);

            var loadingPanel = $(this.options["loadingPanelTemplate"].call(panel));

            loadingPanel.hide();

            panel.append(loadingPanel);
            loadingPanel.show();

            loadingPanel.width(panel.width());
            loadingPanel.height(panel.height());
            loadingPanel.css("z-index", 2002);

            loadingPanel.position({
                of: panel,
                at: "top left"
            });

            loadingPanel.children().position({
                of: loadingPanel,
                at: "center center"
            });
        },
        _refresh: function () {
            var panel = $(this.element);

            var loadingPanel = $(this.options["loadingPanelSelector"].call(panel));

            loadingPanel.width(panel.width());
            loadingPanel.height(panel.height());

            loadingPanel.position({
                of: panel,
                at: "top left"
            });

            loadingPanel.children().position({
                of: loadingPanel,
                at: "center center"
            });
        },
        show: function () {
            var self = this;
            if ($.data(this.element, "loadingpanel_count") == 0) {
                this._show();
                $.data(this.element, "loadingpanel_count", 1);
            }
            else {
                this._refresh();
                $.data(this.element, "loadingpanel_count",
                    $.data(this.element, "loadingpanel_count") + 1);
            }
        },
        hide: function () {
            var self = this;
            if ($.data(this.element, "loadingpanel_count") == 1) {
                var panel = $(this.element);
                panel.find(".dais-loading-panel").hide().remove();
                $.data(this.element, "loadingpanel_count", 0);
            }
            else {
                $.data(this.element, "loadingpanel_count",
                    $.data(this.element, "loadingpanel_count") - 1);
            }
        },
        destroy: function () {
            $.Widget.prototype.destroy.apply(this, arguments); // default destroy
        }
    });
})(jQuery);

(function ($)
{
	$.widget("ui.submenu", {
		options: {
            forceRefreshPrefix: "_"
        },

		_create: function ()
		{
			var self = this;
			var links = $("a.panelload");

			$(window).bind('hashchange', this.changeSelectedTabOnHashChange(self));

			links.click(function (event)
			{
				var clicked = $(this);
				var clickedID = clicked.attr("id-bbq");

				if ($.param.fragment() != clickedID)
				{
					$.bbq.pushState("#" + clickedID);
				}
				else
					self.changeSelectedTabOnHashChange(self)();


				event.preventDefault();
			});

			if ($.param.fragment() == "")
			{
				self.loadFirstLink();
			}
			else
			{
				self.changeSelectedTabOnHashChange(self)();
			}

            $("a.submenulink").live('click', function(e) {
                if ((this.pathname == location.pathname || ("/" + this.pathname == location.pathname) || (this.pathname == "/" + location.pathname))
                    && this.search == location.search)
                {
                    if (this.hash == location.hash)
                    {
                        self.changeSelectedTabOnHashChange(self)();
                    }
                    else
                    {
                        $.bbq.pushState(this.hash);
                    }
                    e.preventDefault();
                }
            });
		},

		loadFirstLink: function ()
		{
			var links = $("a.panelload");
			var selected = links.first();
			this.loadPanelFromLink(selected);
		},

		loadPanelFromLink: function (clicked)
		{
			$("a.panelload").removeClass("active");
			
			var optionsForDaisLoadPannel = { loadingPanelContainer: $("#panel") };
			$("#panel").daisLoadHtmlPanel($.extend({ url: clicked.attr('href') }, optionsForDaisLoadPannel));

			clicked.addClass("active");
		},

		changeSelectedTabOnHashChange: function (self)
		{
			return function (event)
			{
                var clickedID = $.param.fragment();

				if (clickedID.length == 0)
				{
					self.loadFirstLink();
				}
                //force refresh tab if fragment starts with forceRefreshPrefix
                else if (clickedID.indexOf(self.options["forceRefreshPrefix"]) == 0)
                {   
                    $.bbq.pushState("#" + clickedID.slice(self.options["forceRefreshPrefix"].length) );
                }
                else
                {
				    // change selection
                    var clicked = $("#" + clickedID + "_linkId");
					self.loadPanelFromLink(clicked);

                }
			}
		},

		destroy: function ()
		{
			$.Widget.prototype.destroy.apply(this, arguments); // default destroy
			// now do other stuff particular to this widget

			$(window).unbind('hashchange', this.changeSelectedTabOnHashChange);
            $("a.submenulink").die("click");
		}
	});
})(jQuery);


(function ($)
{
    $.validator.addMethod(
            "regex",
            function(value, element, regexp) {
                var check = false;
                var re = new RegExp(regexp);
                return this.optional(element) || re.test(value);
            },
            "Please check your input."
    );
})(jQuery);



(function ($) {
    $.widget("ui.rename", {
        options: {
            input: function () { return $('<input type="text" class="input" value="_" style="float: left;" ></input>'); }
            , okLink: function () { return $('<img class="icon" src="/images/icons/check.gif" style="width: 18px; height: 18px;" alt="" />'); }
            , cancelLink: function () { return $('<img class="icon" src="/images/icons/multiplication.gif" style="width: 18px; height: 18px;" alt="" />'); }

            , renameLink: function () { return $('<img class="icon" src="/images/icon-edit.png" style="width: 10px; height: 10px;" alt="" />'); }
            , loading: function () { return $("<spam>renaming</spam>"); }
        },

        _create: function () {
            var self = this;

            //view
            var viewElements = []

            viewElements.push($(this.element));

            var renameLink = this.option("renameLink").call(this);
            renameLink.click(function (e) {
                self._beginRename();
                e.preventDefault();
            });
            this._set("renameLink", renameLink);
            viewElements.push(renameLink);
            renameLink.insertAfter(this.element);

            this._set("viewElements", viewElements);


            //edit
            var container = $("<div></div>");
            this._set("editElementsContainer", container);
            container.insertAfter(this.element);
            container.hide();

            var editElements = []

            var input = this.option("input").call(this); //.hide();
            this._set("input", input);
            input.appendTo(container);

            var okLink = this.option("okLink").call(this); //.hide();
            okLink.click(function (e) {
                self._beginCommitRename();
                e.preventDefault();
            });
            this._set("okLink", okLink);
            okLink.appendTo(container);

            var cancelLink = this.option("cancelLink").call(this); //.hide();
            cancelLink.click(function (e) {
                self._cancelRrename();
                e.preventDefault();
            });
            this._set("cancelLink", cancelLink);
            cancelLink.appendTo(container);

            editElements.push(container);

            this._set("editElements", editElements);

            this._trigger("oncreated", {}, { input: input.get(0) });
        },


        _beginRename: function () {
            this._trigger("onbeginrename");
            $.each(this._get("viewElements"), function () { this.hide() });
            $.each(this._get("editElements"), function () { this.show() });
            $.data(this.element, "input").val($(this.element).text());
        },

        _cancelRrename: function () {
            this._trigger("oncancelrename");

            $.each(this._get("viewElements"), function () { this.show() });
            $.each(this._get("editElements"), function () { this.hide() });
        },

        _beginCommitRename: function () {
            edit = $.data(this.element, "input");
            var data = { element: edit.get(0), value: edit.val(), success: true };
            this._trigger("oncommitrename", {}, data);
            if (data.success) {
                $.each(this._get("viewElements"), function () { this.hide() });
                $.each(this._get("editElements"), function () { this.hide() });
            }
        },
        _endCommitRename: function () {
            $(this.element).text("commited");
            $.each(this._get("viewElements"), function () { this.show() });
            $.each(this._get("editElements"), function () { this.hide() });
        },


        endRename: function (result) {
            if (result.success) {
                $(this.element).text(result.value);
                $.each(this._get("viewElements"), function () { this.show() });
                $.each(this._get("editElements"), function () { this.hide() });
            }
            else {
                this._cancelRrename();
            }
        },

        _get: function (name) {
            return $.data(this.element, name);
        },
        _set: function (name, value) {
            return $.data(this.element, name, value);
        },

        destroy: function () {
            $.Widget.prototype.destroy.apply(this, arguments);
            $.each($.data(this.element, "editElements"), function () { this.remove() });
            $.each($.data(this.element, "renameLink"), function () { this.remove() });
        }
    });
})(jQuery);

(function ($) {
    $.daisDialog = function (text, options) {
        /// <summary>
        /// Creates a dialog with a default behaviour of an alert
        /// </summary>
        /// <param name="text" type="String">
        /// dialog text
        /// </param>
        /// <param name="options" type="Object" optional="true">
        ///  default jquery ddialog options
        /// </param>
        /// <returns >
        /// the dynamicly generated container for the text
        /// </returns >
        var container = $("<div class='dialogContainer'>" + text + "</div>");
        container.hide();
        $("body").append(container);

        var doptions = {
            title: "",
            modal: true,
            autoOpen: true,
            minHeight: 'auto',
            width: 300,
            buttons: [{
                text : ID_STR_CLOSE,
                click: function () {
                    $(this).dialog("close");
                }
            }],
            dialogClass: "redbuttondialog",
            open: function () {
            }
        };

        var superOptions = {
            close: function () {
                if (options) {
                    if (options["close"]) {
                        options["close"].call(this);
                    }
                }
                $(this).dialog('destroy').remove();
            }
        }
        container.dialog($.extend({}, doptions, options, superOptions));
        return container;
    }

    $.daisDialogLoad = function (options) {
    	var container = $("<div></div>");
    	container.hide();
    	$("body").append(container);

    	var doptions = {
    		title: "",
    		modal: true,
    		autoOpen: false,
    		height: 500,
    		width: 500,
    		open: function () {
    		}
    	};

    	var superOptions = {
    		close: function () {
    			if (options["close"]) {
    				options["close"].call(this);
    			}
    			$(this).dialog('destroy').remove();
    			container.remove();
    		}
    	}

    	container.dialog($.extend({}, doptions, options, superOptions));

    	var requestSuperOptions = {
    		url: $.isFunction(options["url"]) ? options["url"].call(container) : options["url"]
            , doNotKillOtherReq: true
            , data: $.isFunction(options["data"]) ? options["data"].call(container) : options["data"]
            , success: function () {
            	container.dialog("open");
            	if (options["success"]) {
            		options["success"].call(this);
            	}
            }
    	}

    	var requestOptions = $.extend($.extend({}, options), requestSuperOptions);

    	$(container).daisLoadHtmlPanel(requestOptions);

    	return container;
    }
})(jQuery);

(function ($) {
    $.daisConfirm = function (text, options) {
        /// Creates a dialog with a default behaviour simular to that of a confirm which returns a promise object
        /// </summary>
        /// <param name="text" type="String">
        /// dialog text
        /// </param>
        /// <param name="options" type="Object" optional="true">
        ///  default jquery dialog options
        /// </param>
        /// <returns >
        /// the dynamicly generated container for the text with done and fail callbacks
        /// </returns >

        var container = $("<div class='confirmDialogContainer'>" + text + "</div>").hide();
        $("body").append(container);
        var deferred = new $.Deferred();
        var dialogButtons = {};

        var doptions = {
            title: "",
            modal: true,
            autoOpen: true,
            minHeight: 'auto',
            width: 400,
            open: function () {
            },
            dialogClass: "redbuttondialog",
            yes: STR_YES,
            no: STR_NO
        };

        var superOptions = {
            close: function () {
                if (options) {
                    if (options["close"]) {
                        options["close"].call(this);
                    }
                }
                container.dialog("destroy").remove();
            }
        }

        var currOptions = $.extend({}, doptions, options, superOptions);

        dialogButtons[currOptions["yes"]] = function () {
            deferred.resolve.call(this, container);
            $(this).dialog("close");
        }

        dialogButtons[currOptions["no"]] = function () {
            deferred.reject.call(this, container);
            $(this).dialog("close");
        }
        currOptions = $.extend({}, currOptions, { buttons: dialogButtons });
        container.dialog(currOptions);
        return deferred.promise(container);
    };
})(jQuery);

(function ($) {

    ko.bindingHandlers.validate = {
        init: function (element, valueAccessor, allBindingsAccessor, viewModel) {
            var bValidate = ko.utils.unwrapObservable(valueAccessor());
            SetValidationCheck($(element), bValidate);
        },
        update: function (element, valueAccessor, allBindingsAccessor, viewModel) {
            var bValidate = ko.utils.unwrapObservable(valueAccessor());
            SetValidationCheck($(element), bValidate);
        }
    };

    ko.bindingHandlers.daisReadonlyOnFalse = {
        init: function (element, valueAccessor, allBindingsAccessor, viewModel) {
            var bValidate = ko.utils.unwrapObservable(valueAccessor());

            if (bValidate) {
                $(element)
                    .filter("[type='radio']").removeAttr("disabled").end()
                    .filter("[type!='radio']").prop("readonly", false).removeClass("inputro")
            }
            else {
                $(element)
                    .filter("[type='radio']").attr("disabled", "disabled").end()
                    .filter("[type!='radio']").prop("readonly", true).addClass("inputro");
            }
        },
        update: function (element, valueAccessor, allBindingsAccessor, viewModel) {
            var bValidate = ko.utils.unwrapObservable(valueAccessor());

            if (bValidate) {
                $(element)
                    .filter("[type='radio']").removeAttr("disabled").end()
                    .filter("[type!='radio']").prop("readonly", false).removeClass("inputro")
            }
            else {
                $(element)
                    .filter("[type='radio']").attr("disabled", "disabled").end()
                    .filter("[type!='radio']").prop("readonly", true).addClass("inputro");
            }
        }
    };

    ko.bindingHandlers.daisTrigger = {
        init: function (element, valueAccessor, allBindingsAccessor, viewModel) {
        },
        update: function (element, valueAccessor, allBindingsAccessor, viewModel) {
            var value = ko.utils.unwrapObservable(valueAccessor());
            var options = allBindingsAccessor();

            if ($.isNotNullOrEmpty(value) || options["daisTriggerOnNull"]) {
                $(element).trigger(options["daisTriggerEvents"]);
            }
        }
    }

    ko.bindingHandlers.daisValueWithTrigger = {
        init: function (element, valueAccessor, allBindingsAccessor, viewModel) {
            ko.bindingHandlers.value.init.call(this, element, valueAccessor, allBindingsAccessor, viewModel);
        },
        update: function (element, valueAccessor, allBindingsAccessor, viewModel) {
            ko.bindingHandlers.value.update.call(this, element, valueAccessor, allBindingsAccessor, viewModel);

            $(element).trigger(allBindingsAccessor()["daisValueWithTriggerEvents"]);
        }
    }

    ko.bindingHandlers.daisValueWithValidate = {
        init: function (element, valueAccessor, allBindingsAccessor, viewModel) {
            ko.bindingHandlers.value.init.call(this, element, valueAccessor, allBindingsAccessor, viewModel);
        },
        update: function (element, valueAccessor, allBindingsAccessor, viewModel) {
            ko.bindingHandlers.value.update.call(this, element, valueAccessor, allBindingsAccessor, viewModel);

            $(element).valid();
        }
    }

    ko.bindingHandlers.daisSelectValue = {
        init: function (element, valueAccessor, allBindingsAccessor, viewModel) {
            var value = ko.utils.unwrapObservable(valueAccessor());

            $(element).change(function () {
                valueAccessor()($(this).val());
            });

            var first = $(element).children().first(function () { $(this).val() == value });
            if (first.length != 0) {
                $(element).val(value);
            }
        },
        update: function (element, valueAccessor, allBindingsAccessor, viewModel) {
            var value = ko.utils.unwrapObservable(valueAccessor());

            var first = $(element).children().first(function () { $(this).val() == value });
            if (first.length != 0) {
                $(element).val(value);
            }
        }
    }

    ko.bindingHandlers.datePickerValue = {
        init: function (element, valueAccessor, allBindingsAccessor, viewModel) {
            var value = ko.utils.unwrapObservable(valueAccessor());

            if (value == null || value == '') {
                $(element).val('');
            }
            else {
                $(element).val($.format.date(value, 'dd.MM.yyyy'));
            }
        },
        update: function (element, valueAccessor, allBindingsAccessor, viewModel) {
            var value = ko.utils.unwrapObservable(valueAccessor());

            if (value == null || value == '') {
                $(element).val('');
            }
            else {
                $(element).val($.format.date(value, 'dd.MM.yyyy'));
            }
        }
    }

})(jQuery);

(function ($) {
    var originalDateFormatDate = $.format.date;

    $.format.date = function () {        
        if (arguments[0])
        if (arguments[0] != null){
            return originalDateFormatDate.apply(null, arguments);
        }

        return '';
    };
})(jQuery);


// *** CROSS-BROWSER COMPATIBILITY ***

var isDOM = (document.getElementById ? true : false); 
var isIE4 = ((document.all && !isDOM) ? true : false);
var isNS4 = (document.layers ? true : false);
var isDyn = (isDOM || isIE4 || isNS4);

function getRef(id)
{
 if (isDOM) return document.getElementById(id);
 if (isIE4) return document.all[id];
 if (isNS4) return document.layers[id];
}

function getSty(id)
{
 return (isNS4 ? getRef(id) : getRef(id).style);
} 


// *** LOAD FILES INTO DIV FUNCTIONS ***

function scrLoad(name) { with (this)
{
 if (!name) return;

 // If you feel like extending this code a bit in an easy way, why not copy-and-paste the
 // visibility settings from the end of scrFileLoaded() to here... but hide the scroller and
 // show the loading message for a while? Just a thought...

 // The location of this file, used as a starting point for all relative files
 // e.g. loadFile('downloads/index.html').
 var path = location.href.substring(0, location.href.lastIndexOf('/') + 1);

 if (isDOM || isIE4)
 {
  // The document currently loaded into the buffer.
  oldLoc = bufRef.location.href;

  // If we haven't been given a full URL with a protocol, add the path to this point.
  if ((name.substring(0, 5) != 'http:') && (name.substring(0, 5) != 'file:'))
   name = path + name;

  // This is a kludge, since NS6 doesn't support Iframe onloads yet. Give it 5 secs to load.
  if (isDOM && !document.all) setTimeout(myName + '.bufRef.document.readyState="complete"', 5000);

  if (oldLoc != name)
  {
   // If we're not reloading the same file, set frame location and start checking routine.
   bufRef.location.href = name;
   checkBuffer(oldLoc);
  }
  // Else if we're reloading the same file, just pass a dummy old location so routine
  // will presume the new one is different and load immediately.
  else checkBuffer('dummyLocation');
 }
 else
 {
  // Once done, display it and scroll to top.
  divRef.onload = new Function(myName + '.fileLoaded()');
  // Netscape's load(URL, width) method...
  divRef.load(name, cWidth);
 }
}}

function scrCheckBuffer() { with (this)
{
  // Transfer frame's content to the div.
  divRef.innerHTML = bufRef.document.body.innerHTML;
  // Remove file from buffer, to allow refreshing - not strictly necessary.
  bufRef.location.href = '/blank.html';
  // That's it, we're done! The timeout helps IE4 giving it a chance to calculate div height.
  setTimeout(myName + '.fileLoaded()', 1);
}}

function scrFileLoaded() { with (this)
{
 // Stop dragging any scroller while we switch files.
 activeScr = null;
 
 // Back to top...
 scrollBy(-100000);

  // And set visibilities now everything's finally ready.
 loadSty.visibility = 'hidden';
 for (count = 0; count < divs.length; count++)
  getSty(divs[count][0]).visibility = 'visible';
}}


// *** DIV SCROLLING FUNCTION ***

function scrScrollBy(amount) { with (this)
{
 if (!isDyn || !loaded) return;

 // Because this gets passed fractions sometimes.
 amount = parseInt(amount);

 // Height of div - update here as it may change often. Find it out somehow :).
 divHeight = document.all ? divRef.clientHeight : 
  (isDOM ? divRef.offsetHeight : divRef.document.height);
 // Stops 'divide by zero'
 if (divHeight == 0) divHeight = 1;

 // Are we scrolling out of range? If so, return to top/bottom.
 if ((cBot + amount) > divHeight) amount = divHeight - cBot;
 if ((cTop + amount) < 0) amount = 0 - cTop;

 // Adjust clipping values & move div up/down... 'scrolling' div.
 cTop += amount;
 cBot += amount;
 if (isDOM || isIE4)
  divSty.clip = 'rect(' + cTop + 'px ' + cWidth + 'px ' + cBot + 'px ' + 0 + 'px)';
 else if (isNS4)
 {
  // NS4 bug fix, seems to be required, as sometimes these get undefined... why?
  // I think it's because one onMouseMove gets called before another finishes, and somehow
  // NS4 must lose track of its variables.
  if (isNaN(cTop) || isNaN(cBot) || isNaN(amount)) layout();

  // Order of adjustment matters, cannot overlap opposing clips.
  if (cBot < divSty.clip.top) divSty.clip.top = cTop;
  divSty.clip.bottom = cBot;
  divSty.clip.top = cTop;
 }

 divSty.top = eval(divs[0][2]) - cTop;


 // Define its height as the percentage of the clipping height vs div height.
 // Best to set it here as divHeight may change as images load etc.
 thmHeight = Math.ceil(barHeight * ((cBot - cTop) / divHeight));

 // Minimum and maximum heights for thumb...
 if (thmHeight < minThmHeight) thmHeight = minThmHeight;
 if (thmHeight > barHeight) thmHeight = barHeight;

 if (isDOM || isIE4) thmSty.height = thmHeight;
 else if (isNS4) thmSty.clip.height = thmHeight;

 // Adjust scrollbar thumb position only if we're not already dragging it.
 if (activeScr) return;

 // What fraction is the div of its total scrolling range? 0=top, 1=bottom.
 fracDivDown = (cTop / (divHeight - (cBot - cTop)));
 // Now, multiply that by the available space to move and assign its top.
 thmSty.top = parseInt(barSty.top) + fracDivDown * (barHeight - thmHeight);

 // If we're looping, set a timeout to scroll by amount again.
 if (loop) setTimeout(myName + '.scrollBy(' + amount + ')', loop);
}}


// *** SCROLL THUMB DRAGGING EVENT HANDLERS ***

function scrThumbDown(evt)
{
 // Set a variable pointing to the active scroller - this scroller object.
 activeScr = this;

 // Offset of mouse cursor within the scrollbar by browser, first IE then NS 6 then 4...
 if (document.all) scrOffset = event.offsetY;
 else scrOffset = evt.layerY;
 return false;
}

function scrThumbMove(evt)
{
 if (isNS4) document.routeEvent(evt);

 // Either return true if no scroller is being dragged (so selections work), or...
 if (!activeScr) return true;
 else { with (activeScr)
 {
  // Workaround for error in NS...
  if (isNaN(cTop) || isNaN(cBot)) divLayout();

  // If it's not scrollable, quit.
  if ((cBot > divHeight) || (thmHeight == barHeight)) return;

  if (document.all) newTop = document.body.scrollTop + event.clientY - scrOffset;
  else newTop = evt.pageY - scrOffset;

  // Test if the thumb is out of range, if so, bring it back, then assign its position.
  var barTop = parseInt(barSty.top);
  if (newTop < barTop) newTop = barTop;
  if (newTop + thmHeight > (barTop + barHeight))
   newTop = (barTop + barHeight) - thmHeight;
  thmSty.top = newTop;

  // Fractions of total range moved by the div and scrollbar...
  fracDivDown = cTop / (divHeight - (cBot - cTop));
  fracBarDown = (newTop - barTop) / (barHeight - thmHeight);

  // ... then scroll by the required difference to make up.
  scrollBy((fracBarDown - fracDivDown) * (divHeight - (cBot - cTop)));

  return false;
 }}
}

function scrThumbUp(evt)
{
 if (isNS4) document.routeEvent(evt);
 activeScr = null;
}


// *** SCROLLBAR BACKGROUND CLICK EVENT HANDLER ***

function scrBarClick(evt) { with (this)
{
 if (isNS4) document.routeEvent(evt);

 if (document.all) clickPos = document.body.scrollTop + event.clientY;
 else clickPos = evt.pageY;

 // Page up, or page down?
 if (clickPos < parseInt(thmSty.top)) scrollBy(cTop - cBot);
 if (clickPos > (parseInt(thmSty.top) + thmHeight)) scrollBy(cBot - cTop);
}}


// *** LAYOUT HANDLER FOR WINDOW RESIZE ETC ***

function scrLayout() { with (this)
{
 if (!isDyn) return;

 winWidth  = 400;//document.all ? document.body.clientWidth : window.innerWidth;
 winHeight = 300;//document.all ? document.body.clientHeight : window.innerHeight;

 if (isNS4 && (scrFirstWidth != winWidth))
 {
  // Sorry folks, NS4 has major bugs resizing horizontally and must refresh...
  fileName = location.href;
  if (fileName.indexOf('?') != -1) fileName = fileName.substring(0, fileName.indexOf('?'));
  location.href = fileName + '?loadFile=' + divRef.src;
 }

 // If it's not yet initialised, go no further.
 if (!loaded) return;

 // Loop through divs array, positioning/sizing controls.
 var nWidthOffset = document.all ? document.body.clientWidth : window.innerWidth;
 nWidthOffset = 20/*Math.abs(Math.ceil(nWidthOffset/2) - 365 );*/
 for (count = 0; count < divs.length; count++)
 {
  var tmpObj = getSty(divs[count][0]);
  if (divs[count][1]) tmpObj.left = eval(divs[count][1]) + nWidthOffset;
  if (divs[count][2]) tmpObj.top  = eval(divs[count][2]);
  if (divs[count][3])
  {
   var tmpW = eval(divs[count][3]);
   isNS4 ? tmpObj.clip.width = tmpW : tmpObj.width = tmpW;
  }
  // Don't set the height of the first scrolling div, we have to pick this up later.
  if (divs[count][4] && count != 0)
  {
   var tmpH = eval(divs[count][4]);
   isNS4 ? tmpObj.clip.height = tmpH : tmpObj.height = tmpH;
  }
 }

 // Set the top, bottom & width clip variables.
 if ((isDOM || isIE4) && !cTop) cTop = 0;
 // This will fix 'undefined' errors in NS.
 if (isNS4) cTop = divSty.clip.top;

 // Bar height and clipping parameters, stored here as accessed often. Set width on-the-fly.
 barHeight = eval(divs[1][4])-2;
 cBot = cTop + eval(divs[0][4]);
 cWidth = eval(divs[0][3]);
 if (isDOM || isIE4) divSty.width = cWidth;

 // Now, display it using updated variables...
 scrollBy(0);
}}


// *** ON LOAD: CAPTURE EVENTS & MISC. SETUP ***

function scrSetup(defaultFile) { with (this)
{
 if (!isDyn) return;

 // References to document objects' properties, stored in scroller object.
 divRef = getRef(divs[0][0]);
 divSty = getSty(divs[0][0]);
 barSty = getSty(divs[1][0]);
 thmSty = getSty(divs[2][0]);
 // Convert these ID's to references now document has loaded.
 loadSty = getSty(loadSty);
 // NS6 has troubles with the frames array and iframes, so use a workaround.
 bufRef = eval('window.' + bufRef);

 // Other variables - references to bar and thumb divs, only used locally.
 barRef = getRef(divs[1][0]);
 thmRef = getRef(divs[2][0]);
 
 if (isNS4)
 {
  barRef.captureEvents(Event.CLICK);
  thmRef.captureEvents(Event.MOUSEDOWN);
  document.captureEvents(Event.MOUSEMOVE | Event.MOUSEUP);
 }

 // Pass events to specific scrollers.
 barRef.onclick = new Function('evt', 'return ' + myName + '.barClick(evt)');
 thmRef.onmousedown = new Function('evt', 'return ' + myName + '.thumbDown(evt)');
 // The mouseMove and mouseUp events are global.
 document.onmousemove = scrThumbMove;
 document.onmouseup = scrThumbUp;

 // For IE4+/NS6, create a new function that stops selections being made when dragging.
 if (document.all) document.onselectstart = new Function('if (activeScr) return false');
 else if (isDOM) document.onselect = new Function('if (activeScr) return false');


 // It's now ready to go, call resize function to set the positions and variables...
 loaded = true;
 layout();


 // Get the name of the file to be loaded from a CGI query string...
 fileName = '';
 if (location.href.indexOf('?') != -1)
  fileName = location.href.substring(location.href.lastIndexOf('=') + 1);

 // Contains string '.htm'...? (can be '.html' file of course)
 if (fileName.indexOf('.htm') != -1) load(fileName)

 // Else load default file (if we're passed one) or scroll existing content without loading.
 else if (defaultFile) load(defaultFile);
 else fileLoaded();
}}


// Main object of which instances are created.
function DHTMLScroller(myName, bufferID, loadMess)
{
 // Some references to objects that are referred to repeatedly for speed.
 this.divRef = null;
 this.divSty = null;
 this.barSty = null;
 this.thmSty = null;

 // Array of objects to move when the window is resized (e.g. scrollbar, arrows).
 this.divs = new Array();
 
 // Store the ID's of these objects here for now. Convert to references later...
 this.loadSty = loadMess;
 this.bufRef = bufferID;
  
 // Properties.
 this.myName = myName;
 this.loaded = false;
 // A non-zero value for loop will cause a scrollBy call to repeat after that many milliseconds.
 this.loop = 0;
 // Minimum height of scrollbar thumb - defaults to 20, set to something else if you want.
 this.minThmHeight = 20;

 this.divHeight = 0;
 this.barHeight = 0;
 this.thmHeight = 0;
 this.cTop = 0;
 this.cBot = 0;
 this.cWidth = 0;

 // Methods - bind to functions above.
 this.load = scrLoad;
 this.checkBuffer = scrCheckBuffer;
 this.fileLoaded = scrFileLoaded;
 this.scrollBy = scrScrollBy;
 this.thumbDown = scrThumbDown;
 this.barClick = scrBarClick;
 this.setup = scrSetup;
 this.layout = scrLayout;
}
// *** GLOBAL VARIABLES - START EDITING HERE ***


// Some global variables for the scroller code - scrFirstWidth is only for NS4 resize bug.
var activeScr = null, scrOffset = 0, winWidth, winHeight, scrFirstWidth = 433;





function OnCheckLimit()
{
    document.getElementById("ConsentLimit").value = (document.getElementById("ConsentLimit").checked == true);
    document.getElementById("ConsentpaymentLimit").disabled = ! document.getElementById("ConsentLimit").checked;
    if (document.getElementById("ConsentLimit").checked)
    {
        document.getElementById("ConsentpaymentLimit").className = "input";
        document.getElementById("ConsentpaymentLimit_CheckLimit").value = "true";
    }
    else
    {
	    document.getElementById("ConsentpaymentLimit").className = "inputro";
	    document.getElementById("ConsentpaymentLimit_CheckLimit").value = "false";
	}
}

function CheckFirstNums()
{
	
	var Acc1 = document.getElementById("PaymentAccountNumber").value;
	var Acc2 = document.getElementById("PaymentAccountVATNumber").value;
	if ( (Acc1.substring(12,13) == "1") && (Acc2.substring(12,13) == "9"))
		return true;
	else
		return false;

}

function Validate()
{
	var Limit = document.getElementById("ConsentpaymentLimit").value;
	
	
	if (!document.getElementById("ConsentLimit").checked)
	return true;
	
	
	if (Limit == "")
		return false;

	var usedPoint = false;	
	for (var k=0; k < Limit.length; k++)
		{
			var c = Limit.charAt(k);
			
			if( ( ! (c >= "0" && c <= "9") ) && (! ("."==c)) && (! (","==c))  ) 
				return false;			
				
			if (usedPoint && (("."==c) || (","==c)) )
				return false;
				
			if (("."==c) || (","==c))
				usedPoint = true;
		}
	
	//todo !!!
	return true;
}
function Check()
{
	//CatchOnSubmitToValidate();
	if (! ValidateInputFields())
	    return false;
	return true;
	/*
	var str1 = document.getElementById("strPayerBankClientID").value;
	var strVAT1 = document.getElementById("strVATPayerBankClientID").value;
	var str2 = document.getElementById("strPayerbankClientBEAID").value;
	var strVAT2 = document.getElementById("strVATPayerbankClientBEAID").value;
	
	if (( str1 == strVAT1) && ( str2 == strVAT2) && CheckFirstNums() && Validate())
		return true;
	else
	{
		if ( ! Validate() )
			alert(STR_WRONG_LIMIT);
		else
			alert(STR_WRONG_ACCOUNTS);
		
		return false;
	}*/
	
	
}
$(document).ready(function () {
    $(this).ajaxSend(onAjaxSend);
})

function onAjaxSend(event, jqXHR, ajaxOptions) {
    if (!ajaxOptions.background && ajaxOptions.async) {
    // the ajax request is not background, dim the screen with progress image

        var responseText = "";
        jqXHR.complete(onAjaxSendSuccessFunc(jqXHR, responseText));
    }
}

function onAjaxSendSuccessFunc(jqXHR, responseText) {
    return function () {
        //OnDocumentReadyActions();
        CreateSortHeaderOnTables();
    }
}

/*
 * Chained - jQuery non AJAX(J) chained selects plugin
 *
 * Copyright (c) 2010-2011 Mika Tuupola
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 */

(function($) {

    $.fn.chained = function(parent_selector, options) { 
        
        return this.each(function() {
            
            /* Save this to self because this changes when scope changes. */            
            var self   = this;
            var backup = $(self).clone();
                        
            /* Handles maximum two parents now. */
            $(parent_selector).each(function() {
                                                
                $(this).bind("change", function() {
                    $(self).html(backup.html());

                    /* If multiple parents build classname like foo\bar. */
                    var selected = "";
                    $(parent_selector).each(function() {
                        selected += "\\" + $(":selected", this).val();
                    });
                    selected = selected.substr(1);

                    /* Also check for first parent without subclassing. */
                    /* TODO: This should be dynamic and check for each parent */
                    /*       without subclassing. */
                    var first = $(parent_selector).first();
                    var selected_first = $(":selected", first).val();
                
                    $("option", self).each(function() {
                        /* Remove unneeded items but save the default value. */
                        if (!$(this).hasClass(selected) && 
                            !$(this).hasClass(selected_first) && $(this).val() !== "") {
                                $(this).remove();
                        }                        
                    });
                
                    /* If we have only the default value disable select. */
                    if (1 == $("option", self).size() && $(self).val() === "") {
                        $(self).attr("disabled", "disabled");
                    } else {
                        $(self).removeAttr("disabled");
                    }
                    $(self).trigger("change");
                });
                
                /* Force IE to see something selected on first page load, */
                /* unless something is already selected */
                if ( !$("option:selected", this).length ) {
                    $("option", this).first().attr("selected", "selected");
                }
	    
                /* Force updating the children. */
                $(this).trigger("change");             

            });
        });
    };
    
    /* Alias for those who like to use more English like syntax. */
    $.fn.chainedTo = $.fn.chained;
    
})(jQuery);

DAIS.createNS("DAIS.CALENDARS");

DAIS.CALENDARS.CalendarActions = function CalendarActions() {
	var GoToView = function (dt, taskType, action) {
		var ser = { "strDate": dt, "taskType": taskType, "Calendar_action_mvc": action };
		SetView(ser);
	};

    var CreateTask = function (obj, controllerName, checkBankClient) {
        var form = $(obj).closest('form');
        $.validator.unobtrusive.parseDynamicContent(form);
        var isValidBankClient = ValidateBankClient(form, checkBankClient);
        var valid = ValidateForm(form);

        if (isValidBankClient && valid) {
            var ser = $(form).serialize();
            var url = MakeRequestToMVC(controllerName, "CreateNew");
            $.daisAjax({
                cache: false,
                type: "POST",
                url: url,
                data: ser,
                dataType: "json",
                success: function (data) {
                    if (data.IsValid) {
                        $('.ui-dialog-titlebar-close').trigger('click');
                        GoToView(data.eventDate, data.type, 'ForMonth');
                    }
                    else {
                        fillValidatioSumarry(data);
                    }
                }
            });
        }
    };

    var UpdateTask = function (obj, controllerName, checkBankClient) {
        var form = $(obj).closest('form');
        $.validator.unobtrusive.parseDynamicContent(form);
        var isValidBankClient = ValidateBankClient(form, checkBankClient);
        var valid = ValidateForm(form);

        if (isValidBankClient && valid) {
            var ser = $(form).serialize();
            var url = MakeRequestToMVC(controllerName, "Update");
            $.daisAjax({
                cache: false,
                type: "POST",
                url: url,
                data: ser,
                dataType: "json",
                success: function (data) {
                    if (data.IsValid) {
                        $('.ui-dialog-titlebar-close').trigger('click');
                        GoToView(data.eventDate, data.type, 'ForMonth');
                    }
                    else {
                        fillValidatioSumarry(data);
                    }
                }
            });
        }
    };

    var DeleteTask = function (obj, confirmMessage, controllerName) {
        var form = $(obj).closest('form');

        var serData = $(form).serialize();
        var bres = confirm(confirmMessage);
        if (bres == true) {
            var url = MakeRequestToMVC(controllerName, "Delete");
            $.daisAjax({
                cache: false,
                type: "POST",
                url: url,
                data: serData,
                dataType: "json",
                success: function (data) {
                    $('.ui-dialog-titlebar-close').trigger('click');
                    GoToView(data.eventDate, data.type, 'ForMonth');
                }
            });
        }
    };
    
    function ValidateForm(form) {

        var valid = form.valid();

        return valid;
    };

    function ValidateBankClient(form, checkBankClient) {
    	if (checkBankClient) {
    		var validationDiv = $("[data-valmsg-for='BankClientFilter']");
    		if (!CheckIfBankClientIsSelected()) {
    			$("#SelectedClientID").addClass("input-validation-error");
    			validationDiv.html("Не сте избрали банков клиент").show().addClass('field-validation-error');
    			return false;
    		}
    		else {
    			$("#SelectedClientID").removeClass("input-validation-error");
    			$("[data-valmsg-for='BankClientFilter']").html("");
    			return true;
    		}
    	}
    	else {
			return true;
    	}
    };

    function SetView(ser) {
    	var url = MakeRequestToMVCWithArea("Calendar", ser.Calendar_action_mvc,"Calendar");
    	$.daisAjax({
    		cache: false,
    		type: "POST",
    		url: url,
    		data: ser,
    		dataType: "html",
    		success: function (data) {
    			$("#taskCalendar").html(data);
    		}
    	});
    }

    return {
    	GoToView: GoToView,   
        DeleteTask: DeleteTask,
        CreateTask: CreateTask,
        UpdateTask: UpdateTask
    };
}();

/* global DAIS */
DAIS.createNS("DAIS.CALENDARS");
DAIS.CALENDARS.HorizontalCalendar = function (taskType) {

    var
    self = this,
    currentView = "ForMonth",
    calendarDropdowns,
    switchLabels, 
    calendarDate;

    var Init = function () {
        calendarDropdowns = document.querySelectorAll(".calendar-dropdown");
        switchLabels = document.querySelectorAll(".switch-label");

        for (var i = 0, l = switchLabels.length; i < l; i++) {
            SwitchLabel(switchLabels[i]);
        }

        for (var i = 0, l = calendarDropdowns.length; i < l; i++) {
            Dropdown(calendarDropdowns[i]);
        }

        SwitchView("ForMonth");
        
    };

    var saveDate = function (date) {
        //saves to session storage and returns saved date;
        if (!date) {

            var dd = calendarDropdowns.item(0).value;
            var mm = calendarDropdowns.item(1).value;
            var yy = calendarDropdowns.item(2).value;

            //if it is selecte 31 but month does not have such date, get last date of month 
            var selectedDate = new Date(yy, mm);
            var monthDays = selectedDate.getMonthDays();
            if (dd > monthDays) {
                dd = monthDays;
            }

            var date = {
                dd: dd,
                mm: mm,
                yy: yy
            };
        }

        calendarDate = date;
        return date;
    },

    SwitchView = function (view) {

        currentView = view;

        //when changing views, disable other dropdowns;
        switch (view) {
            case "ForDay":
                calendarDropdowns.item(0).disabled = false;
                calendarDropdowns.item(1).disabled = false;
                break;
            case "ForMonth":
                calendarDropdowns.item(0).disabled = true;
                calendarDropdowns.item(1).disabled = false;

                break;
            case "ForYear":
                calendarDropdowns.item(0).disabled = true;
                calendarDropdowns.item(1).disabled = true;
                break;
        }
        var date = saveDate();
        //because of the js month 0-11
        date.mm = parseInt(date.mm)+1;
        DAIS.CALENDARS.CalendarActions.GoToView(date.dd + '.' + date.mm + '.' + date.yy, taskType, view)
    },

    GetCalendarDate = function () {
        return calendarDate ? new Date(calendarDate.yy, calendarDate.mm, calendarDate.dd) : new Date();
    },

    Dropdown = function (select) {
        select.onchange = function () {
            SwitchView(currentView);
        }
        switch (select.dataset.type) {
            case "ForDay":
                DayDropdown(select);
                break;
            case "ForMonth":
                MonthDropdown(select);
                break;
            case "ForYear":
                YearDropdown(select);
                break;
        }
    },

    DayDropdown = function (select) {

        var count = GetCalendarDate().getMonthDays();
        //filling the days array
        select.render = function (daysCount) {
            select.innerHTML = '';
            for (var i = 1; i <= daysCount; i++) {
                var opt = document.createElement("option");
                opt.text = i;
                opt.value = opt.text;
                select.options.add(opt);
            };

            select.value = GetCalendarDate().getDate();
            

        };
        select.render(count);
    },

    MonthDropdown = function (select) {

        var count = 11;
        for (var i = 0; i <= count; i++) {
            var opt = document.createElement("option");
            opt.text = Calendar._MN[i];
            opt.value = i;
            select.options.add(opt);
        };
        select.value = GetCalendarDate().getMonth();
        select.addEventListener('change', function (e) {
            var date = new Date();

            date.setMonth(e.target.value);

            var days = date.getMonthDays();

            calendarDropdowns.item(0).render(days);
        })
    },

    YearDropdown = function (select) {

        var count = 5;
        for (var i = -5; i <= count; i++) {
            var opt = document.createElement("option");
            opt.text = GetCalendarDate().getFullYear() + i;
            opt.value = opt.text;
            select.options.add(opt);
        };
        select.value = GetCalendarDate().getFullYear();

    },

    SwitchLabel = function (link) {

        link.setActive = function () {
            this.className += " active";
        };
        link.clear = function () {
            this.className = this.className.replace("active", "");
        };
        link.onclick = function () {
            for (var i = 0, l = switchLabels.length; i < l; i++) {
                switchLabels[i].clear();
            }
            this.setActive();

            SwitchView(this.dataset.target);
            //Here can be attached other events
        };
    }

    Init();
    
    //this.SwitchView = SwitchView;
    //this.Dropdown = Dropdown;
    //this.SwitchLabel = SwitchLabel;

};

//Create our namespace 
DAIS.createNS("DAIS.PERSONAL.CERTIFICATE");


DAIS.PERSONAL.CERTIFICATE.DAISCertificates = function DAISCertificates() {
    var setDownloadPrerequisites = function (objDownloadParameters) {
        var selectedBrowser = $(objDownloadParameters.browserSelectionControlSelector).val();
        var canContinue = false;
        if (selectedBrowser == 'ie_vista') {
            downloadPrerequisitesForIE(objDownloadParameters.msiDivId);
        }
        else if (selectedBrowser == "ns" || selectedBrowser == 'ie') {
            downloadPrerequisitesForOtherBrowser(objDownloadParameters.rootCertDivId, objDownloadParameters.mozillaMessageId, (selectedBrowser == 'ns'))
        }
        else {
            canContinue = true;
        }

        return canContinue;
    }

    var downloadPrerequisitesForIE = function (dialogWindowId, url) {
        ShowModalDiv(dialogWindowId);
        window.location.href = '/DeployMSI.msi';
    }

    var downloadPrerequisitesForOtherBrowser = function (dialogId, mozillaSpecialMessageId, shouldShowMozzilaInfo) {
        ShowModalDiv(dialogId);
        var mozillaSpecialMessage = $("#" + mozillaSpecialMessageId);
        if (shouldShowMozzilaInfo && mozillaSpecialMessage.length > 0) {
            mozillaSpecialMessage.show();
        }

        if (!$('#' + dialogId).hasClass('QESCertificate')) {
            window.location.href = '/bulbank.crt';
        }
    }

    var continueAndCloseModalDiv = function (divIdToClose, isFromWizard) {
        HideModalDiv(divIdToClose);
        if (isFromWizard) {
            return BoolAnd(doNext(), NormalSubmitNoValidate(''));
        }
        else {
            return MySubmit('');
        }
         
    }

    return {
        setDownloadPrerequisites: setDownloadPrerequisites,
        continueAndCloseModalDiv: continueAndCloseModalDiv
    }

}();
DAIS.createNS('DAIS.PAYEMENTS', {

    BankClientAlternativeFields: (function ($) {

        BankClientAlternativeFields = function (bankClientID, bankClientName, bankClientCity, bankClientAdress, paymentType) {

            this.bankClientID = bankClientID;
            this.bankClientCity = bankClientCity;
            this.bankClientName = bankClientName;
            this.bankClientAdress = bankClientAdress;
            this.paymentType = paymentType;
        }

        BankClientAlternativeFields.prototype = function () {
            var saveAlternativeFields = function () {
                var deferred = $.Deferred();         
                var rqBody = $.daisJsonSerialize({
                    bankClientID: this.bankClientID,
                    bankClientName: this.bankClientName,
                    bankClientAdress: this.bankClientAdress,
                    bankClientCity: this.bankClientCity,
                    paymentType: this.paymentType
                });
                $.daisAjax({
                    cache: false,
                    type: "POST",
                    url: MakeRequestToMVC("BankClientAlternativeData", "SetAlternativeData"),
                    contentType: "application/json",
                    data: rqBody,
                    async: true,
                    dataType: "json",
                    success: function (data) {
                        if (!data.IsValid) {
                            //isMvcError  = true
                            deferred.reject(data,true);
                        }
                        else {
                            deferred.resolve(data);
                        }
                    },
                    error: function (data) {
                        //isMvcError  = false
                        deferred.reject(data, false);
                    }
                });
                var promise = deferred.promise();
                return promise;
            };
            return {
                saveAlternativeFields: saveAlternativeFields
            };
        }();
        return BankClientAlternativeFields;
    })(jQuery)//class BankClientAlternativeFields
    
});
//namespace


//Create our namespace 
DAIS.createNS("DAIS.CAMPAIGNS");


DAIS.CAMPAIGNS.CampaignActions = function CampaignActions() {
    var CloseCampaign = function (campaignID) {

        var url = MakeRequestToMVC("Campaign", "CloseCampaign");
        $.daisAjax({
            cache: false,
            type: "POST",
            url: url,
            data: "campaignID=" + campaignID,
            dataType: "html",
            success: function (data) { NormalSubmit(MakeRequestAndChangeXmlID(".home")); }
        });
    },
    AddActionButtonEvent = function (campaignID, nextActionToDo, requestUrl) {

        var url = MakeRequestToMVC("Campaign", "AddActionButtonEvent");
        $.daisAjax({
            cache: false,
            type: "POST",
            url: url,
            data: "campaignID=" + campaignID,
            dataType: "html",
            success: function (data) {
                if (typeof (nextActionToDo) == "function") {
                    nextActionToDo(requestUrl);
                }
            }
        });
    }


    return {
        CloseCampaign: CloseCampaign,
        AddActionButtonEvent : AddActionButtonEvent
    };

}();
//Create our namespace 
DAIS.createNS("DAIS.APERSON.SECURITY");


DAIS.APERSON.SECURITY.SessionCountdown = function SessionCountdown() {
    var setSessionChecker = function (sessionCountDownInSec) {
        
        sessionCountdownDefaultValue = sessionCountDownInSec;
        countdownInSec = sessionCountDownInSec;
        sessionCountdownSecondToShowMessage = sessionCountdownDefaultValue - (SessionCountdownMinutesAfterShowMessage * 60);

        refreshCountdownTimer = setInterval(function () { countdownTimer() }, 1000); //1 sec
    }

    var updateSessionCountdown = function (sessionCountDownInSec) {
        countdownInSec = sessionCountDownInSec;
    }

    var updateSessionCountdownToDefaultValue = function () {
        //set default countdown for pickers, this variable is from welcome control
        if (typeof sessionCountdownDefaultValue != 'undefined') {
            countdownInSec = sessionCountdownDefaultValue;
        }
    }

    var getSessionCountdown = function () {
        return countdownInSec;
    }

    var isSessionExpired = function ()
    {
        return !countdownInSec || countdownInSec < 0;
    }

    var countdownTimer = function () {

        countdownInSec--;

        var countdownInMinutes = Math.ceil(countdownInSec / 60);
        var sessionCountdownDiv = $("#SessionCountdown");
        var sessionCountdownExpiredInMinutesDiv = $("#SessionCountdownExpiredInMinutes");

        if(isSessionExpired())
        {
            sessionCountdownDiv.html(ID_STR_SESSION_EXPIRED);
            clearInterval(refreshCountdownTimer);
        }
        else if (countdownInSec < 60) {
            sessionCountdownDiv.show();
            sessionCountdownDiv.addClass("redtext");
            sessionCountdownExpiredInMinutesDiv.html("00:" + ("00" + countdownInSec).slice(-2));
        }
        else if (countdownInSec <= sessionCountdownSecondToShowMessage) {
            sessionCountdownDiv.show();
            sessionCountdownDiv.removeClass("redtext");
            sessionCountdownExpiredInMinutesDiv.html(countdownInMinutes);
        }
        else {
            sessionCountdownDiv.hide();
        }

        //update countdown from server on 65 and 5 seconds to be sure that data is acurate
        //if we have open site in other tab or window
        if (countdownInSec == 65 || countdownInSec == 5) {
            checkServerSideCountdown();
        }

        
    }

    var checkServerSideCountdown = function () {

        var url = MakeRequestToMVC("SessionCountdown", "GetSessionExpiration");
        $.daisAjax({
            cache: false,
            type: "POST",
            url: url,
            dataType: "html",
            success: function (data) {
                }
        });
    }
    

    var countdownInSec;
    var refreshCountdownTimer;
    var sessionCountdownDefaultValue;
    var sessionCountdownSecondToShowMessage

    return {
        setSessionChecker: setSessionChecker,
        updateSessionCountdown: updateSessionCountdown,
        updateSessionCountdownToDefaultValue: updateSessionCountdownToDefaultValue,
        getSessionCountdown: getSessionCountdown,
        isSessionExpired: isSessionExpired
    }

}();
/*****************************************************************************/
/*** config.js ***/
/*****************************************************************************/

var DaisConfiguration = new function()
{///<summary>namespace DaisConfiguration</summary>

	this.Loris = new function()
	{///<summary>section Loris</summary>

		//enable autoUpdate - true, false
		this.UpdaterEnabled = true;
		
		//update time is seconds
		this.UpdaterTimeout = 31;

	    //start updater with delay timeout
		this.StartDelay = 31;

		//enable Log4JS - true, false
		this.LogEnabled = false;

	    //update time is seconds
		this.UpdaterTimeoutForUtilPage = 2;
	}

	this.Log4js = new function()
	{///<summary>section LOG4JS</summary>

		this.ConsoleAccessKey = "Ctrl+l";
	}
}
/**
 * http://www.openjs.com/scripts/events/keyboard_shortcuts/
 * Version : 2.01.B
 * By Binny V A
 * License : BSD
 */
shortcut = {
    'all_shortcuts': {},//All the shortcuts are stored in this array
    'add': function (shortcut_combination, callback, opt)
    {
        //Provide a set of default options
        var default_options = {
            'type': 'keydown',
            'propagate': false,
            'disable_in_input': false,
            'target': document,
            'keycode': false
        }
        if(!opt) opt = default_options;
        else
        {
            for(var dfo in default_options)
            {
                if(typeof opt[dfo] == 'undefined') opt[dfo] = default_options[dfo];
            }
        }

        var ele = opt.target;
        if(typeof opt.target == 'string') ele = document.getElementById(opt.target);
        var ths = this;
        shortcut_combination = shortcut_combination.toLowerCase();

        //The function to be called at keypress
        var func = function (e)
        {
            e = e || window.event;

            if(opt['disable_in_input'])
            { //Don't enable shortcut keys in Input, Textarea fields
                var element;
                if(e.target) element = e.target;
                else if(e.srcElement) element = e.srcElement;
                if(element.nodeType == 3) element = element.parentNode;

                if(element.tagName == 'INPUT' || element.tagName == 'TEXTAREA') return;
            }

            //Find Which key is pressed
            if(e.keyCode) code = e.keyCode;
            else if(e.which) code = e.which;
            var character = String.fromCharCode(code).toLowerCase();

            if(code == 188) character = ","; //If the user presses , when the type is onkeydown
            if(code == 190) character = "."; //If the user presses , when the type is onkeydown

            var keys = shortcut_combination.split("+");
            //Key Pressed - counts the number of valid keypresses - if it is same as the number of keys, the shortcut function is invoked
            var kp = 0;

            //Work around for stupid Shift key bug created by using lowercase - as a result the shift+num combination was broken
            var shift_nums = {
                "`": "~",
                "1": "!",
                "2": "@",
                "3": "#",
                "4": "$",
                "5": "%",
                "6": "^",
                "7": "&",
                "8": "*",
                "9": "(",
                "0": ")",
                "-": "_",
                "=": "+",
                ";": ":",
                "'": "\"",
                ",": "<",
                ".": ">",
                "/": "?",
                "\\": "|"
            }
            //Special Keys - and their codes
            var special_keys = {
                'esc': 27,
                'escape': 27,
                'tab': 9,
                'space': 32,
                'return': 13,
                'enter': 13,
                'backspace': 8,

                'scrolllock': 145,
                'scroll_lock': 145,
                'scroll': 145,
                'capslock': 20,
                'caps_lock': 20,
                'caps': 20,
                'numlock': 144,
                'num_lock': 144,
                'num': 144,

                'pause': 19,
                'break': 19,

                'insert': 45,
                'home': 36,
                'delete': 46,
                'end': 35,

                'pageup': 33,
                'page_up': 33,
                'pu': 33,

                'pagedown': 34,
                'page_down': 34,
                'pd': 34,

                'left': 37,
                'up': 38,
                'right': 39,
                'down': 40,

                'f1': 112,
                'f2': 113,
                'f3': 114,
                'f4': 115,
                'f5': 116,
                'f6': 117,
                'f7': 118,
                'f8': 119,
                'f9': 120,
                'f10': 121,
                'f11': 122,
                'f12': 123
            }

            var modifiers = {
                shift: { wanted: false, pressed: false },
                ctrl: { wanted: false, pressed: false },
                alt: { wanted: false, pressed: false },
                meta: { wanted: false, pressed: false }	//Meta is Mac specific
            };

            if(e.ctrlKey) modifiers.ctrl.pressed = true;
            if(e.shiftKey) modifiers.shift.pressed = true;
            if(e.altKey) modifiers.alt.pressed = true;
            if(e.metaKey) modifiers.meta.pressed = true;

            for(var i = 0; k = keys[i], i < keys.length; i++)
            {
                //Modifiers
                if(k == 'ctrl' || k == 'control')
                {
                    kp++;
                    modifiers.ctrl.wanted = true;

                } else if(k == 'shift')
                {
                    kp++;
                    modifiers.shift.wanted = true;

                } else if(k == 'alt')
                {
                    kp++;
                    modifiers.alt.wanted = true;
                } else if(k == 'meta')
                {
                    kp++;
                    modifiers.meta.wanted = true;
                } else if(k.length > 1)
                { //If it is a special key
                    if(special_keys[k] == code) kp++;

                } else if(opt['keycode'])
                {
                    if(opt['keycode'] == code) kp++;

                } else
                { //The special keys did not match
                    if(character == k) kp++;
                    else
                    {
                        if(shift_nums[character] && e.shiftKey)
                        { //Stupid Shift key bug created by using lowercase
                            character = shift_nums[character];
                            if(character == k) kp++;
                        }
                    }
                }
            }

            if(kp == keys.length &&
						modifiers.ctrl.pressed == modifiers.ctrl.wanted &&
						modifiers.shift.pressed == modifiers.shift.wanted &&
						modifiers.alt.pressed == modifiers.alt.wanted &&
						modifiers.meta.pressed == modifiers.meta.wanted)
            {
                callback(e);

                if(!opt['propagate'])
                { //Stop the event
                    //e.cancelBubble is supported by IE - this will kill the bubbling process.
                    e.cancelBubble = true;
                    e.returnValue = false;

                    //e.stopPropagation works in Firefox.
                    if(e.stopPropagation)
                    {
                        e.stopPropagation();
                        e.preventDefault();
                    }
                    return false;
                }
            }
        }
        this.all_shortcuts[shortcut_combination] = {
            'callback': func,
            'target': ele,
            'event': opt['type']
        };
        //Attach the function with the event
        if(ele.addEventListener) ele.addEventListener(opt['type'], func, false);
        else if(ele.attachEvent) ele.attachEvent('on' + opt['type'], func);
        else ele['on' + opt['type']] = func;
    },

    //Remove the shortcut - just specify the shortcut and I will remove the binding
    'remove': function (shortcut_combination)
    {
        shortcut_combination = shortcut_combination.toLowerCase();
        var binding = this.all_shortcuts[shortcut_combination];
        delete (this.all_shortcuts[shortcut_combination])
        if(!binding) return;
        var type = binding['event'];
        var ele = binding['target'];
        var callback = binding['callback'];

        if(ele.detachEvent) ele.detachEvent('on' + type, callback);
        else if(ele.removeEventListener) ele.removeEventListener(type, callback, false);
        else ele['on' + type] = false;
    }
}

/*
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/*jsl:option explicit*/

/**
 * @fileoverview log4js is a library to log in JavaScript in similar manner 
 * than in log4j for Java. The API should be nearly the same.
 * 
 * This file contains all log4js code and is the only file required for logging.
 * 
 * <h3>Example:</h3>
 * <pre>
 *  var log = new Log4js.getLogger("some-category-name"); //create logger instance
 *  log.setLevel(Log4js.Level.TRACE); //set the Level
 *  log.addAppender(new ConsoleAppender(log, false)); // console that launches in new window
 
 *  // if multiple appenders are set all will log
 *  log.addAppender(new ConsoleAppender(log, true)); // console that is in-line in the page
 *  log.addAppender(new FileAppender("C:\\somefile.log")); // file appender logs to C:\\somefile.log
 * 
 *  ...
 * 
 *  //call the log
 *  log.trace("trace me" );
 * </pre>
 *
 * @version 0.3
 * @author Stephan Strittmatter - http://jroller.com/page/stritti
 * @author Seth Chisamore - http://www.chisamore.com
 * @since 2005-05-20
 * Website: http://log4js.berlios.de
 */
 
 /*
 plam 20110714
	changed 'access key link' to use SHORTCUTS library
	changed accesskey to use DaisConfiguration
 */
var Log4js = {
	
	/** 
	 * Current version of log4js. 
	 * @static
	 * @final
	 */
  	version: "1.0",

	/**  
	 * Date of logger initialized.
	 * @static
	 * @final
	 */
	applicationStartDate: new Date(),
		
	/**  
	 * Hashtable of loggers.
	 * @static
	 * @final
	 * @private  
	 */
	loggers: {},
	
	/**
	 * Get a logger instance. Instance is cached on categoryName level.
	 * @param  {String} categoryName name of category to log to.
	 * @return {Logger} instance of logger for the category
	 * @static
	 */
	getLogger: function(categoryName) {
		
		// Use default logger if categoryName is not specified or invalid
		if (!(typeof categoryName == "string")) {
			categoryName = "[default]";
		}

		if (!Log4js.loggers[categoryName]) {
			// Create the logger for this name if it doesn't already exist
			Log4js.loggers[categoryName] = new Log4js.Logger(categoryName);
		}
		
		return Log4js.loggers[categoryName];
	},
	
	/**
	 * Get the default logger instance.
	 * @return {Logger} instance of default logger
	 * @static
	 */
	getDefaultLogger: function() {
		return Log4js.getLogger("[default]"); 
	},
	
  	/**
  	 * Atatch an observer function to an elements event browser independent.
  	 * 
  	 * @param element element to attach event
  	 * @param name name of event
  	 * @param observer observer method to be called
  	 * @private
  	 */
  	attachEvent: function (element, name, observer) {
		if (element.addEventListener) { //DOM event model
			element.addEventListener(name, observer, false);
    	} else if (element.attachEvent) { //M$ event model
			element.attachEvent('on' + name, observer);
    	}
	}
	
	/**
	 * Load a JS-script dynamically.
	 * @param {String} src
	 */
/*	$import: function (src) {
		var documentScripts = document.getElementsByTagName("script");
	
		for (index = 0; index < documentScripts.length; ++index)
		{
			var documentScript = documentScripts[index];
			if (documentScript.src == src) {
				return false;
			}
		}
		
		var script = document.createElement('script');
		script.type = 'text/javascript';
		script.src = src;
		document.getElementsByTagName('head')[0].appendChild(script); 
		
		return true;
	}
	*/
};

/**
 * Internal object extension (OO) methods.
 * 
 * @private
 * @ignore
 */
Log4js.extend = function(destination, source) {
  for (property in source) {
    destination[property] = source[property];
  }
  return destination;
}
    
/**
 * Functions taken from Prototype library,  
 * didn't want to require for just few functions.
 * More info at {@link http://prototype.conio.net/}
 * @private
 */	
Log4js.bind = function(fn, object) {
  return function() {
        return fn.apply(object, arguments);
  };
};

/**
 * Log4js.Level Enumeration. Do not use directly. Use static objects instead.
 * @constructor
 * @param {Number} level number of level
 * @param {String} levelString String representation of level
 * @private
 */
Log4js.Level = function(level, levelStr) {
	this.level = level;
	this.levelStr = levelStr;
};

Log4js.Level.prototype =  {
	/** 
	 * converts given String to corresponding Level
	 * @param {String} sArg String value of Level
	 * @param {Log4js.Level} defaultLevel default Level, if no String representation
	 * @return Level object
	 * @type Log4js.Level
	 */
	toLevel: function(sArg, defaultLevel) {                  
				
		if(sArg === null) {
			return defaultLevel;
		}
		
		if(typeof sArg == "string") { 
			var s = sArg.toUpperCase();
			if(s == "ALL") {return Log4js.Level.ALL;}
			if(s == "DEBUG") {return Log4js.Level.DEBUG;}
			if(s == "INFO") {return Log4js.Level.INFO;}
			if(s == "WARN") {return Log4js.Level.WARN;}
			if(s == "ERROR") {return Log4js.Level.ERROR;}
			if(s == "FATAL") {return Log4js.Level.FATAL;}
			if(s == "OFF") {return Log4js.Level.OFF;}
			if(s == "TRACE") {return Log4js.Level.TRACE;}
			return defaultLevel;
		} else if(typeof sArg == "number") {
			switch(sArg) {
				case ALL_INT: return Log4js.Level.ALL;
				case DEBUG_INT: return Log4js.Level.DEBUG;
				case INFO_INT: return Log4js.Level.INFO;
				case WARN_INT: return Log4js.Level.WARN;
				case ERROR_INT: return Log4js.Level.ERROR;
				case FATAL_INT: return Log4js.Level.FATAL;
				case OFF_INT: return Log4js.Level.OFF;
				case TRACE_INT: return Log4js.Level.TRACE;
				default: return defaultLevel;
			}
		} else {
			return defaultLevel;	
		}
	},	
	/** 
	 * @return  converted Level to String
	 * @type String
	 */		
	toString: function() {
		return this.levelStr;	
	},
	/** 
	 * @return internal Number value of Level
	 * @type Number
	 */			
	valueOf: function() {
		return this.level;
	}
};

// Static variables
/** 
 * @private
 */
Log4js.Level.OFF_INT = Number.MAX_VALUE;
/** 
 * @private
 */
Log4js.Level.FATAL_INT = 50000;
/** 
 * @private
 */
Log4js.Level.ERROR_INT = 40000;
/** 
 * @private
 */
Log4js.Level.WARN_INT = 30000;
/** 
 * @private
 */
Log4js.Level.INFO_INT = 20000;
/** 
 * @private
 */
Log4js.Level.DEBUG_INT = 10000;
/** 
 * @private
 */
Log4js.Level.TRACE_INT = 5000;
/** 
 * @private
 */
Log4js.Level.ALL_INT = Number.MIN_VALUE;

/** 
 * Logging Level OFF - all disabled
 * @type Log4js.Level
 * @static
 */
Log4js.Level.OFF = new Log4js.Level(Log4js.Level.OFF_INT, "OFF");
/** 
 * Logging Level Fatal
 * @type Log4js.Level
 * @static
 */
Log4js.Level.FATAL = new Log4js.Level(Log4js.Level.FATAL_INT, "FATAL");
/** 
 * Logging Level Error
 * @type Log4js.Level
 * @static
 */
Log4js.Level.ERROR = new Log4js.Level(Log4js.Level.ERROR_INT, "ERROR"); 
/** 
 * Logging Level Warn
 * @type Log4js.Level
 * @static
 */
Log4js.Level.WARN = new Log4js.Level(Log4js.Level.WARN_INT, "WARN"); 
/** 
 * Logging Level Info
 * @type Log4js.Level
 * @static
 */
Log4js.Level.INFO = new Log4js.Level(Log4js.Level.INFO_INT, "INFO");     
/** 
 * Logging Level Debug
 * @type Log4js.Level
 * @static
 */
Log4js.Level.DEBUG = new Log4js.Level(Log4js.Level.DEBUG_INT, "DEBUG");  
/** 
 * Logging Level Trace
 * @type Log4js.Level
 * @static
 */
Log4js.Level.TRACE = new Log4js.Level(Log4js.Level.TRACE_INT, "TRACE");  
/** 
 * Logging Level All - All traces are enabled
 * @type Log4js.Level
 * @static
 */
Log4js.Level.ALL = new Log4js.Level(Log4js.Level.ALL_INT, "ALL"); 

/**
 * Log4js CustomEvent
 * @constructor
 * @author Corey Johnson - original code in Lumberjack (http://gleepglop.com/javascripts/logger/)
 * @author Seth Chisamore - adapted for Log4js
 * @private
 */
Log4js.CustomEvent = function() {
	this.listeners = [];
};

Log4js.CustomEvent.prototype = {
 
 	/**
 	 * @param method method to be added
 	 */ 
	addListener : function(method) {
		this.listeners.push(method);
	},

 	/**
 	 * @param method method to be removed
 	 */ 
	removeListener : function(method) {
		var foundIndexes = this.findListenerIndexes(method);

		for(var i = 0; i < foundIndexes.length; i++) {
			this.listeners.splice(foundIndexes[i], 1);
		}
	},

 	/**
 	 * @param handler
 	 */ 
	dispatch : function(handler) {
		for(var i = 0; i < this.listeners.length; i++) {
			try {
				this.listeners[i](handler);
			}
			catch (e) {
				log4jsLogger.warn("Could not run the listener " + this.listeners[i] + ". \n" + e);
			}
		}
	},

	/**
	 * @private
	 * @param method
	 */
	findListenerIndexes : function(method) {
		var indexes = [];
		for(var i = 0; i < this.listeners.length; i++) {			
			if (this.listeners[i] == method) {
				indexes.push(i);
			}
		}

		return indexes;
	}
};

/**
 * Models a logging event.
 * @constructor
 * @param {String} categoryName name of category
 * @param {Log4js.Level} level level of message
 * @param {String} message message to log
 * @param {Log4js.Logger} logger the associated logger
 * @author Seth Chisamore
 */
Log4js.LoggingEvent = function(categoryName, level, message, exception, logger) {
	/**
	 * the timestamp of the Logging Event
	 * @type Date
	 * @private
	 */
	this.startTime = new Date();
	/**
	 * category of event
	 * @type String
	 * @private
	 */
	this.categoryName = categoryName;
	/**
	 * the logging message
	 * @type String
	 * @private
	 */
	this.message = message;
	/**
	 * the logging exception
	 * @type Exception
	 * @private
	 */
	this.exception = exception;
	/**
	 * level of log
	 * @type Log4js.Level
	 * @private
	 */
	this.level = level;
	/**
	 * reference to logger
	 * @type Log4js.Logger
	 * @private
	 */
	this.logger = logger;
};

Log4js.LoggingEvent.prototype = {	
	/**
	 * get the timestamp formatted as String.
	 * @return {String} formatted timestamp
	 * @see Log4js#setDateFormat()
	 */
	getFormattedTimestamp: function() {
		if(this.logger) {
			return this.logger.getFormattedTimestamp(this.startTime);
		} else {
			return this.startTime.toGMTString();
		}
	}
};

/**
 * Logger to log messages to the defined appender.</p>
 * Default appender is Appender, which is ignoring all messages. Please
 * use setAppender() to set a specific appender (e.g. WindowAppender).
 * use {@see Log4js#getLogger(String)} to get an instance.
 * @constructor
 * @param name name of category to log to
 * @author Stephan Strittmatter
 */
Log4js.Logger = function(name) {
	this.loggingEvents = [];
	this.appenders = [];
	/** category of logger */
	this.category = name || "";
	/** level to be logged */
	this.level = Log4js.Level.FATAL;
	
	this.dateformat = Log4js.DateFormatter.DEFAULT_DATE_FORMAT;
	this.dateformatter = new Log4js.DateFormatter();
	
	this.onlog = new Log4js.CustomEvent();
	this.onclear = new Log4js.CustomEvent();
	
	/** appender to write in */
	this.appenders.push(new Log4js.Appender(this));
	
	// if multiple log objects are instantiated this will only log to the log 
	// object that is declared last can't seem to get the attachEvent method to 
	// work correctly
	try {
		window.onerror = this.windowError.bind(this);
	} catch (e) {
		//log4jsLogger.fatal(e);
	}
};

Log4js.Logger.prototype = {

	/**
	 * add additional appender. DefaultAppender always is there.
	 * @param appender additional wanted appender
	 */
	addAppender: function(appender) {
		if (appender instanceof Log4js.Appender) {
			appender.setLogger(this);
			this.appenders.push(appender);			
		} else {
			throw "Not instance of an Appender: " + appender;
		}
	},

	/**
	 * set Array of appenders. Previous Appenders are cleared and removed.
	 * @param {Array} appenders Array of Appenders
	 */
	setAppenders: function(appenders) {
		//clear first all existing appenders
		for(var i = 0; i < this.appenders.length; i++) {
			this.appenders[i].doClear();
		}
		
		this.appenders = appenders;
		
		for(var j = 0; j < this.appenders.length; j++) {
			this.appenders[j].setLogger(this);
		}
	},
	
	/**
	 * Set the Loglevel default is LogLEvel.TRACE
	 * @param level wanted logging level
	 */
	setLevel: function(level) {
		this.level = level;
	},
	
	/** 
	 * main log method logging to all available appenders 
	 * @private
	 */
	log: function(logLevel, message, exception) {
		var loggingEvent = new Log4js.LoggingEvent(this.category, logLevel, 
			message, exception, this);
		this.loggingEvents.push(loggingEvent);
		this.onlog.dispatch(loggingEvent);
	},
	
	/** clear logging */
	clear : function () {
		try{
			this.loggingEvents = [];
			this.onclear.dispatch();
		} catch(e){}
	},
	/** checks if Level Trace is enabled */
	isTraceEnabled: function() {
		if (this.level.valueOf() <= Log4js.Level.TRACE.valueOf()) {
			return true;
		}
		return false;
	},
	/** 
	 * Trace messages 
	 * @param message {Object} message to be logged
	 */
	trace: function(message) {
		if (this.isTraceEnabled()) {
			this.log(Log4js.Level.TRACE, message, null);
		}
	},
	/** checks if Level Debug is enabled */
	isDebugEnabled: function() {
		if (this.level.valueOf() <= Log4js.Level.DEBUG.valueOf()) {
			return true;
		}
		return false;
	},
	/** 
	 * Debug messages 
	 * @param message {Object} message to be logged
	 */
	debug: function(message) {
		if (this.isDebugEnabled()) {
			this.log(Log4js.Level.DEBUG, message, null);
		}
	},
	/**
	 * Debug messages 
	 * @param {Object} message  message to be logged
	 * @param {Throwable} throwable 
	 */
	debug: function(message, throwable) {
		if (this.isDebugEnabled()) {
			this.log(Log4js.Level.DEBUG, message, throwable);
		}
	},	
	/** checks if Level Info is enabled */
	isInfoEnabled: function() {
		if (this.level.valueOf() <= Log4js.Level.INFO.valueOf()) {
			return true;
		}
		return false;
	},
	/** 
	 * logging info messages 
	 * @param {Object} message  message to be logged
	 */
	info: function(message) {
		if (this.isInfoEnabled()) {
			this.log(Log4js.Level.INFO, message, null);
		}
	},
	/** 
	 * logging info messages 
	 * @param {Object} message  message to be logged
	 * @param {Throwable} throwable  
	 */
	info: function(message, throwable) {
		if (this.isInfoEnabled()) {
			this.log(Log4js.Level.INFO, message, throwable);
		}
	},
	/** checks if Level Warn is enabled */
	isWarnEnabled: function() {
		if (this.level.valueOf() <= Log4js.Level.WARN.valueOf()) {
			return true;
		}
		return false;
	},

	/** logging warn messages */
	warn: function(message) {
		if (this.isWarnEnabled()) {
			this.log(Log4js.Level.WARN, message, null);
		}
	},
	/** logging warn messages */
	warn: function(message, throwable) {
		if (this.isWarnEnabled()) {
			this.log(Log4js.Level.WARN, message, throwable);
		}
	},
	/** checks if Level Error is enabled */
	isErrorEnabled: function() {
		if (this.level.valueOf() <= Log4js.Level.ERROR.valueOf()) {
			return true;
		}
		return false;
	},
	/** logging error messages */
	error: function(message) {
		if (this.isErrorEnabled()) {
			this.log(Log4js.Level.ERROR, message, null);
		}
	},
	/** logging error messages */
	error: function(message, throwable) {
		if (this.isErrorEnabled()) {
			this.log(Log4js.Level.ERROR, message, throwable);
		}
	},
	/** checks if Level Fatal is enabled */
	isFatalEnabled: function() {
		if (this.level.valueOf() <= Log4js.Level.FATAL.valueOf()) {
			return true;
		}
		return false;
	},
	/** logging fatal messages */
	fatal: function(message) {
		if (this.isFatalEnabled()) {
			this.log(Log4js.Level.FATAL, message, null);
		}
	},
	/** logging fatal messages */
	fatal: function(message, throwable) {
		if (this.isFatalEnabled()) {
			this.log(Log4js.Level.FATAL, message, throwable);
		}
	},	
	/** 
	 * Capture main window errors and log as fatal.
	 * @private
	 */
	windowError: function(msg, url, line){
		var message = "Error in (" + (url || window.location) + ") on line "+ line +" with message (" + msg + ")";
		this.log(Log4js.Level.FATAL, message, null);	
	},
	
	/**
	 * Set the date format of logger. Following switches are supported:
	 * <ul>
	 * <li>yyyy - The year</li>
	 * <li>MM - the month</li>
	 * <li>dd - the day of month<li>
	 * <li>hh - the hour<li>
	 * <li>mm - minutes</li>
	 * <li>O - timezone offset</li>
	 * </ul>
	 * @param {String} format format String for the date
	 * @see #getTimestamp
	 */
	setDateFormat: function(format) {
	 	this.dateformat = format;
	},
	 
	/**
	 * Generates a timestamp using the format set in {Log4js.setDateFormat}.
	 * @param {Date} date the date to format
	 * @see #setDateFormat
	 * @return A formatted timestamp with the current date and time.
	 */
	getFormattedTimestamp: function(date) {
	  return this.dateformatter.formatDate(date, this.dateformat);
	}
};

/**
 * Abstract base class for other appenders. 
 * It is doing nothing.
 *
 * @constructor
 * @param {Log4js.Logger} logger log4js instance this appender is attached to
 * @author Stephan Strittmatter
 */
Log4js.Appender = function () {
	/**
	 * Reference to calling logger
	 * @type Log4js.Logger
	 * @private
	 */
	 this.logger = null;
};

Log4js.Appender.prototype = {
	/** 
	 * appends the given loggingEvent appender specific
	 * @param {Log4js.LoggingEvent} loggingEvent loggingEvent to append
	 */
	doAppend: function(loggingEvent) {
		return;
	},
	/** 
	 * clears the Appender
	 */
	doClear: function() {
		return;
	},
	
	/**
	 * Set the Layout for this appender.
	 * @param {Log4js.Layout} layout Layout for formatting loggingEvent
	 */
	setLayout: function(layout){
		this.layout = layout;
	},
	/**
	 * Set reference to the logger.
	 * @param {Log4js.Logger} the invoking logger
	 */
	setLogger: function(logger){
		// add listener to the logger methods
		logger.onlog.addListener(Log4js.bind(this.doAppend, this));
		logger.onclear.addListener(Log4js.bind(this.doClear, this));
	
		this.logger = logger;
	}
};

/**
 * Interface for Layouts.
 * Use this Layout as "interface" for other Layouts. It is doing nothing.
 *
 * @constructor
 * @author Stephan Strittmatter
 */
Log4js.Layout = function(){return;};
Log4js.Layout.prototype = {
	/** 
	 * Implement this method to create your own layout format.
	 * @param {Log4js.LoggingEvent} loggingEvent loggingEvent to format
	 * @return formatted String
	 * @type String
	 */
	format: function(loggingEvent) {
		return "";
	},
	/** 
	 * Returns the content type output by this layout. 
	 * @return The base class returns "text/plain".
	 * @type String
	 */
	getContentType: function() {
		return "text/plain";
	},
	/** 
	 * @return Returns the header for the layout format. The base class returns null.
	 * @type String
	 */
	getHeader: function() {
		return null;
	},
	/** 
	 * @return Returns the footer for the layout format. The base class returns null.
	 * @type String
	 */
	getFooter: function() {
		return null;
	},
	
	/**
	 * @return Separator between events
	 * @type String
	 */
	getSeparator: function() {
		return "";
	}
};

/**
 * Console Appender writes the logs to a console.  If "inline" is
 * set to "false" the console launches in another window otherwise
 * the window is inline on the page and toggled on and off with "Alt-D".
 * Note: At FireFox &gb; 2.0 the keystroke is little different now: "SHIFT+ALT+D".
 *
 * @constructor
 * @extends Log4js.Appender
 * @param {boolean} isInline boolean value that indicates whether the console be placed inline, default is to launch in new window
 *
 * @author Corey Johnson - original console code in Lumberjack (http://gleepglop.com/javascripts/logger/)
 * @author Seth Chisamore - adapted for use as a log4js appender
 */
Log4js.ConsoleAppender = function(isInline) {
	
	/**
	 * @type Log4js.Layout
	 * @private
	 */
	this.layout = new Log4js.PatternLayout(Log4js.PatternLayout.TTCC_CONVERSION_PATTERN);
	/**
	 * @type boolean
	 * @private
	 */
	this.inline = isInline;

	/**
	 * @type String
	 * @private
	 */
	this.accesskey = DaisConfiguration.Log4js.ConsoleAccessKey;
	
	/**
	 * @private
	 */
	this.tagPattern = null;
	
	this.commandHistory = [];
  	this.commandIndex = 0;
  	
  	/**
  	 * true if popup is blocked.
  	 */
  	this.popupBlocker = false;
  	
  	/**
  	 * current output div-element.
  	 */
  	this.outputElement = null;
  	
  	this.docReference = null;
	this.winReference = null;		
		
	if(this.inline) {
		Log4js.attachEvent(window, 'load', Log4js.bind(this.initialize, this));
	}
};

Log4js.ConsoleAppender.prototype = Log4js.extend(new Log4js.Appender(), {  

	/**
	 * Set the access key to show/hide the inline console (default &quote;d&quote;)
	 * @param key access key to show/hide the inline console
	 */	
	setAccessKey : function(key) {
		this.accesskey = key;
	},
	
	/**
	 * @private
	 */
  	initialize : function() {
		
		if(!this.inline) {
			var doc = null;	
			var win = null;
			window.top.consoleWindow = window.open("", this.logger.category, 
				"left=0,top=0,width=700,height=700,scrollbars=no,status=no,resizable=yes;toolbar=no");
			window.top.consoleWindow.opener = self;
			win = window.top.consoleWindow;
								
			if (!win) { 
				this.popupBlocker=true; 
				alert("Popup window manager blocking the Log4js popup window to bedisplayed.\n\n" 
					+ "Please disabled this to properly see logged events.");  
			} else {	

				doc = win.document;
				doc.open();
				doc.write("<!DOCTYPE html PUBLIC -//W3C//DTD XHTML 1.0 Transitional//EN ");
				doc.write("  http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd>\n\n");
				doc.write("<html><head><title>Log4js - " + this.logger.category + "</title>\n");
				doc.write("</head><body style=\"background-color:darkgray\"></body>\n");
				win.blur();
				win.focus();
			}
			
			this.docReference = doc;
			this.winReference = win;
		} else {
			this.docReference = document;
			this.winReference = window;			
		}
				
		this.outputCount = 0;
		this.tagPattern = ".*";
	  
		// I hate writing javascript in HTML... but what's a better alternative
		this.logElement = this.docReference.createElement('div');
		this.docReference.body.appendChild(this.logElement);
		this.logElement.style.display = 'none';
		
		this.logElement.style.position = "absolute";
		this.logElement.style.left = '0px';
		this.logElement.style.width = '100%';
	
		this.logElement.style.textAlign = "left";
		this.logElement.style.fontFamily = "lucida console";
		this.logElement.style.fontSize = "100%";
		this.logElement.style.backgroundColor = 'darkgray';      
		this.logElement.style.opacity = 0.9;
		this.logElement.style.zIndex = 2000; 
	
		// Add toolbarElement
		this.toolbarElement = this.docReference.createElement('div');
		this.logElement.appendChild(this.toolbarElement);     
		this.toolbarElement.style.padding = "0 0 0 2px";
	
		// Add buttons        
		this.buttonsContainerElement = this.docReference.createElement('span');
		this.toolbarElement.appendChild(this.buttonsContainerElement); 
	
		if(this.inline) {
			var closeButton = this.docReference.createElement('button');
			closeButton.style.cssFloat = "right";
			closeButton.style.styleFloat = "right"; // IE dom bug...doesn't understand cssFloat
			closeButton.style.color = "black";
			closeButton.innerHTML = "close";
			closeButton.onclick = Log4js.bind(this.toggle, this);
			this.buttonsContainerElement.appendChild(closeButton);
		}
		
		var clearButton = this.docReference.createElement('button');
		clearButton.style.cssFloat = "right";
		clearButton.style.styleFloat = "right"; // IE dom bug...doesn't understand cssFloat
		clearButton.style.color = "black";
		clearButton.innerHTML = "clear";
		clearButton.onclick = Log4js.bind(this.logger.clear, this.logger);
		this.buttonsContainerElement.appendChild(clearButton);
	

		//Add CategoryName and  Level Filter
		this.tagFilterContainerElement = this.docReference.createElement('span');
		this.toolbarElement.appendChild(this.tagFilterContainerElement);
		this.tagFilterContainerElement.style.cssFloat = 'left';
		
		this.tagFilterContainerElement.appendChild(this.docReference.createTextNode("Log4js - " + this.logger.category));
		this.tagFilterContainerElement.appendChild(this.docReference.createTextNode(" | Level Filter: "));
		
		this.tagFilterElement = this.docReference.createElement('input');
		this.tagFilterContainerElement.appendChild(this.tagFilterElement);
		this.tagFilterElement.style.width = '200px';                    
		this.tagFilterElement.value = this.tagPattern;    
		this.tagFilterElement.setAttribute('autocomplete', 'off'); // So Firefox doesn't flip out
		
		Log4js.attachEvent(this.tagFilterElement, 'keyup', Log4js.bind(this.updateTags, this));
		Log4js.attachEvent(this.tagFilterElement, 'click', Log4js.bind( function() {this.tagFilterElement.select();}, this));
		
		// Add outputElement
		this.outputElement = this.docReference.createElement('div');
		this.logElement.appendChild(this.outputElement);  
		this.outputElement.style.overflow = "auto";              
		this.outputElement.style.clear = "both";
		this.outputElement.style.height = (this.inline) ? ("200px"):("650px");
		this.outputElement.style.width = "100%";
		this.outputElement.style.backgroundColor = 'black'; 
			  
		this.inputContainerElement = this.docReference.createElement('div');
		this.inputContainerElement.style.width = "100%";
		this.logElement.appendChild(this.inputContainerElement);      
		
		this.inputElement = this.docReference.createElement('input');
		this.inputContainerElement.appendChild(this.inputElement);  
		this.inputElement.style.width = '100%';
		this.inputElement.style.borderWidth = '0px'; // Inputs with 100% width always seem to be too large (I HATE THEM) they only work if the border, margin and padding are 0
		this.inputElement.style.margin = '0px';
		this.inputElement.style.padding = '0px';
		this.inputElement.value = 'Type command here'; 
		this.inputElement.setAttribute('autocomplete', 'off'); // So Firefox doesn't flip out
	
		Log4js.attachEvent(this.inputElement, 'keyup', Log4js.bind(this.handleInput, this));
		Log4js.attachEvent(this.inputElement, 'click', Log4js.bind( function() {this.inputElement.select();}, this));
		
		if(this.inline){
			window.setInterval(Log4js.bind(this.repositionWindow, this), 500);
			this.repositionWindow();	
			// Allow acess key link          
			shortcut.add(this.accesskey, Log4js.bind(this.toggle, this));
		} else {
			this.show();
		}
	},
	/**
	 * shows/hide an element
	 * @private
	 * @return true if shown
	 */
	toggle : function() {
		if (this.logElement.style.display == 'none') {
		 	this.show();
		 	return true;
		} else {
			this.hide();
			return false;
		}
	}, 
	/**
	 * @private
	 */
	show : function() {
		this.logElement.style.display = '';
	  	this.outputElement.scrollTop = this.outputElement.scrollHeight; // Scroll to bottom when toggled
 	  	this.inputElement.select();
	}, 
	/**
	 * @private
	 */	
	hide : function() {
		this.logElement.style.display = 'none';
	},  
	/**
	 * @private
	 * @param message
	 * @style
	 */	
	output : function(message, style) {

		// If we are at the bottom of the window, then keep scrolling with the output			
		var shouldScroll = (this.outputElement.scrollTop + (2 * this.outputElement.clientHeight)) >= this.outputElement.scrollHeight;
		
		this.outputCount++;
	  	style = (style ? style += ';' : '');	  	
	  	style += 'padding:1px;margin:0 0 5px 0';	     
		  
		if (this.outputCount % 2 === 0) {
			style += ";background-color:#101010";
		}
	  	
	  	message = message || "undefined";
	  	message = message.toString();
	  	
	  	this.outputElement.innerHTML += "<pre style='" + style + "'>" + message + "</pre>";
	  	
	  	if (shouldScroll) {				
			this.outputElement.scrollTop = this.outputElement.scrollHeight;
		}
	},
	
	/**
	 * @private
	 */
	updateTags : function() {
		
		var pattern = this.tagFilterElement.value;
	
		if (this.tagPattern == pattern) {
			return;
		}
		
		try {
			new RegExp(pattern);
		} catch (e) {
			return;
		}
		
		this.tagPattern = pattern;

		this.outputElement.innerHTML = "";
		
		// Go through each log entry again
		this.outputCount = 0;
		for (var i = 0; i < this.logger.loggingEvents.length; i++) {
  			this.doAppend(this.logger.loggingEvents[i]);
		}  
	},

	/**
	 * @private
	 */	
	repositionWindow : function() {
		var offset = window.pageYOffset || this.docReference.documentElement.scrollTop || this.docReference.body.scrollTop;
		var pageHeight = self.innerHeight || this.docReference.documentElement.clientHeight || this.docReference.body.clientHeight;
		this.logElement.style.top = (offset + pageHeight - this.logElement.offsetHeight) + "px";
	},

	/**
	 * @param loggingEvent event to be logged
	 * @see Log4js.Appender#doAppend
	 */
	doAppend : function(loggingEvent) {
		
		if(this.popupBlocker) {
			//popup blocked, we return in this case
			return;
		}
		
		if ((!this.inline) && (!this.winReference || this.winReference.closed)) {
			this.initialize();
		}
		
		if (this.tagPattern !== null && 
			loggingEvent.level.toString().search(new RegExp(this.tagPattern, 'igm')) == -1) {
			return;
		}
		
		var style = '';
	  	
		if (loggingEvent.level.toString().search(/ERROR/) != -1) { 
			style += 'color:red';
		} else if (loggingEvent.level.toString().search(/FATAL/) != -1) { 
			style += 'color:red';
		} else if (loggingEvent.level.toString().search(/WARN/) != -1) { 
			style += 'color:orange';
		} else if (loggingEvent.level.toString().search(/DEBUG/) != -1) {
			style += 'color:green';
		} else if (loggingEvent.level.toString().search(/INFO/) != -1) {
			style += 'color:white';
		} else {
			style += 'color:yellow';
		}
	
		this.output(this.layout.format(loggingEvent), style);	
	},

	/**
	 * @see Log4js.Appender#doClear
	 */
	doClear : function() {
		this.outputElement.innerHTML = "";
	},
	/**
	 * @private
	 * @param e
	 */
	handleInput : function(e) {
		if (e.keyCode == 13 ) {      
			var command = this.inputElement.value;
			
			switch(command) {
				case "clear":
					this.logger.clear();  
					break;
					
				default:        
					var consoleOutput = "";
				
					try {
						consoleOutput = eval(this.inputElement.value);
					} catch (e) {  
						this.logger.error("Problem parsing input <" + command + ">" + e.message);
						break;
					}
						
					this.logger.trace(consoleOutput);
					break;
			}        
		
			if (this.inputElement.value !== "" && this.inputElement.value !== this.commandHistory[0]) {
				this.commandHistory.unshift(this.inputElement.value);
			}
		  
			this.commandIndex = 0;
			this.inputElement.value = "";                                                     
		} else if (e.keyCode == 38 && this.commandHistory.length > 0) {
    		this.inputElement.value = this.commandHistory[this.commandIndex];

			if (this.commandIndex < this.commandHistory.length - 1) {
      			this.commandIndex += 1;
      		}
    	} else if (e.keyCode == 40 && this.commandHistory.length > 0) {
    		if (this.commandIndex > 0) {                                      
      			this.commandIndex -= 1;
	    	}                       

			this.inputElement.value = this.commandHistory[this.commandIndex];
	  	} else {
    		this.commandIndex = 0;
    	}
	},
	
	/** 
	 * toString
	 */
	 toString: function() {
	 	return "Log4js.ConsoleAppender[inline=" + this.inline + "]"; 
	 }
}); 

/**
 * Metatag Appender writing the logs to meta tags
 *
 * @extends Log4js.Appender
 * @constructor
 * @param logger log4js instance this appender is attached to
 * @author Stephan Strittmatter
 */
Log4js.MetatagAppender = function() {
	this.currentLine = 0;
};
Log4js.MetatagAppender.prototype = Log4js.extend(new Log4js.Appender(), {  
	/**
	 * @param loggingEvent event to be logged
	 * @see Log4js.Appender#doAppend
	 */
	doAppend: function(loggingEvent) {
		var now = new Date();
		var lines = loggingEvent.message.split("\n");
		var headTag = document.getElementsByTagName("head")[0];

		for (var i = 1; i <= lines.length; i++) {
			var value = lines[i - 1];
			if (i == 1) {
				value = loggingEvent.level.toString() + ": " + value;
			} else {
				value = "> " + value;
			}

			var metaTag = document.createElement("meta");
			metaTag.setAttribute("name", "X-log4js:" + this.currentLine);
			metaTag.setAttribute("content", value);
			headTag.appendChild(metaTag);
			this.currentLine += 1;
		}
	},

	/** 
	 * toString
	 */
	 toString: function() {
	 	return "Log4js.MetatagAppender"; 
	 }
});

/**
 * AJAX Appender sending {@link Log4js.LoggingEvent}s asynchron via 
 * <code>XMLHttpRequest</code> to server.<br />
 * The {@link Log4js.LoggingEvent} is POSTed as response content and is 
 * formatted by the accociated layout. Default layout is {@link Log4js.XMLLayout}. 
 * The <code>threshold</code> defines when the logs 
 * should be send to the server. By default every event is sent on its
 * own (threshold=1). If it is set to 10, then the events are send in groups of
 * 10 events.
 *
 * @extends Log4js.Appender 
 * @constructor
 * @param {Log4js.Logger} logger log4js instance this appender is attached to
 * @param {String} loggingUrl url where appender will post log messages to
 * @author Stephan Strittmatter
 */
Log4js.AjaxAppender = function(loggingUrl) {

	/**
	 * is still esnding data to server
	 * @type boolean
	 * @private
	 */
	this.isInProgress = false;
	
	/**
	 * @type String
	 * @private
	 */
	this.loggingUrl = loggingUrl || "logging.log4js";
	
	/**
	 * @type Integer
	 * @private
	 */
	this.threshold = 1;
	
	/**
	 * timeout when request is aborted.
	 * @private
	 */
	this.timeout = 2000;
	
	/**
	 * List of LoggingEvents which should be send after threshold is reached.
	 * @type Map
	 * @private
	 */
	this.loggingEventMap = new Log4js.FifoBuffer();

	/**
	 * @type Log4js.Layout
	 * @private
	 */
	this.layout = new Log4js.XMLLayout();
	/**
	 * @type XMLHttpRequest
	 * @private
	 */	
	this.httpRequest = null;
};

Log4js.AjaxAppender.prototype = Log4js.extend(new Log4js.Appender(), {  
	/**
	 * sends the logs to the server
	 * @param loggingEvent event to be logged
	 * @see Log4js.Appender#doAppend
	 */
	doAppend: function(loggingEvent) {
		log4jsLogger.trace("> AjaxAppender.append");
	
		if (this.loggingEventMap.length() <= this.threshold || this.isInProgress === true) {
			this.loggingEventMap.push(loggingEvent);
		}
		
		if(this.loggingEventMap.length() >= this.threshold && this.isInProgress === false) {
			//if threshold is reached send the events and reset current threshold
			this.send();
		}
		
		log4jsLogger.trace("< AjaxAppender.append");
	},
	
	/** @see Appender#doClear */
	doClear: function() {
		log4jsLogger.trace("> AjaxAppender.doClear" );
		if(this.loggingEventMap.length() > 0) {
			this.send();
		}
		log4jsLogger.trace("< AjaxAppender.doClear" );
	},
	
	/**
	 * Set the threshold when logs have to be send. Default threshold is 1.
	 * @praram {int} threshold new threshold
	 */
	setThreshold: function(threshold) {
		log4jsLogger.trace("> AjaxAppender.setThreshold: " + threshold );
		this.threshold = threshold;
		log4jsLogger.trace("< AjaxAppender.setThreshold" );
	},
	
	/**
	 * Set the timeout in milli seconds until sending request is aborted.
	 * Default is 2000 ms.
	 * @param {int} milliseconds the new timeout
	 */
	setTimeout: function(milliseconds) {
		this.timeout = milliseconds;
	},
	
	/**
	 * send the request.
	 */
	send: function() {
		if(this.loggingEventMap.length() >0) {
			
			log4jsLogger.trace("> AjaxAppender.send");
			
			
			this.isInProgress = true;
			var a = [];
	
			for(var i = 0; i < this.loggingEventMap.length() && i < this.threshold; i++) {
				a.push(this.layout.format(this.loggingEventMap.pull()));
			} 
					
			var content = this.layout.getHeader();	
			content += a.join(this.layout.getSeparator());
			content += this.layout.getFooter();
			
			var appender = this;
			if(this.httpRequest === null){
				this.httpRequest = this.getXmlHttpRequest();
			}
			this.httpRequest.onreadystatechange = function() {
				appender.onReadyStateChanged.call(appender);
			};
			
			this.httpRequest.open("POST", this.loggingUrl, true);
			// set the request headers.
			//this.httpRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
			this.httpRequest.setRequestHeader("Content-type", this.layout.getContentType());
			//REFERER will be the top-level
			// URI which may differ from the location of the error if
			// it occurs in an included .js file
			this.httpRequest.setRequestHeader("REFERER", location.href);
	 		this.httpRequest.setRequestHeader("Content-length", content.length);
			this.httpRequest.setRequestHeader("Connection", "close");
			this.httpRequest.send( content );
			
			appender = this;
			
			try {
				window.setTimeout(function(){
					log4jsLogger.trace("> AjaxAppender.timeout");
					appender.httpRequest.onreadystatechange = function(){return;};
					appender.httpRequest.abort();
					//this.httpRequest = null;
					appender.isInProgress = false;
		
					if(appender.loggingEventMap.length() > 0) {
						appender.send();
					}
					log4jsLogger.trace("< AjaxAppender.timeout");
				}, this.timeout);
			} catch (e) {
				log4jsLogger.fatal(e);
			}
			log4jsLogger.trace("> AjaxAppender.send");
		}
	},
	
	/**
	 * @private
	 */
	onReadyStateChanged: function() {
		log4jsLogger.trace("> AjaxAppender.onReadyStateChanged");
		var req = this.httpRequest;
		if (this.httpRequest.readyState != 4) { 
			log4jsLogger.trace("< AjaxAppender.onReadyStateChanged: readyState " + req.readyState + " != 4");
			return; 
		}
		
		var success = ((typeof req.status === "undefined") || req.status === 0 || (req.status >= 200 && req.status < 300));
		
		if (success) {
			log4jsLogger.trace("  AjaxAppender.onReadyStateChanged: success");

			//ready sending data
			this.isInProgress = false;

		} else {
			var msg = "  AjaxAppender.onReadyStateChanged: XMLHttpRequest request to URL " + this.loggingUrl + " returned status code " + this.httpRequest.status;
			log4jsLogger.error(msg);
		}
		
		log4jsLogger.trace("< AjaxAppender.onReadyStateChanged: readyState == 4");		
	},
	/**
	 * Get the XMLHttpRequest object independent of browser.
	 * @private
	 */
	getXmlHttpRequest: function() {
		log4jsLogger.trace("> AjaxAppender.getXmlHttpRequest");
		
		var httpRequest = false;

		try {		
			if (window.XMLHttpRequest) { // Mozilla, Safari, IE7...
					httpRequest = new XMLHttpRequest();
				if (httpRequest.overrideMimeType) {
					httpRequest.overrideMimeType(this.layout.getContentType());
				}
			} else if (window.ActiveXObject) { // IE
				try {
					httpRequest = new ActiveXObject("Msxml2.XMLHTTP");
				} catch (e) {
					httpRequest = new ActiveXObject("Microsoft.XMLHTTP");
				}
			}
		} catch (e) {
			httpRequest = false;
		}
		
		if (!httpRequest) {
			log4jsLogger.fatal("Unfortunatelly your browser does not support AjaxAppender for log4js!");
		}
		
		log4jsLogger.trace("< AjaxAppender.getXmlHttpRequest");
		return httpRequest;
	},
	
	/** 
	 * toString
	 */
	 toString: function() {
	 	return "Log4js.AjaxAppender[loggingUrl=" + this.loggingUrl + ", threshold=" + this.threshold + "]"; 
	 }
});

/**
 * File Appender writing the logs to a text file.
 * PLEASE NOTE - Only works in IE and Mozilla 
 * use ActiveX to write file on IE
 * use XPCom components  to write file on Mozilla
 * 
 * @extends Log4js.Appender 
 * @constructor
 * @param logger log4js instance this appender is attached to
 * @param file file log messages will be written to
 * @author Seth Chisamore
 * @author Nicolas Justin njustin@idealx.com
 * @author Gregory Kokanosky gkokanosky@idealx.com
 */
Log4js.FileAppender = function(file) {

	this.layout = new Log4js.SimpleLayout();
	this.isIE = 'undefined';
	
	this.file = file || "log4js.log";	
	
	try{
		this.fso = new ActiveXObject("Scripting.FileSystemObject");
		this.isIE = true;
	} catch(e){
		try {
			netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
			this.fso =  Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);
			this.isIE = false; //mozilla & co
		} catch (e) {
			log4jsLogger.error(e);
		}
	}
};

Log4js.FileAppender.prototype = Log4js.extend(new Log4js.Appender(), {  
	/**
	 * @param loggingEvent event to be logged
	 * @see Log4js.Appender#doAppend
	 */
	doAppend: function(loggingEvent) {
		try {
			var fileHandle = null;
			
			if( this.isIE === 'undefined') {
				log4jsLogger.error("Unsupported ")
			}
			else if( this.isIE ){
				// try opening existing file, create if needed
				fileHandle = this.fso.OpenTextFile(this.file, 8, true);        
				// write out our data
				fileHandle.WriteLine(this.layout.format(loggingEvent));
				fileHandle.close();   
			} else {
				netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
				this.fso.initWithPath(this.file);
    			if(!this.fso.exists()) {
    				//create file if needed
            		this.fso.create(0x00, 0600);
    			}
				
 				fileHandle = Components.classes["@mozilla.org/network/file-output-stream;1"].createInstance(Components.interfaces.nsIFileOutputStream);
        		fileHandle.init( this.fso, 0x04 | 0x08 | 0x10, 064, 0);
				var line = this.layout.format(loggingEvent);
        		fileHandle.write(line, line.length); //write data
        		fileHandle.close();
			}
		} catch (e) {
			log4jsLogger.error(e);
		}
	},
	/*
	 * @see Log4js.Appender#doClear
	 */
	doClear: function() {
		try {
			if( this.isIE ){
				var fileHandle = this.fso.GetFile(this.file);
				fileHandle.Delete();
			} else {
				netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
				this.fso.initWithPath(this.file);
				if(this.fso.exists()) {
					this.fso.remove(false);
				}
			}
		} catch (e) {
			log4jsLogger.error(e);
		}
	},
	
	/** 
	 * toString
	 */
	 toString: function() {
	 	return "Log4js.FileAppender[file=" + this.file + "]"; 
	 }
});

/**
 * Windows Event Appender writes the logs to the Windows Event log.
 * PLEASE NOTE - Only works in IE..uses ActiveX to write to Windows Event log
 *
 * @extends Log4js.Appender 
 * @constructor
 * @param logger log4js instance this appender is attached to
 * @author Seth Chisamore
 */
Log4js.WindowsEventAppender = function() {
	
	this.layout = new Log4js.SimpleLayout();
	
	try {
		this.shell = new ActiveXObject("WScript.Shell");
	} catch(e) {
		log4jsLogger.error(e);
	}
};

Log4js.WindowsEventAppender.prototype = Log4js.extend(new Log4js.Appender(), {  
	/**
	 * @param loggingEvent event to be logged
	 * @see Log4js.Appender#doAppend
	 */
	doAppend: function(loggingEvent) {
		var winLevel = 4;
		
		// Map log level to windows event log level.
		// Windows events: - SUCCESS: 0, ERROR: 1, WARNING: 2, INFORMATION: 4, AUDIT_SUCCESS: 8, AUDIT_FAILURE: 16
		switch (loggingEvent.level) {	
			case Log4js.Level.FATAL:
				winLevel = 1;
				break;
			case Log4js.Level.ERROR:
				winLevel = 1;
				break;
			case Log4js.Level.WARN:
				winLevel = 2;
				break;
			default:
				winLevel = 4;
				break;
		}
		
		try {
			this.shell.LogEvent(winLevel, this.level.format(loggingEvent));
		} catch(e) {
			log4jsLogger.error(e);
		}
	},
	
	/** 
	 * toString
	 */
	 toString: function() {
	 	return "Log4js.WindowsEventAppender"; 
	 } 
});

/**
 * JS Alert Appender writes the logs to the JavaScript alert dialog box
 * @constructor
 * @extends Log4js.Appender  
 * @param logger log4js instance this appender is attached to
 * @author S&eacute;bastien LECACHEUR
 */
Log4js.JSAlertAppender = function() {

	this.layout = new Log4js.SimpleLayout();
};

Log4js.JSAlertAppender.prototype = Log4js.extend(new Log4js.Appender(), {  
	/** 
	 * @see Log4js.Appender#doAppend
	 */
	doAppend: function(loggingEvent) {
		alert(this.layout.getHeader() + this.layout.format(loggingEvent) + this.layout.getFooter());
	},
	
	/** 
	 * toString
	 */
	 toString: function() {
	 	return "Log4js.JSAlertAppender"; 
	 }	
});

/**
 * Appender writes the logs to the JavaScript console of Mozilla browser
 * More infos: http://kb.mozillazine.org/index.php?title=JavaScript_Console&redirect=no
 * PLEASE NOTE - Only works in Mozilla browser
 * @constructor
 * @extends Log4js.Appender  
 * @param logger log4js instance this appender is attached to
 * @author Stephan Strittmatter
 */
Log4js.MozillaJSConsoleAppender = function() {
	this.layout = new Log4js.SimpleLayout();
	try {
		netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
		this.jsConsole = Components.classes["@mozilla.org/consoleservice;1"].getService(Components.interfaces.nsIConsoleService);
		this.scriptError = Components.classes["@mozilla.org/scripterror;1"].createInstance(Components.interfaces.nsIScriptError);
	} catch (e) {
		log4jsLogger.error(e);
	}
};

Log4js.MozillaJSConsoleAppender.prototype = Log4js.extend(new Log4js.Appender(), {  
	/** 
	 * @see Log4js.Appender#doAppend
	 */
	doAppend: function(loggingEvent) {
		try {
			netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
			this.scriptError.init(this.layout.format(loggingEvent), null, null, null, null, this.getFlag(loggingEvent), loggingEvent.categoryName);
			this.jsConsole.logMessage(this.scriptError);
		} catch (e) {
			log4jsLogger.error(e);
		}
	},
	
	/** 
	 * toString
	 */
	 toString: function() {
	 	return "Log4js.MozillaJSConsoleAppender"; 
	 },
	 
	/**
	 * Map Log4js.Level to jsConsole Flags:
	 * <ul>
	 * <li>nsIScriptError.errorFlag (0) = Level.Error</li>
	 * <li>nsIScriptError.warningFlag (1)= Log4js.Level.WARN</li>
	 * <li>nsIScriptError.exceptionFlag (2) = Log4js.Level.FATAL</li>
	 * <li>nsIScriptError.strictFlag (4) = unused</li>
	 * </ul>
	 * @private
	 */	
	getFlag: function(loggingEvent)
	{
		var retval;
		switch (loggingEvent.level) {	
			case Log4js.Level.FATAL:
				retval = 2;//nsIScriptError.exceptionFlag = 2
				break;
			case Log4js.Level.ERROR:
				retval = 0;//nsIScriptError.errorFlag
				break;
			case Log4js.Level.WARN:
				retval = 1;//nsIScriptError.warningFlag = 1
				break;
			default:
				retval = 1;//nsIScriptError.warningFlag = 1
				break;
		}
		
		return retval;		
	}
});

/**
 * Appender writes the logs to the JavaScript console of Opera browser
 * PLEASE NOTE - Only works in Opera browser
 * @constructor
 * @extends Log4js.Appender  
 * @param logger log4js instance this appender is attached to
 * @author Stephan Strittmatter
 */
Log4js.OperaJSConsoleAppender = function() {
	this.layout = new Log4js.SimpleLayout();
};

Log4js.OperaJSConsoleAppender.prototype = Log4js.extend(new Log4js.Appender(), {  
	/** 
	 * @see Log4js.Appender#doAppend
	 */
	doAppend: function(loggingEvent) {
		opera.postError(this.layout.format(loggingEvent));
	},
	
	/** 
	 * toString
	 */
	 toString: function() {
	 	return "Log4js.OperaJSConsoleAppender"; 
	 }
});

/**
 * Appender writes the logs to the JavaScript console of Safari browser
 * PLEASE NOTE - Only works in Safari browser
 * @constructor
 * @extends Log4js.Appender  
 * @param logger log4js instance this appender is attached to
 * @author Stephan Strittmatter
 */
Log4js.SafariJSConsoleAppender = function() {
	this.layout = new Log4js.SimpleLayout();
};

Log4js.SafariJSConsoleAppender.prototype = Log4js.extend(new Log4js.Appender(), {  
	/** 
	 * @see Log4js.Appender#doAppend
	 */
	doAppend: function(loggingEvent) {
		window.console.log(this.layout.format(loggingEvent));
	},
	
	/** 
	 * toString
	 */
	 toString: function() {
	 	return "Log4js.SafariJSConsoleAppender"; 
	 }
});

/**
 * JavaScript Console Appender which is browser independent.
 * It checks internally for the current browser and adds delegate to
 * specific JavaScript Console Appender of the browser.
 * 
 * @author Stephan Strittmatter
 * @since 1.0
 */
Log4js.BrowserConsoleAppender = function() {
	/**
	 * Delegate for browser specific implementation
	 * @type Log4js.Appender
	 * @private
	 */
	this.consoleDelegate = null;
	
	if (window.console) {
		this.consoleDelegate = new Log4js.SafariJSConsoleAppender(); 
	}
    else if (window.opera) {
		this.consoleDelegate = new Log4js.OperaJSConsoleAppender(); 
	}
	else if(netscape) {
		this.consoleDelegate = new Log4js.MozJSConsoleAppender(); 
	}
    else {
       //@todo
       log4jsLogger.error("Unsupported Browser");
    }
};

Log4js.BrowserConsoleAppender.prototype = Log4js.extend(new Log4js.Appender(), {  
	/** 
	 * @see Log4js.Appender#doAppend
	 */
	doAppend: function(loggingEvent) {
		this.consoleDelegate.doAppend(loggingEvent);
	},
	/** 
	 * @see Log4js.Appender#doClear
	 */
	doClear: function() {
		this.consoleDelegate.doClear();
	},
	/**
	 * @see Log4js.Appender#setLayout
	 */
	setLayout: function(layout){
		this.consoleDelegate.setLayout(layout);
	},
	
	/** 
	 * toString
	 */
	 toString: function() {
	 	return "Log4js.BrowserConsoleAppender: " + this.consoleDelegate.toString(); 
	 }
});

/**
 * SimpleLayout consists of the level of the log statement, followed by " - " 
 * and then the log message itself. For example,
 * <code>DEBUG - Hello world</code>
 *
 * @constructor
 * @extends Log4js.Layout
 * @extends Layout
 * @author Stephan Strittmatter
 */
Log4js.SimpleLayout = function() {
	this.LINE_SEP  = "\n";
	this.LINE_SEP_LEN = 1;
};

Log4js.SimpleLayout.prototype = Log4js.extend(new Log4js.Layout(), {
	/** 
	 * Implement this method to create your own layout format.
	 * @param {Log4js.LoggingEvent} loggingEvent loggingEvent to format
	 * @return formatted String
	 * @type String
	 */
	format: function(loggingEvent) {
		return loggingEvent.level.toString() + " - " + loggingEvent.message + this.LINE_SEP;
	},
	/** 
	 * Returns the content type output by this layout. 
	 * @return The base class returns "text/plain".
	 * @type String
	 */
	getContentType: function() {
		return "text/plain";
	},
	/** 
	 * @return Returns the header for the layout format. The base class returns null.
	 * @type String
	 */
	getHeader: function() {
		return "";
	},
	/** 
	 * @return Returns the footer for the layout format. The base class returns null.
	 * @type String
	 */
	getFooter: function() {
		return "";
	}
});
	
/**
 * BasicLayout is a simple layout for storing the loggs. The loggs are stored
 * in following format:
 * <pre>
 * categoryName~startTime [logLevel] message\n
 * </pre>
 *
 * @constructor
 * @extends Log4js.Layout
 * @author Stephan Strittmatter
 */
Log4js.BasicLayout = function() {
	this.LINE_SEP  = "\n";
};

Log4js.BasicLayout.prototype = Log4js.extend(new Log4js.Layout(), {
	/** 
	 * Implement this method to create your own layout format.
	 * @param {Log4js.LoggingEvent} loggingEvent loggingEvent to format
	 * @return formatted String
	 * @type String
	 */
	format: function(loggingEvent) {
		return loggingEvent.categoryName + "~" + loggingEvent.startTime.toLocaleString() + " [" + loggingEvent.level.toString() + "] " + loggingEvent.message + this.LINE_SEP;
	},
	/** 
	 * Returns the content type output by this layout. 
	 * @return The base class returns "text/plain".
	 * @type String
	 */
	getContentType: function() {
		return "text/plain";
	},
	/** 
	 * @return Returns the header for the layout format. The base class returns null.
	 * @type String
	 */
	getHeader: function() {
		return "";
	},
	/** 
	 * @return Returns the footer for the layout format. The base class returns null.
	 * @type String
	 */
	getFooter: function() {
		return "";
	}
});

/**
 * HtmlLayout write the logs in Html format.
 *
 * @constructor
 * @extends Log4js.Layout
 * @author Stephan Strittmatter
 */
Log4js.HtmlLayout = function() {return;};

Log4js.HtmlLayout.prototype = Log4js.extend(new Log4js.Layout(), {
	/** 
	 * Implement this method to create your own layout format.
	 * @param {Log4js.LoggingEvent} loggingEvent loggingEvent to format
	 * @return formatted String
	 * @type String
	 */
	format: function(loggingEvent) {
		return "<div style=\"" + this.getStyle(loggingEvent) + "\">" + loggingEvent.getFormattedTimestamp() + " - " + loggingEvent.level.toString() + " - " + loggingEvent.message + "</div>\n";
	},
	/** 
	 * Returns the content type output by this layout. 
	 * @return The base class returns "text/html".
	 * @type String
	 */
	getContentType: function() {
		return "text/html";
	},
	/** 
	 * @return Returns the header for the layout format. The base class returns null.
	 * @type String
	 */
	getHeader: function() {
		return "<html><head><title>log4js</head><body>";
	},
	/** 
	 * @return Returns the footer for the layout format. The base class returns null.
	 * @type String
	 */
	getFooter: function() {
		return "</body></html>";
	},
	
	getStyle: function(loggingEvent)
	{
		var style;
		if (loggingEvent.level.toString().search(/ERROR/) != -1) { 
			style = 'color:red';
		} else if (loggingEvent.level.toString().search(/FATAL/) != -1) { 
			style = 'color:red';
		} else if (loggingEvent.level.toString().search(/WARN/) != -1) { 
			style = 'color:orange';
		} else if (loggingEvent.level.toString().search(/DEBUG/) != -1) {
			style = 'color:green';
		} else if (loggingEvent.level.toString().search(/INFO/) != -1) {
			style = 'color:white';
		} else {
			style = 'color:yellow';
		}	
		return style;
	}
});

/**
 * XMLLayout write the logs in XML format.
 * Layout is simmilar to log4j's XMLLayout:
 * <pre>
 * <log4js:event category="category" level="Level" client="Client" referer="ref" timestam="Date">
 * <log4js:message>Logged message</log4js:message>
 * </log4js:event>
 * </pre>
 * @constructor
 * @extends Layout
 * @author Stephan Strittmatter
 */
Log4js.XMLLayout = function(){return;};
Log4js.XMLLayout.prototype = Log4js.extend(new Log4js.Layout(), {
	/** 
	 * Implement this method to create your own layout format.
	 * @param {Log4js.LoggingEvent} loggingEvent loggingEvent to format
	 * @return formatted String
	 * @type String
	 */
	format: function(loggingEvent) {
		var useragent = "unknown";
		try {
			useragent = navigator.userAgent;
		} catch(e){
			useragent = "unknown";
		}
		
		var referer = "unknown";
		try {
			referer = location.href;
		} catch(e){
			referer = "unknown";
		}
				
		var content = "<log4js:event logger=\"";
		content += loggingEvent.categoryName + "\" level=\"";
		content += loggingEvent.level.toString() + "\" useragent=\"";
		content += useragent + "\" referer=\"";
		content += referer.replace(/&/g, "&amp;") + "\" timestamp=\"";
		content += loggingEvent.getFormattedTimestamp() + "\">\n";
		content += "\t<log4js:message><![CDATA[" + this.escapeCdata(loggingEvent.message) + "]]></log4js:message>\n";	
 		
 		if (loggingEvent.exception) {
			content += this.formatException(loggingEvent.exception) ;
		}
 		content += "</log4js:event>\n";
        
      return content;
	},
	/** 
	 * Returns the content type output by this layout. 
	 * @return The base class returns "text/xml".
	 * @type String
	 */
	getContentType: function() {
		return "text/xml";
	},
	/** 
	 * @return Returns the header for the layout format. The base class returns null.
	 * @type String
	 */
	getHeader: function() {
		return "<log4js:eventSet version=\"" + Log4js.version + 
			"\" xmlns:log4js=\"http://log4js.berlios.de/2007/log4js/\">\n";
	},
	/** 
	 * @return Returns the footer for the layout format. The base class returns null.
	 * @type String
	 */
	getFooter: function() {
		return "</log4js:eventSet>\n";
	},
	
	getSeparator: function() {
		return "\n";
	},
	
	/**
	 * better readable formatted Exceptions.
	 * @param ex {Exception} the exception to be formatted.
	 * @return {String} the formatted String representation of the exception.
	 * @private
	 */
	formatException: function(ex) {
		if (ex) {
			var exStr = "\t<log4js:throwable>"; 
			if (ex.message) {
				exStr +=  "\t\t<log4js:message><![CDATA[" + this.escapeCdata(ex.message) + "]]></log4js:message>\n";	
			} 
			if (ex.description) {
				exStr +=  "\t\t<log4js:description><![CDATA[" + this.escapeCdata(ex.description) + "]]></log4js:description>\n";	
			}
			
			exStr +=  "\t\t<log4js:stacktrace>";
			exStr +=  "\t\t\t<log4js:location fileName=\""+ex.fileName+"\" lineNumber=\""+ex.lineNumber+"\" />";
			exStr +=  "\t\t</log4js:stacktrace>";
			exStr = "\t</log4js:throwable>";
			return exStr;
		}
		return null;
	},
	/**
	 * Escape Cdata messages
	 * @param str {String} message to escape
	 * @return {String} the escaped message
	 * @private
	 */
	escapeCdata: function(str) {
		return str.replace(/\]\]>/, "]]>]]&gt;<![CDATA[");
	}
});

/**
 * JSONLayout write the logs in JSON format.
 * JSON library is required to use this Layout. See also {@link http://www.json.org}
 * @constructor
 * @extends Log4js.Layout
 * @author Stephan Strittmatter
 */
Log4js.JSONLayout = function() {
	this.df = new Log4js.DateFormatter();
};
Log4js.JSONLayout.prototype = Log4js.extend(new Log4js.Layout(), {
	/** 
	 * Implement this method to create your own layout format.
	 * @param {Log4js.LoggingEvent} loggingEvent loggingEvent to format
	 * @return formatted String
	 * @type String
	 */
	format: function(loggingEvent) {
		
				var useragent = "unknown";
		try {
			useragent = navigator.userAgent;
		} catch(e){
			useragent = "unknown";
		}
		
		var referer = "unknown";
		try {
			referer = location.href;
		} catch(e){
			referer = "unknown";
		}
		
		var jsonString = "{\n \"LoggingEvent\": {\n";
		
		jsonString += "\t\"logger\": \"" +  loggingEvent.categoryName + "\",\n";
		jsonString += "\t\"level\": \"" +  loggingEvent.level.toString() + "\",\n";
		jsonString += "\t\"message\": \"" +  loggingEvent.message + "\",\n"; 
		jsonString += "\t\"referer\": \"" + referer + "\",\n"; 
		jsonString += "\t\"useragent\": \"" + useragent + "\",\n"; 
		jsonString += "\t\"timestamp\": \"" +  this.df.formatDate(loggingEvent.startTime, "yyyy-MM-ddThh:mm:ssZ") + "\",\n";
		jsonString += "\t\"exception\": \"" +  loggingEvent.exception + "\"\n"; 
		jsonString += "}}";      
        
        return jsonString;
	},
	/** 
	 * Returns the content type output by this layout. 
	 * @return The base class returns "text/xml".
	 * @type String
	 */
	getContentType: function() {
		return "text/json";
	},
	/** 
	 * @return Returns the header for the layout format. The base class returns null.
	 * @type String
	 */
	getHeader: function() {
		return "{\"Log4js\": [\n";
	},
	/** 
	 * @return Returns the footer for the layout format. The base class returns null.
	 * @type String
	 */
	getFooter: function() {
		return "\n]}";
	},
	
	getSeparator: function() {
		return ",\n";
	}
});

/** 
 * PatternLayout 
 */
Log4js.PatternLayout = function(pattern) {
	if (pattern) {
		this.pattern = pattern;
	} else {
		this.pattern = Log4js.PatternLayout.DEFAULT_CONVERSION_PATTERN;
	}
};

Log4js.PatternLayout.TTCC_CONVERSION_PATTERN = "%r %p %c - %m%n";
Log4js.PatternLayout.DEFAULT_CONVERSION_PATTERN = "%m%n";
Log4js.PatternLayout.ISO8601_DATEFORMAT = "yyyy-MM-dd HH:mm:ss,SSS";
Log4js.PatternLayout.DATETIME_DATEFORMAT = "dd MMM YYYY HH:mm:ss,SSS";
Log4js.PatternLayout.ABSOLUTETIME_DATEFORMAT = "HH:mm:ss,SSS";

Log4js.PatternLayout.prototype = Log4js.extend(new Log4js.Layout(), {
	/** 
	 * Returns the content type output by this layout. 
	 * @return "text/plain".
	 * @type String
	 */
	getContentType: function() {
		return "text/plain";
	},
	/** 
	 * @return Returns the header for the layout format.
	 * @type String
	 */
	getHeader: function() {
		return null;
	},
	/** 
	 * @return Returns the footer for the layout format.
	 * @type String
	 */
	getFooter: function() {
		return null;
	},
	
	format: function(loggingEvent) {
		var regex = /%(-?[0-9]+)?(\.?[0-9]+)?([cdmnpr%])(\{([^\}]+)\})?|([^%]+)/;
		var formattedString = "";
		var result;
		var searchString = this.pattern;

		// Cannot use regex global flag since it doesn't work in IE5
		while ((result = regex.exec(searchString))) {
			var matchedString = result[0];
			var padding = result[1];
			var truncation = result[2];
			var conversionCharacter = result[3];
			var specifier = result[5];
			var text = result[6];

			// Check if the pattern matched was just normal text
			if (text) {
				formattedString += "" + text;
			} else {
				// Create a raw replacement string based on the conversion
				// character and specifier
				var replacement = "";
				switch(conversionCharacter) {
					case "c":
						var loggerName = loggingEvent.categoryName;
						if (specifier) {
							var precision = parseInt(specifier, 10);
							var loggerNameBits = loggingEvent.categoryName.split(".");
							if (precision >= loggerNameBits.length) {
								replacement = loggerName;
							} else {
								replacement = loggerNameBits.slice(loggerNameBits.length - precision).join(".");
							}
						} else {
							replacement = loggerName;
						}
						break;
					case "d":
						var dateFormat = Log4js.PatternLayout.ISO8601_DATEFORMAT;
						if (specifier) {
							dateFormat = specifier;
							// Pick up special cases
							if (dateFormat == "ISO8601") {
								dateFormat = Log4js.PatternLayout.ISO8601_DATEFORMAT;
							} else if (dateFormat == "ABSOLUTE") {
								dateFormat = Log4js.PatternLayout.ABSOLUTETIME_DATEFORMAT;
							} else if (dateFormat == "DATE") {
								dateFormat = Log4js.PatternLayout.DATETIME_DATEFORMAT;
							}
						}
						// Format the date
						replacement = (new Log4js.SimpleDateFormat(dateFormat)).format(loggingEvent.startTime);
						break;
					case "m":
						replacement = loggingEvent.message;
						break;
					case "n":
						replacement = "\n";
						break;
					case "p":
						replacement = loggingEvent.level.toString();
						break;
					case "r":
						replacement = "" + loggingEvent.startTime.toLocaleTimeString(); //TODO: .getDifference(Log4js.applicationStartDate);
						break;
					case "%":
						replacement = "%";
						break;
					default:
						replacement = matchedString;
						break;
				}
				// Format the replacement according to any padding or
				// truncation specified

				var len;

				// First, truncation
				if (truncation) {
					len = parseInt(truncation.substr(1), 10);
					replacement = replacement.substring(0, len);
				}
				// Next, padding
				if (padding) {
					if (padding.charAt(0) == "-") {
						len = parseInt(padding.substr(1), 10);
						// Right pad with spaces
						while (replacement.length < len) {
							replacement += " ";
						}
					} else {
						len = parseInt(padding, 10);
						// Left pad with spaces
						while (replacement.length < len) {
							replacement = " " + replacement;
						}
					}
				}
				formattedString += replacement;
			}
			searchString = searchString.substr(result.index + result[0].length);
		}
		return formattedString;
	}
});

/**
 * @private
 * @ignore
 */
if (!Array.prototype.push) {
	/**
	 * Functions taken from Prototype library, didn't want to require for just few 
	 * functions.
	 * More info at {@link http://
	 * prototype.conio.net/}
	 * @private
	 */
	Array.prototype.push = function() {
		var startLength = this.length;
		for (var i = 0; i < arguments.length; i++) {
			this[startLength + i] = arguments[i];
		}
		return this.length;
	};
}

/**
 * FIFO buffer
 * @private
 */
Log4js.FifoBuffer = function()
{
  this.array = new Array();
};

Log4js.FifoBuffer.prototype = {

	/**
	 * @param {Object} obj any object added to buffer
	 */
	push : function(obj) {
        this.array[this.array.length] = obj;
        return this.array.length;
	},
	
	/**
	 * @return first putted in Object
	 */
	pull : function() {
		if (this.array.length > 0) {
			var firstItem = this.array[0];
			for (var i = 0; i < this.array.length - 1; i++) {
				this.array[i] = this.array[i + 1];
			}
			this.array.length = this.array.length - 1;
			return firstItem;
		}
		return null;
	},
	
	length : function() {
		return this.array.length;
	}
};



/**
 * Date Formatter
 * addZero() and formatDate() are courtesy of Mike Golding:
 * http://www.mikezilla.com/exp0015.html
 * @private
 */ 
Log4js.DateFormatter = function() {
	return;
};
/**
 * default format of date (ISO-8601)
 * @static
 * @final
 */
Log4js.DateFormatter.DEFAULT_DATE_FORMAT = "yyyy-MM-ddThh:mm:ssO";


Log4js.DateFormatter.prototype = {
	/**
	 * Formats the given date by the given pattern.<br />
	 * Following switches are supported:
	 * <ul>
	 * <li>yyyy: The year</li>
	 * <li>MM: the month</li>
	 * <li>dd: the day of month<li>
	 * <li>hh: the hour<li>
	 * <li>mm: minutes</li>
	 * <li>O: timezone offset</li>
	 * </ul>
	 * @param {Date} vDate the date to format
	 * @param {String} vFormat the format pattern
	 * @return {String} formatted date string
	 * @static
	 */
	formatDate : function(vDate, vFormat) {
	  var vDay = this.addZero(vDate.getDate());
	  var vMonth = this.addZero(vDate.getMonth()+1);
	  var vYearLong = this.addZero(vDate.getFullYear());
	  var vYearShort = this.addZero(vDate.getFullYear().toString().substring(3,4));
	  var vYear = (vFormat.indexOf("yyyy")>-1?vYearLong:vYearShort);
	  var vHour  = this.addZero(vDate.getHours());
	  var vMinute = this.addZero(vDate.getMinutes());
	  var vSecond = this.addZero(vDate.getSeconds());
	  var vTimeZone = this.O(vDate);
	  var vDateString = vFormat.replace(/dd/g, vDay).replace(/MM/g, vMonth).replace(/y{1,4}/g, vYear);
	  vDateString = vDateString.replace(/hh/g, vHour).replace(/mm/g, vMinute).replace(/ss/g, vSecond);
	  vDateString = vDateString.replace(/O/g, vTimeZone);
	  return vDateString;
	},
		
	/**
	 * @private
	 * @static
	 */
	addZero : function(vNumber) {
	  return ((vNumber < 10) ? "0" : "") + vNumber;
	},
	
	/**
	 * Formates the TimeOffest
	 * Thanks to http://www.svendtofte.com/code/date_format/
	 * @private
	 */
	O : function (date) {
		// Difference to Greenwich time (GMT) in hours
		var os = Math.abs(date.getTimezoneOffset());
		var h = String(Math.floor(os/60));
		var m = String(os%60);
		h.length == 1? h = "0"+h:1;
		m.length == 1? m = "0"+m:1;
		return date.getTimezoneOffset() < 0 ? "+"+h+m : "-"+h+m;
	}
};


/**
 * internal Logger to be used
 * @private
 */
var log4jsLogger = Log4js.getLogger("Log4js");
log4jsLogger.addAppender(new Log4js.ConsoleAppender());
log4jsLogger.setLevel(Log4js.Level.OFF);
//Create our namespace 
DAIS.createNS("DAIS.COMMON");


DAIS.COMMON.HelperFunctions = function HelperFunctions() {
    var SetValidationToMultipleAddressByCountryCode = function (countryCode, addressPref) {

        $('#' + addressPref + 'addressesAlt').find($("[data-address='Address']")).each(function () {
            if (countryCode == BGCountryIsoCode) {
                RemoveValidationRuleAndChangeAttrName($(this), "swiftsymbols", false);
            } else {
                AddExistingValidationRule($(this), "swiftsymbols");
            }
        });
    }

    var FillMultipleAddressFromGivenAddress = function (sourceId, destinationId) {

        var addressIds = ['m_ctrl_Address_City', 'm_ctrl_Address_Address1', 'm_ctrl_Address_Address2', 'm_ctrl_Address_Address3'];
        var city = $('#' + sourceId + addressIds[0]).val();
        var address1 = $('#' + sourceId + addressIds[1]).val();
        var address2 = $('#' + sourceId + addressIds[2]).val();
        var address3 = $('#' + sourceId + addressIds[3]).val();

        $('#' + destinationId + addressIds[0]).val(city);
        $('#' + destinationId + addressIds[1]).val(address1);
        $('#' + destinationId + addressIds[2]).val(address2);
        $('#' + destinationId + addressIds[3]).val(address3);

    }

    return {
        SetValidationToMultipleAddressByCountryCode: SetValidationToMultipleAddressByCountryCode,
        FillMultipleAddressFromGivenAddress: FillMultipleAddressFromGivenAddress
    };

}();
/*
* Kendo UI Complete v2013.2.918 (http://kendoui.com)
* Copyright 2013 Telerik AD. All rights reserved.
*
* Kendo UI commercial licenses may be obtained at
* https://www.kendoui.com/purchase/license-agreement.aspx
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
!function(define){return define([],function(){!function(e,t,n){function i(){}function r(e){return"function"==typeof e}function o(e,t){if(t)return"'"+e.split("'").join("\\'").split('\\"').join('\\\\\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")+"'";var n=e.charAt(0),i=e.substring(1);return"="===n?"+("+i+")+":":"===n?"+e("+i+")+":";"+e+";o+="}function a(e,t,n){return e+="",t=t||2,n=t-e.length,n?R[t].substring(0,n)+e:e}function s(t){var n,i,r,o,a,s,l,d,c,u,p,f,h,g=ht.browser,m="rtl"==t.css("direction");return t.parent().hasClass("k-animation-container")?(f=t.parent(".k-animation-container"),h=f[0].style,f.is(":hidden")&&f.show(),n=gt.test(h.width)||gt.test(h.height),n||f.css({width:t.outerWidth(),height:t.outerHeight()})):(i=t.css(at.support.transitions.css+"box-shadow")||t.css("box-shadow"),r=i?i.match(vt)||[0,0,0,0,0]:[0,0,0,0,0],o=pt.max(+r[3],+(r[4]||0)),a=-r[1]+o,s=+r[1]+o,l=+r[2]+o,d=t[0].style.width,c=t[0].style.height,u=gt.test(d),p=gt.test(c),g.opera&&(a=s=l=5),n=u||p,u||(d=t.outerWidth()),p||(c=t.outerHeight()),t.wrap(e("<div/>").addClass("k-animation-container").css({width:d,height:c,marginLeft:a*(m?1:-1),paddingLeft:a,paddingRight:s,paddingBottom:l})),n&&t.css({width:"100%",height:"100%",boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"})),g.msie&&pt.floor(g.version)<=7&&(t.css({zoom:1}),t.children(".k-menu").width(t.width())),t.parent()}function l(e){var t=1,n=arguments.length;for(t=1;n>t;t++)d(e,arguments[t]);return e}function d(e,t){var n,i,r,o,a=at.data.ObservableArray,s=at.data.DataSource;for(n in t)i=t[n],r=typeof i,r===kt&&null!==i&&i.constructor!==Array&&i.constructor!==a&&i.constructor!==s?i instanceof Date?e[n]=new Date(i.getTime()):(o=e[n],e[n]=typeof o===kt?o||{}:{},d(e[n],i)):r!==Tt&&(e[n]=i);return e}function c(e,t,i){for(var r in t)if(t.hasOwnProperty(r)&&t[r].test(e))return r;return i!==n?i:e}function u(t,n){var i,r={};return document.defaultView&&document.defaultView.getComputedStyle?(i=document.defaultView.getComputedStyle(t,""),n&&e.each(n,function(e,t){r[t]=i.getPropertyValue(t)})):(i=t.currentStyle,n&&e.each(n,function(e,t){r[t]=i[t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()})]})),at.size(r)||(r=i),r}function p(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&"toJSON"!=t&&n++;return n}function f(e,t,n){var i,r,o,a;return t||(t="offset"),i=e[t](),r=ht.mobileOS,ht.touch&&r.ios&&r.flatVersion<410&&(o="offset"==t?i:e.offset(),a=i.left==o.left&&i.top==o.top)?{top:i.top-window.scrollY,left:i.left-window.scrollX}:(!at.support.pointers&&!at.support.msPointers||n||(i.top-=window.pageYOffset-document.documentElement.scrollTop,i.left-=window.pageXOffset-document.documentElement.scrollLeft),i)}function h(e){var t={};return lt("string"==typeof e?e.split(" "):e,function(e){t[e]=this}),t}function g(e){return new at.effects.Element(e)}function m(e,t,n,i){return typeof e===wt&&(r(t)&&(i=t,t=400,n=!1),r(n)&&(i=n,n=!1),typeof t===Ct&&(n=t,t=400),e={effects:e,duration:t,reverse:n,complete:i}),st({effects:{},duration:400,reverse:!1,init:ut,teardown:ut,hide:!1},e,{completeCallback:e.complete,complete:ut})}function v(t,n,i,r,o){for(var a,s=0,l=t.length;l>s;s++)a=e(t[s]),a.queue(function(){L.promise(a,m(n,i,r,o))});return t}function _(e,t,n,i,r,o){return L.transitionPromise(e,t,m(n,i,r,o))}function b(e,t,n,i){return t&&(t=t.split(" "),lt(t,function(t,n){e.toggleClass(n,i)})),e}function w(e){return(""+e).replace(O,"&amp;").replace(N,"&lt;").replace(V,"&gt;")}function y(e,i){var r;return 0===i.indexOf("data")&&(i=i.substring(4),i=i.charAt(0).toLowerCase()+i.substring(1)),i=i.replace($,"-$1"),r=e.getAttribute("data-"+at.ns+i),null===r?r=n:"null"===r?r=null:"true"===r?r=!0:"false"===r?r=!1:_t.test(r)?r=parseFloat(r):Y.test(r)&&!Q.test(r)&&(r=t("("+r+")")),r}function k(t,i){var r,o,a={};for(r in i)o=y(t,r),o!==n&&(q.test(r)&&(o=at.template(e("#"+o).html())),a[r]=o);return a}function x(e,t){var n=e.nodeName.toLowerCase();return(/input|select|textarea|button|object/.test(n)?!e.disabled:"a"===n?e.href||t:t)&&C(e)}function C(t){return!e(t).parents().andSelf().filter(function(){return"hidden"===e.css(this,"visibility")||e.expr.filters.hidden(this)}).length}function T(e,t){return new T.fn.init(e,t)}var S,D,A,E,F,I,P,B,z,H,R,M,L,O,N,V,U,W,j,G,q,Y,Q,$,K,X,J,Z,et,tt,nt,it,rt,ot,at=window.kendo=window.kendo||{cultures:{}},st=e.extend,lt=e.each,dt=e.proxy,ct=e.isArray,ut=e.noop,pt=Math,ft=window.JSON||{},ht={},gt=/%/,mt=/\{(\d+)(:[^\}]+)?\}/g,vt=/(\d+?)px\s*(\d+?)px\s*(\d+?)px\s*(\d+?)?/i,_t=/^(\+|-?)\d+(\.?)\d*$/,bt="function",wt="string",yt="number",kt="object",xt="null",Ct="boolean",Tt="undefined",St={},Dt={},At=[].slice,Et=window.Globalize;at.version="2013.2.918",i.extend=function(e){var t,n,i=function(){},r=this,o=e&&e.init?e.init:function(){r.apply(this,arguments)};i.prototype=r.prototype,n=o.fn=o.prototype=new i;for(t in e)n[t]=typeof e[t]!==kt||e[t]instanceof Array||null===e[t]?e[t]:st(!0,{},i.prototype[t],e[t]);return n.constructor=o,o.extend=r.extend,o},at.isFunction=r,D=function(){this._defaultPrevented=!0},A=function(){return this._defaultPrevented===!0},E=i.extend({init:function(){this._events={}},bind:function(e,t,i){var r,o,a,s,l,d=this,c=typeof e===wt?[e]:e,u=typeof t===bt;if(t===n){for(r in e)d.bind(r,e[r]);return d}for(r=0,o=c.length;o>r;r++)e=c[r],s=u?t:t[e],s&&(i&&(a=s,s=function(){d.unbind(e,s),a.apply(d,arguments)}),l=d._events[e]=d._events[e]||[],l.push(s));return d},one:function(e,t){return this.bind(e,t,!0)},first:function(e,t){var n,i,r,o,a=this,s=typeof e===wt?[e]:e,l=typeof t===bt;for(n=0,i=s.length;i>n;n++)e=s[n],r=l?t:t[e],r&&(o=a._events[e]=a._events[e]||[],o.unshift(r));return a},trigger:function(e,t){var n,i,r=this,o=r._events[e];if(o){for(t=t||{},t.sender=r,t._defaultPrevented=!1,t.preventDefault=D,t.isDefaultPrevented=A,o=o.slice(),n=0,i=o.length;i>n;n++)o[n].call(r,t);return t._defaultPrevented===!0}return!1},unbind:function(e,t){var i,r=this,o=r._events[e];if(e===n)r._events={};else if(o)if(t)for(i=o.length-1;i>=0;i--)o[i]===t&&o.splice(i,1);else r._events[e]=[];return r}}),F=/^\w+/,I=/\$\{([^}]*)\}/g,P=/\\\}/g,B=/__CURLY__/g,z=/\\#/g,H=/__SHARP__/g,R=["","0","00","000","0000"],S={paramName:"data",useWithBlock:!0,render:function(e,t){var n,i,r="";for(n=0,i=t.length;i>n;n++)r+=e(t[n]);return r},compile:function(t,n){var i,a,s,l=st({},this,n),d=l.paramName,c=d.match(F)[0],u=l.useWithBlock,p="var o,e=kendo.htmlEncode;";if(r(t))return 2===t.length?function(n){return t(e,{data:n}).join("")}:t;for(p+=u?"with("+d+"){":"",p+="o=",a=t.replace(P,"__CURLY__").replace(I,"#=e($1)#").replace(B,"}").replace(z,"__SHARP__").split("#"),s=0;s<a.length;s++)p+=o(a[s],0===s%2);p+=u?";}":";",p+="return o;",p=p.replace(H,"#");try{return i=Function(c,p),i._slotCount=Math.floor(a.length/2),i}catch(f){throw Error(at.format("Invalid template:'{0}' Generated code:'{1}'",t,p))}}},function(){function e(e){return o.lastIndex=0,o.test(e)?'"'+e.replace(o,function(e){var t=s[e];return typeof t===wt?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function t(o,a){var s,d,c,u,p,f,h=n,g=a[o];if(g&&typeof g===kt&&typeof g.toJSON===bt&&(g=g.toJSON(o)),typeof r===bt&&(g=r.call(a,o,g)),f=typeof g,f===wt)return e(g);if(f===yt)return isFinite(g)?g+"":xt;if(f===Ct||f===xt)return g+"";if(f===kt){if(!g)return xt;if(n+=i,p=[],"[object Array]"===l.apply(g)){for(u=g.length,s=0;u>s;s++)p[s]=t(s,g)||xt;return c=0===p.length?"[]":n?"[\n"+n+p.join(",\n"+n)+"\n"+h+"]":"["+p.join(",")+"]",n=h,c}if(r&&typeof r===kt)for(u=r.length,s=0;u>s;s++)typeof r[s]===wt&&(d=r[s],c=t(d,g),c&&p.push(e(d)+(n?": ":":")+c));else for(d in g)Object.hasOwnProperty.call(g,d)&&(c=t(d,g),c&&p.push(e(d)+(n?": ":":")+c));return c=0===p.length?"{}":n?"{\n"+n+p.join(",\n"+n)+"\n"+h+"}":"{"+p.join(",")+"}",n=h,c}}var n,i,r,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l={}.toString;typeof Date.prototype.toJSON!==bt&&(Date.prototype.toJSON=function(){var e=this;return isFinite(e.valueOf())?a(e.getUTCFullYear(),4)+"-"+a(e.getUTCMonth()+1)+"-"+a(e.getUTCDate())+"T"+a(e.getUTCHours())+":"+a(e.getUTCMinutes())+":"+a(e.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}),typeof ft.stringify!==bt&&(ft.stringify=function(e,o,a){var s;if(n="",i="",typeof a===yt)for(s=0;a>s;s+=1)i+=" ";else typeof a===wt&&(i=a);if(r=o,o&&typeof o!==bt&&(typeof o!==kt||typeof o.length!==yt))throw Error("JSON.stringify");return t("",{"":e})})}(),function(){function e(e){if(e){if(e.numberFormat)return e;if(typeof e===wt){var t=at.cultures;return t[e]||t[e.split("-")[0]]||null}return null}return null}function t(t){return t&&(t=e(t)),t||at.cultures.current}function i(e){e.groupSizes=e.groupSize,e.percent.groupSizes=e.percent.groupSize,e.currency.groupSizes=e.currency.groupSize}function r(e,i,r){r=t(r);var o=r.calendars.standard,s=o.days,l=o.months;return i=o.patterns[i]||i,i.replace(d,function(t){var i;return"d"===t?i=e.getDate():"dd"===t?i=a(e.getDate()):"ddd"===t?i=s.namesAbbr[e.getDay()]:"dddd"===t?i=s.names[e.getDay()]:"M"===t?i=e.getMonth()+1:"MM"===t?i=a(e.getMonth()+1):"MMM"===t?i=l.namesAbbr[e.getMonth()]:"MMMM"===t?i=l.names[e.getMonth()]:"yy"===t?i=a(e.getFullYear()%100):"yyyy"===t?i=a(e.getFullYear(),4):"h"===t?i=e.getHours()%12||12:"hh"===t?i=a(e.getHours()%12||12):"H"===t?i=e.getHours():"HH"===t?i=a(e.getHours()):"m"===t?i=e.getMinutes():"mm"===t?i=a(e.getMinutes()):"s"===t?i=e.getSeconds():"ss"===t?i=a(e.getSeconds()):"f"===t?i=pt.floor(e.getMilliseconds()/100):"ff"===t?i=pt.floor(e.getMilliseconds()/10):"fff"===t?i=e.getMilliseconds():"tt"===t&&(i=e.getHours()<12?o.AM[0]:o.PM[0]),i!==n?i:t.slice(1,t.length-1)})}function o(e,i,r){r=t(r);var o,a,l,d,b,w,y,k,x,C,T,S,D,A,E,F,I,P,B,z,H,R,M,L=r.numberFormat,O=L.groupSize[0],N=L[g],V=L[h],U=L.decimals,W=L.pattern[0],j=[],G=0>e,q=f,Y=f,Q=-1;if(e===n)return f;if(!isFinite(e))return e;if(!i)return r.name.length?e.toLocaleString():""+e;if(b=c.exec(i)){if(i=b[1].toLowerCase(),a="c"===i,l="p"===i,(a||l)&&(L=a?L.currency:L.percent,O=L.groupSize[0],N=L[g],V=L[h],U=L.decimals,o=L.symbol,W=L.pattern[G?0:1]),d=b[2],d&&(U=+d),"e"===i)return d?e.toExponential(U):e.toExponential();if(l&&(e*=100),e=s(e,U),e=e.split(h),w=e[0],y=e[1],G&&(w=w.substring(1)),Y=w,k=w.length,k>=O)for(Y=f,C=0;k>C;C++)C>0&&0===(k-C)%O&&(Y+=N),Y+=w.charAt(C);if(y&&(Y+=V+y),"n"===i&&!G)return Y;for(e=f,C=0,T=W.length;T>C;C++)S=W.charAt(C),e+="n"===S?Y:"$"===S||"%"===S?o:S;return e}if(G&&(e=-e),(i.indexOf("'")>-1||i.indexOf('"')>-1||i.indexOf("\\")>-1)&&(i=i.replace(u,function(e){var t=e.charAt(0).replace("\\",""),n=e.slice(1).replace(t,"");return j.push(n),_})),i=i.split(";"),G&&i[1])i=i[1],A=!0;else if(0===e){if(i=i[2]||i[0],-1==i.indexOf(m)&&-1==i.indexOf(v))return i}else i=i[0];if(z=i.indexOf("%"),H=i.indexOf("$"),l=-1!=z,a=-1!=H,l&&(e*=100),a&&"\\"===i[H-1]&&(i=i.split("\\").join(""),a=!1),(a||l)&&(L=a?L.currency:L.percent,O=L.groupSize[0],N=L[g],V=L[h],U=L.decimals,o=L.symbol),D=i.indexOf(g)>-1,D&&(i=i.replace(p,f)),E=i.indexOf(h),T=i.length,-1!=E?(y=(""+e).split("e"),y=y[1]?s(e,Math.abs(y[1])):y[0],y=y.split(h)[1]||f,I=i.lastIndexOf(v)-E,F=i.lastIndexOf(m)-E,P=I>-1,B=F>-1,C=y.length,P||B||(i=i.substring(0,E)+i.substring(E+1),T=i.length,E=-1,C=0),P&&I>F?C=I:F>I&&(B&&C>F?C=F:P&&I>C&&(C=I)),C>-1&&(e=s(e,C))):e=s(e),F=i.indexOf(m),R=I=i.indexOf(v),Q=-1==F&&-1!=I?I:-1!=F&&-1==I?F:F>I?I:F,F=i.lastIndexOf(m),I=i.lastIndexOf(v),M=-1==F&&-1!=I?I:-1!=F&&-1==I?F:F>I?F:I,Q==T&&(M=Q),-1!=Q){if(Y=(""+e).split(h),w=Y[0],y=Y[1]||f,k=w.length,x=y.length,D)if(k===O&&E-R>k)w=N+w;else if(k>O){for(Y=f,C=0;k>C;C++)C>0&&0===(k-C)%O&&(Y+=N),Y+=w.charAt(C);w=Y}for(e=i.substring(0,Q),G&&!A&&(e+="-"),C=Q;T>C;C++){if(S=i.charAt(C),-1==E){if(k>M-C){e+=w;break}}else if(-1!=I&&C>I&&(q=f),k>=E-C&&E-C>-1&&(e+=w,C=E),E===C){e+=(y?V:f)+y,C+=M-E+1;continue}S===v?(e+=S,q=S):S===m&&(e+=q)}if(M>=Q&&(e+=i.substring(M+1)),a||l){for(Y=f,C=0,T=e.length;T>C;C++)S=e.charAt(C),Y+="$"===S||"%"===S?o:S;e=Y}if(T=j.length)for(C=0;T>C;C++)e=e.replace(_,j[C])}return e}var s,l,d=/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|"[^"]*"|'[^']*'/g,c=/^(n|c|p|e)(\d*)$/i,u=/(\\.)|(['][^']*[']?)|(["][^"]*["]?)/g,p=/\,/g,f="",h=".",g=",",m="#",v="0",_="??",b="en-US",w={}.toString;at.cultures["en-US"]={name:b,numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSize:[3],percent:{pattern:["-n %","n %"],decimals:2,",":",",".":".",groupSize:[3],symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,",":",",".":".",groupSize:[3],symbol:"$"}},calendars:{standard:{days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December"],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},AM:["AM","am","AM"],PM:["PM","pm","PM"],patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",F:"dddd, MMMM dd, yyyy h:mm:ss tt",g:"M/d/yyyy h:mm tt",G:"M/d/yyyy h:mm:ss tt",m:"MMMM dd",M:"MMMM dd",s:"yyyy'-'MM'-'ddTHH':'mm':'ss",t:"h:mm tt",T:"h:mm:ss tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"MMMM, yyyy",Y:"MMMM, yyyy"},"/":"/",":":":",firstDay:0,twoDigitYearMax:2029}}},at.culture=function(t){var r,o=at.cultures;return t===n?o.current:(r=e(t)||o[b],r.calendar=r.calendars.standard,o.current=r,Et&&i(r.numberFormat),n)},at.findCulture=e,at.getCulture=t,at.culture(b),s=function(e,t){var n=Math.pow(10,t||0);return(Math.round(e*n)/n).toFixed(t)},l=function(e,t,i){if(t){if("[object Date]"===w.call(e))return r(e,t,i);if(typeof e===yt)return o(e,t,i)}return e!==n?e:""},Et&&(l=dt(Et.format,Et)),at.format=function(e){var t=arguments;return e.replace(mt,function(e,n,i){var r=t[parseInt(n,10)+1];return l(r,i?i.substring(1):"")})},at._extractFormat=function(e){return"{0:"===e.slice(0,3)&&(e=e.slice(3,e.length-1)),e},at._activeElement=function(){try{return document.activeElement}catch(e){return document.documentElement.activeElement}},at._round=s,at.toString=l}(),function(){function t(e,t,n){return!(e>=t&&n>=e)}function i(e){return e.charAt(0)}function r(t){return e.map(t,i)}function o(e,t){t||23!==e.getHours()||e.setHours(e.getHours()+2)}function a(e){for(var t=0,n=e.length,i=[];n>t;t++)i[t]=(e[t]+"").toLowerCase();return i}function s(e){var t,n={};for(t in e)n[t]=a(e[t]);return n}function l(e,i,a){if(!e)return null;var l,d,c,f,h,m,v,_,b,w,y,k,x=function(e){for(var t=0;i[H]===e;)t++,H++;return t>0&&(H-=1),t},C=function(t){var n=g[t]||RegExp("^\\d{1,"+t+"}"),i=e.substr(R,t).match(n);return i?(i=i[0],R+=i.length,parseInt(i,10)):null},T=function(t,n){for(var i,r,o,a=0,s=t.length;s>a;a++)if(i=t[a],r=i.length,o=e.substr(R,r),n&&(o=o.toLowerCase()),o==i)return R+=r,a+1;return null},S=function(){var t=!1;return e.charAt(R)===i[H]&&(R++,t=!0),t},D=a.calendars.standard,A=null,E=null,F=null,I=null,P=null,B=null,z=null,H=0,R=0,M=!1,L=new Date,O=D.twoDigitYearMax||2029,N=L.getFullYear();for(i||(i="d"),f=D.patterns[i],f&&(i=f),i=i.split(""),c=i.length;c>H;H++)if(l=i[H],M)"'"===l?M=!1:S();else if("d"===l){if(d=x("d"),D._lowerDays||(D._lowerDays=s(D.days)),F=3>d?C(2):T(D._lowerDays[3==d?"namesAbbr":"names"],!0),null===F||t(F,1,31))return null}else if("M"===l){if(d=x("M"),D._lowerMonths||(D._lowerMonths=s(D.months)),E=3>d?C(2):T(D._lowerMonths[3==d?"namesAbbr":"names"],!0),null===E||t(E,1,12))return null;E-=1}else if("y"===l){if(d=x("y"),A=C(d),null===A)return null;2==d&&("string"==typeof O&&(O=N+parseInt(O,10)),A=N-N%100+A,A>O&&(A-=100))}else if("h"===l){if(x("h"),I=C(2),12==I&&(I=0),null===I||t(I,0,11))return null}else if("H"===l){if(x("H"),I=C(2),null===I||t(I,0,23))return null}else if("m"===l){if(x("m"),P=C(2),null===P||t(P,0,59))return null}else if("s"===l){if(x("s"),B=C(2),null===B||t(B,0,59))return null}else if("f"===l){if(d=x("f"),z=C(d),null!==z&&d>3&&(z=parseInt((""+z).substring(0,3),10)),null===z||t(z,0,999))return null}else if("t"===l){if(d=x("t"),b=D.AM,w=D.PM,1===d&&(b=r(b),w=r(w)),h=T(w),!h&&!T(b))return null}else if("z"===l){if(m=!0,d=x("z"),"Z"===e.substr(R,1)){if(!v)return null;S();continue}if(_=e.substr(R,6).match(d>2?p:u),!_)return null;if(_=_[0],R=_.length,_=_.split(":"),y=parseInt(_[0],10),t(y,-12,13))return null;if(d>2&&(k=parseInt(_[1],10),isNaN(k)||t(k,0,59)))return null}else if("T"===l)v=S();else if("'"===l)M=!0,S();else if(!S())return null;return null===A&&(A=N),h&&12>I&&(I+=12),null===F&&(F=1),m?(y&&(I+=-y),k&&(P+=-k),e=new Date(Date.UTC(A,E,F,I,P,B,z))):(e=new Date(A,E,F,I,P,B,z),o(e,I)),100>A&&e.setFullYear(A),e.getDate()!==F&&m===n?null:e}var d=/\u00A0/g,c=/[eE][\-+]?[0-9]+/,u=/[+|\-]\d{1,2}/,p=/[+|\-]\d{1,2}:\d{2}/,f=/^\/Date\((.*?)\)\/$/,h=["G","g","d","F","D","y","m","T","t"],g={2:/^\d{1,2}/,4:/^\d{4}/},m={}.toString;at.parseDate=function(e,t,n){if("[object Date]"===m.call(e))return e;var i,r,o=0,a=null;if(e&&0===e.indexOf("/D")&&(a=f.exec(e)))return new Date(parseInt(a[1],10));if(n=at.getCulture(n),!t){for(t=[],r=n.calendar.patterns,i=h.length;i>o;o++)t[o]=r[h[o]];o=0,t.push("yyyy/MM/dd HH:mm:ss","yyyy/MM/dd HH:mm","yyyy/MM/dd","ddd MMM dd yyyy HH:mm:ss","yyyy-MM-ddTHH:mm:ss.fffffffzzz","yyyy-MM-ddTHH:mm:ss.fffzzz","yyyy-MM-ddTHH:mm:sszzz","yyyy-MM-ddTHH:mmzzz","yyyy-MM-ddTHH:mmzz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm","yyyy-MM-dd HH:mm:ss","yyyy-MM-dd HH:mm","yyyy-MM-dd")}for(t=ct(t)?t:[t],i=t.length;i>o;o++)if(a=l(e,t[o],n))return a;return a},at.parseInt=function(e,t){var n=at.parseFloat(e,t);return n&&(n=0|n),n},at.parseFloat=function(e,t,n){if(!e&&0!==e)return null;if(typeof e===yt)return e;e=""+e,t=at.getCulture(t);var i,r,o=t.numberFormat,a=o.percent,s=o.currency,l=s.symbol,u=a.symbol,p=e.indexOf("-");return c.test(e)?(e=parseFloat(e.replace(o["."],".")),isNaN(e)&&(e=null),e):p>0?null:(p=p>-1,e.indexOf(l)>-1||n&&n.toLowerCase().indexOf("c")>-1?(o=s,i=o.pattern[0].replace("$",l).split("n"),e.indexOf(i[0])>-1&&e.indexOf(i[1])>-1&&(e=e.replace(i[0],"").replace(i[1],""),p=!0)):e.indexOf(u)>-1&&(r=!0,o=a,l=u),e=e.replace("-","").replace(l,"").replace(d," ").split(o[","].replace(d," ")).join("").replace(o["."],"."),e=parseFloat(e),isNaN(e)?e=null:p&&(e*=-1),e&&r&&(e/=100),e)},Et&&(at.parseDate=function(e,t,n){return"[object Date]"===m.call(e)?e:Et.parseDate(e,t,n)},at.parseFloat=function(e,t){return typeof e===yt?e:e===n||null===e?null:(e=Et.parseFloat(e,t),isNaN(e)?null:e)})}(),function(){var t,i,r,o,a,s;ht.scrollbar=function(){var e,t=document.createElement("div");return t.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both",t.innerHTML="&nbsp;",document.body.appendChild(t),e=t.offsetWidth-t.scrollWidth,document.body.removeChild(t),e},ht.isRtl=function(t){return e(t).closest(".k-rtl").length>0},t=document.createElement("table");try{t.innerHTML="<tr><td></td></tr>",ht.tbodyInnerHtml=!0}catch(l){ht.tbodyInnerHtml=!1}ht.touch="ontouchstart"in window,ht.msPointers=navigator.msPointerEnabled,ht.pointers=navigator.pointerEnabled,i=ht.transitions=!1,r=ht.transforms=!1,o="HTMLElement"in window?HTMLElement.prototype:[],ht.hasHW3D="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix||"MozPerspective"in document.documentElement.style||"msPerspective"in document.documentElement.style,lt(["Moz","webkit","O","ms"],function(){var e,o=""+this,a=typeof t.style[o+"Transition"]===wt;return a||typeof t.style[o+"Transform"]===wt?(e=o.toLowerCase(),r={css:"ms"!=e?"-"+e+"-":"",prefix:o,event:"o"===e||"webkit"===e?e:""},a&&(i=r,i.event=i.event?i.event+"TransitionEnd":"transitionend"),!1):n}),ht.transforms=r,ht.transitions=i,ht.devicePixelRatio=window.devicePixelRatio===n?1:window.devicePixelRatio;try{ht.screenWidth=window.outerWidth||window.screen?window.screen.availWidth:window.innerWidth,ht.screenHeight=window.outerHeight||window.screen?window.screen.availHeight:window.innerHeight}catch(l){ht.screenWidth=window.screen.availWidth,ht.screenHeight=window.screen.availHeight}ht.detectOS=function(e){var t,n,i=!1,r=[],o=!/mobile safari/i.test(e),a={fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)\.(\d+(\.\d+)?)/,iphone:/(iPhone|iPod).*OS\s+(\d+)[\._]([\d\._]+)/,ipad:/(iPad).*OS\s+(\d+)[\._]([\d_]+)/,meego:/(MeeGo).+NokiaBrowser\/(\d+)\.([\d\._]+)/,webos:/(webOS)\/(\d+)\.(\d+(\.\d+)?)/,blackberry:/(BlackBerry|BB10).*?Version\/(\d+)\.(\d+(\.\d+)?)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,wp:/(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,ffos:/(Mobile).*rv:(\d+)\.(\d+(\.\d+)?).*Firefox/},s={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,blackberry:/^blackberry|playbook/i,windows:/windows/,wp:/wp/,meego:/meego|ffos/},l={tablet:/playbook|ipad|fire/i},d={omini:/Opera\sMini/i,omobile:/Opera\sMobi/i,firefox:/Firefox|Fennec/i,mobilesafari:/version\/.*safari/i,chrome:/chrome/i,webkit:/webkit/i,ie:/MSIE|Windows\sPhone/i};for(n in a)if(a.hasOwnProperty(n)&&(r=e.match(a[n]))){if("windows"==n&&"plugins"in navigator)return!1;i={},i.device=n,i.tablet=c(n,l,!1),i.browser=c(e,d,"default"),i.name=c(n,s),i[i.name]=!0,i.majorVersion=r[2],i.minorVersion=r[3].replace("_","."),t=i.minorVersion.replace(".","").substr(0,2),i.flatVersion=i.majorVersion+t+Array(3-(t.length<3?t.length:2)).join("0"),i.appMode=window.navigator.standalone||/file|local|wmapp/.test(window.location.protocol)||typeof window.PhoneGap!==Tt||typeof window.cordova!==Tt,i.android&&(ht.devicePixelRatio<1.5&&i.flatVersion<400||o)&&(ht.screenWidth>800||ht.screenHeight>800)&&(i.tablet=n);break}return i},a=ht.mobileOS=ht.detectOS(navigator.userAgent),ht.wpDevicePixelRatio=a.wp?screen.width/320:0,ht.kineticScrollNeeded=a&&(ht.touch||ht.msPointers||ht.pointers),ht.hasNativeScrolling=!1,(a.ios&&a.majorVersion>4||a.android&&a.majorVersion>2||a.wp)&&(ht.hasNativeScrolling=a),ht.mouseAndTouchPresent=ht.touch&&!(ht.mobileOS.ios||ht.mobileOS.android),ht.detectBrowser=function(e){var t,n=!1,i=[],r={webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie|trident)(?:.*? rv:([\w.]+)| ([\w.]+))/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(t in r)if(r.hasOwnProperty(t)&&(i=e.match(r[t]))){n={},n[t]=!0,n[i[1].toLowerCase()]=!0,n.version=parseInt(document.documentMode||i[2],10);break}return n},ht.browser=ht.detectBrowser(navigator.userAgent),ht.zoomLevel=function(){try{return ht.touch?document.documentElement.clientWidth/window.innerWidth:ht.browser.msie&&ht.browser.version>=10?(top||window).outerWidth/(top||window).innerWidth:1}catch(e){return 1}},ht.cssBorderSpacing=n!==document.documentElement.style.borderSpacing&&!(ht.browser.msie&&ht.browser.version<8),function(t){var n,i=parseInt(t.version,10);t.msie?n="ie":t.mozilla?n="ff":t.safari?n="safari":t.webkit?n="webkit":t.opera&&(n="opera"),n&&e(document.documentElement).addClass("k-"+n+" k-"+n+i)}(ht.browser),ht.eventCapture=document.documentElement.addEventListener,ht.placeholder="placeholder"in document.createElement("input"),ht.stableSort=function(){var e=[0,1,2,3,4,5,6,7,8,9,10,11,12].sort(function(){return 0});return 0===e[0]&&1===e[1]&&2===e[2]&&3===e[3]&&4===e[4]&&5===e[5]&&6===e[6]&&7===e[7]&&8===e[8]&&9===e[9]&&10===e[10]&&11===e[11]&&12===e[12]}(),ht.matchesSelector=o.webkitMatchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector||o.matchesSelector||function(t){for(var n=document.querySelectorAll?(this.parentNode||document).querySelectorAll(t)||[]:e(t),i=n.length;i--;)if(n[i]==this)return!0;return!1},ht.pushState=window.history&&window.history.pushState,s=document.documentMode,ht.hashChange="onhashchange"in window&&!(ht.browser.msie&&(!s||8>=s))}(),M={left:{reverse:"right"},right:{reverse:"left"},down:{reverse:"up"},up:{reverse:"down"},top:{reverse:"bottom"},bottom:{reverse:"top"},"in":{reverse:"out"},out:{reverse:"in"}},L={},e.extend(L,{Element:function(t){this.element=e(t)},promise:function(e,t){e.is(":visible")||e.css({display:e.data("olddisplay")||"block"}).css("display"),t.hide&&e.data("olddisplay",e.css("display")).hide(),t.init&&t.init(),t.completeCallback&&t.completeCallback(e),e.dequeue()},transitionPromise:function(e,t,n){var i=at.wrap(e);return i.append(t),e.hide(),t.show(),n.completeCallback&&n.completeCallback(e),e}}),"kendoAnimate"in e.fn||st(e.fn,{kendoStop:function(e,t){return this.stop(e,t)},kendoAnimate:function(e,t,n,i){return v(this,e,t,n,i)},kendoAnimateTo:function(e,t,n,i,r){return _(this,e,t,n,i,r)},kendoAddClass:function(e,t){return at.toggleClass(this,e,t,!0)},kendoRemoveClass:function(e,t){return at.toggleClass(this,e,t,!1)},kendoToggleClass:function(e,t,n){return at.toggleClass(this,e,t,n)}}),O=/&/g,N=/</g,V=/>/g,U=function(e){return e.target},ht.touch&&(U=function(e){var t="originalEvent"in e?e.originalEvent.changedTouches:"changedTouches"in e?e.changedTouches:null;return t?document.elementFromPoint(t[0].clientX,t[0].clientY):e.target},lt(["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap"],function(t,n){e.fn[n]=function(e){return this.bind(n,e)}})),ht.touch?ht.mobileOS?(ht.mousedown="touchstart",ht.mouseup="touchend",ht.mousemove="touchmove",ht.mousecancel="touchcancel",ht.click="touchend",ht.resize="orientationchange"):(ht.mousedown="mousedown touchstart",ht.mouseup="mouseup touchend",ht.mousemove="mousemove touchmove",ht.mousecancel="mouseleave touchcancel",ht.click="click",ht.resize="resize"):ht.pointers?(ht.mousemove="pointermove",ht.mousedown="pointerdown",ht.mouseup="pointerup",ht.mousecancel="pointercancel",ht.click="pointerup",ht.resize="orientationchange resize"):ht.msPointers?(ht.mousemove="MSPointerMove",ht.mousedown="MSPointerDown",ht.mouseup="MSPointerUp",ht.mousecancel="MSPointerCancel",ht.click="MSPointerUp",ht.resize="orientationchange resize"):(ht.mousemove="mousemove",ht.mousedown="mousedown",ht.mouseup="mouseup",ht.mousecancel="mouseleave",ht.click="click",ht.resize="resize"),W=function(e,t){var n,i,r,o,a=t||"d",s=1;for(i=0,r=e.length;r>i;i++)o=e[i],""!==o&&(n=o.indexOf("["),0!==n&&(-1==n?o="."+o:(s++,o="."+o.substring(0,n)+" || {})"+o.substring(n))),s++,a+=o+(r-1>i?" || {})":")"));return Array(s).join("(")+a},j=/^([a-z]+:)?\/\//i,st(at,{ui:at.ui||{},fx:at.fx||g,effects:at.effects||L,mobile:at.mobile||{},data:at.data||{},dataviz:at.dataviz||{ui:{roles:{}}},keys:{INSERT:45,DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,END:35,HOME:36,SPACEBAR:32,PAGEUP:33,PAGEDOWN:34,F2:113,F10:121,F12:123},support:at.support||ht,animate:at.animate||v,ns:"",attr:function(e){return"data-"+at.ns+e},wrap:s,deepExtend:l,getComputedStyles:u,size:p,getOffset:at.getOffset||f,parseEffects:at.parseEffects||h,toggleClass:at.toggleClass||b,directions:at.directions||M,Observable:E,Class:i,Template:S,template:dt(S.compile,S),render:dt(S.render,S),stringify:dt(ft.stringify,ft),eventTarget:U,htmlEncode:w,isLocalUrl:function(e){return e&&!j.test(e)},expr:function(e,t,n){return e=e||"",typeof t==wt&&(n=t,t=!1),n=n||"d",e&&"["!==e.charAt(0)&&(e="."+e),e=t?W(e.split("."),n):n+e},getter:function(e,t){return St[e]=St[e]||Function("d","return "+at.expr(e,t))},setter:function(e){return Dt[e]=Dt[e]||Function("d,value",at.expr(e)+"=value")},accessor:function(e){return{get:at.getter(e),set:at.setter(e)}},guid:function(){var e,t,n="";for(e=0;32>e;e++)t=0|16*pt.random(),(8==e||12==e||16==e||20==e)&&(n+="-"),n+=(12==e?4:16==e?8|3&t:t).toString(16);return n},roleSelector:function(e){return e.replace(/(\S+)/g,"["+at.attr("role")+"=$1],").slice(0,-1)},triggeredByInput:function(e){return/^(label|input|textarea|select)$/i.test(e.target.tagName)},logToConsole:function(e){var t=window.console;n!==t&&t.log&&t.log(e)}}),G=E.extend({init:function(e,t){var n=this;n.element=at.jQuery(e).handler(n),E.fn.init.call(n),t=n.options=st(!0,{},n.options,t),n.element.attr(at.attr("role"))||n.element.attr(at.attr("role"),(t.name||"").toLowerCase()),n.element.data("kendo"+t.prefix+t.name,n),n.bind(n.events,t)},events:[],options:{prefix:""},_hasBindingTarget:function(){return!!this.element[0].kendoBindingTarget},_tabindex:function(e){e=e||this.wrapper;var t=this.element,n="tabindex",i=e.attr(n)||t.attr(n);t.removeAttr(n),e.attr(n,isNaN(i)?0:i)},setOptions:function(t){for(var n,i=this,r=0,o=i.events.length;o>r;r++)n=i.events[r],i.options[n]&&t[n]&&i.unbind(n,i.options[n]);e.extend(i.options,t),i.bind(i.events,t)},destroy:function(){var e=this;e.element.removeData("kendo"+e.options.prefix+e.options.name),e.element.removeData("handler"),e.unbind()}}),at.notify=ut,q=/template$/i,Y=/^\s*(?:\{(?:.|\r\n|\n)*\}|\[(?:.|\r\n|\n)*\])\s*$/,Q=/^\{(\d+)(:[^\}]+)?\}/,$=/([A-Z])/g,at.initWidget=function(t,i,r){var o,a,s,l,d,c,u,p;if(r?r.roles&&(r=r.roles):r=at.ui.roles,t=t.nodeType?t:t[0],c=t.getAttribute("data-"+at.ns+"role"),c&&(s=-1===c.indexOf(".")?r[c]:at.getter(c)(window))){for(p=y(t,"dataSource"),i=e.extend({},k(t,s.fn.options),i),p&&(i.dataSource=typeof p===wt?at.getter(p)(window):p),l=0,d=s.fn.events.length;d>l;l++)a=s.fn.events[l],u=y(t,a),u!==n&&(i[a]=at.getter(u)(window));return o=e(t).data("kendo"+s.fn.options.prefix+s.fn.options.name),o?o.setOptions(i):o=new s(t,i),o}},at.rolesFromNamespaces=function(e){var t,n,i=[];for(e[0]||(e=[at.ui,at.dataviz.ui]),t=0,n=e.length;n>t;t++)i[t]=e[t].roles;return st.apply(null,[{}].concat(i.reverse()))},at.init=function(t){var n=at.rolesFromNamespaces(At.call(arguments,1));e(t).find("[data-"+at.ns+"role]").andSelf().each(function(){at.initWidget(this,{},n)})},at.destroy=function(t){e(t).find("[data-"+at.ns+"role]").andSelf().each(function(){var t=e(this),n=at.widgetInstance(t,at.ui)||at.widgetInstance(t,at.mobile.ui)||at.widgetInstance(t,at.dataviz.ui);n&&n.destroy()})},at.parseOptions=k,st(at.ui,{Widget:G,roles:{},progress:function(t,n){var i,r,o,a,s=t.find(".k-loading-mask"),l=at.support,d=l.browser;n?s.length||(i=l.isRtl(t),r=i?"right":"left",a=t.scrollLeft(),o=d.webkit?i?t[0].scrollWidth-t.width()-2*a:0:0,s=e("<div class='k-loading-mask'><span class='k-loading-text'>Loading...</span><div class='k-loading-image'/><div class='k-loading-color'/></div>").width("100%").height("100%").css("top",t.scrollTop()).css(r,Math.abs(a)+o).prependTo(t)):s&&s.remove()},plugin:function(t,i,r){var o,a=t.fn.options.name;i=i||at.ui,r=r||"",i[a]=t,i.roles[a.toLowerCase()]=t,o="getKendo"+r+a,a="kendo"+r+a,e.fn[a]=function(i){var r,o=this;return typeof i===wt?(r=At.call(arguments,1),this.each(function(){var t,s,l=e.data(this,a);if(!l)throw Error(at.format("Cannot call method '{0}' of {1} before it is initialized",i,a));if(t=l[i],typeof t!==bt)throw Error(at.format("Cannot find method '{0}' of {1}",i,a));return s=t.apply(l,r),s!==n?(o=s,!1):n})):this.each(function(){new t(this,i)}),o},e.fn[o]=function(){return this.data(a)}}}),K={bind:function(){return this}},X=G.extend({init:function(e,t){G.fn.init.call(this,e,t),this.element.autoApplyNS(),this.wrapper=this.element,this.element.addClass("km-widget")},destroy:function(){G.fn.destroy.call(this),this.element.kendoDestroy()},options:{prefix:"Mobile"},events:[],view:function(){var e=this.element.closest(at.roleSelector("view splitview modalview drawer"));return at.widgetInstance(e,at.mobile.ui)},container:function(){var e=this.element.closest(at.roleSelector("view layout modalview drawer"));return at.widgetInstance(e,at.mobile.ui)||K}}),st(at.mobile,{init:function(e){at.init(e,at.mobile.ui,at.ui,at.dataviz.ui)},ui:{Widget:X,roles:{},plugin:function(e){at.ui.plugin(e,at.mobile.ui,"Mobile")}}}),at.touchScroller=function(t,n){return e(t).map(function(t,i){return i=e(i),ht.kineticScrollNeeded&&at.mobile.ui.Scroller&&!i.data("kendoMobileScroller")?(i.kendoMobileScroller(n),i.data("kendoMobileScroller")):!1})[0]},at.preventDefault=function(e){e.preventDefault()},at.widgetInstance=function(e,t){var i=t.roles[e.data(at.ns+"role")];return i?e.data("kendo"+i.fn.options.prefix+i.fn.options.name):n
},at.onResize=function(t){var n=t;return ht.mobileOS.android&&(n=function(){setTimeout(t,600)}),e(window).on(ht.resize,n),n},at.unbindResize=function(t){e(window).off(ht.resize,t)},at.attrValue=function(e,t){return e.data(at.ns+t)},at.days={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},e.extend(e.expr[":"],{focusable:function(t){var n=e.attr(t,"tabindex");return x(t,!isNaN(n)&&n>-1)}}),J=["mousedown","mousemove","mouseenter","mouseleave","mouseover","mouseout","mouseup","click"],Z="label, input, [data-rel=external]",et={setupMouseMute:function(){var t,n=0,i=J.length,r=document.documentElement;if(!et.mouseTrap&&ht.eventCapture)for(et.mouseTrap=!0,et.bustClick=!1,et.captureMouse=!1,t=function(t){et.captureMouse&&("click"===t.type?et.bustClick&&!e(t.target).is(Z)&&(t.preventDefault(),t.stopPropagation()):t.stopPropagation())};i>n;n++)r.addEventListener(J[n],t,!0)},muteMouse:function(e){et.captureMouse=!0,e.data.bustClick&&(et.bustClick=!0),clearTimeout(et.mouseTrapTimeoutID)},unMuteMouse:function(){clearTimeout(et.mouseTrapTimeoutID),et.mouseTrapTimeoutID=setTimeout(function(){et.captureMouse=!1,et.bustClick=!1},400)}},tt={down:"touchstart mousedown",move:"mousemove touchmove",up:"mouseup touchend touchcancel",cancel:"mouseleave touchcancel"},ht.touch&&(ht.mobileOS.ios||ht.mobileOS.android)?tt={down:"touchstart",move:"touchmove",up:"touchend touchcancel",cancel:"touchcancel"}:ht.pointers?tt={down:"pointerdown",move:"pointermove",up:"pointerup",cancel:"pointercancel pointerleave"}:ht.msPointers&&(tt={down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp",cancel:"MSPointerCancel MSPointerLeave"}),!ht.msPointers||"onmspointerenter"in window||e.each({MSPointerEnter:"MSPointerOver",MSPointerLeave:"MSPointerOut"},function(t,n){e.event.special[t]={delegateType:n,bindType:n,handle:function(t){var i,r=this,o=t.relatedTarget,a=t.handleObj;return(!o||o!==r&&!e.contains(r,o))&&(t.type=a.origType,i=a.handler.apply(this,arguments),t.type=n),i}}}),nt=function(e){return tt[e]||e},it=/([^ ]+)/g,at.applyEventMap=function(e,t){return e=e.replace(it,nt),t&&(e=e.replace(it,"$1."+t)),e},rt=e.fn.on,st(!0,T,e),T.fn=T.prototype=new e,T.fn.constructor=T,T.fn.init=function(t,n){return n&&n instanceof e&&!(n instanceof T)&&(n=T(n)),e.fn.init.call(this,t,n,ot)},T.fn.init.prototype=T.fn,ot=T(document),st(T.fn,{handler:function(e){return this.data("handler",e),this},autoApplyNS:function(e){return this.data("kendoNS",e||at.guid()),this},on:function(){var e,t,n,i,r,o,a=this,s=a.data("kendoNS");return 1===arguments.length?rt.call(a,arguments[0]):(e=a,t=At.call(arguments),typeof t[t.length-1]===Tt&&t.pop(),n=t[t.length-1],i=at.applyEventMap(t[0],s),ht.mouseAndTouchPresent&&i.search(/mouse|click/)>-1&&this[0]!==document.documentElement&&(et.setupMouseMute(),r=2===t.length?null:t[1],o=i.indexOf("click")>-1&&i.indexOf("touchend")>-1,rt.call(this,{touchstart:et.muteMouse,touchend:et.unMuteMouse},r,{bustClick:o})),typeof n===wt&&(e=a.data("handler"),n=e[n],t[t.length-1]=function(t){n.call(e,t)}),t[0]=i,rt.apply(a,t),a)},kendoDestroy:function(e){return e=e||this.data("kendoNS"),e&&this.off("."+e),this}}),at.jQuery=T,at.eventMap=tt,at.timezone=function(){function e(e,t){var n,i,r,o=t[3],a=t[4],s=t[5],l=t[8];return l||(t[8]=l={}),l[e]?l[e]:(isNaN(a)?0===a.indexOf("last")?(n=new Date(Date.UTC(e,d[o]+1,1,s[0]-24,s[1],s[2],0)),i=c[a.substr(4,3)],r=n.getUTCDay(),n.setUTCDate(n.getUTCDate()+i-r-(i>r?7:0))):a.indexOf(">=")>=0&&(n=new Date(Date.UTC(e,d[o],a.substr(5),s[0],s[1],s[2],0)),i=c[a.substr(0,3)],r=n.getUTCDay(),n.setUTCDate(n.getUTCDate()+i-r+(r>i?7:0))):n=new Date(Date.UTC(e,d[o],a,s[0],s[1],s[2],0)),l[e]=n)}function t(t,n,i){var r,o,a;return(n=n[i])?(a=new Date(t).getUTCFullYear(),n=jQuery.grep(n,function(e){var t=e[0],n=e[1];return a>=t&&(n>=a||t==a&&"only"==n||"max"==n)}),n.push(t),n.sort(function(t,n){return"number"!=typeof t&&(t=Number(e(a,t))),"number"!=typeof n&&(n=Number(e(a,n))),t-n}),n[jQuery.inArray(t,n)-1]):(r=i.split(":"),o=0,r.length>1&&(o=60*r[0]+Number(r[1])),[-1e6,"max","-","Jan",1,[0,0,0],o,"-"])}function n(e,t,n){var i,r,o;if(t=t[n],!t)throw Error('Timezone "'+n+'" is either incorrect, or kendo.timezones.min.js is not included.');for(i=t.length-1;i>=0&&(r=t[i][3],!(r&&e>r));i--);if(o=t[i+1],!o)throw Error('Timezone "'+n+'" not found on '+e+".");return o}function i(e,i,r,o){typeof e!=yt&&(e=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));var a=n(e,i,o);return{zone:a,rule:t(e,r,a[1])}}function r(e,t){var n,r,o;return"Etc/UTC"==t||"Etc/GMT"==t?0:(n=i(e,this.zones,this.rules,t),r=n.zone,o=n.rule,o?r[0]-o[6]:r[0])}function o(e,t){var n=i(e,this.zones,this.rules,t),r=n.zone,o=n.rule,a=r[2];return a.indexOf("/")>=0?a.split("/")[o&&o[6]?1:0]:a.indexOf("%s")>=0?a.replace("%s",o&&"-"!=o[7]?o[7]:""):a}function a(e,t,n){var i,r;return typeof t==wt&&(t=this.offset(e,t)),typeof n==wt&&(n=this.offset(e,n)),i=e.getTimezoneOffset(),e=new Date(e.getTime()+6e4*(t-n)),r=e.getTimezoneOffset(),new Date(e.getTime()+6e4*(r-i))}function s(e,t){return this.convert(e,e.getTimezoneOffset(),t)}function l(e,t){return this.convert(e,t,e.getTimezoneOffset())}var d={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},c={Sun:0,Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6};return{zones:{},rules:{},offset:r,convert:a,apply:s,remove:l,abbr:o}}(),at.date=function(){function e(e,t){return 0===t&&23===e.getHours()?(e.setHours(e.getHours()+2),!0):!1}function t(t,n,i){var r=t.getHours();i=i||1,n=(n-t.getDay()+7*i)%7,t.setDate(t.getDate()+n),e(t,r)}function n(e,n,i){return e=new Date(e),t(e,n,i),e}function i(e){return new Date(e.getFullYear(),e.getMonth(),1)}function r(e){var t=new Date(e.getFullYear(),e.getMonth()+1,0),n=i(e),r=Math.abs(t.getTimezoneOffset()-n.getTimezoneOffset());return r&&t.setHours(n.getHours()+r/60),t}function o(t){return t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0),e(t,0),t}function a(e){return Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function s(e){return e.getTime()-o(e)}function l(e,t,n){var i,r=s(t),o=s(n);return e&&r!=o?(t>=n&&(n+=m),i=s(e),r>i&&(i+=m),r>o&&(o+=m),i>=r&&o>=i):!0}function d(e,t,n){var i,r=t.getTime(),o=n.getTime();return r>=o&&(o+=m),i=e.getTime(),i>=r&&o>=i}function c(t,n){var i=t.getHours();return t=new Date(t),u(t,n*m),e(t,i),t}function u(e,t,n){var i,r=e.getTimezoneOffset();e.setTime(e.getTime()+t),n||(i=e.getTimezoneOffset()-r,e.setTime(e.getTime()+i*g))}function p(){return o(new Date)}function f(e){return o(e).getTime()==p().getTime()}function h(e){var t=new Date(1980,1,1,0,0,0);return e&&t.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),t}var g=6e4,m=864e5;return{adjustDST:e,dayOfWeek:n,setDayOfWeek:t,getDate:o,isInDateRange:d,isInTimeRange:l,isToday:f,nextDay:function(e){return c(e,1)},previousDay:function(e){return c(e,-1)},toUtcTime:a,MS_PER_DAY:m,MS_PER_MINUTE:g,setTime:u,addDays:c,today:p,toInvariantTime:h,firstDayOfMonth:i,lastDayOfMonth:r,getMilliseconds:s}}(),at.stripWhitespace=function(e){for(var t=document.createNodeIterator(e,NodeFilter.SHOW_TEXT,function(t){return t.parentNode==e?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},!1);t.nextNode();)t.referenceNode&&!t.referenceNode.textContent.trim()&&t.referenceNode.parentNode.removeChild(t.referenceNode)}}(jQuery,eval),"undefined"==typeof kendo_module&&(kendo_module=function(){}),function(e){function t(e,t){if(!t)return e;e+"/"===t&&(e=t);var n=RegExp("^"+t,"i");return n.test(e)||(e=t+"/"+e),r.protocol+"//"+(r.host+"/"+e).replace(/\/\/+/g,"/")}var n=window.kendo,i=n.support,r=window.location,o=window.history,a=50,s=/^#*/,l=window.document,d=n.Observable.extend({start:function(e){var t=this;if(e=e||{},t.bind(["change"],e),!t._started){if(t._started=!0,t._pushStateRequested=!!e.pushState,t._pushState=i.pushState&&t._pushStateRequested,t.root=e.root||"/",t._interval=0,t._normalizeUrl())return!0;t.current=t._currentLocation(),t.locations=[t.current],t._listenToLocationChange()}},stop:function(){e(window).unbind(".kendo"),this.unbind("change"),clearInterval(this._interval),this._started=!1},change:function(e){this.bind("change",e)},navigate:function(e,t){var n=this;return"#:back"===e?(o.back(),undefined):(e=e.replace(s,""),n.current!==e&&n.current!==decodeURIComponent(e)&&(t||!n.trigger("change",{url:e}))&&(n._pushState?(o.pushState({},l.title,n._makePushStateUrl(e)),n.current=n._currentLocation()):r.hash=n.current=e,n.locations.push(n.current)),undefined)},_normalizeUrl:function(){var e,t=this,n=t.root==r.pathname,a=t.root==r.pathname+"/",d=t._pushStateRequested&&!i.pushState&&!n,c=t._pushState&&n&&r.hash;return a&&t._pushState&&o.replaceState({},l.title,t.root),d?(r.replace(t.root+"#"+t._stripRoot(r.pathname)),!0):c?(e=t._makePushStateUrl(r.hash.replace(s,"")),o.replaceState({},l.title,e),!1):!1},_listenToLocationChange:function(){var t=this,n=e.proxy(t._checkUrl,t);this._pushState?e(window).bind("popstate.kendo",n):i.hashChange?e(window).bind("hashchange.kendo",n):t._interval=setInterval(n,a)},_checkUrl:function(){var e=this,t=e._currentLocation().replace(s,""),n=t===e.locations[e.locations.length-2],i=e.current;if(e.current!==t&&e.current!==decodeURIComponent(t))return e.current=t,e.trigger("change",{url:t})?(n?o.forward():o.back(),e.current=i,undefined):(n?e.locations.pop():e.locations.push(t),undefined)},_stripRoot:function(e){var t=this;return 0===e.indexOf(t.root)?e.substr(t.root.length).replace(/\/\//g,"/"):e},_makePushStateUrl:function(e){return t(e,this.root)},_currentLocation:function(){var e,t=this;return t._pushState?(e=r.pathname,r.search&&(e+=r.search),t._stripRoot(e)):r.hash.replace(s,"")}});n.absoluteURL=t,n.history=new d}(window.kendo.jQuery),function(){function e(e,t){return t?e:"([^/]+)"}function t(t){return RegExp("^"+t.replace(u,"\\$&").replace(l,"(?:$1)?").replace(d,e).replace(c,"(.*?)")+"$")}var n=window.kendo,i=n.history,r=n.Observable,o="init",a="routeMissing",s="change",l=/\((.*?)\)/g,d=/(\(\?)?:\w+/g,c=/\*\w+/g,u=/[\-{}\[\]+?.,\\\^$|#\s]/g,p=n.Class.extend({init:function(e,n){e instanceof RegExp||(e=t(e)),this.route=e,this._callback=n},callback:function(e){for(var t=this.route.exec(e).slice(1),n=0,i=t.length;i>n;n++)void 0!==t[n]&&(t[n]=decodeURIComponent(t[n]));this._callback.apply(null,t)},worksWith:function(e){return this.route.test(e)?(this.callback(e),!0):!1}}),f=r.extend({init:function(e){r.fn.init.call(this),this.routes=[],this.pushState=e?e.pushState:!1,e&&e.root&&(this.root=e.root),this.bind([o,a,s],e)},destroy:function(){i.unbind("change",this._urlChangedProxy),this.unbind()},start:function(){var e,t=this,n=function(e){t._urlChanged(e)};i.start({change:n,pushState:t.pushState,root:t.root}),e={url:i.current||"/"},t.trigger(o,e)||t._urlChanged(e),this._urlChangedProxy=n},route:function(e,t){this.routes.push(new p(e,t))},navigate:function(e,t){n.history.navigate(e,t)},_urlChanged:function(e){var t,n,i,r,o=e.url;if(o||(o="/"),this.trigger(s,{url:e.url}))return e.preventDefault(),void 0;for(n=0,i=this.routes,r=i.length;r>n;n++)if(t=i[n],t.worksWith(o))return;this.trigger(a,{url:o})&&e.preventDefault()}});n.Router=f}(),function(e){var t=window.kendo,n=t.Observable,i="SCRIPT",r="init",o="show",a="hide",s=/unrecognized expression/,l=n.extend({init:function(e,t){var i=this;t=t||{},n.fn.init.call(i),i.content=e,i.tagName=t.tagName||"div",i.model=t.model,i._wrap=t.wrap!==!1,i.bind([r,o,a],t)},render:function(n){var i=this,a=!i.element;return a&&(i.element=i._createElement()),n&&e(n).append(i.element),a&&(t.bind(i.element,i.model),i.trigger(r)),n&&i.trigger(o),i.element},hide:function(){this.element.detach(),this.trigger(a)},destroy:function(){var e=this.element;e&&(t.unbind(e),t.destroy(e),e.remove())},_createElement:function(){var t,n,r=this;try{n=e(document.getElementById(r.content)||r.content)}catch(o){s.test(o.message)&&(n=r.content)}return t=e("<"+r.tagName+" />").append(n[0].tagName===i?n.html():n),r._wrap||(t=t.contents()),t}}),d=l.extend({init:function(e,t){l.fn.init.call(this,e,t),this.regions={}},showIn:function(e,t){var n=this.regions[e];n&&n.hide(),t.render(this.render().find(e),n),this.regions[e]=t}});t.Layout=d,t.View=l}(window.kendo.jQuery),function(e,t){function n(e){return parseInt(e,10)}function i(e,t){return n(e.css(t))}function r(e){var t=e.effects;return"zoom"===t&&(t="zoom:in fade:in"),"fade"===t&&(t="fade:in"),"slide"===t&&(t="tile:left"),/^slide:(.+)$/.test(t)&&(t="tile:"+RegExp.$1),"overlay"===t&&(t="slideIn:left"),/^overlay:(.+)$/.test(t)&&(t="slideIn:"+RegExp.$1),e.effects=C.parseEffects(t),ut&&"tile:left"==t&&(e.previousDivisor=3),e}function o(e){var t,n=[];for(t in e)n.push(t);return n}function a(e){for(var t in e)-1!=U.indexOf(t)&&-1==W.indexOf(t)&&delete e[t];return e}function s(e,t){var n,i,r,o,a=[],s={};for(i in t)n=i.toLowerCase(),o=I&&-1!=U.indexOf(n),!E.hasHW3D&&o&&-1==W.indexOf(n)?delete t[i]:(r=t[i],o?a.push(i+"("+r+")"):s[i]=r);return a.length&&(s[at]=a.join(" ")),s}function l(e,t){var i,r,o;return I?(i=e.css(at),i==$?"scale"==t?1:0:(r=i.match(RegExp(t+"\\s*\\(([\\d\\w\\.]+)")),o=0,r?o=n(r[1]):(r=i.match(R)||[0,0,0,0,0],t=t.toLowerCase(),L.test(t)?o=parseFloat(r[3]/r[2]):"translatey"==t?o=parseFloat(r[4]/r[2]):"scale"==t?o=parseFloat(r[2]):"rotate"==t&&(o=parseFloat(Math.atan2(r[2],r[1])))),o)):parseFloat(e.css(t))}function d(e){return e.charAt(0).toUpperCase()+e.substring(1)}function c(e,t){var n=g.extend(t),i=n.prototype.directions;T[d(e)]=n,T.Element.prototype[e]=function(e,t,i,r){return new n(this.element,e,t,i,r)},S(i,function(t,i){T.Element.prototype[e+d(i)]=function(e,t,r){return new n(this.element,i,e,t,r)}})}function u(e,n,i,r){c(e,{directions:v,startValue:function(e){return this._startValue=e,this},endValue:function(e){return this._endValue=e,this},shouldHide:function(){return this._shouldHide},prepare:function(e,o){var a,s,l=this,d="out"===this._direction,c=l.element.data(n),u=!(isNaN(c)||c==i);a=u?c:t!==this._startValue?this._startValue:d?i:r,s=t!==this._endValue?this._endValue:d?r:i,this._reverse?(e[n]=s,o[n]=a):(e[n]=a,o[n]=s),l._shouldHide=o[n]===r}})}function p(e,t){var n=C.directions[t].vertical,i=e[n?J:X]()/2+"px";return b[t].replace("$size",i)}var f,h,g,m,v,_,b,w,y,k,x,C=window.kendo,T=C.effects,S=e.each,D=e.extend,A=e.proxy,E=C.support,F=E.browser,I=E.transforms,P=E.transitions,B={scale:0,scalex:0,scaley:0,scale3d:0},z={translate:0,translatex:0,translatey:0,translate3d:0},H=t!==document.documentElement.style.zoom&&!I,R=/matrix3?d?\s*\(.*,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?/i,M=/^(-?[\d\.\-]+)?[\w\s]*,?\s*(-?[\d\.\-]+)?[\w\s]*/i,L=/translatex?$/i,O=/(zoom|fade|expand)(\w+)/,N=/(zoom|fade|expand)/,V=/[xy]$/i,U=["perspective","rotate","rotatex","rotatey","rotatez","rotate3d","scale","scalex","scaley","scalez","scale3d","skew","skewx","skewy","translate","translatex","translatey","translatez","translate3d","matrix","matrix3d"],W=["rotate","scale","scalex","scaley","skew","skewx","skewy","translate","translatex","translatey","matrix"],j={rotate:"deg",scale:"",skew:"px",translate:"px"},G=I.css,q=Math.round,Y="",Q="px",$="none",K="auto",X="width",J="height",Z="hidden",et="origin",tt="abortId",nt="overflow",it="translate",rt="completeCallback",ot=G+"transition",at=G+"transform",st=G+"backface-visibility",lt=G+"perspective",dt="1500px",ct="perspective("+dt+")",ut=E.mobileOS&&7==E.mobileOS.majorVersion,pt={left:{reverse:"right",property:"left",transition:"translatex",vertical:!1,modifier:-1},right:{reverse:"left",property:"left",transition:"translatex",vertical:!1,modifier:1},down:{reverse:"up",property:"top",transition:"translatey",vertical:!0,modifier:1},up:{reverse:"down",property:"top",transition:"translatey",vertical:!0,modifier:-1},top:{reverse:"bottom"},bottom:{reverse:"top"},"in":{reverse:"out",modifier:-1},out:{reverse:"in",modifier:1},vertical:{reverse:"vertical"},horizontal:{reverse:"horizontal"}};C.directions=pt,D(e.fn,{kendoStop:function(e,t){return P?T.stopQueue(this,e||!1,t||!1):this.stop(e,t)}}),I&&!P&&(S(W,function(n,i){e.fn[i]=function(n){if(t===n)return l(this,i);var r=e(this)[0],o=i+"("+n+j[i.replace(V,"")]+")";return-1==r.style.cssText.indexOf(at)?e(this).css(at,o):r.style.cssText=r.style.cssText.replace(RegExp(i+"\\(.*?\\)","i"),o),this},e.fx.step[i]=function(t){e(t.elem)[i](t.now)}}),f=e.fx.prototype.cur,e.fx.prototype.cur=function(){return-1!=W.indexOf(this.prop)?parseFloat(e(this.elem)[this.prop]()):f.apply(this,arguments)}),C.toggleClass=function(e,t,n,i){return t&&(t=t.split(" "),P&&(n=D({exclusive:"all",duration:400,ease:"ease-out"},n),e.css(ot,n.exclusive+" "+n.duration+"ms "+n.ease),setTimeout(function(){e.css(ot,"").css(J)},n.duration)),S(t,function(t,n){e.toggleClass(n,i)})),e},C.parseEffects=function(e,t){var n={};return"string"==typeof e?S(e.split(" "),function(e,i){var r=!N.test(i),o=i.replace(O,function(e,t,n){return t+":"+n.toLowerCase()}),a=o.split(":"),s=a[1],l={};a.length>1&&(l.direction=t&&r?pt[s].reverse:s),n[a[0]]=l}):S(e,function(e){var i=this.direction;i&&t&&!N.test(e)&&(this.direction=pt[i].reverse),n[e]=this}),n},P&&D(T,{transition:function(t,n,i){var r,a,l,d,c=0,u=t.data("keys")||[];i=D({duration:200,ease:"ease-out",complete:null,exclusive:"all"},i),l=!1,d=function(){l||(l=!0,a&&(clearTimeout(a),a=null),t.removeData(tt).dequeue().css(ot,"").css(ot),i.complete.call(t))},i.duration=e.fx?e.fx.speeds[i.duration]||i.duration:i.duration,r=s(t,n),e.merge(u,o(r)),t.data("keys",e.unique(u)).height(),t.css(ot,i.exclusive+" "+i.duration+"ms "+i.ease).css(ot),t.css(r).css(at),P.event&&(t.one(P.event,d),0!==i.duration&&(c=500)),a=setTimeout(d,i.duration+c),t.data(tt,a),t.data(rt,d)},stopQueue:function(e,t,n){var i,r=e.data("keys"),o=!n&&r,a=e.data(rt);return o&&(i=C.getComputedStyles(e[0],r)),a&&a(),o&&e.css(i),e.removeData("keys").stop(t)}}),h=C.Class.extend({init:function(e,t){var n=this;n.element=e,n.effects=[],n.options=t,n.restore=[]},run:function(t){var n,i,r,o,l,d,c,u=this,p=t.length,f=u.element,h=u.options,g=e.Deferred(),m={},v={};for(u.effects=t,g.then(e.proxy(u,"complete")),f.data("animating",!0),i=0;p>i;i++)for(n=t[i],n.setReverse(h.reverse),n.setOptions(h),u.addRestoreProperties(n.restore),n.prepare(m,v),l=n.children(),r=0,d=l.length;d>r;r++)l[r].duration(h.duration).run();for(c in h.effects)D(v,h.effects[c].properties);for(f.is(":visible")||D(m,{display:f.data("olddisplay")||"block"}),I&&!h.reset&&(o=f.data("targetTransform"),o&&(m=D(o,m))),m=s(f,m),I&&!P&&(m=a(m)),f.css(m).css(at),i=0;p>i;i++)t[i].setup();return h.init&&h.init(),f.data("targetTransform",v),T.animate(f,v,D({},h,{complete:g.resolve})),g.promise()},stop:function(){e(this.element).kendoStop(!0,!0)},addRestoreProperties:function(e){for(var t,n=this.element,i=0,r=e.length;r>i;i++)t=e[i],this.restore.push(t),n.data(t)||n.data(t,n.css(t))},restoreCallback:function(){var e,t,n,i=this.element;for(e=0,t=this.restore.length;t>e;e++)n=this.restore[e],i.css(n,i.data(n))},complete:function(){var t=this,n=0,i=t.element,r=t.options,o=t.effects,a=o.length;for(i.removeData("animating").dequeue(),r.hide&&i.data("olddisplay",i.css("display")).hide(),this.restoreCallback(),H&&!I&&setTimeout(e.proxy(this,"restoreCallback"),0);a>n;n++)o[n].teardown();r.completeCallback&&r.completeCallback(i)}}),T.promise=function(e,t){var n,i,r,o=[],a=new h(e,t),s=C.parseEffects(t.effects);t.effects=s;for(r in s)n=T[d(r)],n&&(i=new n(e,s[r].direction),o.push(i));o[0]?a.run(o):(e.is(":visible")||e.css({display:e.data("olddisplay")||"block"}).css("display"),t.init&&t.init(),e.dequeue(),a.complete())},T.transitionPromise=function(e,t,n){return T.animateTo(e,t,n),e},D(T,{animate:function(n,r,o){var s=o.transition!==!1;delete o.transition,P&&"transition"in T&&s?T.transition(n,r,o):I?n.animate(a(r),{queue:!1,show:!1,hide:!1,duration:o.duration,complete:o.complete}):n.each(function(){var n=e(this),a={};S(U,function(e,o){var s,l,d,c,u,p,f,h=r?r[o]+" ":null;h&&(l=r,o in B&&r[o]!==t?(s=h.match(M),I&&D(l,{scale:+s[0]})):o in z&&r[o]!==t&&(d=n.css("position"),c="absolute"==d||"fixed"==d,n.data(it)||(c?n.data(it,{top:i(n,"top")||0,left:i(n,"left")||0,bottom:i(n,"bottom"),right:i(n,"right")}):n.data(it,{top:i(n,"marginTop")||0,left:i(n,"marginLeft")||0})),u=n.data(it),s=h.match(M),s&&(p=o==it+"y"?0:+s[1],f=o==it+"y"?+s[1]:+s[2],c?(isNaN(u.right)?isNaN(p)||D(l,{left:u.left+p}):isNaN(p)||D(l,{right:u.right-p}),isNaN(u.bottom)?isNaN(f)||D(l,{top:u.top+f}):isNaN(f)||D(l,{bottom:u.bottom-f})):(isNaN(p)||D(l,{marginLeft:u.left+p}),isNaN(f)||D(l,{marginTop:u.top+f})))),!I&&"scale"!=o&&o in l&&delete l[o],l&&D(a,l))}),F.msie&&delete a.scale,n.animate(a,{queue:!1,show:!1,hide:!1,duration:o.duration,complete:o.complete})})},animateTo:function(t,n,i){function o(e){n[0].style.cssText="",t.each(function(){this.style.cssText=""}),E.mobileOS.android||l.css(nt,s),i.completeCallback&&i.completeCallback.call(t,e)}var a,s,l=t.parents().filter(n.parents()).first();i=r(i),E.mobileOS.android||(s=l.css(nt),l.css(nt,"hidden")),e.each(i.effects,function(e,t){a=a||t.direction}),i.complete=F.msie?function(){setTimeout(o,0)}:o,i.previous=i.reverse?n:t,i.reset=!0,(i.reverse?t:n).each(function(){e(this).kendoAnimate(D(!0,{},i)),i.complete=null,i.previous=null})}}),g=C.Class.extend({init:function(e,t){var n=this;n.element=e,n._direction=t,n.options={},n._additionalEffects=[],n.restore||(n.restore=[])},reverse:function(){return this._reverse=!0,this.run()},play:function(){return this._reverse=!1,this.run()},add:function(e){return this._additionalEffects.push(e),this},direction:function(e){return this._direction=e,this},duration:function(e){return this._duration=e,this},compositeRun:function(){var e=this,t=new h(e.element,{reverse:e._reverse,duration:e._duration}),n=e._additionalEffects.concat([e]);return t.run(n)},run:function(){if(this._additionalEffects&&this._additionalEffects[0])return this.compositeRun();var t,n,i=this,r=i.element,o=0,l=i.restore,d=l.length,c=e.Deferred(),u={},p={},f=i.children(),h=f.length;for(c.then(e.proxy(i,"_complete")),r.data("animating",!0),o=0;d>o;o++)t=l[o],r.data(t)||r.data(t,r.css(t));for(o=0;h>o;o++)f[o].duration(i._duration).run();return i.prepare(u,p),r.is(":visible")||D(u,{display:r.data("olddisplay")||"block"}),I&&(n=r.data("targetTransform"),n&&(u=D(n,u))),u=s(r,u),I&&!P&&(u=a(u)),r.css(u).css(at),i.setup(),r.data("targetTransform",p),T.animate(r,p,{duration:i._duration,complete:c.resolve}),c.promise()},stop:function(){var t=0,n=this.children(),i=n.length;for(t=0;i>t;t++)n[t].stop();return e(this.element).kendoStop(!0,!0),this},restoreCallback:function(){var e,t,n,i=this.element;for(e=0,t=this.restore.length;t>e;e++)n=this.restore[e],i.css(n,i.data(n))},_complete:function(){var t=this,n=t.element;n.removeData("animating").dequeue(),t.restoreCallback(),t.shouldHide()&&n.data("olddisplay",n.css("display")).hide(),H&&!I&&setTimeout(e.proxy(t,"restoreCallback"),0),t.teardown()},setOptions:function(e){D(!0,this.options,e)},children:function(){return[]},shouldHide:e.noop,setup:e.noop,prepare:e.noop,teardown:e.noop,directions:[],setReverse:function(e){return this._reverse=e,this}}),m=["left","right","up","down"],v=["in","out"],c("slideIn",{directions:m,divisor:function(e){return this.options.divisor=e,this},prepare:function(e,t){var n,i=this,r=i.element,o=pt[i._direction],a=-o.modifier*(o.vertical?r.outerHeight():r.outerWidth()),s=a/(i.options&&i.options.divisor||1)+Q,l="0px";i._reverse&&(n=e,e=t,t=n),I?(e[o.transition]=s,t[o.transition]=l):(e[o.property]=s,t[o.property]=l)}}),c("tile",{directions:m,init:function(e,t,n){g.prototype.init.call(this,e,t),this.options={previous:n}},previousDivisor:function(e){return this.options.previousDivisor=e,this},children:function(){var e=this,t=e._reverse,n=e.options.previous,i=e.options.previousDivisor||1,r=e._direction,o=[C.fx(e.element).slideIn(r).setReverse(t)];return n&&o.push(C.fx(n).slideIn(pt[r].reverse).divisor(i).setReverse(!t)),o}}),u("fade","opacity",1,0),u("zoom","scale",1,.01),c("slideMargin",{prepare:function(e,t){var n,i=this,r=i.element,o=i.options,a=r.data(et),s=o.offset,l=i._reverse;l||null!==a||r.data(et,parseFloat(r.css("margin-"+o.axis))),n=r.data(et)||0,t["margin-"+o.axis]=l?n:n+s}}),c("slideTo",{prepare:function(e,t){var n=this,i=n.element,r=n.options,o=r.offset.split(","),a=n._reverse;I?(t.translatex=a?0:o[0],t.translatey=a?0:o[1]):(t.left=a?0:o[0],t.top=a?0:o[1]),i.css("left")}}),c("expand",{directions:["horizontal","vertical"],restore:[nt],prepare:function(e,n){var i=this,r=i.element,o=i.options,a=i._reverse,s="vertical"===i._direction?J:X,l=r[0].style[s],d=r.data(s),c=parseFloat(d||l),u=q(r.css(s,K)[s]());e.overflow=Z,c=o&&o.reset?u||c:c||u,n[s]=(a?0:c)+Q,e[s]=(a?c:0)+Q,d===t&&r.data(s,l)},shouldHide:function(){return this._reverse},teardown:function(){var e=this,t=e.element,n="vertical"===e._direction?J:X,i=t.data(n);(i==K||i===Y)&&setTimeout(function(){t.css(n,K).css(n)},0)}}),_={position:"absolute",marginLeft:0,marginTop:0,scale:1},c("transfer",{init:function(e,t){this.element=e,this.options={target:t},this.restore=[]},setup:function(){this.element.appendTo(document.body)},prepare:function(e,t){var n,i,r,o,a,s,d,c,u,p,f,h,g,m=this,v=m.element,b=m.options,w=m._reverse,y=b.target,k=l(v,"scale"),x=y.offset(),C=y.outerHeight()/v.outerHeight();D(e,_),t.scale=1,v.css(at,"scale(1)").css(at),n=v.offset(),v.css(at,"scale("+k+")"),i=0,r=0,o=x.left-n.left,a=x.top-n.top,s=i+v.outerWidth(),d=r,c=o+y.outerWidth(),u=a,p=(a-r)/(o-i),f=(u-d)/(c-s),h=(r-d-p*i+f*s)/(f-p),g=r+p*(h-i),e.top=n.top,e.left=n.left,e.transformOrigin=h+Q+" "+g+Q,w?e.scale=C:t.scale=C}}),b={top:"rect(auto auto $size auto)",bottom:"rect($size auto auto auto)",left:"rect(auto $size auto auto)",right:"rect(auto auto auto $size)"},w={top:{start:"rotatex(0deg)",end:"rotatex(180deg)"},bottom:{start:"rotatex(-180deg)",end:"rotatex(0deg)"},left:{start:"rotatey(0deg)",end:"rotatey(-180deg)"},right:{start:"rotatey(180deg)",end:"rotatey(0deg)"}},c("turningPage",{directions:m,init:function(e,t,n){g.prototype.init.call(this,e,t),this._container=n},prepare:function(e,t){var n=this,i=n._reverse,r=i?pt[n._direction].reverse:n._direction,o=w[r];e.zIndex=1,n._clipInHalf&&(e.clip=p(n._container,C.directions[r].reverse)),e[st]=Z,t[at]=ct+(i?o.start:o.end),e[at]=ct+(i?o.end:o.start)},setup:function(){this._container.append(this.element)},face:function(e){return this._face=e,this},shouldHide:function(){var e=this,t=e._reverse,n=e._face;return t&&!n||!t&&n},clipInHalf:function(e){return this._clipInHalf=e,this},temporary:function(){return this.element.addClass("temp-page"),this}}),c("staticPage",{directions:m,init:function(e,t,n){g.prototype.init.call(this,e,t),this._container=n},restore:["clip"],prepare:function(e,t){var n=this,i=n._reverse?pt[n._direction].reverse:n._direction;e.clip=p(n._container,i),e.opacity=.999,t.opacity=1},shouldHide:function(){var e=this,t=e._reverse,n=e._face;return t&&!n||!t&&n},face:function(e){return this._face=e,this}}),c("pageturn",{directions:["horizontal","vertical"],init:function(e,t,n,i){g.prototype.init.call(this,e,t),this.options={},this.options.face=n,this.options.back=i},children:function(){var e,t=this,n=t.options,i="horizontal"===t._direction?"left":"top",r=C.directions[i].reverse,o=t._reverse,a=n.face.clone(!0).removeAttr("id"),s=n.back.clone(!0).removeAttr("id"),l=t.element;return o&&(e=i,i=r,r=e),[C.fx(n.face).staticPage(i,l).face(!0).setReverse(o),C.fx(n.back).staticPage(r,l).setReverse(o),C.fx(a).turningPage(i,l).face(!0).clipInHalf(!0).temporary().setReverse(o),C.fx(s).turningPage(r,l).clipInHalf(!0).temporary().setReverse(o)]},prepare:function(e,t){e[lt]=dt,e.transformStyle="preserve-3d",e.opacity=.999,t.opacity=1},teardown:function(){this.element.find(".temp-page").remove()}}),c("flip",{directions:["horizontal","vertical"],init:function(e,t,n,i){g.prototype.init.call(this,e,t),this.options={},this.options.face=n,this.options.back=i},children:function(){var e,t=this,n=t.options,i="horizontal"===t._direction?"left":"top",r=C.directions[i].reverse,o=t._reverse,a=t.element;return o&&(e=i,i=r,r=e),[C.fx(n.face).turningPage(i,a).face(!0).setReverse(o),C.fx(n.back).turningPage(r,a).setReverse(o)]},prepare:function(e){e[lt]=dt,e.transformStyle="preserve-3d"}}),y=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},k=C.Class.extend({init:function(){var e=this;e._tickProxy=A(e._tick,e),e._started=!1},tick:e.noop,done:e.noop,onEnd:e.noop,onCancel:e.noop,start:function(){this.done()||(this._started=!0,y(this._tickProxy))},cancel:function(){this._started=!1,this.onCancel()},_tick:function(){var e=this;e._started&&(e.tick(),e.done()?(e._started=!1,e.onEnd()):y(e._tickProxy))}}),x=k.extend({init:function(e){var t=this;D(t,e),k.fn.init.call(t)},done:function(){return this.timePassed()>=this.duration},timePassed:function(){return Math.min(this.duration,Date.now()-this.startDate)},moveTo:function(e){var t=this,n=t.movable;t.initial=n[t.axis],t.delta=e.location-t.initial,t.duration="number"==typeof e.duration?e.duration:300,t.tick=t._easeProxy(e.ease),t.startDate=Date.now(),t.start()},_easeProxy:function(e){var t=this;return function(){t.movable.moveAxis(t.axis,e(t.timePassed(),t.initial,t.delta,t.duration))}}}),D(x,{easeOutExpo:function(e,t,n,i){return e==i?t+n:n*(-Math.pow(2,-10*e/i)+1)+t},easeOutBack:function(e,t,n,i,r){return r=1.70158,n*((e=e/i-1)*e*((r+1)*e+r)+1)+t}}),T.animationFrame=function(e){y.call(window,e)},T.Animation=k,T.Transition=x,T.createEffect=c}(window.kendo.jQuery),function(e,t){function n(r){var a,s,l,d,c,u,p,f,h=[],g=r.logic||"and",m=r.filters;for(a=0,s=m.length;s>a;a++)r=m[a],l=r.field,p=r.value,u=r.operator,r.filters?r=n(r):(f=r.ignoreCase,l=l.replace(/\./g,"/"),r=o[u],r&&p!==t&&(d=e.type(p),"string"===d?(c="'{1}'",p=p.replace(/'/g,"''"),f===!0&&(l="tolower("+l+")")):c="date"===d?"datetime'{1:yyyy-MM-ddTHH:mm:ss}'":"{1}",r.length>3?"substringof"!==r?c="{0}({2},"+c+")":(c="{0}("+c+",{2})","doesnotcontain"===u&&(c+=" eq false")):c="{2} {0} "+c,r=i.format(c,r,p,l))),h.push(r);return r=h.join(" "+g+" "),h.length>1&&(r="("+r+")"),r}var i=window.kendo,r=e.extend,o={eq:"eq",neq:"ne",gt:"gt",gte:"ge",lt:"lt",lte:"le",contains:"substringof",doesnotcontain:"substringof",endswith:"endswith",startswith:"startswith"},a={pageSize:e.noop,page:e.noop,filter:function(e,t){t&&(e.$filter=n(t))},sort:function(t,n){var i=e.map(n,function(e){var t=e.field.replace(/\./g,"/");return"desc"===e.dir&&(t+=" desc"),t}).join(",");i&&(t.$orderby=i)},skip:function(e,t){t&&(e.$skip=t)},take:function(e,t){t&&(e.$top=t)}},s={read:{dataType:"jsonp"}};r(!0,i.data,{schemas:{odata:{type:"json",data:function(e){return e.d.results||[e.d]},total:"d.__count"}},transports:{odata:{read:{cache:!0,dataType:"jsonp",jsonp:"$callback"},update:{cache:!0,dataType:"json",contentType:"application/json",type:"PUT"},create:{cache:!0,dataType:"json",contentType:"application/json",type:"POST"},destroy:{cache:!0,dataType:"json",type:"DELETE"},parameterMap:function(e,t){var n,r,o,l;if(e=e||{},t=t||"read",l=(this.options||s)[t],l=l?l.dataType:"json","read"===t){n={$inlinecount:"allpages"},"json"!=l&&(n.$format="json");for(o in e)a[o]?a[o](n,e[o]):n[o]=e[o]}else{if("json"!==l)throw Error("Only json dataType can be used for "+t+" operation.");if("destroy"!==t){for(o in e)r=e[o],"number"==typeof r&&(e[o]=r+"");n=i.stringify(e)}}return n}}}})}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=e.isArray,r=e.isPlainObject,o=e.map,a=e.each,s=e.extend,l=n.getter,d=n.Class,c=d.extend({init:function(e){var t,l,d,c=this,u=e.total,p=e.model,f=e.parse,h=e.errors,g=e.serialize,m=e.data;p&&(r(p)&&(p.fields&&a(p.fields,function(e,t){t=r(t)&&t.field?s(t,{field:c.getter(t.field)}):{field:c.getter(t)},p.fields[e]=t}),t=p.id,t&&(l={},l[c.xpathToMember(t,!0)]={field:c.getter(t)},p.fields=s(l,p.fields),p.id=c.xpathToMember(t)),p=n.data.Model.define(p)),c.model=p),u&&("string"==typeof u?(u=c.getter(u),c.total=function(e){return parseInt(u(e),10)
}):"function"==typeof u&&(c.total=u)),h&&("string"==typeof h?(h=c.getter(h),c.errors=function(e){return h(e)||null}):"function"==typeof h&&(c.errors=h)),m&&("string"==typeof m?(m=c.xpathToMember(m),c.data=function(e){var t,n=c.evaluate(e,m);return n=i(n)?n:[n],c.model&&p.fields?(t=new c.model,o(n,function(e){if(e){var n,i={};for(n in p.fields)i[n]=t._parse(n,p.fields[n].field(e));return i}})):n}):"function"==typeof m&&(c.data=m)),"function"==typeof f&&(d=c.parse,c.parse=function(e){var t=f.call(c,e);return d.call(c,t)}),"function"==typeof g&&(c.serialize=g)},total:function(e){return this.data(e).length},errors:function(e){return e?e.errors:null},serialize:function(e){return e},parseDOM:function(e){var n,r,o,a,s,l,d,c={},u=e.attributes,p=u.length;for(d=0;p>d;d++)l=u[d],c["@"+l.nodeName]=l.nodeValue;for(r=e.firstChild;r;r=r.nextSibling)o=r.nodeType,3===o||4===o?c["#text"]=r.nodeValue:1===o&&(n=this.parseDOM(r),a=r.nodeName,s=c[a],i(s)?s.push(n):s=s!==t?[s,n]:n,c[a]=s);return c},evaluate:function(e,t){for(var n,r,o,a,s,l=t.split(".");n=l.shift();)if(e=e[n],i(e)){for(r=[],t=l.join("."),s=0,o=e.length;o>s;s++)a=this.evaluate(e[s],t),a=i(a)?a:[a],r.push.apply(r,a);return r}return e},parse:function(t){var n,i,r={};return n=t.documentElement||e.parseXML(t).documentElement,i=this.parseDOM(n),r[n.nodeName]=i,r},xpathToMember:function(e,t){return e?(e=e.replace(/^\//,"").replace(/\//g,"."),e.indexOf("@")>=0?e.replace(/\.?(@.*)/,t?"$1":'["$1"]'):e.indexOf("text()")>=0?e.replace(/(\.?text\(\))/,t?"#text":'["#text"]'):e):""},getter:function(e){return l(this.xpathToMember(e),!0)}});e.extend(!0,n.data,{XmlDataReader:c,readers:{xml:c}})}(window.kendo.jQuery),function(e,t){function n(e,t,n,i){return function(r){var o,a={};for(o in r)a[o]=r[o];a.field=i?n+"."+r.field:n,t==vt&&e._notifyChange&&e._notifyChange(a),e.trigger(t,a)}}function i(t,n){if(t===n)return!0;var r,o=e.type(t),a=e.type(n);if(o!==a)return!1;if("date"===o)return t.getTime()===n.getTime();if("object"!==o&&"array"!==o)return!1;for(r in t)if(!i(t[r],n[r]))return!1;return!0}function r(e,t){var n,i;for(i in e){if(n=e[i],tt(n)&&n.field&&n.field===t)return n;if(n===t)return n}return null}function o(e){this.data=e||[]}function a(e,n){if(e){var i=typeof e===ut?{field:e,dir:n}:e,r=it(i)?i:i!==t?[i]:[];return rt(r,function(e){return!!e.dir})}}function s(e){var t,n,i,r,o=e.filters;if(o)for(t=0,n=o.length;n>t;t++)i=o[t],r=i.operator,r&&typeof r===ut&&(i.operator=N[r.toLowerCase()]||r),s(i)}function l(e){return e&&!nt(e)?((it(e)||!e.filters)&&(e={logic:"and",filters:it(e)?e:[e]}),s(e),e):t}function d(e){return it(e)?e:[e]}function c(e,n){var i=typeof e===ut?{field:e,dir:n}:e,r=it(i)?i:i!==t?[i]:[];return R(r,function(e){return{field:e.field,dir:e.dir||"asc",aggregates:e.aggregates}})}function u(e,t){return e&&e.getTime&&t&&t.getTime?e.getTime()===t.getTime():e===t}function p(e,t,n,i,r){var o,a,s,l,d;for(t=t||[],l=t.length,o=0;l>o;o++)a=t[o],s=a.aggregate,d=a.field,e[d]=e[d]||{},e[d][s]=V[s.toLowerCase()](e[d][s],n,lt.accessor(d),i,r)}function f(e){return"number"==typeof e&&!isNaN(e)}function h(e){var t,n=e.length,i=Array(n);for(t=0;n>t;t++)i[t]=e[t].toJSON();return i}function g(e,t){t=t||{};var n=new o(e),i=t.aggregate,r=t.filter;return r&&(n=n.filter(r)),n.aggregate(i)}function m(e,t,n,i,r){var o,a,s,l,d;for(l=0,d=e.length;d>l;l++){o=e[l];for(a in t)s=r[a],s&&s!==a&&(o[s]=t[a](o),delete o[a])}}function v(e,t,n,i,r){var o,a,s,l,d;for(l=0,d=e.length;d>l;l++){o=e[l];for(a in t)o[a]=n._parse(a,t[a](o)),s=r[a],s&&s!==a&&delete o[s]}}function _(e,t,n,i,r){var o,a,s,l;for(a=0,l=e.length;l>a;a++)o=e[a],s=i[o.field],s&&s!=o.field&&(o.field=s),o.value=n._parse(o.field,o.value),o.hasSubgroups?_(o.items,t,n,i,r):v(o.items,t,n,i,r)}function b(e,t,n,i,r,o){return function(a){return a=e(a),a&&!nt(i)&&("[object Array]"===Rt.call(a)||a instanceof Vt||(a=[a]),n(a,i,new t,r,o)),a||[]}}function w(e,t,n,i){for(var r,o,a=0;t.length&&i&&(r=t[a],o=r.items,e&&e.field===r.field&&e.value===r.value?(e.hasSubgroups&&e.items.length?w(e.items[e.items.length-1],r.items,n,i):(o=o.slice(n,i),i-=o.length,e.items=e.items.concat(o)),t.splice(a--,1)):(o=o.slice(n,i),i-=o.length,r.items=o,r.items.length||(t.splice(a--,1),i-=n)),n=0,!(++a>=t.length)););a<t.length&&t.splice(a,t.length-a)}function y(e){var t,n,i=[];for(t=0,n=e.length;n>t;t++)i=e[t].hasSubgroups?i.concat(y(e[t].items)):i.concat(e[t].items.slice());return i}function k(e,t){var n,i,r,o;if(t)for(n=0,i=e.length;i>n;n++)r=e[n],o=r.items,r.hasSubgroups?k(o,t):!o.length||o[0]instanceof t||(o.type=t,o.wrapAll(o,o))}function x(e,t){var n,i;for(n=0,i=e.length;i>n;n++)if(e[n].hasSubgroups){if(x(e[n].items,t))return!0}else if(t(e[n].items,e[n]))return!0}function C(e,t){var n,i;for(n=0,i=e.length;i>n;n++)if(e[n].uid==t.uid)return t=e[n],e.splice(n,1),t}function T(e,t){var n,i,r,o;for(r=e.length-1,o=0;r>=o;r--)i=e[r],n={value:t.get(i.field),field:i.field,items:n?[n]:[t],hasSubgroups:!!n,aggregates:{}};return n}function S(e,t){return t?A(e,function(e){return e[t.idField]===t.id}):-1}function D(e,t){return t?A(e,function(e){return e.uid==t.uid}):-1}function A(e,t){var n,i;for(n=0,i=e.length;i>n;n++)if(t(e[n]))return n;return-1}function E(e,t){var n,i;return e&&!nt(e)?(n=e[t],i=tt(n)?n.from||n.field||t:e[t]||t,et(i)?t:i):t}function F(e,t){var n,i,r,o={};for(r in e)"filters"!==r&&(o[r]=e[r]);if(e.filters)for(o.filters=[],n=0,i=e.filters.length;i>n;n++)o.filters[n]=F(e.filters[n],t);else o.field=E(t.fields,o.field);return o}function I(e,t){var n,i,r,o,a,s=[];for(n=0,i=e.length;i>n;n++){r={},o=e[n];for(a in o)r[a]=o[a];r.field=E(t.fields,r.field),r.aggregates&&it(r.aggregates)&&(r.aggregates=I(r.aggregates,t)),s.push(r)}return s}function P(t,n){var i,r,o,a,s,l=e(t)[0].children,d=[],c=n[0],u=n[1];for(i=0,r=l.length;r>i;i++)o={},s=l[i],s.disabled||(o[c.field]=s.text,a=s.attributes.value,a=a&&a.specified?s.value:s.text,o[u.field]=a,d.push(o));return d}function B(t,n){var i,r,o,a,s,l,d,c=e(t)[0].tBodies[0],u=c?c.rows:[],p=n.length,f=[];for(i=0,r=u.length;r>i;i++){for(s={},d=!0,a=u[i].cells,o=0;p>o;o++)l=a[o],"th"!==l.nodeName.toLowerCase()&&(d=!1,s[n[o].field]=l.innerHTML);d||f.push(s)}return f}function z(e){return function(){var t=this._data,n=q.fn[e].apply(this,zt.call(arguments));return this._data!=t&&this._attachBubbleHandlers(),n}}function H(t,n){var i,r,o,a,s,l,d,c,u=e(t).children(),p=[],f=n[0].field,h=n[1]&&n[1].field,g=n[2]&&n[2].field,m=n[3]&&n[3].field;for(i=0,r=u.length;r>i;i++)o={_loaded:!0},a=u.eq(i),l=a[0].firstChild,c=a.children(),t=c.filter("ul"),c=c.filter(":not(ul)"),s=a.attr("data-id"),s&&(o.id=s),l&&(o[f]=3==l.nodeType?l.nodeValue:c.text()),h&&(o[h]=c.find("a").attr("href")),m&&(o[m]=c.find("img").attr("src")),g&&(d=c.find(".k-sprite").prop("className"),o[g]=d&&e.trim(d.replace("k-sprite",""))),t.length&&(o.items=H(t.eq(0),n)),"true"==a.attr("data-hasChildren")&&(o.hasChildren=!0),p.push(o);return p}var R,M,L,O,N,V,U,W,j,G,q,Y,Q,$,K,X,J=e.extend,Z=e.proxy,et=e.isFunction,tt=e.isPlainObject,nt=e.isEmptyObject,it=e.isArray,rt=e.grep,ot=e.ajax,at=e.each,st=e.noop,lt=window.kendo,dt=lt.Observable,ct=lt.Class,ut="string",pt="function",ft="create",ht="read",gt="update",mt="destroy",vt="change",_t="sync",bt="get",wt="error",yt="requestStart",kt="progress",xt="requestEnd",Ct=[ft,ht,gt,mt],Tt=function(e){return e},St=lt.getter,Dt=lt.stringify,At=Math,Et=[].push,Ft=[].join,It=[].pop,Pt=[].splice,Bt=[].shift,zt=[].slice,Ht=[].unshift,Rt={}.toString,Mt=lt.support.stableSort,Lt=/^\/Date\((.*?)\)\/$/,Ot=/(\r+|\n+)/g,Nt=/(?=['\\])/g,Vt=dt.extend({init:function(e,t){var n=this;n.type=t||Ut,dt.fn.init.call(n),n.length=e.length,n.wrapAll(e,n)},toJSON:function(){var e,t,n=this.length,i=Array(n);for(e=0;n>e;e++)t=this[e],t instanceof Ut&&(t=t.toJSON()),i[e]=t;return i},parent:st,wrapAll:function(e,t){var n,i,r=this,o=function(){return r};for(t=t||[],n=0,i=e.length;i>n;n++)t[n]=r.wrap(e[n],o);return t},wrap:function(e,t){var n,i=this;return null!==e&&"[object Object]"===Rt.call(e)&&(n=e instanceof i.type||e instanceof Gt,n||(e=e instanceof Ut?e.toJSON():e,e=new i.type(e)),e.parent=t,e.bind(vt,function(e){i.trigger(vt,{field:e.field,node:e.node,index:e.index,items:e.items||[this],action:e.node?e.action||"itemchange":"itemchange"})})),e},push:function(){var e,t=this.length,n=this.wrapAll(arguments);return e=Et.apply(this,n),this.trigger(vt,{action:"add",index:t,items:n}),e},slice:zt,join:Ft,pop:function(){var e=this.length,t=It.apply(this);return e&&this.trigger(vt,{action:"remove",index:e-1,items:[t]}),t},splice:function(e,t,n){var i,r,o,a=this.wrapAll(zt.call(arguments,2));if(i=Pt.apply(this,[e,t].concat(a)),i.length)for(this.trigger(vt,{action:"remove",index:e,items:i}),r=0,o=i.length;o>r;r++)i[r].children&&i[r].unbind(vt);return n&&this.trigger(vt,{action:"add",index:e,items:a}),i},shift:function(){var e=this.length,t=Bt.apply(this);return e&&this.trigger(vt,{action:"remove",index:0,items:[t]}),t},unshift:function(){var e,t=this.wrapAll(arguments);return e=Ht.apply(this,t),this.trigger(vt,{action:"add",index:0,items:t}),e},indexOf:function(e){var t,n,i=this;for(t=0,n=i.length;n>t;t++)if(i[t]===e)return t;return-1},forEach:function(e){for(var t=0,n=this.length;n>t;t++)e(this[t],t,this)},map:function(e){for(var t=0,n=[],i=this.length;i>t;t++)n[t]=e(this[t],t,this);return n},filter:function(e){for(var t,n=0,i=[],r=this.length;r>n;n++)t=this[n],e(t,n,this)&&(i[i.length]=t);return i},find:function(e){for(var t,n=0,i=this.length;i>n;n++)if(t=this[n],e(t,n,this))return t},every:function(e){for(var t,n=0,i=this.length;i>n;n++)if(t=this[n],!e(t,n,this))return!1;return!0},some:function(e){for(var t,n=0,i=this.length;i>n;n++)if(t=this[n],e(t,n,this))return!0;return!1},remove:function(e){this.splice(this.indexOf(e),1)}}),Ut=dt.extend({init:function(e){var t,n,i=this,r=function(){return i};dt.fn.init.call(this);for(n in e)t=e[n],"_"!=n.charAt(0)&&(t=i.wrap(t,n,r)),i[n]=t;i.uid=lt.guid()},shouldSerialize:function(e){return this.hasOwnProperty(e)&&"_events"!==e&&typeof this[e]!==pt&&"uid"!==e},forEach:function(e){for(var t in this)this.shouldSerialize(t)&&e(this[t],t)},toJSON:function(){var e,t,n={};for(t in this)this.shouldSerialize(t)&&(e=this[t],(e instanceof Ut||e instanceof Vt)&&(e=e.toJSON()),n[t]=e);return n},get:function(e){var t,n=this;return n.trigger(bt,{field:e}),t="this"===e?n:lt.getter(e,!0)(n)},_set:function(e,t){var n,i,r,o=this,a=e.indexOf(".")>=0;if(a)for(n=e.split("."),i="";n.length>1;){if(i+=n.shift(),r=lt.getter(i,!0)(o),r instanceof Ut)return r.set(n.join("."),t),a;i+="."}return lt.setter(e)(o,t),a},set:function(e,t){var n=this,i=lt.getter(e,!0)(n);i!==t&&(n.trigger("set",{field:e,value:t})||(!n._set(e,n.wrap(t,e,function(){return n}))||e.indexOf("(")>=0||e.indexOf("[")>=0)&&n.trigger(vt,{field:e}))},parent:st,wrap:function(e,t,i){var r,o,a=this,s=Rt.call(e);return null==e||"[object Object]"!==s&&"[object Array]"!==s||(r=e instanceof Vt,o=e instanceof q,"[object Object]"!==s||o||r?("[object Array]"===s||r||o)&&(r||o||(e=new Vt(e)),e.parent()!=i()&&e.bind(vt,n(a,vt,t,!1))):(e instanceof Ut||(e=new Ut(e)),e.parent()!=i()&&(e.bind(bt,n(a,bt,t,!0)),e.bind(vt,n(a,vt,t,!0)))),e.parent=i),e}}),Wt={number:function(e){return lt.parseFloat(e)},date:function(e){return lt.parseDate(e)},"boolean":function(e){return typeof e===ut?"true"===e.toLowerCase():null!=e?!!e:e},string:function(e){return null!=e?e+"":e},"default":function(e){return e}},jt={string:"",number:0,date:new Date,"boolean":!1,"default":""},Gt=Ut.extend({init:function(n){var i=this;(!n||e.isEmptyObject(n))&&(n=e.extend({},i.defaults,n)),Ut.fn.init.call(i,n),i.dirty=!1,i.idField&&(i.id=i.get(i.idField),i.id===t&&(i.id=i._defaultId))},shouldSerialize:function(e){return Ut.fn.shouldSerialize.call(this,e)&&"uid"!==e&&!("id"!==this.idField&&"id"===e)&&"dirty"!==e&&"_accessors"!==e},_parse:function(e,t){var n,i=this,o=e,a=i.fields||{};return e=a[e],e||(e=r(a,o)),e&&(n=e.parse,!n&&e.type&&(n=Wt[e.type.toLowerCase()])),n?n(t):t},_notifyChange:function(e){var t=e.action;("add"==t||"remove"==t)&&(this.dirty=!0)},editable:function(e){return e=(this.fields||{})[e],e?e.editable!==!1:!0},set:function(e,t,n){var r=this;r.editable(e)&&(t=r._parse(e,t),i(t,r.get(e))||(r.dirty=!0,Ut.fn.set.call(r,e,t,n)))},accept:function(e){var t,n=this,i=function(){return n};for(t in e)n._set(t,n.wrap(e[t],t,i));n.idField&&(n.id=n.get(n.idField)),n.dirty=!1},isNew:function(){return this.id===this._defaultId}});Gt.define=function(e,n){n===t&&(n=e,e=Gt);var i,r,o,a,s,l,d,c,u=J({defaults:{}},n),p={},f=u.id;if(f&&(u.idField=f),u.id&&delete u.id,f&&(u.defaults[f]=u._defaultId=""),"[object Array]"===Rt.call(u.fields)){for(l=0,d=u.fields.length;d>l;l++)o=u.fields[l],typeof o===ut?p[o]={}:o.field&&(p[o.field]=o);u.fields=p}for(r in u.fields)o=u.fields[r],a=o.type||"default",s=null,c=r,r=typeof o.field===ut?o.field:r,o.nullable||(s=u.defaults[c!==r?c:r]=o.defaultValue!==t?o.defaultValue:jt[a.toLowerCase()]),n.id===r&&(u._defaultId=s),u.defaults[c!==r?c:r]=s,o.parse=o.parse||Wt[a];return i=e.extend(u),i.define=function(e){return Gt.define(i,e)},u.fields&&(i.fields=u.fields,i.idField=u.idField),i},M={selector:function(e){return et(e)?e:St(e)},compare:function(e){var t=this.selector(e);return function(e,n){return e=t(e),n=t(n),null==e&&null==n?0:null==e?-1:null==n?1:e.localeCompare?e.localeCompare(n):e>n?1:n>e?-1:0}},create:function(e){var t=e.compare||this.compare(e.field);return"desc"==e.dir?function(e,n){return t(n,e,!0)}:t},combine:function(e){return function(t,n){var i,r,o=e[0](t,n);for(i=1,r=e.length;r>i;i++)o=o||e[i](t,n);return o}}},L=J({},M,{asc:function(e){var t=this.selector(e);return function(e,n){var i=t(e),r=t(n);return i&&i.getTime&&r&&r.getTime&&(i=i.getTime(),r=r.getTime()),i===r?e.__position-n.__position:null==i?-1:null==r?1:i.localeCompare?i.localeCompare(r):i>r?1:-1}},desc:function(e){var t=this.selector(e);return function(e,n){var i=t(e),r=t(n);return i&&i.getTime&&r&&r.getTime&&(i=i.getTime(),r=r.getTime()),i===r?e.__position-n.__position:null==i?1:null==r?-1:r.localeCompare?r.localeCompare(i):r>i?1:-1}},create:function(e){return this[e.dir](e.field)}}),R=function(e,t){var n,i=e.length,r=Array(i);for(n=0;i>n;n++)r[n]=t(e[n],n,e);return r},O=function(){function e(e){return e.replace(Nt,"\\").replace(Ot,"")}function t(t,n,i,r){var o;return null!=i&&(typeof i===ut&&(i=e(i),o=Lt.exec(i),o?i=new Date(+o[1]):r?(i="'"+i.toLowerCase()+"'",n="("+n+" || '').toLowerCase()"):i="'"+i+"'"),i.getTime&&(n="("+n+"?"+n+".getTime():"+n+")",i=i.getTime())),n+" "+t+" "+i}return{eq:function(e,n,i){return t("==",e,n,i)},neq:function(e,n,i){return t("!=",e,n,i)},gt:function(e,n,i){return t(">",e,n,i)},gte:function(e,n,i){return t(">=",e,n,i)},lt:function(e,n,i){return t("<",e,n,i)},lte:function(e,n,i){return t("<=",e,n,i)},startswith:function(t,n,i){return i&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".lastIndexOf('"+n+"', 0) == 0"},endswith:function(t,n,i){return i&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".indexOf('"+n+"', "+t+".length - "+(n||"").length+") >= 0"},contains:function(t,n,i){return i&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".indexOf('"+n+"') >= 0"},doesnotcontain:function(t,n,i){return i&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".indexOf('"+n+"') == -1"}}}(),o.filterExpr=function(e){var n,i,r,a,s,l,d=[],c={and:" && ",or:" || "},u=[],p=[],f=e.filters;for(n=0,i=f.length;i>n;n++)r=f[n],s=r.field,l=r.operator,r.filters?(a=o.filterExpr(r),r=a.expression.replace(/__o\[(\d+)\]/g,function(e,t){return t=+t,"__o["+(p.length+t)+"]"}).replace(/__f\[(\d+)\]/g,function(e,t){return t=+t,"__f["+(u.length+t)+"]"}),p.push.apply(p,a.operators),u.push.apply(u,a.fields)):(typeof s===pt?(a="__f["+u.length+"](d)",u.push(s)):a=lt.expr(s),typeof l===pt?(r="__o["+p.length+"]("+a+", "+r.value+")",p.push(l)):r=O[(l||"eq").toLowerCase()](a,r.value,r.ignoreCase!==t?r.ignoreCase:!0)),d.push(r);return{expression:"("+d.join(c[e.logic])+")",fields:u,operators:p}},N={"==":"eq",equals:"eq",isequalto:"eq",equalto:"eq",equal:"eq","!=":"neq",ne:"neq",notequals:"neq",isnotequalto:"neq",notequalto:"neq",notequal:"neq","<":"lt",islessthan:"lt",lessthan:"lt",less:"lt","<=":"lte",le:"lte",islessthanorequalto:"lte",lessthanequal:"lte",">":"gt",isgreaterthan:"gt",greaterthan:"gt",greater:"gt",">=":"gte",isgreaterthanorequalto:"gte",greaterthanequal:"gte",ge:"gte",notsubstringof:"doesnotcontain"},o.normalizeFilter=l,o.prototype={toArray:function(){return this.data},range:function(e,t){return new o(this.data.slice(e,e+t))},skip:function(e){return new o(this.data.slice(e))},take:function(e){return new o(this.data.slice(0,e))},select:function(e){return new o(R(this.data,e))},order:function(e,t){var n={dir:t};return e&&(e.compare?n.compare=e.compare:n.field=e),new o(this.data.slice(0).sort(M.create(n)))},orderBy:function(e){return this.order(e,"asc")},orderByDescending:function(e){return this.order(e,"desc")},sort:function(e,t,n){var i,r,o=a(e,t),s=[];if(n=n||M,o.length){for(i=0,r=o.length;r>i;i++)s.push(n.create(o[i]));return this.orderBy({compare:n.combine(s)})}return this},filter:function(e){var t,n,i,r,a,s,d,c,u=this.data,p=[];if(e=l(e),!e||0===e.filters.length)return this;for(r=o.filterExpr(e),s=r.fields,d=r.operators,a=c=Function("d, __f, __o","return "+r.expression),(s.length||d.length)&&(c=function(e){return a(e,s,d)}),t=0,i=u.length;i>t;t++)n=u[t],c(n)&&p.push(n);return new o(p)},group:function(e,t){e=c(e||[]),t=t||this.data;var n,i=this,r=new o(i.data);return e.length>0&&(n=e[0],r=r.groupBy(n).select(function(i){var r=new o(t).filter([{field:i.field,operator:"eq",value:i.value,ignoreCase:!1}]);return{field:i.field,value:i.value,items:e.length>1?new o(i.items).group(e.slice(1),r.toArray()).toArray():i.items,hasSubgroups:e.length>1,aggregates:r.aggregate(n.aggregates)}})),r},groupBy:function(e){if(nt(e)||!this.data.length)return new o([]);var t,n,i,r,a=e.field,s=this._sortForGrouping(a,e.dir||"asc"),l=lt.accessor(a),d=l.get(s[0],a),c={field:a,value:d,items:[]},p=[c];for(i=0,r=s.length;r>i;i++)t=s[i],n=l.get(t,a),u(d,n)||(d=n,c={field:a,value:d,items:[]},p.push(c)),c.items.push(t);return new o(p)},_sortForGrouping:function(e,t){var n,i,r=this.data;if(!Mt){for(n=0,i=r.length;i>n;n++)r[n].__position=n;for(r=new o(r).sort(e,t,L).toArray(),n=0,i=r.length;i>n;n++)delete r[n].__position;return r}return this.sort(e,t).toArray()},aggregate:function(e){var t,n,i={};if(e&&e.length)for(t=0,n=this.data.length;n>t;t++)p(i,e,this.data[t],t,n);return i}},V={sum:function(e,t,n){return(e||0)+n.get(t)},count:function(e){return(e||0)+1},average:function(e,t,n,i,r){return e=(e||0)+n.get(t),i==r-1&&(e/=r),e},max:function(e,t,n){var i=n.get(t);return e=e||0,i>e&&(e=i),e},min:function(e,t,n){var i=n.get(t);return f(e)||(e=i),e>i&&f(i)&&(e=i),e}},o.process=function(e,n){n=n||{};var i,r=new o(e),s=n.group,l=c(s||[]).concat(a(n.sort||[])),d=n.filter,u=n.skip,p=n.take;return d&&(r=r.filter(d),i=r.toArray().length),l&&(r=r.sort(l),s&&(e=r.toArray())),u!==t&&p!==t&&(r=r.range(u,p)),s&&(r=r.group(s,e)),{total:i,data:r.toArray()}},U=ct.extend({init:function(e){this.data=e.data},read:function(e){e.success(this.data)},update:function(e){e.success(e.data)},create:function(e){e.success(e.data)},destroy:function(e){e.success(e.data)}}),W=ct.extend({init:function(e){var t,n=this;e=n.options=J({},n.options,e),at(Ct,function(t,n){typeof e[n]===ut&&(e[n]={url:e[n]})}),n.cache=e.cache?j.create(e.cache):{find:st,add:st},t=e.parameterMap,n.parameterMap=et(t)?t:function(e){var n={};return at(e,function(e,i){e in t&&(e=t[e],tt(e)&&(i=e.value(i),e=e.key)),n[e]=i}),n}},options:{parameterMap:Tt},create:function(e){return ot(this.setup(e,ft))},read:function(n){var i,r,o,a=this,s=a.cache;n=a.setup(n,ht),i=n.success||st,r=n.error||st,o=s.find(n.data),o!==t?i(o):(n.success=function(e){s.add(n.data,e),i(e)},e.ajax(n))},update:function(e){return ot(this.setup(e,gt))},destroy:function(e){return ot(this.setup(e,mt))},setup:function(e,t){e=e||{};var n,i=this,r=i.options[t],o=et(r.data)?r.data(e.data):r.data;return e=J(!0,{},r,e),n=J(!0,{},o,e.data),e.data=i.parameterMap(n,t),et(e.url)&&(e.url=e.url(n)),e}}),j=ct.extend({init:function(){this._store={}},add:function(e,n){e!==t&&(this._store[Dt(e)]=n)},find:function(e){return this._store[Dt(e)]},clear:function(){this._store={}},remove:function(e){delete this._store[Dt(e)]}}),j.create=function(e){var t={inmemory:function(){return new j}};return tt(e)&&et(e.find)?e:e===!0?new j:t[e]()},G=ct.extend({init:function(e){var t,n,i,r,o,a,s,l,d,c,u,p,f,h=this;e=e||{};for(t in e)n=e[t],h[t]=typeof n===ut?St(n):n;r=e.modelBase||Gt,tt(h.model)&&(h.model=i=r.define(h.model)),h.model&&(a=Z(h.data,h),s=Z(h.groups,h),l=Z(h.serialize,h),d={},c={},u={},p={},f=!1,i=h.model,i.fields&&(at(i.fields,function(e,t){var n;o=e,tt(t)&&t.field?o=t.field:typeof t===ut&&(o=t),tt(t)&&t.from&&(n=t.from),f=f||n&&n!==e||o!==e,c[e]=St(n||o),u[e]=St(e),d[n||o]=e,p[e]=n||o}),!e.serialize&&f&&(h.serialize=b(l,i,m,u,d,p))),h.data=b(a,i,v,c,d,p),h.groups=b(s,i,_,c,d,p))},errors:function(e){return e?e.errors:null},parse:Tt,data:Tt,total:function(e){return e.length},groups:Tt,aggregates:function(){return{}},serialize:function(e){return e}}),q=dt.extend({init:function(e){var n,i,r=this;e&&(i=e.data),e=r.options=J({},r.options,e),r._map={},r._prefetch={},r._data=[],r._pristineData=[],r._ranges=[],r._view=[],r._pristine=[],r._destroyed=[],r._pageSize=e.pageSize,r._page=e.page||(e.pageSize?1:t),r._sort=a(e.sort),r._filter=l(e.filter),r._group=c(e.group),r._aggregate=e.aggregate,r._total=e.total,dt.fn.init.call(r),r.transport=Y.create(e,i),r.reader=new lt.data.readers[e.schema.type||"json"](e.schema),n=r.reader.model||{},r._data=r._observe(r._data),r.bind([wt,vt,yt,_t,xt,kt],e)},options:{data:[],schema:{modelBase:Gt},serverSorting:!1,serverPaging:!1,serverFiltering:!1,serverGrouping:!1,serverAggregates:!1,batch:!1},_isServerGrouped:function(){var e=this.group()||[];return this.options.serverGrouping&&e.length},_flatData:function(e){return this._isServerGrouped()?y(e):e},parent:st,get:function(e){var t,n,i=this._flatData(this._data);for(t=0,n=i.length;n>t;t++)if(i[t].id==e)return i[t]},getByUid:function(e){var t,n,i=this._flatData(this._data);if(i)for(t=0,n=i.length;n>t;t++)if(i[t].uid==e)return i[t]},indexOf:function(e){return D(this._data,e)},at:function(e){return this._data[e]},data:function(e){var n=this;return e===t?n._data:(n._data=this._observe(e),n._ranges=[],n._addRange(n._data),n._total=n._data.length,n._process(n._data),t)},view:function(){return this._view},add:function(e){return this.insert(this._data.length,e)},_createNewModel:function(e){return this.reader.model?new this.reader.model(e):new Ut(e)},insert:function(e,t){return t||(t=e,e=0),t instanceof Gt||(t=this._createNewModel(t)),this._isServerGrouped()?this._data.splice(e,0,T(this.group(),t)):this._data.splice(e,0,t),t},remove:function(e){var n,i=this,r=i._isServerGrouped();return this._eachItem(i._data,function(o){return n=C(o,e),n&&r?(n.isNew&&n.isNew()||i._destroyed.push(n),!0):t}),e},sync:function(){var t,n,i,r=this,o=[],a=[],s=r._destroyed,l=r._flatData(r._data);if(r.reader.model){for(t=0,n=l.length;n>t;t++)l[t].isNew()?o.push(l[t]):l[t].dirty&&a.push(l[t]);i=r._send("create",o),i.push.apply(i,r._send("update",a)),i.push.apply(i,r._send("destroy",s)),e.when.apply(null,i).then(function(){var e,t;for(e=0,t=arguments.length;t>e;e++)r._accept(arguments[e]);r._change({action:"sync"}),r.trigger(_t)})}},cancelChanges:function(e){var t=this;e instanceof lt.data.Model?t._cancelModel(e):(t._destroyed=[],t._data=t._observe(t._pristineData),t.options.serverPaging&&(t._total=t.reader.total(t._pristine)),t._change())},hasChanges:function(){var e,t,n=this._data;if(this._destroyed.length)return!0;for(e=0,t=n.length;t>e;e++)if(n[e].isNew()||n[e].dirty)return!0;return!1},_accept:function(t){var n,i=this,r=t.models,o=t.response,a=0,s=i._isServerGrouped(),l=i._pristineData,d=t.type;if(i.trigger(xt,{response:o,type:d}),o&&!nt(o)){if(o=i.reader.parse(o),i._handleCustomErrors(o))return;o=i.reader.data(o),e.isArray(o)||(o=[o])}else o=e.map(r,function(e){return e.toJSON()});for("destroy"===d&&(i._destroyed=[]),a=0,n=r.length;n>a;a++)"destroy"!==d?(r[a].accept(o[a]),"create"===d?l.push(s?T(i.group(),r[a]):o[a]):"update"===d&&i._updatePristineForModel(r[a],o[a])):i._removePristineForModel(r[a])},_updatePristineForModel:function(e,t){this._executeOnPristineForModel(e,function(e,n){lt.deepExtend(n[e],t)})},_executeOnPristineForModel:function(e,n){this._eachPristineItem(function(i){var r=S(i,e);return r>-1?(n(r,i),!0):t})},_removePristineForModel:function(e){this._executeOnPristineForModel(e,function(e,t){t.splice(e,1)})},_readData:function(e){var t=this._isServerGrouped()?this.reader.groups:this.reader.data;return t(e)},_eachPristineItem:function(e){this._eachItem(this._pristineData,e)},_eachItem:function(e,t){e&&e.length&&(this._isServerGrouped()?x(e,t):t(e))},_pristineForModel:function(e){var n,i,r=function(r){return i=S(r,e),i>-1?(n=r[i],!0):t};return this._eachPristineItem(r),n},_cancelModel:function(e){var t,n=this._pristineForModel(e);this._eachItem(this._data,function(i){t=D(i,e),-1!=t&&(!e.isNew()&&n?i[t].accept(n):i.splice(t,1))})},_promise:function(t,n,i){var r=this,o=r.transport;return e.Deferred(function(e){r.trigger(yt,{type:i}),o[i].call(o,J({success:function(t){e.resolve({response:t,models:n,type:i})},error:function(t,n,i){e.reject(t),r.error(t,n,i)}},t))}).promise()},_send:function(e,t){var n,i,r=this,o=[],a=r.reader.serialize(h(t));if(r.options.batch)t.length&&o.push(r._promise({data:{models:a}},t,e));else for(n=0,i=t.length;i>n;n++)o.push(r._promise({data:a[n]},[t[n]],e));return o},read:function(e){var t=this,n=t._params(e);t._queueRequest(n,function(){t.trigger(yt,{type:"read"})?t._dequeueRequest():(t.trigger(kt),t._ranges=[],t.transport.read({data:n,success:Z(t.success,t),error:Z(t.error,t)}))})},success:function(n){var i=this,r=i.options;return i.trigger(xt,{response:n,type:"read"}),n=i.reader.parse(n),i._handleCustomErrors(n)?(i._dequeueRequest(),t):(i._pristine=tt(n)?e.extend(!0,{},n):n.slice?n.slice(0):n,i._total=i.reader.total(n),i._aggregate&&r.serverAggregates&&(i._aggregateResult=i.reader.aggregates(n)),n=i._readData(n),i._pristineData=n.slice(0),i._data=i._observe(n),i._addRange(i._data),i._process(i._data),i._dequeueRequest(),t)},_addRange:function(e){var t=this,n=t._skip||0,i=n+t._flatData(e).length;t._ranges.push({start:n,end:i,data:e}),t._ranges.sort(function(e,t){return e.start-t.start})},error:function(e,t,n){this._dequeueRequest(),this.trigger(xt,{}),this.trigger(wt,{xhr:e,status:t,errorThrown:n})},_params:function(e){var t=this,n=J({take:t.take(),skip:t.skip(),page:t.page(),pageSize:t.pageSize(),sort:t._sort,filter:t._filter,group:t._group,aggregate:t._aggregate},e);return t.options.serverPaging||(delete n.take,delete n.skip,delete n.page,delete n.pageSize),t.options.serverGrouping?t.reader.model&&n.group&&(n.group=I(n.group,t.reader.model)):delete n.group,t.options.serverFiltering?t.reader.model&&n.filter&&(n.filter=F(n.filter,t.reader.model)):delete n.filter,t.options.serverSorting?t.reader.model&&n.sort&&(n.sort=I(n.sort,t.reader.model)):delete n.sort,t.options.serverAggregates?t.reader.model&&n.aggregate&&(n.aggregate=I(n.aggregate,t.reader.model)):delete n.aggregate,n},_queueRequest:function(e,n){var i=this;i._requestInProgress?i._pending={callback:Z(n,i),options:e}:(i._requestInProgress=!0,i._pending=t,n())},_dequeueRequest:function(){var e=this;e._requestInProgress=!1,e._pending&&e._queueRequest(e._pending.options,e._pending.callback)},_handleCustomErrors:function(e){if(this.reader.errors){var t=this.reader.errors(e);if(t)return this.trigger(wt,{xhr:null,status:"customerror",errorThrown:"custom error",errors:t}),!0}return!1},_observe:function(e){var t=this,n=t.reader.model,i=!1;return n&&e.length&&(i=!(e[0]instanceof n)),e instanceof Vt?i&&(e.type=t.reader.model,e.wrapAll(e,e)):(e=new Vt(e,t.reader.model),e.parent=function(){return t.parent()}),t._isServerGrouped()&&k(e,n),t._changeHandler&&t._data&&t._data instanceof Vt?t._data.unbind(vt,t._changeHandler):t._changeHandler=Z(t._change,t),e.bind(vt,t._changeHandler)},_change:function(e){var t,n,i,r=this,o=e?e.action:"";if("remove"===o)for(t=0,n=e.items.length;n>t;t++)e.items[t].isNew&&e.items[t].isNew()||r._destroyed.push(e.items[t]);!r.options.autoSync||"add"!==o&&"remove"!==o&&"itemchange"!==o?(i=parseInt(r._total||r.reader.total(r._pristine),10),"add"===o?i+=e.items.length:"remove"===o?i-=e.items.length:"itemchange"===o||"sync"===o||r.options.serverPaging||(i=r.reader.total(r._pristine)),r._total=i,r._process(r._data,e)):r.sync()},_process:function(e,n){var i,r=this,a={};r.options.serverPaging!==!0&&(a.skip=r._skip,a.take=r._take||r._pageSize,a.skip===t&&r._page!==t&&r._pageSize!==t&&(a.skip=(r._page-1)*r._pageSize)),r.options.serverSorting!==!0&&(a.sort=r._sort),r.options.serverFiltering!==!0&&(a.filter=r._filter),r.options.serverGrouping!==!0&&(a.group=r._group),r.options.serverAggregates!==!0&&(a.aggregate=r._aggregate,r._aggregateResult=g(e,a)),i=o.process(e,a),r._view=i.data,i.total===t||r.options.serverFiltering||(r._total=i.total),n=n||{},n.items=n.items||r._view,r.trigger(vt,n)},_mergeState:function(e){var n=this;return e!==t&&(n._pageSize=e.pageSize,n._page=e.page,n._sort=e.sort,n._filter=e.filter,n._group=e.group,n._aggregate=e.aggregate,n._skip=e.skip,n._take=e.take,n._skip===t&&(n._skip=n.skip(),e.skip=n.skip()),n._take===t&&n._pageSize!==t&&(n._take=n._pageSize,e.take=n._take),e.sort&&(n._sort=e.sort=a(e.sort)),e.filter&&(n._filter=e.filter=l(e.filter)),e.group&&(n._group=e.group=c(e.group)),e.aggregate&&(n._aggregate=e.aggregate=d(e.aggregate))),e},query:function(e){var n,i=this,r=i.options.serverSorting||i.options.serverPaging||i.options.serverFiltering||i.options.serverGrouping||i.options.serverAggregates;r||(i._data===t||0===i._data.length)&&!i._destroyed.length?i.read(i._mergeState(e)):i.trigger(yt,{type:"read"})||(i.trigger(kt),n=o.process(i._data,i._mergeState(e)),i.options.serverFiltering||(i._total=n.total!==t?n.total:i._data.length),i._view=n.data,i._aggregateResult=g(i._data,e),i.trigger(xt,{}),i.trigger(vt,{items:n.data}))},fetch:function(t){var n=this;return e.Deferred(function(e){var i=function(i){n.unbind(wt,r),e.resolve(),t&&t.call(n,i)},r=function(t){e.reject(t)};n.one(vt,i),n.one(wt,r),n._query()}).promise()},_query:function(e){var t=this;t.query(J({},{page:t.page(),pageSize:t.pageSize(),sort:t.sort(),filter:t.filter(),group:t.group(),aggregate:t.aggregate()},e))},next:function(e){var n=this,i=n.page(),r=n.total();return e=e||{},!i||r&&i+1>n.totalPages()?t:(n._skip=i*n.take(),i+=1,e.page=i,n._query(e),i)},prev:function(e){var n=this,i=n.page();return e=e||{},i&&1!==i?(n._skip=n._skip-n.take(),i-=1,e.page=i,n._query(e),i):t},page:function(e){var n,i=this;return e!==t?(e=At.max(At.min(At.max(e,1),i.totalPages()),1),i._query({page:e}),t):(n=i.skip(),n!==t?At.round((n||0)/(i.take()||1))+1:t)},pageSize:function(e){var n=this;return e!==t?(n._query({pageSize:e,page:1}),t):n.take()},sort:function(e){var n=this;return e!==t?(n._query({sort:e}),t):n._sort},filter:function(e){var n=this;return e===t?n._filter:(n._query({filter:e,page:1}),t)},group:function(e){var n=this;return e!==t?(n._query({group:e}),t):n._group},total:function(){return parseInt(this._total||0,10)},aggregate:function(e){var n=this;return e!==t?(n._query({aggregate:e}),t):n._aggregate},aggregates:function(){return this._aggregateResult},totalPages:function(){var e=this,t=e.pageSize()||e.total();return At.ceil((e.total()||0)/t)},inRange:function(e,t){var n=this,i=At.min(e+t,n.total());return!n.options.serverPaging&&n.data.length>0?!0:n._findRange(e,i).length>0},lastRange:function(){var e=this._ranges;return e[e.length-1]||{start:0,end:0,data:[]}},firstItemUid:function(){var e=this._ranges;return e.length&&e[0].data.length&&e[0].data[0].uid},range:function(e,n){var i,r,o,a,s,l,d;
if(e=At.min(e||0,this.total()),r=this,o=At.max(At.floor(e/n),0)*n,a=At.min(o+n,r.total()),i=r._findRange(e,At.min(e+n,r.total())),i.length){r._skip=e>r.skip()?At.min(a,(r.totalPages()-1)*r.take()):o,r._take=n,s=r.options.serverPaging,l=r.options.serverSorting,d=r.options.serverFiltering;try{r.options.serverPaging=!0,r.options.serverSorting=!0,r.options.serverFiltering=!0,s&&(r._data=i=r._observe(i)),r._process(i)}finally{r.options.serverPaging=s,r.options.serverSorting=l,r.options.serverFiltering=d}}else n!==t&&(r._rangeExists(o,a)?e>o&&r.prefetch(a,n,function(){r.range(e,n)}):r.prefetch(o,n,function(){e>o&&a<r.total()&&!r._rangeExists(a,At.min(a+n,r.total()))?r.prefetch(a,n,function(){r.range(e,n)}):r.range(e,n)}))},_findRange:function(e,n){var i,r,s,l,d,u,p,f,h,g,m,v,_=this,b=_._ranges,w=[],y=_.options,k=y.serverSorting||y.serverPaging||y.serverFiltering||y.serverGrouping||y.serverAggregates;for(r=0,m=b.length;m>r;r++)if(i=b[r],e>=i.start&&e<=i.end){for(g=0,s=r;m>s;s++)if(i=b[s],h=_._flatData(i.data),h.length&&e+g>=i.start&&(u=i.data,p=i.end,k||(v=c(_.group()||[]).concat(a(_.sort()||[])),f=o.process(i.data,{sort:v,filter:_.filter()}),h=u=f.data,f.total!==t&&(p=f.total)),l=0,e+g>i.start&&(l=e+g-i.start),d=h.length,p>n&&(d-=p-n),g+=d-l,w=_._mergeGroups(w,u,l,d),n<=i.end&&g==n-e))return w;break}return[]},_mergeGroups:function(e,t,n,i){if(this._isServerGrouped()){var r,o=t.toJSON();return e.length&&(r=e[e.length-1]),w(r,o,n,i),e.concat(o)}return e.concat(t.slice(n,i))},skip:function(){var e=this;return e._skip===t?e._page!==t?(e._page-1)*(e.take()||1):t:e._skip},take:function(){return this._take||this._pageSize},_prefetchSuccessHandler:function(e,t,n){var i=this;return function(r){var o,a,s=!1,l={start:e,end:t,data:[]};for(i._dequeueRequest(),o=0,a=i._ranges.length;a>o;o++)if(i._ranges[o].start===e){s=!0,l=i._ranges[o];break}s||i._ranges.push(l),i.trigger(xt,{response:r,type:"read"}),r=i.reader.parse(r),l.data=i._observe(i._readData(r)),l.end=l.start+i._flatData(l.data).length,i._ranges.sort(function(e,t){return e.start-t.start}),i._total=i.reader.total(r),n&&n()}},prefetch:function(e,t,n){var i=this,r=At.min(e+t,i.total()),o={take:t,skip:e,page:e/t+1,pageSize:t,sort:i._sort,filter:i._filter,group:i._group,aggregate:i._aggregate};i._rangeExists(e,r)?n&&n():(clearTimeout(i._timeout),i._timeout=setTimeout(function(){i._queueRequest(o,function(){i.trigger(yt,{type:"read"})?i._dequeueRequest():i.transport.read({data:i._params(o),success:i._prefetchSuccessHandler(e,r,n)})})},100))},_rangeExists:function(e,t){var n,i,r=this,o=r._ranges;for(n=0,i=o.length;i>n;n++)if(o[n].start<=e&&o[n].end>=t)return!0;return!1}}),Y={},Y.create=function(e,t){var n,i=e.transport;return i?(i.read=typeof i.read===ut?{url:i.read}:i.read,e.type&&(lt.data.transports[e.type]&&!tt(lt.data.transports[e.type])?n=new lt.data.transports[e.type](J(i,{data:t})):i=J(!0,{},lt.data.transports[e.type],i),e.schema=J(!0,{},lt.data.schemas[e.type],e.schema)),n||(n=et(i.read)?i:new W(i))):n=new U({data:e.data}),n},q.create=function(e){e=e&&e.push?{data:e}:e;var t,n,i,r=e||{},o=r.data,a=r.fields,s=r.table,l=r.select,d={};if(o||!a||r.transport||(s?o=B(s,a):l&&(o=P(l,a))),lt.data.Model&&a&&(!r.schema||!r.schema.model)){for(t=0,n=a.length;n>t;t++)i=a[t],i.type&&(d[i.field]=i);nt(d)||(r.schema=J(!0,r.schema,{model:{fields:d}}))}return r.data=o,r instanceof q?r:new q(r)},Q=Gt.define({init:function(e){var t=this,n=t.hasChildren||e&&e.hasChildren,i="items",r={};lt.data.Model.fn.init.call(t,e),typeof t.children===ut&&(i=t.children),r={schema:{data:i,model:{hasChildren:n,id:t.idField}}},typeof t.children!==ut&&J(r,t.children),r.data=e,n||(n=r.schema.data),typeof n===ut&&(n=lt.getter(n)),et(n)&&(t.hasChildren=!!n.call(t,t)),t._childrenOptions=r,t.hasChildren&&t._initChildren(),t._loaded=!(!e||!e[i]&&!e._loaded)},_initChildren:function(){var e,t,n,i=this;i.children instanceof $||(e=i.children=new $(i._childrenOptions),t=e.transport,n=t.parameterMap,t.parameterMap=function(e){return e[i.idField||"id"]=i.id,n&&(e=n(e)),e},e.parent=function(){return i},e.bind(vt,function(e){e.node=e.node||i,i.trigger(vt,e)}),e.bind(wt,function(e){var t=i.parent();t&&(e.node=e.node||i,t.trigger(wt,e))}),i._updateChildrenField())},append:function(e){this._initChildren(),this.loaded(!0),this.children.add(e)},hasChildren:!1,level:function(){for(var e=this.parentNode(),t=0;e&&e.parentNode;)t++,e=e.parentNode?e.parentNode():null;return t},_updateChildrenField:function(){var e=this._childrenOptions.schema.data;this[e||"items"]=this.children.data()},load:function(){var e=this,n={};e.hasChildren&&(e._initChildren(),n[e.idField||"id"]=e.id,e._loaded||(e.children._data=t),e.children.one(vt,function(){e._loaded=!0,e._updateChildrenField()})._query(n))},parentNode:function(){var e=this.parent();return e.parent()},loaded:function(e){return e===t?this._loaded:(this._loaded=e,t)},shouldSerialize:function(e){return Gt.fn.shouldSerialize.call(this,e)&&"children"!==e&&"_loaded"!==e&&"hasChildren"!==e&&"_childrenOptions"!==e}}),$=q.extend({init:function(e){var t=Q.define({children:e});q.fn.init.call(this,J(!0,{},{schema:{modelBase:t,model:t}},e)),this._attachBubbleHandlers()},_attachBubbleHandlers:function(){var e=this;e._data.bind(wt,function(t){e.trigger(wt,t)})},remove:function(e){var t,n=e.parentNode(),i=this;return n&&n._initChildren&&(i=n.children),t=q.fn.remove.call(i,e),n&&!i.data().length&&(n.hasChildren=!1),t},success:z("success"),data:z("data"),insert:function(e,t){var n=this.parent();return n&&n._initChildren&&(n.hasChildren=!0,n._initChildren()),q.fn.insert.call(this,e,t)},_find:function(e,t){var n,i,r,o,a;if(r=q.fn[e].call(this,t))return r;if(o=this._flatData(this.data()))for(n=0,i=o.length;i>n;n++)if(a=o[n].children,a instanceof $&&(r=a[e](t)))return r},get:function(e){return this._find("get",e)},getByUid:function(e){return this._find("getByUid",e)}}),$.create=function(e){e=e&&e.push?{data:e}:e;var t=e||{},n=t.data,i=t.fields,r=t.list;return n&&n._dataSource?n._dataSource:(n||!i||t.transport||r&&(n=H(r,i)),t.data=n,t instanceof $?t:new $(t))},K=lt.Observable.extend({init:function(e,t,n){lt.Observable.fn.init.call(this),this._prefetching=!1,this.dataSource=e,this.prefetch=!n;var i=this;e.bind("change",function(){i._change()}),this._syncWithDataSource(),this.setViewSize(t)},setViewSize:function(e){this.viewSize=e,this._recalculate()},at:function(e){var n,i,r=this.pageSize;return e>=this.total()?(this.trigger("endreached",{index:e}),t):((e<this.dataOffset||e>this.skip+r)&&(n=Math.floor(e/r)*r,this.range(n)),e===this.prefetchThreshold&&this._prefetch(),e===this.midPageThreshold?this.range(this.nextMidRange):e===this.nextPageThreshold?this.range(this.nextFullRange):e===this.pullBackThreshold&&(this.offset===this.skip?this.range(this.previousMidRange):this.range(this.previousFullRange)),i=this.dataSource.at(e-this.dataOffset),i===t&&this.trigger("endreached",{index:e}),i)},indexOf:function(e){return this.dataSource.data().indexOf(e)+this.dataOffset},_prefetch:function(){var e=this,t=this.pageSize,n=this.skip+t,i=this.dataSource;i.inRange(n,t)||this._prefetching||!this.prefetch||(this._prefetching=!0,this.trigger("prefetching",{skip:n,take:t}),i.prefetch(n,t,function(){e._prefetching=!1,e.trigger("prefetched",{skip:n,take:t})}))},total:function(){return parseInt(this.dataSource.total(),10)},next:function(){var e=this,t=e.pageSize,n=e.skip-e.viewSize,i=At.max(At.floor(n/t),0)*t+t;this.offset=n,this.dataSource.prefetch(i,t,function(){e._goToRange(n,!0)})},range:function(e){if(this.offset!==e){var t=this,n=this.pageSize,i=At.max(At.floor(e/n),0)*n+n,r=this.dataSource;this.offset=e,this._recalculate(),r.inRange(e,n)?this._goToRange(e):this.prefetch&&r.prefetch(i,n,function(){t._goToRange(e,!0)})}},syncDataSource:function(){var e=this.offset;this.offset=null,this.range(e)},_goToRange:function(e,t){this.offset===e&&(this.dataOffset=e,this._expanding=t,this.dataSource.range(e,this.pageSize))},_change:function(){var e=this.dataSource,t=e.firstItemUid();this.length=e.lastRange().end,this._firstItemUid!==t&&(this._syncWithDataSource(),this._recalculate(),this.trigger("reset",{offset:this.offset})),this.trigger("resize"),this._expanding&&this.trigger("expand"),delete this._expanding},_syncWithDataSource:function(){var e=this.dataSource;this._firstItemUid=e.firstItemUid(),this.dataOffset=this.offset=e.skip(),this.pageSize=e.pageSize()},_recalculate:function(){var e=this.pageSize,t=this.offset,n=this.viewSize,i=Math.ceil(t/e)*e;this.skip=i,this.midPageThreshold=i+e-1,this.nextPageThreshold=i+n-1,this.prefetchThreshold=i+Math.floor(2*(e/3)),this.pullBackThreshold=this.offset-1,this.nextMidRange=i+e-n,this.nextFullRange=i,this.previousMidRange=t-n,this.previousFullRange=i-e}}),X=lt.Observable.extend({init:function(e,t){var n=this;lt.Observable.fn.init.call(n),this.dataSource=e,this.batchSize=t,this._total=0,this.buffer=new K(e,3*t),this.buffer.bind({endreached:function(e){n.trigger("endreached",{index:e.index})},prefetching:function(e){n.trigger("prefetching",{skip:e.skip,take:e.take})},prefetched:function(e){n.trigger("prefetched",{skip:e.skip,take:e.take})},reset:function(){n._total=0,n.trigger("reset")},resize:function(){n._total=this.length/n.batchSize,n.trigger("resize",{total:n.total(),offset:this.offset})}})},syncDataSource:function(){this.buffer.syncDataSource()},at:function(e){var n,i,r=this.buffer,o=e*this.batchSize,a=this.batchSize,s=[];for(r.offset>o&&r.at(r.offset-1),i=0;a>i;i++){if(n=r.at(o+i),n===t)return;s.push(n)}return s},total:function(){return this._total}}),J(!0,lt.data,{readers:{json:G},Query:o,DataSource:q,HierarchicalDataSource:$,Node:Q,ObservableObject:Ut,ObservableArray:Vt,LocalTransport:U,RemoteTransport:W,Cache:j,DataReader:G,Model:Gt,Buffer:K,BatchBuffer:X})}(window.kendo.jQuery),function(e,t){function n(e){var t,i,r=[];for(t=0,i=e.length;i>t;t++)r=e[t].hasSubgroups?r.concat(n(e[t].items)):r.concat(e[t].items);return r}function i(e,n){var i=k.initWidget(e,{},n);return i?new b(i):t}function r(e){var t,n,i,o,a,s,l,d={};for(l=e.match(w),t=0,n=l.length;n>t;t++)i=l[t],o=i.indexOf(":"),a=i.substring(0,o),s=i.substring(o+1),"{"==s.charAt(0)&&(s=r(s)),d[a]=s;return d}function o(e,t,n){var i,r={};for(i in e)r[i]=new n(t,e[i]);return r}function a(e,t,n,s){var d,c,u,p=e.getAttribute("data-"+k.ns+"role"),f=e.getAttribute("data-"+k.ns+"bind"),v=e.children,b=[],w=!0,x={};if(s=s||[t],(p||f)&&l(e),p&&(u=i(e,n)),f&&(f=r(f.replace(y,"")),u||(x=k.parseOptions(e,{textField:"",valueField:"",template:"",valueUpdate:H,valuePrimitive:!1}),x.roles=n,u=new _(e,x)),u.source=t,c=o(f,s,h),x.template&&(c.template=new m(s,"",x.template)),c.click&&(f.events=f.events||{},f.events.click=f.click,delete c.click),c.source&&(w=!1),f.attr&&(c.attr=o(f.attr,s,h)),f.style&&(c.style=o(f.style,s,h)),f.events&&(c.events=o(f.events,s,g)),u.bind(c)),u&&(e.kendoBindingTarget=u),w&&v){for(d=0;d<v.length;d++)b[d]=v[d];for(d=0;d<b.length;d++)a(b[d],t,n,s)}}function s(t,n){var i,r,o,s=k.rolesFromNamespaces([].slice.call(arguments,2));for(n=k.observable(n),t=e(t),i=0,r=t.length;r>i;i++)o=t[i],1===o.nodeType&&a(o,n,s)}function l(t){var n=t.kendoBindingTarget;n&&(n.destroy(),e.support.deleteExpando?delete t.kendoBindingTarget:t.removeAttribute?t.removeAttribute("kendoBindingTarget"):t.kendoBindingTarget=null)}function d(e){l(e),c(e)}function c(e){var t,n,i=e.children;if(i)for(t=0,n=i.length;n>t;t++)d(i[t])}function u(t){var n,i;for(t=e(t),n=0,i=t.length;i>n;n++)d(t[n])}function p(e,t){var n=e.element,i=n[0].kendoBindingTarget;i&&s(n,i.source,t)}var f,h,g,m,v,_,b,w,y,k=window.kendo,x=k.Observable,C=k.data.ObservableObject,T=k.data.ObservableArray,S={}.toString,D={},A=Array.prototype.splice,E=k.Class,F=e.proxy,I="value",P="source",B="events",z="checked",H="change";!function(){var e=document.createElement("a");e.innerText!==t?f="innerText":e.textContent!==t&&(f="textContent")}(),h=x.extend({init:function(e,t){var n=this;x.fn.init.call(n),n.source=e[0],n.parents=e,n.path=t,n.dependencies={},n.dependencies[t]=!0,n.observable=n.source instanceof x,n._access=function(e){n.dependencies[e.field]=!0},n.observable&&(n._change=function(e){n.change(e)},n.source.bind(H,n._change))},_parents:function(){var t,n=this.parents,i=this.get();return i&&"function"==typeof i.parent&&(t=i.parent(),e.inArray(t,n)<0&&(n=[t].concat(n))),n},change:function(e){var t,n,i=e.field,r=this;if("this"===r.path)r.trigger(H,e);else for(t in r.dependencies)if(0===t.indexOf(i)&&(n=t.charAt(i.length),!n||"."===n||"["===n)){r.trigger(H,e);break}},start:function(e){e.bind("get",this._access)},stop:function(e){e.unbind("get",this._access)},get:function(){var e=this,n=e.source,i=0,r=e.path,o=n;if(!e.observable)return o;for(e.start(e.source),o=n.get(r);o===t&&n;)n=e.parents[++i],n instanceof C&&(o=n.get(r));if(o===t)for(n=e.source;o===t&&n;)n=n.parent(),n instanceof C&&(o=n.get(r));return"function"==typeof o&&(i=r.lastIndexOf("."),i>0&&(n=n.get(r.substring(0,i))),e.start(n),o=o.call(n,e.source),e.stop(n)),n&&n!==e.source&&(e.currentSource=n,n.unbind(H,e._change).bind(H,e._change)),e.stop(e.source),o},set:function(e){var t=this,n=t.currentSource||t.source;n.set(t.path,e)},destroy:function(){this.observable&&this.source.unbind(H,this._change)}}),g=h.extend({get:function(){var e,t=this.source,n=this.path,i=0;for(e=t.get(n);!e&&t;)t=this.parents[++i],t instanceof C&&(e=t.get(n));return F(e,t)}}),m=h.extend({init:function(e,t,n){var i=this;h.fn.init.call(i,e,t),i.template=n},render:function(e){var t;return this.start(this.source),t=k.render(this.template,e),this.stop(this.source),t}}),v=E.extend({init:function(e,t,n){this.element=e,this.bindings=t,this.options=n},bind:function(e,t){var n=this;e=t?e[t]:e,e.bind(H,function(e){n.refresh(t||e)}),n.refresh(t)},destroy:function(){}}),D.attr=v.extend({refresh:function(e){this.element.setAttribute(e,this.bindings.attr[e].get())}}),D.style=v.extend({refresh:function(e){this.element.style[e]=this.bindings.style[e].get()||""}}),D.enabled=v.extend({refresh:function(){this.bindings.enabled.get()?this.element.removeAttribute("disabled"):this.element.setAttribute("disabled","disabled")}}),D.readonly=v.extend({refresh:function(){this.bindings.readonly.get()?this.element.setAttribute("readonly","readonly"):this.element.removeAttribute("readonly")}}),D.disabled=v.extend({refresh:function(){this.bindings.disabled.get()?this.element.setAttribute("disabled","disabled"):this.element.removeAttribute("disabled")}}),D.events=v.extend({init:function(e,t,n){v.fn.init.call(this,e,t,n),this.handlers={}},refresh:function(t){var n=e(this.element),i=this.bindings.events[t],r=this.handlers[t];r&&n.off(t,r),r=this.handlers[t]=i.get(),n.on(t,i.source,r)},destroy:function(){var t,n=e(this.element);for(t in this.handlers)n.off(t,this.handlers[t])}}),D.text=v.extend({refresh:function(){var e=this.bindings.text.get();null==e&&(e=""),this.element[f]=e}}),D.visible=v.extend({refresh:function(){this.element.style.display=this.bindings.visible.get()?"":"none"}}),D.invisible=v.extend({refresh:function(){this.element.style.display=this.bindings.invisible.get()?"none":""}}),D.html=v.extend({refresh:function(){this.element.innerHTML=this.bindings.html.get()}}),D.value=v.extend({init:function(t,n,i){v.fn.init.call(this,t,n,i),this._change=F(this.change,this),this.eventName=i.valueUpdate||H,e(this.element).on(this.eventName,this._change),this._initChange=!1},change:function(){this._initChange=this.eventName!=H,this.bindings[I].set(this.element.value),this._initChange=!1},refresh:function(){if(!this._initChange){var e=this.bindings[I].get();null==e&&(e=""),this.element.value=e}this._initChange=!1},destroy:function(){e(this.element).off(this.eventName,this._change)}}),D.source=v.extend({init:function(e,t,n){v.fn.init.call(this,e,t,n)},refresh:function(e){var t=this,n=t.bindings.source.get();n instanceof T?(e=e||{},"add"==e.action?t.add(e.index,e.items):"remove"==e.action?t.remove(e.index,e.items):"itemchange"!=e.action&&t.render()):t.render()},container:function(){var e=this.element;return"table"==e.nodeName.toLowerCase()&&(e.tBodies[0]||e.appendChild(document.createElement("tbody")),e=e.tBodies[0]),e},template:function(){var e=this.options,t=e.template,n=this.container().nodeName.toLowerCase();return t||(t="select"==n?e.valueField||e.textField?k.format('<option value="#:{0}#">#:{1}#</option>',e.valueField||e.textField,e.textField||e.valueField):"<option>#:data#</option>":"tbody"==n?"<tr><td>#:data#</td></tr>":"ul"==n||"ol"==n?"<li>#:data#</li>":"#:data#",t=k.template(t)),t},destroy:function(){var e=this.bindings.source.get();e.unbind(H,this._change)},add:function(t,n){var i,r,o,s,l=this.container(),d=l.cloneNode(!1),c=l.children[t];if(e(d).html(k.render(this.template(),n)),d.children.length)for(i=this.bindings.source._parents(),r=0,o=n.length;o>r;r++)s=d.children[0],l.insertBefore(s,c||null),a(s,n[r],this.options.roles,[n[r]].concat(i))},remove:function(e,t){var n,i,r=this.container();for(n=0;n<t.length;n++)i=r.children[e],d(i),r.removeChild(i)},render:function(){var t,n,i,r,o=this.bindings.source.get(),s=this.container(),l=this.template();if(o instanceof T||"[object Array]"===S.call(o)||(o.parent&&(r=o.parent),o=new T([o]),o.parent&&(o.parent=r)),this.bindings.template){if(c(s),e(s).html(this.bindings.template.render(o)),s.children.length)for(t=this.bindings.source._parents(),n=0,i=o.length;i>n;n++)a(s.children[n],o[n],this.options.roles,[o[n]].concat(t))}else e(s).html(k.render(l,o))}}),D.input={checked:v.extend({init:function(t,n,i){v.fn.init.call(this,t,n,i),this._change=F(this.change,this),e(this.element).change(this._change)},change:function(){var e,t,n=this.element,i=this.value();"radio"==n.type?this.bindings[z].set(i):"checkbox"==n.type&&(e=this.bindings[z].get(),e instanceof T?(i=this.element.value,"on"!==i&&"off"!==i&&(t=e.indexOf(i),t>-1?e.splice(t,1):e.push(i))):this.bindings[z].set(i))},refresh:function(){var e=this.bindings[z].get(),t=e,n=this.element;"checkbox"==n.type?(t instanceof T&&(e=this.element.value,t.indexOf(e)>=0&&(e=!0)),n.checked=e===!0):"radio"==n.type&&null!=e&&n.value===""+e&&(n.checked=!0)},value:function(){var e=this.element,t=e.value;return"checkbox"==e.type&&(t=e.checked),t},destroy:function(){e(this.element).off(H,this._change)}})},D.select={value:v.extend({init:function(t,n,i){v.fn.init.call(this,t,n,i),this._change=F(this.change,this),e(this.element).change(this._change)},change:function(){var e,t,n,i,r,o,a=[],s=this.element,l=this.options.valueField||this.options.textField,d=this.options.valuePrimitive;for(r=0,o=s.options.length;o>r;r++)t=s.options[r],t.selected&&(i=t.attributes.value,i=i&&i.specified?t.value:t.text,a.push(i));if(l)for(e=this.bindings.source.get(),n=0;n<a.length;n++)for(r=0,o=e.length;o>r;r++)if(e[r].get(l)==a[n]){a[n]=e[r];break}i=this.bindings[I].get(),i instanceof T?i.splice.apply(i,[0,i.length].concat(a)):d||!(i instanceof C)&&l?this.bindings[I].set(a[0].get(l)):this.bindings[I].set(a[0])},refresh:function(){var e,t,n,i=this.element,r=i.options,o=this.bindings[I].get(),a=o,s=this.options.valueField||this.options.textField,l=!1;for(a instanceof T||(a=new T([o])),i.selectedIndex=-1,n=0;n<a.length;n++)for(o=a[n],s&&o instanceof C&&(o=o.get(s)),e=0;e<r.length;e++)t=r[e].value,""===t&&""!==o&&(t=r[e].text),t==o&&(r[e].selected=!0,l=!0)},destroy:function(){e(this.element).off(H,this._change)}})},D.widget={events:v.extend({init:function(e,t,n){v.fn.init.call(this,e.element[0],t,n),this.widget=e,this.handlers={}},refresh:function(e){var t=this.bindings.events[e],n=this.handlers[e];n&&this.widget.unbind(e,n),n=t.get(),this.handlers[e]=function(e){e.data=t.source,n(e),e.data===t.source&&delete e.data},this.widget.bind(e,this.handlers[e])},destroy:function(){var e;for(e in this.handlers)this.widget.unbind(e,this.handlers[e])}}),checked:v.extend({init:function(e,t,n){v.fn.init.call(this,e.element[0],t,n),this.widget=e,this._change=F(this.change,this),this.widget.bind(H,this._change)},change:function(){this.bindings[z].set(this.value())},refresh:function(){this.widget.check(this.bindings[z].get()===!0)},value:function(){var e=this.element,t=e.value;return("on"==t||"off"==t)&&(t=e.checked),t},destroy:function(){this.widget.unbind(H,this._change)}}),visible:v.extend({init:function(e,t,n){v.fn.init.call(this,e.element[0],t,n),this.widget=e},refresh:function(){var e=this.bindings.visible.get();this.widget.wrapper[0].style.display=e?"":"none"}}),invisible:v.extend({init:function(e,t,n){v.fn.init.call(this,e.element[0],t,n),this.widget=e},refresh:function(){var e=this.bindings.invisible.get();this.widget.wrapper[0].style.display=e?"none":""}}),enabled:v.extend({init:function(e,t,n){v.fn.init.call(this,e.element[0],t,n),this.widget=e},refresh:function(){this.widget.enable&&this.widget.enable(this.bindings.enabled.get())}}),disabled:v.extend({init:function(e,t,n){v.fn.init.call(this,e.element[0],t,n),this.widget=e},refresh:function(){this.widget.enable&&this.widget.enable(!this.bindings.disabled.get())}}),source:v.extend({init:function(e,t,n){var i=this;v.fn.init.call(i,e.element[0],t,n),i.widget=e,i._dataBinding=F(i.dataBinding,i),i._dataBound=F(i.dataBound,i),i._itemChange=F(i.itemChange,i)},itemChange:function(e){a(e.item[0],e.data,this._ns(e.ns),[e.data].concat(this.bindings.source._parents()))},dataBinding:function(){var e,t,n=this.widget,i=n.items();for(e=0,t=i.length;t>e;e++)d(i[e])},_ns:function(t){t=t||k.ui;var n=[k.ui,k.dataviz.ui,k.mobile.ui];return n.splice(e.inArray(t,n),1),n.unshift(t),k.rolesFromNamespaces(n)},dataBound:function(e){var t,i,r,o=this.widget,s=o.items(),l=o.dataSource,d=l.view(),c=l.group()||[];if(s.length)for(c.length&&(d=n(d)),r=this.bindings.source._parents(),t=0,i=d.length;i>t;t++)a(s[t],d[t],this._ns(e.ns),[d[t]].concat(r))},refresh:function(e){var t,n=this,i=n.widget;e=e||{},e.action||(n.destroy(),i.bind("dataBinding",n._dataBinding),i.bind("dataBound",n._dataBound),i.bind("itemChange",n._itemChange),t=n.bindings.source.get(),i.dataSource instanceof k.data.DataSource&&i.dataSource!=t&&(t instanceof k.data.DataSource?i.setDataSource(t):t&&t._dataSource?i.setDataSource(t._dataSource):i.dataSource.data(t)))},destroy:function(){var e=this.widget;e.unbind("dataBinding",this._dataBinding),e.unbind("dataBound",this._dataBound),e.unbind("itemChange",this._itemChange)}}),value:v.extend({init:function(t,n,i){v.fn.init.call(this,t.element[0],n,i),this.widget=t,this._change=e.proxy(this.change,this),this.widget.first(H,this._change);var r=this.bindings.value.get();this._valueIsObservableObject=!i.valuePrimitive&&(null==r||r instanceof C),this._valueIsObservableArray=r instanceof T,this._initChange=!1},change:function(){var e,t,n,i,r,o,a,s=this.widget.value(),l=this.options.dataValueField||this.options.dataTextField,d="[object Array]"===S.call(s),c=this._valueIsObservableObject,u=[];if(this._initChange=!0,l)if(this.bindings.source&&(a=this.bindings.source.get()),""===s&&(c||this.options.valuePrimitive))s=null;else{for((!a||a instanceof k.data.DataSource)&&(a=this.widget.dataSource.view()),d&&(t=s.length,u=s.slice(0)),r=0,o=a.length;o>r;r++)if(n=a[r],i=n.get(l),d){for(e=0;t>e;e++)if(i==u[e]){u[e]=n;break}}else if(i==s){s=c?n:i;break}u[0]&&(s=this._valueIsObservableArray?u:c||!l?u[0]:u[0].get(l))}this.bindings.value.set(s),this._initChange=!1},refresh:function(){if(!this._initChange){var e,t=this.options.dataValueField||this.options.dataTextField,n=this.bindings.value.get(),i=0,r=[];if(t)if(n instanceof T){for(e=n.length;e>i;i++)r[i]=n[i].get(t);n=r}else n instanceof C&&(n=n.get(t));this.widget.value(n)}this._initChange=!1},destroy:function(){this.widget.unbind(H,this._change)}}),multiselect:{value:v.extend({init:function(t,n,i){v.fn.init.call(this,t.element[0],n,i),this.widget=t,this._change=e.proxy(this.change,this),this.widget.first(H,this._change),this._initChange=!1},change:function(){var e=this,t=e.bindings[I].get(),n=e.options.valuePrimitive,i=n?e.widget.value():e.widget.dataItems();e._initChange=!0,t instanceof T?(i.length&&A.call(t,0,t.length),t.splice.apply(t,[0,t.length].concat(i))):e.bindings[I].set(i),e._initChange=!1},refresh:function(){if(!this._initChange){var e,t,n=this.options.dataValueField||this.options.dataTextField,i=this.bindings.value.get(),r=0,o=[];if(n)if(i instanceof T){for(e=i.length;e>r;r++)t=i[r],o[r]=t.get?t.get(n):t;i=o}else i instanceof C&&(i=i.get(n));this.widget.value(i)}},destroy:function(){this.widget.unbind(H,this._change)}})}},_=E.extend({init:function(e,t){this.target=e,this.options=t,this.toDestroy=[]},bind:function(e){var t,n,i,r,o=this.target.nodeName.toLowerCase(),a=D[o]||{};for(t in e)t==I?n=!0:t==P?i=!0:t==B?r=!0:this.applyBinding(t,e,a);i&&this.applyBinding(P,e,a),n&&this.applyBinding(I,e,a),r&&this.applyBinding(B,e,a)},applyBinding:function(e,t,n){var i,r=n[e]||D[e],o=this.toDestroy,a=t[e];if(r)if(r=new r(this.target,t,this.options),o.push(r),a instanceof h)r.bind(a),o.push(a);else for(i in a)r.bind(a,i),o.push(a[i]);else if("template"!==e)throw Error("The "+e+" binding is not supported by the "+this.target.nodeName.toLowerCase()+" element")},destroy:function(){var e,t,n=this.toDestroy;for(e=0,t=n.length;t>e;e++)n[e].destroy()}}),b=_.extend({bind:function(e){var t,n=this,i=!1,r=!1,o=D.widget[n.target.options.name.toLowerCase()]||{};for(t in e)t==I?i=!0:t==P?r=!0:n.applyBinding(t,e);r&&n.applyBinding(P,e),i&&n.applyBinding(I,e,o[I])},applyBinding:function(e,t,n){var i,r=n||D.widget[e],o=this.toDestroy,a=t[e];if(!r)throw Error("The "+e+" binding is not supported by the "+this.target.options.name+" widget");if(r=new r(this.target,t,this.target.options),o.push(r),a instanceof h)r.bind(a),o.push(a);else for(i in a)r.bind(a,i),o.push(a[i])}}),w=/[A-Za-z0-9_\-]+:(\{([^}]*)\}|[^,}]+)/g,y=/\s/g,k.unbind=u,k.bind=s,k.data.binders=D,k.data.Binder=v,k.notify=p,k.observable=function(e){return e instanceof C||(e=new C(e)),e},k.observableHierarchy=function(e){function t(e){var n,i;for(n=0;n<e.length;n++)e[n]._initChildren(),i=e[n].children,i.fetch(),e[n].items=i.data(),t(e[n].items)}var n=k.data.HierarchicalDataSource.create(e);return n.fetch(),t(n.data()),n._data._dataSource=n,n._data}}(window.kendo.jQuery),function(e){function t(t){var n,i=a.ui.validator.ruleResolvers||{},r={};for(n in i)e.extend(!0,r,i[n].resolve(t));return r}function n(e){return e.replace(/&amp/g,"&amp;").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">")}function i(e){return e=(e+"").split("."),e.length>1?e[1].length:0}function r(t){return e.parseHTML?e(e.parseHTML(t)):e(t)}var o,a=window.kendo,s=a.ui.Widget,l=".kendoValidator",d="k-invalid-msg",c=RegExp(d,"i"),u="k-invalid",p=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,f=/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,h=":input:not(:button,[type=submit],[type=reset],[disabled],[readonly])",g=":checkbox:not([disabled],[readonly])",m="[type=number],[type=range]",v="blur",_="name",b="form",w="novalidate",y=e.proxy,k=function(e,t){return"string"==typeof t&&(t=RegExp("^(?:"+t+")$")),t.test(e)},x=function(e,t,n){var i=e.val();return e.filter(t).length&&""!==i?k(i,n):!0},C=function(e,t){return e.length?null!=e[0].attributes[t]:!1};a.ui.validator||(a.ui.validator={rules:{},messages:{}}),o=s.extend({init:function(n,i){var r=this,o=t(n);i=i||{},i.rules=e.extend({},a.ui.validator.rules,o.rules,i.rules),i.messages=e.extend({},a.ui.validator.messages,o.messages,i.messages),s.fn.init.call(r,n,i),r._errorTemplate=a.template(r.options.errorTemplate),r.element.is(b)&&r.element.attr(w,w),r._errors={},r._attachEvents()},events:["validate"],options:{name:"Validator",errorTemplate:'<span class="k-widget k-tooltip k-tooltip-validation"><span class="k-icon k-warning"> </span> #=message#</span>',messages:{required:"{0} is required",pattern:"{0} is not valid",min:"{0} should be greater than or equal to {1}",max:"{0} should be smaller than or equal to {1}",step:"{0} is not valid",email:"{0} is not valid email",url:"{0} is not valid URL",date:"{0} is not valid date"},rules:{required:function(e){var t=e.filter("[type=checkbox]").length&&!e.is(":checked"),n=e.val();return!(C(e,"required")&&(""===n||!n||t))},pattern:function(e){return e.filter("[type=text],[type=email],[type=url],[type=tel],[type=search],[type=password]").filter("[pattern]").length&&""!==e.val()?k(e.val(),e.attr("pattern")):!0},min:function(e){if(e.filter(m+",["+a.attr("type")+"=number]").filter("[min]").length&&""!==e.val()){var t=parseFloat(e.attr("min"))||0,n=a.parseFloat(e.val());return n>=t}return!0},max:function(e){if(e.filter(m+",["+a.attr("type")+"=number]").filter("[max]").length&&""!==e.val()){var t=parseFloat(e.attr("max"))||0,n=a.parseFloat(e.val());return t>=n}return!0},step:function(e){if(e.filter(m+",["+a.attr("type")+"=number]").filter("[step]").length&&""!==e.val()){var t,n=parseFloat(e.attr("min"))||0,r=parseFloat(e.attr("step"))||1,o=parseFloat(e.val()),s=i(r);return s?(t=Math.pow(10,s),0===(o-n)*t%(r*t)/Math.pow(100,s)):0===(o-n)%r}return!0},email:function(e){return x(e,"[type=email],["+a.attr("type")+"=email]",p)},url:function(e){return x(e,"[type=url],["+a.attr("type")+"=url]",f)},date:function(e){return e.filter("[type^=date],["+a.attr("type")+"=date]").length&&""!==e.val()?null!==a.parseDate(e.val(),e.attr(a.attr("format"))):!0}},validateOnBlur:!0},destroy:function(){s.fn.destroy.call(this),this.element.off(l)},_submit:function(e){return this.validate()?!0:(e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),!1)},_attachEvents:function(){var t=this;t.element.is(b)&&t.element.on("submit"+l,y(t._submit,t)),t.options.validateOnBlur&&(t.element.is(h)?(t.element.on(v+l,function(){t.validateInput(t.element)}),t.element.is(g)&&t.element.on("click"+l,function(){t.validateInput(t.element)})):(t.element.on(v+l,h,function(){t.validateInput(e(this))}),t.element.on("click"+l,g,function(){t.validateInput(e(this))})))},validate:function(){var e,t,n,i,r=!1;if(this._errors={},this.element.is(h))r=this.validateInput(this.element);else{for(i=!1,e=this.element.find(h),t=0,n=e.length;n>t;t++)this.validateInput(e.eq(t))||(i=!0);
r=!i}return this.trigger("validate",{valid:r}),r},validateInput:function(t){var i,o,a,s,l,c,p,f,h;return t=e(t),o=this,a=o._errorTemplate,s=o._checkValidity(t),l=s.valid,c="."+d,p=t.attr(_)||"",f=o._findMessageContainer(p).add(t.next(c)).hide(),t.removeAttr("aria-invalid"),l||(i=o._extractMessage(t,s.key),o._errors[p]=i,h=r(a({message:n(i)})),o._decorateMessageContainer(h,p),f.replaceWith(h).length||h.insertAfter(t),h.show(),t.attr("aria-invalid",!0)),t.toggleClass(u,!l),l},hideMessages:function(){var e=this,t="."+d,n=e.element;n.is(h)?n.next(t).hide():n.find(t).hide()},_findMessageContainer:function(t){var n,i,r,o,s,l=a.ui.validator.messageLocators,d=e(),u=this.element[0].getElementsByTagName("*");for(i=0,r=u.length;r>i;i++)o=u[i],c.test(o.className)&&(s=o.getAttribute(a.attr("for")),s===t&&(d=d.add(o)));for(n in l)d=d.add(l[n].locate(this.element,t));return d},_decorateMessageContainer:function(e,t){var n,i=a.ui.validator.messageLocators;e.addClass(d).attr(a.attr("for"),t||"");for(n in i)i[n].decorate(e,t);e.attr("role","alert")},_extractMessage:function(t,n){var i=this,r=i.options.messages[n],o=t.attr(_);return r=e.isFunction(r)?r(t):r,a.format(t.attr(a.attr(n+"-msg"))||t.attr("validationMessage")||t.attr("title")||r||"",o,t.attr(n))},_checkValidity:function(e){var t,n=this.options.rules;for(t in n)if(!n[t](e))return{valid:!1,key:t};return{valid:!0}},errors:function(){var e,t=[],n=this._errors;for(e in n)t.push(n[e]);return t}}),a.ui.plugin(o)}(window.kendo.jQuery),function(e){function t(e,t){var n=e.x.location,i=e.y.location,r=t.x.location,o=t.y.location,a=n-r,s=i-o;return{center:{x:(n+r)/2,y:(i+o)/2},distance:Math.sqrt(a*a+s*s)}}function n(e){var t,n,i,r=[],o=e.originalEvent,s=e.currentTarget,l=0;if(e.api)r.push({id:2,event:e,target:e.target,currentTarget:e.target,location:e});else if(e.type.match(/touch/))for(n=o?o.changedTouches:[],t=n.length;t>l;l++)i=n[l],r.push({location:i,event:e,target:i.target,currentTarget:s,id:i.identifier});else a.pointers||a.msPointers?r.push({location:o,event:e,target:e.target,currentTarget:s,id:o.pointerId}):r.push({id:1,event:e,target:e.target,currentTarget:s,location:e});return r}function i(t){var n,i,r;t.preventDefault(),n=e(t.data.root),i=n.closest(".k-widget").parent(),i[0]||(i=n.parent()),r=e.extend(!0,{},t,{target:n[0]}),i.trigger(e.Event(t.type,r))}function r(e){for(var t=o.eventMap.up.split(" "),n=0,i=t.length;i>n;n++)e(t[n])}var o=window.kendo,a=o.support,s=window.document,l=o.Class,d=o.Observable,c=e.now,u=e.extend,p=a.mobileOS,f=p&&p.android,h=a.browser.ie?5:0,g="press",m="select",v="start",_="move",b="end",w="cancel",y="tap",k="release",x="gesturestart",C="gesturechange",T="gestureend",S="gesturetap",D=l.extend({init:function(e,t){var n=this;n.axis=e,n._updateLocationData(t),n.startLocation=n.location,n.velocity=n.delta=0,n.timeStamp=c()},move:function(e){var t=this,n=e["page"+t.axis],i=c(),r=i-t.timeStamp||1;(n||!f)&&(t.delta=n-t.location,t._updateLocationData(e),t.initialDelta=n-t.startLocation,t.velocity=t.delta/r,t.timeStamp=i)},_updateLocationData:function(e){var t=this,n=t.axis;t.location=e["page"+n],t.client=e["client"+n],t.screen=e["screen"+n]}}),A=l.extend({init:function(e,t,n){var i=this;u(i,{x:new D("X",n.location),y:new D("Y",n.location),userEvents:e,target:t,currentTarget:n.currentTarget,initialTouch:n.target,id:n.id,_moved:!1,_finished:!1}),i.notifyInit=function(){i._trigger(g,n)}},move:function(e){var t=this;if(!t._finished){if(t.x.move(e.location),t.y.move(e.location),!t._moved){if(t._withinIgnoreThreshold())return;if(E.current&&E.current!==t.userEvents)return t.dispose();t._start(e)}t._finished||t._trigger(_,e)}},end:function(e){var t=this;t.endTime=c(),t._finished||(t._moved?t._trigger(b,e):t._trigger(y,e),t._trigger(k,e),t.dispose())},dispose:function(){var t=this,n=t.userEvents,i=n.touches;t._finished=!0,i.splice(e.inArray(t,i),1)},skip:function(){this.dispose()},cancel:function(){this.dispose()},isMoved:function(){return this._moved},_start:function(e){this.startTime=c(),this._moved=!0,this._trigger(v,e)},_trigger:function(e,t){var n=this,i=t.event,r={touch:n,x:n.x,y:n.y,target:n.target,event:i};n.userEvents.notify(e,r)&&i.preventDefault()},_withinIgnoreThreshold:function(){var e=this.x.initialDelta,t=this.y.initialDelta;return Math.sqrt(e*e+t*t)<=this.userEvents.threshold}}),E=d.extend({init:function(t,n){var i,l,c,p=this,f=o.guid();n=n||{},i=p.filter=n.filter,p.threshold=n.threshold||h,p.touches=[],p._maxTouches=n.multiTouch?2:1,p.allowSelection=n.allowSelection,p.captureUpIfMoved=n.captureUpIfMoved,p.eventNS=f,t=e(t).handler(p),d.fn.init.call(p),u(p,{element:t,surface:n.global?e(s.documentElement):e(n.surface||t),stopPropagation:n.stopPropagation,pressed:!1}),p.surface.handler(p).on(o.applyEventMap("move",f),"_move").on(o.applyEventMap("up cancel",f),"_end"),t.on(o.applyEventMap("down",f),i,"_start"),(a.pointers||a.msPointers)&&t.css("-ms-touch-action","pinch-zoom double-tap-zoom"),n.preventDragEvent&&t.on(o.applyEventMap("dragstart",f),o.preventDefault),t.on(o.applyEventMap("mousedown selectstart",f),i,{root:t},"_select"),p.captureUpIfMoved&&a.eventCapture&&(l=p.surface[0],c=e.proxy(p.preventIfMoving,p),r(function(e){l.addEventListener(e,c,!0)})),p.bind([g,y,v,_,b,k,w,x,C,T,S,m],n)},preventIfMoving:function(e){this._isMoved()&&e.preventDefault()},destroy:function(){var e,t=this;t._destroyed||(t._destroyed=!0,t.captureUpIfMoved&&a.eventCapture&&(e=t.surface[0],r(function(n){e.removeEventListener(n,t.preventIfMoving)})),t.element.kendoDestroy(t.eventNS),t.surface.kendoDestroy(t.eventNS),t.element.removeData("handler"),t.surface.removeData("handler"),t._disposeAll(),t.unbind(),delete t.surface,delete t.element)},capture:function(){E.current=this},cancel:function(){this._disposeAll(),this.trigger(w)},notify:function(e,n){var i=this,r=i.touches;if(this._isMultiTouch()){switch(e){case _:e=C;break;case b:e=T;break;case y:e=S}u(n,{touches:r},t(r[0],r[1]))}return this.trigger(e,n)},press:function(e,t,n){this._apiCall("_start",e,t,n)},move:function(e,t){this._apiCall("_move",e,t)},end:function(e,t){this._apiCall("_end",e,t)},_isMultiTouch:function(){return this.touches.length>1},_maxTouchesReached:function(){return this.touches.length>=this._maxTouches},_disposeAll:function(){e.each(this.touches,function(){this.dispose()})},_isMoved:function(){return e.grep(this.touches,function(e){return e.isMoved()}).length},_select:function(e){(!this.allowSelection||this.trigger(m,{event:e}))&&i(e)},_start:function(t){var i,r,o=this,a=0,s=o.filter,l=n(t),d=l.length;if(!o._maxTouchesReached())for(E.current=null,o.currentTarget=t.currentTarget,o.stopPropagation&&t.stopPropagation();d>a&&!o._maxTouchesReached();a++)r=l[a],i=s?e(r.currentTarget):o.element,i.length&&(r=new A(o,i,r),o.touches.push(r),r.notifyInit(),o._isMultiTouch()&&o.notify("gesturestart",{}))},_move:function(e){this._eachTouch("move",e)},_end:function(e){this._eachTouch("end",e)},_eachTouch:function(e,t){var i,r,o,a,s=this,l={},d=n(t),c=s.touches;for(i=0;i<c.length;i++)r=c[i],l[r.id]=r;for(i=0;i<d.length;i++)o=d[i],a=l[o.id],a&&a[e](o)},_apiCall:function(t,n,i,r){this[t]({api:!0,pageX:n,pageY:i,target:r||this.element,stopPropagation:e.noop,preventDefault:e.noop})}});o.getTouches=n,o.touchDelta=t,o.UserEvents=E}(window.kendo.jQuery),function(e,t){function n(t,n){try{return e.contains(t,n)||t==n}catch(i){return!1}}function i(e){return E?m.elementFromPoint(e.x.screen,e.y.screen):m.elementFromPoint(e.x.client,e.y.client)}function r(e,t){return parseInt(e.css(t),10)||0}function o(e,t){return Math.min(Math.max(e,t.min),t.max)}function a(e,t){var n=x(e),i=n.left+r(e,"borderLeftWidth")+r(e,"paddingLeft"),o=n.top+r(e,"borderTopWidth")+r(e,"paddingTop"),a=i+e.width()-t.outerWidth(!0),s=o+e.height()-t.outerHeight(!0);return{x:{min:i,max:a},y:{min:o,max:s}}}function s(e,n,i){for(var r,o,a=0,s=n&&n.length,l=i&&i.length;e&&e.parentNode;){for(a=0;s>a;a++)if(r=n[a],r.element[0]===e)return{target:r,targetElement:e};for(a=0;l>a;a++)if(o=i[a],g.matchesSelector.call(e,o.options.filter))return{target:o,targetElement:e};e=e.parentNode}return t}var l,d,c,u,p,f,h=window.kendo,g=h.support,m=window.document,v=h.Class,_=h.ui.Widget,b=h.Observable,w=h.UserEvents,y=e.proxy,k=e.extend,x=h.getOffset,C={},T={},S={},D=g.mobileOS,A=D&&D.android,E=A&&"chrome"==D.browser,F="keyup",I="change",P="dragstart",B="drag",z="dragend",H="dragcancel",R="dragenter",M="dragleave",L="drop",O=b.extend({init:function(t,n){var i=this,r=t[0];i.capture=!1,e.each(h.eventMap.down.split(" "),function(){r.addEventListener(this,y(i._press,i),!0)}),e.each(h.eventMap.up.split(" "),function(){r.addEventListener(this,y(i._release,i),!0)}),b.fn.init.call(i),i.bind(["press","release"],n||{})},captureNext:function(){this.capture=!0},cancelCapture:function(){this.capture=!1},_press:function(e){var t=this;t.trigger("press"),t.capture&&e.preventDefault()},_release:function(e){var t=this;t.trigger("release"),t.capture&&(e.preventDefault(),t.cancelCapture())}}),N=b.extend({init:function(t){var n=this;b.fn.init.call(n),n.forcedEnabled=!1,e.extend(n,t),n.scale=1,n.horizontal?(n.measure="offsetWidth",n.scrollSize="scrollWidth",n.axis="x"):(n.measure="offsetHeight",n.scrollSize="scrollHeight",n.axis="y")},makeVirtual:function(){e.extend(this,{virtual:!0,forcedEnabled:!0,_virtualMin:1e3,_virtualMax:-1e3})},virtualSize:function(e,t){(this._virtualMin!==e||this._virtualMax!==t)&&(this._virtualMin=e,this._virtualMax=t,this.update())},outOfBounds:function(e){return e>this.max||e<this.min},forceEnabled:function(){this.forcedEnabled=!0},getSize:function(){return this.container[0][this.measure]},getTotal:function(){return this.element[0][this.scrollSize]},rescale:function(e){this.scale=e},update:function(e){var t=this,n=t.virtual?t._virtualMax:t.getTotal(),i=n*t.scale,r=t.getSize();t.max=t.virtual?-t._virtualMin:0,t.size=r,t.total=i,t.min=Math.min(t.max,r-i),t.minScale=r/n,t.centerOffset=(i-r)/2,t.enabled=t.forcedEnabled||i>r,e||t.trigger(I,t)}}),V=b.extend({init:function(e){var t=this,n=y(t.refresh,t);b.fn.init.call(t),t.x=new N(k({horizontal:!0},e)),t.y=new N(k({horizontal:!1},e)),t.forcedMinScale=e.minScale,t.bind(I,e),h.onResize(n)},rescale:function(e){this.x.rescale(e),this.y.rescale(e),this.refresh()},centerCoordinates:function(){return{x:Math.min(0,-this.x.centerOffset),y:Math.min(0,-this.y.centerOffset)}},refresh:function(){var e=this;e.x.update(),e.y.update(),e.enabled=e.x.enabled||e.y.enabled,e.minScale=e.forcedMinScale||Math.min(e.x.minScale,e.y.minScale),e.fitScale=Math.max(e.x.minScale,e.y.minScale),e.trigger(I)}}),U=b.extend({init:function(e){var t=this;k(t,e),b.fn.init.call(t)},dragMove:function(e){var t=this,n=t.dimension,i=t.axis,r=t.movable,o=r[i]+e;n.enabled&&((o<n.min&&0>e||o>n.max&&e>0)&&(e*=t.resistance),r.translateAxis(i,e),t.trigger(I,t))}}),W=v.extend({init:function(e){var t,n,i,r,o=this;k(o,{elastic:!0},e),i=o.elastic?.5:0,r=o.movable,o.x=t=new U({axis:"x",dimension:o.dimensions.x,resistance:i,movable:r}),o.y=n=new U({axis:"y",dimension:o.dimensions.y,resistance:i,movable:r}),o.userEvents.bind(["move","end","gesturestart","gesturechange"],{gesturestart:function(e){o.gesture=e},gesturechange:function(e){var i,a=o.gesture,s=a.center,l=e.center,d=e.distance/a.distance,c=o.dimensions.minScale;r.scale<=c&&1>d&&(d+=.8*(1-d)),i={x:(r.x-s.x)*d+l.x-r.x,y:(r.y-s.y)*d+l.y-r.y},r.scaleWith(d),t.dragMove(i.x),n.dragMove(i.y),o.dimensions.rescale(r.scale),o.gesture=e,e.preventDefault()},move:function(e){e.event.target.tagName.match(/textarea|input/i)||(t.dimension.enabled||n.dimension.enabled?(t.dragMove(e.x.delta),n.dragMove(e.y.delta),e.preventDefault()):e.touch.skip())},end:function(e){e.preventDefault()}})}}),j=g.transitions.prefix+"Transform";d=g.hasHW3D?function(e,t,n){return"translate3d("+e+"px,"+t+"px,0) scale("+n+")"}:function(e,t,n){return"translate("+e+"px,"+t+"px) scale("+n+")"},c=b.extend({init:function(t){var n=this;b.fn.init.call(n),n.element=e(t),n.element[0].style.webkitTransformOrigin="left top",n.x=0,n.y=0,n.scale=1,n._saveCoordinates(d(n.x,n.y,n.scale))},translateAxis:function(e,t){this[e]+=t,this.refresh()},scaleTo:function(e){this.scale=e,this.refresh()},scaleWith:function(e){this.scale*=e,this.refresh()},translate:function(e){this.x+=e.x,this.y+=e.y,this.refresh()},moveAxis:function(e,t){this[e]=t,this.refresh()},moveTo:function(e){k(this,e),this.refresh()},refresh:function(){var e=this,t=d(e.x,e.y,e.scale);t!=e.coordinates&&(e.element[0].style[j]=t,e._saveCoordinates(t),e.trigger(I))},_saveCoordinates:function(e){this.coordinates=e}}),u=_.extend({init:function(e,t){var n,i=this;_.fn.init.call(i,e,t),n=i.options.group,n in T?T[n].push(i):T[n]=[i]},events:[R,M,L],options:{name:"DropTarget",group:"default"},destroy:function(){var e,t=this.options.group,n=T[t]||S[t];if(n.length>1){for(_.fn.destroy.call(this),e=0;e<n.length;e++)if(n[e]==this){n.splice(e,1);break}}else u.destroyGroup(t)},_trigger:function(e,n){var i=this,r=C[i.options.group];return r?i.trigger(e,k({},n.event,{draggable:r,dropTarget:n.dropTarget})):t},_over:function(e){this._trigger(R,e)},_out:function(e){this._trigger(M,e)},_drop:function(e){var t=this,n=C[t.options.group];n&&(n.dropped=!t._trigger(L,e))}}),u.destroyGroup=function(e){var t,n=T[e]||S[e];if(n){for(t=0;t<n.length;t++)_.fn.destroy.call(n[t]);n.length=0,delete T[e],delete S[e]}},u._cache=T,p=u.extend({init:function(e,t){var n,i=this;_.fn.init.call(i,e,t),n=i.options.group,n in S?S[n].push(i):S[n]=[i]},options:{name:"DropTargetArea",group:"default",filter:null}}),f=_.extend({init:function(e,t){var n=this;_.fn.init.call(n,e,t),n.userEvents=new w(n.element,{global:!0,stopPropagation:!0,filter:n.options.filter,threshold:n.options.distance,start:y(n._start,n),move:y(n._drag,n),end:y(n._end,n),cancel:y(n._cancel,n)}),n._afterEndHandler=y(n._afterEnd,n),n.captureEscape=function(e){e.keyCode===h.keys.ESC&&(n._trigger(H,{event:e}),n.userEvents.cancel())}},events:[P,B,z,H],options:{name:"Draggable",distance:5,group:"default",cursorOffset:null,axis:null,container:null,dropped:!1},_updateHint:function(t){var n,i=this,r=i.options,a=i.boundaries,s=r.axis,l=i.options.cursorOffset;l?n={left:t.x.location+l.left,top:t.y.location+l.top}:(i.hintOffset.left+=t.x.delta,i.hintOffset.top+=t.y.delta,n=e.extend({},i.hintOffset)),a&&(n.top=o(n.top,a.y),n.left=o(n.left,a.x)),"x"===s?delete n.top:"y"===s&&delete n.left,i.hint.css(n)},_start:function(t){var n,i=this,r=i.options,o=r.container,s=r.hint;i.currentTarget=t.target,i.currentTargetOffset=x(i.currentTarget),s&&(i.hint&&i.hint.stop(!0,!0).remove(),i.hint=e.isFunction(s)?e(s.call(i,i.currentTarget)):s,n=x(i.currentTarget),i.hintOffset=n,i.hint.css({position:"absolute",zIndex:2e4,left:n.left,top:n.top}).appendTo(m.body)),C[r.group]=i,i.dropped=!1,o&&(i.boundaries=a(o,i.hint)),i._trigger(P,t)&&(i.userEvents.cancel(),i._afterEnd()),e(m).on(F,i.captureEscape)},_drag:function(n){var i=this;n.preventDefault(),i._withDropTarget(n,function(i,r){if(!i)return l&&(l._trigger(M,k(n,{dropTarget:e(l.targetElement)})),l=null),t;if(l){if(r===l.targetElement)return;l._trigger(M,k(n,{dropTarget:e(l.targetElement)}))}i._trigger(R,k(n,{dropTarget:e(r)})),l=k(i,{targetElement:r})}),i._trigger(B,n),i.hint&&i._updateHint(n)},_end:function(t){var n=this;n._withDropTarget(t,function(n,i){n&&(n._drop(k({},t,{dropTarget:e(i)})),l=null)}),n._trigger(z,t),n._cancel(t.event)},_cancel:function(){var e=this;e.hint&&!e.dropped?setTimeout(function(){e.hint.stop(!0,!0).animate(e.currentTargetOffset,"fast",e._afterEndHandler)},0):e._afterEnd()},_trigger:function(e,t){var n=this;return n.trigger(e,k({},t.event,{x:t.x,y:t.y,currentTarget:n.currentTarget,dropTarget:t.dropTarget}))},_withDropTarget:function(e,t){var r,o,a=this,l=a.options,d=T[l.group],c=S[l.group];(d&&d.length||c&&c.length)&&(r=i(e),a.hint&&n(a.hint[0],r)&&(a.hint.hide(),r=i(e),r||(r=i(e)),a.hint.show()),o=s(r,d,c),o?t(o.target,o.targetElement):t())},destroy:function(){var e=this;_.fn.destroy.call(e),e._afterEnd(),e.userEvents.destroy()},_afterEnd:function(){var t=this;t.hint&&t.hint.remove(),delete C[t.options.group],t.trigger("destroy"),e(m).off(F,t.captureEscape)}}),h.ui.plugin(u),h.ui.plugin(p),h.ui.plugin(f),h.TapCapture=O,h.containerBoundaries=a,k(h.ui,{Pane:W,PaneDimensions:V,Movable:c})}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.mobile,i=t.effects,r=n.ui,o=e.proxy,a=e.extend,s=r.Widget,l=t.Class,d=t.ui.Movable,c=t.ui.Pane,u=t.ui.PaneDimensions,p=i.Transition,f=i.Animation,h=Math.abs,g=500,m=.7,v=.96,_=10,b=55,w=.5,y="km-scroller-release",k="km-scroller-refresh",x="pull",C="change",T="resize",S="scroll",D=f.extend({init:function(e){var t=this;f.fn.init.call(t),a(t,e),t.userEvents.bind("gestureend",o(t.start,t)),t.tapCapture.bind("press",o(t.cancel,t))},done:function(){return this.dimensions.minScale-this.movable.scale<.01},tick:function(){var e=this.movable;e.scaleWith(1.1),this.dimensions.rescale(e.scale)},onEnd:function(){var e=this.movable;e.scaleTo(this.dimensions.minScale),this.dimensions.rescale(e.scale)}}),A=f.extend({init:function(e){var t=this;f.fn.init.call(t),a(t,e,{transition:new p({axis:e.axis,movable:e.movable,onEnd:function(){t._end()}})}),t.tapCapture.bind("press",function(){t.cancel()}),t.userEvents.bind("end",o(t.start,t)),t.userEvents.bind("gestureend",o(t.start,t)),t.userEvents.bind("tap",o(t.onEnd,t))},onCancel:function(){this.transition.cancel()},freeze:function(e){var t=this;t.cancel(),t._moveTo(e)},onEnd:function(){var e=this;e._outOfBounds()?e._snapBack():e._end()},done:function(){return h(this.velocity)<1},start:function(e){var t=this;t.dimension.enabled&&(t._outOfBounds()?t._snapBack():(t.velocity=Math.max(Math.min(e.touch[t.axis].velocity*_,b),-b),t.velocity&&(t.tapCapture.captureNext(),f.fn.start.call(t))))},tick:function(){var e=this,t=e.dimension,n=e._outOfBounds()?w:v,i=e.velocity*=n,r=e.movable[e.axis]+i;!e.elastic&&t.outOfBounds(r)&&(r=Math.max(Math.min(r,t.max),t.min),e.velocity=0),e.movable.moveAxis(e.axis,r)},_end:function(){this.tapCapture.cancelCapture(),this.end()},_outOfBounds:function(){return this.dimension.outOfBounds(this.movable[this.axis])},_snapBack:function(){var e=this,t=e.dimension,n=e.movable[e.axis]>t.max?t.max:t.min;e._moveTo(n)},_moveTo:function(e){this.transition.moveTo({location:e,duration:g,ease:p.easeOutExpo})}}),E=l.extend({init:function(t){var n=this,i="x"===t.axis,r=e('<div class="km-touch-scrollbar km-'+(i?"horizontal":"vertical")+'-scrollbar" />');a(n,t,{element:r,elementSize:0,movable:new d(r),scrollMovable:t.movable,size:i?"width":"height"}),n.scrollMovable.bind(C,o(n._move,n)),n.container.append(r)},_move:function(){var e=this,t=e.axis,n=e.dimension,i=n.size,r=e.scrollMovable,o=i/n.total,a=Math.round(-r[t]*o),s=Math.round(i*o);a+s>i?s=i-a:0>a&&(s+=a,a=0),e.elementSize!=s&&(e.element.css(e.size,s+"px"),e.elementSize=s),e.movable.moveAxis(t,a)},show:function(){this.element.css({opacity:m,visibility:"visible"})},hide:function(){this.element.css({opacity:0})}}),F=s.extend({init:function(n,i){var r,o,l,p,f,g,m,v,_=this;return s.fn.init.call(_,n,i),n=_.element,_._native=_.options.useNative&&t.support.hasNativeScrolling,_._native?(n.addClass("km-native-scroller").prepend('<div class="km-scroll-header"/>'),a(_,{scrollElement:n,fixedContainer:n.children().first()}),undefined):(n.css("overflow","hidden").addClass("km-scroll-wrapper").wrapInner('<div class="km-scroll-container"/>').prepend('<div class="km-scroll-header"/>'),r=n.children().eq(1),o=new t.TapCapture(n),l=new d(r),p=new u({element:r,container:n,forcedEnabled:_.options.zoom,change:function(){_.trigger(T)}}),f=this.options.avoidScrolling,g=new t.UserEvents(n,{allowSelection:!0,preventDragEvent:!0,captureUpIfMoved:!0,multiTouch:_.options.zoom,start:function(e){p.refresh();var t=h(e.x.velocity),n=h(e.y.velocity),i=2*t>=n,r=2*n>=t;!f(e)&&_.enabled&&(p.x.enabled&&i||p.y.enabled&&r)?g.capture():g.cancel()}}),m=new c({movable:l,dimensions:p,userEvents:g,elastic:_.options.elastic}),v=new D({movable:l,dimensions:p,userEvents:g,tapCapture:o}),l.bind(C,function(){_.scrollTop=-l.y,_.scrollLeft=-l.x,_.trigger(S,{scrollTop:_.scrollTop,scrollLeft:_.scrollLeft})}),a(_,{movable:l,dimensions:p,zoomSnapBack:v,userEvents:g,pane:m,tapCapture:o,pulled:!1,enabled:!0,scrollElement:r,scrollTop:0,scrollLeft:0,fixedContainer:n.children().first()}),_._initAxis("x"),_._initAxis("y"),p.refresh(),_.options.pullToRefresh&&_._initPullToRefresh(),t.onResize(e.proxy(_.reset,_)),undefined)},makeVirtual:function(){this.dimensions.y.makeVirtual()},virtualSize:function(e,t){this.dimensions.y.virtualSize(e,t)},height:function(){return this.dimensions.y.size},scrollHeight:function(){return this.scrollElement[0].scrollHeight},scrollWidth:function(){return this.scrollElement[0].scrollWidth},options:{name:"Scroller",zoom:!1,pullOffset:140,elastic:!0,useNative:!1,avoidScrolling:function(){return!1},pullToRefresh:!1,pullTemplate:"Pull to refresh",releaseTemplate:"Release to refresh",refreshTemplate:"Refreshing"},events:[x,S,T],setOptions:function(e){var t=this;s.fn.setOptions.call(t,e),e.pullToRefresh&&t._initPullToRefresh()},reset:function(){this._native?this.scrollElement.scrollTop(0):(this.movable.moveTo({x:0,y:0}),this._scale(1))},zoomOut:function(){var e=this.dimensions;e.refresh(),this._scale(e.fitScale),this.movable.moveTo(e.centerCoordinates())},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},scrollTo:function(e,t){this.dimensions.refresh(),this.movable.moveTo({x:e,y:t})},pullHandled:function(){var e=this;e.refreshHint.removeClass(k),e.hintContainer.html(e.pullTemplate({})),e.yinertia.onEnd(),e.xinertia.onEnd()},destroy:function(){s.fn.destroy.call(this),this.userEvents&&this.userEvents.destroy()},_scale:function(e){this.dimensions.rescale(e),this.movable.scaleTo(e)},_initPullToRefresh:function(){var e=this;e.dimensions.y.forceEnabled(),e.pullTemplate=t.template(e.options.pullTemplate),e.releaseTemplate=t.template(e.options.releaseTemplate),e.refreshTemplate=t.template(e.options.refreshTemplate),e.scrollElement.prepend('<span class="km-scroller-pull"><span class="km-icon"></span><span class="km-loading-left"></span><span class="km-loading-right"></span><span class="km-template">'+e.pullTemplate({})+"</span></span>"),e.refreshHint=e.scrollElement.children().first(),e.hintContainer=e.refreshHint.children(".km-template"),e.pane.y.bind("change",o(e._paneChange,e)),e.userEvents.bind("end",o(e._dragEnd,e))},_dragEnd:function(){var e=this;e.pulled&&(e.pulled=!1,e.refreshHint.removeClass(y).addClass(k),e.hintContainer.html(e.refreshTemplate({})),e.yinertia.freeze(e.options.pullOffset/2),e.trigger("pull"))},_paneChange:function(){var e=this;e.movable.y/w>e.options.pullOffset?e.pulled||(e.pulled=!0,e.refreshHint.removeClass(k).addClass(y),e.hintContainer.html(e.releaseTemplate({}))):e.pulled&&(e.pulled=!1,e.refreshHint.removeClass(y),e.hintContainer.html(e.pullTemplate({})))},_initAxis:function(e){var t=this,n=t.movable,i=t.dimensions[e],r=t.tapCapture,o=new E({axis:e,movable:n,dimension:i,container:t.element});t.pane[e].bind(C,function(){o.show()}),t[e+"inertia"]=new A({axis:e,movable:n,tapCapture:r,userEvents:t.userEvents,dimension:i,elastic:t.options.elastic,end:function(){o.hide(),t.trigger("scrollEnd",{axis:e,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft})}})}});r.plugin(F)}(window.kendo.jQuery),function(e){function t(e){return e.position().top+3}var n=window.kendo,i=n.ui.Widget,r=e.proxy,o=!1,a=".kendoGroupable",s=n.template('<div class="k-group-indicator" data-#=data.ns#field="${data.field}" data-#=data.ns#title="${data.title || ""}" data-#=data.ns#dir="${data.dir || "asc"}"><a href="\\#" class="k-link"><span class="k-icon k-si-arrow-${(data.dir || "asc") == "asc" ? "n" : "s"}">(sorted ${(data.dir || "asc") == "asc" ? "ascending": "descending"})</span>${data.title ? data.title: data.field}</a><a class="k-button k-button-icon k-button-bare"><span class="k-icon k-group-delete"></span></a></div>',{useWithBlock:!1}),l=function(t){return e('<div class="k-header k-drag-clue" />').css({width:t.width(),paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight"),lineHeight:t.height()+"px",paddingTop:t.css("paddingTop"),paddingBottom:t.css("paddingBottom")}).html(t.attr(n.attr("title"))||t.attr(n.attr("field"))).prepend('<span class="k-icon k-drag-status k-denied" />')},d=e('<div class="k-grouping-dropclue"/>'),c=/("|\%|'|\[|\]|\$|\.|\,|\:|\;|\+|\*|\&|\!|\#|\(|\)|<|>|\=|\?|\@|\^|\{|\}|\~|\/|\||`)/g,u=i.extend({init:function(s,c){var u,p,f,h=this,g=n.guid(),m=r(h._intializePositions,h),v=h._dropCuePositions=[];i.fn.init.call(h,s,c),o=n.support.isRtl(s),f=o?"right":"left",h.draggable=p=h.options.draggable||new n.ui.Draggable(h.element,{filter:h.options.draggableElements,hint:l,group:g}),u=h.groupContainer=e(h.options.groupContainer,h.element).kendoDropTarget({group:p.options.group,dragenter:function(e){h._canDrag(e.draggable.currentTarget)&&(e.draggable.hint.find(".k-drag-status").removeClass("k-denied").addClass("k-add"),d.css("top",t(u)).css(f,0).appendTo(u))},dragleave:function(e){e.draggable.hint.find(".k-drag-status").removeClass("k-add").addClass("k-denied"),d.remove()},drop:function(t){var i,r=t.draggable.currentTarget,a=r.attr(n.attr("field")),s=r.attr(n.attr("title")),l=h.indicator(a),c=h._dropCuePositions,u=c[c.length-1];(r.hasClass("k-group-indicator")||h._canDrag(r))&&(u?(i=h._dropCuePosition(n.getOffset(d).left+parseInt(u.element.css("marginLeft"),10)*(o?-1:1)+parseInt(u.element.css("marginRight"),10)),i&&h._canDrop(e(l),i.element,i.left)&&(i.before?i.element.before(l||h.buildIndicator(a,s)):i.element.after(l||h.buildIndicator(a,s)),h._change())):(h.groupContainer.append(h.buildIndicator(a,s)),h._change()))}}).kendoDraggable({filter:"div.k-group-indicator",hint:l,group:p.options.group,dragcancel:r(h._dragCancel,h),dragstart:function(e){var n=e.currentTarget,i=parseInt(n.css("marginLeft"),10),r=n.position(),a=o?r.left-i:r.left+n.outerWidth();m(),d.css({top:t(u),left:a}).appendTo(u),this.hint.find(".k-drag-status").removeClass("k-denied").addClass("k-add")},dragend:function(){h._dragEnd(this)},drag:r(h._drag,h)}).on("click"+a,".k-button",function(t){t.preventDefault(),h._removeIndicator(e(this).parent())}).on("click"+a,".k-link",function(t){var i=e(this).parent(),r=h.buildIndicator(i.attr(n.attr("field")),i.attr(n.attr("title")),"asc"==i.attr(n.attr("dir"))?"desc":"asc");i.before(r).remove(),h._change(),t.preventDefault()}),p.bind(["dragend","dragcancel","dragstart","drag"],{dragend:function(){h._dragEnd(this)},dragcancel:r(h._dragCancel,h),dragstart:function(e){var t,n,i;return h.options.allowDrag||h._canDrag(e.currentTarget)?(m(),v.length?(t=v[v.length-1].element,n=parseInt(t.css("marginRight"),10),i=t.position().left+t.outerWidth()+n):i=0,undefined):(e.preventDefault(),undefined)},drag:r(h._drag,h)}),h.dataSource=h.options.dataSource,h.dataSource&&(h._refreshHandler=r(h.refresh,h),h.dataSource.bind("change",h._refreshHandler))},refresh:function(){var t=this,i=t.dataSource;t.groupContainer.empty().append(e.map(i.group()||[],function(e){var i=e.field.replace(c,"\\$1"),r=t.element.find(t.options.filter).filter("["+n.attr("field")+"="+i+"]");return t.buildIndicator(e.field,r.attr(n.attr("title")),e.dir)}).join("")),t._invalidateGroupContainer()},destroy:function(){var e=this;i.fn.destroy.call(e),e.groupContainer.off(a).kendoDropTarget("destroy").kendoDraggable("destroy"),e.options.draggable||e.draggable.destroy(),e.dataSource&&e._refreshHandler&&e.dataSource.unbind("change",e._refreshHandler)},options:{name:"Groupable",filter:"th",draggableElements:"th",messages:{empty:"Drag a column header and drop it here to group by that column"}},indicator:function(t){var i=e(".k-group-indicator",this.groupContainer);return e.grep(i,function(i){return e(i).attr(n.attr("field"))===t})[0]},buildIndicator:function(e,t,i){return s({field:e.replace(/"/g,"'"),dir:i,title:t,ns:n.ns})},descriptors:function(){var t,i,r,o,a,s=this,l=e(".k-group-indicator",s.groupContainer);return t=s.element.find(s.options.filter).map(function(){var t=e(this),r=t.attr(n.attr("aggregates")),s=t.attr(n.attr("field"));if(r&&""!==r)for(i=r.split(","),r=[],o=0,a=i.length;a>o;o++)r.push({field:s,aggregate:i[o]});return r}).toArray(),e.map(l,function(i){return i=e(i),r=i.attr(n.attr("field")),{field:r,dir:i.attr(n.attr("dir")),aggregates:t||[]}})},_removeIndicator:function(e){var t=this;e.remove(),t._invalidateGroupContainer(),t._change()},_change:function(){var e=this;e.dataSource&&e.dataSource.group(e.descriptors())},_dropCuePosition:function(t){var n,i,r,a,s,l=this._dropCuePositions;if(d.is(":visible")&&0!==l.length)return t=Math.ceil(t),n=l[l.length-1],i=n.left,r=n.right,a=parseInt(n.element.css("marginLeft"),10),s=parseInt(n.element.css("marginRight"),10),t>=r&&!o||i>t&&o?t={left:n.element.position().left+(o?-a:n.element.outerWidth()+s),element:n.element,before:!1}:(t=e.grep(l,function(e){return e.left<=t&&t<=e.right||o&&t>e.right})[0],t&&(t={left:o?t.element.position().left+t.element.outerWidth()+s:t.element.position().left-a,element:t.element,before:!0})),t},_drag:function(e){var t=this._dropCuePosition(e.x.location);t&&d.css({left:t.left,right:"auto"})},_canDrag:function(e){var t=e.attr(n.attr("field"));return"false"!=e.attr(n.attr("groupable"))&&t&&(e.hasClass("k-group-indicator")||!this.indicator(t))},_canDrop:function(e,t,n){var i=e.next(),r=e[0]!==t[0]&&(!i[0]||t[0]!==i[0]||!o&&n>i.position().left||o&&n<i.position().left);return r},_dragEnd:function(t){var i=this,r=t.currentTarget.attr(n.attr("field")),o=i.indicator(r);t!==i.options.draggable&&!t.dropped&&o&&i._removeIndicator(e(o)),i._dragCancel()},_dragCancel:function(){d.remove(),this._dropCuePositions=[]},_intializePositions:function(){var t,i=this,r=e(".k-group-indicator",i.groupContainer);i._dropCuePositions=e.map(r,function(i){return i=e(i),t=n.getOffset(i).left,{left:parseInt(t,10),right:parseInt(t+i.outerWidth(),10),element:i}})},_invalidateGroupContainer:function(){var e=this.groupContainer;e.is(":empty")&&e.html(this.options.messages.empty)}});n.ui.plugin(u)}(window.kendo.jQuery),function(e){function t(t,n){t=e(t),n?t.find(".k-drag-status").removeClass("k-add").addClass("k-denied"):t.find(".k-drag-status").removeClass("k-denied").addClass("k-add")}var n=window.kendo,i=n.ui.Widget,r="change",o="k-reorderable",a=i.extend({init:function(a,s){var l,d=this,c=n.guid()+"-reorderable";i.fn.init.call(d,a,s),a=d.element.addClass(o),s=d.options,d.draggable=l=s.draggable||new n.ui.Draggable(a,{group:c,filter:s.filter,hint:s.hint}),d.reorderDropCue=e('<div class="k-reorder-cue"><div class="k-icon k-i-arrow-s"></div><div class="k-icon k-i-arrow-n"></div></div>'),a.find(l.options.filter).kendoDropTarget({group:l.options.group,dragenter:function(e){if(d._draggable){var i,r=this.element,o=r[0]===d._draggable[0];t(e.draggable.hint,o),o||(i=n.getOffset(r),d.reorderDropCue.css({height:r.outerHeight(),top:i.top,left:i.left+(r.index()>d._draggable.index()?r.outerWidth():0)}).appendTo(document.body))}},dragleave:function(e){t(e.draggable.hint,!0),d.reorderDropCue.remove()},drop:function(){if(d._draggable){var e,t=d._draggable[0],n=this.element[0];t!==n&&(e=a.find(l.options.filter),d.trigger(r,{element:d._draggable,oldIndex:e.index(t),newIndex:e.index(n)}))}}}),l.bind(["dragcancel","dragend","dragstart"],{dragcancel:function(){d.reorderDropCue.remove(),d._draggable=null},dragend:function(){d.reorderDropCue.remove(),d._draggable=null},dragstart:function(e){d._draggable=e.currentTarget}})},options:{name:"Reorderable",filter:"*"},events:[r],destroy:function(){var e=this;i.fn.destroy.call(e),e.draggable&&e.draggable.destroy(),n.destroy(e.element)}});n.ui.plugin(a)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui,r=i.Widget,o=e.proxy,a=e.isFunction,s=e.extend,l="horizontal",d="vertical",c="start",u="resize",p="resizeend",f=r.extend({init:function(e,t){var n=this;r.fn.init.call(n,e,t),n.orientation=n.options.orientation.toLowerCase()!=d?l:d,n._positionMouse=n.orientation==l?"x":"y",n._position=n.orientation==l?"left":"top",n._sizingDom=n.orientation==l?"outerWidth":"outerHeight",n.draggable=new i.Draggable(e,{distance:0,filter:t.handle,drag:o(n._resize,n),dragcancel:o(n._cancel,n),dragstart:o(n._start,n),dragend:o(n._stop,n)}),n.userEvents=n.draggable.userEvents
},events:[u,p,c],options:{name:"Resizable",orientation:l},_max:function(e){var n=this,i=n.hint?n.hint[n._sizingDom]():0,r=n.options.max;return a(r)?r(e):r!==t?n._initialElementPosition+r-i:r},_min:function(e){var n=this,i=n.options.min;return a(i)?i(e):i!==t?n._initialElementPosition+i:i},_start:function(t){var n=this,i=n.options.hint,r=e(t.currentTarget);n._initialElementPosition=r.position()[n._position],n._initialMousePosition=t[n._positionMouse].startLocation,i&&(n.hint=a(i)?e(i(r)):i,n.hint.css({position:"absolute"}).css(n._position,n._initialElementPosition).appendTo(n.element)),n.trigger(c,t),n._maxPosition=n._max(t),n._minPosition=n._min(t),e(document.body).css("cursor",r.css("cursor"))},_resize:function(n){var i,r=this,o=(e(n.currentTarget),r._maxPosition),a=r._minPosition,l=r._initialElementPosition+(n[r._positionMouse].location-r._initialMousePosition);i=a!==t?Math.max(a,l):l,r.position=i=o!==t?Math.min(o,i):i,r.hint&&r.hint.toggleClass(r.options.invalidClass||"",i==o||i==a).css(r._position,i),r.resizing=!0,r.trigger(u,s(n,{position:i}))},_stop:function(t){var n=this;n.hint&&n.hint.remove(),n.resizing=!1,n.trigger(p,s(t,{position:n.position})),e(document.body).css("cursor","")},_cancel:function(e){var n=this;n.hint&&(n.position=t,n.hint.css(n._position,n._initialElementPosition),n._stop(e))},destroy:function(){var e=this;r.fn.destroy.call(e),e.draggable&&e.draggable.destroy()},press:function(e){if(e){var t=e.position(),n=this;n.userEvents.press(t.left,t.top,e[0]),n.targetPosition=t,n.target=e}},move:function(e){var n=this,i=n._position,r=n.targetPosition,o=n.position;o===t&&(o=r[i]),r[i]=o+e,n.userEvents.move(r.left,r.top)},end:function(){this.userEvents.end(),this.target=this.position=t}});n.ui.plugin(f)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=e.proxy,r="dir",o="asc",a="single",s="field",l="desc",d=".kendoSortable",c=".k-link",u="aria-sort",p=n.ui.Widget,f=p.extend({init:function(e,t){var n,r=this;p.fn.init.call(r,e,t),r._refreshHandler=i(r.refresh,r),r.dataSource=r.options.dataSource.bind("change",r._refreshHandler),n=r.element.find(c),n[0]||(n=r.element.wrapInner('<a class="k-link" href="#"/>').find(c)),r.link=n,r.element.on("click"+d,i(r._click,r))},options:{name:"Sortable",mode:a,allowUnsort:!0,compare:null},destroy:function(){var e=this;p.fn.destroy.call(e),e.element.off(d),e.dataSource.unbind("change",e._refreshHandler)},refresh:function(){var t,i,a,d,c=this,p=c.dataSource.sort()||[],f=c.element,h=f.attr(n.attr(s));for(f.removeAttr(n.attr(r)),f.removeAttr(u),t=0,i=p.length;i>t;t++)a=p[t],h==a.field&&f.attr(n.attr(r),a.dir);d=f.attr(n.attr(r)),f.find(".k-i-arrow-n,.k-i-arrow-s").remove(),d===o?(e('<span class="k-icon k-i-arrow-n" />').appendTo(c.link),f.attr(u,"ascending")):d===l&&(e('<span class="k-icon k-i-arrow-s" />').appendTo(c.link),f.attr(u,"descending"))},_click:function(e){var i,d,c=this,u=c.element,p=u.attr(n.attr(s)),f=u.attr(n.attr(r)),h=c.options,g=c.options.compare,m=c.dataSource.sort()||[];if(f=f===o?l:f===l&&h.allowUnsort?t:o,h.mode===a)m=[{field:p,dir:f,compare:g}];else if("multiple"===h.mode){for(i=0,d=m.length;d>i;i++)if(m[i].field===p){m.splice(i,1);break}m.push({field:p,dir:f,compare:g})}e.preventDefault(),c.dataSource.sort(m)}});n.ui.plugin(f)}(window.kendo.jQuery),function(e){function t(e,t){var n=r.getOffset(e),i=t.left+t.width,o=t.top+t.height;return n.right=n.left+e.outerWidth(),n.bottom=n.top+e.outerHeight(),!(n.left>i||n.right<t.left||n.top>o||n.bottom<t.top)}function n(e,n,i,r){var o,a,s;for(o=0,a=e.length;a>o;o++)s=e.eq(o),t(s,i)?s.hasClass(d)?r&&n!==s[0]&&s.removeClass(d).addClass(h):s.hasClass(c)||s.hasClass(h)||s.addClass(c):s.hasClass(c)?s.removeClass(c):r&&s.hasClass(h)&&s.removeClass(h).addClass(d)}var i,r=window.kendo,o=r.ui.Widget,a=e.proxy,s=Math.abs,l="aria-selected",d="k-state-selected",c="k-state-selecting",u="k-selectable",p="change",f=".kendoSelectable",h="k-state-unselecting",g=!1;!function(e){!function(){e('<div class="parent"><span /></div>').on("click",">*",function(){g=!0}).find("span").click().end().off()}()}(e),i=o.extend({init:function(t,n){var i,s=this;o.fn.init.call(s,t,n),s._marquee=e("<div class='k-marquee'><div class='k-marquee-color'></div></div>"),s._lastActive=null,s.element.addClass(u),i=s.options.multiple,s.userEvents=new r.UserEvents(s.element,{global:!0,allowSelection:!0,filter:(g?"":"."+u+" ")+s.options.filter,tap:a(s._tap,s)}),i&&s.userEvents.bind("start",a(s._start,s)).bind("move",a(s._move,s)).bind("end",a(s._end,s)).bind("select",a(s._select,s))},events:[p],options:{name:"Selectable",filter:">*",multiple:!1},_tap:function(t){var n,i=e(t.target),r=this,o=t.event.ctrlKey||t.event.metaKey,a=r.options.multiple,s=a&&t.event.shiftKey,l=t.event.which,c=t.event.button;i.closest("."+u)[0]!==r.element[0]||l&&3==l||c&&2==c||(n=i.hasClass(d),a&&o||r.clear(),s?r.selectRange(r._firstSelectee(),i):(n&&o?(r._unselect(i),r._notify(p)):r.value(i),r._lastActive=r._downTarget=i))},_start:function(t){var n=this,i=e(t.target),r=i.hasClass(d),o=t.event.ctrlKey||t.event.metaKey;return n._downTarget=i,i.closest("."+u)[0]!==n.element[0]?(n.userEvents.cancel(),n._downTarget=null,undefined):(n._marquee.appendTo(document.body).css({left:t.x.client+1,top:t.y.client+1,width:0,height:0}),o||n.clear(),r&&(n._selectElement(i,!0),o&&i.addClass(h)),undefined)},_move:function(e){var t=this,i={left:e.x.startLocation>e.x.location?e.x.location:e.x.startLocation,top:e.y.startLocation>e.y.location?e.y.location:e.y.startLocation,width:s(e.x.initialDelta),height:s(e.y.initialDelta)},r=t.element.find(t.options.filter);t._marquee.css(i),n(r,t._downTarget[0],i,e.event.ctrlKey||e.event.metaKey),e.preventDefault()},_end:function(){var e=this;e._marquee.remove(),e._unselect(e.element.find(e.options.filter+"."+h)).removeClass(h),e.value(e.element.find(e.options.filter+"."+c)),e._lastActive=e._downTarget},value:function(e){var t=this,n=a(t._selectElement,t);return e?(e.each(function(){n(this)}),t._notify(p),undefined):t.element.find(t.options.filter+"."+d)},_firstSelectee:function(){var e,t=this;return null!==t._lastActive?t._lastActive:(e=t.value(),e.length>0?e[0]:t.element.find(t.options.filter))},_selectElement:function(t,n){var i=e(t),r=!n&&this._notify("select",{element:t});i.removeClass(c),r||(i.addClass(d),this.options.aria&&i.attr(l,!0))},_notify:function(e,t){return t=t||{},this.trigger(e,t)},_unselect:function(e){return e.removeClass(d),this.options.aria&&e.attr(l,!1),e},_select:function(t){e(t.event.target).is("input,a,textarea,.k-multiselect-wrap")?(this.userEvents.cancel(),this._downTarget=null):t.preventDefault()},clear:function(){var e=this.element.find(this.options.filter+"."+d);this._unselect(e)},selectRange:function(t,n){var i,r,o,s,l=this,c=!1,u=l.element.find(l.options.filter),f=a(l._selectElement,l);for(t=e(t)[0],n=e(n)[0],i=0,r=u.length;r>i;i++)s=u[i],c?(f(s),c=s!==n):s===t?(c=t!==n,f(s)):s===n?(o=t,t=n,n=o,c=!0,f(s)):e(s).removeClass(d);l._notify(p)},destroy:function(){var e=this;o.fn.destroy.call(e),e.element.off(f),e.userEvents.destroy()}}),r.ui.plugin(i)}(window.kendo.jQuery),function(e,t){function n(e,t,n,i){return e({idx:t,text:n,ns:d.ns,numeric:i})}function i(e,t){return k({className:e.substring(1),text:t})}function r(e,t,n,i){e.find(t).parent().attr(d.attr("page"),n).attr("tabindex",-1).toggleClass("k-state-disabled",i)}function o(e,t){r(e,f,1,1>=t)}function a(e,t){r(e,g,Math.max(1,t-1),1>=t)}function s(e,t,n){r(e,m,Math.min(n,t+1),t>=n)}function l(e,t,n){r(e,h,n,t>=n)}var d=window.kendo,c=d.ui,u=c.Widget,p=e.proxy,f=".k-i-seek-w",h=".k-i-seek-e",g=".k-i-arrow-w",m=".k-i-arrow-e",v="change",_=".kendoPager",b="click",w="keydown",y="disabled",k=d.template('<a href="\\#" title="#=text#" class="k-link"><span class="k-icon #= className #">#=text#</span></a>'),x=u.extend({init:function(t,n){var r,c,y=this;u.fn.init.call(y,t,n),n=y.options,y.dataSource=d.data.DataSource.create(n.dataSource),y.linkTemplate=d.template(y.options.linkTemplate),y.selectTemplate=d.template(y.options.selectTemplate),r=y.page(),c=y.totalPages(),y._refreshHandler=p(y.refresh,y),y.dataSource.bind(v,y._refreshHandler),n.previousNext&&(y.element.find(f).length||(y.element.append(i(f,n.messages.first)),o(y.element,r,c)),y.element.find(g).length||(y.element.append(i(g,n.messages.previous)),a(y.element,r,c))),n.numeric&&(y.list=y.element.find(".k-pager-numbers"),y.list.length||(y.list=e('<ul class="k-pager-numbers k-reset" />').appendTo(y.element))),n.input&&(y.element.find(".k-pager-input").length||y.element.append('<span class="k-pager-input k-label">'+n.messages.page+'<input class="k-textbox">'+d.format(n.messages.of,c)+"</span>"),y.element.on(w+_,".k-pager-input input",p(y._keydown,y))),n.previousNext&&(y.element.find(m).length||(y.element.append(i(m,n.messages.next)),s(y.element,r,c)),y.element.find(h).length||(y.element.append(i(h,n.messages.last)),l(y.element,r,c))),n.pageSizes&&(y.element.find(".k-pager-sizes").length||e('<span class="k-pager-sizes k-label"><select/>'+n.messages.itemsPerPage+"</span>").appendTo(y.element).find("select").html(e.map(e.isArray(n.pageSizes)?n.pageSizes:[5,10,20],function(e){return"<option>"+e+"</option>"}).join("")).end().appendTo(y.element),y.element.find(".k-pager-sizes select").val(y.pageSize()),d.ui.DropDownList&&y.element.find(".k-pager-sizes select").show().kendoDropDownList(),y.element.on(v+_,".k-pager-sizes select",p(y._change,y))),n.refresh&&(y.element.find(".k-pager-refresh").length||y.element.append('<a href="#" class="k-pager-refresh k-link"  title="'+n.messages.refresh+'"><span class="k-icon k-i-refresh">'+n.messages.refresh+"</span></a>"),y.element.on(b+_,".k-pager-refresh",p(y._refreshClick,y))),n.info&&(y.element.find(".k-pager-info").length||y.element.append('<span class="k-pager-info k-label" />')),y.element.on(b+_,"a",p(y._click,y)).addClass("k-pager-wrap k-widget"),n.autoBind&&y.refresh(),d.notify(y)},destroy:function(){var e=this;u.fn.destroy.call(e),e.element.off(_),e.dataSource.unbind(v,e._refreshHandler)},events:[v],options:{name:"Pager",selectTemplate:'<li><span class="k-state-selected">#=text#</span></li>',linkTemplate:'<li><a tabindex="-1" href="\\#" class="k-link" data-#=ns#page="#=idx#">#=text#</a></li>',buttonCount:10,autoBind:!0,numeric:!0,info:!0,input:!1,previousNext:!0,pageSizes:!1,refresh:!1,messages:{display:"{0} - {1} of {2} items",empty:"No items to display",page:"Page",of:"of {0}",itemsPerPage:"items per page",first:"Go to the first page",previous:"Go to the previous page",next:"Go to the next page",last:"Go to the last page",refresh:"Refresh"}},setDataSource:function(e){var t=this;t.dataSource.unbind(v,t._refreshHandler),t.dataSource=t.options.dataSource=e,e.bind(v,t._refreshHandler),t.options.autoBind&&e.fetch()},refresh:function(e){var t,i,r,c=this,u=1,p="",f=c.page(),h=c.options,g=c.pageSize(),m=c.dataSource.total(),v=c.totalPages(),_=c.linkTemplate,b=h.buttonCount;if(!e||"itemchange"!=e.action){if(h.numeric){for(f>b&&(r=f%b,u=0===r?f-b+1:f-r+1),i=Math.min(u+b-1,v),u>1&&(p+=n(_,u-1,"...",!1)),t=u;i>=t;t++)p+=n(t==f?c.selectTemplate:_,t,t,!0);v>i&&(p+=n(_,t,"...",!1)),""===p&&(p=c.selectTemplate({text:0})),c.list.html(p)}h.info&&(p=m>0?d.format(h.messages.display,(f-1)*g+1,Math.min(f*g,m),m):h.messages.empty,c.element.find(".k-pager-info").html(p)),h.input&&c.element.find(".k-pager-input").html(c.options.messages.page+'<input class="k-textbox">'+d.format(h.messages.of,v)).find("input").val(f).attr(y,1>m).toggleClass("k-state-disabled",1>m),h.previousNext&&(o(c.element,f,v),a(c.element,f,v),s(c.element,f,v),l(c.element,f,v)),h.pageSizes&&c.element.find(".k-pager-sizes select").val(g).filter("["+d.attr("role")+"=dropdownlist]").kendoDropDownList("value",g).kendoDropDownList("text",g)}},_keydown:function(e){if(e.keyCode===d.keys.ENTER){var t=this.element.find(".k-pager-input").find("input"),n=parseInt(t.val(),10);(isNaN(n)||1>n||n>this.totalPages())&&(n=this.page()),t.val(n),this.page(n)}},_refreshClick:function(e){e.preventDefault(),this.dataSource.read()},_change:function(e){var t=parseInt(e.currentTarget.value,10);isNaN(t)||this.dataSource.pageSize(t)},_click:function(t){var n=e(t.currentTarget);t.preventDefault(),n.is(".k-state-disabled")||this.page(n.attr(d.attr("page")))},totalPages:function(){return Math.ceil((this.dataSource.total()||0)/this.pageSize())},pageSize:function(){return this.dataSource.pageSize()||this.dataSource.total()},page:function(e){return e===t?this.dataSource.total()>0?this.dataSource.page():0:(this.dataSource.page(e),this.trigger(v,{index:e}),t)}});c.plugin(x)}(window.kendo.jQuery),function(e){function t(t,n){return t===n||e.contains(t,n)}var n=window.kendo,i=n.ui,r=i.Widget,o=n.support,a=n.getOffset,s=n._activeElement,l="open",d="close",c="deactivate",u="activate",p="center",f="left",h="right",g="top",m="bottom",v="absolute",_="hidden",b="body",w="location",y="position",k="visible",x="effects",C="k-state-active",T="k-state-border",S=/k-state-border-(\w+)/,D=".k-picker-wrap, .k-dropdown-wrap, .k-link",A="down",E=e(window),F=e(document.documentElement),I="resize scroll",P=o.transitions.css,B=P+"transform",z=e.extend,H=".kendoPopup",R=["font-family","font-size","font-stretch","font-style","font-weight","line-height"],M=r.extend({init:function(t,i){var o,a=this;i=i||{},i.isRtl&&(i.origin=i.origin||m+" "+h,i.position=i.position||g+" "+h),r.fn.init.call(a,t,i),t=a.element,i=a.options,a.collisions=i.collision?i.collision.split(" "):[],1===a.collisions.length&&a.collisions.push(a.collisions[0]),o=e(a.options.anchor).closest(".k-popup,.k-group").filter(":not([class^=km-])"),i.appendTo=e(e(i.appendTo)[0]||o[0]||b),a.element.hide().addClass("k-popup k-group k-reset").toggleClass("k-rtl",!!i.isRtl).css({position:v}).appendTo(i.appendTo).on("mouseenter"+H,function(){a._hovered=!0}).on("mouseleave"+H,function(){a._hovered=!1}),a.wrapper=e(),i.animation===!1&&(i.animation={open:{effects:{}},close:{hide:!0,effects:{}}}),z(i.animation.open,{complete:function(){a.wrapper.css({overflow:k}),a.trigger(u)}}),z(i.animation.close,{complete:function(){a.wrapper.hide();var r,o,s=a.wrapper.data(w),l=e(i.anchor);s&&a.wrapper.css(s),i.anchor!=b&&(r=(l[0].className.match(S)||["","down"])[1],o=T+"-"+r,l.removeClass(o).children(D).removeClass(C).removeClass(o),t.removeClass(T+"-"+n.directions[r].reverse)),a._closing=!1,a.trigger(c)}}),a._mousedownProxy=function(e){a._mousedown(e)},a._resizeProxy=function(e){a._resize(e)},i.toggleTarget&&e(i.toggleTarget).on(i.toggleEvent+H,e.proxy(a.toggle,a))},events:[l,u,d,c],options:{name:"Popup",toggleEvent:"click",origin:m+" "+f,position:g+" "+f,anchor:b,collision:"flip fit",viewport:window,copyAnchorStyles:!0,modal:!1,animation:{open:{effects:"slideIn:down",transition:!0,duration:200},close:{duration:100,hide:!0}}},destroy:function(){var t,i=this,o=i.options,a=i.element.off(H);r.fn.destroy.call(i),o.toggleTarget&&e(o.toggleTarget).off(H),o.modal||(F.unbind(A,i._mousedownProxy),E.unbind(I,i._resizeProxy)),o.appendTo[0]===document.body&&(t=a.parent(".k-animation-container"),t[0]?t.remove():a.remove()),n.destroy(i.element.children())},open:function(t,i){var r,a,s,d=this,c={isFixed:!isNaN(parseInt(i,10)),x:t,y:i},u=d.element,p=d.options,f="down",h=e(p.anchor);if(!d.visible()){if(p.copyAnchorStyles&&u.css(n.getComputedStyles(h[0],R)),u.data("animating")||d.trigger(l))return;p.modal||(F.unbind(A,d._mousedownProxy).bind(A,d._mousedownProxy),o.mobileOS.ios||o.mobileOS.android||E.unbind(I,d._resizeProxy).bind(I,d._resizeProxy)),d.wrapper=a=n.wrap(u).css({overflow:_,display:"block",position:v}),o.mobileOS.android&&a.add(h).css(B,"translatez(0)"),a.css(y),e(p.appendTo)[0]==document.body&&a.css(g,"-10000px"),r=z(!0,{},p.animation.open),d.flipped=d._position(c),r.effects=n.parseEffects(r.effects,d.flipped),f=r.effects.slideIn?r.effects.slideIn.direction:f,p.anchor!=b&&(s=T+"-"+f,u.addClass(T+"-"+n.directions[f].reverse),h.addClass(s).children(D).addClass(C).addClass(s)),u.data(x,r.effects).kendoStop(!0).kendoAnimate(r)}},toggle:function(){var e=this;e[e.visible()?d:l]()},visible:function(){return this.element.is(":"+k)},close:function(){var t,i,r,o,a=this,s=a.options;if(a.visible()){if(t=a.wrapper[0]?a.wrapper:n.wrap(a.element).hide(),a._closing||a.trigger(d))return;a.element.find(".k-popup").each(function(){var t=e(this),n=t.data("kendoPopup");n&&n.close()}),F.unbind(A,a._mousedownProxy),E.unbind(I,a._resizeProxy),i=z(!0,{},s.animation.close),r=a.element.data(x),o=i.effects,!o&&!n.size(o)&&r&&n.size(r)&&(i.effects=r,i.reverse=!0),a._closing=!0,a.element.kendoStop(!0),t.css({overflow:_}),a.element.kendoAnimate(i)}},_resize:function(e){var n=this;"resize"===e.type?(clearTimeout(n._resizeTimeout),n._resizeTimeout=setTimeout(function(){n._position(),n._resizeTimeout=null},50)):n._hovered||t(n.element[0],s())||n.close()},_mousedown:function(i){var r=this,o=r.element[0],a=r.options,s=e(a.anchor)[0],l=a.toggleTarget,d=n.eventTarget(i),c=e(d).closest(".k-popup"),u=c.parent().parent(".km-shim").length;c=c[0],(u||!c||c===r.element[0])&&"popover"!==e(i.target).closest("a").data("rel")&&(t(o,d)||t(s,d)||l&&t(e(l)[0],d)||r.close())},_fit:function(e,t,n){var i=0;return e+t>n&&(i=n-(e+t)),0>e&&(i=-e),i},_flip:function(e,t,n,i,r,o,a){var s=0;return a=a||t,o!==r&&o!==p&&r!==p&&(e+a>i&&(s+=-(n+t)),0>e+s&&(s+=n+t)),s},_position:function(t){var n,i,r,s,l,d,c,u,p,f=this,h=f.element.css(y,""),g=f.wrapper,m=f.options,_=e(m.viewport),b=e(_).offset(),k=e(m.anchor),x=m.origin.toLowerCase().split(" "),C=m.position.toLowerCase().split(" "),T=f.collisions,S=o.zoomLevel(),D=10002,A=0,E=k.parents().filter(g.siblings());if(E[0])if(i=Number(e(E).css("zIndex")))D=i+1;else for(n=k.parentsUntil(E),r=n.length;r>A;A++)i=Number(e(n[A]).css("zIndex")),i&&i>D&&(D=i+1);return g.css("zIndex",D),t&&t.isFixed?g.css({left:t.x,top:t.y}):g.css(f._align(x,C)),s=a(g,y,k[0]===g.offsetParent()[0]),l=a(g),d=k.offsetParent().parent(".k-animation-container,.k-popup,.k-group"),d.length&&(s=a(g,y,!0),l=a(g)),_[0]===window?(l.top-=window.pageYOffset||document.documentElement.scrollTop||0,l.left-=window.pageXOffset||document.documentElement.scrollLeft||0):(l.top-=b.top,l.left-=b.left),f.wrapper.data(w)||g.data(w,z({},s)),c=z({},l),u=z({},s),"fit"===T[0]&&(u.top+=f._fit(c.top,g.outerHeight(),_.height()/S)),"fit"===T[1]&&(u.left+=f._fit(c.left,g.outerWidth(),_.width()/S)),p=z({},u),"flip"===T[0]&&(u.top+=f._flip(c.top,h.outerHeight(),k.outerHeight(),_.height()/S,x[0],C[0],g.outerHeight())),"flip"===T[1]&&(u.left+=f._flip(c.left,h.outerWidth(),k.outerWidth(),_.width()/S,x[1],C[1],g.outerWidth())),h.css(y,v),g.css(u),u.left!=p.left||u.top!=p.top},_align:function(t,n){var i,r=this,o=r.wrapper,s=e(r.options.anchor),l=t[0],d=t[1],c=n[0],u=n[1],f=a(s),g=e(r.options.appendTo),v=o.outerWidth(),_=o.outerHeight(),b=s.outerWidth(),w=s.outerHeight(),y=f.top,k=f.left,x=Math.round;return g[0]!=document.body&&(i=a(g),y-=i.top,k-=i.left),l===m&&(y+=w),l===p&&(y+=x(w/2)),c===m&&(y-=_),c===p&&(y-=x(_/2)),d===h&&(k+=b),d===p&&(k+=x(b/2)),u===h&&(k-=v),u===p&&(k-=x(v/2)),{top:y,left:k}}});i.plugin(M)}(window.kendo.jQuery),function(e){function t(e){for(;e.length;)n(e),e=e.parent()}function n(e){var t=e.data(o.ns+"title");t&&(e.attr("title",t),e.removeData(o.ns+"title"))}function i(e){var t=e.attr("title");t&&(e.data(o.ns+"title",t),e.attr("title",""))}function r(e){for(;e.length&&!e.is("body");)i(e),e=e.parent()}var o=window.kendo,a=o.ui.Widget,s=o.ui.Popup,l=e.isFunction,d=e.isPlainObject,c=e.extend,u=e.proxy,p=e(document),f=o.isLocalUrl,h="_tt_active",g="aria-describedby",m="show",v="hide",_="error",b="contentLoad",w="requestStart",y="k-content-frame",k='<div role="tooltip" class="k-widget k-tooltip#if (!autoHide) {# k-tooltip-closable#}#">#if (!autoHide) {# <div class="k-tooltip-button"><a href="\\#" class="k-icon k-i-close">close</a></div> #}#<div class="k-tooltip-content"></div>#if (callout){ #<div class="k-callout k-callout-#=dir#"></div>#}#</div>',x=o.template("<iframe frameborder='0' class='"+y+"' "+"src='#= content.url #'>"+"This page requires frames in order to show content"+"</iframe>"),C=".kendoTooltip",T={bottom:{origin:"bottom center",position:"top center"},top:{origin:"top center",position:"bottom center"},left:{origin:"center left",position:"center right",collision:"fit flip"},right:{origin:"center right",position:"center left",collision:"fit flip"},center:{position:"center center",origin:"center center"}},S={top:"bottom",bottom:"top",left:"right",right:"left",center:"center"},D={bottom:"n",top:"s",left:"e",right:"w",center:"n"},A={horizontal:{offset:"top",size:"outerHeight"},vertical:{offset:"left",size:"outerWidth"}},E=function(e){return e.target.data(o.ns+"title")},F=a.extend({init:function(e,t){var n,i=this;a.fn.init.call(i,e,t),n=i.options.position.match(/left|right/)?"horizontal":"vertical",i.dimensions=A[n],i._documentKeyDownHandler=u(i._documentKeyDown,i),i.element.on(i.options.showOn+C,i.options.filter,u(i._showOn,i)).on("mouseenter"+C,i.options.filter,u(i._mouseenter,i)),this.options.autoHide&&i.element.on("mouseleave"+C,i.options.filter,u(i._mouseleave,i))},options:{name:"Tooltip",filter:"",content:E,showAfter:100,callout:!0,position:"bottom",showOn:"mouseenter",autoHide:!0,width:null,height:null,animation:{open:{effects:"fade:in",duration:0},close:{effects:"fade:out",duration:40,hide:!0}}},events:[m,v,b,_,w],_mouseenter:function(t){r(e(t.currentTarget))},_showOn:function(t){var n=this;n.options.showOn&&n.options.showOn.match(/click|focus/)?n._show(e(t.currentTarget)):(clearTimeout(n.timeout),n.timeout=setTimeout(function(){n._show(e(t.currentTarget))},n.options.showAfter))},_appendContent:function(e){var t,n=this,i=n.options.content,r=n.content,a=n.options.iframe;d(i)&&i.url?("iframe"in n.options||(a=!f(i.url)),n.trigger(w,{options:i,target:e}),a?(r.hide(),t=r.find("."+y)[0],t?t.src=i.url||t.src:r.html(x({content:i})),r.find("."+y).off("load"+C).on("load"+C,function(){n.trigger(b),r.show()})):(r.empty(),o.ui.progress(r,!0),n._ajaxRequest(i))):i&&l(i)?(i=i({target:e}),n.content.html(i||"")):n.content.html(i)},_ajaxRequest:function(e){var t=this;jQuery.ajax(c({type:"GET",dataType:"html",cache:!1,error:function(e,n){o.ui.progress(t.content,!1),t.trigger(_,{status:n,xhr:e})},success:u(function(e){o.ui.progress(t.content,!1),t.content.html(e),t.trigger(b)},t)},e))},_documentKeyDown:function(e){e.keyCode===o.keys.ESC&&this.hide()},refresh:function(){var e=this,t=e.popup;t&&t.options.anchor&&e._appendContent(t.options.anchor)},hide:function(){this.popup&&this.popup.close()},show:function(e){r(e),this._show(e)},_show:function(e){var n=this,i=n.target();n.popup||n._initPopup(),i&&i[0]!=e[0]&&(n.popup.close(),n.popup.element.kendoStop(!0,!0)),i&&i[0]==e[0]||(n._appendContent(e),n.popup.options.anchor=e),n.popup.one("deactivate",function(){t(e),e.removeAttr(g),this.element.removeAttr("id").attr("aria-hidden",!0),p.off("keydown"+C,n._documentKeyDownHandler)}),n.popup.open()},_initPopup:function(){var t=this,n=t.options,i=e(o.template(k)({callout:n.callout&&"center"!==n.position,dir:D[n.position],autoHide:n.autoHide}));t.popup=new s(i,c({activate:function(){var e=this.options.anchor,i=e[0].id||t.element[0].id;i&&(e.attr(g,i+h),this.element.attr("id",i+h)),n.callout&&t._positionCallout(),this.element.removeAttr("aria-hidden"),p.on("keydown"+C,t._documentKeyDownHandler),t.trigger(m)},close:function(){t.trigger(v)},copyAnchorStyles:!1,animation:n.animation},T[n.position])),i.css({width:n.width,height:n.height}),t.content=i.find(".k-tooltip-content"),t.arrow=i.find(".k-callout"),n.autoHide?i.on("mouseleave"+C,u(t._mouseleave,t)):i.on("click"+C,".k-tooltip-button",u(t._closeButtonClick,t))},_closeButtonClick:function(e){e.preventDefault(),this.hide()},_mouseleave:function(n){if(this.popup){var i=e(n.currentTarget),r=i.offset(),o=n.pageX,a=n.pageY;if(r.right=r.left+i.outerWidth(),r.bottom=r.top+i.outerHeight(),o>r.left&&o<r.right&&a>r.top&&a<r.bottom)return;this.popup.close()}else t(e(n.currentTarget));clearTimeout(this.timeout)},_positionCallout:function(){var t=this,n=t.options.position,i=t.dimensions,r=i.offset,o=t.popup,a=o.options.anchor,s=e(a).offset(),l=parseInt(t.arrow.css("border-top-width"),10),d=e(o.element).offset(),c=D[o.flipped?S[n]:n],u=s[r]-d[r]+e(a)[i.size]()/2-l;t.arrow.removeClass("k-callout-n k-callout-s k-callout-w k-callout-e").addClass("k-callout-"+c).css(r,u)},target:function(){return this.popup?this.popup.options.anchor:null},destroy:function(){var e=this.popup;e&&(e.element.off(C),e.destroy()),this.element.off(C),p.off("keydown"+C,this._documentKeyDownHandler),a.fn.destroy.call(this)}});o.ui.plugin(F)}(window.kendo.jQuery),function(e,t){function n(t,i){t.filters&&(t.filters=e.grep(t.filters,function(e){return n(e,i),e.filters?e.filters.length:e.field!=i}))}var i=window.kendo,r=i.ui,o=r.Widget,a=i.keys,s=i.support,l=i.htmlEncode,d=i._activeElement,c="id",u="li",p="change",f="character",h="k-state-focused",g="k-state-hover",m="k-loading",v="open",_="close",b="select",w="selected",y="progress",k="requestEnd",x="width",C=e.extend,T=e.proxy,S=s.browser,D=S.msie&&S.version<9,A=/"/g,E={ComboBox:"DropDownList",DropDownList:"ComboBox"},F=o.extend({init:function(t,n){var i,r=this,a=r.ns;o.fn.init.call(r,t,n),t=r.element,r._isSelect=t.is(b),r._template(),r.ul=e('<ul unselectable="on" class="k-list k-reset"/>').css({overflow:s.kineticScrollNeeded?"":"auto"}).on("mouseenter"+a,u,function(){e(this).addClass(g)}).on("mouseleave"+a,u,function(){e(this).removeClass(g)}).on("click"+a,u,T(r._click,r)).attr({tabIndex:-1,role:"listbox","aria-hidden":!0}),r.list=e("<div class='k-list-container'/>").append(r.ul).on("mousedown"+a,function(e){e.preventDefault()}),i=t.attr(c),i&&(r.list.attr(c,i+"-list"),r.ul.attr(c,i+"_listbox"),r._optionID=i+"_option_selected"),r._accessors(),r._initValue()},options:{valuePrimitive:!1},setOptions:function(e){o.fn.setOptions.call(this,e),e&&e.enable!==t&&(e.enabled=e.enable)},focus:function(){this._focused.focus()},readonly:function(e){this._editable({readonly:e===t?!0:e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t?!0:e)})},_filterSource:function(e){var t=this,i=t.options,r=t.dataSource,o=r.filter()||{};n(o,i.dataTextField),e&&(o=o.filters||[],o.push(e)),r.filter(o)},_initValue:function(){var e=this,t=e.options.value;t?e.element.val(t):t=e.element.val(),e._old=t},_ignoreCase:function(){var e,t=this,n=t.dataSource.reader.model;n&&n.fields&&(e=n.fields[t.options.dataTextField],e&&e.type&&"string"!==e.type&&(t.options.ignoreCase=!1))},items:function(){return this.ul[0].children},current:function(e){var n=this,i=n._optionID;return e===t?n._current:(n._current&&(n._current.removeClass(h).removeAttr("aria-selected").removeAttr(c),n._focused.removeAttr("aria-activedescendant")),e&&(e.addClass(h),n._scroll(e),i&&(e.attr("id",i),n._focused.attr("aria-activedescendant",i))),n._current=e,t)},destroy:function(){var e=this,t=e.ns;o.fn.destroy.call(e),e._unbindDataSource(),e.ul.off(t),e.list.off(t),e.popup.destroy(),e._form&&e._form.off("reset",e._resetHandler)},dataItem:function(e){var n=this;return e===t&&(e=n.selectedIndex),n._data()[e]},_accessors:function(){var e=this,t=e.element,n=e.options,r=i.getter,o=t.attr(i.attr("text-field")),a=t.attr(i.attr("value-field"));o&&(n.dataTextField=o),a&&(n.dataValueField=a),e._text=r(n.dataTextField),e._value=r(n.dataValueField)},_aria:function(e){var n=this,i=n.options,r=n._focused;i.suggest!==t&&r.attr("aria-autocomplete",i.suggest?"both":"list"),e=e?e+" "+n.ul[0].id:n.ul[0].id,r.attr("aria-owns",e),n.ul.attr("aria-live",i.filter&&"none"!==i.filter?"polite":"off")},_blur:function(){var e=this;e._change(),e.close()},_change:function(){var e,n=this,i=n.selectedIndex,r=n.options.value,o=n.value();n._isSelect&&!n._bound&&r&&(o=r),o!==n._old?e=!0:i!==t&&i!==n._oldIndex&&(e=!0),e&&(n._old=o,n._oldIndex=i,n.trigger(p),n.element.trigger(p))},_click:function(t){t.isDefaultPrevented()||this._accept(e(t.currentTarget))},_data:function(){return this.dataSource.view()},_enable:function(){var e=this,n=e.options,i=e.element.is("[disabled]");n.enable!==t&&(n.enabled=n.enable),!n.enabled||i?e.enable(!1):e.readonly(e.element.is("[readonly]"))},_focus:function(e){var n=this;return n.popup.visible()&&e&&n.trigger(b,{item:e})?(n.close(),t):(n._select(e),n._triggerCascade(),n._blur(),t)},_index:function(e){var t,n,i=this,r=i._data();for(t=0,n=r.length;n>t;t++)if(i._dataValue(r[t])==e)return t;return-1},_dataValue:function(e){var n=this._value(e);return n===t&&(n=this._text(e)),n},_height:function(e){if(e){var t=this,n=t.list,i=t.popup.visible(),r=t.options.height;n=n.add(n.parent(".k-animation-container")).show().height(t.ul[0].scrollHeight>r?r:"auto"),i||n.hide()}},_adjustListWidth:function(){var e,t,n=this.list,i=n[0].style.width,r=this.wrapper;if(n.data(x)||!i)return e=window.getComputedStyle?window.getComputedStyle(r[0],null):0,t=e?parseFloat(e.width):r.outerWidth(),e&&(S.mozilla||S.msie)&&(t+=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth)),i=t-(n.outerWidth()-n.width()),n.css({fontFamily:r.css("font-family"),width:i}).data(x,i),!0},_popup:function(){var e=this,t=e.list,n=e._focused,o=e.options,a=e.wrapper;e.popup=new r.Popup(t,C({},o.popup,{anchor:a,open:function(t){e._adjustListWidth(),e.trigger(v)?t.preventDefault():(n.attr("aria-expanded",!0),e.ul.attr("aria-hidden",!1))},close:function(t){e.trigger(_)?t.preventDefault():(n.attr("aria-expanded",!1),e.ul.attr("aria-hidden",!0))},animation:o.animation,isRtl:s.isRtl(a)})),e.popup.one(v,function(){e._height(e._data().length)}),e._touchScroller=i.touchScroller(e.popup.element)},_makeUnselectable:function(){D&&this.list.find("*").attr("unselectable","on")},_toggleHover:function(t){e(t.currentTarget).toggleClass(g,"mouseenter"===t.type)},_toggle:function(e){var n=this;e=e!==t?e:!n.popup.visible(),s.touch||n._focused[0]===d()||n._focused.focus(),n[e?v:_]()},_scroll:function(e){if(e){e[0]&&(e=e[0]);var t=this.ul[0],n=e.offsetTop,i=e.offsetHeight,r=t.scrollTop,o=t.clientHeight,a=n+i;t.scrollTop=r>n?n:a>r+o?a-o:r}},_template:function(){var e=this,t=e.options,n=t.template,r=t.dataSource;e._isSelect&&e.element[0].length&&(r||(t.dataTextField=t.dataTextField||"text",t.dataValueField=t.dataValueField||"value")),n?(n=i.template(n),e.template=function(e){return'<li tabindex="-1" role="option" unselectable="on" class="k-item">'+n(e)+"</li>"}):e.template=i.template('<li tabindex="-1" role="option" unselectable="on" class="k-item">${'+i.expr(t.dataTextField,"data")+"}</li>",{useWithBlock:!1})},_triggerCascade:function(){var e=this,t=e.value();(!e._bound&&t||e._old!==t)&&e.trigger("cascade")},_unbindDataSource:function(){var e=this;e.dataSource.unbind(p,e._refreshHandler).unbind(y,e._progressHandler).unbind(k,e._requestEndHandler).unbind("error",e._errorHandler)}});C(F,{caret:function(e){var t,n=e.ownerDocument.selection;return t=n?Math.abs(n.createRange().moveStart(f,-e.value.length)):e.selectionStart},selectText:function(e,t,n){try{if(e.createTextRange){e.focus();var i=e.createTextRange();i.collapse(!0),i.moveStart(f,t),i.moveEnd(f,n-t),i.select()}else e.setSelectionRange(t,n)}catch(r){}},inArray:function(e,t){var n,i,r=t.children;if(!e||e.parentNode!==t)return-1;for(n=0,i=r.length;i>n;n++)if(e===r[n])return n;return-1}}),i.ui.List=F,r.Select=F.extend({init:function(e,t){F.fn.init.call(this,e,t),this._initial=this.element.val()},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.options.autoBind&&this.dataSource.fetch()},close:function(){this.popup.close()},select:function(e){var n=this;return e===t?n.selectedIndex:(n._select(e),n._triggerCascade(),n._old=n._accessor(),n._oldIndex=n.selectedIndex,t)},_accessor:function(e,n){var i,r=this.element[0],o=this._isSelect,a=r.selectedIndex;return e===t?(o?a>-1&&(i=r.options[a],i&&(e=i.value)):e=r.value,e):(o?(a>-1&&r.options[a].removeAttribute(w),r.selectedIndex=n,i=r.options[n],i&&i.setAttribute(w,w)):r.value=e,t)},_hideBusy:function(){var e=this;clearTimeout(e._busy),e._arrow.removeClass(m),e._focused.attr("aria-busy",!1),e._busy=null
},_showBusy:function(){var e=this;e._request=!0,e._busy||(e._busy=setTimeout(function(){e._focused.attr("aria-busy",!0),e._arrow.addClass(m)},100))},_requestEnd:function(){this._request=!1},_dataSource:function(){var t,n=this,r=n.element,o=n.options,a=o.dataSource||{};a=e.isArray(a)?{data:a}:a,n._isSelect&&(t=r[0].selectedIndex,t>-1&&(o.index=t),a.select=r,a.fields=[{field:o.dataTextField},{field:o.dataValueField}]),n.dataSource&&n._refreshHandler?n._unbindDataSource():(n._refreshHandler=T(n.refresh,n),n._progressHandler=T(n._showBusy,n),n._requestEndHandler=T(n._requestEnd,n),n._errorHandler=T(n._hideBusy,n)),n.dataSource=i.data.DataSource.create(a).bind(p,n._refreshHandler).bind(y,n._progressHandler).bind(k,n._requestEndHandler).bind("error",n._errorHandler)},_get:function(t){var n,i,r=this,o=r._data();if("function"==typeof t)for(n=0,i=o.length;i>n;n++)if(t(o[n])){t=n;break}if("number"==typeof t){if(0>t)return e();t=e(r.ul[0].children[t])}return t&&t.nodeType&&(t=e(t)),t},_move:function(e){var t,n,i=this,r=e.keyCode,o=i.ul[0],s=i.popup.visible()?"_select":"_accept",l=i._current,d=r===a.DOWN;if(r===a.UP||d){if(e.altKey)i.toggle(d);else{if(t=o.firstChild,!t&&!i._accessor()&&"filter"!==i._state)return i.dataSource.one(p,function(){i._move(e)}),i._filterSource(),e.preventDefault(),!0;d?(!l||-1===i.selectedIndex&&!i.value()&&l[0]===t?l=t:(l=l[0].nextSibling,l||t!==o.lastChild||(l=t)),i[s](l)):(l=l?l[0].previousSibling:o.lastChild,l||t!==o.lastChild||(l=t),i[s](l))}e.preventDefault(),n=!0}else r===a.ENTER||r===a.TAB?(i.popup.visible()&&e.preventDefault(),i._accept(l),n=!0):r===a.ESC&&(i.popup.visible()&&e.preventDefault(),i.close(),n=!0);return n},_selectItem:function(e){var t=this,n=t.options,i=t.selectedIndex;e=t._selectedValue||n.value||t._accessor(),e?t.value(e):(!t._bound||i>-1)&&(t._bound||(i=n.index),t.select(i))},_fetchItems:function(e){var n=this,i=n.ul[0].firstChild;return n._request?!0:n._fetch||i?t:n.options.cascadeFrom?!i:(n.dataSource.one(p,function(){n.value(e),n._fetch=!1}),n._fetch=!0,n.dataSource.fetch(),!0)},_options:function(n,i){var r,o,a,s,d=this,c=d.element,u=c[0].selectedIndex,p=n.length,f="",h=0;for(i&&(h=1,f=i,-1===i.indexOf(e(c[0].firstChild).text())&&(u+=1));p>h;h++)r="<option",o=n[h],a=d._text(o),s=d._value(o),s!==t&&(s+="",-1!==s.indexOf('"')&&(s=s.replace(A,"&quot;")),r+=' value="'+s+'"'),r+=">",a!==t&&(r+=l(a)),r+="</option>",f+=r;c.html(f),c[0].selectedIndex=-1===u?0:u},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){setTimeout(function(){t.value(t._initial)})},t._form=r.on("reset",t._resetHandler))},_cascade:function(){var t,i,r,o,a,s=this,l=s.options,d=l.cascadeFrom;if(d){if(s._selectedValue=l.value||s._accessor(),i=e("#"+d),t=i.data("kendo"+l.name),t||(t=i.data("kendo"+E[l.name])),!t)return;l.autoBind=!1,o=t.options.dataValueField,a=function(){var e=s._selectedValue||s.value();e?(s.value(e),s.dataSource.view()[0]&&-1!==s.selectedIndex||s._clearSelection(t,!0)):s.select(l.index),s.enable(),s._triggerCascade()},r=function(){var e,i,r=t.dataItem(),l=r?t._value(r):null;l||0===l?(e=s.dataSource.filter()||{},n(e,o),i=e.filters||[],i.push({field:o,operator:"eq",value:l}),s.dataSource.one(p,a).filter(i)):(s.enable(!1),s._clearSelection(t),s._triggerCascade())},t.bind("cascade",function(){r()}),t._bound?r():t.value()||s.enable(!1)}}})}(window.kendo.jQuery),function(e,t){function n(e,t,n,i){var r,o=e.getFullYear(),a=t.getFullYear(),s=n.getFullYear();return o-=o%i,r=o+(i-1),a>o&&(o=a),r>s&&(r=s),o+"-"+r}function i(e){for(var t,n=0,i=e.min,r=e.max,o=e.start,a=e.setter,l=e.build,d=e.cells||12,c=e.perRow||4,u=e.content||I,p=e.empty||P,f=e.html||'<table tabindex="0" role="grid" class="k-content k-meta-view" cellspacing="0"><tbody><tr role="row">';d>n;n++)n>0&&0===n%c&&(f+='</tr><tr role="row">'),t=l(o,n),f+=s(o,i,r)?u(t):p(t),a(o,1);return f+"</tr></tbody></table>"}function r(e,t,n){var i=e.getFullYear(),r=t.getFullYear(),o=r,a=0;return n&&(r-=r%n,o=r-r%n+n-1),i>o?a=1:r>i&&(a=-1),a}function o(){var e=new ht;return new ht(e.getFullYear(),e.getMonth(),e.getDate())}function a(e,t,n){var i=o();return e&&(i=new ht(+e)),t>i?i=new ht(+t):i>n&&(i=new ht(+n)),i}function s(e,t,n){return+e>=+t&&+n>=+e}function l(e,t){return e.slice(t).concat(e.slice(0,t))}function d(e,t,n){t=t instanceof ht?t.getFullYear():e.getFullYear()+n*t,e.setFullYear(t)}function c(t){e(this).toggleClass(Y,it.indexOf(t.type)>-1||t.type==tt)}function u(e){e.preventDefault()}function p(e){return A(e).calendars.standard}function f(e){var n=gt[e.start],i=gt[e.depth],r=A(e.culture);e.format=S(e.format||r.calendars.standard.patterns.d),isNaN(n)&&(n=0,e.start=U),(i===t||i>n)&&(e.depth=U),e.dates||(e.dates=[])}function h(e){z&&e.find("*").attr("unselectable","on")}function g(e,t){for(var n=0,i=t.length;i>n;n++)if(e===+t[n])return!0;return!1}function m(e,t){return e?e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate():!1}function v(e,t){return e?e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth():!1}var _,b=window.kendo,w=b.support,y=b.ui,k=y.Widget,x=b.keys,C=b.parseDate,T=b.date.adjustDST,S=b._extractFormat,D=b.template,A=b.getCulture,E=b.support.transitions,F=E?E.css+"transform-origin":"",I=D('<td#=data.cssClass# role="gridcell"><a tabindex="-1" class="k-link" href="\\#" data-#=data.ns#value="#=data.dateString#">#=data.value#</a></td>',{useWithBlock:!1}),P=D('<td role="gridcell">&nbsp;</td>',{useWithBlock:!1}),B=b.support.browser,z=B.msie&&B.version<9,H=".kendoCalendar",R="click"+H,M="keydown"+H,L="id",O="min",N="left",V="slideIn",U="month",W="century",j="change",G="navigate",q="value",Y="k-state-hover",Q="k-state-disabled",$="k-state-focused",K="k-other-month",X=' class="'+K+'"',J="k-nav-today",Z="td:has(.k-link)",et="blur"+H,tt="focus",nt=tt+H,it=w.touch?"touchstart":"mouseenter",rt=w.touch?"touchstart"+H:"mouseenter"+H,ot=w.touch?"touchend"+H+" touchmove"+H:"mouseleave"+H,at=6e4,st=864e5,lt="_prevArrow",dt="_nextArrow",ct="aria-disabled",ut="aria-selected",pt=e.proxy,ft=e.extend,ht=Date,gt={month:0,year:1,decade:2,century:3},mt=k.extend({init:function(t,n){var i,r,o=this;k.fn.init.call(o,t,n),t=o.wrapper=o.element,n=o.options,n.url=window.unescape(n.url),o._templates(),o._header(),o._footer(o.footer),r=t.addClass("k-widget k-calendar").on(rt+" "+ot,Z,c).on(M,"table.k-content",pt(o._move,o)).on(R,Z,function(t){var n=t.currentTarget.firstChild;-1!=n.href.indexOf("#")&&t.preventDefault(),o._click(e(n))}).on("mouseup"+H,function(){o._focusView(o.options.focusOnNav!==!1)}).attr(L),r&&(o._cellID=r+"_cell_selected"),i=n.value,f(n),o._index=gt[n.start],o._current=new ht(+a(i,n.min,n.max)),o._addClassProxy=function(){o._active=!0,o._cell.addClass($)},o._removeClassProxy=function(){o._active=!1,o._cell.removeClass($)},o.value(i),b.notify(o)},options:{name:"Calendar",value:null,min:new ht(1900,0,1),max:new ht(2099,11,31),dates:[],url:"",culture:"",footer:"",format:"",month:{},start:U,depth:U,animation:{horizontal:{effects:V,reverse:!0,duration:500,divisor:2},vertical:{effects:"zoomIn",duration:400}}},events:[j,G],setOptions:function(e){f(e),k.fn.setOptions.call(this,e)},destroy:function(){var e=this,t=e._today;e.element.off(H),e._title.off(H),e[lt].off(H),e[dt].off(H),b.destroy(e._view),t&&b.destroy(t.off(H)),k.fn.destroy.call(e)},current:function(){return this._current},view:function(){return this._view},focus:function(e){e=e||this._table,this._bindTable(e),e.focus()},min:function(e){return this._option(O,e)},max:function(e){return this._option("max",e)},navigateToPast:function(){this._navigate(lt,-1)},navigateToFuture:function(){this._navigate(dt,1)},navigateUp:function(){var e=this,t=e._index;e._title.hasClass(Q)||e.navigate(e._current,++t)},navigateDown:function(e){var n=this,i=n._index,r=n.options.depth;if(e)return i===gt[r]?(+n._value!=+e&&(n.value(e),n.trigger(j)),t):(n.navigate(e,--i),t)},navigate:function(n,i){i=isNaN(i)?gt[i]:i;var r,o,s,l,d=this,c=d.options,u=c.culture,p=c.min,f=c.max,g=d._title,m=d._table,v=d._oldTable,b=d._value,w=d._current,y=n&&+n>+w,k=i!==t&&i!==d._index;n||(n=w),d._current=n=new ht(+a(n,p,f)),i===t?i=d._index:d._index=i,d._view=o=_.views[i],s=o.compare,l=i===gt[W],g.toggleClass(Q,l).attr(ct,l),l=s(n,p)<1,d[lt].toggleClass(Q,l).attr(ct,l),l=s(n,f)>-1,d[dt].toggleClass(Q,l).attr(ct,l),m&&v&&v.data("animating")&&(v.kendoStop(!0,!0),m.kendoStop(!0,!0)),d._oldTable=m,(!m||d._changeView)&&(g.html(o.title(n,p,f,u)),d._table=r=e(o.content(ft({min:p,max:f,date:n,url:c.url,dates:c.dates,format:c.format,culture:u},d[o.name]))),h(r),d._animate({from:m,to:r,vertical:k,future:y}),d._focus(n),d.trigger(G)),i===gt[c.depth]&&b&&d._class("k-state-selected",o.toDateString(b)),d._class($,o.toDateString(n)),!m&&d._cell&&d._cell.removeClass($),d._changeView=!0},value:function(e){var n=this,i=n._view,r=n.options,o=n._view,a=r.min,l=r.max;return e===t?n._value:(e=C(e,r.format,r.culture),null!==e&&(e=new ht(+e),s(e,a,l)||(e=null)),n._value=e,o&&null===e&&n._cell?n._cell.removeClass("k-state-selected"):(n._changeView=!e||i&&0!==i.compare(e,n._current),n.navigate(e)),t)},_move:function(t){var n,i,r,o,s=this,l=s.options,d=t.keyCode,c=s._view,u=s._index,p=new ht(+s._current),f=b.support.isRtl(s.wrapper);return t.target===s._table[0]&&(s._active=!0),t.ctrlKey?d==x.RIGHT&&!f||d==x.LEFT&&f?(s.navigateToFuture(),i=!0):d==x.LEFT&&!f||d==x.RIGHT&&f?(s.navigateToPast(),i=!0):d==x.UP?(s.navigateUp(),i=!0):d==x.DOWN&&(s._click(e(s._cell[0].firstChild)),i=!0):(d==x.RIGHT&&!f||d==x.LEFT&&f?(n=1,i=!0):d==x.LEFT&&!f||d==x.RIGHT&&f?(n=-1,i=!0):d==x.UP?(n=0===u?-7:-4,i=!0):d==x.DOWN?(n=0===u?7:4,i=!0):d==x.ENTER?(s._click(e(s._cell[0].firstChild)),i=!0):d==x.HOME||d==x.END?(r=d==x.HOME?"first":"last",o=c[r](p),p=new ht(o.getFullYear(),o.getMonth(),o.getDate(),p.getHours(),p.getMinutes(),p.getSeconds(),p.getMilliseconds()),i=!0):d==x.PAGEUP?(i=!0,s.navigateToPast()):d==x.PAGEDOWN&&(i=!0,s.navigateToFuture()),(n||r)&&(r||c.setDate(p,n),s._focus(a(p,l.min,l.max)))),i&&t.preventDefault(),s._current},_animate:function(e){var t=this,n=e.from,i=e.to,r=t._active;n?n.parent().data("animating")?(n.parent().kendoStop(!0,!0).remove(),n.remove(),i.insertAfter(t.element[0].firstChild),t._focusView(r)):n.is(":visible")&&t.options.animation!==!1?t[e.vertical?"_vertical":"_horizontal"](n,i,e.future):(i.insertAfter(n),n.remove(),t._focusView(r)):(i.insertAfter(t.element[0].firstChild),t._bindTable(i))},_horizontal:function(e,n,i){var r=this,o=r._active,a=r.options.animation.horizontal,s=a.effects,l=e.outerWidth();s&&-1!=s.indexOf(V)&&(e.add(n).css({width:l}),e.wrap("<div/>"),r._focusView(o,e),e.parent().css({position:"relative",width:2*l,"float":N,"margin-left":i?0:-l}),n[i?"insertAfter":"insertBefore"](e),ft(a,{effects:V+":"+(i?"right":N),complete:function(){e.remove(),n.unwrap(),r._focusView(o),r._oldTable=t}}),e.parent().kendoStop(!0,!0).kendoAnimate(a))},_vertical:function(e,n){var i,r,o=this,a=o.options.animation.vertical,s=a.effects,l=o._active;s&&-1!=s.indexOf("zoom")&&(n.css({position:"absolute",top:e.prev().outerHeight(),left:0}).insertBefore(e),F&&(i=o._cellByDate(o._view.toDateString(o._current)),r=i.position(),r=r.left+parseInt(i.width()/2,10)+"px"+" "+(r.top+parseInt(i.height()/2,10)+"px"),n.css(F,r)),e.kendoStop(!0,!0).kendoAnimate({effects:"fadeOut",duration:600,complete:function(){e.remove(),n.css({position:"static",top:0,left:0}),o._focusView(l),o._oldTable=t}}),n.kendoStop(!0,!0).kendoAnimate(a))},_cellByDate:function(t){return this._table.find("td:not(."+K+")").filter(function(){return e(this.firstChild).attr(b.attr(q))===t})},_class:function(t,n){var i=this,r=i._cellID,o=i._cell;o&&o.removeAttr(ut).removeAttr(L),o=i._table.find("td:not(."+K+")").removeClass(t).filter(function(){return e(this.firstChild).attr(b.attr(q))===n}).attr(ut,!0),t!==$||i._active||i.options.focusOnNav===!1||(t=""),o.addClass(t),o[0]&&(i._cell=o),r&&(o.attr(L,r),i._table.removeAttr("aria-activedescendant").attr("aria-activedescendant",r))},_bindTable:function(e){e.on(nt,this._addClassProxy).on(et,this._removeClassProxy)},_click:function(e){var t=this,n=t.options,i=new Date(+t._current),r=e.attr(b.attr(q)).split("/");r=new ht(r[0],r[1],r[2]),T(r),t._view.setDate(i,r),t.navigateDown(a(i,n.min,n.max))},_focus:function(e){var t=this,n=t._view;0!==n.compare(e,t._current)?t.navigate(e):(t._current=e,t._class($,n.toDateString(e)))},_focusView:function(e,t){e&&this.focus(t)},_footer:function(n){var i=this,r=o(),a=i.element,s=a.find(".k-footer");return n?(s[0]||(s=e('<div class="k-footer"><a href="#" class="k-link k-nav-today"></a></div>').appendTo(a)),i._today=s.show().find(".k-link").html(n(r)).attr("title",b.toString(r,"D",i.options.culture)),i._toggle(),t):(i._toggle(!1),s.hide(),t)},_header:function(){var e,t=this,n=t.element,i=t.options.focusOnNav!==!1;n.find(".k-header")[0]||n.html('<div class="k-header"><a href="#" role="button" class="k-link k-nav-prev"><span class="k-icon k-i-arrow-w"></span></a><a href="#" role="button" aria-live="assertive" aria-atomic="true" class="k-link k-nav-fast"></a><a href="#" role="button" class="k-link k-nav-next"><span class="k-icon k-i-arrow-e"></span></a></div>'),e=n.find(".k-link").on(rt+" "+ot+" "+nt+" "+et,c).click(!1),t._title=e.eq(1).on(R,function(){t._focusView(i),t.navigateUp()}),t[lt]=e.eq(0).on(R,function(){t._focusView(i),t.navigateToPast()}),t[dt]=e.eq(2).on(R,function(){t._focusView(i),t.navigateToFuture()})},_navigate:function(e,t){var n=this,i=n._index+1,r=new ht(+n._current);e=n[e],e.hasClass(Q)||(i>3?r.setFullYear(r.getFullYear()+100*t):_.views[i].setDate(r,t),n.navigate(r))},_option:function(e,n){var i,r=this,o=r.options,a=r._value||r._current;return n===t?o[e]:(n=C(n,o.format,o.culture),n&&(o[e]=new ht(+n),i=e===O?n>a:a>n,(i||v(a,n))&&(r._value=null,r._changeView=!0),r._changeView||(r._changeView=!(!o.month.content&&!o.month.empty)),r.navigate(r._value),r._toggle()),t)},_toggle:function(e){var n=this,i=n.options,r=n._today;e===t&&(e=s(o(),i.min,i.max)),r&&(r.off(R),e?r.addClass(J).removeClass(Q).on(R,pt(n._todayClick,n)):r.removeClass(J).addClass(Q).on(R,u))},_todayClick:function(e){var t=this,n=gt[t.options.depth],i=o();e.preventDefault(),0===t._view.compare(t._current,i)&&t._index==n&&(t._changeView=!1),t._value=i,t.navigate(i,n),t.trigger(j)},_templates:function(){var e=this,t=e.options,n=t.footer,i=t.month,r=i.content,o=i.empty;e.month={content:D('<td#=data.cssClass# role="gridcell"><a tabindex="-1" class="k-link#=data.linkClass#" href="#=data.url#" '+b.attr("value")+'="#=data.dateString#" title="#=data.title#">'+(r||"#=data.value#")+"</a></td>",{useWithBlock:!!r}),empty:D('<td role="gridcell">'+(o||"&nbsp;")+"</td>",{useWithBlock:!!o})},n!==!1&&(e.footer=D(n||'#= kendo.toString(data,"D","'+t.culture+'") #',{useWithBlock:!1}))}});y.plugin(mt),_={firstDayOfMonth:function(e){return new ht(e.getFullYear(),e.getMonth(),1)},firstVisibleDay:function(e,t){t=t||b.culture().calendar;for(var n=t.firstDay,i=new ht(e.getFullYear(),e.getMonth(),0,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());i.getDay()!=n;)_.setTime(i,-1*st);return i},setTime:function(e,t){var n=e.getTimezoneOffset(),i=new ht(e.getTime()+t),r=i.getTimezoneOffset()-n;e.setTime(i.getTime()+r*at)},views:[{name:U,title:function(e,t,n,i){return p(i).months.names[e.getMonth()]+" "+e.getFullYear()},content:function(e){for(var t=this,n=0,r=e.min,o=e.max,a=e.date,s=e.dates,d=e.format,c=e.culture,u=e.url,f=u&&s[0],h=p(c),m=h.firstDay,v=h.days,w=l(v.names,m),y=l(v.namesShort,m),k=_.firstVisibleDay(a,h),x=t.first(a),C=t.last(a),S=t.toDateString,D=new ht,A='<table tabindex="0" role="grid" class="k-content" cellspacing="0"><thead><tr role="row">';7>n;n++)A+='<th scope="col" title="'+w[n]+'">'+y[n]+"</th>";return D=new ht(D.getFullYear(),D.getMonth(),D.getDate()),T(D),D=+D,i({cells:42,perRow:7,html:A+='</tr></thead><tbody><tr role="row">',start:new ht(k.getFullYear(),k.getMonth(),k.getDate()),min:new ht(r.getFullYear(),r.getMonth(),r.getDate()),max:new ht(o.getFullYear(),o.getMonth(),o.getDate()),content:e.content,empty:e.empty,setter:t.setDate,build:function(e){var t=[],n=e.getDay(),i="",r="#";return(x>e||e>C)&&t.push(K),+e===D&&t.push("k-today"),(0===n||6===n)&&t.push("k-weekend"),f&&g(+e,s)&&(r=u.replace("{0}",b.toString(e,d,c)),i=" k-action-link"),{date:e,dates:s,ns:b.ns,title:b.toString(e,"D",c),value:e.getDate(),dateString:S(e),cssClass:t[0]?' class="'+t.join(" ")+'"':"",linkClass:i,url:r}}})},first:function(e){return _.firstDayOfMonth(e)},last:function(e){var t=new ht(e.getFullYear(),e.getMonth()+1,0),n=_.firstDayOfMonth(e),i=Math.abs(t.getTimezoneOffset()-n.getTimezoneOffset());return i&&t.setHours(n.getHours()+i/60),t},compare:function(e,t){var n,i=e.getMonth(),r=e.getFullYear(),o=t.getMonth(),a=t.getFullYear();return n=r>a?1:a>r?-1:i==o?0:i>o?1:-1},setDate:function(e,t){var n=e.getHours();t instanceof ht?e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()):_.setTime(e,t*st),T(e,n)},toDateString:function(e){return e.getFullYear()+"/"+e.getMonth()+"/"+e.getDate()}},{name:"year",title:function(e){return e.getFullYear()},content:function(e){var t=p(e.culture).months.namesAbbr,n=this.toDateString,r=e.min,o=e.max;return i({min:new ht(r.getFullYear(),r.getMonth(),1),max:new ht(o.getFullYear(),o.getMonth(),1),start:new ht(e.date.getFullYear(),0,1),setter:this.setDate,build:function(e){return{value:t[e.getMonth()],ns:b.ns,dateString:n(e),cssClass:""}}})},first:function(e){return new ht(e.getFullYear(),0,e.getDate())},last:function(e){return new ht(e.getFullYear(),11,e.getDate())},compare:function(e,t){return r(e,t)},setDate:function(e,t){var n,i=e.getHours();t instanceof ht?(n=t.getMonth(),e.setFullYear(t.getFullYear(),n,e.getDate()),n!==e.getMonth()&&e.setDate(0)):(n=e.getMonth()+t,e.setMonth(n),n>11&&(n-=12),n>0&&e.getMonth()!=n&&e.setDate(0)),T(e,i)},toDateString:function(e){return e.getFullYear()+"/"+e.getMonth()+"/1"}},{name:"decade",title:function(e,t,i){return n(e,t,i,10)},content:function(e){var t=e.date.getFullYear(),n=this.toDateString;return i({start:new ht(t-t%10-1,0,1),min:new ht(e.min.getFullYear(),0,1),max:new ht(e.max.getFullYear(),0,1),setter:this.setDate,build:function(e,t){return{value:e.getFullYear(),ns:b.ns,dateString:n(e),cssClass:0===t||11==t?X:""}}})},first:function(e){var t=e.getFullYear();return new ht(t-t%10,e.getMonth(),e.getDate())},last:function(e){var t=e.getFullYear();return new ht(t-t%10+9,e.getMonth(),e.getDate())},compare:function(e,t){return r(e,t,10)},setDate:function(e,t){d(e,t,1)},toDateString:function(e){return e.getFullYear()+"/0/1"}},{name:W,title:function(e,t,i){return n(e,t,i,100)},content:function(e){var t=e.date.getFullYear(),n=e.min.getFullYear(),r=e.max.getFullYear(),o=this.toDateString,a=n,s=r;return a-=a%10,s-=s%10,10>s-a&&(s=a+9),i({start:new ht(t-t%100-10,0,1),min:new ht(a,0,1),max:new ht(s,0,1),setter:this.setDate,build:function(e,t){var i=e.getFullYear(),a=i+9;return n>i&&(i=n),a>r&&(a=r),{ns:b.ns,value:i+" - "+a,dateString:o(e),cssClass:0===t||11==t?X:""}}})},first:function(e){var t=e.getFullYear();return new ht(t-t%100,e.getMonth(),e.getDate())},last:function(e){var t=e.getFullYear();return new ht(t-t%100+99,e.getMonth(),e.getDate())},compare:function(e,t){return r(e,t,100)},setDate:function(e,t){d(e,t,10)},toDateString:function(e){var t=e.getFullYear();return t-t%10+"/0/1"}}]},_.isEqualDatePart=m,_.makeUnselectable=h,_.restrictValue=a,_.isInRange=s,_.normalize=f,_.viewsEnum=gt,b.calendar=_}(window.kendo.jQuery),function(e,t){function n(t){var n=t.parseFormats,i=t.format;L.normalize(t),n=e.isArray(n)?n:[n],-1===e.inArray(i,n)&&n.splice(0,0,t.format),t.parseFormats=n}function i(e){e.preventDefault()}var r,o=window.kendo,a=o.ui,s=a.Widget,l=o.parseDate,d=o.keys,c=o.template,u=o._activeElement,p="<div />",f="<span />",h=".kendoDatePicker",g="click"+h,m="open",v="close",_="change",b="dateView",w="disabled",y="readonly",k="k-state-default",x="k-state-focused",C="k-state-selected",T="k-state-disabled",S="k-state-hover",D="keydown"+h,A="mouseenter"+h+" mouseleave"+h,E="mousedown"+h,F="id",I="min",P="max",B="month",z="aria-disabled",H="aria-expanded",R="aria-hidden",M="aria-readonly",L=o.calendar,O=L.isInRange,N=L.restrictValue,V=L.isEqualDatePart,U=e.extend,W=e.proxy,j=Date,G=function(t){var n,i=this,s=document.body,l=r.sharedCalendar,d=e(p).attr(R,"true").addClass("k-calendar-container").appendTo(s);l||(l=r.sharedCalendar=new a.Calendar(e(p).attr(F,o.guid()).hide().appendTo(s),{focusOnNav:!1}),L.makeUnselectable(l.element)),i.calendar=l,i.options=t=t||{},n=t.id,n&&(n+="_dateview",d.attr(F,n),i._dateViewID=n),i.popup=new a.Popup(d,U(t.popup,t,{name:"Popup",isRtl:o.support.isRtl(t.anchor)})),i.div=d,i._templates(),i.value(t.value)};G.prototype={_calendar:function(){var e=this,t=e.popup,n=e.options,r=e.calendar,o=r.element;o.data(b)!==e&&(o.appendTo(t.element).data(b,e).off(g+" "+D).on(g,"td:has(.k-link)",W(e._click,e)).on(E,i).show(),r.unbind(_).bind(_,n),r.month=e.month,r.options.dates=n.dates,r.options.depth=n.depth,r.options.culture=n.culture,r._footer(e.footer),r.min(n.min),r.max(n.max),r._value=null,r.navigate(e._value||e._current,n.start),e.value(e._value))},destroy:function(){var n,i=this,o=i.calendar,a=o.element,s=a.data(b);(s===t||s===i)&&(n=e(".k-calendar-container"),n.length>1?a.hide().appendTo(document.body):(a.off(h),o.destroy(),o.element.remove(),r.sharedCalendar=null)),i.popup.destroy()},open:function(){var e=this;e._calendar(),e.popup.open()},close:function(){this.popup.close()},min:function(e){this._option(I,e)},max:function(e){this._option(P,e)},toggle:function(){var e=this;e[e.popup.visible()?v:m]()},move:function(e){var n=this,i=e.keyCode,r=n.calendar,o=e.ctrlKey&&i==d.DOWN||i==d.ENTER;if(i==d.ESC)return n.close(),t;if(e.altKey)return i==d.DOWN?(n.open(),e.preventDefault()):i==d.UP&&(n.close(),e.preventDefault()),t;if(n.popup.visible())return o&&r._cell.hasClass(C)?(n.close(),e.preventDefault(),t):(n._current=r._move(e),t)},value:function(e){var t=this,n=t.calendar,i=t.options;t._value=e,t._current=new j(+N(e,i.min,i.max)),n.element.data(b)===t&&n.value(e)},_click:function(e){-1!==e.currentTarget.className.indexOf(C)&&this.close()},_option:function(e,t){var n=this,i=n.options,r=n.calendar;i[e]=t,r.element.data(b)===n&&r[e](t)},_templates:function(){var e=this,t=e.options,n=t.footer,i=t.month||{},r=i.content,a=i.empty;e.month={content:c('<td#=data.cssClass#><a tabindex="-1" class="k-link" href="\\#" '+o.attr("value")+'="#=data.dateString#" title="#=data.title#">'+(r||"#=data.value#")+"</a></td>",{useWithBlock:!!r}),empty:c("<td>"+(a||"&nbsp;")+"</td>",{useWithBlock:!!a})},n!==!1&&(e.footer=c(n||'#= kendo.toString(data,"D","'+t.culture+'") #',{useWithBlock:!1}))}},G.normalize=n,o.DateView=G,r=s.extend({init:function(e,t){var i,r,a=this;s.fn.init.call(a,e,t),e=a.element,t=a.options,n(t),a._wrapper(),a.dateView=new G(U({},t,{id:e.attr(F),anchor:a.wrapper,change:function(){a._change(this.value()),a.close()},close:function(t){a.trigger(v)?t.preventDefault():(e.attr(H,!1),r.attr(R,!0))},open:function(t){var n,i=a.options;a.trigger(m)?t.preventDefault():(a.element.val()!==a._oldText&&(n=l(e.val(),i.parseFormats,i.culture),n?(a.dateView._current=n,a.dateView.calendar._focus(n)):a.dateView.value(n)),e.attr(H,!0),r.attr(R,!1))}})),r=a.dateView.div,a._icon(),e[0].type="text",e.addClass("k-input").attr({role:"textbox","aria-haspopup":!0,"aria-expanded":!1,"aria-owns":a.dateView._dateViewID}),a._reset(),a._template(),i=e.is("[disabled]"),i?a.enable(!1):a.readonly(e.is("[readonly]")),a._old=a._update(t.value||a.element.val()),a._oldText=e.val(),o.notify(a)},events:[m,v,_],options:{name:"DatePicker",value:null,footer:"",format:"",culture:"",parseFormats:[],min:new Date(1900,0,1),max:new Date(2099,11,31),start:B,depth:B,animation:{},month:{},dates:[],ARIATemplate:'Current focused date is #=kendo.toString(data.current, "D")#'},setOptions:function(e){var t=this,i=t.dateView,r=i.options;s.fn.setOptions.call(t,e),n(t.options),i.options=U(r,t.options,{change:r.change,close:r.close,open:r.open})},_editable:function(e){var t=this,n=t._dateIcon.off(h),r=t.element.off(h),o=t._inputWrapper.off(h),a=e.readonly,s=e.disable;a||s?(o.addClass(s?T:k).removeClass(s?k:T),r.attr(w,s).attr(y,a).attr(z,s).attr(M,a)):(o.addClass(k).removeClass(T).on(A,t._toggleHover),r.removeAttr(w).removeAttr(y).attr(z,!1).attr(M,!1).on("keydown"+h,W(t._keydown,t)).on("blur"+h,W(t._blur,t)).on("focus"+h,function(){t._inputWrapper.addClass(x)}),n.on(g,W(t._click,t)).on(E,i))},readonly:function(e){this._editable({readonly:e===t?!0:e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t?!0:e)})},destroy:function(){var e=this;s.fn.destroy.call(e),e.dateView.destroy(),e.element.off(h),e._dateIcon.off(h),e._inputWrapper.off(h),e._form&&e._form.off("reset",e._resetHandler)},open:function(){this.dateView.open()},close:function(){this.dateView.close()},min:function(e){return this._option(I,e)},max:function(e){return this._option(P,e)},value:function(e){var n=this;return e===t?n._value:(n._old=n._update(e),null===n._old&&n.element.val(""),n._oldText=n.element.val(),t)},_toggleHover:function(t){e(t.currentTarget).toggleClass(S,"mouseenter"===t.type)},_blur:function(){var e=this,t=e.element.val();e.close(),t!==e._oldText&&e._change(t),e._inputWrapper.removeClass(x)},_click:function(){var e=this,t=e.element;e.dateView.toggle(),o.support.touch||t[0]===u()||t.focus()},_change:function(e){var t=this;e=t._update(e),+t._old!=+e&&(t._old=e,t._oldText=t.element.val(),t.trigger(_),t.element.trigger(_))},_keydown:function(e){var t=this,n=t.dateView,i=t.element.val();n.popup.visible()||e.keyCode!=d.ENTER||i===t._oldText?(n.move(e),t._updateARIA(n._current)):t._change(i)},_icon:function(){var t,n=this,i=n.element;t=i.next("span.k-select"),t[0]||(t=e('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-calendar">select</span></span>').insertAfter(i)),n._dateIcon=t.attr({role:"button","aria-controls":n.dateView._dateViewID})},_option:function(e,n){var i=this,r=i.options;return n===t?r[e]:(n=l(n,r.parseFormats,r.culture),n&&(r[e]=new j(+n),i.dateView[e](n)),t)},_update:function(e){var t,n=this,i=n.options,r=i.min,a=i.max,s=l(e,i.parseFormats,i.culture);return+s===+n._value?(t=o.toString(s,i.format,i.culture),t!==e&&n.element.val(null===s?e:t),s):(null!==s&&V(s,r)?s=N(s,r,a):O(s,r,a)||(s=null),n._value=s,n.dateView.value(s),n.element.val(s?o.toString(s,i.format,i.culture):e),n._updateARIA(s),s)},_wrapper:function(){var t,n=this,i=n.element;t=i.parents(".k-datepicker"),t[0]||(t=i.wrap(f).parent().addClass("k-picker-wrap k-state-default"),t=t.wrap(f).parent()),t[0].style.cssText=i[0].style.cssText,i.css({width:"100%",height:i[0].style.height}),n.wrapper=t.addClass("k-widget k-datepicker k-header").addClass(i[0].className),n._inputWrapper=e(t[0].firstChild)},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){t.value(n[0].defaultValue)},t._form=r.on("reset",t._resetHandler))},_template:function(){this._ariaTemplate=c(this.options.ARIATemplate)},_updateARIA:function(e){this.element.attr("aria-label",this._ariaTemplate({current:e}))}}),a.plugin(r)}(window.kendo.jQuery),function(e,t){function n(e,t,n){return n?t.substring(0,e).split(n).length-1:0}function i(e,t,i){return t.split(i)[n(e,t,i)]}function r(e,t,i,r){var o=t.split(r);return o.splice(n(e,t,r),1,i),r&&""!==o[o.length-1]&&o.push(""),o.join(r)}function o(e){var t=e.value.length;S(e,t,t)}var a=window.kendo,s=a.support,l=a._activeElement,d=s.placeholder,c=a.ui,u=a.keys,p=a.data.DataSource,f=c.List,h="aria-disabled",g="aria-readonly",m="k-state-default",v="disabled",_="readonly",b="k-state-focused",w="k-state-selected",y="k-state-disabled",k="k-state-hover",x=".kendoAutoComplete",C="mouseenter"+x+" mouseleave"+x,T=f.caret,S=f.selectText,D=e.proxy,A=f.extend({init:function(t,n){var i,r=this;r.ns=x,n=e.isArray(n)?{dataSource:n}:n,f.fn.init.call(r,t,n),t=r.element,n=r.options,n.placeholder=n.placeholder||t.attr("placeholder"),d&&t.attr("placeholder",n.placeholder),r._wrapper(),r._loader(),r._dataSource(),r._ignoreCase(),t[0].type="text",i=r.wrapper,r._popup(),t.addClass("k-input").on("keydown"+x,D(r._keydown,r)).on("paste"+x,D(r._search,r)).on("focus"+x,function(){r._prev=r._accessor(),r._placeholder(!1),i.addClass(b)}).on("blur"+x,function(){r._change(),r._placeholder(),i.removeClass(b)}).attr({autocomplete:"off",role:"textbox","aria-haspopup":!0}),r._enable(),r._old=r._accessor(),t[0].id&&t.attr("aria-owns",r.ul[0].id),r._aria(),r._placeholder(),a.notify(r)},options:{name:"AutoComplete",enabled:!0,suggest:!1,template:"",dataTextField:"",minLength:1,delay:200,height:200,filter:"startswith",ignoreCase:!0,highlightFirst:!1,separator:null,placeholder:"",animation:{}},_dataSource:function(){var e=this;e.dataSource&&e._refreshHandler?e._unbindDataSource():(e._refreshHandler=D(e.refresh,e),e._progressHandler=D(e._showBusy,e)),e.dataSource=p.create(e.options.dataSource).bind("change",e._refreshHandler).bind("progress",e._progressHandler)},setDataSource:function(e){this.options.dataSource=e,this._dataSource()},events:["open","close","change","select","dataBinding","dataBound"],setOptions:function(e){f.fn.setOptions.call(this,e),this._template(),this._accessors(),this._aria()},_editable:function(e){var t=this,n=t.element,i=t.wrapper.off(x),r=e.readonly,o=e.disable;r||o?(i.addClass(o?y:m).removeClass(o?m:y),n.attr(v,o).attr(_,r).attr(h,o).attr(g,r)):(i.addClass(m).removeClass(y).on(C,t._toggleHover),n.removeAttr(v).removeAttr(_).attr(h,!1).attr(g,!1))},close:function(){var e=this,t=e._current;t&&t.removeClass(w),e.current(null),e.popup.close()},destroy:function(){var e=this;e.element.off(x),e.wrapper.off(x),f.fn.destroy.call(e)},refresh:function(){var n,i=this,r=i.ul[0],o=i.popup,s=i.options,d=i._data(),c=d.length;i.trigger("dataBinding"),r.innerHTML=a.render(i.template,d),i._height(c),o.visible()&&o._position(),c&&(s.highlightFirst&&i.current(e(r.firstChild)),s.suggest&&i.suggest(e(r.firstChild))),i._open&&(i._open=!1,n=c?"open":"close",i._typing&&i.element[0]!==l()&&(n="close"),o[n](),i._typing=t),i._touchScroller&&i._touchScroller.reset(),i._makeUnselectable(),i._hideBusy(),i.trigger("dataBound")},select:function(e){this._select(e)},search:function(e){var t,n=this,r=n.options,o=r.ignoreCase,a=r.separator;e=e||n._accessor(),n._current=null,clearTimeout(n._typing),a&&(e=i(T(n.element[0]),e,a)),t=e.length,t?t>=n.options.minLength&&(n._open=!0,n._filterSource({value:o?e.toLowerCase():e,operator:r.filter,field:r.dataTextField,ignoreCase:o})):n.popup.close()},suggest:function(e){var i,r=this,o=r._last,a=r._accessor(),s=r.element[0],l=T(s),d=r.options.separator,c=a.split(d),p=n(l,a,d),h=l;return o==u.BACKSPACE||o==u.DELETE?(r._last=t,t):(e=e||"","string"!=typeof e&&(i=f.inArray(e[0],r.ul[0]),e=i>-1?r._text(r._data()[i]):""),0>=l&&(l=a.toLowerCase().indexOf(e.toLowerCase())+1),i=a.substring(0,l).lastIndexOf(d),i=i>-1?l-(i+d.length):l,a=c[p].substring(0,i),e&&(i=e.toLowerCase().indexOf(a.toLowerCase()),i>-1&&(e=e.substring(i+a.length),h=l+e.length,a+=e),d&&""!==c[c.length-1]&&c.push("")),c[p]=a,r._accessor(c.join(d||"")),s===document.activeElement&&S(s,l,h),t)},value:function(e){return e===t?this._accessor():(this._accessor(e),this._old=e,t)},_accessor:function(e){var n=this,i=n.element[0];return e===t?(e=i.value,i.className.indexOf("k-readonly")>-1?e===n.options.placeholder?"":e:e):(i.value=null===e?"":e,n._placeholder(),t)},_accept:function(e){var t=this;t._focus(e),o(t.element[0])},_keydown:function(t){var n=this,i=n.ul[0],r=t.keyCode,o=n._current,a=n.popup.visible();n._last=r,r===u.DOWN?(a&&n._move(o?o.next():e(i.firstChild)),t.preventDefault()):r===u.UP?(a&&n._move(o?o.prev():e(i.lastChild)),t.preventDefault()):r===u.ENTER||r===u.TAB?(r===u.ENTER&&n.popup.visible()&&t.preventDefault(),n._accept(o)):r===u.ESC?(n.popup.visible()&&t.preventDefault(),n.close()):n._search()},_move:function(e){var t=this;
e=e[0]?e:null,t.current(e),t.options.suggest&&t.suggest(e)},_hideBusy:function(){var e=this;clearTimeout(e._busy),e._loading.hide(),e.element.attr("aria-busy",!1),e._busy=null},_showBusy:function(){var e=this;e._busy||(e._busy=setTimeout(function(){e.element.attr("aria-busy",!0),e._loading.show()},100))},_placeholder:function(e){if(!d){var n,i=this,r=i.element,o=i.options.placeholder;if(o){if(n=r.val(),e===t&&(e=!n),e||(o=n!==o?n:""),n===i._old&&!e)return;r.toggleClass("k-readonly",e).val(o),o||r[0]!==document.activeElement||f.selectText(r[0],0,0)}}},_search:function(){var e=this;clearTimeout(e._typing),e._typing=setTimeout(function(){e._prev!==e._accessor()&&(e._prev=e._accessor(),e.search())},e.options.delay)},_select:function(t){var n,i,o=this,a=o.options.separator,s=o._data();t=e(t),t[0]&&!t.hasClass(w)&&(i=f.inArray(t[0],o.ul[0]),i>-1&&(s=s[i],n=o._text(s),a&&(n=r(T(o.element[0]),o._accessor(),n,a)),o._accessor(n),o.current(t.addClass(w))))},_loader:function(){this._loading=e('<span class="k-icon k-loading" style="display:none"></span>').insertAfter(this.element)},_toggleHover:function(t){e(t.currentTarget).toggleClass(k,"mouseenter"===t.type)},_wrapper:function(){var e,t=this,n=t.element,i=n[0];e=n.parent(),e.is("span.k-widget")||(e=n.wrap("<span />").parent()),e.attr("tabindex",-1),e.attr("role","presentation"),e[0].style.cssText=i.style.cssText,n.css({width:"100%",height:i.style.height}),t._focused=t.element,t.wrapper=e.addClass("k-widget k-autocomplete k-header").addClass(i.className)}});c.plugin(A)}(window.kendo.jQuery),function(e,t){function n(e,t,n){for(var i,r=0,o=t.length-1;o>r;++r)i=t[r],i in e||(e[i]={}),e=e[i];e[t[o]]=n}var i=window.kendo,r=i.ui,o=r.Select,a=i.support.mobileOS,s=".kendoDropDownList",l="disabled",d="readonly",c="change",u="k-state-focused",p="k-state-default",f="k-state-disabled",h="aria-disabled",g="aria-readonly",m="k-state-selected",v="mouseenter"+s+" mouseleave"+s,_="tabindex",b=e.proxy,w=o.extend({init:function(n,r){var a,l,d,c=this,u=r&&r.index;c.ns=s,r=e.isArray(r)?{dataSource:r}:r,o.fn.init.call(c,n,r),c._focusHandler=function(){c.wrapper.focus()},r=c.options,n=c.element.on("focus"+s,c._focusHandler),c._reset(),c._word="",c._wrapper(),c._tabindex(),c.wrapper.data(_,c.wrapper.attr(_)),c._aria(),c._span(),c._popup(),c._mobile(),c._dataSource(),c._ignoreCase(),c._enable(),c._oldIndex=c.selectedIndex=-1,c._cascade(),u!==t&&(r.index=u),r.autoBind?c.dataSource.fetch():-1===c.selectedIndex&&(d=r.text||"",d||(a=c._optionLabelText(r.optionLabel),l=a&&0===r.index,c._isSelect?d=l?a:n.children(":selected").text():!n[0].value&&l&&(d=a)),c.text(d)),i.notify(c)},options:{name:"DropDownList",enabled:!0,autoBind:!0,index:0,text:null,value:null,template:"",delay:500,height:200,dataTextField:"",dataValueField:"",optionLabel:"",cascadeFrom:"",ignoreCase:!0,animation:{}},events:["open","close",c,"select","dataBinding","dataBound","cascade"],setOptions:function(e){o.fn.setOptions.call(this,e),this._template(),this._accessors(),this._aria()},destroy:function(){var e=this;e.wrapper.off(s),e.element.off(s),e._inputWrapper.off(s),o.fn.destroy.call(e)},open:function(){var e=this;e.ul[0].firstChild?(e.popup.open(),e._scroll(e._current)):(e._open=!0,e._request||e.dataSource.fetch())},toggle:function(e){this._toggle(e)},refresh:function(){var e=this,t=e._data(),n=t.length,r=e.options.optionLabel;e.trigger("dataBinding"),e._current&&e.current(null),e.ul[0].innerHTML=i.render(e.template,t),e._height(n),e.popup.visible()&&e.popup._position(),e._isSelect&&(r&&n&&(r=e._optionLabelText(r),r='<option value="">'+r+"</option>"),e._options(t,r)),e._open&&(e._open=!1,e.toggle(!!n)),e._hideBusy(),e._makeUnselectable(),!e._fetch&&n&&e._selectItem(),e._bound=!0,e.trigger("dataBound")},search:function(e){if(e){var n=this,i=n.options.ignoreCase;i&&(e=e.toLowerCase()),n._select(function(r){var o=n._text(r);return o!==t?(o+="",i&&(o=o.toLowerCase()),0===o.indexOf(e)):t})}},text:function(e){var n=this.span;return e===t?n.text():(n.text(e),t)},value:function(e){var n,i,r=this;return e===t?r._accessor():(null!==e&&(e=""+e),r._selectedValue=e,i=e||r.options.optionLabel&&!r.element[0].disabled&&""===e,i&&r._fetchItems(e)||(n=r._index(e),r.select(n>-1?n:0)),t)},_editable:function(e){var t=this,n=t.element,r=e.disable,o=e.readonly,a=t.wrapper.off(s),c=t._inputWrapper.off(v),m=function(){c.addClass(u),t._blured=!1},w=function(){if(!t._blured){t._triggerCascade();var e=window.self!==window.top;i.support.mobileOS.ios&&e?t._change():t._blur(),c.removeClass(u),t._blured=!0,n.blur()}};o||r?(r?(a.removeAttr(_),c.addClass(f).removeClass(p)):(c.addClass(p).removeClass(f),a.on("focusin"+s,m).on("focusout"+s,w)),n.attr(l,r).attr(d,o),a.attr(h,r).attr(g,o)):(n.removeAttr(l).removeAttr(d),c.addClass(p).removeClass(f).on(v,t._toggleHover),a.attr(_,a.data(_)).attr(h,!1).attr(g,!1).on("click"+s,function(e){t._blured=!1,e.preventDefault(),t.toggle()}).on("keydown"+s,b(t._keydown,t)).on("keypress"+s,b(t._keypress,t)).on("focusin"+s,m).on("focusout"+s,w))},_accept:function(e){this._focus(e)},_optionLabelText:function(){var e=this.options,t=e.dataTextField,n=e.optionLabel;return n&&t&&"object"==typeof n?this._text(n):n},_data:function(){var e=this,t=e.options,r=t.optionLabel,o=t.dataTextField,a=t.dataValueField,s=e.dataSource.view(),l=s.length,d=r,c=0;if(r&&l){for("object"==typeof r?d=r:o&&(d={},o=o.split("."),a=a.split("."),n(d,a,""),n(d,o,r)),d=new i.data.ObservableArray([d]);l>c;c++)d.push(s[c]);s=d}return s},_keydown:function(e){var t=this,n=e.keyCode,r=i.keys,o=t.ul[0];n===r.LEFT?n=r.UP:n===r.RIGHT&&(n=r.DOWN),e.keyCode=n,t._move(e),n===r.HOME?(e.preventDefault(),t._select(o.firstChild)):n===r.END&&(e.preventDefault(),t._select(o.lastChild))},_selectNext:function(e,n){for(var i,r=this,o=n,a=r._data(),s=a.length,l=r.options.ignoreCase,d=function(n,i){return n+="",l&&(n=n.toLowerCase()),0===n.indexOf(e)?(r._select(i),r._triggerEvents(),!0):t};s>n;n++)if(i=r._text(a[n]),i&&d(i,n))return!0;if(o>0)for(n=0;o>=n;n++)if(i=r._text(a[n]),i&&d(i,n))return!0;return!1},_keypress:function(e){var t=this,n=String.fromCharCode(e.charCode||e.keyCode),i=t.selectedIndex,r=t._word;t.options.ignoreCase&&(n=n.toLowerCase())," "===n&&e.preventDefault(),t._last===n&&r.length<=1&&i>-1&&(r||(r=n),t._selectNext(r,i+1))||(t._word=r+n,t._last=n,t._search())},_popup:function(){o.fn._popup.call(this),this.popup.one("open",function(){this.wrapper=i.wrap(this.element).addClass("km-popup")})},_search:function(){var e=this,n=e.dataSource,i=e.selectedIndex,r=e._word;return clearTimeout(e._typing),e._typing=setTimeout(function(){e._word=""},e.options.delay),e.ul[0].firstChild?(e._selectNext(r,i),e._triggerEvents(),t):(n.one(c,function(){n.data()[0]&&e._selectNext(r,i)}).fetch(),t)},_select:function(e){var n,i,o,a=this,s=a._current,l=a._data();e=a._get(e),e&&e[0]&&!e.hasClass(m)&&(s&&s.removeClass(m),o=r.List.inArray(e[0],a.ul[0]),o>-1&&(l=l[o],i=a._text(l),n=a._value(l),a.selectedIndex=o,a.text(i),a._accessor(n!==t?n:i,o),a._selectedValue=a._accessor(),a.current(e.addClass(m)),a._optionID&&a._current.attr("aria-selected",!0)))},_triggerEvents:function(){this.popup.visible()||(this._triggerCascade(),this._change())},_mobile:function(){var e=this,t=e.popup,n=t.element.parents(".km-root").eq(0);n.length&&a&&(t.options.animation.open.effects=a.android||a.meego?"fadeIn":a.ios||a.wp?"slideIn:up":t.options.animation.open.effects)},_span:function(){var t,n=this,i=n.wrapper,r="span.k-input";t=i.find(r),t[0]||(i.append('<span unselectable="on" class="k-dropdown-wrap k-state-default"><span unselectable="on" class="k-input">&nbsp;</span><span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-arrow-s">select</span></span></span>').append(n.element),t=i.find(r)),n.span=t,n._inputWrapper=e(i[0].firstChild),n._arrow=i.find(".k-icon").mousedown(function(e){e.preventDefault()})},_wrapper:function(){var e,t=this,n=t.element,i=n[0];e=n.parent(),e.is("span.k-widget")||(e=n.wrap("<span />").parent(),e[0].style.cssText=i.style.cssText),n.hide(),t._focused=t.wrapper=e.addClass("k-widget k-dropdown k-header").addClass(i.className).css("display","").attr({unselectable:"on",role:"listbox","aria-haspopup":!0,"aria-expanded":!1})},_clearSelection:function(){var e=this,n=e.options.optionLabel;return e.dataSource.view()[0]&&n?(e.select(0),t):(e.text(n),e.element.val(""),e.selectedIndex=-1,t)}});r.plugin(w)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui,r=i.List,o=i.Select,a=n.support,s=a.placeholder,l=n._activeElement,d=n.keys,c=".kendoComboBox",u="click"+c,p="mousedown"+c,f="disabled",h="readonly",g="change",m="k-state-default",v="k-state-focused",_="k-state-disabled",b="aria-disabled",w="aria-readonly",y="k-state-selected",k="filter",x="accept",C="rebind",T="mouseenter"+c+" mouseleave"+c,S=null,D=e.proxy,A=o.extend({init:function(t,i){var r,a=this;a.ns=c,i=e.isArray(i)?{dataSource:i}:i,o.fn.init.call(a,t,i),a._focusHandler=function(){a.input.focus()},i=a.options,t=a.element.on("focus"+c,a._focusHandler),i.placeholder=i.placeholder||t.attr("placeholder"),a._reset(),a._wrapper(),a._input(),a._tabindex(a.input),a._popup(),a._dataSource(),a._ignoreCase(),a._enable(),a._cascade(),a._aria(),a._oldIndex=a.selectedIndex=-1,i.autoBind?a._filterSource():(r=i.text,!r&&a._isSelect&&(r=t.children(":selected").text()),r&&(a.input.val(r),a._prev=r)),r||a._placeholder(),n.notify(a)},options:{name:"ComboBox",enabled:!0,index:-1,text:null,value:null,autoBind:!0,delay:200,dataTextField:"",dataValueField:"",minLength:0,height:200,highlightFirst:!0,template:"",filter:"none",placeholder:"",suggest:!1,ignoreCase:!0,animation:{}},events:["open","close",g,"select","dataBinding","dataBound","cascade"],setOptions:function(e){o.fn.setOptions.call(this,e),this._template(),this._accessors(),this._aria()},current:function(e){var n=this,i=n._current;return e===t?i:(i&&i.removeClass(y),o.fn.current.call(n,e),t)},destroy:function(){var e=this;e.input.off(c),e.element.off(c),e._inputWrapper.off(c),o.fn.destroy.call(e)},_editable:function(e){var t=this,n=e.disable,i=e.readonly,r=t._inputWrapper.off(c),o=t.element.add(t.input.off(c)),a=t._arrow.parent().off(u+" "+p);i||n?(r.addClass(n?_:m).removeClass(n?m:_),o.attr(f,n).attr(h,i).attr(b,n).attr(w,i)):(r.addClass(m).removeClass(_).on(T,t._toggleHover),o.removeAttr(f).removeAttr(h).attr(b,!1).attr(w,!1),a.on(u,function(){t.toggle()}).on(p,function(e){e.preventDefault()}),t.input.on("keydown"+c,D(t._keydown,t)).on("focus"+c,function(){r.addClass(v),t._placeholder(!1)}).on("blur"+c,function(){r.removeClass(v),clearTimeout(t._typing),t.options.text!==t.input.val()&&t.text(t.text()),t._placeholder(),t._blur(),t.element.blur()}))},open:function(){var e=this,t=e.dataSource.options.serverFiltering;e.popup.visible()||(!e.ul[0].firstChild||e._state===x&&!t?(e._open=!0,e._state=C,e._filterSource()):(e.popup.open(),e._scroll(e._current)))},refresh:function(){var i,r,o,a,s=this,d=s.ul[0],c=s.options,u=s._state,p=s._data(),f=p.length;s.trigger("dataBinding"),d.innerHTML=n.render(s.template,p),s._height(f),s.popup.visible()&&s.popup._position(),s._isSelect&&(i=s.element[0].firstChild,u===C&&(s._state="",r=s.value()),a=s._option,s._option=t,s._options(p),a&&a[0].selected?s._custom(a.val()):s._bound||i||s._custom("")),f&&(c.highlightFirst&&s.current(e(d.firstChild)),c.suggest&&s.input.val()&&s._request!==t&&s.suggest(e(d.firstChild))),u===k||s._fetch||s._selectItem(),s._open&&(s._open=!1,o=!!f,s._typing&&s.input[0]!==l()&&(o=!1),s.toggle(o),s._typing=t),s._touchScroller&&s._touchScroller.reset(),s._makeUnselectable(),s._hideBusy(),s._bound=!0,s.trigger("dataBound")},search:function(e){e="string"==typeof e?e:this.text();var t=this,n=e.length,i=t.options,r=i.ignoreCase,o=i.filter,a=i.dataTextField;clearTimeout(t._typing),n>=i.minLength&&(t._state=k,"none"===o?t._filter(e):(t._open=!0,t._filterSource({value:r?e.toLowerCase():e,field:a,operator:o,ignoreCase:r})))},suggest:function(e){var n,i=this,o=i.input[0],a=i.text(),s=r.caret(o),l=i._last;return l==d.BACKSPACE||l==d.DELETE?(i._last=t,t):(e=e||"","string"!=typeof e&&(n=r.inArray(e[0],i.ul[0]),e=n>-1?i._text(i.dataSource.view()[n]):""),0>=s&&(s=a.toLowerCase().indexOf(e.toLowerCase())+1),e?(n=e.toLowerCase().indexOf(a.toLowerCase()),n>-1&&(a+=e.substring(n+a.length))):a=a.substring(0,s),a.length===s&&e||(o.value=a,r.selectText(o,s,a.length)),t)},text:function(e){e=null===e?"":e;var n,i=this,r=i._text,o=i.input[0],a=i.options.ignoreCase,s=e;return e===t?o.value:(n=i.dataItem(),n&&r(n)===e?(i._triggerCascade(),t):(a&&(s=s.toLowerCase()),i._select(function(e){return e=r(e),a&&(e=(e+"").toLowerCase()),e===s}),i.selectedIndex<0&&(i._custom(e),o.value=e),i._prev=o.value,i._triggerCascade(),t))},toggle:function(e){var t=this;t._toggle(e)},value:function(e){var n,i=this,r=i.options;return e===t?i._accessor():(null!==e&&(e=""+e),i._selectedValue=e,!i._open&&e&&i._fetchItems(e)||(n=i._index(e),n>-1?i.select(n):(i.current(S),i._custom(e),(r.value!==e||r.text!==i.input.val())&&(i.text(e),i._placeholder())),i._old=i._accessor(),i._oldIndex=i.selectedIndex),t)},_accept:function(e){var t=this;e?t._focus(e):(t.text(t.text()),t._change())},_custom:function(t){var n=this,i=n.element,r=n._option;n._state===k&&(n._state=x),n._isSelect?(r||(r=n._option=e("<option/>"),i.append(r)),r.text(t),r[0].selected=!0):i.val(t),n._selectedValue=t},_filter:function(e){var n=this,i=n.options,r=n.dataSource,o=i.ignoreCase,a=function(i){var r=n._text(i);return r!==t?(r+="",""!==r&&""===e?!1:(o&&(r=r.toLowerCase()),0===r.indexOf(e))):t};return o&&(e=e.toLowerCase()),n.ul[0].firstChild?(-1!==n._highlight(a)&&(i.suggest&&n._current&&n.suggest(n._current),n.open()),n._hideBusy(),t):(r.one(g,function(){r.data()[0]&&n.search(e)}).fetch(),t)},_highlight:function(n){var i,o=this;return n===t||null===n?-1:(n=o._get(n),i=r.inArray(n[0],o.ul[0]),-1==i&&(n=o.options.highlightFirst&&!o.text()?e(o.ul[0].firstChild):S),o.current(n),i)},_input:function(){var t,n=this,i=n.element.removeClass("k-input")[0],r=i.accessKey,o=n.wrapper,a="input.k-input",l=i.name||"";l&&(l='name="'+l+'_input" '),t=o.find(a),t[0]||(o.append('<span tabindex="-1" unselectable="on" class="k-dropdown-wrap k-state-default"><input '+l+'class="k-input" type="text" autocomplete="off"/><span tabindex="-1" unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-arrow-s">select</span></span></span>').append(n.element),t=o.find(a)),t[0].style.cssText=i.style.cssText,i.maxLength>-1&&(t[0].maxLength=i.maxLength),t.addClass(i.className).val(i.value).css({width:"100%",height:i.style.height}).attr({role:"combobox","aria-expanded":!1}).show(),s&&t.attr("placeholder",n.options.placeholder),r&&(i.accessKey="",t[0].accessKey=r),n._focused=n.input=t,n._inputWrapper=e(o[0].firstChild),n._arrow=o.find(".k-icon").attr({role:"button",tabIndex:-1}),i.id&&n._arrow.attr("aria-controls",n.ul[0].id)},_keydown:function(e){var t=this,n=e.keyCode;t._last=n,clearTimeout(t._typing),n==d.TAB||t._move(e)||t._search()},_placeholder:function(e){if(!s){var n,i=this,o=i.input,a=i.options.placeholder;if(a){if(n=i.value(),e===t&&(e=!n),o.toggleClass("k-readonly",e),!e){if(n)return;a=""}o.val(a),a||o[0]!==document.activeElement||r.selectText(o[0],0,0)}}},_search:function(){var e=this;e._typing=setTimeout(function(){var t=e.text();e._prev!==t&&(e._prev=t,e.search(t))},e.options.delay)},_select:function(e){var n,i,r=this,o=r._data(),a=r._highlight(e);r.selectedIndex=a,-1!==a&&(r._state===k&&(r._state=x),r._current.addClass(y),o=o[a],n=r._text(o),i=r._value(o),r._prev=r.input[0].value=n,r._accessor(i!==t?i:n,a),r._selectedValue=r._accessor(),r._placeholder(),r._optionID&&r._current.attr("aria-selected",!0))},_wrapper:function(){var e=this,t=e.element,n=t.parent();n.is("span.k-widget")||(n=t.hide().wrap("<span />").parent(),n[0].style.cssText=t[0].style.cssText),e.wrapper=n.addClass("k-widget k-combobox k-header").addClass(t[0].className).css("display","")},_clearSelection:function(e,t){var n=this,i=e._selectedValue||e.value(),r=i&&-1===e.selectedIndex;(t||!i||r)&&n.value("")}});i.plugin(A)}(window.kendo.jQuery),function(e,t){function n(e,t){var n;if(null===e&&null!==t||null!==e&&null===t)return!1;if(n=e.length,n!==t.length)return!1;for(;n--;)if(e[n]!==t[n])return!1;return!0}function i(e){var t=e.firstChild;return t&&"none"===t.style.display&&(t=o(t,k)),t}function r(e){var t=e.lastChild;return t&&"none"===t.style.display&&(t=o(t,x)),t}function o(e,t){return e=e[t],e&&"none"===e.style.display&&(e=o(e,t)),e}var a=window.kendo,s=a.ui,l=s.List,d=a.keys,c=a._activeElement,u=a.data.ObservableArray,p=e.proxy,f="id",h="li",g="accept",m="filter",v="open",_="close",b="change",w="progress",y="select",k="nextSibling",x="previousSibling",C=' style="display:none"',T="aria-disabled",S="aria-readonly",D="k-state-focused",A="k-loading-hidden",E="k-state-hover",F="k-state-disabled",I="disabled",P="readonly",B=".kendoMultiSelect",z="click"+B,H="keydown"+B,R="mouseenter"+B,M="mouseleave"+B,L=R+" "+M,O=/"/g,N=e.isArray,V=["font-family","font-size","font-stretch","font-style","font-weight","letter-spacing","text-transform","line-height"],U=l.extend({init:function(t,n){var i,r,o=this;o.ns=B,l.fn.init.call(o,t,n),o._wrapper(),o._tagList(),o._input(),o._textContainer(),o._loader(),o._tabindex(o.input),t=o.element.attr("multiple","multiple").hide(),n=o.options,r=n.value,n.placeholder||(n.placeholder=t.data("placeholder")),i=t.attr(f),i&&(o._tagID=i+"_tag_active",i+="_taglist",o.tagList.attr(f,i)),o._aria(i),o._dataSource(),o._ignoreCase(),o._popup(),o._values=[],o._dataItems=[],o._reset(),o._enable(),o._placeholder(),n.autoBind?o.dataSource.fetch():r&&(N(r)||(r=[r]),(e.isPlainObject(r[0])||!n.dataValueField)&&(o._retrieveData=!0,o.dataSource.data(r),o.value(o._initialValues))),a.notify(o)},options:{name:"MultiSelect",enabled:!0,autoBind:!0,highlightFirst:!0,dataTextField:"",dataValueField:"",filter:"startswith",ignoreCase:!0,minLength:0,delay:100,value:null,maxSelectedItems:null,itemTemplate:"",tagTemplate:"",placeholder:"",height:200,animation:{}},events:[v,_,b,y,"dataBinding","dataBound"],setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.options.autoBind&&this.dataSource.fetch()},setOptions:function(e){l.fn.setOptions.call(this,e),this._template(),this._accessors(),this._aria(this.tagList.attr(f))},current:function(e){return this.currentTag(null),l.fn.current.call(this,e)},currentTag:function(e){var n=this;return e===t?n._currentTag:(n._currentTag&&(n._currentTag.removeClass(D).removeAttr(f),n.input.removeAttr("aria-activedescendant")),e&&(e.addClass(D).attr(f,n._tagID),n.input.attr("aria-activedescendant",n._tagID)),n._currentTag=e,t)},dataItems:function(){return this._dataItems},destroy:function(){var e=this,t=e.ns;e.wrapper.off(t),e.tagList.off(t),e.input.off(t),l.fn.destroy.call(e)},_editable:function(t){var n=this,i=t.disable,r=t.readonly,o=n.wrapper.off(B),a=n.tagList.off(B),s=n.element.add(n.input.off(B));r||i?(i?o.addClass(F):o.removeClass(F),s.attr(I,i).attr(P,r).attr(T,i).attr(S,r)):(o.removeClass(F).on(L,n._toggleHover).on("mousedown"+B,function(e){var t=-1!==e.target.className.indexOf("k-delete");e.preventDefault(),t||(n.input[0]!==c()&&n.input.focus(),0===n.options.minLength&&n.open())}),n.input.on(H,p(n._keydown,n)).on("paste"+B,p(n._search,n)).on("focus"+B,function(){n._placeholder(!1)}).on("blur"+B,function(){clearTimeout(n._typing),n._placeholder(),n.close(),n._state===m&&(n._state=g),n.element.blur()}),s.removeAttr(I).removeAttr(P).attr(T,!1).attr(S,!1),a.on(R,h,function(){e(this).addClass(E)}).on(M,h,function(){e(this).removeClass(E)}).on(z,".k-delete",function(t){n._unselect(e(t.target).closest(h)),n._change(),n.close()}))},close:function(){this.popup.close(),this.current(null)},open:function(){var t=this;!t.ul[0].firstChild||t._state===g||t._retrieveData?(t._state="",t._open=!0,t._retrieveData=!1,t._filterSource()):t._visibleItems&&t._allowSelection()&&(t.popup.open(),t.current(t.options.highlightFirst?e(i(t.ul[0])):null))},toggle:function(e){this[e?v:_]()},refresh:function(){var t,n=this,r=null;n.trigger("dataBinding"),t=n._render(n.dataSource.view()),n._height(t),n._setInitialValues&&(n._setInitialValues=!1,n.value(n._initialValues)),n._open&&(n._open=!1,n.toggle(t)),n.popup.visible()&&(n.popup._position(),n.options.highlightFirst&&(r=e(i(n.ul[0])))),n.current(r),n._touchScroller&&n._touchScroller.reset(),n._makeUnselectable(),n._hideBusy(),n.trigger("dataBound")},search:function(e){var t=this,n=t.options,i=n.ignoreCase,r=n.filter,o=n.dataTextField,a=t.input.val();n.placeholder===a&&(a=""),clearTimeout(t._typing),e="string"==typeof e?e:a,e.length>=n.minLength&&(t._state=m,t._open=!0,t._filterSource({value:i?e.toLowerCase():e,field:o,operator:r,ignoreCase:i}))},value:function(n){var i,r=this,o=e(r.tagList[0].children),a=o.length,s=0;if(n===t)return r._values;if(!r._fetchItems(n)){for(;a>s;s++)r._unselect(o.eq(s));if(null!==n){for(n=N(n)||n instanceof u?n:[n],s=0,a=n.length;a>s;s++)i=r._index(n[s]),i>-1&&r._select(i);r._old=r._values.slice()}}},_dataSource:function(){var e=this,t=e.element,n=e.options,i=n.dataSource||{};i=N(i)?{data:i}:i,i.select=t,i.fields=[{field:n.dataTextField},{field:n.dataValueField}],e.dataSource&&e._refreshHandler?e._unbindDataSource():(e._refreshHandler=p(e.refresh,e),e._progressHandler=p(e._showBusy,e)),e.dataSource=a.data.DataSource.create(i).bind(b,e._refreshHandler).bind(w,e._progressHandler)},_fetchItems:function(n){var i=this,r=e.isArray(n)&&0===n.length;if(!r&&n)return i._fetch||i.ul[0].firstChild?t:(i.dataSource.one(b,function(){i.value(n),i._fetch=!1}),i._fetch=!0,i.dataSource.fetch(),!0)},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){setTimeout(function(){t.value(t._initialValues)})},t._form=r.on("reset",t._resetHandler))},_initValue:function(){var e=this,t=e.options.value||e.element.val();null===t?t=[]:(N(t)||(t=[t]),t=e._mapValues(t)),e._old=e._initialValues=t,e._setInitialValues=!!t[0]},_mapValues:function(t){var n=this;return t&&e.isPlainObject(t[0])&&(t=e.map(t,function(e){return n._value(e)})),t},_change:function(){var e=this,t=e.value();n(t,e._old)||(e._old=t.slice(),e.trigger(b),e.element.trigger(b))},_click:function(n){var i=this,r=e(n.currentTarget);if(!n.isDefaultPrevented()){if(i.trigger(y,{item:r}))return i.close(),t;i._select(r),i._change(),i.close()}},_item:function(e,t){return e=e[t](),e[0]&&!e.is(":visible")&&(e=this._item(e,t)),e},_keydown:function(n){var s=this,l=n.keyCode,c=s._currentTag,u=s._current,p=s.input.val(),f=a.support.isRtl(s.wrapper),h=s.popup.visible();if(l===d.DOWN){if(n.preventDefault(),!h)return s.open(),t;u=u?o(u[0],k):s.ul[0].firstChild,u&&s.current(e(u))}else if(l===d.UP)h&&(u=u?o(u[0],x):s.ul[0].lastChild,s.current(e(u)),s._current[0]||s.close()),n.preventDefault();else if(l===d.LEFT&&!f||l===d.RIGHT&&f)p||(c=c?c.prev():e(s.tagList[0].lastChild),c[0]&&s.currentTag(c));else if(l===d.RIGHT&&!f||l===d.LEFT&&f)!p&&c&&(c=c.next(),s.currentTag(c[0]?c:null));else if(l===d.ENTER&&h){if(u){if(s.trigger(y,{item:u}))return s.close(),t;s._select(u)}s._change(),s.close(),n.preventDefault()}else l===d.ESC?(h?n.preventDefault():s.currentTag(null),s.close()):l===d.HOME?h?s.current(e(i(s.ul[0]))):p||(c=s.tagList[0].firstChild,c&&s.currentTag(e(c))):l===d.END?h?s.current(e(r(s.ul[0]))):p||(c=s.tagList[0].lastChild,c&&s.currentTag(e(c))):l!==d.DELETE&&l!==d.BACKSPACE||p?(clearTimeout(s._typing),setTimeout(function(){s._scale()}),s._search()):(l!==d.BACKSPACE||c||(c=e(s.tagList[0].lastChild)),c&&c[0]&&(s._unselect(c),s._change(),s.close()))},_hideBusy:function(){var e=this;clearTimeout(e._busy),e.input.attr("aria-busy",!1),e._loading.addClass(A),e._busy=null},_showBusy:function(){var e=this;e._busy||(e._busy=setTimeout(function(){e.input.attr("aria-busy",!0),e._loading.removeClass(A)},100))},_placeholder:function(e){var n=this,i=n.input;e===t?(e=!1,i[0]!==c()&&(e=!n._dataItems[0]),n.wrapper.removeClass(D)):n.wrapper.addClass(D),n._prev="",i.toggleClass("k-readonly",e).val(e?n.options.placeholder:""),i[0]===document.activeElement&&l.selectText(i[0],0,0),n._scale()},_scale:function(){var e,t=this,n=t.wrapper,i=n.width(),r=t._span.text(t.input.val());n.is(":visible")?e=r.width()+25:(r.appendTo(document.documentElement),i=e=r.width()+25,r.appendTo(n)),t.input.width(e>i?i:e)},_option:function(e,n){var i="<option",r=this._text(e),o=this._value(e);return o!==t&&(o+="",-1!==o.indexOf('"')&&(o=o.replace(O,"&quot;")),i+=' value="'+o+'"'),n&&(i+=' selected="selected"'),i+=">",r!==t&&(i+=a.htmlEncode(r)),i+="</option>"},_render:function(e){for(var t,n,i=this,r=e.length,o=i.itemTemplate,a=i._dataItems.slice(0),s=0,l=0,d="",c="";r>l;l++)t=e[l],n=i._selected(a,t),c+=o(t,l,n),d+=i._option(t,n),n||(s+=1);if(r=a.length)for(l=0;r>l;l++)d+=i._option(a[l],!0);return i.ul[0].innerHTML=c,i.element.html(d),i._visibleItems=s,s},_selected:function(e,n){var i,r=this,o=r._text,a=r._value,s=a(n),l=e.length,d=!1,c=0;for(s===t&&(s=o(n));l>c;c++)if(n=e[c],i=a(n),i===t&&(i=o(n)),i!==t&&i===s){d=!0;break}return d&&e.splice(c,1),d},_search:function(){var e=this;e._typing=setTimeout(function(){var t=e.input.val();e._prev!==t&&(e._prev=t,e.search(t))},e.options.delay)},_allowSelection:function(){var e=this.options.maxSelectedItems;return null===e||e>this._values.length},_select:function(e){var t,n,i=this,r=i._values;i._allowSelection()&&(isNaN(e)?n=e.hide().data("idx"):(n=e,i.ul[0].children[n].style.display="none"),i.element[0].children[n].selected=!0,t=i.dataSource.view()[n],i.tagList.append(i.tagTemplate(t)),i._dataItems.push(t),r.push(i._dataValue(t)),i._visibleItems-=1,i.currentTag(null),i._placeholder(),i._height(i._visibleItems),i._state===m&&(i._state=g))},_unselect:function(t){var n,i,r,o,a,s=this,l=t.index();if(t.remove(),s.currentTag(null),s._values.splice(l,1),n=s._dataItems.splice(l,1)[0],i=s._dataValue(n),l=s._index(i),-1!==l)e(s.ul[0].children[l]).show(),s.element[0].children[l].selected=!1,s._visibleItems+=1,s._height(s._visibleItems);else for(l=s.dataSource.view().length,r=s.element[0].children,a=r.length;a>l;l++)if(o=r[l],o.value==i){o.selected=!1;break}s._placeholder()},_template:function(){var e,t=this,n=t.options,i=n.itemTemplate,r=n.tagTemplate,o=n.dataSource;t.element[0].length&&!o&&(n.dataTextField=n.dataTextField||"text",n.dataValueField=n.dataValueField||"value"),e=a.template("#:"+a.expr(n.dataTextField,"data")+"#",{useWithBlock:!1}),i=i?a.template(i):e,r=r?a.template(r):e,t.itemTemplate=function(e,t,n){return'<li tabindex="-1" role="option" data-idx="'+t+'" unselectable="on" class="k-item"'+(n?C:"")+">"+i(e)+"</li>"},t.tagTemplate=function(e){return'<li class="k-button" unselectable="on"><span unselectable="on">'+r(e)+'</span><span unselectable="on" class="k-icon k-delete">delete</span></li>'}},_input:function(){var t=this,n=t.element[0].accessKey,i=t._innerWrapper.children("input.k-input");i[0]||(i=e('<input class="k-input" style="width: 25px" />').appendTo(t._innerWrapper)),t.element.removeAttr("accesskey"),t._focused=t.input=i.attr({accesskey:n,role:"listbox","aria-expanded":!1})},_tagList:function(){var t=this,n=t._innerWrapper.children("ul");n[0]||(n=e('<ul role="listbox" unselectable="on" class="k-reset"/>').appendTo(t._innerWrapper)),t.tagList=n},_loader:function(){this._loading=e('<span class="k-icon k-loading '+A+'"></span>').insertAfter(this.input)},_textContainer:function(){var t=a.getComputedStyles(this.input[0],V);t.position="absolute",t.visibility="hidden",this._span=e("<span/>").css(t).appendTo(this.wrapper)},_wrapper:function(){var t=this,n=t.element,i=n.parent("span.k-multiselect");i[0]||(i=n.wrap('<div class="k-widget k-multiselect k-header" unselectable="on" />').parent(),i[0].style.cssText=n[0].style.cssText,e('<div class="k-multiselect-wrap k-floatwrap" unselectable="on" />').insertBefore(n)),t.wrapper=i.addClass(n[0].className).css("display",""),t._innerWrapper=e(i[0].firstChild)}});s.plugin(U)}(window.kendo.jQuery),function(e,t,n){function i(e,t,n){n=a(n),n&&!n.equals(e.color())&&("change"==t&&(e._value=n),n=1!=n.a?n.toCssRgba():n.toCss(),e.trigger(t,{value:n}))}function r(e,t,n){for(n||(n="0"),e=e.toString(16);t>e.length;)e="0"+e;return e}function o(e){return parseFloat((+e).toFixed(3))}function a(e,i){if(null==e||"transparent"==e)return null;if(e instanceof A)return e;var r=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(e);if(r)return new F(t(r[1],16),t(r[2],16),t(r[3],16),1);if(r=/^#?([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(e))return new F(t(r[1]+r[1],16),t(r[2]+r[2],16),t(r[3]+r[3],16),1);if(r=/^rgb\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/.exec(e))return new F(t(r[1],10),t(r[2],10),t(r[3],10),1);if(r=/^rgba\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9.]+)\s*\)/.exec(e))return new F(t(r[1],10),t(r[2],10),t(r[3],10),parseFloat(r[4]));if(r=/^rgb\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*\)/.exec(e))return new E(parseFloat(r[1])/100,parseFloat(r[2])/100,parseFloat(r[3])/100,1);if(r=/^rgba\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9.]+)\s*\)/.exec(e))return new E(parseFloat(r[1])/100,parseFloat(r[2])/100,parseFloat(r[3])/100,parseFloat(r[4]));if(!i)throw Error("Cannot parse color: "+e);return n}function s(e,t,n){var i,r;return e=Array.prototype.slice.call(e),i=e.length,r=e.indexOf(t),0>r?0>n?e[i-1]:e[0]:(r+=n,0>r?r+=i:r%=i,e[r])}function l(e){e.preventDefault()}function d(e,t){return function(){return e.apply(t,arguments)}}var c=window.kendo,u=c.Class,p=c.ui,f=p.Widget,h=c.keys,g="background-color",m="k-state-selected",v="000000,7f7f7f,880015,ed1c24,ff7f27,fff200,22b14c,00a2e8,3f48cc,a349a4,ffffff,c3c3c3,b97a57,ffaec9,ffc90e,efe4b0,b5e61d,99d9ea,7092be,c8bfe7",_="FFFFFF,FFCCFF,FF99FF,FF66FF,FF33FF,FF00FF,CCFFFF,CCCCFF,CC99FF,CC66FF,CC33FF,CC00FF,99FFFF,99CCFF,9999FF,9966FF,9933FF,9900FF,FFFFCC,FFCCCC,FF99CC,FF66CC,FF33CC,FF00CC,CCFFCC,CCCCCC,CC99CC,CC66CC,CC33CC,CC00CC,99FFCC,99CCCC,9999CC,9966CC,9933CC,9900CC,FFFF99,FFCC99,FF9999,FF6699,FF3399,FF0099,CCFF99,CCCC99,CC9999,CC6699,CC3399,CC0099,99FF99,99CC99,999999,996699,993399,990099,FFFF66,FFCC66,FF9966,FF6666,FF3366,FF0066,CCFF66,CCCC66,CC9966,CC6666,CC3366,CC0066,99FF66,99CC66,999966,996666,993366,990066,FFFF33,FFCC33,FF9933,FF6633,FF3333,FF0033,CCFF33,CCCC33,CC9933,CC6633,CC3333,CC0033,99FF33,99CC33,999933,996633,993333,990033,FFFF00,FFCC00,FF9900,FF6600,FF3300,FF0000,CCFF00,CCCC00,CC9900,CC6600,CC3300,CC0000,99FF00,99CC00,999900,996600,993300,990000,66FFFF,66CCFF,6699FF,6666FF,6633FF,6600FF,33FFFF,33CCFF,3399FF,3366FF,3333FF,3300FF,00FFFF,00CCFF,0099FF,0066FF,0033FF,0000FF,66FFCC,66CCCC,6699CC,6666CC,6633CC,6600CC,33FFCC,33CCCC,3399CC,3366CC,3333CC,3300CC,00FFCC,00CCCC,0099CC,0066CC,0033CC,0000CC,66FF99,66CC99,669999,666699,663399,660099,33FF99,33CC99,339999,336699,333399,330099,00FF99,00CC99,009999,006699,003399,000099,66FF66,66CC66,669966,666666,663366,660066,33FF66,33CC66,339966,336666,333366,330066,00FF66,00CC66,009966,006666,003366,000066,66FF33,66CC33,669933,666633,663333,660033,33FF33,33CC33,339933,336633,333333,330033,00FF33,00CC33,009933,006633,003333,000033,66FF00,66CC00,669900,666600,663300,660000,33FF00,33CC00,339900,336600,333300,330000,00FF00,00CC00,009900,006600,003300,000000",b={apply:"Apply",cancel:"Cancel"},w=".kendoColorTools",y="click"+w,k="keydown"+w,x=c.support.browser,C=x.msie&&x.version<9,T=f.extend({init:function(e,t){var n,i=this;f.fn.init.call(i,e,t),e=i.element,t=i.options,i._value=t.value=a(t.value),n=i._ariaId=t.ariaId,n&&e.attr("aria-labelledby",n),t._standalone&&(i._triggerSelect=i._triggerChange)},options:{name:"ColorSelector",value:null,_standalone:!0},events:["change","select","cancel"],color:function(e){return e!==n&&(this._value=a(e),this._updateUI(this._value)),this._value},value:function(e){return e=this.color(e),e&&(e=this.options.opacity?e.toCssRgba():e.toCss()),e||null},enable:function(t){0===arguments.length&&(t=!0),t?e(".k-disabled-overlay",this.wrapper).remove():this.wrapper.append("<div class='k-disabled-overlay'></div>"),this._onEnable(t)
},_select:function(e,t){var n=this._value;e=this.color(e),t||(e.equals(n)?this._standalone||this.trigger("cancel"):this.trigger("change",{value:this.value()}))},_triggerSelect:function(e){i(this,"select",e)},_triggerChange:function(e){i(this,"change",e)},destroy:function(){this.element&&this.element.off(w),this.wrapper&&this.wrapper.off(w).find("*").off(w),this.wrapper=null,f.fn.destroy.call(this)},_updateUI:e.noop,_selectOnHide:function(){return null},_cancel:function(){this.trigger("cancel")}}),S=T.extend({init:function(t,n){var i,r,o,s,l=this;if(T.fn.init.call(l,t,n),t=l.wrapper=l.element,n=l.options,i=n.palette,"websafe"==i?(i=_,n.columns=18):"basic"==i&&(i=v),"string"==typeof i&&(i=i.split(",")),e.isArray(i)&&(i=e.map(i,function(e){return a(e)})),t.addClass("k-widget k-colorpalette").append(e(l._template({colors:i,tileSize:n.tileSize,value:l._value,id:n.ariaId}))).on(y,".k-item",function(t){l._select(e(t.currentTarget).css(g))}).attr("tabIndex",0).on(k,d(l._keydown,l)),s=n.tileSize){if(/number|string/.test(typeof s))r=o=parseFloat(s);else{if("object"!=typeof s)throw Error("Unsupported value for the 'tileSize' argument");r=parseFloat(s.width),o=parseFloat(s.height)}t.find(".k-item").css({width:r-2,height:o-2})}n.columns&&t.css("width",n.columns*(r||14))},focus:function(){this.wrapper.focus()},options:{name:"ColorPalette",columns:10,tileSize:null,palette:"basic"},_onEnable:function(e){e?this.wrapper.removeAttr("tabIndex"):this.wrapper.attr("tabIndex",0)},_keydown:function(t){var n,i,r=this,o=r.wrapper,d=o.find(".k-item"),c=d.filter("."+m).get(0),u=t.keyCode;if(u==h.LEFT?n=s(d,c,-1):u==h.RIGHT?n=s(d,c,1):u==h.DOWN?n=s(d,c,r.options.columns):u==h.UP?n=s(d,c,-r.options.columns):u==h.ENTER?(l(t),c&&this._select(e(c).css(g))):u==h.ESC&&this._cancel(),n){l(t),n=e(n),e(c).removeClass(m).removeAttr("aria-selected"),n.addClass(m).attr("aria-selected",!0);try{i=a(n.css(g)),r._triggerSelect(i)}catch(p){}}},_updateUI:function(t){var n=this,i=null;n.wrapper.find(".k-item."+m).removeClass(m).removeAttr("aria-selected"),n.wrapper.find(".k-item").each(function(){var n=a(e(this).css(g));n&&n.equals(t)&&(i=this)}),e(i).addClass(m).attr("aria-selected",!0)},_template:c.template('<ul class="k-palette k-reset"># for (var i = 0; i < colors.length; i++) { #<li unselectable="on" style="background-color:#= colors[i].toCss() #" #=(id && i === 0) ? "id=\\""+id+"\\" aria-selected=\\"true\\"" : "" # class="k-item #= colors[i].equals(value) ? "'+m+'" : "" #" aria-label="#= colors[i].toCss() #">'+"</li>"+"# } #"+"</ul>")}),D=T.extend({init:function(t,n){var i=this;T.fn.init.call(i,t,n),n=i.options,t=i.element,i.wrapper=t.addClass("k-widget k-flatcolorpicker").append(i._template(n)),i._hueElements=e(".k-hsv-rectangle, .k-transparency-slider .k-slider-track",t),i._selectedColor=e(".k-selected-color-display",t),i._colorAsText=e("input.k-color-value",t),i._sliders(),i._hsvArea(),i._updateUI(i._value||new E(1,0,0,1)),t.find("input.k-color-value").on(k,function(t){var n,r,o=this;if(t.keyCode==h.ENTER)try{n=a(o.value),r=i.color(),i._select(n,n.equals(r))}catch(s){e(o).addClass("k-state-error")}else i.options.autoupdate&&setTimeout(function(){var e=a(o.value,!0);e&&i._updateUI(e,!0)},10)}).end().on(y,".k-controls button.apply",function(){i._select(i._getHSV())}).on(y,".k-controls button.cancel",function(){i._updateUI(i.color()),i._cancel()}),C&&i._applyIEFilter()},destroy:function(){this._hueSlider.destroy(),this._opacitySlider&&this._opacitySlider.destroy(),this._hueSlider=this._opacitySlider=this._hsvRect=this._hsvHandle=this._hueElements=this._selectedColor=this._colorAsText=null,T.fn.destroy.call(this)},options:{name:"FlatColorPicker",opacity:!1,buttons:!1,input:!0,preview:!0,autoupdate:!0,messages:b},_applyIEFilter:function(){var e=this.element.find(".k-hue-slider .k-slider-track")[0],t=e.currentStyle.backgroundImage;t=t.replace(/^url\([\'\"]?|[\'\"]?\)$/g,""),e.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+t+"', sizingMethod='scale')"},_sliders:function(){function e(e){n._updateUI(n._getHSV(e.value,null,null,null))}function t(e){n._updateUI(n._getHSV(null,null,null,e.value/100))}var n=this,i=n.element;n._hueSlider=i.find(".k-hue-slider").kendoSlider({min:0,max:359,tickPlacement:"none",showButtons:!1,slide:e,change:e}).data("kendoSlider"),n._opacitySlider=i.find(".k-transparency-slider").kendoSlider({min:0,max:100,tickPlacement:"none",showButtons:!1,slide:t,change:t}).data("kendoSlider")},_hsvArea:function(){function e(e,n){var i=this.offset,r=e-i.left,o=n-i.top,a=this.width,s=this.height;r=0>r?0:r>a?a:r,o=0>o?0:o>s?s:o,t._svChange(r/a,1-o/s)}var t=this,n=t.element,i=n.find(".k-hsv-rectangle"),r=i.find(".k-draghandle").attr("tabIndex",0).on(k,d(t._keydown,t));t._hsvEvents=new c.UserEvents(i,{global:!0,press:function(t){this.offset=c.getOffset(i),this.width=i.width(),this.height=i.height(),r.focus(),e.call(this,t.x.location,t.y.location)},start:function(){i.addClass("k-dragging"),r.focus()},move:function(t){t.preventDefault(),e.call(this,t.x.location,t.y.location)},end:function(){i.removeClass("k-dragging")}}),t._hsvRect=i,t._hsvHandle=r},_onEnable:function(e){this._hueSlider.enable(e),this._opacitySlider&&this._opacitySlider.enable(e),this.wrapper.find("input").attr("disabled",!e);var t=this._hsvRect.find(".k-draghandle");e?t.attr("tabIndex",0):t.removeAttr("tabIndex")},_keydown:function(e){function t(t,n){var r=i._getHSV();r[t]+=n*(e.shiftKey?.01:.05),r[t]<0&&(r[t]=0),r[t]>1&&(r[t]=1),i._updateUI(r),l(e)}function n(t){var n=i._getHSV();n.h+=t*(e.shiftKey?1:5),n.h<0&&(n.h=0),n.h>359&&(n.h=359),i._updateUI(n),l(e)}var i=this;switch(e.keyCode){case h.LEFT:e.ctrlKey?n(-1):t("s",-1);break;case h.RIGHT:e.ctrlKey?n(1):t("s",1);break;case h.UP:t(e.ctrlKey&&i._opacitySlider?"a":"v",1);break;case h.DOWN:t(e.ctrlKey&&i._opacitySlider?"a":"v",-1);break;case h.ENTER:i._select(i._getHSV());break;case h.F2:i.wrapper.find("input.k-color-value").focus().select();break;case h.ESC:i._cancel()}},focus:function(){this._hsvHandle.focus()},_getHSV:function(e,t,n,i){var r=this._hsvRect,o=r.width(),a=r.height(),s=this._hsvHandle.position();return null==e&&(e=this._hueSlider.value()),null==t&&(t=s.left/o),null==n&&(n=1-s.top/a),null==i&&(i=this._opacitySlider?this._opacitySlider.value()/100:1),new I(e,t,n,i)},_svChange:function(e,t){var n=this._getHSV(null,e,t,null);this._updateUI(n)},_updateUI:function(e,t){var n=this,i=n._hsvRect;e&&(this._colorAsText.removeClass("k-state-error"),n._selectedColor.css(g,e.toDisplay()),t||n._colorAsText.val(n._opacitySlider?e.toCssRgba():e.toCss()),n._triggerSelect(e),e=e.toHSV(),n._hsvHandle.css({left:e.s*i.width()+"px",top:(1-e.v)*i.height()+"px"}),n._hueElements.css(g,new I(e.h,1,1,1).toCss()),n._hueSlider.value(e.h),n._opacitySlider&&n._opacitySlider.value(100*e.a))},_selectOnHide:function(){return this.options.buttons?null:this._getHSV()},_template:c.template('# if (preview) { #<div class="k-selected-color"><div class="k-selected-color-display"><input class="k-color-value" #= !data.input ? \'style="visibility: hidden;"\' : "" #></div></div># } #<div class="k-hsv-rectangle"><div class="k-hsv-gradient"></div><div class="k-draghandle"></div></div><input class="k-hue-slider" /># if (opacity) { #<input class="k-transparency-slider" /># } ## if (buttons) { #<div unselectable="on" class="k-controls"><button class="k-button apply">#: messages.apply #</button> <button class="k-button cancel">#: messages.cancel #</button></div># } #')}),A=u.extend({toHSV:function(){return this},toRGB:function(){return this},toHex:function(){return this.toBytes().toHex()},toBytes:function(){return this},toCss:function(){return"#"+this.toHex()},toCssRgba:function(){var e=this.toBytes();return"rgba("+e.r+", "+e.g+", "+e.b+", "+o(this.a)+")"},toDisplay:function(){return C?this.toCss():this.toCssRgba()},equals:function(e){return e===this||null!==e&&this.toCssRgba()==a(e).toCssRgba()},diff:function(e){if(null==e)return 0/0;var t=this.toBytes();return e=e.toBytes(),Math.sqrt(Math.pow(.3*(t.r-e.r),2)+Math.pow(.59*(t.g-e.g),2)+Math.pow(.11*(t.b-e.b),2))},clone:function(){var e=this.toBytes();return e===this&&(e=new F(e.r,e.g,e.b,e.a)),e}}),E=A.extend({init:function(e,t,n,i){this.r=e,this.g=t,this.b=n,this.a=i},toHSV:function(){var e,t,n=this.r,i=this.g,r=this.b,o=Math.min(n,i,r),a=Math.max(n,i,r),s=a,l=a-o;return 0===l?new I(0,0,s,this.a):(0!==a?(t=l/a,e=n==a?(i-r)/l:i==a?2+(r-n)/l:4+(n-i)/l,e*=60,0>e&&(e+=360)):(t=0,e=-1),new I(e,t,s,this.a))},toBytes:function(){return new F(255*this.r,255*this.g,255*this.b,this.a)}}),F=E.extend({init:function(e,t,n,i){this.r=Math.round(e),this.g=Math.round(t),this.b=Math.round(n),this.a=i},toRGB:function(){return new E(this.r/255,this.g/255,this.b/255,this.a)},toHSV:function(){return this.toRGB().toHSV()},toHex:function(){return r(this.r,2)+r(this.g,2)+r(this.b,2)},toBytes:function(){return this}}),I=A.extend({init:function(e,t,n,i){this.h=e,this.s=t,this.v=n,this.a=i},toRGB:function(){var e,t,n,i,r,o,a,s,l=this.h,d=this.s,c=this.v;if(0===d)t=n=i=c;else switch(l/=60,e=Math.floor(l),r=l-e,o=c*(1-d),a=c*(1-d*r),s=c*(1-d*(1-r)),e){case 0:t=c,n=s,i=o;break;case 1:t=a,n=c,i=o;break;case 2:t=o,n=c,i=s;break;case 3:t=o,n=a,i=c;break;case 4:t=s,n=o,i=c;break;default:t=c,n=o,i=a}return new E(t,n,i,this.a)},toBytes:function(){return this.toRGB().toBytes()}}),P=f.extend({init:function(t,n){var i,r,o,s=this;f.fn.init.call(s,t,n),n=s.options,t=s.element,i=t.attr("value")||t.val(),i=i?a(i,!0):a(n.value,!0),s._value=n.value=i,r=s.wrapper=e(s._template(n)),t.hide().after(r),t.is("input")&&t.appendTo(r),s.enable(!t.attr("disabled")),o=t.attr("accesskey"),o&&(t.attr("accesskey",null),r.attr("accesskey",o)),s.bind("activate",function(e){e.isDefaultPrevented()||s.toggle()}),s._updateUI(i)},destroy:function(){this.wrapper.off(w).find("*").off(w),this._popup&&(this._selector.destroy(),this._popup.destroy()),this._selector=this._popup=this.wrapper=null,f.fn.destroy.call(this)},enable:function(e){var t=this,n=t.wrapper,i=n.children(".k-picker-wrap"),r=i.find(".k-select");0===arguments.length&&(e=!0),t.element.attr("disabled",!e),n.attr("disabled",!e),r.off(w).on("mousedown"+w,l),e?n.removeClass("k-state-disabled").attr("tabIndex",0).on("mouseenter"+w,function(){i.addClass("k-state-hover")}).on("mouseleave"+w,function(){i.removeClass("k-state-hover")}).on("focus"+w,function(){i.addClass("k-state-focused")}).on("blur"+w,function(){i.removeClass("k-state-focused")}).on(k,d(t._keydown,t)).on(y,".k-icon",d(t.toggle,t)).on(y,t.options.toolIcon?".k-tool-icon":".k-selected-color",function(){t.trigger("activate")}):n.addClass("k-state-disabled").removeAttr("tabIndex").add("*",n).off(w)},_template:c.template('<span class="k-widget k-colorpicker k-header"><span class="k-picker-wrap k-state-default"># if (toolIcon) { #<span class="k-tool-icon #= toolIcon #"><span class="k-selected-color"></span></span># } else { #<span class="k-selected-color"></span># } #<span class="k-select" unselectable="on"><span class="k-icon k-i-arrow-s" unselectable="on"></span></span></span></span>'),options:{name:"ColorPicker",palette:null,columns:10,toolIcon:null,value:null,messages:b,opacity:!1,buttons:!0,preview:!0},events:["activate","change","select","open","close"],open:function(){this._getPopup().open()},close:function(){this._getPopup().close()},toggle:function(){this._getPopup().toggle()},color:T.fn.color,value:T.fn.value,_select:T.fn._select,_triggerSelect:T.fn._triggerSelect,_isInputTypeColor:function(){var e=this.element[0];return/^input$/i.test(e.tagName)&&/^color$/i.test(e.type)},_updateUI:function(e){e&&(this._isInputTypeColor()||1==e.a?this.element.val(e.toCss()):this.element.val(e.toCssRgba())),this._triggerSelect(e),this.wrapper.find(".k-selected-color").css(g,e?e.toDisplay():"transparent")},_keydown:function(e){var t=e.keyCode;this._getPopup().visible()?(t==h.ESC?this._selector._cancel():this._selector._keydown(e),l(e)):(t==h.ENTER||t==h.DOWN)&&(this.open(),l(e))},_getPopup:function(){var t,i,r,o=this,s=o._popup;return s||(t=this.options,i=t.palette?S:D,t._standalone=!1,delete t.select,delete t.change,delete t.cancel,r=this._selector=new i(e("<div />").appendTo(document.body),t),o._popup=s=r.wrapper.kendoPopup({anchor:o.wrapper}).data("kendoPopup"),r.bind({select:function(e){o._updateUI(a(e.value))},change:function(){o._select(r.color()),o.close()},cancel:function(){o.close()}}),s.bind({close:function(e){if(o.trigger("close"))return e.preventDefault(),n;o.wrapper.children(".k-picker-wrap").removeClass("k-state-focused");var t=r._selectOnHide();t?o._select(t):(o.wrapper.focus(),o._updateUI(o.color()))},open:function(e){o.trigger("open")?e.preventDefault():o.wrapper.children(".k-picker-wrap").addClass("k-state-focused")},activate:function(){r._select(o.color(),!0),r.focus(),o.wrapper.children(".k-picker-wrap").addClass("k-state-focused")}})),s}});p.plugin(S),p.plugin(D),p.plugin(P),c.parseColor=a,c.Color={fromBytes:function(e,t,n,i){return new F(e,t,n,null!=i?i:1)},fromRGB:function(e,t,n,i){return new E(e,t,n,null!=i?i:1)},fromHSV:function(e,t,n,i){return new I(e,t,n,null!=i?i:1)}}}(jQuery,parseInt),function(e,t){function n(t){return e.trim(t).replace(/&nbsp;/gi,"")}var i=window.kendo,r=i.ui,o=e.proxy,a=e.extend,s=e.grep,l=e.map,d=e.inArray,c="k-state-selected",u="asc",p="desc",f="change",h="init",g="kendoPopup",m="kendoFilterMenu",v="kendoMenu",_=".kendoColumnMenu",b=r.Widget,w=b.extend({init:function(t,n){var r,a=this;b.fn.init.call(a,t,n),t=a.element,n=a.options,a.owner=n.owner,a.dataSource=n.dataSource,a.field=t.attr(i.attr("field")),r=t.find(".k-header-column-menu"),r[0]||(r=t.prepend('<a class="k-header-column-menu" href="#"><span class="k-icon k-i-arrowhead-s"/></a>').find(".k-header-column-menu")),a.link=r.attr("tabindex",-1).on("click"+_,o(a._click,a)),a.wrapper=e('<div class="k-column-menu"/>')},_init:function(){var e=this,t=e.options;e.wrapper.html(i.template(y)({ns:i.ns,messages:t.messages,sortable:t.sortable,filterable:t.filterable,columns:e._ownerColumns(),showColumns:t.columns})),e.popup=e.wrapper[g]({anchor:e.link,open:o(e._open,e),activate:o(e._activate,e),close:e.options.closeCallback}).data(g),e._menu(),e._sort(),e._columns(),e._filter(),e.trigger(h,{field:e.field,container:e.wrapper})},events:[h],options:{name:"ColumnMenu",messages:{sortAscending:"Sort Ascending",sortDescending:"Sort Descending",filter:"Filter",columns:"Columns"},columns:!0,sortable:!0,filterable:!0},destroy:function(){var e=this;b.fn.destroy.call(e),e.filterMenu&&e.filterMenu.destroy(),e._refreshHandler&&e.dataSource.unbind(f,e._refreshHandler),e.options.columns&&(e.owner.unbind("columnShow",e._updateColumnsMenuHandler),e.owner.unbind("columnHide",e._updateColumnsMenuHandler)),e.menu&&(e.menu.element.off(_),e.menu.destroy()),e.wrapper.off(_),e.popup&&e.popup.destroy(),e.link.off(_)},close:function(){this.menu.close(),this.popup.close(),this.popup.element.off("keydown"+_)},_click:function(e){e.preventDefault(),e.stopPropagation(),this.popup||this._init(),this.popup.toggle()},_open:function(){var t=this;e(".k-column-menu").not(t.wrapper).each(function(){e(this).data(g).close()}),t.popup.element.on("keydown"+_,function(e){e.keyCode==i.keys.ESC&&t.close()})},_activate:function(){this.menu.element.focus()},_ownerColumns:function(){var e=this.owner.columns,t=s(e,function(e){var t=!0,i=n(e.title||"");return(e.menu===!1||!e.field&&!i.length)&&(t=!1),t});return l(t,function(t){return{originalField:t.field,field:t.field||t.title,title:t.title||t.field,hidden:t.hidden,index:d(t,e)}})},_menu:function(){this.menu=this.wrapper.children()[v]({orientation:"vertical",closeOnClick:!1}).data(v)},_sort:function(){var t=this;t.options.sortable&&(t.refresh(),t._refreshHandler=o(t.refresh,t),t.dataSource.bind(f,t._refreshHandler),t.menu.bind("select",function(n){var i,r=e(n.item);r.hasClass("k-sort-asc")?i=u:r.hasClass("k-sort-desc")&&(i=p),i&&(r.parent().find(".k-sort-"+(i==u?p:u)).removeClass(c),t._sortDataSource(r,i),t.close())}))},_sortDataSource:function(e,n){var i,r,o=this,a=o.options.sortable,s=o.dataSource,l=s.sort()||[];if(e.hasClass(c)&&a&&a.allowUnsort!==!1?(e.removeClass(c),n=t):e.addClass(c),a===!0||"single"===a.mode)l=[{field:o.field,dir:n}];else{for(i=0,r=l.length;r>i;i++)if(l[i].field===o.field){l.splice(i,1);break}l.push({field:o.field,dir:n})}s.sort(l)},_columns:function(){var t=this;t.options.columns&&(t._updateColumnsMenu(),t._updateColumnsMenuHandler=o(t._updateColumnsMenu,t),t.owner.bind(["columnHide","columnShow"],t._updateColumnsMenuHandler),t.menu.bind("select",function(n){var r,o,a,l,c=e(n.item),u=t.owner.columns;c.parent().closest("li.k-columns-item")[0]&&(r=c.find(":checkbox"),r.attr("disabled")||(l=r.attr(i.attr("field")),a=s(u,function(e){return e.field==l||e.title==l})[0],o=d(a,u),a.hidden===!0?t.owner.showColumn(o):t.owner.hideColumn(o)))}))},_updateColumnsMenu:function(){var t=i.attr("field"),n=s(this._ownerColumns(),function(e){return!e.hidden}),r=s(n,function(e){return e.originalField}).length;n=l(n,function(e){return e.field}),this.wrapper.find(".k-columns-item input["+t+"]").prop("checked",!1).filter(function(){return d(e(this).attr(t),n)>-1}).prop("checked",!0).prop("disabled",1==r)},_filter:function(){var e=this,t=e.options;t.filterable!==!1&&(e.filterMenu=e.wrapper.find(".k-filterable")[m](a(!0,{},{appendToElement:!0,dataSource:t.dataSource,values:t.values,field:e.field},t.filterable)).data(m))},refresh:function(){var e,t,n,i=this,r=i.options.dataSource.sort()||[],o=i.field;for(i.wrapper.find(".k-sort-asc, .k-sort-desc").removeClass(c),t=0,n=r.length;n>t;t++)e=r[t],o==e.field&&i.wrapper.find(".k-sort-"+e.dir).addClass(c)}}),y='<ul>#if(sortable){#<li class="k-item k-sort-asc"><span class="k-link"><span class="k-sprite k-i-sort-asc"></span>${messages.sortAscending}</span></li><li class="k-item k-sort-desc"><span class="k-link"><span class="k-sprite k-i-sort-desc"></span>${messages.sortDescending}</span></li>#if(showColumns || filterable){#<li class="k-separator"></li>#}##}##if(showColumns){#<li class="k-item k-columns-item"><span class="k-link"><span class="k-sprite k-i-columns"></span>${messages.columns}</span><ul>#for (var col in columns) {#<li><input type="checkbox" data-#=ns#field="#=columns[col].field.replace(/"/g,"&\\#34;")#" data-#=ns#index="#=columns[col].index#"/>#=columns[col].title#</li>#}#</ul></li>#if(filterable){#<li class="k-separator"></li>#}##}##if(filterable){#<li class="k-item k-filter-item"><span class="k-link"><span class="k-sprite k-filter"></span>${messages.filter}</span><ul><li><div class="k-filterable"></div></li></ul></li>#}#</ul>';r.plugin(w)}(window.kendo.jQuery),function(e,t){function n(e){return Array(e+1).join('<td class="k-group-cell">&nbsp;</td>')}function i(e){var t,n=" ";if(e){if(typeof e===gt)return e;for(t in e)n+=t+'="'+e[t]+'"'}return n}function r(t){var n=0;return e("> .k-grouping-header, > .k-grid-toolbar",t).each(function(){n+=this.offsetHeight}),n}function o(t,n){e("th, th .k-grid-filter, th .k-link",t).add(document.body).css("cursor",n)}function a(e){var t,n,i={},r={};if(!H(e))for(I(e)||(e=[e]),t=0,n=e.length;n>t;t++)i[e[t].aggregate]=0,r[e[t].field]=i;return r}function s(e,t,n){var i=e.eq(t),r=e.eq(n);i[t>n?"insertBefore":"insertAfter"](r)}function l(e,t,n){var i,r,o,a;for(n=I(n)?n:[n],i=0,r=n.length;r>i;i++)o=n[i],D(o)&&o.click&&(a=o.name||o.text,t.on(ut+Y,"a.k-grid-"+(a||"").replace(/\s/g,""),{commandName:a},B(o.click,e)))}function d(e){return F(e,function(e){return!e.hidden})}function c(e){e=e||{};var t=e.style;return t?(t=t.replace(/((.*)?display)(.*)?:([^;]*)/i,"$1:none"),t===e.style&&(t=t.replace(/(.*)?/i,"display:none;$1"))):t="display:none",A({},e,{style:t})}function u(e){e=e||{};var t=e.style;return t&&(e.style=t.replace(/(display\s*:\s*none\s*;?)*/gi,"")),e}function p(t,n,i,r){var o,a=t.find(">colgroup"),s=E(n,function(e){return o=e.width,o&&0!==parseInt(o,10)?b.format('<col style="width:{0}"/>',typeof o===gt?o:o+"px"):"<col />"});(i||a.find(".k-hierarchy-col").length)&&s.splice(0,0,'<col class="k-hierarchy-col" />'),a.length&&a.remove(),a=e(Array(r+1).join('<col class="k-group-col">')+s.join("")),a.is("colgroup")||(a=e("<colgroup/>").append(a)),t.prepend(a),xt.msie&&8==xt.version&&(t.css("display","inline-table"),window.setTimeout(function(){t.css("display","")},1))}function f(e){var t,n,i,r={};for(n=0,i=e.length;i>n;n++)t=e[n],r[t.value]=t.text;return r}function h(e,t,n){var i=n&&n.length&&D(n[0])&&"value"in n[0],r=i?f(n)[e]:e;return r=null!=r?r:"",t?b.format(t,r):r}function g(e,t,n){for(var i,r=0,o=e[r];o;){if(i=n?!0:"none"!==o.style.display,i&&!wt.test(o.className)&&--t<0){o.style.display=n?"":"none";break}o=e[++r]}}function m(e,t){var n,i,r;if(typeof e===gt&&e===t)return e;if(D(e)&&e.name===t)return e;if(I(e))for(n=0,i=e.length;i>n;n++)if(r=e[n],typeof r===gt&&r===t||r.name===t)return r;return null}function v(t,n){var i,r,o,a=xt.msie;if(n===!0){if(t=e(t),o=a&&t.parent().is(".k-grid-content,.k-grid-header-wrap"),o&&(i=t.parent().scrollTop(),r=t.parent().scrollLeft()),a)try{t[0].setActive()}catch(s){t[0].focus()}else t[0].focus();o&&(t.parent().scrollTop(i),t.parent().scrollLeft(r))}else e(t).one("focusin",function(e){e.preventDefault()}).focus()}function _(t){var n=e(t.currentTarget),i=n.is("th"),r=n.closest("table")[0];b.support.touch||(r===this.table[0]||r===this.thead.parent()[0])&&(this.current(n),(i||!e(t.target).is(":button,a,:input,a>.k-icon,textarea,span.k-icon,span.k-link,.k-input,.k-multiselect-wrap"))&&setTimeout(function(){v(r,!0)}),i&&t.preventDefault())}var b=window.kendo,w=b.ui,y=b.data.DataSource,k=w.Groupable,x=b.support.tbodyInnerHtml,C=b._activeElement,T=w.Widget,S=b.keys,D=e.isPlainObject,A=e.extend,E=e.map,F=e.grep,I=e.isArray,P=e.inArray,B=e.proxy,z=e.isFunction,H=e.isEmptyObject,R=Math,M="progress",L="error",O=":not(.k-group-cell):not(.k-hierarchy-cell):visible",N="tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)",V="tr:not(.k-footer-template):visible",U=":not(.k-group-cell):not(.k-hierarchy-cell):visible",W=V+":first>"+U+":first",j="th.k-header:not(.k-group-cell,.k-hierarchy-cell)",G=j+":visible["+b.attr("field")+"]",q=j+"["+b.attr("field")+"]",Y=".kendoGrid",Q="edit",$="save",K="remove",X="detailInit",J="filterMenuInit",Z="columnMenuInit",et="change",tt="columnHide",nt="columnShow",it="saveChanges",rt="dataBound",ot="detailExpand",at="detailCollapse",st="k-state-focused",lt="k-state-selected",dt="columnResize",ct="columnReorder",ut="click",pt="height",ft="tabIndex",ht="function",gt="string",mt="Are you sure you want to delete this record?",vt=/(\}|\#)/gi,_t=/#/gi,bt="[\\x20\\t\\r\\n\\f]",wt=RegExp("(^|"+bt+")"+"(k-group-cell|k-hierarchy-cell)"+"("+bt+"|$)"),yt='<a class="k-button k-button-icontext #=className#" #=attr# href="\\#"><span class="#=iconClass# #=imageClass#"></span>#=text#</a>',kt=!1,xt=b.support.browser,Ct=xt.msie&&7==xt.version,Tt=T.extend({init:function(e,t){var n=this;T.fn.init.call(n,e,t),n._refreshHandler=B(n.refresh,n),n.setDataSource(t.dataSource),n.wrap()},setDataSource:function(e){var t=this;t.dataSource&&t.dataSource.unbind(et,t._refreshHandler),t.dataSource=e,t.dataSource.bind(et,t._refreshHandler)},options:{name:"VirtualScrollable",itemHeight:e.noop},destroy:function(){var e=this;T.fn.destroy.call(e),e.dataSource.unbind(et,e._refreshHandler),e.wrapper.add(e.verticalScrollbar).off(Y),e.drag&&e.drag.destroy()},wrap:function(){var t,n=this,i=b.support.scrollbar()+1,r=n.element;r.css({width:"auto",overflow:"hidden"}).css(kt?"padding-left":"padding-right",i),n.content=r.children().first(),t=n.wrapper=n.content.wrap('<div class="k-virtual-scrollable-wrap"/>').parent().bind("DOMMouseScroll"+Y+" mousewheel"+Y,B(n._wheelScroll,n)),b.support.kineticScrollNeeded&&(n.drag=new b.UserEvents(n.wrapper,{global:!0,move:function(e){n.verticalScrollbar.scrollTop(n.verticalScrollbar.scrollTop()-e.y.delta),t.scrollLeft(t.scrollLeft()-e.x.delta),e.preventDefault()}})),n.verticalScrollbar=e('<div class="k-scrollbar k-scrollbar-vertical" />').css({width:i}).appendTo(r).bind("scroll"+Y,B(n._scroll,n))},_wheelScroll:function(e){var n,i=this,r=i.verticalScrollbar.scrollTop(),o=e.originalEvent,a=o.wheelDeltaY;o.wheelDelta?(a===t||a)&&(n=o.wheelDelta):o.detail&&o.axis===o.VERTICAL_AXIS&&(n=10*-o.detail),n&&(e.preventDefault(),i.verticalScrollbar.scrollTop(r+-n))},_scroll:function(e){var t=this,n=e.currentTarget.scrollTop,i=t.dataSource,r=t.itemHeight,o=i.skip()||0,a=t._rangeStart||o,s=t.element.innerHeight(),l=!!(t._scrollbarTop&&t._scrollbarTop>n),d=R.max(R.floor(n/r),0),c=R.max(d+R.floor(s/r),0);t._scrollTop=n-a*r,t._scrollbarTop=n,t._fetch(d,c,l)||(t.wrapper[0].scrollTop=t._scrollTop)},_fetch:function(e,t,n){var i=this,r=i.dataSource,o=i.itemHeight,a=r.take(),s=i._rangeStart||r.skip()||0,l=R.floor(e/a)*a,d=!1,c=.33;return s>e?(d=!0,s=R.max(0,t-a),i._scrollTop=(e-s)*o,i._page(s,a)):t>=s+a&&!n?(d=!0,s=e,i._scrollTop=o,i._page(s,a)):i._fetching||(l+a-a*c>e&&e>a&&r.prefetch(l-a,a),t>l+a*c&&r.prefetch(l+a,a)),d},_page:function(e,t){var n=this,i=n.dataSource;clearTimeout(n._timeout),n._fetching=!0,n._rangeStart=e,i.inRange(e,t)?i.range(e,t):(b.ui.progress(n.wrapper.parent(),!0),n._timeout=setTimeout(function(){i.range(e,t)},100))},refresh:function(){var e,t,n,i,r=this,o="",a=25e4,s=r.dataSource,l=r._rangeStart,d=b.support.kineticScrollNeeded?0:b.support.scrollbar(),c=r.wrapper[0];for(b.ui.progress(r.wrapper.parent(),!1),clearTimeout(r._timeout),n=r.itemHeight=r.options.itemHeight()||0,i=c.scrollWidth>c.offsetWidth?d:0,e=s.total()*n+i,t=0;t<R.floor(e/a);t++)o+='<div style="width:1px;height:'+a+'px"></div>';e%a&&(o+='<div style="width:1px;height:'+e%a+'px"></div>'),r.verticalScrollbar.html(o),c.scrollTop=r._scrollTop,r.drag&&r.drag.cancel(),l&&!r._fetching&&(r._rangeStart=s.skip()),r._fetching=!1}}),St={create:{text:"Add new record",imageClass:"k-add",className:"k-grid-add",iconClass:"k-icon"},cancel:{text:"Cancel changes",imageClass:"k-cancel",className:"k-grid-cancel-changes",iconClass:"k-icon"},save:{text:"Save changes",imageClass:"k-update",className:"k-grid-save-changes",iconClass:"k-icon"},destroy:{text:"Delete",imageClass:"k-delete",className:"k-grid-delete",iconClass:"k-icon"},edit:{text:"Edit",imageClass:"k-edit",className:"k-grid-edit",iconClass:"k-icon"},update:{text:"Update",imageClass:"k-update",className:"k-grid-update",iconClass:"k-icon"},canceledit:{text:"Cancel",imageClass:"k-cancel",className:"k-grid-cancel",iconClass:"k-icon"}},Dt=T.extend({init:function(e,t){var n=this;t=I(t)?{dataSource:t}:t,T.fn.init.call(n,e,t),kt=b.support.isRtl(e),n._element(),n._aria(),n._columns(n.options.columns),n._dataSource(),n._tbody(),n._pageable(),n._thead(),n._groupable(),n._toolbar(),n._setContentHeight(),n._templates(),n._navigatable(),n._selectable(),n._details(),n._editable(),n._attachCustomCommandsEvent(),n.options.autoBind?n.dataSource.fetch():n._footer(),b.notify(n)},events:[et,"dataBinding","cancel",rt,ot,at,X,J,Z,Q,$,K,it,dt,ct,nt,tt],setDataSource:function(e){var t=this;t.options.dataSource=e,t._dataSource(),t._pageable(),t.options.groupable&&t._groupable(),t._thead(),t.virtualScrollable&&t.virtualScrollable.setDataSource(t.options.dataSource),t.options.autoBind&&e.fetch()},options:{name:"Grid",columns:[],toolbar:null,autoBind:!0,filterable:!1,scrollable:!0,sortable:!1,selectable:!1,navigatable:!1,pageable:!1,editable:!1,groupable:!1,rowTemplate:"",altRowTemplate:"",dataSource:{},height:null,resizable:!1,reorderable:!1,columnMenu:!1,detailTemplate:null,columnResizeHandleWidth:3},destroy:function(){var e,t=this;T.fn.destroy.call(t),t.pager&&t.pager.destroy(),t.groupable&&t.groupable.destroy(),t.options.reorderable&&t.wrapper.data("kendoReorderable").destroy(),t.resizable&&t.resizable.destroy(),t.virtualScrollable&&t.virtualScrollable.destroy(),t._destroyColumnAttachments(),t._destroyEditable(),t.dataSource.unbind(et,t._refreshHandler).unbind(M,t._progressHandler).unbind(L,t._errorHandler),e=t.element.add(t.wrapper).add(t.table).add(t.thead).add(t.wrapper.find(">.k-grid-toolbar")),t.content&&(e=e.add(t.content).add(t.content.find(">.k-virtual-scrollable-wrap"))),e.off(Y),b.destroy(t.wrapper)},setOptions:function(e){var t=this;T.fn.setOptions.call(this,e),t._templates()},items:function(){return this.tbody.children(":not(.k-grouping-row,.k-detail-row,.k-group-footer)")},_destroyColumnAttachments:function(){var t=this;t.resizeHandle=null,t.thead.find("th").each(function(){var t=e(this),n=t.data("kendoFilterMenu"),i=t.data("kendoSortable"),r=t.data("kendoColumnMenu");n&&n.destroy(),i&&i.destroy(),r&&r.destroy()})},_attachCustomCommandsEvent:function(){var e,t,n,i=this,r=i.columns||[];for(t=0,n=r.length;n>t;t++)e=r[t].command,e&&l(i,i.wrapper,e)},_aria:function(){var e=this.element.attr("id")||"aria";e&&(this._cellId=e+"_active_cell")},_element:function(){var t=this,n=t.element;n.is("table")||(n=t.options.scrollable?t.element.find("> .k-grid-content > table"):t.element.children("table"),n.length||(n=e("<table />").appendTo(t.element))),Ct&&n.attr("cellspacing",0),t.table=n.attr("role",t._hasDetails()?"treegrid":"grid"),t._wrapper()},_positionColumnResizeHandle:function(t){var n,i=this,a=i.options.scrollable,s=i.resizeHandle,l=i.options.columnResizeHandleWidth;i.thead.on("mousemove"+Y,"th:not(.k-group-cell,.k-hierarchy-cell)",function(d){var c,u,p,f,h=e(this),g=d.clientX,m=e(window).scrollLeft(),v=h.offset().left+(kt?0:this.offsetWidth);g+m>v-l&&v+l>g+m?(s||(s=i.resizeHandle=e('<div class="k-resize-handle"/>'),t.append(s)),kt?(c=h.closest(".k-grid-header-wrap"),u=xt.msie?c.scrollLeft():0,p=xt.webkit?c[0].scrollWidth-c[0].offsetWidth-c.scrollLeft():0,f=xt.mozilla?c[0].scrollWidth-c[0].offsetWidth-(c[0].scrollWidth-c[0].offsetWidth-c.scrollLeft()):0,n=h.position().left-p+f-u):(n=this.offsetWidth,h.prevAll(":visible").each(function(){n+=this.offsetWidth})),s.css({top:a?0:r(i.wrapper),left:n-l,height:h.outerHeight(),width:3*l}).data("th",h).show()):s?s.hide():o(i.wrapper,"")})},_resizable:function(){var t,n,i,r,a,s,l=this,d=l.options;d.resizable&&(t=d.scrollable?l.wrapper.find(".k-grid-header-wrap:first"):l.wrapper,l._positionColumnResizeHandle(t),l.resizable=new w.Resizable(t,{handle:".k-resize-handle",hint:function(t){return e('<div class="k-grid-resize-indicator" />').css({height:t.data("th").outerHeight()+l.tbody.attr("clientHeight")})},start:function(t){s=e(t.currentTarget).data("th");var c=e.inArray(s[0],s.parent().children(":visible")),u=l.tbody.parent(),p=l.footer||e();o(l.wrapper,"col-resize"),a=d.scrollable?l.thead.parent().find("col:eq("+c+")").add(u.children("colgroup").find("col:eq("+c+")")).add(p.find("colgroup").find("col:eq("+c+")")):u.children("colgroup").find("col:eq("+c+")"),n=t.x.location,i=s.outerWidth(),r=l.tbody.outerWidth()},resize:function(t){var o=kt?-1:1,s=i+t.x.location*o-n*o,c=l.footer||e();s>10&&(a.css("width",s),d.scrollable&&r&&(l._footerWidth=r+t.x.location*o-n*o,l.tbody.parent().add(l.thead.parent()).add(c.find("table")).css("width",l._footerWidth)))},resizeend:function(){var e,t=s.outerWidth();o(l.wrapper,""),i!=t&&(e=l.columns[s.parent().find("th:not(.k-group-cell,.k-hierarchy-cell)").index(s)],e.width=t,l.trigger(dt,{column:e,oldWidth:i,newWidth:t})),l.resizeHandle.hide(),s=null}}))},_draggable:function(){var t=this;t.options.reorderable&&(t._draggableInstance&&t._draggableInstance.destroy(),t._draggableInstance=t.wrapper.kendoDraggable({group:b.guid(),filter:t.content?".k-grid-header:first "+j:"table:first>.k-grid-header "+j,hint:function(t){return e('<div class="k-header k-drag-clue" />').css({width:t.width(),paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight"),lineHeight:t.height()+"px",paddingTop:t.css("paddingTop"),paddingBottom:t.css("paddingBottom")}).html(t.attr(b.attr("title"))||t.attr(b.attr("field"))||t.text()).prepend('<span class="k-icon k-drag-status k-denied" />')}}).data("kendoDraggable"))},_reorderable:function(){var e=this;e.options.reorderable&&e.wrapper.kendoReorderable({draggable:e._draggableInstance,change:function(t){var n=P(e.columns[t.newIndex],e.columns),i=e.columns[t.oldIndex];
e.trigger(ct,{newIndex:n,oldIndex:P(i,e.columns),column:i}),e.reorderColumn(n,i)}})},reorderColumn:function(e,t){var n,i,r,o=this,a=P(t,o.columns),l=P(t,d(o.columns)),c=P(o.columns[e],d(o.columns)),u=o.footer||o.wrapper.find(".k-grid-footer");if(a!==e)for(o.columns.splice(a,1),o.columns.splice(e,0,t),o._templates(),s(o.thead.prev().find("col:not(.k-group-col,.k-hierarchy-col)"),l,c),o.options.scrollable&&s(o.tbody.prev().find("col:not(.k-group-col,.k-hierarchy-col)"),l,c),s(o.thead.find(".k-header:not(.k-group-cell,.k-hierarchy-cell)"),a,e),u&&u.length&&(s(u.find(".k-grid-footer-wrap>table>colgroup>col:not(.k-group-col,.k-hierarchy-col)"),l,c),s(u.find(".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)"),a,e)),n=o.tbody.children(":not(.k-grouping-row,.k-detail-row)"),i=0,r=n.length;r>i;i+=1)s(n.eq(i).find(">td:not(.k-group-cell,.k-hierarchy-cell)"),a,e)},cellIndex:function(t){return e(t).parent().children("td:not(.k-group-cell,.k-hierarchy-cell)").index(t)},_modelForContainer:function(t){t=e(t),t.is("tr")||"popup"===this._editMode()||(t=t.closest("tr"));var n=t.attr(b.attr("uid"));return this.dataSource.getByUid(n)},_editable:function(){var t,n=this,i=n.selectable&&n.selectable.options.multiple,r=n.options.editable,o=function(){var t=C(),i=n._editContainer;!i||e.contains(i[0],t)||i[0]===t||e(t).closest(".k-animation-container").length||n.editable.end()&&n.closeCell()};r&&(t=n._editMode(),"incell"===t?r.update!==!1&&n.wrapper.on(ut+Y,"tr:not(.k-grouping-row) > td",function(t){var r=e(this);r.hasClass("k-hierarchy-cell")||r.hasClass("k-detail-cell")||r.hasClass("k-group-cell")||r.hasClass("k-edit-cell")||r.has("a.k-grid-delete").length||r.has("button.k-grid-delete").length||r.closest("tbody")[0]!==n.tbody[0]||e(t.target).is(":input")||(n.editable?n.editable.end()&&(i&&e(C()).blur(),n.closeCell(),n.editCell(r)):n.editCell(r))}).on("focusin"+Y,function(){clearTimeout(n.timer),n.timer=null}).on("focusout"+Y,function(){n.timer=setTimeout(o,1)}):r.update!==!1&&n.wrapper.on(ut+Y,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible a.k-grid-edit",function(t){t.preventDefault(),n.editRow(e(this).closest("tr"))}),r.destroy!==!1?n.wrapper.on(ut+Y,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete",function(t){t.preventDefault(),t.stopPropagation(),n.removeRow(e(this).closest("tr"))}):n.wrapper.on(ut+Y,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible button.k-grid-delete",function(e){e.stopPropagation(),n._confirmation()||e.preventDefault()}))},editCell:function(t){t=e(t);var n=this,i=n.columns[n.cellIndex(t)],r=n._modelForContainer(t);!r||r.editable&&!r.editable(i.field)||i.command||!i.field||(n._attachModelChange(r),n._editContainer=t,n.editable=t.addClass("k-edit-cell").kendoEditable({fields:{field:i.field,format:i.format,editor:i.editor,values:i.values},model:r,change:function(e){n.trigger($,{values:e.values,container:t,model:r})&&e.preventDefault()}}).data("kendoEditable"),t.parent().addClass("k-grid-edit-row"),n.trigger(Q,{container:t,model:r}))},_destroyEditable:function(){var e=this,t=function(){e.editable&&(e._detachModelChange(),e.editable.destroy(),e.editable=null,e._editContainer=null)};e.editable&&("popup"===e._editMode()?e._editContainer.data("kendoWindow").bind("deactivate",t).close():t())},_attachModelChange:function(e){var t=this;t._modelChangeHandler=function(e){t._modelChange({field:e.field,model:this})},e.bind("change",t._modelChangeHandler)},_detachModelChange:function(){var e=this,t=e._editContainer,n=e._modelForContainer(t);n&&n.unbind(et,e._modelChangeHandler)},closeCell:function(t){var n,i,r,o=this,a=o._editContainer;a&&(n=a.closest("tr").attr(b.attr("uid")),r=o.dataSource.getByUid(n),t&&o.trigger("cancel",{container:a,model:r})||(a.removeClass("k-edit-cell"),i=o.columns[o.cellIndex(a)],a.parent().removeClass("k-grid-edit-row"),o._destroyEditable(),o._displayCell(a,i,r),a.hasClass("k-dirty-cell")&&e('<span class="k-dirty"/>').prependTo(a)))},_displayCell:function(e,t,n){var i=this,r={storage:{},count:0},o=A({},b.Template,i.options.templateSettings),a=b.template(i._cellTmpl(t,r),o);r.count>0&&(a=B(a,r.storage)),e.empty().html(a(n))},removeRow:function(t){var n,i,r=this;r._confirmation()&&(t=e(t).hide(),n=r._modelForContainer(t),n&&!r.trigger(K,{row:t,model:n})&&(i=r._editMode(),"incell"!==i&&r.cancelRow(),r.dataSource.remove(n),("inline"===i||"popup"===i)&&r.dataSource.sync()))},_editMode:function(){var e="incell",t=this.options.editable;return t!==!0&&(e="string"==typeof t?t:t.mode||e),e},editRow:function(n){var i,r,o,a,s=this;n instanceof b.data.ObservableObject?i=n:(n=e(n),i=s._modelForContainer(n)),r=s._editMode(),o=s.options.navigatable,s.cancelRow(),i&&(s._attachModelChange(i),"popup"===r?s._createPopupEditor(i):"inline"===r?s._createInlineEditor(n,i):"incell"===r&&e(n).children(O).each(function(){var n=e(this),r=s.columns[n.index()];return i=s._modelForContainer(n),i&&(!i.editable||i.editable(r.field))&&r.field?(s.editCell(n),!1):t}),a=s._editContainer,a.on(ut+Y,"a.k-grid-cancel",function(t){if(t.preventDefault(),t.stopPropagation(),!s.trigger("cancel",{container:a,model:i})){var n=s.items().index(e(s.current()).parent());s.cancelRow(),o&&(s.current(s.items().eq(n).children().filter(U).first()),v(s.table,!0))}}),a.on(ut+Y,"a.k-grid-update",function(e){e.preventDefault(),e.stopPropagation(),s.saveRow()}))},_createPopupEditor:function(n){var i,r,o,a,s,l,d,c,u,p,f,h=this,g="<div "+b.attr("uid")+'="'+n.uid+'" class="k-popup-edit-form"><div class="k-edit-form-container">',_=[],w=h.options.editable,y=w.template,k=D(w)?w.window:{},x=A({},b.Template,h.options.templateSettings);if(y)for(typeof y===gt&&(y=window.unescape(y)),g+=b.template(y,x)(n),o=0,a=h.columns.length;a>o;o++)i=h.columns[o],i.command&&(c=m(i.command,"edit"),c&&(r=c));else for(o=0,a=h.columns.length;a>o;o++)i=h.columns[o],i.command?i.command&&(c=m(i.command,"edit"),c&&(r=c)):(g+='<div class="k-edit-label"><label for="'+i.field+'">'+(i.title||i.field||"")+"</label></div>",n.editable&&!n.editable(i.field)||!i.field?(p={storage:{},count:0},s=b.template(h._cellTmpl(i,p),x),p.count>0&&(s=B(s,p.storage)),g+='<div class="k-edit-field">'+s(n)+"</div>"):(_.push({field:i.field,format:i.format,editor:i.editor,values:i.values}),g+="<div "+b.attr("container-for")+'="'+i.field+'" class="k-edit-field"></div>'));r&&D(r)&&(r.text&&D(r.text)&&(l=r.text.update,d=r.text.cancel),r.attr&&(u=r.attr)),g+='<div class="k-edit-buttons k-state-default">',g+=h._createButton({name:"update",text:l,attr:u})+h._createButton({name:"canceledit",text:d,attr:u}),g+="</div></div></div>",f=h._editContainer=e(g).appendTo(h.wrapper).eq(0).kendoWindow(A({modal:!0,resizable:!1,draggable:!0,title:"Edit",visible:!1,close:function(i){if(i.userTriggered){if(h.trigger("cancel",{container:f,model:n}))return i.preventDefault(),t;var r=h.items().index(e(h.current()).parent());h.cancelRow(),h.options.navigatable&&(h.current(h.items().eq(r).children().filter(U).first()),v(h.table,!0))}}},k)),h.editable=h._editContainer.kendoEditable({fields:_,model:n,clearContainer:!1}).data("kendoEditable"),f.data("kendoWindow").center().open(),h.trigger(Q,{container:f,model:n})},_createInlineEditor:function(t,n){var i,r,o,a=this,s=[];t.children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){if(r=e(this),i=a.columns[a.cellIndex(r)],i.command||!i.field||n.editable&&!n.editable(i.field)){if(i.command&&(o=m(i.command,"edit"))){r.empty();var t,l,d;D(o)&&(o.text&&D(o.text)&&(t=o.text.update,l=o.text.cancel),o.attr&&(d=o.attr)),e(a._createButton({name:"update",text:t,attr:d})+a._createButton({name:"canceledit",text:l,attr:d})).appendTo(r)}}else s.push({field:i.field,format:i.format,editor:i.editor,values:i.values}),r.attr(b.attr("container-for"),i.field),r.empty()}),a._editContainer=t,a.editable=t.addClass("k-grid-edit-row").kendoEditable({fields:s,model:n,clearContainer:!1}).data("kendoEditable"),a.trigger(Q,{container:t,model:n})},cancelRow:function(){var e,t=this,n=t._editContainer;n&&(e=t._modelForContainer(n),t._destroyEditable(),t.dataSource.cancelChanges(e),"popup"!==t._editMode()?t._displayRow(n):t._displayRow(t.items().filter("["+b.attr("uid")+"="+e.uid+"]")))},saveRow:function(){var e=this,t=e._editContainer,n=e._modelForContainer(t),i=e.editable;t&&i&&i.end()&&!e.trigger($,{container:t,model:n})&&e.dataSource.sync()},_displayRow:function(t){var n=this,i=n._modelForContainer(t);i&&t.replaceWith(e((t.hasClass("k-alt")?n.altRowTemplate:n.rowTemplate)(i)))},_showMessage:function(e){return window.confirm(e)},_confirmation:function(){var e=this,t=e.options.editable,n=t===!0||typeof t===gt?mt:t.confirmation;return n!==!1&&null!=n?e._showMessage(n):!0},cancelChanges:function(){this.dataSource.cancelChanges()},saveChanges:function(){var e=this;(e.editable&&e.editable.end()||!e.editable)&&!e.trigger(it)&&e.dataSource.sync()},addRow:function(){var e,t,n,i,r,o=this,a=o.dataSource,s=o._editMode(),l=o.options.editable.createAt||"",d=a.pageSize(),c=a.view()||[];(o.editable&&o.editable.end()||!o.editable)&&("incell"!=s&&o.cancelRow(),e=a.indexOf(c[0]),"bottom"==l.toLowerCase()&&(e+=c.length,d&&!a.options.serverPaging&&d<=c.length&&(e-=1)),0>e&&(e=a.page()>a.totalPages()?(a.page()-1)*d:0),t=a.insert(e,{}),n=t.uid,i=o.table.find("tr["+b.attr("uid")+"="+n+"]"),r=i.children("td:not(.k-group-cell,.k-hierarchy-cell)").eq(o._firstEditableColumnIndex(i)),"inline"===s&&i.length?o.editRow(i):"popup"===s?o.editRow(t):r.length&&o.editCell(r))},_firstEditableColumnIndex:function(e){var t,n,i,r=this,o=r.columns,a=r._modelForContainer(e);for(n=0,i=o.length;i>n;n++)if(t=o[n],a&&(!a.editable||a.editable(t.field))&&!t.command&&t.field)return n;return-1},_toolbar:function(){var t,n=this,i=n.wrapper,r=n.options.toolbar,o=n.options.editable;r&&(t=n.wrapper.find(".k-grid-toolbar"),t.length||(z(r)||(r=typeof r===gt?r:n._toolbarTmpl(r).replace(_t,"\\#"),r=B(b.template(r),n)),t=e('<div class="k-toolbar k-grid-toolbar" />').html(r({})).prependTo(i)),o&&o.create!==!1&&t.on(ut+Y,".k-grid-add",function(e){e.preventDefault(),n.addRow()}).on(ut+Y,".k-grid-cancel-changes",function(e){e.preventDefault(),n.cancelChanges()}).on(ut+Y,".k-grid-save-changes",function(e){e.preventDefault(),n.saveChanges()}))},_toolbarTmpl:function(e){var t,n,i=this,r="";if(I(e))for(t=0,n=e.length;n>t;t++)r+=i._createButton(e[t]);return r},_createButton:function(e){var t=e.template||yt,n=typeof e===gt?e:e.name||e.text,r=St[n]?St[n].className:"k-grid-"+(n||"").replace(/\s/g,""),o={className:r,text:n,imageClass:"",attr:"",iconClass:""};if(!(n||D(e)&&e.template))throw Error("Custom commands should have name specified");return D(e)?(e.className&&(e.className+=" "+o.className),"edit"===n&&D(e.text)&&(e=A(!0,{},e),e.text=e.text.edit),e.attr&&D(e.attr)&&(e.attr=i(e.attr)),o=A(!0,o,St[n],e)):o=A(!0,o,St[n]),b.template(t)(o)},_hasFooters:function(){var e,t=this.columns,n=t.length;for(e=0;n>e;e++)if(""!==t[e].footerTemplate||""!==t[e].groupFooterTemplate)return!0;return!1},_groupable:function(){var t=this;t._groupableClickHandler?t.table.off(ut+Y,t._groupableClickHandler):t._groupableClickHandler=function(n){var i=e(this),r=i.closest("tr");i.hasClass("k-i-collapse")?t.collapseGroup(r):t.expandGroup(r),n.preventDefault(),n.stopPropagation()},t.table.on(ut+Y,".k-grouping-row .k-i-collapse, .k-grouping-row .k-i-expand",t._groupableClickHandler),t._attachGroupable()},_attachGroupable:function(){var t=this,n=t.wrapper,i=t.options.groupable;i&&(n.has("div.k-grouping-header")[0]||e("<div>&nbsp;</div>").addClass("k-grouping-header").prependTo(n),t.groupable&&t.groupable.destroy(),t.groupable=new k(n,A({},i,{draggable:t._draggableInstance,groupContainer:">div.k-grouping-header",dataSource:t.dataSource,draggableElements:t.content?".k-grid-header:first "+G:"table:first>.k-grid-header "+G,filter:t.content?".k-grid-header:first "+q:"table:first>.k-grid-header "+q,allowDrag:t.options.reorderable})))},_selectable:function(){var e,n,i=this,r=[],o=i.options.selectable;o&&(e=typeof o===gt&&o.toLowerCase().indexOf("multiple")>-1,n=typeof o===gt&&o.toLowerCase().indexOf("cell")>-1,i._hasDetails()&&(r[r.length]=".k-detail-row"),(i.options.groupable||i._hasFooters())&&(r[r.length]=".k-grouping-row,.k-group-footer"),r=r.join(","),""!==r&&(r=":not("+r+")"),i.selectable=new b.ui.Selectable(i.table,{filter:">"+(n?N:"tbody>tr"+r),aria:!0,multiple:e,change:function(){i.trigger(et)}}),i.options.navigatable&&i.table.on("keydown"+Y,function(r){var o=i.current();if(r.keyCode===S.SPACEBAR&&r.target==i.table[0]&&!o.is(".k-edit-cell,.k-header")&&o.parent().is(":not(.k-grouping-row,.k-detail-row,.k-group-footer)")){if(r.preventDefault(),r.stopPropagation(),o=n?o:o.parent(),e)if(r.ctrlKey){if(o.hasClass(lt))return o.removeClass(lt),i.trigger(et),t}else i.selectable.clear();else i.selectable.clear();i.selectable.value(o)}}))},clearSelection:function(){var e=this;e.selectable.clear(),e.trigger(et)},select:function(n){var i=this,r=i.selectable;return n=e(n),n.length?(r.options.multiple||(r.clear(),n=n.first()),r.value(n),t):r.value()},current:function(n){var i=this,r=i.options.scrollable,o=i._current,a=i.table.add(i.thead.parent());return n!==t&&n.length&&(o&&o[0]===n[0]||(o&&(o.removeClass(st).removeAttr("id"),a.removeAttr("aria-activedescendant")),n.attr("id",i._cellId),i._current=n.addClass(st),a.attr("aria-activedescendant",i._cellId),n.length&&r&&(e.contains(i.content[0],n[0])&&i._scrollTo(n.parent()[0],i.content[0]),r.virtual?i._scrollTo(n[0],i.content.find(">.k-virtual-scrollable-wrap")[0]):i._scrollTo(n[0],i.content[0])))),i._current},_removeCurrent:function(){this._current&&(this._current.removeClass(st),this._current=null)},_scrollTo:function(e,t){var n=e.tagName.toLowerCase(),i="td"===n||"th"===n,r=e[i?"offsetLeft":"offsetTop"],o=e[i?"offsetWidth":"offsetHeight"],a=t[i?"scrollLeft":"scrollTop"],s=t[i?"clientWidth":"clientHeight"],l=r+o,d=0;d=a>r?r:l>a+s?s>=o?l-s:r:a,t[i?"scrollLeft":"scrollTop"]=d},_navigatable:function(){var t=this,n=B(t.current,t),i=t.table,r=t.thead.parent(),o=i,a=b.support.isRtl(t.element);t.options.navigatable&&(t.options.scrollable&&(o=i.add(r),r.attr(ft,-1)),r.on("keydown"+Y,function(e){e.altKey&&e.keyCode==S.DOWN&&(n().find(".k-grid-filter, .k-header-column-menu").click(),e.stopImmediatePropagation())}).find("a.k-link").attr("tabIndex",-1),i.attr(ft,R.max(i.attr(ft)||0,0)).on("mousedown"+Y+" keydown"+Y,".k-detail-cell",function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()}),o.on(b.support.touch?"touchstart"+Y:"mousedown"+Y,V+">"+U,B(_,t)).on("focus"+Y,function(){if(!b.support.touch){var t=n();t&&t.is(":visible")?t.addClass(st):n(e(this).find(W)),this==i[0]?(r.attr(ft,-1),i.attr(ft,0)):(i.attr(ft,-1),r.attr(ft,0))}}).on("focusout"+Y,function(){var e=n();e&&e.removeClass(st)}).on("keydown"+Y,function(r){var o,s,l,d,c,u,p,f,h=r.keyCode,g=!1,m=!r.isDefaultPrevented()&&!e(r.target).is(":button,a,:input,a>.k-icon"),_=t.options.pageable,b=t.dataSource,w="incell"==t._editMode(),y=r.shiftKey,k=n();k&&k.is("th")&&(m=!0),m&&h==S.UP?(k?(l=k.parent().prevAll(V).first(),l[0]||(c=t.thead.parent(),v(c,!0),l=c.find(V).first()),d=k.index(),k=l.children().eq(d),k[0]&&k.is(U)||(k=l.children(U).first())):k=i.find(W),g=!0,n(k)):m&&h==S.DOWN?(k?(l=k.parent().nextAll(V).first(),!l[0]&&k.is("th")&&(v(t.tbody.parent()),l=t.tbody.find(V).first()),d=k.index(),k=l.children().eq(d),k[0]&&k.is(U)||(k=l.children(U).first())):k=i.find(W),g=!0,n(k)):m&&h==(a?S.RIGHT:S.LEFT)?(n(k?k.prevAll(O+":first"):i.find(W)),g=!0):m&&h==(a?S.LEFT:S.RIGHT)?(k?k.next()[0]&&(k=k.nextAll(O+":first")):k=i.find(W),g=!0,n(k)):m&&_&&S.PAGEDOWN==h?(b.page(b.page()+1),g=!0):m&&_&&S.PAGEUP==h?(b.page(b.page()-1),g=!0):h==S.ENTER||S.F2==h?(k=k?k:i.find(W),k.is("th")?(k.find(".k-link").click(),g=!0):k.parent().is(".k-master-row,.k-grouping-row")?(k.parent().find(".k-icon:first").click(),g=!0):(u=k.find(":focusable:first"),!k.hasClass("k-edit-cell")&&u[0]&&k.hasClass("k-state-focused")?(u.focus(),g=!0):t.options.editable&&!e(r.target).is(":button,.k-button,textarea")&&(p=e(r.target).closest("[role=gridcell]"),p[0]||(p=k),t._handleEditing(p),g=!0))):S.ESC==h?(o=C(),k&&e.contains(k[0],o)&&!k.hasClass("k-edit-cell")&&!k.parent().hasClass("k-grid-edit-row")?(v(t.table[0],!0),g=!0):!t._editContainer||k&&!t._editContainer.has(k[0])&&k[0]!==t._editContainer[0]||(w?t.closeCell(!0):(s=t.items().index(e(k).parent()),o&&o.blur(),t.cancelRow(),s>=0&&t.current(t.items().eq(s).children().filter(U).first())),xt.msie&&xt.version<9&&document.body.focus(),v(i,!0),g=!0)):S.TAB==h&&(k=e(k),t.options.editable&&w&&(f=e(C()).closest(".k-edit-cell"),f[0]&&f[0]!==k[0]&&(k=f)),f=y?k.prevAll(O+":first"):k.nextAll(":visible:first"),f.length||(f=k.parent()[y?"prevAll":"nextAll"]("tr:not(.k-grouping-row):not(.k-detail-row):visible:first").children(O+(y?":last":":first"))),!k.is("th")&&f.length&&t.options.editable&&w&&(t._handleEditing(k,f),g=!0)),g&&(r.preventDefault(),r.stopPropagation())}))},_handleEditing:function(n,i){var r,o,a=this,s=e(C()),l=a._editMode(),d=xt.msie,c=d&&xt.version<9,u=a._editContainer;if(o="incell"==l?n.hasClass("k-edit-cell"):n.parent().hasClass("k-grid-edit-row"),a.editable){if(e.contains(u[0],s[0])&&(xt.opera||c?s.change().triggerHandler("blur"):(s.blur(),d&&s.blur())),!a.editable)return v(a.table),t;if(!a.editable.end())return"incell"==l?a.current(u):a.current(u.children().filter(O).first()),r=u.find(":focusable:first")[0],r&&r.focus(),t;"incell"==l?a.closeCell():(a.saveRow(),o=!0)}i&&a.current(i),c&&document.body.focus(),v(a.table,!0),(!o&&!i||i)&&("incell"==l?a.editCell(a.current()):a.editRow(a.current().parent()))},_wrapper:function(){var e=this,t=e.table,n=e.options.height,i=e.element;i.is("div")||(i=i.wrap("<div/>").parent()),e.wrapper=i.addClass("k-grid k-widget k-secondary"),n&&(e.wrapper.css(pt,n),t.css(pt,"auto"))},_tbody:function(){var t,n=this,i=n.table;t=i.find(">tbody"),t.length||(t=e("<tbody/>").appendTo(i)),n.tbody=t},_scrollable:function(){var t,n,i,r,o,a=this,s=a.options,l=s.scrollable,d=l!==!0&&l.virtual&&!a.virtualScrollable,c=!b.support.kineticScrollNeeded||d?b.support.scrollbar():0;l&&(t=a.wrapper.children(".k-grid-header"),t[0]||(t=e('<div class="k-grid-header" />').insertBefore(a.table)),t.css(kt?"padding-left":"padding-right",l.virtual?c+1:c),n=e('<table role="grid" />'),Ct&&n.attr("cellspacing",0),n.append(a.thead),t.empty().append(e('<div class="k-grid-header-wrap" />').append(n)),a.content=a.table.parent(),a.content.is(".k-virtual-scrollable-wrap")&&(a.content=a.content.parent()),a.content.is(".k-grid-content, .k-virtual-scrollable-wrap")||(a.content=a.table.wrap('<div class="k-grid-content" />').parent()),d&&(a.virtualScrollable=new Tt(a.content,{dataSource:a.dataSource,itemHeight:B(a._averageRowHeight,a)})),a.scrollables=t.children(".k-grid-header-wrap"),i=a.wrapper.find(".k-grid-footer"),r=kt&&xt.webkit?c:0,i.length&&(a.scrollables=a.scrollables.add(i.children(".k-grid-footer-wrap"))),l.virtual?a.content.find(">.k-virtual-scrollable-wrap").bind("scroll"+Y,function(){a.scrollables.scrollLeft(this.scrollLeft+r)}):(a.content.bind("scroll"+Y,function(){a.scrollables.scrollLeft(this.scrollLeft+r)}),o=b.touchScroller(a.content),o&&o.movable&&o.movable.bind("change",function(e){a.scrollables.scrollLeft(-e.sender.x)})))},_setContentHeight:function(){var e,t=this,n=t.options,i=t.wrapper.innerHeight(),r=t.wrapper.children(".k-grid-header"),o=b.support.scrollbar();n.scrollable&&(i-=r.outerHeight(),t.pager&&(i-=t.pager.element.outerHeight()),n.groupable&&(i-=t.wrapper.children(".k-grouping-header").outerHeight()),n.toolbar&&(i-=t.wrapper.children(".k-grid-toolbar").outerHeight()),t.footerTemplate&&(i-=t.wrapper.children(".k-grid-footer").outerHeight()),e=function(e){var t,n;return e[0].style.height?!0:(t=e.height(),e.height("auto"),n=e.height(),t!=n?(e.height(""),!0):(e.height(""),!1))},e(t.wrapper)&&(i>2*o?t.content.height(i):t.content.height(2*o+1)))},_averageRowHeight:function(){var e,t=this,n=t._rowHeight;return t._rowHeight||(t._rowHeight=n=t.table.outerHeight()/t.items().length,t._sum=n,t._measures=1),e=t.table.outerHeight()/t.items().length,n!==e&&(t._measures++,t._sum+=e,t._rowHeight=t._sum/t._measures),n},_dataSource:function(){var e,n=this,i=n.options,r=i.dataSource;r=I(r)?{data:r}:r,D(r)&&(A(r,{table:n.table,fields:n.columns}),e=i.pageable,D(e)&&e.pageSize!==t&&(r.pageSize=e.pageSize)),n.dataSource&&n._refreshHandler?n.dataSource.unbind(et,n._refreshHandler).unbind(M,n._progressHandler).unbind(L,n._errorHandler):(n._refreshHandler=B(n.refresh,n),n._progressHandler=B(n._requestStart,n),n._errorHandler=B(n._error,n)),n.dataSource=y.create(r).bind(et,n._refreshHandler).bind(M,n._progressHandler).bind(L,n._errorHandler)},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_modelChange:function(t){var n,i,r,o,a=this,s=t.model,l=a.tbody.find("tr["+b.attr("uid")+"="+s.uid+"]"),d=l.hasClass("k-alt"),c=a.items().index(l);if(l.children(".k-edit-cell").length&&!a.options.rowTemplate)l.children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){n=e(this),i=a.columns[a.cellIndex(n)],i.field===t.field&&(n.hasClass("k-edit-cell")?n.addClass("k-dirty-cell"):(a._displayCell(n,i,s),e('<span class="k-dirty"/>').prependTo(n)))});else if(!l.hasClass("k-grid-edit-row")){for(r=(d?a.altRowTemplate:a.rowTemplate)(s),l.replaceWith(r),r=a.items().eq(c),c=0,o=a.columns.length;o>c;c++)i=a.columns[c],i.field===t.field&&(n=r.children(":not(.k-group-cell,.k-hierarchy-cell)").eq(c),e('<span class="k-dirty"/>').prependTo(n));a.trigger("itemChange",{item:r,data:s,ns:w})}},_pageable:function(){var t,n=this,i=n.options.pageable;i&&(t=n.wrapper.children("div.k-grid-pager"),t.length||(t=e('<div class="k-pager-wrap k-grid-pager"/>').appendTo(n.wrapper)),n.pager&&n.pager.destroy(),n.pager="object"==typeof i&&i instanceof b.ui.Pager?i:new b.ui.Pager(t,A({},i,{dataSource:n.dataSource})))},_footer:function(){var t,n,i=this,r=i.dataSource.aggregates(),o="",s=i.footerTemplate,l=i.options,d=i.footer||i.wrapper.find(".k-grid-footer");s?(r=H(r)?a(i.dataSource.aggregate()):r,o=e(i._wrapFooter(s(r))),d.length?(n=o,d.replaceWith(n),d=i.footer=n):d=i.footer=l.scrollable?l.pageable?o.insertBefore(i.wrapper.children("div.k-grid-pager")):o.appendTo(i.wrapper):o.insertBefore(i.tbody)):d&&!i.footer&&(i.footer=d),d.length&&(l.scrollable&&(t=d.attr("tabindex",-1).children(".k-grid-footer-wrap"),i.scrollables=i.scrollables.not(".k-grid-footer-wrap").add(t)),i._footerWidth&&d.find("table").css("width",i._footerWidth),t&&t.scrollLeft(i.content.scrollLeft()))},_wrapFooter:function(t){var n=this,i="",r=b.support.mobileOS?0:b.support.scrollbar();return n.options.scrollable?(i=e('<div class="k-grid-footer"><div class="k-grid-footer-wrap"><table'+(Ct?' cellspacing="0"':"")+"><tbody>"+t+"</tbody></table></div></div>"),n._appendCols(i.find("table")),i.css(kt?"padding-left":"padding-right",r),i):'<tfoot class="k-grid-footer">'+t+"</tfoot>"},_columnMenu:function(){var t,n,i,r,o,a,s=this,l=s.columns,d=s.options,c=d.columnMenu,u=function(){v(s.thead.parent(),!0)},p=function(e){s.trigger(Z,{field:e.field,container:e.container})};c&&("boolean"==typeof c&&(c={}),s.thead.find("th:not(.k-hierarchy-cell,.k-group-cell)").each(function(f){n=l[f],a=e(this),n.command||!n.field&&!a.attr("data-"+b.ns+"field")||(t=a.data("kendoColumnMenu"),t&&t.destroy(),r=n.sortable!==!1&&c.sortable!==!1?d.sortable:!1,o=d.filterable&&n.filterable!==!1&&c.filterable!==!1?A({},n.filterable,d.filterable):!1,i={dataSource:s.dataSource,values:n.values,columns:c.columns,sortable:r,filterable:o,messages:c.messages,owner:s,closeCallback:u,init:p},a.kendoColumnMenu(i))}))},_filterable:function(){var t,n,i=this,r=i.columns,o=function(){v(i.thead.parent(),!0)},a=i.options.filterable;a&&!i.options.columnMenu&&i.thead.find("th:not(.k-hierarchy-cell,.k-group-cell)").each(function(s){var l,d;t=e(this),r[s].filterable===!1||r[s].command||!r[s].field&&!t.attr("data-"+b.ns+"field")||(n=t.data("kendoFilterMenu"),n&&n.destroy(),l=r[s].filterable,d=A({},a,l,{dataSource:i.dataSource,values:r[s].values,closeCallback:o,init:function(e){i.trigger(J,{field:e.field,container:e.container})}}),l&&l.messages&&(d.messages=A(!0,{},a.messages,l.messages)),t.kendoFilterMenu(d))})},_sortable:function(){var t,n,i,r=this,o=r.columns,a=r.options.sortable;a&&r.thead.find("th:not(.k-hierarchy-cell,.k-group-cell)").each(function(s){t=o[s],t.sortable!==!1&&!t.command&&t.field&&(n=e(this),i=n.data("kendoSortable"),i&&i.destroy(),n.attr("data-"+b.ns+"field",t.field).kendoSortable(A({},a,t.sortable,{dataSource:r.dataSource,aria:!0})))})},_columns:function(t){var n,i=this,r=i.table,o=r.find("col"),a=i.options.dataSource;t=t.length?t:E(r.find("th"),function(t,n){t=e(t);var i=t.attr(b.attr("sortable")),r=t.attr(b.attr("filterable")),a=t.attr(b.attr("type")),s=t.attr(b.attr("groupable")),l=t.attr(b.attr("field")),d=t.attr(b.attr("menu"));return l||(l=t.text().replace(/\s|[^A-z0-9]/g,"")),{field:l,type:a,sortable:"false"!==i,filterable:"false"!==r,groupable:"false"!==s,menu:d,template:t.attr(b.attr("template")),width:o.eq(n).css("width")}}),n=!(i.table.find("tbody tr").length>0&&(!a||!a.transport)),i.columns=E(t,function(e){return e=typeof e===gt?{field:e}:e,e.hidden&&(e.attributes=c(e.attributes),e.footerAttributes=c(e.footerAttributes),e.headerAttributes=c(e.headerAttributes)),A({encoded:n},e)})},_groups:function(){var e=this.dataSource.group();return e?e.length:0},_tmpl:function(e,t){var r,o,a,s,l=this,d=A({},b.Template,l.options.templateSettings),c=l.columns.length,u={storage:{},count:0},p=l._hasDetails(),f=[],h=l._groups();if(!e){for(e="<tr",t&&f.push("k-alt"),p&&f.push("k-master-row"),f.length&&(e+=' class="'+f.join(" ")+'"'),c&&(e+=" "+b.attr("uid")+'="#='+b.expr("uid",d.paramName)+'#"'),e+=" role='row'>",h>0&&(e+=n(h)),p&&(e+='<td class="k-hierarchy-cell"><a class="k-icon k-plus" href="\\#" tabindex="-1"></a></td>'),r=0;c>r;r++)a=l.columns[r],o=a.template,s=typeof o,e+="<td"+i(a.attributes)+" role='gridcell'>",e+=l._cellTmpl(a,u),e+="</td>";e+="</tr>"}return e=b.template(e,d),u.count>0?B(e,u.storage):e},_headerCellText:function(e){var t=this,n=A({},b.Template,t.options.templateSettings),i=e.headerTemplate,r=typeof i,o=e.title||e.field||"";return r===ht?o=b.template(i,n)({}):r===gt&&(o=i),o},_cellTmpl:function(e,t){var n,i,r=this,o=A({},b.Template,r.options.templateSettings),a=e.template,s=o.paramName,l=e.field,d="",c=e.format,u=typeof a,p=e.values;if(e.command){if(I(e.command)){for(n=0,i=e.command.length;i>n;n++)d+=r._createButton(e.command[n]);return d.replace(_t,"\\#")}return r._createButton(e.command).replace(_t,"\\#")}return u===ht?(t.storage["tmpl"+t.count]=a,d+="#=this.tmpl"+t.count+"("+s+")#",t.count++):u===gt?d+=a:p&&p.length&&D(p[0])&&"value"in p[0]&&l?(d+="#var v ="+b.stringify(f(p))+"#",d+="#var f = v[",o.useWithBlock||(d+=s+"."),d+=l+"]#",d+="${f != null ? f : ''}"):(d+=e.encoded?"#:":"#=",c&&(d+='kendo.format("'+c.replace(vt,"\\$1")+'",'),l?(l=b.expr(l,s),d+=l+"==null?'':"+l):d+="''",c&&(d+=")"),d+="#"),d},_templates:function(){var t=this,n=t.options,i=t.dataSource,r=i.group(),o=t.footer||t.wrapper.find(".k-grid-footer"),a=i.aggregate();t.rowTemplate=t._tmpl(n.rowTemplate),t.altRowTemplate=t._tmpl(n.altRowTemplate||n.rowTemplate,!0),t._hasDetails()&&(t.detailTemplate=t._detailTmpl(n.detailTemplate||"")),(t._group&&!H(a)||!H(a)&&!o.length||F(t.columns,function(e){return e.footerTemplate}).length)&&(t.footerTemplate=t._footerTmpl(a,"footerTemplate","k-footer-template")),r&&F(t.columns,function(e){return e.groupFooterTemplate}).length&&(a=e.map(r,function(e){return e.aggregates}),t.groupFooterTemplate=t._footerTmpl(a,"groupFooterTemplate","k-group-footer"))},_footerTmpl:function(e,t,r){var o,s,l,d,c,u=this,p=A({},b.Template,u.options.templateSettings),f=p.paramName,h="",g=u.columns,m={},v=0,_={},w=u._groups(),y=a(e);for(h+='<tr class="'+r+'">',w>0&&(h+=n(w)),u._hasDetails()&&(h+='<td class="k-hierarchy-cell">&nbsp;</td>'),o=0,s=u.columns.length;s>o;o++)c=g[o],l=c[t],d=typeof l,h+="<td"+i(c.footerAttributes)+">",l?(d!==ht&&(_=y[c.field]?A({},p,{paramName:f+"."+c.field}):{},l=b.template(l,_)),m["tmpl"+v]=l,h+="#=this.tmpl"+v+"("+f+")#",v++):h+="&nbsp;",h+="</td>";return h+="</tr>",h=b.template(h,p),v>0?B(h,m):h},_detailTmpl:function(e){var t=this,i="",r=A({},b.Template,t.options.templateSettings),o=r.paramName,a={},s=0,l=t._groups(),c=d(t.columns).length,u=typeof e;return i+='<tr class="k-detail-row">',l>0&&(i+=n(l)),i+='<td class="k-hierarchy-cell"></td><td class="k-detail-cell"'+(c?' colspan="'+c+'"':"")+">",u===ht?(a["tmpl"+s]=e,i+="#=this.tmpl"+s+"("+o+")#",s++):i+=e,i+="</td></tr>",i=b.template(i,r),s>0?B(i,a):i},_hasDetails:function(){var e=this;return null!==e.options.detailTemplate||(e._events[X]||[]).length},_details:function(){var t=this;t.table.on(ut+Y,".k-hierarchy-cell .k-plus, .k-hierarchy-cell .k-minus",function(n){var i,r,o=e(this),a=o.hasClass("k-plus"),s=o.closest("tr.k-master-row"),l=t.detailTemplate,d=t._hasDetails();return o.toggleClass("k-plus",!a).toggleClass("k-minus",a),d&&!s.next().hasClass("k-detail-row")&&(r=t.dataItem(s),e(l(r)).addClass(s.hasClass("k-alt")?"k-alt":"").insertAfter(s),t.trigger(X,{masterRow:s,detailRow:s.next(),data:r,detailCell:s.next().find(".k-detail-cell")})),i=s.next(),t.trigger(a?ot:at,{masterRow:s,detailRow:i}),i.toggle(a),t._current&&t._current.attr("aria-expanded",a),n.preventDefault(),!1})},dataItem:function(t){if(t=e(t)[0],!t)return null;var n,i,r=this.tbody.children(),o=/k-grouping-row|k-detail-row|k-group-footer/,a=t.sectionRowIndex;for(i=a,n=0;a>n;n++)o.test(r[n].className)&&i--;return this._data[i]},expandRow:function(t){e(t).find("> td .k-plus, > td .k-i-expand").click()},collapseRow:function(t){e(t).find("> td .k-minus, > td .k-i-collapse").click()},_thead:function(){var n,r,o,a,s,l=this,d=l.columns,c=l._hasDetails()&&d.length,u="",p=l.table.find(">thead");if(p.length||(p=e("<thead/>").insertBefore(l.tbody)),o=l.element.find("tr:has(th):first"),o.length||(o=p.children().first(),o.length||(o=e("<tr/>"))),o.children().length)c&&!o.find(".k-hierarchy-cell")[0]&&o.prepend('<th class="k-hierarchy-cell">&nbsp;</th>');else{for(c&&(u+='<th class="k-hierarchy-cell">&nbsp;</th>'),n=0,r=d.length;r>n;n++)s=d[n],a=l._headerCellText(s),s.command?u+="<th"+i(s.headerAttributes)+">"+a+"</th>":(u+="<th role='columnheader' "+b.attr("field")+"='"+(s.field||"")+"' ",s.title&&(u+=b.attr("title")+'="'+s.title.replace(/'/g,"'")+'" '),s.groupable!==t&&(u+=b.attr("groupable")+"='"+s.groupable+"' "),s.aggregates&&(u+=b.attr("aggregates")+"='"+s.aggregates+"'"),u+=i(s.headerAttributes),u+=">"+a+"</th>");o.html(u)}o.find("th").addClass("k-header"),l.options.scrollable||p.addClass("k-grid-header"),o.find("script").remove().end().appendTo(p),l.thead&&l._destroyColumnAttachments(),l.thead=p,l._sortable(),l._filterable(),l._scrollable(),l._updateCols(),l._resizable(),l._draggable(),l._reorderable(),l.groupable&&l._attachGroupable(),l._columnMenu()},_updateCols:function(){var e=this;e._appendCols(e.thead.parent().add(e.table))},_appendCols:function(e){var t=this;p(e,d(t.columns),t._hasDetails(),t._groups())},_autoColumns:function(e){if(e&&e.toJSON){var t,n=this;e=e.toJSON();for(t in e)n.columns.push({field:t});n._thead(),n._templates()}},_rowsHtml:function(e){var t,n,i=this,r="",o=i.rowTemplate,a=i.altRowTemplate;for(t=0,n=e.length;n>t;t++)r+=t%2?a(e[t]):o(e[t]),i._data.push(e[t]);return r},_groupRowHtml:function(e,t,i){var r,o,a=this,s="",l=e.field,d=F(a.columns,function(e){return e.field==l})[0]||{},c=d.groupHeaderTemplate,u=(d.title||l)+": "+h(e.value,d.format,d.values),p=A({},{field:e.field,value:e.value},e.aggregates[e.field]),f=a._groupAggregatesDefaultObject||{},g=e.items;if(c&&(u=typeof c===ht?c(p):b.template(c)(p)),s+='<tr class="k-grouping-row">'+n(i)+'<td colspan="'+t+'" aria-expanded="true">'+'<p class="k-reset">'+'<a class="k-icon k-i-collapse" href="#" tabindex="-1"></a>'+u+"</p></td></tr>",e.hasSubgroups)for(r=0,o=g.length;o>r;r++)s+=a._groupRowHtml(g[r],t-1,i+1);else s+=a._rowsHtml(g);return a.groupFooterTemplate&&(s+=a.groupFooterTemplate(A(f,e.aggregates))),s
},collapseGroup:function(n){n=e(n).find(".k-icon").addClass("k-i-expand").removeClass("k-i-collapse").end();var i,r,o=n.find(".k-group-cell").length,a=1;n.find("td:first").attr("aria-expanded",!1),n.nextAll("tr").each(function(){return r=e(this),i=r.find(".k-group-cell").length,r.hasClass("k-grouping-row")?a++:r.hasClass("k-group-footer")&&a--,o>=i||r.hasClass("k-group-footer")&&0>a?!1:(r.hide(),t)})},expandGroup:function(n){n=e(n).find(".k-icon").addClass("k-i-collapse").removeClass("k-i-expand").end();var i,r,o=this,a=n.find(".k-group-cell").length,s=1;n.find("td:first").attr("aria-expanded",!0),n.nextAll("tr").each(function(){return i=e(this),r=i.find(".k-group-cell").length,a>=r?!1:(r!=a+1||i.hasClass("k-detail-row")||(i.show(),i.hasClass("k-grouping-row")&&i.find(".k-icon").hasClass("k-i-collapse")&&o.expandGroup(i),i.hasClass("k-master-row")&&i.find(".k-icon").hasClass("k-minus")&&i.next().show()),i.hasClass("k-grouping-row")&&s++,i.hasClass("k-group-footer")&&(1==s?i.show():s--),t)})},_updateHeader:function(t){var n=this,i=n.thead.find("th.k-group-cell"),r=i.length;t>r?e(Array(t-r+1).join('<th class="k-group-cell k-header">&nbsp;</th>')).prependTo(n.thead.find("tr")):r>t&&(r-=t,e(F(i,function(e,t){return r>t})).remove())},_firstDataItem:function(e,t){return e&&t&&(e=e.hasSubgroups?this._firstDataItem(e.items[0],t):e.items[0]),e},hideColumn:function(t){var n,i,r,o,a,s,l,u,p,f=this,h=0,m=f.footer||f.wrapper.find(".k-grid-footer"),v=f.columns;if(t="number"==typeof t?v[t]:F(v,function(e){return e.field===t})[0],t&&!t.hidden){for(p=P(t,d(v)),t.hidden=!0,t.attributes=c(t.attributes),t.footerAttributes=c(t.footerAttributes),t.headerAttributes=c(t.headerAttributes),f._templates(),f._updateCols(),g(f.thead.find(">tr")[0].cells,p,!1),m[0]&&(f._appendCols(m.find("table:first")),g(m.find(".k-footer-template")[0].cells,p,!1)),n=f.tbody.children(),a=0,u=n.length;u>a;a+=1)i=n.eq(a),i.is(".k-grouping-row,.k-detail-row")?(r=i.children(":not(.k-group-cell):first,.k-detail-cell").last(),r.attr("colspan",parseInt(r.attr("colspan"),10)-1)):(i.hasClass("k-grid-edit-row")&&(r=i.children(".k-edit-container")[0])&&(r=e(r),r.attr("colspan",parseInt(r.attr("colspan"),10)-1),r.find("col").eq(p).remove(),i=r.find("tr:first")),g(i[0].cells,p,!1));for(s=f.thead.prev().find("col"),a=0,u=s.length;u>a;a+=1){if(l=s[a].style.width,!l||-1!=l.indexOf("%")){h=0;break}h+=parseInt(l,10)}o=e(">.k-grid-header table:first,>.k-grid-footer table:first",f.wrapper).add(f.table),f._footerWidth=null,h&&(o.width(h),f._footerWidth=h),xt.msie&&8==xt.version&&(o.css("display","inline-table"),setTimeout(function(){o.css("display","table")},1)),f.trigger(tt,{column:t})}},showColumn:function(t){var n,i,r,o,a,s,l,c,f,h,m=this,v=m.columns,_=m.footer||m.wrapper.find(".k-grid-footer");if(t="number"==typeof t?v[t]:F(v,function(e){return e.field===t})[0],t&&t.hidden){for(h=P(t,v),t.hidden=!1,t.attributes=u(t.attributes),t.footerAttributes=u(t.footerAttributes),t.headerAttributes=u(t.headerAttributes),m._templates(),m._updateCols(),g(m.thead.find(">tr")[0].cells,h,!0),_[0]&&(m._appendCols(_.find("table:first")),g(_.find(".k-footer-template")[0].cells,h,!0)),n=m.tbody.children(),i=0,r=n.length;r>i;i+=1)o=n.eq(i),o.is(".k-grouping-row,.k-detail-row")?(a=o.children(":not(.k-group-cell):first,.k-detail-cell").last(),a.attr("colspan",parseInt(a.attr("colspan"),10)+1)):(o.hasClass("k-grid-edit-row")&&(a=o.children(".k-edit-container")[0])&&(a=e(a),a.attr("colspan",parseInt(a.attr("colspan"),10)+1),p(a.find(">form>table"),d(v),!1,0),o=a.find("tr:first")),g(o[0].cells,h,!0));if(s=e(">.k-grid-header table:first,>.k-grid-footer table:first",m.wrapper).add(m.table),t.width){for(l=0,f=m.thead.prev().find("col"),i=0,r=f.length;r>i;i+=1){if(c=f[i].style.width,c.indexOf("%")>-1){l=0;break}l+=parseInt(c,10)}m._footerWidth=null,l&&(s.width(l),m._footerWidth=l)}else s.width("");m.trigger(nt,{column:t})}},_progress:function(e){var t=this,n=t.element.is("table")?t.element.parent():t.content&&t.content.length?t.content:t.element;b.ui.progress(n,e)},refresh:function(t){var n,i,r,o,s,l,c=this,u="",p=c.dataSource.view(),f=c.options.navigatable,h=e(c.current()),g=!1,m=(c.dataSource.group()||[]).length,_=m+d(c.columns).length;if(!(t&&"itemchange"===t.action&&c.editable||(t=t||{},c.trigger("dataBinding",{action:t.action||"rebind",index:t.index,items:t.items})))){if(l=C(),f&&(c.table[0]===l||e.contains(c.table[0],l)||c._editContainer&&c._editContainer.data("kendoWindow"))&&(g=h.is("th"),s=0,g&&(s=c.thead.find("th:not(.k-group-cell)").index(h))),c._destroyEditable(),c._progress(!1),c._data=[],c.columns.length||(c._autoColumns(c._firstDataItem(p[0],m)),_=m+c.columns.length),c._group=m>0||c._group,c._group&&(c._templates(),c._updateCols(),c._updateHeader(m),c._group=m>0),m>0)for(c.detailTemplate&&_++,c.groupFooterTemplate&&(c._groupAggregatesDefaultObject=a(c.dataSource.aggregate())),i=0,n=p.length;n>i;i++)u+=c._groupRowHtml(p[i],_,0);else u+=c._rowsHtml(p);x?c.tbody[0].innerHTML=u:(o=document.createElement("div"),o.innerHTML="<table><tbody>"+u+"</tbody></table>",r=o.firstChild.firstChild,c.table[0].replaceChild(r,c.tbody[0]),c.tbody=e(r)),c._footer(),c._setContentHeight(),s>=0&&(c._removeCurrent(),g?c.current(c.thead.find("th:not(.k-group-cell)").eq(s)):c.current(c.items().eq(s).children().filter(O).first()),c._current&&v(c._current.closest("table")[0],!0)),c.trigger(rt)}}});w.plugin(Dt),w.plugin(Tt)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i="change",r="cancel",o="dataBound",a="dataBinding",s=n.ui.Widget,l=n.keys,d=">*",c="progress",u="error",p="k-state-focused",f="k-state-selected",h="k-edit-item",g="string",m="edit",v="remove",_="save",b="click",w=".kendoListView",y=e.proxy,k=n._activeElement,x=n.ui.progress,C=n.data.DataSource,T=s.extend({init:function(t,i){var r=this;i=e.isArray(i)?{dataSource:i}:i,s.fn.init.call(r,t,i),i=r.options,r.wrapper=t=r.element,t[0].id&&(r._itemId=t[0].id+"_lv_active"),r._element(),r._dataSource(),r.template=n.template(i.template||""),r.altTemplate=n.template(i.altTemplate||i.template),r.editTemplate=n.template(i.editTemplate||""),r._navigatable(),r._selectable(),r._pageable(),r._crudHandlers(),r.options.autoBind&&r.dataSource.fetch(),n.notify(r)},events:[i,r,a,o,m,v,_],options:{name:"ListView",autoBind:!0,selectable:!1,navigatable:!1,template:"",altTemplate:"",editTemplate:""},_item:function(e){return this.element.children()[e]()},items:function(){return this.element.children()},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.options.autoBind&&e.fetch()},_unbindDataSource:function(){var e=this;e.dataSource.unbind(i,e._refreshHandler).unbind(c,e._progressHandler).unbind(u,e._errorHandler)},_dataSource:function(){var e=this;e.dataSource&&e._refreshHandler?e._unbindDataSource():(e._refreshHandler=y(e.refresh,e),e._progressHandler=y(e._progress,e),e._errorHandler=y(e._error,e)),e.dataSource=C.create(e.options.dataSource).bind(i,e._refreshHandler).bind(c,e._progressHandler).bind(u,e._errorHandler)},_progress:function(){x(this.element,!0)},_error:function(){x(this.element,!1)},_element:function(){this.element.addClass("k-widget k-listview").attr("role","listbox")},refresh:function(e){var i,r,s,l,d,c=this,u=c.dataSource.view(),p="",f=c.template,h=c.altTemplate,g=k();if(e=e||{},"itemchange"===e.action)return c._hasBindingTarget()||c.editable||(i=e.items[0],s=c.items().filter("["+n.attr("uid")+"="+i.uid+"]"),s.length>0&&(l=s.index(),s.replaceWith(f(i)),s=c.items().eq(l),s.attr(n.attr("uid"),i.uid),c.trigger("itemChange",{item:s,data:i}))),t;if(!c.trigger(a,{action:e.action||"rebind",items:e.items,index:e.index})){for(c._destroyEditable(),l=0,d=u.length;d>l;l++)p+=l%2?h(u[l]):f(u[l]);for(c.element.html(p),r=c.items(),l=0,d=u.length;d>l;l++)r.eq(l).attr(n.attr("uid"),u[l].uid).attr("role","option").attr("aria-selected","false");c.element[0]===g&&c.options.navigatable&&c.current(r.eq(0)),c.trigger(o)}},_pageable:function(){var t,i,r=this,o=r.options.pageable;e.isPlainObject(o)&&(i=o.pagerId,t=e.extend({},o,{dataSource:r.dataSource,pagerId:null}),r.pager=new n.ui.Pager(e("#"+i),t))},_selectable:function(){var e,r,o=this,a=o.options.selectable,s=o.options.navigatable;a&&(e=typeof a===g&&a.toLowerCase().indexOf("multiple")>-1,e&&o.element.attr("aria-multiselectable",!0),o.selectable=new n.ui.Selectable(o.element,{aria:!0,multiple:e,filter:d,change:function(){o.trigger(i)}}),s&&o.element.on("keydown"+w,function(n){if(n.keyCode===l.SPACEBAR){if(r=o.current(),n.target==n.currentTarget&&n.preventDefault(),e)if(n.ctrlKey){if(r&&r.hasClass(f))return r.removeClass(f),t}else o.selectable.clear();else o.selectable.clear();o.selectable.value(r)}}))},current:function(e){var n=this,i=n.element,r=n._current,o=n._itemId;return e===t?r:(r&&r[0]&&(r[0].id===o&&r.removeAttr("id"),r.removeClass(p),i.removeAttr("aria-activedescendant")),e&&e[0]&&(o=e[0].id||o,n._scrollTo(e[0]),i.attr("aria-activedescendant",o),e.addClass(p).attr("id",o)),n._current=e,t)},_scrollTo:function(t){var n,i,r=this,o=!1,a="scroll";"auto"==r.wrapper.css("overflow")||r.wrapper.css("overflow")==a?n=r.wrapper[0]:(n=window,o=!0),i=function(i,r){var s=o?e(t).offset()[i.toLowerCase()]:t["offset"+i],l=t["client"+r],d=e(n)[a+i](),c=e(n)[r.toLowerCase()]();s+l>d+c?e(n)[a+i](s+l-c):d>s&&e(n)[a+i](s)},i("Top","Height"),i("Left","Width")},_navigatable:function(){var t=this,i=t.options.navigatable,r=t.element,o=function(n){t.current(e(n.currentTarget)),e(n.target).is(":button,a,:input,a>.k-icon,textarea")||r.focus()};i&&(t._tabindex(),r.on("focus"+w,function(){var e=t._current;e&&e.is(":visible")||(e=t._item("first")),t.current(e)}).on("focusout"+w,function(){t._current&&t._current.removeClass(p)}).on("keydown"+w,function(i){var o,a,s=i.keyCode,d=t.current(),c=e(i.target),u=!c.is(":button,textarea,a,a>.t-icon,input"),p=c.is(":text"),f=n.preventDefault,g=r.find("."+h),m=k();if(!(!u&&!p&&l.ESC!=s||p&&l.ESC!=s&&l.ENTER!=s))if(l.UP===s||l.LEFT===s)d&&(d=d.prev()),t.current(d&&d[0]?d:t._item("last")),f(i);else if(l.DOWN===s||l.RIGHT===s)d&&(d=d.next()),t.current(d&&d[0]?d:t._item("first")),f(i);else if(l.PAGEUP===s)t.current(null),t.dataSource.page(t.dataSource.page()-1),f(i);else if(l.PAGEDOWN===s)t.current(null),t.dataSource.page(t.dataSource.page()+1),f(i);else if(l.HOME===s)t.current(t._item("first")),f(i);else if(l.END===s)t.current(t._item("last")),f(i);else if(l.ENTER===s)0!==g.length&&(u||p)?(o=t.items().index(g),m&&m.blur(),t.save(),a=function(){t.element.trigger("focus"),t.current(t.items().eq(o))},t.one("dataBound",a)):""!==t.options.editTemplate&&t.edit(d);else if(l.ESC===s){if(g=r.find("."+h),0===g.length)return;o=t.items().index(g),t.cancel(),t.element.trigger("focus"),t.current(t.items().eq(o))}}),r.on("mousedown"+w+" touchstart"+w,d,y(o,t)))},clearSelection:function(){var e=this;e.selectable.clear(),e.trigger(i)},select:function(n){var i=this,r=i.selectable;return n=e(n),n.length?(r.options.multiple||(r.clear(),n=n.first()),r.value(n),t):r.value()},_destroyEditable:function(){var e=this;e.editable&&(e.editable.destroy(),delete e.editable)},_modelFromElement:function(e){var t=e.attr(n.attr("uid"));return this.dataSource.getByUid(t)},_closeEditable:function(e){var t,i,r=this,o=r.editable,a=r.template,s=!0;return o&&(e&&(s=o.end()),s&&(o.element.index()%2&&(a=r.altTemplate),t=r._modelFromElement(o.element),r._destroyEditable(),i=o.element.index(),o.element.replaceWith(a(t)),r.items().eq(i).attr(n.attr("uid"),t.uid))),s},edit:function(e){var t,i,r=this,o=r._modelFromElement(e),a=o.uid;r.cancel(),e=r.items().filter("["+n.attr("uid")+"="+a+"]"),i=e.index(),e.replaceWith(r.editTemplate(o)),t=r.items().eq(i).addClass(h).attr(n.attr("uid"),o.uid),r.editable=t.kendoEditable({model:o,clearContainer:!1,errorTemplate:!1}).data("kendoEditable"),r.trigger(m,{model:o,item:t})},save:function(){var e,t=this,n=t.editable;n&&(n=n.element,e=t._modelFromElement(n),!t.trigger(_,{model:e,item:n})&&t._closeEditable(!0)&&t.dataSource.sync())},remove:function(e){var t=this,n=t.dataSource,i=t._modelFromElement(e);t.trigger(v,{model:i,item:e})||(e.hide(),n.remove(i),n.sync())},add:function(){var e=this,t=e.dataSource,n=t.indexOf((t.view()||[])[0]);0>n&&(n=0),e.cancel(),t.insert(n,{}),e.edit(e.element.children().first())},cancel:function(){var e,t,n=this,i=n.dataSource;n.editable&&(e=n.editable.element,t=n._modelFromElement(e),n.trigger(r,{model:t,container:e})||(i.cancelChanges(t),n._closeEditable(!1)))},_crudHandlers:function(){var t=this,i=b+w;t.element.on(i,".k-edit-button",function(i){var r=e(this).closest("["+n.attr("uid")+"]");t.edit(r),i.preventDefault()}),t.element.on(i,".k-delete-button",function(i){var r=e(this).closest("["+n.attr("uid")+"]");t.remove(r),i.preventDefault()}),t.element.on(i,".k-update-button",function(e){t.save(),e.preventDefault()}),t.element.on(i,".k-cancel-button",function(e){t.cancel(),e.preventDefault()})},destroy:function(){var e=this;s.fn.destroy.call(e),e._unbindDataSource(),e._destroyEditable(),e.element.off(w),e.pager&&e.pager.destroy(),e.selectable&&e.selectable.destroy(),n.destroy(e.element)}});n.ui.plugin(T)}(window.kendo.jQuery),function(e,t){function n(e,t,n){var i,r;e.on("dragenter"+x,function(){t(),r=new Date,i||(i=setInterval(function(){var e=new Date-r;e>100&&(n(),clearInterval(i),i=null)},100))}).on("dragover"+x,function(){r=new Date})}function i(e,n){return e!==t&&e.match(/\/$/)||(e=(e||"")+"/"),e+n}function r(e){if(!e)return"";var t=" bytes";return e>=1073741824?(t=" GB",e/=1073741824):e>=1048576?(t=" MB",e/=1048576):e>=1024&&(t=" KB",e/=1024),Math.round(100*e)/100+t}function o(e,t){var n=e[t];return p(n)?n.from||n.field||t:n}var a,s,l,d,c=window.kendo,u=c.ui.Widget,p=e.isPlainObject,f=e.proxy,h=e.extend,g=c.support.placeholder,m=c.support.browser,v=e.isFunction,_=/(^\/|\/$)/g,b="change",w="apply",y="error",k="click",x=".kendoImageBrowser",C=".kendoBreadcrumbs",T=".kendoSearchBox",S="name",D="size",A="type",E={field:A,dir:"asc"},F=c.template('<li class="k-tile-empty"><strong>${text}</strong></li>'),I='<div class="k-widget k-toolbar k-header k-floatwrap"><div class="k-toolbar-wrap"># if (showUpload) { # <div class="k-widget k-upload"><div class="k-button k-button-icontext k-upload-button"><span class="k-icon k-add"></span>#=messages.uploadFile#<input type="file" name="file" /></div></div># } ## if (showCreate) { #<button type="button" class="k-button k-button-icon"><span class="k-icon k-addfolder" /></button># } ## if (showDelete) { #<button type="button" class="k-button k-button-icon k-state-disabled"><span class="k-icon k-delete" /></button>&nbsp;# } #</div><div class="k-tiles-arrange"><label>#=messages.orderBy#: <select /></label></a></div></div>';h(!0,c.data,{schemas:{imagebrowser:{data:function(e){return e.items||e||[]},model:{id:"name",fields:{name:"name",size:"size",type:"type"}}}}}),h(!0,c.data,{transports:{imagebrowser:c.data.RemoteTransport.extend({init:function(t){c.data.RemoteTransport.fn.init.call(this,e.extend(!0,{},this.options,t))},_call:function(t,n){n.data=e.extend({},n.data,{path:this.options.path()}),v(this.options[t])?this.options[t].call(this,n):c.data.RemoteTransport.fn[t].call(this,n)},read:function(e){this._call("read",e)},create:function(e){this._call("create",e)},destroy:function(e){this._call("destroy",e)},update:function(){},options:{read:{type:"POST"},update:{type:"POST"},create:{type:"POST"},destroy:{type:"POST"}}})}}),a=m.msie&&m.version<8?function(e){return e.offsetTop}:function(t){return t.offsetTop-e(t).height()},s=u.extend({init:function(e,t){var n=this;t=t||{},u.fn.init.call(n,e,t),n.element.addClass("k-imagebrowser k-secondary"),n.element.on(k+x,".k-toolbar button:not(.k-state-disabled):has(.k-delete)",f(n._deleteClick,n)).on(k+x,".k-toolbar button:not(.k-state-disabled):has(.k-addfolder)",f(n._addClick,n)).on("keydown"+x,"li.k-state-selected input",f(n._directoryKeyDown,n)).on("blur"+x,"li.k-state-selected input",f(n._directoryBlur,n)),n._dataSource(),n.refresh(),n.path(n.options.path)},options:{name:"ImageBrowser",messages:{uploadFile:"Upload",orderBy:"Arrange by",orderByName:"Name",orderBySize:"Size",directoryNotFound:"A directory with this name was not found.",emptyFolder:"Empty Folder",deleteFile:'Are you sure you want to delete "{0}"?',invalidFileType:'The selected file "{0}" is not valid. Supported file types are {1}.',overwriteFile:'A file with name "{0}" already exists in the current directory. Do you want to overwrite it?',dropFilesHere:"drop file here to upload",search:"Search"},transport:{},path:"/",fileTypes:"*.png,*.gif,*.jpg,*.jpeg"},events:[y,b,w],destroy:function(){var e=this;u.fn.destroy.call(e),e.dataSource.unbind(y,e._errorHandler),e.element.add(e.list).add(e.toolbar).off(x),e.arrangeBy&&e.arrangeBy.destroy(),c.destroy(e.element)},value:function(){var e,n=this,r=n._selectedItem(),o=n.options.transport.imageUrl;return r&&"f"===r.get(A)?(e=i(n.path(),r.get(S)).replace(_,""),o&&(e=v(o)?o(e):c.format(o,encodeURIComponent(e))),e):t},_selectedItem:function(){var e=this.listView,n=e.select();return n.length?this.dataSource.getByUid(n.attr(c.attr("uid"))):t},_toolbar:function(){var t=this,n=c.template(I),i=t.options.messages,r=[{text:i.orderByName,value:"name"},{text:i.orderBySize,value:"size"}];t.toolbar=e(n({messages:i,showUpload:t.options.transport.uploadUrl,showCreate:t.options.transport.create,showDelete:t.options.transport.destroy})).appendTo(t.element).find(".k-upload input").kendoUpload({multiple:!1,localization:{dropFilesHere:i.dropFilesHere},async:{saveUrl:t.options.transport.uploadUrl,autoUpload:!0},upload:f(t._fileUpload,t),error:function(e){t._error({xhr:e.XMLHttpRequest,status:"error"})}}).end(),t.upload=t.toolbar.find(".k-upload input").data("kendoUpload"),t.arrangeBy=t.toolbar.find(".k-tiles-arrange select").kendoDropDownList({dataSource:r,dataTextField:"text",dataValueField:"value",change:function(){t.orderBy(this.value())}}).data("kendoDropDownList"),t._attachDropzoneEvents()},_attachDropzoneEvents:function(){var t=this;t.options.transport.uploadUrl&&(n(e(document.documentElement),e.proxy(t._dropEnter,t),e.proxy(t._dropLeave,t)),t._scrollHandler=f(t._positionDropzone,t))},_dropEnter:function(){this._positionDropzone(),e(document).on("scroll"+x,this._scrollHandler)},_dropLeave:function(){this._removeDropzone(),e(document).off("scroll"+x,this._scrollHandler)},_positionDropzone:function(){var e=this,t=e.element,n=t.offset();e.toolbar.find(".k-dropzone").addClass("k-imagebrowser-dropzone").offset(n).css({width:t[0].clientWidth,height:t[0].clientHeight,lineHeight:t[0].clientHeight+"px"})},_removeDropzone:function(){this.toolbar.find(".k-dropzone").removeClass("k-imagebrowser-dropzone").css({width:"",height:"",lineHeight:"",top:"",left:""})},_deleteClick:function(){var e=this,t=e.listView.select(),n=c.format(e.options.messages.deleteFile,t.find("strong").text());t.length&&e._showMessage(n,"confirm")&&e.listView.remove(t)},_addClick:function(){this.createDirectory()},_getFieldName:function(e){return o(this.dataSource.reader.model.fields,e)},_fileUpload:function(e){var t,n=this,i=n.options,r=i.fileTypes,o=RegExp(("("+r.split(",").join(")|(")+")").replace(/\*\./g,".*."),"i"),a=e.files[0].name,s=S,l=D;o.test(a)?(e.data={path:n.path()},t=n._createFile(a),t?n.upload.one("success",function(e){t.set(s,e.response[n._getFieldName(s)]),t.set(l,e.response[n._getFieldName(l)]),n._tiles=n.listView.items().filter("["+c.attr("type")+"=f]"),n._scroll()}):e.preventDefault()):(e.preventDefault(),n._showMessage(c.format(i.messages.invalidFileType,a,r)))},_findFile:function(e){var t,n,i,r=this.dataSource.data(),o=A,a=S;for(e=e.toLowerCase(),t=0,i=r.length;i>t;t++)if("f"===r[t].get(o)&&r[t].get(a).toLowerCase()===e){n=r[t];break}return n},_createFile:function(e){var t,n,i=this,r=0,o={},a=A,s=i.dataSource.view(),l=i._findFile(e);if(l&&!i._showMessage(c.format(i.options.messages.overwriteFile,e),"confirm"))return null;if(l)return l;for(t=0,n=s.length;n>t;t++)if("f"===s[t].get(a)){r=t;break}return o[a]="f",o[S]=e,o[D]=0,i.dataSource.insert(++r,o)},createDirectory:function(){var e,t,n=this,i=0,r=A,o=S,a=n.dataSource.data(),s=n._nameDirectory(),l=new n.dataSource.reader.model;for(e=0,t=a.length;t>e;e++)"d"===a[e].get(r)&&(i=e);l.set(r,"d"),l.set(o,s),n.listView.one("dataBound",function(){var e=n.listView.items().filter("["+c.attr("uid")+"="+l.uid+"]"),t=e.find("input");e.length&&this.edit(e),this.element.scrollTop(e.attr("offsetTop")-this.element[0].offsetHeight),setTimeout(function(){t.select()})}).one("save",function(e){var t=e.model.get(o);t?e.model.set(o,n._nameExists(t,l.uid)?n._nameDirectory():t):e.model.set(o,s)}),n.dataSource.insert(++i,l)},_directoryKeyDown:function(e){13==e.keyCode&&e.currentTarget.blur()},_directoryBlur:function(){this.listView.save()},_nameExists:function(e,t){var n,i,r=this.dataSource.data(),o=A,a=S;for(n=0,i=r.length;i>n;n++)if("d"===r[n].get(o)&&r[n].get(a).toLowerCase()===e.toLowerCase()&&r[n].uid!==t)return!0;return!1},_nameDirectory:function(){var t,n,i,r="New folder",o=this.dataSource.data(),a=[],s=A,l=S;for(n=0,i=o.length;i>n;n++)"d"===o[n].get(s)&&o[n].get(l).toLowerCase().indexOf(r.toLowerCase())>-1&&a.push(o[n].get(l));if(e.inArray(r,a)>-1){n=2;do t=r+" ("+n+")",n++;while(e.inArray(t,a)>-1);r=t}return r},orderBy:function(e){this.dataSource.sort([{field:A,dir:"asc"},{field:e,dir:"asc"}])},search:function(e){this.dataSource.filter({field:S,operator:"contains",value:e})},_content:function(){var t=this;t.list=e('<ul class="k-reset k-floats k-tiles" />').appendTo(t.element).on("scroll"+x,f(t._scroll,t)).on("dblclick"+x,"li",f(t._dblClick,t)),t.listView=new c.ui.ListView(t.list,{dataSource:t.dataSource,template:t._itemTmpl(),editTemplate:t._editTmpl(),selectable:!0,autoBind:!1,dataBinding:function(e){t.toolbar.find(".k-delete").parent().addClass("k-state-disabled"),("remove"===e.action||"sync"===e.action)&&e.preventDefault()},dataBound:function(){t.dataSource.view().length?(t._tiles=this.items().filter("["+c.attr("type")+"=f]"),t._scroll()):this.wrapper.append(F({text:t.options.messages.emptyFolder}))},change:f(t._listViewChange,t)})},_dblClick:function(t){var n,r=this,o=e(t.currentTarget);o.filter("["+c.attr("type")+"=d]").length?(n=r.dataSource.getByUid(o.attr(c.attr("uid"))),n&&(r.path(i(r.path(),n.get(S))),r.breadcrumbs.value(r.path()))):o.filter("["+c.attr("type")+"=f]").length&&r.trigger(w)},_listViewChange:function(){var e=this._selectedItem();e&&(this.toolbar.find(".k-delete").parent().removeClass("k-state-disabled"),"f"===e.get(A)&&this.trigger(b))},_dataSource:function(){var e,t=this,n=t.options,i=n.transport,r=h({},E),o={field:S,dir:"asc"},a={type:i.type||"imagebrowser",sort:[r,o]};p(i)&&(i.path=f(t.path,t),a.transport=i),p(n.schema)?a.schema=n.schema:i.type&&p(c.data.schemas[i.type])&&(e=c.data.schemas[i.type]),t.dataSource&&t._errorHandler?t.dataSource.unbind(y,t._errorHandler):t._errorHandler=f(t._error,t),t.dataSource=c.data.DataSource.create(a).bind(y,t._errorHandler)},_navigation:function(){var t=this,n=e('<div class="k-floatwrap"><input/><input/></div>').appendTo(this.element);t.breadcrumbs=n.find("input:first").kendoBreadcrumbs({value:t.options.path,change:function(){t.path(this.value())}}).data("kendoBreadcrumbs"),t.searchBox=n.parent().find("input:last").kendoSearchBox({label:t.options.messages.search,change:function(){t.search(this.value())}}).data("kendoSearchBox")},_error:function(e){var t,n=this;n.trigger(y,e)||(t=e.xhr.status,"error"==e.status?"404"==t?n._showMessage(n.options.messages.directoryNotFound):"0"!=t&&n._showMessage("Error! The requested URL returned "+t+" - "+e.xhr.statusText):"timeout"==t&&n._showMessage("Error! Server timeout."))},_showMessage:function(e,t){return window[t||"alert"](e)},refresh:function(){var e=this;e._navigation(),e._toolbar(),e._content()},_loadImage:function(t){var n=this,i=e(t),r=n.dataSource.getByUid(i.attr(c.attr("uid"))),o=r.get(S),a=n.options.transport.thumbnailUrl,s=e("<img />",{alt:o}),l="?";s.hide().on("load"+x,function(){e(this).prev().remove().end().addClass("k-image").fadeIn()}),i.find(".k-loading").after(s),v(a)?a=a(n.path(),encodeURIComponent(o)):(a.indexOf("?")>=0&&(l="&"),a=a+l+"path="+n.path()+encodeURIComponent(o)),s.attr("src",a),t.loaded=!0},_scroll:function(){var e=this;e.options.transport&&e.options.transport.thumbnailUrl&&(clearTimeout(e._timeout),e._timeout=setTimeout(function(){var n=e.list.outerHeight(),i=e.list.scrollTop(),r=i+n;e._tiles.each(function(){var n=a(this),o=n+this.offsetHeight;return(n>=i&&r>n||o>=i&&r>o)&&e._loadImage(this),n>r?!1:t}),e._tiles=e._tiles.filter(function(){return!this.loaded})},250))},_editTmpl:function(){var e='<li class="k-tile k-state-selected" '+c.attr("uid")+'="#=uid#" ';return e+=c.attr("type")+'="${'+A+'}">',e+="#if("+A+' == "d") { #',e+='<div class="k-thumb"><span class="k-icon k-folder"></span></div>',e+="#}else{#",e+='<div class="k-thumb"><span class="k-icon k-loading"></span></div>',e+="#}#",e+="#if("+A+' == "d") { #',e+='<input class="k-input" '+c.attr("bind")+'="value:'+S+'"/>',e+="#}#",e+="</li>",f(c.template(e),{sizeFormatter:r})},_itemTmpl:function(){var e=this,t='<li class="k-tile" '+c.attr("uid")+'="#=uid#" ';return t+=c.attr("type")+'="${'+A+'}">',t+="#if("+A+' == "d") { #',t+='<div class="k-thumb"><span class="k-icon k-folder"></span></div>',t+="#}else{#",t+=e.options.transport&&e.options.transport.thumbnailUrl?'<div class="k-thumb"><span class="k-icon k-loading"></span></div>':'<div class="k-thumb"><span class="k-icon k-file"></span></div>',t+="#}#",t+="<strong>${"+S+"}</strong>",t+="#if("+A+' == "f") { # <span class="k-filesize">${this.sizeFormatter('+D+")}</span> #}#",t+="</li>",f(c.template(t),{sizeFormatter:r})},path:function(e){var n=this,i=n._path||"";return e!==t?(n._path=e.replace(_,"")+"/",n.dataSource.read({path:n._path}),t):(i&&(i=i.replace(_,"")),"/"===i||""===i?"":i+"/")}}),l=u.extend({init:function(e,t){var n=this;t=t||{},u.fn.init.call(n,e,t),g&&n.element.attr("placeholder",n.options.label),n._wrapper(),n.element.on("keydown"+T,f(n._keydown,n)).on("change"+T,f(n._updateValue,n)),n.wrapper.on(k+T,"a",f(n._click,n)),g||n.element.on("focus"+T,f(n._focus,n)).on("blur"+T,f(n._blur,n))},options:{name:"SearchBox",label:"Search",value:""},events:[b],destroy:function(){var e=this;e.wrapper.add(e.element).add(e.label).off(T),u.fn.destroy.call(e)},_keydown:function(e){13===e.keyCode&&this._updateValue()},_click:function(e){e.preventDefault(),this._updateValue()},_updateValue:function(){var e=this,t=e.element.val();t!==e.value()&&(e.value(t),e.trigger(b))},_blur:function(){this._updateValue(),this._toggleLabel()},_toggleLabel:function(){g||this.label.toggle(!this.element.val())},_focus:function(){this.label.hide()},_wrapper:function(){var t=this.element,n=t.parents(".k-search-wrap");t[0].style.width="",t.addClass("k-input"),n.length||(n=t.wrap(e('<div class="k-widget k-search-wrap k-textbox"/>')).parent(),g||e('<label style="display:block">'+this.options.label+"</label>").insertBefore(t),e('<a href="#" class="k-icon k-i-search k-search"/>').appendTo(n)),this.wrapper=n,this.label=n.find(">label")},value:function(e){var n=this;return e!==t?(n.options.value=e,n.element.val(e),n._toggleLabel(),t):n.options.value}}),d=u.extend({init:function(e,t){var n=this;t=t||{},u.fn.init.call(n,e,t),n._wrapper(),n.wrapper.on("focus"+C,"input",f(n._focus,n)).on("blur"+C,"input",f(n._blur,n)).on("keydown"+C,"input",f(n._keydown,n)).on(k+C,"a.k-i-arrow-n:first",f(n._rootClick,n)).on(k+C,"a:not(.k-i-arrow-n)",f(n._click,n)),n.value(n.options.value)},options:{name:"Breadcrumbs",gap:50},events:[b],destroy:function(){var e=this;u.fn.destroy.call(e),e.wrapper.add(e.wrapper.find("input")).add(e.wrapper.find("a")).off(C)},_update:function(e){e="/"===(e||"").charAt(0)?e:"/"+(e||""),e!==this.value()&&(this.value(e),this.trigger(b))},_click:function(t){t.preventDefault(),this._update(this._path(e(t.target).prevAll("a:not(.k-i-arrow-n)").andSelf()))},_rootClick:function(e){e.preventDefault(),this._update("")},_focus:function(){var e=this,t=e.element;e.overlay.hide(),e.element.val(e.value()),setTimeout(function(){t.select()})},_blur:function(){if(!this.overlay.is(":visible")){var e=this,t=e.element,n=t.val().replace(/\/{2,}/g,"/");e.overlay.show(),t.val(""),e._update(n)}},_keydown:function(e){var t=this;13===e.keyCode&&(t._blur(),setTimeout(function(){t.overlay.find("a:first").focus()}))},_wrapper:function(){var t,n=this.element,i=n.parents(".k-breadcrumbs");n[0].style.width="",n.addClass("k-input"),i.length||(i=n.wrap(e('<div class="k-widget k-breadcrumbs k-textbox"/>')).parent()),t=i.find(".k-breadcrumbs-wrap"),t.length||(t=e('<div class="k-breadcrumbs-wrap"/>').appendTo(i)),this.wrapper=i,this.overlay=t},refresh:function(){var n,i,r,o,a="",s=this.value();for(s!==t&&s.match(/^\//)||(s="/"+(s||"")),n=s.split("/"),r=0,o=n.length;o>r;r++)i=n[r],i&&(a||(a+='<a href="#" class="k-icon k-i-arrow-n">root</a>'),a+='<a class="k-link" href="#">'+n[r]+"</a>",a+='<span class="k-icon k-i-arrow-e">&gt;</span>');this.overlay.empty().append(e(a)),this._adjustSectionWidth()},_adjustSectionWidth:function(){var t,n=this,i=n.wrapper,r=i.width()-n.options.gap,o=n.overlay.find("a");o.each(function(n){t=e(this),t.parent().width()>r&&(n==o.length-1?t.width(r):t.prev().andSelf().hide())})},value:function(e){return e!==t?(this._value=e.replace(/\/{2,}/g,"/"),this.refresh(),t):this._value},_path:function(t){return"/"+e.map(t,function(t){return e(t).text()}).join("/")}}),c.ui.plugin(s),c.ui.plugin(d),c.ui.plugin(l)}(window.kendo.jQuery),function(e,t){var n,i,r=window.kendo,o=r.Class,a=r.ui.Widget,s=r.support.mobileOS,l=r.support.browser,d=e.extend,c=e.proxy,u=r.deepExtend,p=".kendoEditor",f=r.keys,h=o.extend({init:function(e){this.options=e},getHtml:function(){var e=this.options;return r.template(e.template,{useWithBlock:!1})(e)}}),g={editorWrapperTemplate:'<table cellspacing="4" cellpadding="0" class="k-widget k-editor k-header" role="presentation"><tbody><tr role="presentation"><td class="k-editor-toolbar-wrap k-secondary" role="presentation"><ul class="k-editor-toolbar" role="toolbar" /></td></tr><tr><td class="k-editable-area" /></tr></tbody></table>',buttonTemplate:'<a href="" role="button" class="k-tool-icon #= data.cssClass #"#= data.popup ? " data-popup" : "" # unselectable="on" title="#= data.title #">#= data.title #</a>',colorPickerTemplate:'<div class="k-colorpicker #= data.cssClass #" />',comboBoxTemplate:'<select title="#= data.title #" class="#= data.cssClass #" />',dropDownListTemplate:'<select title="#= data.title #" class="#= data.cssClass #" />',separatorTemplate:'<span class="k-separator" />',formatByName:function(t,n){for(var i=0;i<n.length;i++)if(e.inArray(t,n[i].tags)>=0)return n[i]},registerTool:function(e,t){var n=t.options;n&&n.template&&(n.template.options.cssClass="k-"+e),t.name||(t.options.name=e,t.name=e.toLowerCase()),b.defaultTools[e]=t},registerFormat:function(e,t){b.fn.options.formats[e]=t}},m={bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",superscript:"Superscript",subscript:"Subscript",justifyCenter:"Center text",justifyLeft:"Align text left",justifyRight:"Align text right",justifyFull:"Justify",insertUnorderedList:"Insert unordered list",insertOrderedList:"Insert ordered list",indent:"Indent",outdent:"Outdent",createLink:"Insert hyperlink",unlink:"Remove hyperlink",insertImage:"Insert image",insertHtml:"Insert HTML",viewHtml:"View HTML",fontName:"Select font family",fontNameInherit:"(inherited font)",fontSize:"Select font size",fontSizeInherit:"(inherited size)",formatBlock:"Format",formatting:"Format",foreColor:"Color",backColor:"Background color",style:"Styles",emptyFolder:"Empty Folder",uploadFile:"Upload",orderBy:"Arrange by:",orderBySize:"Size",orderByName:"Name",invalidFileType:'The selected file "{0}" is not valid. Supported file types are {1}.',deleteFile:'Are you sure you want to delete "{0}"?',overwriteFile:'A file with name "{0}" already exists in the current directory. Do you want to overwrite it?',directoryNotFound:"A directory with this name was not found.",imageWebAddress:"Web address",imageAltText:"Alternate text",linkWebAddress:"Web address",linkText:"Text",linkToolTip:"ToolTip",linkOpenInNewWindow:"Open link in new window",dialogUpdate:"Update",dialogInsert:"Insert",dialogButtonSeparator:"or",dialogCancel:"Cancel",createTable:"Create table",addColumnLeft:"Add column on the left",addColumnRight:"Add column on the right",addRowAbove:"Add row above",addRowBelow:"Add row below",deleteRow:"Delete row",deleteColumn:"Delete column"},v=!s||s.ios&&s.flatVersion>=500||!s.ios&&t!==document.documentElement.contentEditable,_={basic:["bold","italic","underline"],alignment:["justifyLeft","justifyCenter","justifyRight"],lists:["insertUnorderedList","insertOrderedList"],indenting:["indent","outdent"],links:["createLink","unlink"],tables:["createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn"]},b=a.extend({init:function(t,n){var i,o,s,l=this,f=r.ui.editor,h=f.Dom.name(t);
v&&(a.fn.init.call(l,t,n),l.options=u({},l.options,n),t=l.element,t.closest("form").on("submit"+p,function(){l.update()}),s=d({},l.options),s.editor=l,"textarea"==h?(l._wrapTextarea(),o=l.wrapper.find(".k-editor-toolbar"),t[0].id&&o.attr("aria-controls",t[0].id)):(l.element.addClass("k-widget k-editor k-editor-inline"),s.popup=!0,o=e('<ul class="k-editor-toolbar k-secondary" role="toolbar" />').insertBefore(t)),l.toolbar=new f.Toolbar(o[0],s),l.toolbar.bindTo(l),l._initializeContentElement(l),l.keyboard=new f.Keyboard([new f.TypingHandler(l),new f.SystemHandler(l)]),l.clipboard=new f.Clipboard(this),l.undoRedoStack=new f.UndoRedoStack,i=n&&n.value?n.value:l.textarea?t.val().replace(/[\r\n\v\f\t ]+/gi," "):t[0].innerHTML,l.value(i),e(document).on("mousedown",c(l._endTyping,l)).on("mouseup",c(l._mouseup,l)),r.notify(l))},_endTyping:function(){var e=this.keyboard;try{e.isTypingInProgress()&&(e.endTyping(!0),this.saveSelection())}catch(t){}},_selectionChange:function(){this._selectionStarted=!1,this.saveSelection(),this.trigger("select",{})},_wrapTextarea:function(){var t=this,n=t.element,i=n[0].style.width,r=n[0].style.height,o=g.editorWrapperTemplate,a=e(o).insertBefore(n).width(i).height(r),s=a.find(".k-editable-area");n.attr("autocomplete","off").appendTo(s).addClass("k-content k-raw-content").css("display","none"),t.textarea=n,t.wrapper=a},_createContentElement:function(t){var n,i,o,a=this,s=a.textarea,l=r.support.isRtl(s)?"direction:rtl;":"";return s.hide(),n=e("<iframe />",{src:'javascript:""',frameBorder:"0"}).css("display","").addClass("k-content").insertBefore(s)[0],i=n.contentWindow||n,o=i.document||n.contentDocument,e(n).one("load",function(){var e=a.toolbar.items().filter(".k-decorated");e.kendoSelectBox("decorate",o)}),o.open(),o.write("<!DOCTYPE html><html><head><meta charset='utf-8' /><style>html,body{padding:0;margin:0;background:#fff;height:100%;min-height:100%;}body{font-size:12px;font-family:Verdana,Geneva,sans-serif;padding-top:1px;margin-top:-1px;word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;"+l+"}"+"h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}"+"p{margin:0 0 1em;padding:0 .2em}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}"+"ul,ol{padding-left:2.5em}"+"a{color:#00a}"+"code{font-size:1.23em}"+".k-table{width:100%;border-spacing:0;margin: 0 0 1em;}"+".k-table td{min-width:1px;padding:.2em .3em;}"+".k-table,.k-table td{outline:0;border: 1px dotted #ccc;}"+".k-table p{margin:0;padding:0;}"+"</style>"+"<script>(function(d,c){d[c]('header'),d[c]('article'),d[c]('nav'),d[c]('section'),d[c]('footer');})(document, 'createElement');</script>"+e.map(t,function(e){return"<link rel='stylesheet' href='"+e+"'>"}).join("")+"</head><body autocorrect='off' contenteditable='true'></body></html>"),o.close(),i},_initializeContentElement:function(){var n,i,o,a=this;a.textarea?(a.window=a._createContentElement(a.options.stylesheets),n=a.document=a.window.contentDocument||a.window.document,a.body=n.body,i=a.window,e(n).on("mouseup"+p,c(a._mouseup,a))):(a.window=window,n=a.document=document,a.body=a.element[0],i=a.body,o=a.toolbar.items().filter(".k-decorated"),o.kendoSelectBox("decorate",n)),e(i).on("blur"+p,function(){var e=a.textarea?a.textarea.val():a._oldValue,t=a.options.encoded?a.encodedValue():a.value();a.update(),t!=e&&a.trigger("change")});try{n.execCommand("enableInlineTableEditing",null,!1)}catch(s){}r.support.touch&&e(n).on("selectionchange"+p,function(){a._selectionChange()}),e(a.body).on("keydown"+p,function(e){var n,i,o,s,d,u,p,h,g;return e.keyCode===f.F10?(setTimeout(c(a.toolbar.focus,a.toolbar),100),e.preventDefault(),t):(e.keyCode===f.BACKSPACE?(n=a.getRange(),o=l.msie?"":'<br _moz_dirty="" />',s=r.ui.editor.Dom,n.deleteContents(),i=n.commonAncestorContainer,"p"===s.name(i)&&""===i.innerHTML&&(i.innerHTML=o,n.setStart(i,0),n.collapse(!0),a.selectRange(n))):(e.keyCode==f.LEFT||e.keyCode==f.RIGHT)&&(n=a.getRange(),d=e.keyCode==f.LEFT,u=n[d?"startContainer":"endContainer"],p=n[d?"startOffset":"endOffset"],h=d?-1:1,d&&(p-=1),p+h>0&&3==u.nodeType&&"﻿"==u.nodeValue[p]&&(n.setStart(u,p+h),n.collapse(!0),a.selectRange(n))),(g=a.keyboard.toolFromShortcut(a.toolbar.tools,e))?(e.preventDefault(),/undo|redo/.test(g)||a.keyboard.endTyping(!0),a.trigger("keydown",e),a.exec(g),!1):(a.keyboard.clearTimeout(),a.keyboard.keydown(e),t))}).on("keyup"+p,function(t){var n=[8,9,33,34,35,36,37,38,39,40,40,45,46];(e.inArray(t.keyCode,n)>-1||65==t.keyCode&&t.ctrlKey&&!t.altKey&&!t.shiftKey)&&a._selectionChange(),a.keyboard.keyup(t)}).on("mousedown"+p,function(t){a._selectionStarted=!0;var n=e(t.target);!l.gecko&&2==t.which&&n.is("a[href]")&&window.open(n.attr("href"),"_new")}).on("click"+p,function(e){var t,n=r.ui.editor.Dom;"img"===n.name(e.target)&&(t=a.createRange(),t.selectNode(e.target),a.selectRange(t))}).on("cut"+p+" paste"+p,function(e){a.clipboard["on"+e.type](e)}).on("focusin"+p,function(){e(this).addClass("k-state-active"),a.toolbar.show()}).on("focusout"+p,function(){setTimeout(function(){var t=r._activeElement(),n=a.body,i=a.toolbar;t==n||e.contains(n,t)||i.focused()||(e(n).removeClass("k-state-active"),i.hide())},10)})},_mouseup:function(){var e=this;e._selectionStarted&&setTimeout(function(){e._selectionChange()},1)},refresh:function(){var e=this;e.textarea.val(e.value()),e.wrapper.find("iframe").remove(),e._initializeContentElement(e),e.value(e.textarea.val())},events:["select","change","execute","error","paste","keydown","keyup"],options:{name:"Editor",messages:m,formats:{},encoded:!0,stylesheets:[],dialogOptions:{modal:!0,resizable:!1,draggable:!0,animation:!1},fontName:[{text:"Arial",value:"Arial,Helvetica,sans-serif"},{text:"Courier New",value:"'Courier New',Courier,monospace"},{text:"Georgia",value:"Georgia,serif"},{text:"Impact",value:"Impact,Charcoal,sans-serif"},{text:"Lucida Console",value:"'Lucida Console',Monaco,monospace"},{text:"Tahoma",value:"Tahoma,Geneva,sans-serif"},{text:"Times New Roman",value:"'Times New Roman',Times,serif"},{text:"Trebuchet MS",value:"'Trebuchet MS',Helvetica,sans-serif"},{text:"Verdana",value:"Verdana,Geneva,sans-serif"}],fontSize:[{text:"1 (8pt)",value:"xx-small"},{text:"2 (10pt)",value:"x-small"},{text:"3 (12pt)",value:"small"},{text:"4 (14pt)",value:"medium"},{text:"5 (18pt)",value:"large"},{text:"6 (24pt)",value:"x-large"},{text:"7 (36pt)",value:"xx-large"}],formatBlock:[{text:"Paragraph",value:"p"},{text:"Quotation",value:"blockquote"},{text:"Heading 1",value:"h1"},{text:"Heading 2",value:"h2"},{text:"Heading 3",value:"h3"},{text:"Heading 4",value:"h4"},{text:"Heading 5",value:"h5"},{text:"Heading 6",value:"h6"}],tools:[].concat.call(["formatting"],_.basic,_.alignment,_.lists,_.indenting,_.links,["insertImage"],_.tables)},destroy:function(){var t=this;a.fn.destroy.call(t),e(t.window).add(t.document).add(t.body).add(t.wrapper).add(t.element.closest("form")).off(p),e(document).off("mousedown",c(t._endTyping,t)).off("mouseup",c(t._mouseup,t)),r.destroy(t.wrapper)},value:function(n){var i,o,a,s=this.body,d=r.ui.editor,c=d.Dom,u=d.Serializer.domToXhtml(s);return n===t?u:(n!=u&&(i=/onerror\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/i,n=(n||"").replace(/<!\[CDATA\[(.*)?\]\]>/g,"<!--[CDATA[$1]]-->").replace(/<script([^>]*)>(.*)?<\/script>/gi,"<telerik:script $1>$2</telerik:script>").replace(/<img([^>]*)>/gi,function(e){return e.replace(i,"")}).replace(/(<\/?img[^>]*>)[\r\n\v\f\t ]+/gi,"$1").replace(/<p([^>]*)>(\s*)?<\/p>/gi,"<p$1>"+d.emptyElementContent+"</p>"),l.msie&&l.version<9?(n="<br/>"+n,o="originalsrc",a="originalhref",n=n.replace(/href\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/,a+'="$1"'),n=n.replace(/src\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/,o+'="$1"'),s.innerHTML=n,c.remove(s.firstChild),e(s).find("telerik\\:script,script,link,img,a").each(function(){var e=this;e[a]&&(e.setAttribute("href",e[a]),e.removeAttribute(a)),e[o]&&(e.setAttribute("src",e[o]),e.removeAttribute(o))})):(s.innerHTML=n,l.msie&&(c.normalize(s),setTimeout(function(){var e,t,n,i=s.getElementsByTagName("ol");for(e=0;e<i.length;e++)t=i[e],n=t.getAttribute("start"),t.setAttribute("start",1),n?t.setAttribute("start",n):t.removeAttribute(n)},1))),e("table",this.body).addClass("k-table"),this.selectionRestorePoint=null,this.update()),t)},saveSelection:function(t){t=t||this.getRange();var n=t.commonAncestorContainer,i=this.body;(n==i||e.contains(i,n))&&(this.selectionRestorePoint=new r.ui.editor.RestorePoint(t))},_focusBody:function(){var e=this.body;r._activeElement()!=e&&e.focus()},restoreSelection:function(){this._focusBody(),this.selectionRestorePoint&&this.selectRange(this.selectionRestorePoint.toRange())},focus:function(){this.restoreSelection()},update:function(e){e=e||this.options.encoded?this.encodedValue():this.value(),this.textarea?this.textarea.val(e):this._oldValue=e},encodedValue:function(){return r.ui.editor.Dom.encode(this.value())},createRange:function(e){return r.ui.editor.RangeUtils.createRange(e||this.document)},getSelection:function(){return r.ui.editor.SelectionUtils.selectionFromDocument(this.document)},selectRange:function(e){this._focusBody();var t=this.getSelection();t.removeAllRanges(),t.addRange(e),this.saveSelection(e)},getRange:function(){var e=this.getSelection(),t=e.rangeCount>0?e.getRangeAt(0):this.createRange(),n=this.document;return t.startContainer!=n||t.endContainer!=n||t.startOffset||t.endOffset||(t.setStart(this.body,0),t.collapse(!0)),t},selectedHtml:function(){return r.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents())},paste:function(e,t){this.clipboard.paste(e,t)},exec:function(e,n){var i,r,o,a=this,s=null;if(!e)throw Error("kendoEditor.exec(): `name` parameter cannot be empty");if(e=e.toLowerCase(),a.keyboard.isTypingInProgress()||a.restoreSelection(),r=a.toolbar.toolById(e),!r)for(o in b.defaultTools)if(o.toLowerCase()==e){r=b.defaultTools[o];break}if(r){if(i=a.getRange(),r.command&&(s=r.command(d({range:i},n))),a.trigger("execute",{name:e,command:s}),/undo|redo/i.test(e))a.undoRedoStack[e]();else if(s&&(s.managesUndoRedo||a.undoRedoStack.push(s),s.editor=a,s.exec(),s.async))return s.change=c(a._selectionChange,a),t;a._selectionChange()}}});b.defaultTools={undo:{options:{key:"Z",ctrl:!0}},redo:{options:{key:"Y",ctrl:!0}}},r.ui.plugin(b),n=o.extend({init:function(e){this.options=e},initialize:function(e,t){e.attr({unselectable:"on",title:t.title})},command:function(e){return new this.options.command(e)},update:e.noop}),n.exec=function(e,t,n){e.exec(t,{value:n})},i=n.extend({init:function(e){n.fn.init.call(this,e)},command:function(e){var t=this;return new r.ui.editor.FormatCommand(d(e,{formatter:t.options.formatter}))},update:function(e,t){var n=this.options.finder.isFormatted(t);e.toggleClass("k-state-selected",n),e.attr("aria-pressed",n)}}),g.registerTool("separator",new n({template:new h({template:g.separatorTemplate})})),d(r.ui,{editor:{ToolTemplate:h,EditorUtils:g,Tool:n,FormatTool:i,_bomFill:l.msie&&l.version<9?"﻿":"",emptyElementContent:l.msie?l.version<9?"﻿":"":'<br _moz_dirty="" />'}})}(window.jQuery),function(e){function t(e){var t,n,i={};for(t=0,n=e.length;n>t;t++)i[e[t]]=!0;return i}var n,i,r,o,a,s,l,d,c=window.kendo,u=e.map,p=e.extend,f=c.support.browser,h="style",g="float",m="cssFloat",v="styleFloat",_="class",b="k-marker",w=t("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed".split(",")),y="div,p,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,li,map,menu,noframes,noscript,object,ol,pre,script,table,tbody,td,tfoot,th,thead,tr,ul,header,article,nav,footer,section,aside,main,figure,figcaption".split(","),k=t(y),x="span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby".split(","),C=t(x),T=t("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected".split(",")),S=function(e){1==e.nodeType&&e.normalize()};f.msie&&f.version>=8&&(S=function(e){if(1==e.nodeType&&e.firstChild)for(var t=e.firstChild,n=t;;){if(n=n.nextSibling,!n)break;3==n.nodeType&&3==t.nodeType&&(n.nodeValue=t.nodeValue+n.nodeValue,d.remove(t)),t=n}}),i=/^\s+$/,r=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i,o=/\ufeff/g,a="color,padding-left,padding-right,padding-top,padding-bottom,background-color,background-attachment,background-image,background-position,background-repeat,border-top-style,border-top-width,border-top-color,border-bottom-style,border-bottom-width,border-bottom-color,border-left-style,border-left-width,border-left-color,border-right-style,border-right-width,border-right-color,font-family,font-size,font-style,font-variant,font-weight,line-height".split(","),s=/[\u00A0-\u2666<>\&]/g,l={34:"quot",38:"amp",39:"apos",60:"lt",62:"gt",160:"nbsp",161:"iexcl",162:"cent",163:"pound",164:"curren",165:"yen",166:"brvbar",167:"sect",168:"uml",169:"copy",170:"ordf",171:"laquo",172:"not",173:"shy",174:"reg",175:"macr",176:"deg",177:"plusmn",178:"sup2",179:"sup3",180:"acute",181:"micro",182:"para",183:"middot",184:"cedil",185:"sup1",186:"ordm",187:"raquo",188:"frac14",189:"frac12",190:"frac34",191:"iquest",192:"Agrave",193:"Aacute",194:"Acirc",195:"Atilde",196:"Auml",197:"Aring",198:"AElig",199:"Ccedil",200:"Egrave",201:"Eacute",202:"Ecirc",203:"Euml",204:"Igrave",205:"Iacute",206:"Icirc",207:"Iuml",208:"ETH",209:"Ntilde",210:"Ograve",211:"Oacute",212:"Ocirc",213:"Otilde",214:"Ouml",215:"times",216:"Oslash",217:"Ugrave",218:"Uacute",219:"Ucirc",220:"Uuml",221:"Yacute",222:"THORN",223:"szlig",224:"agrave",225:"aacute",226:"acirc",227:"atilde",228:"auml",229:"aring",230:"aelig",231:"ccedil",232:"egrave",233:"eacute",234:"ecirc",235:"euml",236:"igrave",237:"iacute",238:"icirc",239:"iuml",240:"eth",241:"ntilde",242:"ograve",243:"oacute",244:"ocirc",245:"otilde",246:"ouml",247:"divide",248:"oslash",249:"ugrave",250:"uacute",251:"ucirc",252:"uuml",253:"yacute",254:"thorn",255:"yuml",402:"fnof",913:"Alpha",914:"Beta",915:"Gamma",916:"Delta",917:"Epsilon",918:"Zeta",919:"Eta",920:"Theta",921:"Iota",922:"Kappa",923:"Lambda",924:"Mu",925:"Nu",926:"Xi",927:"Omicron",928:"Pi",929:"Rho",931:"Sigma",932:"Tau",933:"Upsilon",934:"Phi",935:"Chi",936:"Psi",937:"Omega",945:"alpha",946:"beta",947:"gamma",948:"delta",949:"epsilon",950:"zeta",951:"eta",952:"theta",953:"iota",954:"kappa",955:"lambda",956:"mu",957:"nu",958:"xi",959:"omicron",960:"pi",961:"rho",962:"sigmaf",963:"sigma",964:"tau",965:"upsilon",966:"phi",967:"chi",968:"psi",969:"omega",977:"thetasym",978:"upsih",982:"piv",8226:"bull",8230:"hellip",8242:"prime",8243:"Prime",8254:"oline",8260:"frasl",8472:"weierp",8465:"image",8476:"real",8482:"trade",8501:"alefsym",8592:"larr",8593:"uarr",8594:"rarr",8595:"darr",8596:"harr",8629:"crarr",8656:"lArr",8657:"uArr",8658:"rArr",8659:"dArr",8660:"hArr",8704:"forall",8706:"part",8707:"exist",8709:"empty",8711:"nabla",8712:"isin",8713:"notin",8715:"ni",8719:"prod",8721:"sum",8722:"minus",8727:"lowast",8730:"radic",8733:"prop",8734:"infin",8736:"ang",8743:"and",8744:"or",8745:"cap",8746:"cup",8747:"int",8756:"there4",8764:"sim",8773:"cong",8776:"asymp",8800:"ne",8801:"equiv",8804:"le",8805:"ge",8834:"sub",8835:"sup",8836:"nsub",8838:"sube",8839:"supe",8853:"oplus",8855:"otimes",8869:"perp",8901:"sdot",8968:"lceil",8969:"rceil",8970:"lfloor",8971:"rfloor",9001:"lang",9002:"rang",9674:"loz",9824:"spades",9827:"clubs",9829:"hearts",9830:"diams",338:"OElig",339:"oelig",352:"Scaron",353:"scaron",376:"Yuml",710:"circ",732:"tilde",8194:"ensp",8195:"emsp",8201:"thinsp",8204:"zwnj",8205:"zwj",8206:"lrm",8207:"rlm",8211:"ndash",8212:"mdash",8216:"lsquo",8217:"rsquo",8218:"sbquo",8220:"ldquo",8221:"rdquo",8222:"bdquo",8224:"dagger",8225:"Dagger",8240:"permil",8249:"lsaquo",8250:"rsaquo",8364:"euro"},d={findNodeIndex:function(e,t){for(var n=0;;){if(e=e.previousSibling,!e)break;t&&3==e.nodeType||n++}return n},isDataNode:function(e){return e&&null!==e.nodeValue&&null!==e.data},isAncestorOf:function(t,n){try{return!d.isDataNode(t)&&(e.contains(t,d.isDataNode(n)?n.parentNode:n)||n.parentNode==t)}catch(i){return!1}},isAncestorOrSelf:function(e,t){return d.isAncestorOf(e,t)||e==t},findClosestAncestor:function(e,t){if(d.isAncestorOf(e,t))for(;t&&t.parentNode!=e;)t=t.parentNode;return t},getNodeLength:function(e){return d.isDataNode(e)?e.length:e.childNodes.length},splitDataNode:function(e,t){for(var n=e.cloneNode(!1),i="",r=e;r.nextSibling&&3==r.nextSibling.nodeType&&r.nextSibling.nodeValue;)i+=r.nextSibling.nodeValue,r=r.nextSibling;e.deleteData(t,e.length),n.deleteData(0,t),n.nodeValue+=i,d.insertAfter(n,e)},attrEquals:function(t,n){var i,r;for(i in n)if(r=t[i],i==g&&(r=t[e.support.cssFloat?m:v]),"object"==typeof r){if(!d.attrEquals(r,n[i]))return!1}else if(r!=n[i])return!1;return!0},blockParentOrBody:function(e){return d.parentOfType(e,y)||e.ownerDocument.body},blockParents:function(t){var n,i,r,o=[];for(n=0,i=t.length;i>n;n++)r=d.parentOfType(t[n],d.blockElements),r&&e.inArray(r,o)<0&&o.push(r);return o},windowFromDocument:function(e){return e.defaultView||e.parentWindow},normalize:S,blockElements:y,inlineElements:x,empty:w,fillAttrs:T,toHex:function(e){var t=r.exec(e);return t?"#"+u(t.slice(1),function(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}).join(""):e},encode:function(e){return e.replace(s,function(e){var t=e.charCodeAt(0),n=l[t];return n?"&"+n+";":e})},stripBom:function(e){return e.replace(o,"")},name:function(e){return e.nodeName.toLowerCase()},significantChildNodes:function(t){return e.grep(t.childNodes,function(e){return 3!=e.nodeType||!d.isWhitespace(e)})},lastTextNode:function(e){var t,n=null;if(3==e.nodeType)return e;for(t=e.lastChild;t;t=t.previousSibling)if(n=d.lastTextNode(t))return n;return n},is:function(e,t){return d.name(e)==t},isMarker:function(e){return e.className==b},isWhitespace:function(e){return i.test(e.nodeValue)},isBlock:function(e){return k[d.name(e)]},isEmpty:function(e){return w[d.name(e)]},isInline:function(e){return C[d.name(e)]},scrollContainer:function(e){var t=d.windowFromDocument(e),n=(t.contentWindow||t).document||t.ownerDocument||t;return n=c.support.browser.webkit||"BackCompat"==n.compatMode?n.body:n.documentElement},scrollTo:function(t){var n,i,r=e(d.isDataNode(t)?t.parentNode:t),o=d.windowFromDocument(t.ownerDocument),a=o.innerHeight,s=d.scrollContainer(t.ownerDocument);"br"==d.name(r[0])&&(r=r.parent()),n=r.offset().top,i=r[0].offsetHeight,i+n>s.scrollTop+a&&(s.scrollTop=i+n-a)},persistScrollTop:function(e){n=d.scrollContainer(e).scrollTop},restoreScrollTop:function(e){d.scrollContainer(e).scrollTop=n},insertAt:function(e,t,n){e.insertBefore(t,e.childNodes[n]||null)},insertBefore:function(e,t){return t.parentNode?t.parentNode.insertBefore(e,t):t},insertAfter:function(e,t){return t.parentNode.insertBefore(e,t.nextSibling)},remove:function(e){e.parentNode.removeChild(e)},removeTextSiblings:function(e){for(var t=e.parentNode;e.nextSibling&&3==e.nextSibling.nodeType;)t.removeChild(e.nextSibling);for(;e.previousSibling&&3==e.previousSibling.nodeType;)t.removeChild(e.previousSibling)},trim:function(e){var t,n;for(t=e.childNodes.length-1;t>=0;t--)n=e.childNodes[t],d.isDataNode(n)?(d.stripBom(n.nodeValue).length||d.remove(n),d.isWhitespace(n)&&d.insertBefore(n,e)):n.className!=b&&(d.trim(n),n.childNodes.length||d.isEmpty(n)||d.remove(n));return e},closest:function(e,t){for(;e&&d.name(e)!=t;)e=e.parentNode;return e},sibling:function(e,t){do e=e[t];while(e&&1!=e.nodeType);return e},next:function(e){return d.sibling(e,"nextSibling")},prev:function(e){return d.sibling(e,"previousSibling")},parentOfType:function(e,t){do e=e.parentNode;while(e&&!d.ofType(e,t));return e},ofType:function(t,n){return e.inArray(d.name(t),n)>=0},changeTag:function(e,t){var n,i,r,o,a,s=d.create(e.ownerDocument,t),l=e.attributes;for(n=0,i=l.length;i>n;n++)a=l[n],a.specified&&(r=a.nodeName,o=a.nodeValue,r==_?s.className=o:r==h?s.style.cssText=e.style.cssText:s.setAttribute(r,o));for(;e.firstChild;)s.appendChild(e.firstChild);return d.insertBefore(s,e),d.remove(e),s},wrap:function(e,t){return d.insertBefore(t,e),t.appendChild(e),t},unwrap:function(e){for(var t=e.parentNode;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e)},create:function(e,t,n){return d.attr(e.createElement(t),n)},attr:function(e,t){t=p({},t),t&&h in t&&(d.style(e,t.style),delete t.style);for(var n in t)null===t[n]?(e.removeAttribute(n),delete t[n]):"className"==n&&(e[n]=t[n]);return p(e,t)},style:function(t,n){e(t).css(n||{})},unstyle:function(t,n){for(var i in n)i==g&&(i=e.support.cssFloat?m:v),t.style[i]="";""===t.style.cssText&&t.removeAttribute(h)},inlineStyle:function(t,n,i){var r,o=e(d.create(t,n,i));return t.body.appendChild(o[0]),r=u(a,function(e){return f.msie&&"line-height"==e&&"1px"==o.css(e)?"line-height:1.5":e+":"+o.css(e)}).join(";"),o.remove(),r},removeClass:function(t,n){var i,r,o=" "+t.className+" ",a=n.split(" ");for(i=0,r=a.length;r>i;i++)o=o.replace(" "+a[i]+" "," ");o=e.trim(o),o.length?t.className=o:t.removeAttribute(_)},commonAncestor:function(){var e,t,n,i,r,o=arguments.length,a=[],s=1/0,l=null;if(!o)return null;if(1==o)return arguments[0];for(e=0;o>e;e++){for(t=[],n=arguments[e];n;)t.push(n),n=n.parentNode;a.push(t.reverse()),s=Math.min(s,t.length)}if(1==o)return a[0][0];for(e=0;s>e;e++){for(i=a[0][e],r=1;o>r;r++)if(i!=a[r][e])return l;l=i}return l},closestSplittableParent:function(e){var t;return t=1==e.length?d.parentOfType(e[0],["ul","ol"]):d.commonAncestor.apply(null,e),t||(t=d.parentOfType(e[0],["p","td"])||e[0].ownerDocument.body),d.isInline(t)&&(t=d.blockParentOrBody(t)),t}},c.ui.editor.Dom=d}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui.editor,r=i.Dom,o=e.extend,a="xx-small,x-small,small,medium,large,x-large,xx-large".split(","),s=/"/g,l=/<br[^>]*>/i,d=/<p><\/p>/i,c=/([\w|\-]+)\s*:\s*([^;]+);?/i,u=/^sizzle-\d+/i,p={domToXhtml:function(n){function i(t){var n,i,o,a,l=e.trim,d=l(t).split(";"),u=d.length;for(n=0,u=d.length;u>n;n++)d[n].length&&(i=c.exec(d[n]),i&&(o=l(i[1].toLowerCase()),a=l(i[2]),"font-size-adjust"!=o&&"font-stretch"!=o&&(o.indexOf("color")>=0?a=r.toHex(a):o.indexOf("font")>=0?a=a.replace(s,"'"):/\burl\(/g.test(a)&&(a=a.replace(s,"")),g.push(o),g.push(":"),g.push(a),g.push(";"))))}function o(n){var o,a,s,l,d,c,p,f,h,m=[],v=n.attributes;for(r.is(n,"img")&&(p=n.style.width,f=n.style.height,h=e(n),p&&(h.attr("width",parseInt(p,10)),r.unstyle(n,{width:t})),f&&(h.attr("height",parseInt(f,10)),r.unstyle(n,{height:t}))),a=0,s=v.length;s>a;a++)o=v[a],l=o.nodeName,d=o.nodeValue,c=o.specified,"value"==l&&"value"in n&&n.value?c=!0:"type"==l&&"text"==d?c=!0:"class"!=l||d?u.test(l)?c=!1:"complete"==l?c=!1:"altHtml"==l?c=!1:l.indexOf("_moz")>=0&&(c=!1):c=!1,c&&m.push(o);if(m.length)for(m.sort(function(e,t){return e.nodeName>t.nodeName?1:e.nodeName<t.nodeName?-1:0}),a=0,s=m.length;s>a;a++)o=m[a],l=o.nodeName,d=o.nodeValue,("contenteditable"!=l.toLowerCase()||!r.is(n,"table")&&!r.is(n,"td"))&&("class"!=l||"k-table"!=d)&&(g.push(" "),g.push(l),g.push('="'),"style"==l?i(d||n.style.cssText):"src"==l||"href"==l?g.push(n.getAttribute(l,2)):g.push(r.fillAttrs[l]?l:d),g.push('"'))}function p(e,t){for(var n=e.firstChild;n;n=n.nextSibling)h(n,t)}function f(e){return e.nodeValue.replace(/\ufeff/g,"")}function h(n,i){var a,s,l,d,c,u=n.nodeType;if(1==u){if(a=r.name(n),!a||(n.attributes._moz_dirty||n.attributes._moz_editor_bogus_node)&&r.is(n,"br")||"k-marker"==n.className)return;if(r.isInline(n)&&1==n.childNodes.length&&3==n.firstChild.nodeType&&!f(n.firstChild))return;if(s=m[a])return s.start(n),p(n),s.end(n),t;g.push("<"),g.push(a),o(n),r.empty[a]?g.push(" />"):(g.push(">"),p(n,i||r.is(n,"pre")),g.push("</"),g.push(a),g.push(">"))}else 3==u?(d=f(n),!i&&e.support.leadingWhitespace&&(l=n.parentNode,c=n.previousSibling,c||(c=(r.isInline(l)?l:n).previousSibling),(!c||""===c.innerHTML||r.isBlock(c))&&(d=d.replace(/^[\r\n\v\f\t ]+/,"")),d=d.replace(/ +/," ")),g.push(r.encode(d))):4==u?(g.push("<![CDATA["),g.push(n.data),g.push("]]>")):8==u&&(n.data.indexOf("[CDATA[")<0?(g.push("<!--"),g.push(n.data),g.push("-->")):(g.push("<!"),g.push(n.data),g.push(">")))}var g=[],m={"telerik:script":{start:function(e){g.push("<script"),o(e),g.push(">")},end:function(){g.push("</script>")}},b:{start:function(){g.push("<strong>")},end:function(){g.push("</strong>")}},i:{start:function(){g.push("<em>")},end:function(){g.push("</em>")}},u:{start:function(){g.push('<span style="text-decoration:underline;">')},end:function(){g.push("</span>")}},iframe:{start:function(e){g.push("<iframe"),o(e),g.push(">")},end:function(){g.push("</iframe>")}},font:{start:function(e){var t,n,i;g.push('<span style="'),t=e.getAttribute("color"),n=a[e.getAttribute("size")],i=e.getAttribute("face"),t&&(g.push("color:"),g.push(r.toHex(t)),g.push(";")),i&&(g.push("font-face:"),g.push(i),g.push(";")),n&&(g.push("font-size:"),g.push(n),g.push(";")),g.push('">')},end:function(){g.push("</span>")}}};return 1==n.childNodes.length&&3==n.firstChild.nodeType?r.encode(f(n.firstChild).replace(/[\r\n\v\f\t ]+/," ")):(p(n),g=g.join(""),""===g.replace(l,"").replace(d,"")?"":g)}};o(i,{Serializer:p})}(window.kendo.jQuery),function(e){function t(e,t,n,i){var r,o,a,s;if(e==t)return i-n;for(r=t;r&&r.parentNode!=e;)r=r.parentNode;if(r)return f(r)-n;for(r=e;r&&r.parentNode!=t;)r=r.parentNode;if(r)return i-f(r)-1;for(o=p.commonAncestor(e,t),a=e;a&&a.parentNode!=o;)a=a.parentNode;for(a||(a=o),s=t;s&&s.parentNode!=o;)s=s.parentNode;return s||(s=o),a==s?0:f(s)-f(a)}function n(e,n){function i(e){try{return t(e.startContainer,e.endContainer,e.startOffset,e.endOffset)<0}catch(n){return!0}}i(e)&&(n?(e.commonAncestorContainer=e.endContainer=e.startContainer,e.endOffset=e.startOffset):(e.commonAncestorContainer=e.startContainer=e.endContainer,e.startOffset=e.endOffset),e.collapsed=!0)}function i(e){e.collapsed=e.startContainer==e.endContainer&&e.startOffset==e.endOffset;for(var t=e.startContainer;t&&t!=e.endContainer&&!p.isAncestorOf(t,e.endContainer);)t=t.parentNode;e.commonAncestorContainer=t}function r(e){var t=e.duplicate(),n=e.duplicate();return t.collapse(!0),n.collapse(!1),p.commonAncestor(e.parentElement(),t.parentElement(),n.parentElement())}function o(e,t,n){var i,r=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"],a=0,s=h(r),l=s?r:r.childNodes[o]||null,d=s?r.parentNode:r,c=t.ownerDocument,u=c.body.createTextRange();(3==r.nodeType||4==r.nodeType)&&(a=o),d||(d=c.body),"img"==d.nodeName.toLowerCase()?(u.moveToElementText(d),u.collapse(!1),e.setEndPoint(n?"StartToStart":"EndToStart",u)):(i=d.insertBefore(p.create(c,"a"),l),u.moveToElementText(i),p.remove(i),u[n?"moveStart":"moveEnd"]("character",a),u.collapse(!1),e.setEndPoint(n?"StartToStart":"EndToStart",u))}function a(e,t,n,i){var r,o,a,s,l,d,c,u=p.create(t.ownerDocument,"a"),g=e.duplicate(),m=i?"StartToStart":"StartToEnd";u.innerHTML="﻿",g.collapse(i),o=g.parentElement(),p.isAncestorOrSelf(n,o)||(o=n);do o.insertBefore(u,u.previousSibling),g.moveToElementText(u);while((r=g.compareEndPoints(m,e))>0&&u.previousSibling);a=u.nextSibling,-1==r&&h(a)?(g.setEndPoint(i?"EndToStart":"EndToEnd",e),p.remove(u),d=[a,g.text.length]):(s=!i&&u.previousSibling,l=i&&u.nextSibling,h(l)?d=[l,0]:h(s)?d=[s,s.length]:(c=f(u),d=o.nextSibling&&c==o.childNodes.length-1?[o.nextSibling,0]:[o,c]),p.remove(u)),t[i?"setStart":"setEnd"].apply(t,d)}var s=window.kendo,l=s.Class,d=e.extend,c=s.ui.editor,u=s.support.browser,p=c.Dom,f=p.findNodeIndex,h=p.isDataNode,g=p.findClosestAncestor,m=p.getNodeLength,v=p.normalize,_={selectionFromWindow:function(e){return"getSelection"in e?e.getSelection():new y(e.document)},selectionFromRange:function(e){var t=S.documentFromRange(e);return _.selectionFromDocument(t)},selectionFromDocument:function(e){return _.selectionFromWindow(p.windowFromDocument(e))}},b=l.extend({init:function(t){e.extend(this,{ownerDocument:t,startContainer:t,endContainer:t,commonAncestorContainer:t,startOffset:0,endOffset:0,collapsed:!0})},setStart:function(e,t){this.startContainer=e,this.startOffset=t,i(this),n(this,!0)},setEnd:function(e,t){this.endContainer=e,this.endOffset=t,i(this),n(this,!1)},setStartBefore:function(e){this.setStart(e.parentNode,f(e))},setStartAfter:function(e){this.setStart(e.parentNode,f(e)+1)},setEndBefore:function(e){this.setEnd(e.parentNode,f(e))},setEndAfter:function(e){this.setEnd(e.parentNode,f(e)+1)},selectNode:function(e){this.setStartBefore(e),this.setEndAfter(e)},selectNodeContents:function(e){this.setStart(e,0),this.setEnd(e,e[1===e.nodeType?"childNodes":"nodeValue"].length)},collapse:function(e){var t=this;e?t.setEnd(t.startContainer,t.startOffset):t.setStart(t.endContainer,t.endOffset)},deleteContents:function(){var e=this,t=e.cloneRange();e.startContainer!=e.commonAncestorContainer&&e.setStartAfter(g(e.commonAncestorContainer,e.startContainer)),e.collapse(!0),function n(e){for(;e.next();)e.hasPartialSubtree()?n(e.getSubtreeIterator()):e.remove()}(new w(t))},cloneContents:function(){var e=S.documentFromRange(this);return function t(n){for(var i,r=e.createDocumentFragment();i=n.next();)i=i.cloneNode(!n.hasPartialSubtree()),n.hasPartialSubtree()&&i.appendChild(t(n.getSubtreeIterator())),r.appendChild(i);return r}(new w(this))},extractContents:function(){var e,t=this,n=t.cloneRange();return t.startContainer!=t.commonAncestorContainer&&t.setStartAfter(g(t.commonAncestorContainer,t.startContainer)),t.collapse(!0),e=S.documentFromRange(t),function i(n){for(var r,o=e.createDocumentFragment();r=n.next();)n.hasPartialSubtree()?(r=r.cloneNode(!1),r.appendChild(i(n.getSubtreeIterator()))):n.remove(t.originalRange),o.appendChild(r);return o}(new w(n))},insertNode:function(e){var t=this;h(t.startContainer)?(t.startOffset!=t.startContainer.nodeValue.length&&p.splitDataNode(t.startContainer,t.startOffset),p.insertAfter(e,t.startContainer)):p.insertAt(t.startContainer,e,t.startOffset),t.setStart(t.startContainer,t.startOffset)},cloneRange:function(){return e.extend(new b(this.ownerDocument),{startContainer:this.startContainer,endContainer:this.endContainer,commonAncestorContainer:this.commonAncestorContainer,startOffset:this.startOffset,endOffset:this.endOffset,collapsed:this.collapsed,originalRange:this})},toString:function(){var e=this.startContainer.nodeName,t=this.endContainer.nodeName;return["#text"==e?this.startContainer.nodeValue:e,"(",this.startOffset,") : ","#text"==t?this.endContainer.nodeValue:t,"(",this.endOffset,")"].join("")}}),w=l.extend({init:function(t){if(e.extend(this,{range:t,_current:null,_next:null,_end:null}),!t.collapsed){var n=t.commonAncestorContainer;this._next=t.startContainer!=n||h(t.startContainer)?g(n,t.startContainer):t.startContainer.childNodes[t.startOffset],this._end=t.endContainer!=n||h(t.endContainer)?g(n,t.endContainer).nextSibling:t.endContainer.childNodes[t.endOffset]}},hasNext:function(){return!!this._next},next:function(){var e=this,t=e._current=e._next;return e._next=e._current&&e._current.nextSibling!=e._end?e._current.nextSibling:null,h(e._current)&&(e.range.endContainer==e._current&&(t=t.cloneNode(!0),t.deleteData(e.range.endOffset,t.length-e.range.endOffset)),e.range.startContainer==e._current&&(t=t.cloneNode(!0),t.deleteData(0,e.range.startOffset))),t},traverse:function(e){function t(){return i._current=i._next,i._next=i._current&&i._current.nextSibling!=i._end?i._current.nextSibling:null,i._current}for(var n,i=this;n=t();)i.hasPartialSubtree()?i.getSubtreeIterator().traverse(e):e(n);return n},remove:function(e){var t,n,i,r,o,a=this,s=a.range.startContainer==a._current,l=a.range.endContainer==a._current;h(a._current)&&(s||l)?(t=s?a.range.startOffset:0,n=l?a.range.endOffset:a._current.length,i=n-t,e&&(s||l)&&(a._current==e.startContainer&&t<=e.startOffset&&(e.startOffset-=i),a._current==e.endContainer&&n<=e.endOffset&&(e.endOffset-=i)),a._current.deleteData(t,i)):(r=a._current.parentNode,!e||a.range.startContainer!=r&&a.range.endContainer!=r||(o=f(a._current),r==e.startContainer&&o<=e.startOffset&&(e.startOffset-=1),r==e.endContainer&&o<e.endOffset&&(e.endOffset-=1)),p.remove(a._current))
},hasPartialSubtree:function(){return!h(this._current)&&(p.isAncestorOrSelf(this._current,this.range.startContainer)||p.isAncestorOrSelf(this._current,this.range.endContainer))},getSubtreeIterator:function(){var e=this,t=e.range.cloneRange();return t.selectNodeContents(e._current),p.isAncestorOrSelf(e._current,e.range.startContainer)&&t.setStart(e.range.startContainer,e.range.startOffset),p.isAncestorOrSelf(e._current,e.range.endContainer)&&t.setEnd(e.range.endContainer,e.range.endOffset),new w(t)}}),y=l.extend({init:function(e){this.ownerDocument=e,this.rangeCount=1},addRange:function(e){var t=this.ownerDocument.body.createTextRange();o(t,e,!1),o(t,e,!0),t.select()},removeAllRanges:function(){this.ownerDocument.selection.empty()},getRangeAt:function(){var e,t,n,i,o,s,l,d,c=new b(this.ownerDocument),u=this.ownerDocument.selection;try{if(e=u.createRange(),t=e.item?e.item(0):e.parentElement(),t.ownerDocument!=this.ownerDocument)return c}catch(p){return c}if("Control"==u.type)c.selectNode(e.item(0));else if(n=r(e),a(e,c,n,!0),a(e,c,n,!1),9==c.startContainer.nodeType&&c.setStart(c.endContainer,c.startOffset),9==c.endContainer.nodeType&&c.setEnd(c.startContainer,c.endOffset),0===e.compareEndPoints("StartToEnd",e)&&c.collapse(!1),i=c.startContainer,o=c.endContainer,s=this.ownerDocument.body,!(c.collapsed||0!==c.startOffset||c.endOffset!=m(c.endContainer)||i==o&&h(i)&&i.parentNode==s)){for(l=!1,d=!1;0===f(i)&&i==i.parentNode.firstChild&&i!=s;)i=i.parentNode,l=!0;for(;f(o)==m(o.parentNode)-1&&o==o.parentNode.lastChild&&o!=s;)o=o.parentNode,d=!0;i==s&&o==s&&l&&d&&(c.setStart(i,0),c.setEnd(o,m(s)))}return c}}),k=l.extend({init:function(e){this.enumerate=function(){function t(e){if(p.is(e,"img")||3==e.nodeType&&(!p.isWhitespace(e)||"﻿"==e.nodeValue))n.push(e);else for(e=e.firstChild;e;)t(e),e=e.nextSibling}var n=[];return new w(e).traverse(t),n}}}),x=l.extend({init:function(e){var t=this;t.range=e,t.rootNode=S.documentFromRange(e),t.body=t.getEditable(e),"body"!=p.name(t.body)&&(t.rootNode=t.body),t.html=t.body.innerHTML,t.startContainer=t.nodeToPath(e.startContainer),t.endContainer=t.nodeToPath(e.endContainer),t.startOffset=t.offset(e.startContainer,e.startOffset),t.endOffset=t.offset(e.endContainer,e.endOffset)},index:function(e){for(var t,n=0,i=e.nodeType;e=e.previousSibling;)t=e.nodeType,(3!=t||i!=t)&&n++,i=t;return n},getEditable:function(e){for(var t=e.commonAncestorContainer;t&&(3==t.nodeType||t.attributes&&!t.attributes.contentEditable);)t=t.parentNode;return t},restoreHtml:function(){this.body.innerHTML=this.html},offset:function(e,t){if(3==e.nodeType)for(;(e=e.previousSibling)&&3==e.nodeType;)t+=e.nodeValue.length;return t},nodeToPath:function(e){for(var t=[];e!=this.rootNode;)t.push(this.index(e)),e=e.parentNode;return t},toRangePoint:function(e,t,n,i){for(var r=this.rootNode,o=n.length,a=i;o--;)r=r.childNodes[n[o]];for(;3==r.nodeType&&r.nodeValue.length<a;)a-=r.nodeValue.length,r=r.nextSibling;e[t?"setStart":"setEnd"](r,a)},toRange:function(){var e=this,t=e.range.cloneRange();return e.toRangePoint(t,!0,e.startContainer,e.startOffset),e.toRangePoint(t,!1,e.endContainer,e.endOffset),t}}),C=l.extend({init:function(){this.caret=null},addCaret:function(e){var t=this;return t.caret=p.create(S.documentFromRange(e),"span",{className:"k-marker"}),e.insertNode(t.caret),e.selectNode(t.caret),t.caret},removeCaret:function(e){var t,n,i,r,o=this,a=o.caret.previousSibling,s=0;a&&(s=h(a)?a.nodeValue.length:f(a)),t=o.caret.parentNode,n=a?f(a):0,p.remove(o.caret),v(t),i=t.childNodes[n],h(i)?e.setStart(i,s):i?(r=p.lastTextNode(i),r?e.setStart(r,r.nodeValue.length):e[a?"setStartAfter":"setStartBefore"](i)):(u.msie||t.innerHTML||(t.innerHTML='<br _moz_dirty="" />'),e.selectNodeContents(t)),e.collapse(!0)},add:function(e,t){var n,i,r=this,o=e.collapsed&&!S.isExpandable(e),a=S.documentFromRange(e);return t&&e.collapsed&&(r.addCaret(e),e=S.expand(e)),n=e.cloneRange(),n.collapse(!1),r.end=p.create(a,"span",{className:"k-marker"}),n.insertNode(r.end),n=e.cloneRange(),n.collapse(!0),r.start=r.end.cloneNode(!0),n.insertNode(r.start),r._removeDeadMarkers(r.start,r.end),o&&(i=a.createTextNode("﻿"),p.insertAfter(i.cloneNode(),r.start),p.insertBefore(i,r.end)),e.setStartBefore(r.start),e.setEndAfter(r.end),v(e.commonAncestorContainer),e},_removeDeadMarkers:function(e,t){e.previousSibling&&"﻿"==e.previousSibling.nodeValue&&p.remove(e.previousSibling),t.nextSibling&&"﻿"==t.nextSibling.nodeValue&&p.remove(t.nextSibling)},remove:function(e){var t,n,i,r,o,a,s,l,d,c,u,g,m,_=this,b=_.start,w=_.end;for(v(e.commonAncestorContainer);!b.nextSibling&&b.parentNode;)b=b.parentNode;for(;!w.previousSibling&&w.parentNode;)w=w.parentNode;if(t=b.previousSibling&&3==b.previousSibling.nodeType&&b.nextSibling&&3==b.nextSibling.nodeType,n=w.previousSibling&&3==w.previousSibling.nodeType&&w.nextSibling&&3==w.nextSibling.nodeType,i=t&&n,b=b.nextSibling,w=w.previousSibling,r=!1,o=!1,b==_.end&&(o=!!_.start.previousSibling,b=w=_.start.previousSibling||_.end.nextSibling,r=!0),p.remove(_.start),p.remove(_.end),!b||!w)return e.selectNodeContents(e.commonAncestorContainer),e.collapse(!0),void 0;if(a=r?h(b)?b.nodeValue.length:b.childNodes.length:0,s=h(w)?w.nodeValue.length:w.childNodes.length,3==b.nodeType)for(;b.previousSibling&&3==b.previousSibling.nodeType;)b=b.previousSibling,a+=b.nodeValue.length;if(3==w.nodeType)for(;w.previousSibling&&3==w.previousSibling.nodeType;)w=w.previousSibling,s+=w.nodeValue.length;for(l=f(b),d=b.parentNode,c=f(w),u=w.parentNode,g=b;g.previousSibling;g=g.previousSibling)3==g.nodeType&&3==g.previousSibling.nodeType&&l--;for(m=w;m.previousSibling;m=m.previousSibling)3==m.nodeType&&3==m.previousSibling.nodeType&&c--;v(d),3==b.nodeType&&(b=d.childNodes[l]),v(u),3==w.nodeType&&(w=u.childNodes[c]),r?(3==b.nodeType?e.setStart(b,a):e[o?"setStartAfter":"setStartBefore"](b),e.collapse(!0)):(3==b.nodeType?e.setStart(b,a):e.setStartBefore(b),3==w.nodeType?e.setEnd(w,s):e.setEndAfter(w)),_.caret&&_.removeCaret(e)}}),T=/[\u0009-\u000d]|\u0020|\u00a0|\ufeff|\.|,|;|:|!|\(|\)|\?/,S={nodes:function(e){var t=S.textNodes(e);return t.length||(e.selectNodeContents(e.commonAncestorContainer),t=S.textNodes(e),t.length||(t=p.significantChildNodes(e.commonAncestorContainer))),t},textNodes:function(e){return new k(e).enumerate()},documentFromRange:function(e){var t=e.startContainer;return 9==t.nodeType?t:t.ownerDocument},createRange:function(e){return u.msie&&u.version<9?new b(e):e.createRange()},selectRange:function(e){var t,n=S.image(e);n&&(e.setStartAfter(n),e.setEndAfter(n)),t=_.selectionFromRange(e),t.removeAllRanges(),t.addRange(e)},stringify:function(e){return s.format("{0}:{1} - {2}:{3}",p.name(e.startContainer),e.startOffset,p.name(e.endContainer),e.endOffset)},split:function(e,t,n){function i(i){var r,o=e.cloneRange();o.collapse(i),o[i?"setStartBefore":"setEndAfter"](t),r=o.extractContents(),n&&(r=p.trim(r)),p[i?"insertBefore":"insertAfter"](r,t)}i(!0),i(!1)},getMarkers:function(e){var t=[];return new w(e).traverse(function(e){"k-marker"==e.className&&t.push(e)}),t},image:function(e){var t=[];return new w(e).traverse(function(e){p.is(e,"img")&&t.push(e)}),1==t.length?t[0]:void 0},expand:function(e){var t,n,i,r,o=e.cloneRange(),a=o.startContainer.childNodes[0===o.startOffset?0:o.startOffset-1],s=o.endContainer.childNodes[o.endOffset];return h(a)&&h(s)?(t=a.nodeValue,n=s.nodeValue,t&&n?(i=t.split("").reverse().join("").search(T),r=n.search(T),i&&r?(r=-1==r?n.length:r,i=-1==i?0:t.length-i,o.setStart(a,i),o.setEnd(s,r),o):o):o):o},isExpandable:function(e){var t,n,i,r,o,a,s=e.startContainer,l=S.documentFromRange(e);return s==l||s==l.body?!1:(t=e.cloneRange(),(n=s.nodeValue)?(i=n.substring(0,t.startOffset),r=n.substring(t.startOffset),o=0,a=0,i&&(o=i.split("").reverse().join("").search(T)),r&&(a=r.search(T)),o&&a):!1)}};d(c,{SelectionUtils:_,W3CRange:b,RangeIterator:w,W3CSelection:y,RangeEnumerator:k,RestorePoint:x,Marker:C,RangeUtils:S})}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.Class,i=t.ui.editor,r=i.EditorUtils,o=r.registerTool,a=i.Dom,s=i.Tool,l=i.ToolTemplate,d=i.RestorePoint,c=i.Marker,u=e.extend,p=n.extend({init:function(e){this.options=e,this.restorePoint=new d(e.range),this.marker=new c,this.formatter=e.formatter},getRange:function(){return this.restorePoint.toRange()},lockRange:function(e){return this.marker.add(this.getRange(),e)},releaseRange:function(e){this.marker.remove(e),this.editor.selectRange(e)},undo:function(){var e=this.restorePoint;e.restoreHtml(),this.editor.selectRange(e.toRange())},redo:function(){this.exec()},createDialog:function(n,i){var r=this.editor;return e(n).appendTo(document.body).kendoWindow(u({},r.options.dialogOptions,i)).closest(".k-window").toggleClass("k-rtl",t.support.isRtl(r.wrapper)).end()},exec:function(){var e=this.lockRange(!0);this.formatter.editor=this.editor,this.formatter.toggle(e),this.releaseRange(e)}}),f=n.extend({init:function(e,t){this.body=e.body,this.startRestorePoint=e,this.endRestorePoint=t},redo:function(){this.body.innerHTML=this.endRestorePoint.html,this.editor.selectRange(this.endRestorePoint.toRange())},undo:function(){this.body.innerHTML=this.startRestorePoint.html,this.editor.selectRange(this.startRestorePoint.toRange())}}),h=p.extend({init:function(e){p.fn.init.call(this,e),this.managesUndoRedo=!0},exec:function(){var e,t=this.editor,n=this.options,i=n.range,r=new d(i),o=n.html||n.value||"";t.selectRange(i),t.clipboard.paste(o,n),e=new f(r,new d(t.getRange())),e.editor=t,t.undoRedoStack.push(e),t.focus()}}),g=s.extend({initialize:function(e,t){var n=t.editor,r=this.options,o=r.items?r.items:n.options.insertHtml;new i.SelectBox(e,{dataSource:o,dataTextField:"text",dataValueField:"value",change:function(){s.exec(n,"insertHtml",this.value())},title:n.options.messages.insertHtml,highlightFirst:!1})},command:function(e){return new h(e)},update:function(e){var t=e.data("kendoSelectBox")||e.find("select").data("kendoSelectBox");t.close(),t.value(t.options.title)}}),m=n.extend({init:function(){this.stack=[],this.currentCommandIndex=-1},push:function(e){this.stack=this.stack.slice(0,this.currentCommandIndex+1),this.currentCommandIndex=this.stack.push(e)-1},undo:function(){this.canUndo()&&this.stack[this.currentCommandIndex--].undo()},redo:function(){this.canRedo()&&this.stack[++this.currentCommandIndex].redo()},canUndo:function(){return this.currentCommandIndex>=0},canRedo:function(){return this.currentCommandIndex!=this.stack.length-1}}),v=n.extend({init:function(e){this.editor=e},keydown:function(t){var n,i=this,r=i.editor,o=r.keyboard,a=o.isTypingKey(t),s=u(e.Event(),t);return i.editor.trigger("keydown",s),s.isDefaultPrevented()&&t.preventDefault(),s.isDefaultPrevented()||!a||o.isTypingInProgress()?!1:(n=r.getRange(),i.startRestorePoint=new d(n),o.startTyping(function(){r.selectionRestorePoint=i.endRestorePoint=new d(r.getRange());var e=new f(i.startRestorePoint,i.endRestorePoint);e.editor=r,r.undoRedoStack.push(e)}),!0)},keyup:function(e){var t=this.editor.keyboard;return this.editor.trigger("keyup",e),t.isTypingInProgress()?(t.endTyping(),!0):!1}}),_=n.extend({init:function(e){this.editor=e,this.systemCommandIsInProgress=!1},createUndoCommand:function(){var e,t=this;t.endRestorePoint=new d(t.editor.getRange()),e=new f(t.startRestorePoint,t.endRestorePoint),e.editor=t.editor,t.editor.undoRedoStack.push(e),t.startRestorePoint=t.endRestorePoint},changed:function(){return this.startRestorePoint?this.startRestorePoint.html!=this.editor.body.innerHTML:!1},keydown:function(e){var t=this,n=t.editor,i=n.keyboard;return i.isModifierKey(e)?(i.isTypingInProgress()&&i.endTyping(!0),t.startRestorePoint=new d(n.getRange()),!0):i.isSystem(e)?(t.systemCommandIsInProgress=!0,t.changed()&&(t.systemCommandIsInProgress=!1,t.createUndoCommand()),!0):!1},keyup:function(e){var t=this;return t.systemCommandIsInProgress&&t.changed()?(t.systemCommandIsInProgress=!1,t.createUndoCommand(e),!0):!1}}),b=n.extend({init:function(e){this.handlers=e,this.typingInProgress=!1},isCharacter:function(e){return e>=48&&90>=e||e>=96&&111>=e||e>=186&&192>=e||e>=219&&222>=e},toolFromShortcut:function(t,n){var i,r,o=String.fromCharCode(n.keyCode);for(i in t)if(r=e.extend({ctrl:!1,alt:!1,shift:!1},t[i].options),(r.key==o||r.key==n.keyCode)&&r.ctrl==n.ctrlKey&&r.alt==n.altKey&&r.shift==n.shiftKey)return i},isTypingKey:function(e){var t=e.keyCode;return this.isCharacter(t)&&!e.ctrlKey&&!e.altKey||32==t||13==t||8==t||46==t&&!e.shiftKey&&!e.ctrlKey&&!e.altKey},isModifierKey:function(e){var t=e.keyCode;return 17==t&&!e.shiftKey&&!e.altKey||16==t&&!e.ctrlKey&&!e.altKey||18==t&&!e.ctrlKey&&!e.shiftKey},isSystem:function(e){return 46==e.keyCode&&e.ctrlKey&&!e.altKey&&!e.shiftKey},startTyping:function(e){this.onEndTyping=e,this.typingInProgress=!0},stopTyping:function(){this.typingInProgress=!1,this.onEndTyping&&this.onEndTyping()},endTyping:function(t){var n=this;n.clearTimeout(),t?n.stopTyping():n.timeout=window.setTimeout(e.proxy(n.stopTyping,n),1e3)},isTypingInProgress:function(){return this.typingInProgress},clearTimeout:function(){window.clearTimeout(this.timeout)},notify:function(e,t){var n,i=this.handlers;for(n=0;n<i.length&&!i[n][t](e);n++);},keydown:function(e){this.notify(e,"keydown")},keyup:function(e){this.notify(e,"keyup")}}),w=n.extend({init:function(e){this.editor=e,this.cleaners=[new k,new x]},htmlToFragment:function(e){var t=this.editor,n=t.document,i=a.create(n,"div"),r=n.createDocumentFragment();for(i.innerHTML=e;i.firstChild;)r.appendChild(i.firstChild);return r},isBlock:function(e){return/<(div|p|ul|ol|table|h[1-6])/i.test(e)},_contentModification:function(e,t){var n=this.editor,i=n.getRange(),r=new d(i);a.persistScrollTop(n.document),e.call(this,n,i),setTimeout(function(){var e,o;t.call(this,n,i),e=new d(n.getRange()),o=new f(r,e),o.editor=n,n.undoRedoStack.push(o),n._selectionChange()})},oncut:function(){this._contentModification(e.noop,e.noop)},onpaste:function(t){this._contentModification(function(n,i){var r,o,s,l=a.create(n.document,"div",{className:"k-paste-container",innerHTML:"﻿"});n.body.appendChild(l),n.body.createTextRange?(t.preventDefault(),r=n.createRange(),r.selectNodeContents(l),n.selectRange(r),o=n.body.createTextRange(),o.moveToElementText(l),e(n.body).unbind("paste"),o.execCommand("Paste"),e(n.body).bind("paste",e.proxy(this.onpaste,this))):(s=n.createRange(),s.selectNodeContents(l),n.selectRange(s)),i.deleteContents()},function(t,n){var i,r="",o={html:""};t.selectRange(n),i=e(t.body).children(".k-paste-container"),i.each(function(){var e=this.lastChild;e&&a.is(e,"br")&&a.remove(e),r+=this.innerHTML}),i.remove(),r=r.replace(/\ufeff/g,""),o.html=r,t.trigger("paste",o),t.clipboard.paste(o.html,{clean:!0})})},splittableParent:function(e,t){var n,i;if(e)return a.parentOfType(t,["p","ul","ol"])||t.parentNode;if(n=t.parentNode,i=t.ownerDocument.body,a.isInline(n))for(;n.parentNode!=i&&!a.isBlock(n.parentNode);)n=n.parentNode;return n},paste:function(e,t){var n,r,o,s,l,d,p,f,h,g,m,v=this.editor;for(t=u({clean:!1,split:!0},t),n=0,r=this.cleaners.length;r>n;n++)this.cleaners[n].applicable(e)&&(e=this.cleaners[n].clean(e));if(t.clean&&(e=e.replace(/(<br>(\s|&nbsp;)*)+(<\/?(div|p|li|col|t))/gi,"$3"),e=e.replace(/<(a|span)[^>]*><\/\1>/gi,"")),e=e.replace(/^<li/i,"<ul><li").replace(/li>$/g,"li></ul>"),o=this.isBlock(e),v.focus(),s=v.getRange(),s.deleteContents(),s.startContainer==v.document&&s.selectNodeContents(v.body),l=new c,d=l.addCaret(s),p=this.splittableParent(o,d),f=!1,h=p!=v.body&&!a.is(p,"td"),t.split&&h&&(o||a.isInline(p))&&(s.selectNode(d),i.RangeUtils.split(s,p,!0),f=!0),g=this.htmlToFragment(e),g.firstChild&&"k-paste-container"===g.firstChild.className){for(m=[],n=0,r=g.childNodes.length;r>n;n++)m.push(g.childNodes[n].innerHTML);g=this.htmlToFragment(m.join("<br />"))}if(s.insertNode(g),p=this.splittableParent(o,d),f){for(;d.parentNode!=p;)a.unwrap(d.parentNode);a.unwrap(d.parentNode)}a.normalize(s.commonAncestorContainer),d.style.display="inline",a.restoreScrollTop(v.document),a.scrollTo(d),l.removeCaret(s),v.selectRange(s)}}),y=n.extend({clean:function(e){var t,n,i=this,r=i.replacements;for(t=0,n=r.length;n>t;t+=2)e=e.replace(r[t],r[t+1]);return e}}),k=y.extend({init:function(){this.replacements=[/<\?xml[^>]*>/gi,"",/<!--(.|\n)*?-->/g,"",/&quot;/g,"'",/(?:<br>&nbsp;[\s\r\n]+|<br>)*(<\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\s\r\n]+|<br>)*/g,"$1",/<br><br>/g,"<BR><BR>",/<br>(?!\n)/g," ",/<table([^>]*)>(\s|&nbsp;)+<t/gi,"<table$1><t",/<tr[^>]*>(\s|&nbsp;)*<\/tr>/gi,"",/<tbody[^>]*>(\s|&nbsp;)*<\/tbody>/gi,"",/<table[^>]*>(\s|&nbsp;)*<\/table>/gi,"",/<BR><BR>/g,"<br>",/^\s*(&nbsp;)+/gi,"",/(&nbsp;|<br[^>]*>)+\s*$/gi,"",/mso-[^;"]*;?/gi,"",/<(\/?)b(\s[^>]*)?>/gi,"<$1strong$2>",/<(\/?)i(\s[^>]*)?>/gi,"<$1em$2>",/<\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\n)*?<\/(meta|link|style|o:|v:|x:)[^>]*>)?/gi,"",/style=(["|'])\s*\1/g,""]},applicable:function(e){return/class="?Mso|style="[^"]*mso-/i.test(e)},stripEmptyAnchors:function(e){return e.replace(/<a([^>]*)>\s*<\/a>/gi,function(e,t){return!t||t.indexOf("href")<0?"":e})},listType:function(e){var t;return/^(<span [^>]*texhtml[^>]*>)?<span [^>]*(Symbol|Wingdings)[^>]*>/i.test(e)&&(t=!0),e=e.replace(/<\/?\w+[^>]*>/g,"").replace(/&nbsp;/g," "),!t&&/^[\u2022\u00b7\u00a7\u00d8o]\u00a0+/.test(e)||t&&/^.\u00a0+/.test(e)?"ul":/^\s*\w+[\.\)]\u00a0{2,}/.test(e)?"ol":void 0},lists:function(t){var n,i,r,o,s,l,d,c,u=e(a.blockElements.join(","),t),p=-1,f={ul:{},ol:{}},h=t;for(i=0;i<u.length;i++)if(r=u[i],o=this.listType(r.innerHTML),o&&"p"==a.name(r)){if(s=parseFloat(r.style.marginLeft||0),l=f[o][s],(s>p||!l)&&(l=a.create(document,o),h==t?a.insertBefore(l,r):h.appendChild(l),f[o][s]=l),n!=o)for(d in f)for(c in f[d])e.contains(l,f[d][c])&&delete f[d][c];a.remove(r.firstChild),h=a.create(document,"li",{innerHTML:r.innerHTML}),l.appendChild(h),a.remove(r),p=s,n=o}else r.innerHTML?(f={ul:{},ol:{}},h=t,p=-1):a.remove(r)},removeAttributes:function(e){for(var t=e.attributes,n=t.length;n--;)e.removeAttributeNode(t[n])},createColGroup:function(n){var i,r=n.cells;r.length<2||(i=e(e.map(r,function(e){var n=e.width;return n&&0!==parseInt(n,10)?t.format('<col style="width:{0}px;"/>',n):"<col />"}).join("")),i.is("colgroup")||(i=e("<colgroup/>").append(i)),i.prependTo(e(n).closest("table")))},convertHeaders:function(t){var n,i=t.cells,r=e.map(i,function(t){var n=e(t).children("p").children("strong")[0];return n&&"strong"==a.name(n)?n:void 0});if(r.length==i.length){for(n=0;n<r.length;n++)a.unwrap(r[n]);e(t).closest("table").find("colgroup").after("<thead><tr>"+e.map(i,function(t){return"<th>"+e(t).html()+"</th>"}).join("")+"</tr></thead>").end().end().remove()}},removeParagraphs:function(t){var n,i,r,o,s;for(n=0;n<t.length;n++)for(this.removeAttributes(t[n]),o=e(t[n]),s=o.children("p"),i=0,r=s.length;r>i;i++)r-1>i&&a.insertAfter(a.create(document,"br"),s[i]),a.unwrap(s[i])},removeDefaultColors:function(e){for(var t=0;t<e.length;t++)/^\s*color:\s*[^;]*;?$/i.test(e[t].style.cssText)&&a.unwrap(e[t])},tables:function(t){var n,i,r=e(t).find("table"),o=this;for(i=0;i<r.length;i++)n=r[i].rows[0],o.createColGroup(n),o.convertHeaders(n),o.removeAttributes(r[i]),o.removeParagraphs(r.eq(i).find("td,th")),o.removeDefaultColors(r.eq(i).find("span"))},clean:function(e){var t,n=this;return e=y.fn.clean.call(n,e),e=n.stripEmptyAnchors(e),t=a.create(document,"div",{innerHTML:e}),n.lists(t),n.tables(t),e=t.innerHTML.replace(/\s+class="?[^"\s>]*"?/gi,"")}}),x=y.extend({init:function(){this.replacements=[/\s+class="Apple-style-span[^"]*"/gi,"",/<(div|p|h[1-6])\s+style="[^"]*"/gi,"<$1",/^<div>(.*)<\/div>$/,"$1"]},applicable:function(e){return/class="?Apple-style-span|style="[^"]*-webkit-nbsp-mode/i.test(e)}});u(i,{Command:p,GenericCommand:f,InsertHtmlCommand:h,InsertHtmlTool:g,UndoRedoStack:m,TypingHandler:v,SystemHandler:_,Keyboard:b,Clipboard:w,Cleaner:y,MSWordFormatCleaner:k,WebkitFormatCleaner:x}),o("insertHtml",new g({template:new l({template:r.dropDownListTemplate,title:"Insert HTML",initialValue:"Insert HTML"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.Class,i=t.ui.editor,r=t.ui.Editor.fn.options.formats,o=i.EditorUtils,a=i.Tool,s=i.ToolTemplate,l=i.FormatTool,d=i.Dom,c=i.RangeUtils,u=e.extend,p=i.EditorUtils.registerTool,f=i.EditorUtils.registerFormat,h="k-marker",g=n.extend({init:function(e){this.format=e},numberOfSiblings:function(e){var t,n=0,i=0,r=0,o=e.parentNode;for(t=o.firstChild;t;t=t.nextSibling)t!=e&&(t.className==h?r++:3==t.nodeType?n++:i++);return r>1&&o.firstChild.className==h&&o.lastChild.className==h?0:i+n},findSuitable:function(e,t){return!t&&this.numberOfSiblings(e)>0?null:d.parentOfType(e,this.format[0].tags)},findFormat:function(e){var t,n,i,r,o,a=this.format,s=d.attrEquals;for(t=0,n=a.length;n>t;t++){if(i=e,r=a[t].tags,o=a[t].attr,i&&d.ofType(i,r)&&s(i,o))return i;for(;i;)if(i=d.parentOfType(i,r),i&&s(i,o))return i}return null},isFormatted:function(e){var t,n;for(t=0,n=e.length;n>t;t++)if(this.findFormat(e[t]))return!0;return!1}}),m=n.extend({init:function(e,t){var n=this;n.finder=new g(e),n.attributes=u({},e[0].attr,t),n.tag=e[0].tags[0]},wrap:function(e){return d.wrap(e,d.create(e.ownerDocument,this.tag,this.attributes))},activate:function(e,t){var n=this;n.finder.isFormatted(t)?(n.split(e),n.remove(t)):n.apply(t)},toggle:function(e){var t=c.textNodes(e);t.length>0&&this.activate(e,t)},apply:function(e){var t,n,i,r,o=this,a=[];for(t=0,n=e.length;n>t;t++)i=e[t],r=o.finder.findSuitable(i),r?d.attr(r,o.attributes):r=o.wrap(i),a.push(r);o.consolidate(a)},remove:function(e){var t,n,i,r=this;for(t=0,n=e.length;n>t;t++)i=r.finder.findFormat(e[t]),i&&(r.attributes&&r.attributes.style?(d.unstyle(i,r.attributes.style),i.style.cssText||i.attributes["class"]||d.unwrap(i)):d.unwrap(i))},split:function(e){var t,n,i=c.textNodes(e),r=i.length;if(r>0)for(t=0;r>t;t++)n=this.finder.findFormat(i[t]),n&&c.split(e,n,!0)},consolidate:function(e){for(var t,n;e.length>1;)if(t=e.pop(),n=e[e.length-1],t.previousSibling&&t.previousSibling.className==h&&n.appendChild(t.previousSibling),t.tagName==n.tagName&&t.previousSibling==n&&t.style.cssText==n.style.cssText){for(;t.firstChild;)n.appendChild(t.firstChild);d.remove(t)}}}),v=g.extend({init:function(e,t){var n=this;n.format=e,n.greedyProperty=t,g.fn.init.call(n,e)},getInlineCssValue:function(t){var n,i,r,o,a,s,l,c,u,p,f,h,g=t.attributes,m=e.trim;if(g)for(n=0,i=g.length;i>n;n++)if(r=g[n],o=r.nodeName,a=r.nodeValue,r.specified&&"style"==o)for(s=m(a||t.style.cssText).split(";"),c=0,u=s.length;u>c;c++)if(l=s[c],l.length){if(p=l.split(":"),f=m(p[0].toLowerCase()),h=m(p[1]),f!=this.greedyProperty)continue;return f.indexOf("color")>=0?d.toHex(h):h}},getFormatInner:function(t){var n,i,r,o=e(d.isDataNode(t)?t.parentNode:t),a=o.parentsUntil("[contentEditable]").addBack();for(n=0,i=a.length;i>n;n++)if(r="className"==this.greedyProperty?a[n].className:this.getInlineCssValue(a[n]))return r;return"inherit"},getFormat:function(e){var t,n,i=this.getFormatInner(e[0]);for(t=1,n=e.length;n>t;t++)if(i!=this.getFormatInner(e[t]))return"";return i},isFormatted:function(e){return""!==this.getFormat(e)}}),_=m.extend({init:function(e,t,n){var i=this;m.fn.init.call(i,e,t),i.greedyProperty=n,i.values=t,i.finder=new v(e,n)},activate:function(e,t){var n,i=this,r=i.greedyProperty,o="apply";i.split(e),r&&(n=r.replace(/-([a-z])/,function(e,t){return t.toUpperCase()}),"inherit"==i.values.style[n]&&(o="remove")),i[o](t)}}),b=l.extend({init:function(e){l.fn.init.call(this,u(e,{finder:new g(e.format),formatter:function(){return new m(e.format)}}))}}),w=a.extend({update:function(e,t){var n=e.data(this.type);n.close(),n.value(this.finder.getFormat(t))}}),y=w.extend({init:function(e){var n=this;a.fn.init.call(n,e),n.type=t.support.browser.msie||t.support.touch?"kendoDropDownList":"kendoComboBox",n.format=[{tags:["span"]}],n.finder=new v(n.format,e.cssAttr)},command:function(e){var t=this.options,n=this.format,r={};return new i.FormatCommand(u(e,{formatter:function(){return r[t.domAttr]=e.value,new _(n,{style:r},t.cssAttr)}}))},initialize:function(e,t){var n,i=t.editor,r=this.options,o=r.name,s=[];r.defaultValue&&(s=[{text:i.options.messages[r.defaultValue[0].text],value:r.defaultValue[0].value}]),n=s.concat(r.items?r.items:i.options[o]),e[this.type]({dataTextField:"text",dataValueField:"value",dataSource:n,change:function(){a.exec(i,o,this.value())},highlightFirst:!1}),e.closest(".k-widget").removeClass("k-"+o).find("*").addBack().attr("unselectable","on"),e.data(this.type).value("inherit")}}),k=a.extend({init:function(e){a.fn.init.call(this,e),this.format=[{tags:["span"]}]},options:{palette:"websafe"},update:function(){this._widget.close()},command:function(e){var t=this.options,n=this.format,r={};return new i.FormatCommand(u(e,{formatter:function(){return r[t.domAttr]=e.value,new _(n,{style:r},t.cssAttr)}}))},initialize:function(n,i){var r=i.editor,o=this.name,s=u({},k.fn.options,this.options),l=s.palette;n=this._widget=new t.ui.ColorPicker(n,{value:e.isArray(l)?l[0]:"#000",toolIcon:"k-"+s.name,palette:l,change:function(){var e=n.value();e&&a.exec(r,o,e),r.focus()},activate:function(e){e.preventDefault(),n.trigger("change")}}),n.wrapper.attr({title:i.title,unselectable:"on"}).find("*").attr("unselectable","on")}});u(i,{InlineFormatFinder:g,InlineFormatter:m,DelayedExecutionTool:w,GreedyInlineFormatFinder:v,GreedyInlineFormatter:_,InlineFormatTool:b,FontTool:y,ColorTool:k}),f("bold",[{tags:["strong","b"]},{tags:["span"],attr:{style:{fontWeight:"bold"}}}]),p("bold",new b({key:"B",ctrl:!0,format:r.bold,template:new s({template:o.buttonTemplate,title:"Bold"})})),f("italic",[{tags:["em","i"]},{tags:["span"],attr:{style:{fontStyle:"italic"}}}]),p("italic",new b({key:"I",ctrl:!0,format:r.italic,template:new s({template:o.buttonTemplate,title:"Italic"})})),f("underline",[{tags:["span"],attr:{style:{textDecoration:"underline"}}},{tags:["u"]}]),p("underline",new b({key:"U",ctrl:!0,format:r.underline,template:new s({template:o.buttonTemplate,title:"Underline"})})),f("strikethrough",[{tags:["del"]},{tags:["span"],attr:{style:{textDecoration:"line-through"}}}]),p("strikethrough",new b({format:r.strikethrough,template:new s({template:o.buttonTemplate,title:"Strikethrough"})})),f("superscript",[{tags:["sup"]}]),p("superscript",new b({format:r.superscript,template:new s({template:o.buttonTemplate,title:"Superscript"})})),f("subscript",[{tags:["sub"]}]),p("subscript",new b({format:r.subscript,template:new s({template:o.buttonTemplate,title:"Subscript"})})),p("foreColor",new k({cssAttr:"color",domAttr:"color",name:"foreColor",template:new s({template:o.colorPickerTemplate,title:"Color"})})),p("backColor",new k({cssAttr:"background-color",domAttr:"backgroundColor",name:"backColor",template:new s({template:o.colorPickerTemplate,title:"Background Color"})})),p("fontName",new y({cssAttr:"font-family",domAttr:"fontFamily",name:"fontName",defaultValue:[{text:"fontNameInherit",value:"inherit"}],template:new s({template:o.comboBoxTemplate,title:"Font Name"})})),p("fontSize",new y({cssAttr:"font-size",domAttr:"fontSize",name:"fontSize",defaultValue:[{text:"fontSizeInherit",value:"inherit"}],template:new s({template:o.comboBoxTemplate,title:"Font Size"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.Class,i=e.extend,r=t.ui.editor,o=t.ui.Editor.fn.options.formats,a=r.Dom,s=r.Command,l=r.ToolTemplate,d=r.FormatTool,c=r.EditorUtils,u=c.registerTool,p=c.registerFormat,f=r.RangeUtils,h=n.extend({init:function(e){this.format=e},contains:function(e,t){var n,i,r;for(n=0,i=t.length;i>n;n++)if(r=t[n],!r||!a.isAncestorOrSelf(e,r))return!1;return!0},findSuitable:function(t){var n,i,r,o=this.format,s=[];for(n=0,i=t.length;i>n;n++){if(r=a.ofType(t[n],o[0].tags)?t[n]:a.parentOfType(t[n],o[0].tags),!r)return[];e.inArray(r,s)<0&&s.push(r)}for(n=0,i=s.length;i>n;n++)if(this.contains(s[n],s))return[s[n]];return s},findFormat:function(e){var t,n,i,r,o,s=this.format;for(t=0,n=s.length;n>t;t++)for(i=e,r=s[t].tags,o=s[t].attr;i;){if(a.ofType(i,r)&&a.attrEquals(i,o))return i;i=i.parentNode}return null},getFormat:function(e){var t,n,i=this,r=function(e){return i.findFormat(a.isDataNode(e)?e.parentNode:e)},o=r(e[0]);if(!o)return"";for(t=1,n=e.length;n>t;t++)if(o!=r(e[t]))return"";return o.nodeName.toLowerCase()},isFormatted:function(e){for(var t=0,n=e.length;n>t;t++)if(!this.findFormat(e[t]))return!1;return!0}}),g=n.extend({init:function(e,t){this.format=e,this.values=t,this.finder=new h(e)},wrap:function(e,t,n){var i,r,o,s,l,d=1==n.length?a.blockParentOrBody(n[0]):a.commonAncestor.apply(null,n);for(a.isInline(d)&&(d=a.blockParentOrBody(d)),o=a.significantChildNodes(d),s=a.findNodeIndex(o[0]),l=a.create(d.ownerDocument,e,t),i=0;i<o.length;i++)r=o[i],a.isBlock(r)?(a.attr(r,t),l.childNodes.length&&(a.insertBefore(l,r),l=l.cloneNode(!1)),s=a.findNodeIndex(r)+1):l.appendChild(r);l.firstChild&&a.insertAt(d,l,s)},apply:function(e){var t,n,r,o,s=this,l=a.is(e[0],"img")?[e[0]]:s.finder.findSuitable(e),d=l.length?c.formatByName(a.name(l[0]),s.format):s.format[0];if(d)if(t=d.tags[0],n=i({},d.attr,s.values),l.length)for(r=0,o=l.length;o>r;r++)a.attr(l[r],n);else s.wrap(t,n,e)},remove:function(e){var t,n,i,r,o;for(t=0,n=e.length;n>t;t++)i=this.finder.findFormat(e[t]),i&&(o=a.name(i),"div"!=o||i.getAttribute("class")?(r=c.formatByName(o,this.format),r.attr.style&&a.unstyle(i,r.attr.style),r.attr.className&&a.removeClass(i,r.attr.className)):a.unwrap(i))},toggle:function(e){var t=this,n=f.nodes(e);t.finder.isFormatted(n)?t.remove(n):t.apply(n)}}),m=n.extend({init:function(e,t){var n=this;n.format=e,n.values=t,n.finder=new h(e)},apply:function(e){var t,n,i,o,s,l,d=this.format,c=a.blockParents(e),u=d[0].tags[0];if(c.length&&c[0].attributes.contentEditable&&(c=[]),c.length)for(t=0,n=c.length;n>t;t++)a.is(c[t],"li")?(i=c[t].parentNode,o=new r.ListFormatter(i.nodeName.toLowerCase(),u),s=this.editor.createRange(),s.selectNode(c[t]),o.toggle(s)):(l=a.changeTag(c[t],u),a.attr(l,d[0].attr));else new g(d,this.values).apply(e)},toggle:function(e){var t=f.textNodes(e);t.length||(e.selectNodeContents(e.commonAncestorContainer),t=f.textNodes(e),t.length||(t=a.significantChildNodes(e.commonAncestorContainer))),this.apply(t)}}),v=s.extend({init:function(e){e.formatter=e.formatter(),s.fn.init.call(this,e)}}),_=d.extend({init:function(e){d.fn.init.call(this,i(e,{finder:new h(e.format),formatter:function(){return new g(e.format)}}))}});i(r,{BlockFormatFinder:h,BlockFormatter:g,GreedyBlockFormatter:m,FormatCommand:v,BlockFormatTool:_}),p("justifyLeft",[{tags:a.blockElements,attr:{style:{textAlign:"left"}}},{tags:["img"],attr:{style:{"float":"left"}}}]),u("justifyLeft",new _({format:o.justifyLeft,template:new l({template:c.buttonTemplate,title:"Justify Left"})})),p("justifyCenter",[{tags:a.blockElements,attr:{style:{textAlign:"center"}}},{tags:["img"],attr:{style:{display:"block",marginLeft:"auto",marginRight:"auto"}}}]),u("justifyCenter",new _({format:o.justifyCenter,template:new l({template:c.buttonTemplate,title:"Justify Center"})})),p("justifyRight",[{tags:a.blockElements,attr:{style:{textAlign:"right"}}},{tags:["img"],attr:{style:{"float":"right"}}}]),u("justifyRight",new _({format:o.justifyRight,template:new l({template:c.buttonTemplate,title:"Justify Right"})})),p("justifyFull",[{tags:a.blockElements,attr:{style:{textAlign:"justify"}}}]),u("justifyFull",new _({format:o.justifyFull,template:new l({template:c.buttonTemplate,title:"Justify Full"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=e.extend,i=t.ui.editor,r=i.Dom,o=i.Command,a=i.Tool,s=i.BlockFormatter,l=r.normalize,d=i.RangeUtils,c=i.EditorUtils.registerTool,u=o.extend({init:function(e){this.options=e,o.fn.init.call(this,e)},_insertMarker:function(e,t){var n,i=r.create(e,"a");return t.insertNode(i),i.parentNode||(n=t.commonAncestorContainer,n.innerHTML="",n.appendChild(i)),l(i.parentNode),i},_moveFocus:function(e,t){if(r.is(t,"img"))e.setStartBefore(t);
else{e.selectNodeContents(t);var n=d.textNodes(e)[0];if(n)e.selectNodeContents(n);else{for(;t.childNodes.length&&!r.is(t.firstChild,"br");)t=t.firstChild;e.selectNodeContents(t)}}},shouldTrim:function(e){var t="p,h1,h2,h3,h4,h5,h6".split(","),n=r.parentOfType(e.startContainer,t),i=r.parentOfType(e.endContainer,t);return n&&!i||!n&&i},exec:function(){var e,t,n,o,a,c,u,p,f=this.getRange(),h=d.documentFromRange(f),g=i.emptyElementContent,m=this.shouldTrim(f);f.deleteContents(),a=this._insertMarker(h,f),c=r.parentOfType(a,["li"]),u=r.parentOfType(a,"h1,h2,h3,h4,h5,h6".split(",")),c?(p=f.cloneRange(),p.selectNode(c),d.textNodes(p).length||(o=r.create(h,"p"),c.nextSibling&&d.split(p,c.parentNode),r.insertAfter(o,c.parentNode),r.remove(1==c.parentNode.childNodes.length?c.parentNode:c),o.innerHTML=g,n=o)):u&&!a.nextSibling&&(o=r.create(h,"p"),r.insertAfter(o,u),o.innerHTML=g,r.remove(a),n=o),n||(c||u||new s([{tags:["p"]}]).apply([a]),f.selectNode(a),e=r.parentOfType(a,[c?"li":u?r.name(u):"p"]),d.split(f,e,m),t=e.previousSibling,r.is(t,"li")&&t.firstChild&&!r.is(t.firstChild,"br")&&(t=t.firstChild),n=e.nextSibling,r.is(n,"li")&&n.firstChild&&!r.is(n.firstChild,"br")&&(n=n.firstChild),r.remove(e),this.clean(t),this.clean(n),l(t)),l(n),this._moveFocus(f,n),f.collapse(!0),r.scrollTo(n),d.selectRange(f)},clean:function(e){if(e.firstChild&&r.is(e.firstChild,"br")&&r.remove(e.firstChild),r.isDataNode(e)&&!e.nodeValue&&(e=e.parentNode),e){for(;e.firstChild&&1==e.firstChild.nodeType;)e=e.firstChild;!r.isEmpty(e)&&/^\s*$/.test(e.innerHTML)&&(e.innerHTML=i.emptyElementContent)}}}),p=o.extend({init:function(e){this.options=e,o.fn.init.call(this,e)},exec:function(){var e,n=this.getRange(),i=r.create(d.documentFromRange(n),"br");n.deleteContents(),n.insertNode(i),l(i.parentNode),t.support.browser.msie||i.nextSibling&&!r.isWhitespace(i.nextSibling)||(e=i.cloneNode(!0),e.setAttribute("_moz_dirty",""),r.insertAfter(e,i)),n.setStartAfter(i),n.collapse(!0),r.scrollTo(i.nextSibling||i),d.selectRange(n)}});n(i,{ParagraphCommand:u,NewLineCommand:p}),c("insertLineBreak",new a({key:13,shift:!0,command:p})),c("insertParagraph",new a({key:13,command:u}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.Class,i=e.extend,r=t.ui.editor,o=r.Dom,a=r.RangeUtils,s=r.EditorUtils,l=r.Command,d=r.ToolTemplate,c=r.FormatTool,u=r.BlockFormatFinder,p=a.textNodes,f=r.EditorUtils.registerTool,h=u.extend({init:function(e){this.tag=e;var t=this.tags=["ul"==e?"ol":"ul",e];u.fn.init.call(this,[{tags:t}])},isFormatted:function(e){var t,n,i=[];for(n=0;n<e.length;n++)(t=this.findFormat(e[n]))&&o.name(t)==this.tag&&i.push(t);if(i.length<1)return!1;if(i.length!=e.length)return!1;for(n=0;n<i.length&&i[n].parentNode==t.parentNode;n++)if(i[n]!=t)return!1;return!0},findSuitable:function(e){var t=o.parentOfType(e[0],this.tags);return t&&o.name(t)==this.tag?t:null}}),g=n.extend({init:function(e,t){var n=this;n.finder=new h(e),n.tag=e,n.unwrapTag=t},isList:function(e){var t=o.name(e);return"ul"==t||"ol"==t||"dl"==t},wrap:function(e,t){var n,i,r=o.create(e.ownerDocument,"li");for(n=0;n<t.length;n++)if(i=t[n],o.is(i,"li"))e.appendChild(i);else if(this.isList(i))for(;i.firstChild;)e.appendChild(i.firstChild);else if(o.is(i,"td")){for(;i.firstChild;)r.appendChild(i.firstChild);e.appendChild(r),i.appendChild(e),e=e.cloneNode(!1),r=r.cloneNode(!1)}else r.appendChild(i),o.isBlock(i)&&(e.appendChild(r),o.unwrap(i),r=r.cloneNode(!1));r.firstChild&&e.appendChild(r)},containsAny:function(e,t){for(var n=0;n<t.length;n++)if(o.isAncestorOrSelf(e,t[n]))return!0;return!1},suitable:function(e,t){if("k-marker"==e.className){var n=e.nextSibling;if(n&&o.isBlock(n))return!1;if(n=e.previousSibling,n&&o.isBlock(n))return!1}return this.containsAny(e,t)||o.isInline(e)||3==e.nodeType},split:function(t){var n,i,r,s,l,d,c=p(t);if(c.length)for(n=o.parentOfType(c[0],["li"]),i=o.parentOfType(c[c.length-1],["li"]),t.setStartBefore(n),t.setEndAfter(i),r=0,s=c.length;s>r;r++)l=this.finder.findFormat(c[r]),l&&(d=e(l).parents("ul,ol"),d[0]?a.split(t,d.last()[0],!0):a.split(t,l,!0))},merge:function(e,t){for(var n,i=t.previousSibling;i&&("k-marker"==i.className||3==i.nodeType&&o.isWhitespace(i));)i=i.previousSibling;if(i&&o.name(i)==e){for(;t.firstChild;)i.appendChild(t.firstChild);o.remove(t),t=i}for(n=t.nextSibling;n&&("k-marker"==n.className||3==n.nodeType&&o.isWhitespace(n));)n=n.nextSibling;if(n&&o.name(n)==e){for(;t.lastChild;)n.insertBefore(t.lastChild,n.firstChild);o.remove(t)}},breakable:function(e){return e!=e.ownerDocument.body&&!/table|tbody|tr|td/.test(o.name(e))&&!e.attributes.contentEditable},applyOnSection:function(t,n){function i(){u.push(this)}var r,a,s,l,d=this.tag,c=o.closestSplittableParent(n),u=[],p=this.finder.findSuitable(n);for(p||(p=new h("ul"==d?"ol":"ul").findSuitable(n)),/table|tbody/.test(o.name(c))?r=e.map(n,function(e){return o.parentOfType(e,["td"])}):(r=o.significantChildNodes(c),e.grep(r,o.isBlock).length&&(r=e.grep(r,e.proxy(function(e){return this.containsAny(e,n)},this))),r.length||(r=n)),a=0;a<r.length;a++)s=r[a],l=(!p||!o.isAncestorOrSelf(p,s))&&this.suitable(s,n),l&&(p&&this.isList(s)?(e.each(s.childNodes,i),o.remove(s)):u.push(s));u.length==r.length&&this.breakable(c)&&(u=[c]),p||(p=o.create(c.ownerDocument,d),o.insertBefore(p,u[0])),this.wrap(p,u),o.is(p,d)||o.changeTag(p,d),this.merge(d,p)},apply:function(e){var t,n,i,r=0,a=[];do i=o.parentOfType(e[r],["td","body"]),t&&i==t?n.push(e[r]):(t&&a.push({section:t,nodes:n}),n=[e[r]],t=i),r++;while(r<e.length);for(a.push({section:t,nodes:n}),r=0;r<a.length;r++)this.applyOnSection(a[r].section,a[r].nodes)},unwrap:function(t){var n,i,r,a,s=t.ownerDocument.createDocumentFragment(),l=this.unwrapTag;for(i=t.firstChild;i;i=i.nextSibling){for(r=o.create(t.ownerDocument,l||"p");i.firstChild;)a=i.firstChild,o.isBlock(a)?(r.firstChild&&(s.appendChild(r),r=o.create(t.ownerDocument,l||"p")),s.appendChild(a)):r.appendChild(a);r.firstChild&&s.appendChild(r)}n=e(t).parents("ul,ol"),n[0]?(o.insertAfter(s,n.last()[0]),n.last().remove()):o.insertAfter(s,t),o.remove(t)},remove:function(e){var t,n,i;for(n=0,i=e.length;i>n;n++)t=this.finder.findFormat(e[n]),t&&this.unwrap(t)},toggle:function(e){var t,n=this,i=p(e),r=e.commonAncestorContainer;i.length||(e.selectNodeContents(r),i=p(e),i.length||(t=r.ownerDocument.createTextNode(""),e.startContainer.appendChild(t),i=[t],e.selectNode(t.parentNode))),n.finder.isFormatted(i)?(n.split(e),n.remove(i)):n.apply(i)}}),m=l.extend({init:function(e){e.formatter=new g(e.tag),l.fn.init.call(this,e)}}),v=c.extend({init:function(e){this.options=e,c.fn.init.call(this,i(e,{finder:new h(e.tag)}))},command:function(e){return new m(i(e,{tag:this.options.tag}))}});i(r,{ListFormatFinder:h,ListFormatter:g,ListCommand:m,ListTool:v}),f("insertUnorderedList",new v({tag:"ul",template:new d({template:s.buttonTemplate,title:"Remove Link"})})),f("insertOrderedList",new v({tag:"ol",template:new d({template:s.buttonTemplate,title:"Remove Link"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.Class,i=e.extend,r=t.ui.editor,o=r.Dom,a=r.RangeUtils,s=r.EditorUtils,l=r.Command,d=r.Tool,c=r.ToolTemplate,u=r.InlineFormatter,p=r.InlineFormatFinder,f=a.textNodes,h=r.EditorUtils.registerTool,g=n.extend({findSuitable:function(e){return o.parentOfType(e,["a"])}}),m=n.extend({init:function(){this.finder=new g},apply:function(e,t){var n,i,r,s,l=f(e);t.innerHTML?(n=a.getMarkers(e),i=a.documentFromRange(e),e.deleteContents(),s=o.create(i,"a",t),e.insertNode(s),"a"==o.name(s.parentNode)&&o.insertAfter(s,s.parentNode),n.length>1&&(o.insertAfter(n[n.length-1],s),o.insertAfter(n[1],s),o[l.length>0?"insertBefore":"insertAfter"](n[0],s))):(r=new u([{tags:["a"]}],t),r.finder=this.finder,r.apply(l))}}),v=l.extend({init:function(e){e.formatter={toggle:function(e){new u([{tags:["a"]}]).remove(f(e))}},this.options=e,l.fn.init.call(this,e)}}),_=l.extend({init:function(e){var t=this;t.options=e,l.fn.init.call(t,e),t.formatter=new m,e.url?this.exec=function(){this.formatter.apply(e.range,{href:e.url,innerHTML:e.text||e.url,target:e.target})}:(t.attributes=null,t.async=!0)},_dialogTemplate:function(){return t.template("<div class=\"k-editor-dialog k-popup-edit-form k-edit-form-container\"><div class='k-edit-label'><label for='k-editor-link-url'>#: messages.linkWebAddress #</label></div><div class='k-edit-field'><input type='text' class='k-input k-textbox' id='k-editor-link-url'></div><div class='k-edit-label'><label for='k-editor-link-text'>#: messages.linkText #</label></div><div class='k-edit-field'><input type='text' class='k-input k-textbox' id='k-editor-link-text'></div><div class='k-edit-label'><label for='k-editor-link-title'>#: messages.linkToolTip #</label></div><div class='k-edit-field'><input type='text' class='k-input k-textbox' id='k-editor-link-title'></div><div class='k-edit-label'></div><div class='k-edit-field'><input type='checkbox' class='k-checkbox' id='k-editor-link-target'><label for='k-editor-link-target'>#: messages.linkOpenInNewWindow #</label></div><div class='k-edit-buttons k-state-default'><button class=\"k-dialog-insert k-button\">#: messages.dialogInsert #</button><button class=\"k-dialog-close k-button k-secondary\">#: messages.dialogCancel #</button></div></div>")({messages:this.editor.options.messages})},exec:function(){function n(t){var n,a,s,u=l.element,f=e("#k-editor-link-url",u).val();f&&"http://"!=f&&(f.indexOf("@")>0&&!/^(\w+:)|(\/\/)/i.test(f)&&(f="mailto:"+f),d.attributes={href:f},n=e("#k-editor-link-title",u).val(),n&&(d.attributes.title=n),a=e("#k-editor-link-text",u).val(),a===p||!a&&0!==r.length||(d.attributes.innerHTML=o.stripBom(a)||f),s=e("#k-editor-link-target",u).is(":checked"),d.attributes.target=s?"_blank":null,d.formatter.apply(c,d.attributes)),i(t),d.change&&d.change()}function i(e){e.preventDefault(),l.destroy(),o.windowFromDocument(a.documentFromRange(c)).focus(),d.releaseRange(c)}var r,s,l,d=this,c=d.getRange(),u=c.collapsed,p=null,h=d.editor.options.messages;c=d.lockRange(!0),r=f(c),s=r.length?d.formatter.finder.findSuitable(r[0]):null,l=this.createDialog(d._dialogTemplate(),{title:h.createLink,close:i,visible:!1}).find(".k-dialog-insert").click(n).end().find(".k-dialog-close").click(i).end().find(".k-edit-field input").keydown(function(e){var r=t.keys;e.keyCode==r.ENTER?n(e):e.keyCode==r.ESC&&i(e)}).end().find("#k-editor-link-url").val(s?s.getAttribute("href",2):"http://").end().find("#k-editor-link-text").val(r.length>0?1==r.length?r[0].nodeValue:r[0].nodeValue+r[1].nodeValue:"").end().find("#k-editor-link-title").val(s?s.title:"").end().find("#k-editor-link-target").attr("checked",s?"_blank"==s.target:!1).end().data("kendoWindow").center().open(),r.length>0&&!u&&(p=e("#k-editor-link-text",l.element).val()),e("#k-editor-link-url",l.element).focus().select()},redo:function(){var e=this,t=e.lockRange(!0);e.formatter.apply(t,e.attributes),e.releaseRange(t)}}),b=d.extend({init:function(t){this.options=t,this.finder=new p([{tags:["a"]}]),d.fn.init.call(this,e.extend(t,{command:v}))},initialize:function(e,t){d.fn.initialize.call(this,e,t),e.addClass("k-state-disabled")},update:function(e,t){e.toggleClass("k-state-disabled",!this.finder.isFormatted(t)).removeClass("k-state-hover")}});i(t.ui.editor,{LinkFormatFinder:g,LinkFormatter:m,UnlinkCommand:v,LinkCommand:_,UnlinkTool:b}),h("createLink",new d({key:"K",ctrl:!0,command:_,template:new c({template:s.buttonTemplate,title:"Create Link"})})),h("unlink",new b({key:"K",ctrl:!0,shift:!0,template:new c({template:s.buttonTemplate,title:"Remove Link"})}))}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=e.extend,r=n.ui.editor,o=r.EditorUtils,a=r.Dom,s=o.registerTool,l=r.ToolTemplate,d=r.RangeUtils,c=r.Command,u=n.keys,p="#k-editor-image-url",f="#k-editor-image-title",h=c.extend({init:function(e){var t=this;c.fn.init.call(t,e),t.async=!0,t.attributes={}},insertImage:function(e,t){var n=this.attributes,i=d.documentFromRange(t);if(n.src&&"http://"!=n.src){if(!e)return e=a.create(i,"img",n),e.onload=e.onerror=function(){e.removeAttribute("complete"),e.removeAttribute("width"),e.removeAttribute("height")},t.deleteContents(),t.insertNode(e),e.nextSibling||a.insertAfter(i.createTextNode("﻿"),e),t.setStartAfter(e),t.setEndAfter(e),d.selectRange(t),!0;a.attr(e,n)}return!1},_dialogTemplate:function(e){return n.template('<div class="k-editor-dialog k-popup-edit-form k-edit-form-container"># if (showBrowser) { #<div class="k-imagebrowser"></div># } #<div class=\'k-edit-label\'><label for="k-editor-image-url">#: messages.imageWebAddress #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-url"></div><div class=\'k-edit-label\'><label for="k-editor-image-title">#: messages.imageAltText #</label></div><div class=\'k-edit-field\'><input type="text" class="k-input k-textbox" id="k-editor-image-title"></div><div class="k-edit-buttons k-state-default"><button class="k-dialog-insert k-button">#: messages.dialogInsert #</button><button class="k-dialog-close k-button k-secondary">#: messages.dialogCancel #</button></div></div>')({messages:this.editor.options.messages,showBrowser:e})},redo:function(){var e=this,t=e.lockRange();e.insertImage(d.image(t),t)||e.releaseRange(t)},exec:function(){function e(e){var t=s.element;l.attributes={src:t.find(p).val().replace(/ /g,"%20"),alt:t.find(f).val()},h=l.insertImage(g,c),r(e),l.change&&l.change()}function r(e){e.preventDefault(),s.destroy(),a.windowFromDocument(d.documentFromRange(c)).focus(),h||l.releaseRange(c)}function o(t){t.keyCode==u.ENTER?e(t):t.keyCode==u.ESC&&r(t)}var s,l=this,c=l.lockRange(),h=!1,g=d.image(c),m=l.editor.options,v=m.messages,_=m.imageBrowser,b=!!(n.ui.ImageBrowser&&_&&_.transport&&_.transport.read!==t);s=this.createDialog(l._dialogTemplate(b),{title:v.insertImage,close:r,visible:!1,resizable:b}).toggleClass("k-imagebrowser-dialog",b).find(".k-dialog-insert").click(e).end().find(".k-dialog-close").click(r).end().find(".k-edit-field input").keydown(o).end().find(p).val(g?g.getAttribute("src",2):"http://").end().find(f).val(g?g.alt:"").end().data("kendoWindow"),b&&new n.ui.ImageBrowser(s.element.find(".k-imagebrowser"),i({},_,{change:function(){s.element.find(p).val(this.value())},apply:e})),s.center().open(),s.element.find(p).focus().select()}});n.ui.editor.ImageCommand=h,s("insertImage",new r.Tool({command:h,template:new l({template:o.buttonTemplate,title:"Insert Image"})}))}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.ui.DropDownList,r=n.ui.editor.Dom,o=i.extend({init:function(e,t){var r=this;i.fn.init.call(r,e,t),r.value(r.options.title),n.support.mobileOS.ios&&r._initSelectOverlay(e),r.bind("open",function(){if(r.options.autoSize){var e,t=r.list;t.css({whiteSpace:"nowrap",width:"auto"}),e=t.width(),e?e+=20:e=r._listWidth,t.css("width",e+n.support.scrollbar()),r._listWidth=e}})},options:{name:"SelectBox"},_initSelectOverlay:function(t){var n,i,r;t=e(t),n=e("<select class='k-select-overlay' />"),i=t.closest(".k-widget"),r=t.data(this.type).kendoSelectBox,n.on("change",function(){r.value(this.value),r.trigger("change")}),this.bind("dataBound",function(){var e,t,i=r.value(),o=this.dataSource.view(),a="";for(t=0;t<o.length;t++)e=o[t],a+="<option value='"+e.value+"'",e.value==i&&(a+=" selected"),a+=">"+e.text+"</option>";n.html(a)}),n.insertAfter(i)},value:function(e){var n=this,r=i.fn.value.call(n,e);return e===t?r:(e!==i.fn.value.call(n)&&(n.text(n.options.title),n._current&&n._current.removeClass("k-state-selected"),n.current(null),n._oldIndex=n.selectedIndex=-1),t)},decorate:function(e){var t,n,i,o=this.dataSource.data();for(t=0;t<o.length;t++)n=o[t].tag||"span",i=o[t].className,o[t].style=r.inlineStyle(e,n,{className:i})+";display:inline-block";this.dataSource.trigger("change")}});n.ui.plugin(o),n.ui.editor.SelectBox=o}(window.kendo.jQuery),function(e,t){function n(n,i){var r="rtl"==e(n).css("direction"),o=r?"Right":"Left",a="td"!=s.name(n)?"margin"+o:"padding"+o;return i===t?n.style[a]||0:(i>0?n.style[a]=i+"px":(n.style[a]="",n.style.cssText||n.removeAttribute("style")),t)}var i=window.kendo,r=i.Class,o=e.extend,a=i.ui.editor,s=a.Dom,l=a.EditorUtils,d=l.registerTool,c=a.Command,u=a.Tool,p=a.ToolTemplate,f=a.RangeUtils,h=s.blockElements,g=a.BlockFormatFinder,m=a.BlockFormatter,v=r.extend({init:function(){this.finder=new g([{tags:s.blockElements}])},apply:function(t){var i,r,o,a,l,d,c,u,p,f,h=this.finder.findSuitable(t),g=[];if(h.length){for(i=0,r=h.length;r>i;i++)s.is(h[i],"li")?e(h[i]).index()?e.inArray(h[i].parentNode,g)<0&&g.push(h[i]):g.push(h[i].parentNode):g.push(h[i]);for(;g.length;)if(o=g.shift(),s.is(o,"li"))if(a=o.parentNode,l=e(o).prev("li"),d=l.find("ul,ol").last(),c=e(o).children("ul,ol")[0],c&&l[0])d[0]?(d.append(o),d.append(e(c).children()),s.remove(c)):(l.append(c),c.insertBefore(o,c.firstChild));else for(c=l.children("ul,ol")[0],c||(c=s.create(o.ownerDocument,s.name(a)),l.append(c));o&&o.parentNode==a;)c.appendChild(o),o=g.shift();else for(u=parseInt(n(o),10)+30,n(o,u),p=0;p<g.length;p++)e.contains(o,g[p])&&g.splice(p,1)}else f=new m([{tags:["p"]}],{style:{marginLeft:30}}),f.apply(t)},remove:function(t){var i,r,o,a,s,l,d,c,u=this.finder.findSuitable(t);for(r=0,o=u.length;o>r;r++){if(d=e(u[r]),d.is("li")){if(a=d.parent(),s=a.parent(),s.is("li,ul,ol")&&!n(a[0])){if(i&&e.contains(i,s[0]))continue;l=d.nextAll("li"),l.length&&e(a[0].cloneNode(!1)).appendTo(d).append(l),s.is("li")?d.insertAfter(s):d.appendTo(s),a.children("li").length||a.remove();continue}if(i==a[0])continue;i=a[0]}else i=u[r];c=parseInt(n(i),10)-30,n(i,c)}}}),_=c.extend({init:function(e){e.formatter={toggle:function(e){(new v).apply(f.nodes(e))}},c.fn.init.call(this,e)}}),b=c.extend({init:function(e){e.formatter={toggle:function(e){(new v).remove(f.nodes(e))}},c.fn.init.call(this,e)}}),w=u.extend({init:function(e){u.fn.init.call(this,e),this.finder=new g([{tags:h}])},initialize:function(e,t){u.fn.initialize.call(this,e,t),e.addClass("k-state-disabled")},update:function(i,r){var o,a,l,d,c=this.finder.findSuitable(r);for(l=0,d=c.length;d>l;l++)if(o=n(c[l]),o||(a=e(c[l]).parents("ul,ol").length,o=s.is(c[l],"li")&&(a>1||n(c[l].parentNode))||s.ofType(c[l],["ul","ol"])&&a>0),o)return i.removeClass("k-state-disabled"),t;i.addClass("k-state-disabled").removeClass("k-state-hover")}});o(a,{IndentFormatter:v,IndentCommand:_,OutdentCommand:b,OutdentTool:w}),d("indent",new u({command:_,template:new p({template:l.buttonTemplate,title:"Indent"})})),d("outdent",new w({command:b,template:new p({template:l.buttonTemplate,title:"Outdent"})}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=e.extend,i=t.ui.editor,r=i.Dom,o=i.RangeUtils,a=i.EditorUtils,s=i.Command,l=i.Tool,d=i.ToolTemplate,c=s.extend({init:function(e){var t=this;t.options=e,s.fn.init.call(t,e),t.attributes=null,t.async=!0},exec:function(){function n(e){s.value(u.find(f).val()),i(e),a.change&&a.change(),s.trigger("change")}function i(e){e.preventDefault(),u.data("kendoWindow").destroy();try{r.windowFromDocument(o.documentFromRange(l)).focus()}catch(t){}}var a=this,s=a.editor,l=s.getRange(),d=s.options.messages,u=e(t.template(c.template)(d)).appendTo(document.body),p=c.indent(s.value()),f=".k-editor-textarea";this.createDialog(u,{title:d.viewHtml,close:i,visible:!1}).find(f).val(p).end().find(".k-dialog-update").click(n).end().find(".k-dialog-close").click(i).end().data("kendoWindow").center().open(),u.find(f).focus()}});n(c,{template:"<div class='k-editor-dialog k-viewhtml-dialog'><textarea class='k-editor-textarea k-input'></textarea><div class='k-button-wrapper'><button class='k-dialog-update k-button'>#: dialogUpdate #</button>&nbsp;#: dialogButtonSeparator #&nbsp;<a href='\\#' class='k-dialog-close k-link'>#: dialogCancel #</a></div></div>",indent:function(e){return e.replace(/<\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi,"</$1>\n").replace(/<(ul|ol)([^>]*)><li/gi,"<$1$2>\n<li").replace(/<br \/>/gi,"<br />\n").replace(/\n$/,"")}}),t.ui.editor.ViewHtmlCommand=c,i.EditorUtils.registerTool("viewHtml",new l({command:c,template:new d({template:a.buttonTemplate,title:"View HTML"})}))}(window.kendo.jQuery),function(e){function t(t,n,i){return c.extend({init:function(e){c.fn.init.call(this,e),this.finder=i},command:function(t){var i=t.value;return e.isPlainObject(i)?i[n]=i.value:(t.value={},t.value[n]=i),c.fn.command.call(this,t)},initialize:function(e,t){var i,r=window.console,o=this.options.items;for(i=0;i<o.length;i++)o[i][n]=o[i].value;r&&r.warn("The `"+this.options.name+"` tool has been deprecated in favor of the `formatting` tool. See http://docs.kendoui.com/getting-started/changes-and-backward-compatibility for more information"),c.fn.initialize.call(this,e,t)}})}var n=window.kendo,i=n.ui.editor,r=i.Tool,o=i.ToolTemplate,a=i.DelayedExecutionTool,s=i.Dom,l=i.EditorUtils.dropDownListTemplate,d=i.EditorUtils.registerTool,c=a.extend({init:function(e){var t=this;r.fn.init.call(t,n.deepExtend({},t.options,e)),t.type="kendoSelectBox",t.finder={getFormat:function(){return""}}},options:{items:[{text:"Paragraph",value:"p"},{text:"Quotation",value:"blockquote"},{text:"Heading 1",value:"h1"},{text:"Heading 2",value:"h2"},{text:"Heading 3",value:"h3"},{text:"Heading 4",value:"h4"},{text:"Heading 5",value:"h5"},{text:"Heading 6",value:"h6"}],width:90},toFormattingItem:function(e){var t,n=e.value;return n?e.tag||e.className?e:(t=n.indexOf("."),0===t?e.className=n.substring(1):-1==t?e.tag=n:(e.tag=n.substring(0,t),e.className=n.substring(t+1)),e):e},command:function(t){var n=t.value;return n=this.toFormattingItem(n),new i.FormatCommand({range:t.range,formatter:function(){var t,r=(n.tag||n.context||"span").split(","),o=[{tags:r,attr:{className:n.className||""}}];return t=e.inArray(r[0],s.inlineElements)>=0?new i.GreedyInlineFormatter(o):new i.GreedyBlockFormatter(o)}})},initialize:function(e,t){var i=t.editor,o=this.options,a=o.name,s=this;e.width(o.width),e.kendoSelectBox({dataTextField:"text",dataValueField:"value",dataSource:o.items||i.options[a],title:i.options.messages[a],autoSize:!0,change:function(){r.exec(i,a,this.dataItem().toJSON())},dataBound:function(){var e,t=this.dataSource.data();for(e=0;e<t.length;e++)t[e]=s.toFormattingItem(t[e])},highlightFirst:!1,template:n.template('<span unselectable="on" style="display:block;#=data.style#">#:data.text#</span>')}),e.addClass("k-decorated").closest(".k-widget").removeClass("k-"+a).find("*").addBack().attr("unselectable","on")},getFormattingValue:function(t,n){var i,r,o,a,s,l,d;for(i=0;i<t.length;i++)if(r=t[i],o=r.tag||r.context||"",a=r.className?"."+r.className:"",s=o+a,l=e(n[0]).closest(s)[0]){if(1==n.length)return r.value;for(d=1;d<n.length&&e(n[d]).closest(s)[0]==l;d++)if(d==n.length-1)return r.value}return""},update:function(t,n){var i,r,o,l,d,c=e(t).data(this.type);if(c){for(o=c.dataSource,l=o.data(),d=s.commonAncestor.apply(null,n),i=0;i<l.length;i++)r=l[i].context,l[i].visible=!r||!!e(d).closest(r).length;o.filter([{field:"visible",operator:"eq",value:!0}]),a.fn.update.call(this,t,n),c.value(this.getFormattingValue(o.view(),n)),c.wrapper.toggleClass("k-state-disabled",!o.view().length)}}}),u=t("style","className",new i.GreedyInlineFormatFinder([{tags:["span"]}],"className")),p=t("formatBlock","tag",new i.BlockFormatFinder([{tags:s.blockElements}]));e.extend(i,{FormattingTool:c,StyleTool:u,FormatBlockTool:p}),d("formatting",new c({template:new o({template:l,title:"Format"})})),d("style",new u({template:new o({template:l,title:"Styles"})})),d("formatBlock",new p({template:new o({template:l})}))}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.ui,i=n.editor,r=n.Widget,o=e.extend,a=e.proxy,s=t.keys,l=".kendoEditor",d=".k-colorpicker,a.k-tool-icon:not(.k-state-disabled),.k-selectbox, .k-combobox .k-input",c=r.extend({init:function(e,t){var n=this;t=o({},t,{name:"EditorToolbar"}),r.fn.init.call(n,e,t),t.popup&&n._initPopup()},events:["execute"],groups:{basic:["bold","italic","underline","strikethrough"],scripts:["subscript","superscript"],alignment:["justifyLeft","justifyCenter","justifyRight","justifyFull"],links:["insertImage","createLink","unlink"],lists:["insertUnorderedList","insertOrderedList","indent","outdent"],tables:["createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn"],advanced:["viewHtml"]},_initPopup:function(){this.window=e(this.element).wrap("<div class='editorToolbarWindow k-header' />").parent().prepend("<button class='k-button k-button-bare k-editortoolbar-dragHandle'><span class='k-icon k-i-move' /></button>").kendoWindow({title:!1,resizable:!1,draggable:{dragHandle:".k-editortoolbar-dragHandle"},animation:{open:{effects:"fade:in"},close:{effects:"fade:out"}},minHeight:42,visible:!1,autoFocus:!1,actions:[],dragend:function(){this._moved=!0}}).on("mousedown",function(t){e(t.target).is(".k-icon")||t.preventDefault()}).data("kendoWindow")},items:function(){return this.element.children().find("> *, select")},focused:function(){return this.element.find(".k-state-focused").length>0},toolById:function(e){var t,n=this.tools;for(t in n)if(t.toLowerCase()==e)return n[t]},toolGroupFor:function(t){var n,i=this.groups;if(this.isCustomTool(t))return"custom";for(n in i)if(e.inArray(t,i[n])>=0)return n},bindTo:function(t){var n=this,i=n.window;n._editor&&n._editor.unbind("select",a(n._update,n)),n._editor=t,n.tools=n.expandTools(t.options.tools),n.render(),n.element.find(".k-combobox .k-input").keydown(function(t){var n=e(this).closest(".k-combobox").data("kendoComboBox"),i=t.keyCode;i==s.RIGHT||i==s.LEFT?n.close():i==s.DOWN&&(n.dropDown.isOpened()||(t.stopImmediatePropagation(),n.open()))}),n._attachEvents(),n.items().each(function(){var i,r=n._toolFromClassName(this),o=n.tools[r],a=t.options.messages,s=a[r],l=e(this);o&&o.initialize&&(("fontSize"==r||"fontName"==r)&&(i=a[r+"Inherit"],l.find("input").val(i).end().find("span.k-input").text(i).end()),o.initialize(l,{title:n._appendShortcutSequence(s,o),editor:n._editor}),l.closest(".k-widget",n.element).addClass("k-editor-widget"),l.closest(".k-colorpicker",n.element).next(".k-colorpicker").addClass("k-editor-widget"))}),t.bind("select",a(n._update,n)),n._updateContext(),i&&i.wrapper.css({top:"",left:"",width:""})},show:function(){var e,t,n=this,i=n.window,r=n.options.editor;i&&(e=i.wrapper,t=r.element,e.is(":visible")&&n.window.options.visible||(e[0].style.width||e.width(t.outerWidth()-parseInt(e.css("border-left-width"),10)-parseInt(e.css("border-right-width"),10)),i._moved||(e.css("top",parseInt(t.offset().top,10)-e.outerHeight()-parseInt(n.window.element.css("padding-bottom"),10)),e.css("left",parseInt(t.offset().left,10))),i.open()))},hide:function(){this.window&&this.window.close()},focus:function(){var e="tabIndex",t=this._editor.element,n=t.attr(e);t.attr(e,n||0).focus().find("li:has("+d+")").first().focus(),n||0===n||t.removeAttr(e)},_appendShortcutSequence:function(e,t){if(!t.key)return e;var n=e+" (";return t.ctrl&&(n+="Ctrl + "),t.shift&&(n+="Shift + "),t.alt&&(n+="Alt + "),n+=t.key+")"},_nativeTools:["insertLineBreak","insertParagraph","redo","undo"],tools:{},isCustomTool:function(e){return!(e in t.ui.Editor.defaultTools)},expandTools:function(n){var r,a,s,l,d=this._nativeTools,c=t.deepExtend({},t.ui.Editor.defaultTools),u={};for(a=0;a<n.length;a++)r=n[a],l=r.name,e.isPlainObject(r)?l&&c[l]?(u[l]=o({},c[l]),o(u[l].options,r)):(s=o({cssClass:"k-i-custom",type:"button",title:""},r),s.name||(s.name="custom"),s.cssClass="k-"+("custom"==s.name?"i-custom":s.name),s.template||"button"!=s.type||(s.template=i.EditorUtils.buttonTemplate,s.title=s.title||s.tooltip),u[l]={options:s}):c[r]&&(u[r]=c[r]);for(a=0;a<d.length;a++)u[d[a]]||(u[d[a]]=c[d[a]]);return u},render:function(){function n(n){var i;return n.getHtml?i=n.getHtml():(e.isFunction(n)||(n=t.template(n)),i=n(o)),e.trim(i)}function i(){p.children().length&&p.appendTo(v)}function r(){p=e("<li class='k-tool-group' role='presentation' />")}var o,s,l,d,c,u,p,f,h=this,g=h.tools,m=h._editor.element,v=h.element.empty(),_=h._editor.options.tools,b=t.support.browser;for(v.empty(),r(),f=0;f<_.length;f++)d=_[f].name||_[f],o=g[d]&&g[d].options,!o&&e.isPlainObject(d)&&(o=d),s=o&&o.template,"break"==d&&(i(),e("<li class='k-row-break' />").appendTo(h.element),r()),s&&(u=h.toolGroupFor(d),c!=u&&(i(),r(),c=u),s=n(s),l=e(s).appendTo(p),"custom"==u&&(i(),r()),o.exec&&l.hasClass("k-tool-icon")&&l.click(a(o.exec,m[0])));i(),e(h.element).children(":has(> .k-tool-icon)").addClass("k-button-group"),h.options.popup&&b.msie&&b.version<9&&h.window.wrapper.find("*").attr("unselectable","on"),this.updateGroups()},updateGroups:function(){e(this.element).children().each(function(){e(this).children().filter(function(){return"none"!==this.style.display}).first().addClass("k-group-start").end().last().addClass("k-group-end").end()})},_attachEvents:function(){var t=this,n="[role=button].k-tool-icon",i=n+":not(.k-state-disabled)",r=n+".k-state-disabled";t.element.off(l).on("mouseenter"+l,i,function(){e(this).addClass("k-state-hover")}).on("mouseleave"+l,i,function(){e(this).removeClass("k-state-hover")}).on("mousedown"+l,n,!1).on("keydown"+l,d,function(n){var i,r=e(this).closest("li"),o="li:has("+d+")",a=n.keyCode;if(a==s.RIGHT)i=r.nextAll(o).first().find(d);else if(a==s.LEFT)i=r.prevAll(o).first().find(d);else if(a==s.ESC)i=t;else if(a==s.TAB&&!n.ctrlKey&&!n.altKey)if(n.shiftKey){if(i=r.prevAll(o).first().find(d),!i.length)return;n.preventDefault()}else n.preventDefault(),i=r.nextAll(o).first().find(d),i.length||(i=t);i&&i.focus()}).on("click"+l,i,function(n){var i=e(this);n.preventDefault(),n.stopPropagation(),i.removeClass("k-state-hover"),i.is("[data-popup]")||t._editor.exec(t._toolFromClassName(this))}).on("click"+l,r,function(e){e.preventDefault()})},_toolFromClassName:function(t){if(t){var n=e.grep(t.className.split(" "),function(e){return!/^k-(widget|tool-icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(e)});return n[0]?n[0].substring(n[0].lastIndexOf("-")+1):"custom"}},_update:function(){var n=this,i=n._editor,r=i.getRange(),o=t.ui.editor.RangeUtils.textNodes(r);o.length||(o=[r.startContainer]),n.items().each(function(){var t=n.tools[n._toolFromClassName(this)];t&&t.update&&t.update(e(this),o)}),this._updateContext()},_updateContext:function(){this.element.children().children().each(function(){var t=e(this);t.css("display",t.hasClass("k-state-disabled")?"none":"")}),this.updateGroups()}});e.extend(i,{Toolbar:c})}(window.jQuery),function(e){var t=window.kendo,n=e.extend,i=e.proxy,r=t.ui.editor,o=r.Dom,a=r.EditorUtils,s=r.Command,l=".kendoEditor",d="k-state-active",c="k-state-selected",u=r.Tool,p=r.ToolTemplate,f=r.BlockFormatFinder,h=r.EditorUtils.registerTool,g="<td contentEditable='true'>"+r.emptyElementContent+"</td>",m=new f([{tags:["table"]}]),v=s.extend({_tableHtml:function(e,t){return e=e||1,t=t||1,"<table class='k-table' contentEditable='false' data-last>"+Array(e+1).join("<tr>"+Array(t+1).join(g)+"</tr>")+"</table>"},exec:function(){var t,n,i=this.options,r=this.editor,o=this._tableHtml(i.rows,i.columns);r.selectRange(i.range),r.clipboard.paste(o),t=r.getRange(),n=e("table[data-last]",r.document).removeAttr("data-last"),t.selectNodeContents(n.find("td")[0]),r.selectRange(t)}}),_=u.extend({initialize:function(t,n){u.fn.initialize.call(this,t,n);var r=e(this.options.popupTemplate).appendTo("body").kendoPopup({anchor:t,copyAnchorStyles:!1,open:i(this._open,this),activate:i(this._activate,this),close:i(this._close,this)}).data("kendoPopup");t.click(i(this._toggle,this)),this._editor=n.editor,this._popup=r},popup:function(){return this._popup},_activate:e.noop,_open:function(){this._popup.options.anchor.addClass(d)},_close:function(){this._popup.options.anchor.removeClass(d)},_toggle:function(t){var n=e(t.target).closest(".k-tool-icon");n.hasClass("k-state-disabled")||this.popup().toggle()},update:function(e){this.popup().close(),e.removeClass("k-state-hover")}}),b=_.extend({init:function(t){this.cols=8,this.rows=6,_.fn.init.call(this,e.extend(t,{command:v,popupTemplate:"<div class='k-ct-popup'>"+Array(this.cols*this.rows+1).join("<div class='k-ct-cell k-state-disabled' />")+"<div class='k-status'>Cancel</div>"+"</div>"}))
},_activate:function(){function n(t){var n=e(window);return{row:Math.floor((t.clientY+n.scrollTop()-h.top)/o)+1,col:Math.floor((t.clientX+n.scrollLeft()-h.left)/r)+1}}function i(e){return e.row>0&&e.col>0&&e.row<=v&&e.col<=m}var r,o,a=this,s=a._popup.element,d=s.find(".k-status"),u=s.find(".k-ct-cell"),p=u.eq(0),f=u.eq(u.length-1),h=t.getOffset(p),g=t.getOffset(f),m=a.cols,v=a.rows;g.left+=f[0].offsetWidth,g.top+=f[0].offsetHeight,r=(g.left-h.left)/m,o=(g.top-h.top)/v,s.on("mousemove"+l,function(r){var o=n(r);i(o)?(d.text(t.format("Create a {0} x {1} table",o.row,o.col)),u.each(function(t){e(this).toggleClass(c,t%m<o.col&&t/m<o.row)})):(d.text("Cancel"),u.removeClass(c))}).on("mouseleave"+l,function(){u.removeClass(c),d.text("Cancel")}).on("mousedown"+l,!1).on("mouseup"+l,function(e){var t=n(e);i(t)&&(a._editor.exec("createTable",{rows:t.row,columns:t.col}),a._popup.close())})},_open:function(){_.fn._open.call(this),this.popup().element.find(".k-ct-cell").removeClass(c)},_close:function(){_.fn._close.call(this),this.popup().element.off(l)},update:function(e,t){var n;_.fn.update.call(this,e),n=m.isFormatted(t),e.toggleClass("k-state-disabled",n)}}),w=s.extend({exec:function(){for(var e,t,n,i,a=this.lockRange(!0),s=a.endContainer;"td"!=o.name(s);)s=s.parentNode;for(t=s.parentNode,e=t.children.length,n=t.cloneNode(!0),i=0;i<t.cells.length;i++)n.cells[i].innerHTML=r.emptyElementContent;"before"==this.options.position?o.insertBefore(n,t):o.insertAfter(n,t),this.releaseRange(a)}}),y=s.extend({exec:function(){var e,t,n,i,a=this.lockRange(!0),s=o.closest(a.endContainer,"td"),l=o.closest(s,"table"),d=l.rows,c=this.options.position;for(e=o.findNodeIndex(s),t=0;t<d.length;t++)n=d[t].cells[e],i=n.cloneNode(),i.innerHTML=r.emptyElementContent,"before"==c?o.insertBefore(i,n):o.insertAfter(i,n);this.releaseRange(a)}}),k=s.extend({exec:function(){var e,t=this.lockRange(),n=o.closest(t.endContainer,"tr"),i=o.closest(n,"table"),r=i.rows.length;1==r?(e=o.next(i)||o.prev(i),o.remove(i)):(o.removeTextSiblings(n),e=o.next(n)||o.prev(n),e=e.cells[0],o.remove(n)),e&&(t.setStart(e,0),t.collapse(!0),this.editor.selectRange(t))}}),x=s.extend({exec:function(){var e,t,n=this.lockRange(),i=o.closest(n.endContainer,"td"),r=o.closest(i,"table"),a=r.rows,s=o.findNodeIndex(i,!0),l=a[0].cells.length;if(1==l)e=o.next(r)||o.prev(r),o.remove(r);else for(o.removeTextSiblings(i),e=o.next(i)||o.prev(i),t=0;t<a.length;t++)o.remove(a[t].cells[s]);e&&(n.setStart(e,0),n.collapse(!0),this.editor.selectRange(n))}}),C=u.extend({command:function(e){return e=n(e,this.options),"delete"==e.action?"row"==e.type?new k(e):new x(e):"row"==e.type?new w(e):new y(e)},initialize:function(e,t){u.fn.initialize.call(this,e,t),e.addClass("k-state-disabled")},update:function(e,t){var n=!m.isFormatted(t);e.toggleClass("k-state-disabled",n)}});n(t.ui.editor,{PopupTool:_,TableCommand:v,InsertTableTool:b,TableModificationTool:C,InsertRowCommand:w,InsertColumnCommand:y,DeleteRowCommand:k,DeleteColumnCommand:x}),h("createTable",new b({template:new p({template:a.buttonTemplate,popup:!0,title:"Create table"})})),h("addColumnLeft",new C({type:"column",position:"before",template:new p({template:a.buttonTemplate,title:"Add column on the left"})})),h("addColumnRight",new C({type:"column",template:new p({template:a.buttonTemplate,title:"Add column on the right"})})),h("addRowAbove",new C({type:"row",position:"before",template:new p({template:a.buttonTemplate,title:"Add row above"})})),h("addRowBelow",new C({type:"row",template:new p({template:a.buttonTemplate,title:"Add row below"})})),h("deleteRow",new C({type:"row",action:"delete",template:new p({template:a.buttonTemplate,title:"Delete row"})})),h("deleteColumn",new C({type:"column",action:"delete",template:new p({template:a.buttonTemplate,title:"Delete column"})}))}(window.kendo.jQuery),function(e,t){function n(e,t){return'<span unselectable="on" class="k-link"><span unselectable="on" class="k-icon k-i-arrow-'+e+'" title="'+t+'">'+t+"</span></span>"}function i(n,i){var r,o,a,s,l,d=i!==t;return n.selectionStart!==t?d?(n.focus(),n.setSelectionRange(i,i)):i=[n.selectionStart,n.selectionEnd]:document.selection&&(e(n).is(":visible")&&n.focus(),r=document.selection.createRange(),d?(r.move("character",i),r.select()):(s=n.createTextRange(),l=s.duplicate(),s.moveToBookmark(r.getBookmark()),l.setEndPoint("EndToStart",s),o=l.text.length,a=o+s.text.length,i=[o,a])),i}var r=window.kendo,o=r.keys,a=r.ui,s=a.Widget,l=r._activeElement,d=r._extractFormat,c=r.parseFloat,u=r.support.placeholder,p=r.getCulture,f=r._round,h="change",g="disabled",m="readonly",v="k-input",_="spin",b=".kendoNumericTextBox",w="touchend",y="mouseleave"+b,k="mouseenter"+b+" "+y,x="k-state-default",C="k-state-focused",T="k-state-hover",S="focus",D=".",A="k-state-selected",E="k-state-disabled",F="aria-disabled",I="aria-readonly",P=null,B=e.proxy,z={190:".",188:","},H=s.extend({init:function(e,n){var i,o,a,l,c,u=this,p=n&&n.step!==t;s.fn.init.call(u,e,n),n=u.options,e=u.element.on("blur"+b,B(u._focusout,u)).attr("role","spinbutton"),n.placeholder=n.placeholder||e.attr("placeholder"),u._reset(),u._wrapper(),u._arrows(),u._input(),r.support.mobileOS?u._text.on(w+b+" "+S+b,function(t){u._toggleText(!1),t.type===S&&e.focus()}):u._text.on(S+b,B(u._click,u)),i=u.min(e.attr("min")),o=u.max(e.attr("max")),a=u._parse(e.attr("step")),n.min===P&&i!==P&&(n.min=i),n.max===P&&o!==P&&(n.max=o),p||a===P||(n.step=a),e.attr("aria-valuemin",n.min).attr("aria-valuemax",n.max),n.format=d(n.format),l=n.value,u.value(l!==P?l:e.val()),c=e.is("[disabled]"),c?u.enable(!1):u.readonly(e.is("[readonly]")),r.notify(u)},options:{name:"NumericTextBox",decimals:P,min:P,max:P,value:P,step:1,culture:"",format:"n",spinners:!0,placeholder:"",upArrowText:"Increase value",downArrowText:"Decrease value"},events:[h,_],_editable:function(e){var t=this,n=t.element,i=e.disable,r=e.readonly,o=t._text.add(n),a=t._inputWrapper.off(k);t._toggleText(!0),t._upArrowEventHandler.unbind("press"),t._downArrowEventHandler.unbind("press"),n.off("keydown"+b).off("paste"+b),r||i?(a.addClass(i?E:x).removeClass(i?x:E),o.attr(g,i).attr(m,r).attr(F,i).attr(I,r)):(a.addClass(x).removeClass(E).on(k,t._toggleHover),o.removeAttr(g).removeAttr(m).attr(F,!1).attr(I,!1),t._upArrowEventHandler.bind("press",function(e){e.preventDefault(),t._spin(1),t._upArrow.addClass(A)}),t._downArrowEventHandler.bind("press",function(e){e.preventDefault(),t._spin(-1),t._downArrow.addClass(A)}),t.element.on("keydown"+b,B(t._keydown,t)).on("paste"+b,B(t._paste,t)))},readonly:function(e){this._editable({readonly:e===t?!0:e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t?!0:e)})},destroy:function(){var e=this;e.element.add(e._text).add(e._upArrow).add(e._downArrow).add(e._inputWrapper).off(b),e._upArrowEventHandler.destroy(),e._downArrowEventHandler.destroy(),e._form&&e._form.off("reset",e._resetHandler),s.fn.destroy.call(e)},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},step:function(e){return this._option("step",e)},value:function(e){var n,i=this;return e===t?i._value:(e=i._parse(e),n=i._adjust(e),e===n&&(i._update(e),i._old=i._value),t)},focus:function(){this._focusin()},_adjust:function(e){var t=this,n=t.options,i=n.min,r=n.max;return e===P?e:(i!==P&&i>e?e=i:r!==P&&e>r&&(e=r),e)},_arrows:function(){var t,i=this,o=function(){clearTimeout(i._spinning),t.removeClass(A)},a=i.options,s=a.spinners,l=i.element;t=l.siblings(".k-icon"),t[0]||(t=e(n("n",a.upArrowText)+n("s",a.downArrowText)).insertAfter(l),t.wrapAll('<span class="k-select"/>')),s||(t.parent().toggle(s),i._inputWrapper.addClass("k-expand-padding")),i._upArrow=t.eq(0),i._upArrowEventHandler=new r.UserEvents(i._upArrow,{release:o}),i._downArrow=t.eq(1),i._downArrowEventHandler=new r.UserEvents(i._downArrow,{release:o})},_blur:function(){var e=this;e._toggleText(!0),e._change(e.element.val())},_click:function(e){var t=this;clearTimeout(t._focusing),t._focusing=setTimeout(function(){var n,r,o,a=e.target,s=i(a)[0],l=a.value.substring(0,s),d=t._format(t.options.format),c=d[","],u=0;c&&(r=RegExp("\\"+c,"g"),o=RegExp("([\\d\\"+c+"]+)(\\"+d[D]+")?(\\d+)?")),o&&(n=o.exec(l)),n&&(u=n[0].replace(r,"").length,-1!=l.indexOf("(")&&t._value<0&&u++),t._focusin(),i(t.element[0],u)})},_change:function(e){var t=this;t._update(e),e=t._value,t._old!=e&&(t._old=e,t.trigger(h),t.element.trigger(h))},_culture:function(e){return e||p(this.options.culture)},_focusin:function(){var e=this;e._inputWrapper.addClass(C),e._toggleText(!1),e.element[0].focus()},_focusout:function(){var e=this;clearTimeout(e._focusing),e._inputWrapper.removeClass(C).removeClass(T),e._blur()},_format:function(e,t){var n=this._culture(t).numberFormat;return e=e.toLowerCase(),e.indexOf("c")>-1?n=n.currency:e.indexOf("p")>-1&&(n=n.percent),n},_input:function(){var t,n=this,i="k-formatted-value",r=n.element.addClass(v).show()[0],o=r.accessKey,a=n.wrapper;t=a.find(D+i),t[0]||(t=e('<input type="text"/>').insertBefore(r).addClass(i)),r.type="text",t[0].tabIndex=r.tabIndex,t[0].style.cssText=r.style.cssText,t.prop("placeholder",n.options.placeholder),o&&(t.attr("accesskey",o),r.accessKey=""),n._text=t.addClass(r.className)},_keydown:function(e){var t=this,n=e.keyCode;n==o.DOWN?t._step(-1):n==o.UP?t._step(1):n==o.ENTER&&t._change(t.element.val()),t._prevent(n,e.shiftKey)&&!e.ctrlKey&&e.preventDefault()},_paste:function(e){var t=this,n=e.target,i=n.value;setTimeout(function(){t._parse(n.value)===P&&t._update(i)})},_prevent:function(e,t){var n,r=this,a=r.element[0],s=a.value,l=r.options,d=l.min,c=r._format(l.format),u=c[D],p=l.decimals,f=i(a),h=f[0],g=f[1],m=0===h&&g===s.length,v=!0;return p===P&&(p=c.decimals),e>16&&21>e||e>32&&37>e||e>47&&58>e||e>95&&106>e||e==o.INSERT||e==o.DELETE||e==o.LEFT||e==o.RIGHT||e==o.TAB||e==o.BACKSPACE||e==o.ENTER?(v=!1,t&&(n=parseInt(String.fromCharCode(e),10),isNaN(n)||(n+="",s=s.substring(0,h)+n+s.substring(g),(-1===a.maxLength||a.maxLength>=s.length)&&(a.value=s,i(a,h+n.length)),v=!0))):(z[e]===u||110==e)&&p>0&&(-1==s.indexOf(u)||m)?110==e?(a.value=s.substring(0,h)+u+s.substring(g),i(a,h+u.length)):t||(v=!1):!(d===P||0>d)||-1!=s.indexOf("-")||189!=e&&109!=e&&173!=e||0!==h||(v=!1),v},_option:function(e,n){var i=this,r=i.options;return n===t?r[e]:(n=i._parse(n),(n||"step"!==e)&&(r[e]=n,i.element.attr("aria-value"+e,n).attr(e,n)),t)},_spin:function(e,t){var n=this;t=t||500,clearTimeout(n._spinning),n._spinning=setTimeout(function(){n._spin(e,50)},t),n._step(e)},_step:function(e){var t=this,n=t.element,i=t._parse(n.val())||0;l()!=n[0]&&t._focusin(),i+=t.options.step*e,t._update(t._adjust(i)),t.trigger(_)},_toggleHover:function(t){e(t.currentTarget).toggleClass(T,"mouseenter"===t.type)},_toggleText:function(e){var t=this;t._text.toggle(e),t.element.toggle(!e)},_parse:function(e,t){return c(e,this._culture(t),this.options.format)},_update:function(e){var t,n=this,i=n.options,o=i.format,a=i.decimals,s=n._culture(),l=n._format(o,s);a===P&&(a=l.decimals),e=n._parse(e,s),t=e!==P,t&&(e=parseFloat(f(e,a))),n._value=e=n._adjust(e),n._placeholder(r.toString(e,o,s)),t?(e=""+e,-1!==e.indexOf("e")&&(e=f(+e,a)),e=e.replace(D,l[D])):e="",n.element.val(e).attr("aria-valuenow",e)},_placeholder:function(e){this._text.val(e),u||e||this._text.val(this.options.placeholder)},_wrapper:function(){var t,n=this,i=n.element,r=i[0];t=i.parents(".k-numerictextbox"),t.is("span.k-numerictextbox")||(t=i.hide().wrap('<span class="k-numeric-wrap k-state-default" />').parent(),t=t.wrap("<span/>").parent()),t[0].style.cssText=r.style.cssText,r.style.width="",n.wrapper=t.addClass("k-widget k-numerictextbox").addClass(r.className).css("display",""),n._inputWrapper=e(t[0].firstChild)},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){setTimeout(function(){t.value(n[0].value)})},t._form=r.on("reset",t._resetHandler))}});a.plugin(H)}(window.kendo.jQuery),function(e,t){function n(e,t){return e=e.split(" ")[!t+0]||e,e.replace("top","up").replace("bottom","down")}function i(e,t,n){e=e.split(" ")[!t+0]||e;var i={origin:["bottom",n?"right":"left"],position:["top",n?"right":"left"]},r=/left|right/.test(e);return r?(i.origin=["top",e],i.position[1]=l.directions[e].reverse):(i.origin[0]=e,i.position[0]=l.directions[e].reverse),i.origin=i.origin.join(" "),i.position=i.position.join(" "),i}function r(t,n){try{return e.contains(t,n)}catch(i){return!1}}function o(t){t=e(t),t.addClass("k-item").children(k).addClass(F),t.children("a").addClass(T).children(k).addClass(F),t.filter(":not([disabled])").addClass(U),t.filter(".k-separator:empty").append("&nbsp;"),t.filter("li[disabled]").addClass(G).removeAttr("disabled").attr("aria-disabled",!0),t.filter("[role]").length||t.attr("role","menuitem"),t.children("."+T).length||t.contents().filter(function(){return!(this.nodeName.match(w)||3==this.nodeType&&!e.trim(this.nodeValue))}).wrapAll("<span class='"+T+"'/>"),a(t),s(t)}function a(t){t=e(t),t.find("> .k-link > [class*=k-i-arrow]").remove(),t.filter(":has(.k-group)").children(".k-link:not(:has([class*=k-i-arrow]))").each(function(){var t=e(this),n=t.parent().parent();t.append("<span class='k-icon "+(n.hasClass(C+"-horizontal")?"k-i-arrow-s":"k-i-arrow-e")+"'/>")})}function s(t){t=e(t),t.filter(".k-first:not(:first-child)").removeClass(E),t.filter(".k-last:not(:last-child)").removeClass(S),t.filter(":first-child").addClass(E),t.filter(":last-child").addClass(S)}var l=window.kendo,d=l.ui,c=l._activeElement,u=l.support.touch&&l.support.mobileOS,p="mousedown",f="click",h=e.extend,g=e.proxy,m=e.each,v=l.template,_=l.keys,b=d.Widget,w=/^(ul|a|div)$/i,y=".kendoMenu",k="img",x="open",C="k-menu",T="k-link",S="k-last",D="close",A="timer",E="k-first",F="k-image",I="select",P="zIndex",B="activate",z="deactivate",H="touchstart"+y+" MSPointerDown"+y+" pointerdown"+y,R=l.support.pointers,M=l.support.msPointers,L=R?"pointerover":M?"MSPointerOver":"mouseenter",O=R?"pointerout":M?"MSPointerOut":"mouseleave",N=u||M||R,V="kendoPopup",U="k-state-default",W="k-state-hover",j="k-state-focused",G="k-state-disabled",q=".k-group",Y=":not(.k-list) > .k-item",Q=".k-item.k-state-disabled",$=".k-item:not(.k-state-disabled)",K=".k-item:not(.k-state-disabled) > .k-link",X=":not(.k-item.k-separator)",J=X+":eq(0)",Z=X+":last",et="div:not(.k-animation-container,.k-list-container)",tt={content:v("<div class='k-content k-group' tabindex='-1'>#= content(item) #</div>"),group:v("<ul class='#= groupCssClass(group) #'#= groupAttributes(group) # role='menu' aria-hidden='true'>#= renderItems(data) #</ul>"),itemWrapper:v("<#= tag(item) # class='#= textClass(item) #'#= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) ##= arrow(data) #</#= tag(item) #>"),item:v("<li class='#= wrapperCssClass(group, item) #' role='menuitem' #=item.items ? \"aria-haspopup='true'\": \"\"##=item.enabled === false ? \"aria-disabled='true'\" : ''#>#= itemWrapper(data) ## if (item.items) { ##= subGroup({ items: item.items, menu: menu, group: { expanded: item.expanded } }) ## } else if (item.content || item.contentUrl) { ##= renderContent(data) ## } #</li>"),image:v("<img class='k-image' alt='' src='#= imageUrl #' />"),arrow:v("<span class='#= arrowClass(item, group) #'></span>"),sprite:v("<span class='k-sprite #= spriteCssClass #'></span>"),empty:v("")},nt={wrapperCssClass:function(e,t){var n="k-item",i=t.index;return n+=t.enabled===!1?" k-state-disabled":" k-state-default",e.firstLevel&&0===i&&(n+=" k-first"),i==e.length-1&&(n+=" k-last"),t.cssClass&&(n+=" "+t.cssClass),n},textClass:function(){return T},textAttributes:function(e){return e.url?" href='"+e.url+"'":""},arrowClass:function(e,t){var n="k-icon";return n+=t.horizontal?" k-i-arrow-s":" k-i-arrow-e"},text:function(e){return e.encoded===!1?e.text:l.htmlEncode(e.text)},tag:function(e){return e.url?"a":"span"},groupAttributes:function(e){return e.expanded!==!0?" style='display:none'":""},groupCssClass:function(){return"k-group"},content:function(e){return e.content?e.content:"&nbsp;"}},it=b.extend({init:function(t,n){var i=this;b.fn.init.call(i,t,n),t=i.wrapper=i.element,n=i.options,i._initData(n),i._updateClasses(),i._animations(n),i.nextItemZIndex=100,i._tabindex(),i._focusProxy=g(i._focusHandler,i),t.on(H,i._focusProxy).on(f+y,Q,!1).on(f+y,$,g(i._click,i)).on("keydown"+y,g(i._keydown,i)).on("focus"+y,g(i._focus,i)).on("focus"+y,".k-content",g(i._focus,i)).on(H+" "+p+y,".k-content",g(i._preventClose,i)).on("blur"+y,g(i._removeHoverItem,i)).on("blur"+y,"[tabindex]",g(i._checkActiveElement,i)).on(L+y,$,g(i._mouseenter,i)).on(O+y,$,g(i._mouseleave,i)).on(L+y+" "+O+y+" "+p+y+" "+f+y,K,g(i._toggleHover,i)),n.openOnClick&&(i.clicked=!1,i._documentClickHandler=g(i._documentClick,i),e(document).click(i._documentClickHandler)),t.attr("role","menubar"),t[0].id&&(i._ariaId=l.format("{0}_mn_active",t[0].id)),l.notify(i)},events:[x,D,B,z,I],options:{name:"Menu",animation:{open:{duration:200},close:{duration:100}},orientation:"horizontal",direction:"default",openOnClick:!1,closeOnClick:!0,hoverDelay:100},_initData:function(e){var t=this;e.dataSource&&(t.element.empty(),t.append(e.dataSource,t.element))},setOptions:function(e){var t=this.options.animation;this._animations(e),e.animation=h(!0,t,e.animation),"dataSource"in e&&this._initData(e),b.fn.setOptions.call(this,e)},destroy:function(){var t=this;b.fn.destroy.call(t),t.element.off(y),t._documentClickHandler&&e(document).unbind("click",t._documentClickHandler)},enable:function(e,t){return this._toggleDisabled(e,t!==!1),this},disable:function(e){return this._toggleDisabled(e,!1),this},append:function(e,t){t=this.element.find(t);var n=this._insert(e,t,t.length?t.find("> .k-group, > .k-animation-container > .k-group"):null);return m(n.items,function(){n.group.append(this),a(this)}),a(t),s(n.group.find(".k-first, .k-last").add(n.items)),this},insertBefore:function(e,t){t=this.element.find(t);var n=this._insert(e,t,t.parent());return m(n.items,function(){t.before(this),a(this),s(this)}),s(t),this},insertAfter:function(e,t){t=this.element.find(t);var n=this._insert(e,t,t.parent());return m(n.items,function(){t.after(this),a(this),s(this)}),s(t),this},_insert:function(t,n,i){var r,a,s,l,d=this;return n&&n.length||(i=d.element),s=e.isPlainObject(t),l={firstLevel:i.hasClass(C),horizontal:i.hasClass(C+"-horizontal"),expanded:!0,length:i.children().length},n&&!i.length&&(i=e(it.renderGroup({group:l})).appendTo(n)),s||e.isArray(t)?r=e.map(s?[t]:t,function(t,n){return"string"==typeof t?e(t):e(it.renderItem({group:l,item:h(t,{index:n})}))}):(r=e(t),a=r.find("> ul").addClass("k-group").attr("role","menu"),r=r.filter("li"),r.add(a.find("> li")).each(function(){o(this)})),{items:r,group:i}},remove:function(e){var t,n,i,r;return e=this.element.find(e),t=this,n=e.parentsUntil(t.element,Y),i=e.parent("ul"),e.remove(),i&&!i.children(Y).length&&(r=i.parent(".k-animation-container"),r.length?r.remove():i.remove()),n.length&&(n=n.eq(0),a(n),s(n)),t},open:function(r){var o=this,a=o.options,s="horizontal"==a.orientation,d=a.direction,c=l.support.isRtl(o.wrapper);return r=o.element.find(r),/^(top|bottom|default)$/.test(d)&&(d=c?s?(d+" left").replace("default","bottom"):"left":s?(d+" right").replace("default","bottom"):"right"),r.siblings().find(">.k-popup:visible,>.k-animation-container>.k-popup:visible").each(function(){var t=e(this).data("kendoPopup");t&&t.close()}),r.each(function(){var r=e(this);clearTimeout(r.data(A)),r.data(A,setTimeout(function(){var e,l,u,p,f,g,m=r.find(".k-group:first:hidden");m[0]&&o.trigger(x,{item:r[0]})===!1&&(r.data(P,r.css(P)),r.css(P,o.nextItemZIndex++),e=m.data(V),l=r.parent().hasClass(C),u=l&&s,p=i(d,l,c),f=a.animation.open.effects,g=f!==t?f:"slideIn:"+n(d,l),e?(e=m.data(V),e.options.origin=p.origin,e.options.position=p.position,e.options.animation.open.effects=g):e=m.kendoPopup({activate:function(){o.trigger(B,{item:this.wrapper.parent()})},deactivate:function(){o.trigger(z,{item:this.wrapper.parent()})},origin:p.origin,position:p.position,collision:a.popupCollision!==t?a.popupCollision:u?"fit":"fit flip",anchor:r,appendTo:r,animation:{open:h(!0,{effects:g},a.animation.open),close:a.animation.close},close:function(e){var t=e.sender.wrapper.parent();o.trigger(D,{item:t[0]})?e.preventDefault():(t.css(P,t.data(P)),t.removeData(P),N&&(t.removeClass(W),o._removeHoverItem()))}}).data(V),m.removeAttr("aria-hidden"),e.open())},o.options.hoverDelay))}),o},close:function(t){var n=this,i=n.element;return t=i.find(t),t.length||(t=i.find(">.k-item")),t.each(function(){var t=e(this);clearTimeout(t.data(A)),t.data(A,setTimeout(function(){var e=t.find(".k-group:not(.k-list-container):first:visible").data(V);e&&(e.close(),e.element.attr("aria-hidden",!0))},n.options.hoverDelay))}),n},_toggleDisabled:function(t,n){this.element.find(t).each(function(){e(this).toggleClass(U,n).toggleClass(G,!n).attr("aria-disabled",!n)})},_toggleHover:function(t){var n=e(l.eventTarget(t)||t.target).closest(Y),i=t.type==L||-1!==p.indexOf(t.type);n.parents("li."+G).length||n.toggleClass(W,i||"mousedown"==t.type||"click"==t.type),this._removeHoverItem()},_preventClose:function(){this.options.closeOnClick||(this._closurePrevented=!0)},_checkActiveElement:function(t){var n=this,i=e(this._hoverItem()[0]||(t?t.currentTarget:{})),o=n._findRootParent(i)[0];this._closurePrevented||setTimeout(function(){(!document.hasFocus()||!r(o,l._activeElement())&&t&&!r(o,t.currentTarget))&&n.close(o)},0),this._closurePrevented=!1},_removeHoverItem:function(){var e=this._hoverItem();e&&e.hasClass(j)&&(e.removeClass(j),this._oldHoverItem=null)},_updateClasses:function(){var e,t=this.element;t.addClass("k-widget k-reset k-header "+C).addClass(C+"-"+this.options.orientation),t.find("li > ul").addClass("k-group").attr("role","menu").attr("aria-hidden",t.is(":visible")).end().find("li > div").addClass("k-content").attr("tabindex","-1"),e=t.find("> li,.k-group > li"),e.each(function(){o(this)})},_mouseenter:function(t){var n=this,i=e(t.currentTarget),o=i.children(".k-animation-container").length||i.children(q).length;t.delegateTarget==i.parents(".k-menu")[0]&&((!n.options.openOnClick||n.clicked)&&!r(t.currentTarget,t.relatedTarget)&&o&&n.open(i),(n.options.openOnClick&&n.clicked||N)&&i.siblings().each(g(function(e,t){n.close(t)},n)))},_mouseleave:function(n){var i=this,o=e(n.currentTarget),a=o.children(".k-animation-container").length||o.children(q).length;return o.parentsUntil(".k-animation-container",".k-list-container,.k-calendar-container")[0]?(n.stopImmediatePropagation(),t):(i.options.openOnClick||u||(R||M)&&n.originalEvent.pointerType==n.originalEvent.MSPOINTER_TYPE_TOUCH||r(n.currentTarget,n.relatedTarget)||!a||i.close(o),t)},_click:function(n){var i,r,o,a=this,s=a.options,d=e(l.eventTarget(n)),c=d[0]?d[0].nodeName.toUpperCase():"",u="INPUT"==c||"SELECT"==c||"BUTTON"==c||"LABEL"==c,p=d.closest("."+T),f=d.closest(Y),h=p.attr("href"),g=!!h&&h!==e("<a href='#' />").attr("href");if(!f.children(et)[0]){if(f.hasClass(G))return n.preventDefault(),t;if(n.handled||!a.trigger(I,{item:f[0]})||u||n.preventDefault(),n.handled=!0,r=f.children(q+",.k-animation-container"),o=r.is(":visible"),s.closeOnClick&&!g&&(!r.length||s.openOnClick&&o))return f.removeClass(W).css("height"),a._oldHoverItem=a._findRootParent(f),a.close(p.parentsUntil(a.element,Y)),a.clicked=!1,-1!="MSPointerUp".indexOf(n.type)&&n.preventDefault(),t;g&&n.enterKey&&p[0].click(),(f.parent().hasClass(C)&&s.openOnClick||l.support.touch)&&(g||u||n.preventDefault(),a.clicked=!0,i=r.is(":visible")?D:x,(s.closeOnClick||i!=D)&&a[i](f))}},_documentClick:function(e){r(this.element[0],e.target)||(this.clicked=!1)},_focus:function(n){var i=this,r=n.target,o=i._hoverItem(),a=c();return r==i.wrapper[0]||e(r).is(":focusable")?(a===n.currentTarget&&(o.length?i._moveHover([],o):i._oldHoverItem||i._moveHover([],i.wrapper.children().first())),t):(n.stopPropagation(),e(r).closest(".k-content").closest(".k-group").closest(".k-item").addClass(j),i.wrapper.focus(),t)},_keydown:function(e){var n,i,r,o=this,a=e.keyCode,s=o._oldHoverItem,d=l.support.isRtl(o.wrapper);if(e.target==e.currentTarget||a==_.ESC){if(s||(s=o._oldHoverItem=o._hoverItem()),i=o._itemBelongsToVertival(s),r=o._itemHasChildren(s),a==_.RIGHT)n=o[d?"_itemLeft":"_itemRight"](s,i,r);else if(a==_.LEFT)n=o[d?"_itemRight":"_itemLeft"](s,i,r);else if(a==_.DOWN)n=o._itemDown(s,i,r);else if(a==_.UP)n=o._itemUp(s,i,r);else if(a==_.ESC)n=o._itemEsc(s,i);else if(a==_.ENTER||a==_.SPACEBAR)n=s.children(".k-link"),n.length>0&&(o._click({target:n[0],preventDefault:function(){},enterKey:!0}),o._moveHover(s,o._findRootParent(s)));else if(a==_.TAB)return n=o._findRootParent(s),o._moveHover(s,n),o._checkActiveElement(),t;n&&n[0]&&(e.preventDefault(),e.stopPropagation())}},_hoverItem:function(){return this.wrapper.find(".k-item.k-state-hover,.k-item.k-state-focused").filter(":visible")},_itemBelongsToVertival:function(e){var t=this.wrapper.hasClass("k-menu-vertical");return e.length?e.parent().hasClass("k-group")||t:t},_itemHasChildren:function(e){return e.length?e.children("ul.k-group, div.k-animation-container").length>0:!1},_moveHover:function(e,t){var n=this,i=n._ariaId;e.length&&t.length&&(e.removeClass(j),e[0].id===i&&e.removeAttr("id")),t.length&&(t[0].id&&(i=t[0].id),t.addClass(j),n._oldHoverItem=t,i&&(n.element.removeAttr("aria-activedescendant"),t.attr("id",i),n.element.attr("aria-activedescendant",i)))},_findRootParent:function(e){return e.parent().hasClass("k-menu")?e:e.parentsUntil(".k-menu","li.k-item").last()},_isRootItem:function(e){return e.parent().hasClass("k-menu")},_itemRight:function(e,t,n){var i,r,o=this;if(!e.hasClass(G))return t?n?(o.open(e),i=e.find(".k-group").children().first()):"horizontal"==o.options.orientation&&(r=o._findRootParent(e),o.close(r),i=r.nextAll(J)):(i=e.nextAll(J),i.length||(i=e.prevAll(Z))),i&&!i.length?i=o.wrapper.children(".k-item").first():i||(i=[]),o._moveHover(e,i),i},_itemLeft:function(e,t){var n,i=this;return t?(n=e.parent().closest(".k-item"),i.close(n),i._isRootItem(n)&&"horizontal"==i.options.orientation&&(n=n.prevAll(J))):(n=e.prevAll(J),n.length||(n=e.nextAll(Z))),n.length||(n=i.wrapper.children(".k-item").last()),i._moveHover(e,n),n},_itemDown:function(e,t,n){var i,r=this;if(t)i=e.nextAll(J);else{if(!n||e.hasClass(G))return;r.open(e),i=e.find(".k-group").children().first()}return!i.length&&e.length?i=e.parent().children().first():e.length||(i=r.wrapper.children(".k-item").first()),r._moveHover(e,i),i},_itemUp:function(e,t){var n,i=this;if(t)return n=e.prevAll(J),!n.length&&e.length?n=e.parent().children().last():e.length||(n=i.wrapper.children(".k-item").last()),i._moveHover(e,n),n},_itemEsc:function(e,t){var n,i=this;return t?(n=e.parent().closest(".k-item"),i.close(n),i._moveHover(e,n),n):e},_focusHandler:function(t){var n=this,i=e(l.eventTarget(t)).closest(Y);setTimeout(function(){n._moveHover([],i),i.children(".k-content")[0]&&i.parent().closest(".k-item").removeClass(j)},200)},_animations:function(e){e&&"animation"in e&&!e.animation&&(e.animation={open:{effects:{}},close:{hide:!0,effects:{}}})}});h(it,{renderItem:function(e){e=h({menu:{},group:{}},e);var t=tt.empty,n=e.item;return tt.item(h(e,{image:n.imageUrl?tt.image:t,sprite:n.spriteCssClass?tt.sprite:t,itemWrapper:tt.itemWrapper,renderContent:it.renderContent,arrow:n.items||n.content?tt.arrow:t,subGroup:it.renderGroup},nt))},renderGroup:function(e){return tt.group(h({renderItems:function(e){for(var t="",n=0,i=e.items,r=i?i.length:0,o=h({length:r},e.group);r>n;n++)t+=it.renderItem(h(e,{group:o,item:h({index:n},i[n])}));return t}},e,nt))},renderContent:function(e){return tt.content(h(e,nt))}}),l.ui.plugin(it)}(window.kendo.jQuery),function(e,t){function n(t){return t=null!=t?t:"",t.type||e.type(t)||"string"}function i(t){t.find(":input:not(:button, ["+s.attr("role")+"=upload], ["+s.attr("skip")+"], [type=file]), select").each(function(){var t=s.attr("bind"),n=this.getAttribute(t)||"",i="checkbox"===this.type||"radio"===this.type?"checked:":"value:",r=this.name;-1===n.indexOf(i)&&r&&(n+=(n.length?",":"")+i+r,e(this).attr(t,n))})}function r(e){var t,i,r=(e.model.fields||e.model)[e.field],o=n(r),a=r?r.validation:{},l=s.attr("type"),d=s.attr("bind"),c={name:e.field};for(t in a)i=a[t],h(t,_)>=0?c[l]=t:p(i)||(c[t]=f(i)?i.value||t:i),c[s.attr(t+"-msg")]=i.message;return h(o,_)>=0&&(c[l]=o),c[d]=("boolean"===o?"checked:":"value:")+e.field,c}function o(e){var t,n,i,r,o,a;if(e&&e.length)for(a=[],t=0,n=e.length;n>t;t++)i=e[t],o=i.text||i.value||i,r=null==i.value?i.text||i:i.value,a[t]={text:o,value:r};return a}function a(e,t){var n,i,r=e?e.validation||{}:{};for(n in r)i=r[n],f(i)&&i.value&&(i=i.value),p(i)&&(t[n]=i)}var s=window.kendo,l=s.ui,d=l.Widget,c=e.extend,u=s.support.browser.msie&&s.support.browser.version<9,p=e.isFunction,f=e.isPlainObject,h=e.inArray,g=/("|\%|'|\[|\]|\$|\.|\,|\:|\;|\+|\*|\&|\!|\#|\(|\)|<|>|\=|\?|\@|\^|\{|\}|\~|\/|\||`)/g,m='<div class="k-widget k-tooltip k-tooltip-validation" style="margin:0.5em"><span class="k-icon k-warning"> </span>#=message#<div class="k-callout k-callout-n"></div></div>',v="change",_=["url","email","number","date","boolean"],b={number:function(t,n){var i=r(n);e('<input type="text"/>').attr(i).appendTo(t).kendoNumericTextBox({format:n.format}),e("<span "+s.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},date:function(t,n){var i=r(n),o=n.format;o&&(o=s._extractFormat(o)),i[s.attr("format")]=o,e('<input type="text"/>').attr(i).appendTo(t).kendoDatePicker({format:n.format}),e("<span "+s.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},string:function(t,n){var i=r(n);e('<input type="text" class="k-input k-textbox"/>').attr(i).appendTo(t)},"boolean":function(t,n){var i=r(n);e('<input type="checkbox" />').attr(i).appendTo(t)},values:function(t,n){var i=r(n);e("<select "+s.attr("text-field")+'="text"'+s.attr("value-field")+'="value"'+s.attr("source")+"='"+s.stringify(o(n.values)).replace(/\'/g,"&apos;")+"'"+s.attr("role")+'="dropdownlist"/>').attr(i).appendTo(t),e("<span "+s.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)}},w=d.extend({init:function(t,n){var i=this;d.fn.init.call(i,t,n),i._validateProxy=e.proxy(i._validate,i),i.refresh()},events:[v],options:{name:"Editable",editors:b,clearContainer:!0,errorTemplate:m},editor:function(e,t){var i=this,r=i.options.editors,o=f(e),a=o?e.field:e,l=i.options.model||{},d=o&&e.values,u=d?"values":n(t),p=o&&e.editor,h=p?e.editor:r[u],m=i.element.find("["+s.attr("container-for")+"="+a.replace(g,"\\$1")+"]");h=h?h:r.string,p&&"string"==typeof e.editor&&(h=function(t){t.append(e.editor)}),m=m.length?m:i.element,h(m,c(!0,{},o?e:{field:a},{model:l}))},_validate:function(t){var n,i=this,r="boolean"==typeof t.value,o=i._validationEventInProgress,a={};a[t.field]=t.value,n=e(":input["+s.attr("bind")+'="'+(r?"checked:":"value:")+t.field.replace(g,"\\$1")+'"]',i.element);try{i._validationEventInProgress=!0,(!i.validatable.validateInput(n)||!o&&i.trigger(v,{values:a}))&&t.preventDefault()}finally{i._validationEventInProgress=!1}},end:function(){return this.validatable.validate()},destroy:function(){var e=this;d.fn.destroy.call(e),e.options.model.unbind("set",e._validateProxy),s.unbind(e.element),s.destroy(e.element),e.element.removeData("kendoValidator")},refresh:function(){var n,r,o,l,d,c,p,h,g=this,m=g.options.fields||[],v=g.options.clearContainer?g.element.empty():g.element,_=g.options.model||{},b={};for(e.isArray(m)||(m=[m]),n=0,r=m.length;r>n;n++)o=m[n],l=f(o),d=l?o.field:o,c=(_.fields||_)[d],a(c,b),g.editor(o,c);if(!r){p=_.fields||_;for(d in p)a(p[d],b)}i(v),s.bind(v,g.options.model),g.options.model.bind("set",g._validateProxy),g.validatable=v.kendoValidator({validateOnBlur:!1,errorTemplate:g.options.errorTemplate||t,rules:b}).data("kendoValidator"),h=v.find(":focusable:first").focus(),u&&h.focus()}});l.plugin(w)}(window.kendo.jQuery),function(e){function t(n,i){n.filters&&(n.filters=e.grep(n.filters,function(e){return t(e,i),e.filters?e.filters.length:e.field!=i
}))}function n(e){var t,n,i,r,o,a;if(e&&e.length)for(a=[],t=0,n=e.length;n>t;t++)i=e[t],o=i.text||i.value||i,r=null==i.value?i.text||i:i.value,a[t]={text:o,value:r};return a}function i(t,n){return e.grep(t,function(t){return t.filters?(t.filters=e.grep(t.filters,function(e){return e.field!=n}),t.filters.length):t.field!=n})}var r=window.kendo,o=r.ui,a=e.proxy,s="kendoPopup",l="init",d=".kendoFilterMenu",c="Is equal to",u="Is not equal to",p={number:"numerictextbox",date:"datepicker"},f=e.isFunction,h=o.Widget,g='<div><div class="k-filter-help-text">#=messages.info#</div><label><input type="radio" data-#=ns#bind="checked: filters[0].value" value="true" name="filters[0].value"/>#=messages.isTrue#</label><label><input type="radio" data-#=ns#bind="checked: filters[0].value" value="false" name="filters[0].value"/>#=messages.isFalse#</label><div><button type="submit" class="k-button">#=messages.filter#</button><button type="reset" class="k-button">#=messages.clear#</button></div></div>',m='<div><div class="k-filter-help-text">#=messages.info#</div><select data-#=ns#bind="value: filters[0].operator" data-#=ns#role="dropdownlist">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select>#if(values){#<select data-#=ns#bind="value:filters[0].value" data-#=ns#text-field="text" data-#=ns#value-field="value" data-#=ns#source=\'#=kendo.stringify(values).replace(/\'/g,"&\\#39;")#\' data-#=ns#role="dropdownlist" data-#=ns#option-label="#=messages.selectValue#"></select>#}else{#<input data-#=ns#bind="value:filters[0].value" class="k-textbox" type="text" #=role ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}##if(extra){#<select class="k-filter-and" data-#=ns#bind="value: logic" data-#=ns#role="dropdownlist"><option value="and">#=messages.and#</option><option value="or">#=messages.or#</option></select><select data-#=ns#bind="value: filters[1].operator" data-#=ns#role="dropdownlist">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select>#if(values){#<select data-#=ns#bind="value:filters[1].value" data-#=ns#text-field="text" data-#=ns#value-field="value" data-#=ns#source=\'#=kendo.stringify(values).replace(/\'/g,"&\\#39;")#\' data-#=ns#role="dropdownlist" data-#=ns#option-label="#=messages.selectValue#"></select>#}else{#<input data-#=ns#bind="value: filters[1].value" class="k-textbox" type="text" #=role ? "data-" + ns + "role=\'" + role + "\'" : ""#/>#}##}#<div><button type="submit" class="k-button">#=messages.filter#</button><button type="reset" class="k-button">#=messages.clear#</button></div></div>',v=h.extend({init:function(t,n){var i,o,s,l,c=this,u="string";h.fn.init.call(c,t,n),i=c.operators=n.operators||{},t=c.element,n=c.options,n.appendToElement||(s=t.addClass("k-filterable").find(".k-grid-filter"),s[0]||(s=t.prepend('<a class="k-grid-filter" href="#"><span class="k-icon k-filter"/></a>').find(".k-grid-filter")),s.attr("tabindex",-1).on("click"+d,a(c._click,c))),c.link=s||e(),c.dataSource=n.dataSource,c.field=n.field||t.attr(r.attr("field")),c.model=c.dataSource.reader.model,c._parse=function(e){return e+""},c.model&&c.model.fields&&(l=c.model.fields[c.field],l&&(u=l.type||"string",l.parse&&(c._parse=a(l.parse,l)))),n.values&&(u="enums"),c.type=u,i=i[u]||n.operators[u];for(o in i)break;c._defaultFilter=function(){return{field:c.field,operator:o||"eq",value:""}},c._refreshHandler=a(c.refresh,c),c.dataSource.bind("change",c._refreshHandler),n.appendToElement?c._init():c.refresh()},_init:function(){var t,i=this,o=i.options,c=i.operators||{},u=o.ui,h=f(u),v=i.type;c=c[v]||o.operators[v],h||(t=u||p[v]),i.form=e('<form class="k-filter-menu k-secondary"/>').html(r.template("boolean"===v?g:m)({field:i.field,format:o.format,ns:r.ns,messages:o.messages,extra:o.extra,operators:c,type:v,role:t,values:n(o.values)})).on("keydown"+d,a(i._keydown,i)).on("submit"+d,a(i._submit,i)).on("reset"+d,a(i._reset,i)),o.appendToElement?(i.element.append(i.form),i.popup=i.element.closest(".k-popup").data(s)):i.popup=i.form[s]({anchor:i.link,open:a(i._open,i),activate:a(i._activate,i),close:i.options.closeCallback}).data(s),h&&i.form.find(".k-textbox").removeClass("k-textbox").each(function(){u(e(this))}),i.form.find("["+r.attr("role")+"=numerictextbox]").removeClass("k-textbox").end().find("["+r.attr("role")+"=datetimepicker]").removeClass("k-textbox").end().find("["+r.attr("role")+"=timepicker]").removeClass("k-textbox").end().find("["+r.attr("role")+"=datepicker]").removeClass("k-textbox"),i.refresh(),i.trigger(l,{field:i.field,container:i.form})},refresh:function(){var e=this,t=e.dataSource.filter()||{filters:[],logic:"and"};e.filterModel=r.observable({logic:"and",filters:[e._defaultFilter(),e._defaultFilter()]}),e.form&&r.bind(e.form.children().first(),e.filterModel),e._bind(t)?e.link.addClass("k-state-active"):e.link.removeClass("k-state-active")},destroy:function(){var e=this;h.fn.destroy.call(e),e.form&&(r.unbind(e.form),r.destroy(e.form),e.form.unbind(d),e.popup.destroy()),e.link.unbind(d),e._refreshHandler&&e.dataSource.unbind("change",e._refreshHandler)},_bind:function(e){var t,n,i,r,o=this,a=e.filters,s=!1,l=0,d=o.filterModel;for(t=0,n=a.length;n>t;t++)r=a[t],r.field==o.field?(d.set("logic",e.logic),i=d.filters[l],i||(d.filters.push({field:o.field}),i=d.filters[l]),i.set("value",o._parse(r.value)),i.set("operator",r.operator),l++,s=!0):r.filters&&(s=s||o._bind(r));return s},_merge:function(n){var i,r,o,a=this,s=n.logic||"and",l=n.filters,d=a.dataSource.filter()||{filters:[],logic:"and"};for(t(d,a.field),l=e.grep(l,function(e){return""!==e.value&&null!=e.value}),r=0,o=l.length;o>r;r++)i=l[r],i.value=a._parse(i.value);return l.length&&(d.filters.length?(n.filters=l,"and"!==d.logic&&(d.filters=[{logic:d.logic,filters:d.filters}],d.logic="and"),l.length>1?d.filters.push(n):d.filters.push(l[0])):(d.filters=l,d.logic=s)),d},filter:function(e){e=this._merge(e),e.filters.length&&this.dataSource.filter(e)},clear:function(){var t=this,n=t.dataSource.filter()||{filters:[]};n.filters=e.grep(n.filters,function(e){return e.filters?(e.filters=i(e.filters,t.field),e.filters.length):e.field!=t.field}),n.filters.length||(n=null),t.dataSource.filter(n)},_submit:function(e){var t=this;e.preventDefault(),t.filter(t.filterModel.toJSON()),t.popup.close()},_reset:function(){this.clear(),this.popup.close()},_click:function(e){e.preventDefault(),e.stopPropagation(),this.popup||this._init(),this.popup.toggle()},_open:function(){var t;e(".k-filter-menu").not(this.form).each(function(){t=e(this).data(s),t&&t.close()})},_activate:function(){this.form.find(":focusable:first").focus()},_keydown:function(e){e.keyCode==r.keys.ESC&&this.popup.close()},events:[l],options:{name:"FilterMenu",extra:!0,appendToElement:!1,type:"string",operators:{string:{eq:c,neq:u,startswith:"Starts with",contains:"Contains",doesnotcontain:"Does not contain",endswith:"Ends with"},number:{eq:c,neq:u,gte:"Is greater than or equal to",gt:"Is greater than",lte:"Is less than or equal to",lt:"Is less than"},date:{eq:c,neq:u,gte:"Is after or equal to",gt:"Is after",lte:"Is before or equal to",lt:"Is before"},enums:{eq:c,neq:u}},messages:{info:"Show items with value that:",isTrue:"is true",isFalse:"is false",filter:"Filter",clear:"Clear",and:"And",or:"Or",selectValue:"-Select value-"}}});o.plugin(v)}(window.kendo.jQuery),function(e,t){function n(t){t=e(t),t.children(v).children(".k-icon").remove(),t.filter(":has(.k-panel),:has(.k-content)").children(".k-link:not(:has([class*=k-i-arrow]))").each(function(){var t=e(this),n=t.parent();t.append("<span class='k-icon "+(n.hasClass(P)?"k-i-arrow-n k-panelbar-collapse":"k-i-arrow-s k-panelbar-expand")+"'/>")})}function i(t){t=e(t),t.filter(".k-first:not(:first-child)").removeClass(x),t.filter(".k-last:not(:last-child)").removeClass(g),t.filter(":first-child").addClass(x),t.filter(":last-child").addClass(g)}var r=window.kendo,o=r.ui,a=r.keys,s=e.extend,l=e.each,d=r.template,c=o.Widget,u=/^(ul|a|div)$/i,p=".kendoPanelBar",f="img",h="href",g="k-last",m="k-link",v="."+m,_="error",b=".k-item",w=".k-group",y=w+":visible",k="k-image",x="k-first",C="expand",T="select",S="k-content",D="activate",A="collapse",E="mouseenter",F="mouseleave",I="contentLoad",P="k-state-active",B="> .k-panel",z="> .k-content",H="k-state-focused",R="k-state-disabled",M="k-state-selected",L="."+M,O="k-state-highlight",N=b+":not(.k-state-disabled)",V=N+" > .k-link",U=b+".k-state-disabled > .k-link",W="> li > "+L+", .k-panel > li > "+L,j="k-state-default",G="aria-disabled",q="aria-expanded",Y="aria-hidden",Q="aria-selected",$=":visible",K=":empty",X="single",J={content:d("<div role='region' class='k-content'#= contentAttributes(data) #>#= content(item) #</div>"),group:d("<ul role='group' aria-hidden='true' class='#= groupCssClass(group) #'#= groupAttributes(group) #>#= renderItems(data) #</ul>"),itemWrapper:d("<#= tag(item) # class='#= textClass(item, group) #' #= contentUrl(item) ##= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) ##= arrow(data) #</#= tag(item) #>"),item:d("<li role='menuitem' #=aria(item)#class='#= wrapperCssClass(group, item) #'>#= itemWrapper(data) ## if (item.items) { ##= subGroup({ items: item.items, panelBar: panelBar, group: { expanded: item.expanded } }) ## } else if (item.content || item.contentUrl) { ##= renderContent(data) ## } #</li>"),image:d("<img class='k-image' alt='' src='#= imageUrl #' />"),arrow:d("<span class='#= arrowClass(item) #'></span>"),sprite:d("<span class='k-sprite #= spriteCssClass #'></span>"),empty:d("")},Z={aria:function(e){var t="";return(e.items||e.content||e.contentUrl)&&(t+=q+"='"+(e.expanded?"true":"false")+"' "),e.enabled===!1&&(t+=G+"='true'"),t},wrapperCssClass:function(e,t){var n="k-item",i=t.index;return n+=t.enabled===!1?" "+R:t.expanded===!0?" "+P:" k-state-default",0===i&&(n+=" k-first"),i==e.length-1&&(n+=" k-last"),t.cssClass&&(n+=" "+t.cssClass),n},textClass:function(e,t){var n=m;return t.firstLevel&&(n+=" k-header"),n},textAttributes:function(e){return e.url?" href='"+e.url+"'":""},arrowClass:function(e){var t="k-icon";return t+=e.expanded?" k-i-arrow-n k-panelbar-collapse":" k-i-arrow-s k-panelbar-expand"},text:function(e){return e.encoded===!1?e.text:r.htmlEncode(e.text)},tag:function(e){return e.url||e.contentUrl?"a":"span"},groupAttributes:function(e){return e.expanded!==!0?" style='display:none'":""},groupCssClass:function(){return"k-group k-panel"},contentAttributes:function(e){return e.item.expanded!==!0?" style='display:none'":""},content:function(e){return e.content?e.content:e.contentUrl?"":"&nbsp;"},contentUrl:function(e){return e.contentUrl?'href="'+e.contentUrl+'"':""}},et=c.extend({init:function(t,n){var i,o=this;c.fn.init.call(o,t,n),t=o.wrapper=o.element.addClass("k-widget k-reset k-header k-panelbar"),n=o.options,t[0].id&&(o._itemId=t[0].id+"_pb_active"),o._tabindex(),o._initData(n),o._updateClasses(),o._animations(n),t.on("click"+p,V,function(t){o._click(e(t.currentTarget))&&t.preventDefault()}).on(E+p+" "+F+p,V,o._toggleHover).on("click"+p,U,!1).on("keydown"+p,e.proxy(o._keydown,o)).on("focus"+p,function(){var e=o.select();o._current(e[0]?e:o._first())}).on("blur"+p,function(){o._current(null)}).attr("role","menu"),i=t.find("li."+P+" > ."+S),i[0]&&o.expand(i.parent(),!1),r.notify(o)},events:[C,A,T,D,_,I],options:{name:"PanelBar",animation:{expand:{effects:"expand:vertical",duration:200},collapse:{duration:200}},expandMode:"multiple"},destroy:function(){c.fn.destroy.call(this),this.element.off(p),r.destroy(this.element)},_initData:function(e){var t=this;e.dataSource&&(t.element.empty(),t.append(e.dataSource,t.element))},setOptions:function(e){var t=this.options.animation;this._animations(e),e.animation=s(!0,t,e.animation),"dataSource"in e&&this._initData(e),c.fn.setOptions.call(this,e)},expand:function(t,n){var i=this,r={};return n=n!==!1,t=this.element.find(t),t.each(function(o,a){a=e(a);var s=a.find(B).add(a.find(z));if(!a.hasClass(R)&&s.length>0){if(i.options.expandMode==X&&i._collapseAllExpanded(a))return i;t.find("."+O).removeClass(O),a.addClass(O),n||(r=i.options.animation,i.options.animation={expand:{effects:{}},collapse:{hide:!0,effects:{}}}),i._triggerEvent(C,a)||i._toggleItem(a,!1),n||(i.options.animation=r)}}),i},collapse:function(t,n){var i=this,r={};return n=n!==!1,t=i.element.find(t),t.each(function(t,o){o=e(o);var a=o.find(B).add(o.find(z));!o.hasClass(R)&&a.is($)&&(o.removeClass(O),n||(r=i.options.animation,i.options.animation={expand:{effects:{}},collapse:{hide:!0,effects:{}}}),i._triggerEvent(A,o)||i._toggleItem(o,!0),n||(i.options.animation=r))}),i},_toggleDisabled:function(e,t){e=this.element.find(e),e.toggleClass(j,t).toggleClass(R,!t).attr(G,!t)},select:function(n){var i=this;return n===t?i.element.find(W).parent():(i.element.find(n).each(function(){var n=e(this),r=n.children(v);return n.hasClass(R)?i:(i._updateSelected(r),t)}),i)},enable:function(e,t){return this._toggleDisabled(e,t!==!1),this},disable:function(e){return this._toggleDisabled(e,!1),this},append:function(e,t){t=this.element.find(t);var r=this._insert(e,t,t.length?t.find(B):null);return l(r.items,function(){r.group.append(this),i(this)}),n(t),i(r.group.find(".k-first, .k-last")),r.group.height("auto"),this},insertBefore:function(e,t){t=this.element.find(t);var n=this._insert(e,t,t.parent());return l(n.items,function(){t.before(this),i(this)}),i(t),n.group.height("auto"),this},insertAfter:function(e,t){t=this.element.find(t);var n=this._insert(e,t,t.parent());return l(n.items,function(){t.after(this),i(this)}),i(t),n.group.height("auto"),this},remove:function(e){e=this.element.find(e);var t=this,r=e.parentsUntil(t.element,b),o=e.parent("ul");return e.remove(),!o||o.hasClass("k-panelbar")||o.children(b).length||o.remove(),r.length&&(r=r.eq(0),n(r),i(r)),t},reload:function(t){var n=this;t=n.element.find(t),t.each(function(){var t=e(this);n._ajaxRequest(t,t.children("."+S),!t.is($))})},_first:function(){return this.element.children(N).first()},_last:function(){var e=this.element.children(N).last(),t=e.children(y);return t[0]?t.children(N).last():e},_current:function(e){var n=this,i=n._focused,r=n._itemId;return e===t?i:(n.element.removeAttr("aria-activedescendant"),i&&(i[0].id===r&&i.removeAttr("id"),i.children(v).removeClass(H)),e&&(r=e[0].id||r,e.attr("id",r).children(v).addClass(H),n.element.attr("aria-activedescendant",r)),n._focused=e,t)},_keydown:function(e){var t=this,n=e.keyCode,i=t._current();e.target==e.currentTarget&&(n==a.DOWN||n==a.RIGHT?(t._current(t._nextItem(i)),e.preventDefault()):n==a.UP||n==a.LEFT?(t._current(t._prevItem(i)),e.preventDefault()):n==a.ENTER||n==a.SPACEBAR?(t._click(i.children(v)),e.preventDefault()):n==a.HOME?(t._current(t._first()),e.preventDefault()):n==a.END&&(t._current(t._last()),e.preventDefault()))},_nextItem:function(e){if(!e)return this._first();var t=e.children(y),n=e.next();return t[0]&&(n=t.children("."+x)),n[0]||(n=e.parent(y).parent(b).next()),n[0]&&n.is(":visible")||(n=this._first()),n.hasClass(R)&&(n=this._nextItem(n)),n},_prevItem:function(e){if(!e)return this._last();var t,n=e.prev();if(n[0])for(t=n;t[0];)t=t.children(y).children("."+g),t[0]&&(n=t);else n=e.parent(y).parent(b),n[0]||(n=this._last());return n.hasClass(R)&&(n=this._prevItem(n)),n},_insert:function(t,n,i){var r,o,a=this,l=e.isPlainObject(t),d=n&&n[0];return d||(i=a.element),o={firstLevel:i.hasClass("k-panelbar"),expanded:i.parent().hasClass(P),length:i.children().length},d&&!i.length&&(i=e(et.renderGroup({group:o})).appendTo(n)),l||e.isArray(t)?(r=e.map(l?[t]:t,function(t,n){return"string"==typeof t?e(t):e(et.renderItem({group:o,item:s(t,{index:n})}))}),d&&n.attr(q,!1)):(r=e(t),a._updateItemsClasses(r)),{items:r,group:i}},_toggleHover:function(t){var n=e(t.currentTarget);n.parents("li."+R).length||n.toggleClass("k-state-hover",t.type==E)},_updateClasses:function(){var t,r,o=this;t=o.element.find("li > ul").not(function(){return e(this).parentsUntil(".k-panelbar","div").length}).addClass("k-group k-panel").attr("role","group"),t.parent().attr(q,!1).not("."+P).children("ul").attr(Y,!0).hide(),r=o.element.add(t).children(),o._updateItemsClasses(r),n(r),i(r)},_updateItemsClasses:function(e){for(var t=e.length,n=0;t>n;n++)this._updateItemClasses(e[n],n)},_updateItemClasses:function(t,n){var i,o,a=this._selected,s=this.options.contentUrls,l=s&&s[n],d=this.element[0];t=e(t).addClass("k-item").attr("role","menuitem"),r.support.browser.msie&&t.css("list-style-position","inside").css("list-style-position",""),t.children(f).addClass(k),o=t.children("a").addClass(m),o[0]&&(o.attr("href",l),o.children(f).addClass(k)),t.filter(":not([disabled]):not([class*=k-state])").addClass("k-state-default"),t.filter("li[disabled]").addClass("k-state-disabled").attr(G,!0).removeAttr("disabled"),t.children("div").addClass(S).attr("role","region").attr(Y,!0).hide().parent().attr(q,!1),o=t.children(L),o[0]&&(a&&a.removeAttr(Q).children(L).removeClass(M),o.addClass(M),this._selected=t.attr(Q,!0)),t.children(v)[0]||(i="<span class='"+m+"'/>",s&&s[n]&&t[0].parentNode==d&&(i='<a class="k-link k-header" href="'+s[n]+'"/>'),t.contents().filter(function(){return!(this.nodeName.match(u)||3==this.nodeType&&!e.trim(this.nodeValue))}).wrapAll(i)),t.parent(".k-panelbar")[0]&&t.children(v).addClass("k-header")},_click:function(e){var t,n,i,r,o,a,s,l=this,d=l.element;if(!e.parents("li."+R).length&&e.closest(".k-widget")[0]==d[0]){if(o=e.closest(v),a=o.closest(b),l._updateSelected(o),n=a.find(B).add(a.find(z)),i=o.attr(h),r=i&&("#"==i.charAt(i.length-1)||-1!=i.indexOf("#"+l.element[0].id+"-")),t=!(!r&&!n.length),n.data("animating"))return t;if(l._triggerEvent(T,a)&&(t=!0),t!==!1)return l.options.expandMode==X&&l._collapseAllExpanded(a)?t:(n.length&&(s=n.is($),l._triggerEvent(s?A:C,a)||(t=l._toggleItem(a,s))),t)}},_toggleItem:function(e,t){var n,i,r=this,o=e.find(B);return o.length?(this._toggleGroup(o,t),n=!0):(i=e.children("."+S),i.length&&(n=!0,i.is(K)?r._ajaxRequest(e,i,t):r._toggleGroup(i,t))),n},_toggleGroup:function(e,t){var n=this,i=n.options.animation,r=i.expand,o=s({},i.collapse),a=o&&"effects"in o;e.is($)==t&&(e.parent().attr(q,!t).attr(Y,t).toggleClass(j,t).toggleClass(P,!t).find("> .k-link > .k-icon").toggleClass("k-i-arrow-n",!t).toggleClass("k-panelbar-collapse",!t).toggleClass("k-i-arrow-s",t).toggleClass("k-panelbar-expand",t),r=t?s(a?o:s({reverse:!0},r),{hide:!0}):s({complete:function(e){n._triggerEvent(D,e.closest(b))}},r),e.kendoStop(!0,!0).kendoAnimate(r))},_collapseAllExpanded:function(n){var i,r,o=this,a=!1;return n.children(v).hasClass("k-header")?(r=n.find(B).add(n.find(z)),r.is($)&&(a=!0),r.is($)||0===r.length||(i=e(o.element).children(),i.find(B).add(i.find(z)).filter(function(){return e(this).is($)}).each(function(t,n){n=e(n),a=o._triggerEvent(A,n.closest(b)),a||o._toggleGroup(n,!0)})),a):t},_ajaxRequest:function(t,n,i){var r=this,o=t.find(".k-panelbar-collapse, .k-panelbar-expand"),a=t.find(v),s=setTimeout(function(){o.addClass("k-loading")},100),l={},d=a.attr(h);e.ajax({type:"GET",cache:!1,url:d,dataType:"html",data:l,error:function(e,t){o.removeClass("k-loading"),r.trigger(_,{xhr:e,status:t})&&this.complete()},complete:function(){clearTimeout(s),o.removeClass("k-loading")},success:function(e){try{n.html(e)}catch(o){var a=window.console;a&&a.error&&a.error(o.name+": "+o.message+" in "+d),this.error(this.xhr,"error")}r._toggleGroup(n,i),r.trigger(I,{item:t[0],contentElement:n[0]})}})},_triggerEvent:function(e,t){var n=this;return n.trigger(e,{item:t[0]})},_updateSelected:function(e){var t=this,n=t.element,i=e.parent(b),r=t._selected;r&&r.removeAttr(Q),t._selected=i.attr(Q,!0),n.find(W).removeClass(M),n.find("> ."+O+", .k-panel > ."+O).removeClass(O),e.addClass(M),e.parentsUntil(n,b).filter(":has(.k-header)").addClass(O),t._current(i)},_animations:function(e){e&&"animation"in e&&!e.animation&&(e.animation={expand:{effects:{}},collapse:{hide:!0,effects:{}}})}});s(et,{renderItem:function(e){e=s({panelBar:{},group:{}},e);var t=J.empty,n=e.item;return J.item(s(e,{image:n.imageUrl?J.image:t,sprite:n.spriteCssClass?J.sprite:t,itemWrapper:J.itemWrapper,renderContent:et.renderContent,arrow:n.items||n.content||n.contentUrl?J.arrow:t,subGroup:et.renderGroup},Z))},renderGroup:function(e){return J.group(s({renderItems:function(e){for(var t="",n=0,i=e.items,r=i?i.length:0,o=s({length:r},e.group);r>n;n++)t+=et.renderItem(s(e,{group:o,item:s({index:n},i[n])}));return t}},e,Z))},renderContent:function(e){return J.content(s(e,Z))}}),r.ui.plugin(et)}(window.kendo.jQuery),function(e,t){function n(t){t.children(g).addClass(x),t.children("a").addClass(_).children(g).addClass(x),t.filter(":not([disabled]):not([class*=k-state-disabled])").addClass(B),t.filter("li[disabled]").addClass(P).removeAttr("disabled"),t.filter(":not([class*=k-state])").children("a").filter(":focus").parent().addClass(z+" "+M),t.attr("role","tab"),t.filter("."+z).attr("aria-selected",!0),t.each(function(){var t=e(this);t.children("."+_).length||t.contents().filter(function(){return!(this.nodeName.match(f)||3==this.nodeType&&!d(this.nodeValue))}).wrapAll("<a class='"+_+"'/>")})}function i(e){var t=e.children(".k-item");t.filter(".k-first:not(:first-child)").removeClass(C),t.filter(".k-last:not(:last-child)").removeClass(b),t.filter(":first-child").addClass(C),t.filter(":last-child").addClass(b)}var r=window.kendo,o=r.ui,a=r.keys,s=e.map,l=e.each,d=e.trim,c=e.extend,u=r.template,p=o.Widget,f=/^(a|div)$/i,h=".kendoTabStrip",g="img",m="href",v="prev",_="k-link",b="k-last",w="click",y="error",k=":empty",x="k-image",C="k-first",T="select",S="activate",D="k-content",A="contentUrl",E="mouseenter",F="mouseleave",I="contentLoad",P="k-state-disabled",B="k-state-default",z="k-state-active",H="k-state-focused",R="k-state-hover",M="k-tab-on-top",L=".k-item:not(."+P+")",O=".k-tabstrip-items > "+L+":not(."+z+")",N={content:u("<div class='k-content'#= contentAttributes(data) # role='tabpanel'>#= content(item) #</div>"),itemWrapper:u("<#= tag(item) # class='k-link'#= contentUrl(item) ##= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) #</#= tag(item) #>"),item:u("<li class='#= wrapperCssClass(group, item) #' role='tab' #=item.active ? \"aria-selected='true'\" : ''#>#= itemWrapper(data) #</li>"),image:u("<img class='k-image' alt='' src='#= imageUrl #' />"),sprite:u("<span class='k-sprite #= spriteCssClass #'></span>"),empty:u("")},V={wrapperCssClass:function(e,t){var n="k-item",i=t.index;return n+=t.enabled===!1?" k-state-disabled":" k-state-default",0===i&&(n+=" k-first"),i==e.length-1&&(n+=" k-last"),n},textAttributes:function(e){return e.url?" href='"+e.url+"'":""},text:function(e){return e.encoded===!1?e.text:r.htmlEncode(e.text)},tag:function(e){return e.url?"a":"span"},contentAttributes:function(e){return e.active!==!0?" style='display:none' aria-hidden='true' aria-expanded='false'":""},content:function(e){return e.content?e.content:e.contentUrl?"":"&nbsp;"},contentUrl:function(e){return e.contentUrl?r.attr("content-url")+'="'+e.contentUrl+'"':""}},U=p.extend({init:function(t,n){var i,o,a=this;p.fn.init.call(a,t,n),a._animations(a.options),a.wrapper=a.element.is("ul")?a.element.wrapAll("<div />").parent():a.element,n=a.options,a._isRtl=r.support.isRtl(a.wrapper),a._tabindex(),a._updateClasses(),a._dataSource(),n.dataSource&&a.dataSource.fetch(),a.options.contentUrls&&a.wrapper.find(".k-tabstrip-items > .k-item").each(function(t,n){e(n).find(">."+_).data(A,a.options.contentUrls[t])}),a.wrapper.on(E+h+" "+F+h,O,a._toggleHover).on("keydown"+h,e.proxy(a._keydown,a)).on("focus"+h,e.proxy(a._active,a)).on("blur"+h,function(){a._current(null)}),a.wrapper.children(".k-tabstrip-items").on(w+h,".k-state-disabled .k-link",!1).on(w+h," > "+L,function(t){a._click(e(t.currentTarget))&&t.preventDefault()}),i=a.tabGroup.children("li."+z),o=a.contentHolder(i.index()),o.length>0&&0===o[0].childNodes.length&&a.activateTab(i.eq(0)),a.element.attr("role","tablist"),a.element[0].id&&(a._ariaId=a.element[0].id+"_ts_active"),r.notify(a)},_active:function(){var e=this.tabGroup.children().filter("."+z);e=e[0]?e:this._endItem("first"),e[0]&&this._current(e)},_endItem:function(e){return this.tabGroup.children(L)[e]()},_item:function(e,t){var n;return n=t===v?"last":"first",e?(e=e[t](),e[0]||(e=this._endItem(n)),e.hasClass(P)&&(e=this._item(e,t)),e):this._endItem(n)},_current:function(e){var n=this,i=n._focused,r=n._ariaId;return e===t?i:(i&&(i[0].id===r&&i.removeAttr("id"),i.removeClass(H)),e&&(e.hasClass(z)||e.addClass(H),n.element.removeAttr("aria-activedescendant"),r=e[0].id||r,r&&(e.attr("id",r),n.element.attr("aria-activedescendant",r))),n._focused=e,t)},_keydown:function(e){var n,i=this,r=e.keyCode,o=i._current(),s=i._isRtl;if(e.target==e.currentTarget){if(r==a.DOWN||r==a.RIGHT)n=s?v:"next";else if(r==a.UP||r==a.LEFT)n=s?"next":v;else if(r==a.ENTER||r==a.SPACEBAR)i._click(o),e.preventDefault();else{if(r==a.HOME)return i._click(i._endItem("first")),e.preventDefault(),t;if(r==a.END)return i._click(i._endItem("last")),e.preventDefault(),t}n&&(i._click(i._item(o,n)),e.preventDefault())}},_dataSource:function(){var t=this;t.dataSource&&t._refreshHandler?t.dataSource.unbind("change",t._refreshHandler):t._refreshHandler=e.proxy(t.refresh,t),t.dataSource=r.data.DataSource.create(t.options.dataSource).bind("change",t._refreshHandler)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),e.fetch()},_animations:function(e){e&&"animation"in e&&!e.animation&&(e.animation={open:{effects:{}},close:{effects:{}}})},refresh:function(e){var t,n,i,o,a=this,s=a.options,l=r.getter(s.dataTextField),d=r.getter(s.dataContentField),c=r.getter(s.dataContentUrlField),u=r.getter(s.dataImageUrlField),p=r.getter(s.dataUrlField),f=r.getter(s.dataSpriteCssClass),h=[],g=a.dataSource.view();for(e=e||{},i=e.action,i&&(g=e.items),t=0,o=g.length;o>t;t++)n={text:l(g[t])},s.dataContentField&&(n.content=d(g[t])),s.dataContentUrlField&&(n.contentUrl=c(g[t])),s.dataUrlField&&(n.url=p(g[t])),s.dataImageUrlField&&(n.imageUrl=u(g[t])),s.dataSpriteCssClass&&(n.spriteCssClass=f(g[t])),h[t]=n;if("add"==e.action)e.index<a.tabGroup.children().length?a.insertBefore(h,a.tabGroup.children().eq(e.index)):a.append(h);else if("remove"==e.action)for(t=0;t<g.length;t++)a.remove(e.index);else"itemchange"==e.action?(t=a.dataSource.view().indexOf(g[0]),e.field===s.dataTextField&&a.tabGroup.children().eq(t).find(".k-link").text(g[0].get(e.field))):(a.trigger("dataBinding"),a.remove("li"),a.append(h),a.trigger("dataBound"))},value:function(n){var i=this;return n===t?i.select().text():(n!=i.value()&&i.tabGroup.children().each(function(){e.trim(e(this).text())==n&&i.select(this)}),t)},items:function(){return this.tabGroup[0].children},setOptions:function(e){var t=this.options.animation;this._animations(e),e.animation=c(!0,t,e.animation),p.fn.setOptions.call(this,e)},events:[T,S,y,I,"change","dataBinding","dataBound"],options:{name:"TabStrip",dataTextField:"",dataContentField:"",dataImageUrlField:"",dataUrlField:"",dataSpriteCssClass:"",dataContentUrlField:"",animation:{open:{effects:"expand:vertical fadeIn",duration:200},close:{duration:200}},collapsible:!1},destroy:function(){var e=this;p.fn.destroy.call(e),e._refreshHandler&&e.dataSource.unbind("change",e._refreshHandler),e.wrapper.off(h),r.destroy(e.wrapper)},select:function(t){var n=this;return 0===arguments.length?n.tabGroup.children("li."+z):(isNaN(t)||(t=n.tabGroup.children().get(t)),t=n.tabGroup.find(t),e(t).each(function(t,i){i=e(i),i.hasClass(z)||n.trigger(T,{item:i[0],contentElement:n.contentHolder(i.index())[0]})||n.activateTab(i)}),n)},enable:function(e,t){return this._toggleDisabled(e,t!==!1),this},disable:function(e){return this._toggleDisabled(e,!1),this},reload:function(t){t=this.tabGroup.find(t);var n=this;return t.each(function(){var t=e(this),i=t.find("."+_).data(A),r=n.contentHolder(t.index());i&&n.ajaxRequest(t,r,null,i)}),n},append:function(e){var t=this,n=t._create(e);return l(n.tabs,function(e){t.tabGroup.append(this),t.wrapper.append(n.contents[e])}),i(t.tabGroup),t._updateContentElements(),t},insertBefore:function(t,n){var r=this,o=r._create(t),a=e(r.contentElement(n.index()));return l(o.tabs,function(e){n.before(this),a.before(o.contents[e])}),i(r.tabGroup),r._updateContentElements(),r},insertAfter:function(t,n){var r=this,o=r._create(t),a=e(r.contentElement(n.index()));return l(o.tabs,function(e){n.after(this),a.after(o.contents[e])}),i(r.tabGroup),r._updateContentElements(),r},remove:function(t){var n=this,i=typeof t,r=e();return"string"===i?t=n.tabGroup.find(t):"number"===i&&(t=n.tabGroup.children().eq(t)),t.each(function(){r.push(n.contentElement(e(this).index()))}),t.remove(),r.remove(),n._updateContentElements(),n},_create:function(i){var r,o,a=e.isPlainObject(i),l=this;return a||e.isArray(i)?(i=e.isArray(i)?i:[i],r=s(i,function(t,n){return e(U.renderItem({group:l.tabGroup,item:c(t,{index:n})}))}),o=s(i,function(n,i){return n.content||n.contentUrl?e(U.renderContent({item:c(n,{index:i})})):t})):(r=e(i),o=e("<div class='"+D+"'/>"),n(r)),{tabs:r,contents:o}},_toggleDisabled:function(t,n){t=this.tabGroup.find(t),t.each(function(){e(this).toggleClass(B,n).toggleClass(P,!n)})},_updateClasses:function(){var r,o,a,s=this;s.wrapper.addClass("k-widget k-header k-tabstrip"),s.tabGroup=s.wrapper.children("ul").addClass("k-tabstrip-items k-reset"),s.tabGroup[0]||(s.tabGroup=e("<ul class='k-tabstrip-items k-reset'/>").appendTo(s.wrapper)),r=s.tabGroup.find("li").addClass("k-item"),r.length&&(o=r.filter("."+z).index(),a=o>=0?o:t,s.tabGroup.contents().filter(function(){return 3==this.nodeType&&!d(this.nodeValue)}).remove()),o>=0&&r.eq(o).addClass(M),s.contentElements=s.wrapper.children("div"),s.contentElements.addClass(D).eq(a).addClass(z).css({display:"block"}),r.length&&(n(r),i(s.tabGroup),s._updateContentElements())},_updateContentElements:function(){var t=this,n=t.options.contentUrls||[],i=t.element.attr("id"),o=t.wrapper.children("div");t.tabGroup.find(".k-item").each(function(r){var a=o.eq(r),s=i+"-"+(r+1);this.setAttribute("aria-controls",s),!a.length&&n[r]?e("<div id='"+s+"' class='"+D+"'/>").appendTo(t.wrapper):a.attr("id",s),a.attr("role","tabpanel"),a.filter(":not(."+z+")").attr("aria-hidden",!0).attr("aria-expanded",!1),a.filter("."+z).attr("aria-expanded",!0)}),t.contentElements=t.contentAnimators=t.wrapper.children("div"),r.kineticScrollNeeded&&r.mobile.ui.Scroller&&(r.touchScroller(t.contentElements),t.contentElements=t.contentElements.children(".km-scroll-container"))},_toggleHover:function(t){e(t.currentTarget).toggleClass(R,t.type==E)},_click:function(e){var t,n,i=this,r=e.find("."+_),o=r.attr(m),a=i.options.collapsible,s=i.contentHolder(e.index());if(e.closest(".k-widget")[0]==i.wrapper[0]){if(e.is("."+P+(a?"":",."+z)))return!0;if(n=r.data(A)||o&&("#"==o.charAt(o.length-1)||-1!=o.indexOf("#"+i.element[0].id+"-")),t=!o||n,i.tabGroup.children("[data-animating]").length)return t;if(i.trigger(T,{item:e[0],contentElement:s[0]}))return!0;if(t!==!1)return a&&e.is("."+z)?(i.deactivateTab(e),!0):(i.activateTab(e)&&(t=!0),t)}},deactivateTab:function(e){var t=this,n=t.options.animation,i=n.open,o=c({},n.close),a=o&&"effects"in o;e=t.tabGroup.find(e),o=c(a?o:c({reverse:!0},i),{hide:!0}),r.size(i.effects)?(e.kendoAddClass(B,{duration:i.duration}),e.kendoRemoveClass(z,{duration:i.duration})):(e.addClass(B),e.removeClass(z)),e.removeAttr("aria-selected"),t.contentAnimators.filter("."+z).kendoStop(!0,!0).kendoAnimate(o).removeClass(z).attr("aria-hidden",!0)},activateTab:function(e){var t,n,i,o,a,s,l,d,u,p,f,h,g,m,v;return e=this.tabGroup.find(e),t=this,n=t.options.animation,i=n.open,o=c({},n.close),a=o&&"effects"in o,s=e.parent().children(),l=s.filter("."+z),d=s.index(e),o=c(a?o:c({reverse:!0},i),{hide:!0}),r.size(i.effects)?(l.kendoRemoveClass(z,{duration:o.duration}),e.kendoRemoveClass(R,{duration:o.duration})):(l.removeClass(z),e.removeClass(R)),u=t.contentAnimators,e.data("in-request")&&(t.xhr.abort(),e.removeAttr("data-in-request")),0===u.length?(l.removeClass(M),e.addClass(M).css("z-index"),e.addClass(z),t._current(e),t.trigger("change"),!1):(p=u.filter("."+z),f=t.contentHolder(d),h=f.closest(".k-content"),0===f.length?(p.removeClass(z).attr("aria-hidden",!0).kendoStop(!0,!0).kendoAnimate(o),!1):(e.attr("data-animating",!0),g=(e.children("."+_).data(A)||!1)&&f.is(k),m=function(){l.removeClass(M),e.addClass(M).css("z-index"),r.size(i.effects)?(l.kendoAddClass(B,{duration:i.duration}),e.kendoAddClass(z,{duration:i.duration})):(l.addClass(B),e.addClass(z)),l.removeAttr("aria-selected"),e.attr("aria-selected",!0),t._current(e),h.addClass(z).removeAttr("aria-hidden").kendoStop(!0,!0).attr("aria-expanded",!0).kendoAnimate(c({init:function(){t.trigger(S,{item:e[0],contentElement:f[0]})
}},i,{complete:function(){e.removeAttr("data-animating")}}))},v=function(){g?(e.removeAttr("data-animating"),t.ajaxRequest(e,f,function(){e.attr("data-animating",!0),m(),t.trigger("change")})):(m(),t.trigger("change"))},p.removeClass(z),p.attr("aria-hidden",!0),p.attr("aria-expanded",!1),p.length?p.kendoStop(!0,!0).kendoAnimate(c({complete:v},o)):v(),!0))},contentElement:function(e){var n,i,o,a;if(isNaN(e-0))return t;if(n=this.contentElements&&this.contentElements[0]&&!r.kineticScrollNeeded?this.contentElements:this.contentAnimators,i=RegExp("-"+(e+1)+"$"),n)for(o=0,a=n.length;a>o;o++)if(i.test(n.closest(".k-content")[o].id))return n[o];return t},contentHolder:function(t){var n=e(this.contentElement(t)),i=n.children(".km-scroll-container");return r.support.touch&&i[0]?i:n},ajaxRequest:function(t,n,i,r){if(t=this.tabGroup.find(t),!t.find(".k-loading").length){var o=this,a=t.find("."+_),s={},l=null,d=setTimeout(function(){l=e("<span class='k-icon k-loading'/>").prependTo(a)},100);r=r||a.data(A)||a.attr(m),t.attr("data-in-request",!0),o.xhr=e.ajax({type:"GET",cache:!1,url:r,dataType:"html",data:s,error:function(e,t){o.trigger("error",{xhr:e,status:t})&&this.complete()},complete:function(){t.removeAttr("data-in-request"),clearTimeout(d),null!==l&&l.remove()},success:function(e){try{n.html(e)}catch(a){var s=window.console;s&&s.error&&s.error(a.name+": "+a.message+" in "+r),this.error(this.xhr,"error")}i&&i.call(o,n),o.trigger(I,{item:t[0],contentElement:n[0]})}})}}});c(U,{renderItem:function(e){e=c({tabStrip:{},group:{}},e);var t=N.empty,n=e.item;return N.item(c(e,{image:n.imageUrl?N.image:t,sprite:n.spriteCssClass?N.sprite:t,itemWrapper:N.itemWrapper},V))},renderContent:function(e){return N.content(c(e,V))}}),r.ui.plugin(U)}(window.kendo.jQuery),function(e,t){function n(e,t,n){var i,r=e.getTimezoneOffset();e.setTime(e.getTime()+t),n||(i=e.getTimezoneOffset()-r,e.setTime(e.getTime()+i*P))}function i(){var e=new q,t=new q(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0),n=new q(e.getFullYear(),e.getMonth(),e.getDate(),12,0,0);return-1*(t.getTimezoneOffset()-n.getTimezoneOffset())}function r(e){return 60*e.getHours()*P+e.getMinutes()*P+1e3*e.getSeconds()+e.getMilliseconds()}function o(e,t,n){var i,o=r(t),a=r(n);return e&&o!=a?(i=r(e),o>i&&(i+=B),o>a&&(a+=B),i>=o&&a>=i):!0}function a(e){var t=e.parseFormats;e.format=f(e.format||c.getCulture(e.culture).calendars.standard.patterns.t),t=W(t)?t:[t],t.splice(0,0,e.format),e.parseFormats=t}function s(e){e.preventDefault()}var l,d,c=window.kendo,u=c.keys,p=c._activeElement,f=c._extractFormat,h=c.support,g=h.browser,m=c.ui,v=m.Widget,_="open",b="close",w="change",y=".kendoTimePicker",k="click"+y,x="k-state-default",C="disabled",T="readonly",S="li",D="<span/>",A="k-state-focused",E="k-state-hover",F="mouseenter"+y+" mouseleave"+y,I="mousedown"+y,P=6e4,B=864e5,z="k-state-selected",H="k-state-disabled",R="aria-selected",M="aria-expanded",L="aria-hidden",O="aria-disabled",N="aria-readonly",V="aria-activedescendant",U="id",W=e.isArray,j=e.extend,G=e.proxy,q=Date,Y=new q;Y=new q(Y.getFullYear(),Y.getMonth(),Y.getDate(),0,0,0),l=function(t){var n=this,i=t.id;n.options=t,n.ul=e('<ul tabindex="-1" role="listbox" aria-hidden="true" unselectable="on" class="k-list k-reset"/>').css({overflow:h.kineticScrollNeeded?"":"auto"}).on(k,S,G(n._click,n)).on("mouseenter"+y,S,function(){e(this).addClass(E)}).on("mouseleave"+y,S,function(){e(this).removeClass(E)}),n.list=e("<div class='k-list-container'/>").append(n.ul).on(I,s),i&&(n._timeViewID=i+"_timeview",n._optionID=i+"_option_selected",n.ul.attr(U,n._timeViewID)),n._popup(),n.template=c.template('<li tabindex="-1" role="option" class="k-item" unselectable="on">#=data#</li>',{useWithBlock:!1})},l.prototype={current:function(n){var i=this,r=i.options.active;return n===t?i._current:(i._current&&i._current.removeClass(z).removeAttr(R).removeAttr(U),n&&(n=e(n).addClass(z).attr(U,i._optionID).attr(R,!0),i.scroll(n[0])),i._current=n,r&&r(n),t)},close:function(){this.popup.close()},destroy:function(){var e=this;e.ul.off(y),e.list.off(y),e.popup.destroy()},open:function(){var e=this;e.ul[0].firstChild||e.bind(),e.popup.open(),e._current&&e.scroll(e._current[0])},dataBind:function(e){for(var t,n=this,i=n.options,r=i.format,a=c.toString,s=n.template,l=e.length,d=0,u="";l>d;d++)t=e[d],o(t,i.min,i.max)&&(u+=s(a(t,r,i.culture)));n._html(u,l)},refresh:function(){var e,t,o,a=this,s=a.options,l=s.format,d=i(),u=0>d,p=s.min,f=s.max,h=r(p),g=r(f),m=s.interval*P,v=c.toString,_=a.template,b=new q(+p),w=b.getDate(),y=0,k="";for(o=u?(B+d*P)/m:B/m,h!=g&&(h>g&&(g+=B),o=(g-h)/m+1),t=parseInt(o,10);o>y;y++)y&&n(b,m,u),g&&t==y&&(e=r(b),w<b.getDate()&&(e+=B),e>g&&(b=new q(+f))),k+=_(v(b,l,s.culture));a._html(k,o)},bind:function(){var e=this,t=e.options.dates;t&&t[0]?e.dataBind(t):e.refresh()},_html:function(e,t){var n=this;n.ul[0].innerHTML=e,n._height(t),n.current(null),n.select(n._value)},scroll:function(e){if(e){var t=this.ul[0],n=e.offsetTop,i=e.offsetHeight,r=t.scrollTop,o=t.clientHeight,a=n+i;t.scrollTop=r>n?n:a>r+o?a-o:r}},select:function(t){var n=this,i=n.options,r=n._current;t instanceof Date&&(t=c.toString(t,i.format,i.culture)),"string"==typeof t&&(r&&r.text()===t?t=r:(t=e.grep(n.ul[0].childNodes,function(e){return(e.textContent||e.innerText)==t}),t=t[0]?t:null)),n.current(t)},toggle:function(){var e=this;e.popup.visible()?e.close():e.open()},value:function(e){var t=this;t._value=e,t.ul[0].firstChild&&t.select(e)},_click:function(t){var n=this,i=e(t.currentTarget);t.isDefaultPrevented()||(n.select(i),n.options.change(i.text(),!0),n.close())},_height:function(e){if(e){var t=this,n=t.list,i=n.parent(".k-animation-container"),r=t.options.height;n.add(i).show().height(t.ul[0].scrollHeight>r?r:"auto").hide()}},_parse:function(e){var t=this,n=t.options,i=t._value||Y;return e instanceof q?e:(e=c.parseDate(e,n.parseFormats,n.culture),e&&(e=new q(i.getFullYear(),i.getMonth(),i.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())),e)},_adjustListWidth:function(){var e,t,n=this.list,i=n[0].style.width,r=this.options.anchor;(n.data("width")||!i)&&(e=window.getComputedStyle?window.getComputedStyle(r[0],null):0,t=e?parseFloat(e.width):r.outerWidth(),e&&(g.mozilla||g.msie)&&(t+=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth)),i=t-(n.outerWidth()-n.width()),n.css({fontFamily:r.css("font-family"),width:i}).data("width",i))},_popup:function(){var e=this,t=e.list,n=e.options,i=n.anchor;e.popup=new m.Popup(t,j(n.popup,{anchor:i,open:n.open,close:n.close,animation:n.animation,isRtl:h.isRtl(n.anchor)})),c.touchScroller(e.popup.element)},move:function(e){var n=this,i=e.keyCode,r=n.ul[0],o=n._current,a=i===u.DOWN;if(i===u.UP||a){if(e.altKey)return n.toggle(a),t;o=a?o?o[0].nextSibling:r.firstChild:o?o[0].previousSibling:r.lastChild,o&&n.select(o),n.options.change(n._current.text()),e.preventDefault()}else(i===u.ENTER||i===u.TAB||i===u.ESC)&&(e.preventDefault(),o&&n.options.change(o.text(),!0),n.close())}},l.getMilliseconds=r,c.TimeView=l,d=v.extend({init:function(e,t){var n,i,r,o=this;v.fn.init.call(o,e,t),e=o.element,t=o.options,a(t),o._wrapper(),o.timeView=i=new l(j({},t,{id:e.attr(U),anchor:o.wrapper,format:t.format,change:function(t,n){n?o._change(t):e.val(t)},open:function(t){o.timeView._adjustListWidth(),o.trigger(_)?t.preventDefault():(e.attr(M,!0),n.attr(L,!1))},close:function(t){o.trigger(b)?t.preventDefault():(e.attr(M,!1),n.attr(L,!0))},active:function(t){e.removeAttr(V),t&&e.attr(V,i._optionID)}})),n=i.ul,o._icon(),o._reset(),e[0].type="text",e.addClass("k-input").attr({role:"textbox","aria-haspopup":!0,"aria-expanded":!1,"aria-owns":i._timeViewID}),r=e.is("[disabled]"),r?o.enable(!1):o.readonly(e.is("[readonly]")),o._old=o._update(t.value||o.element.val()),o._oldText=e.val(),c.notify(o)},options:{name:"TimePicker",min:Y,max:Y,format:"",dates:[],parseFormats:[],value:null,interval:30,height:200,animation:{}},events:[_,b,w],setOptions:function(e){var t=this,n=t.timeView,i=n.options;v.fn.setOptions.call(t,e),a(t.options),n.options=j(i,t.options,{active:i.active,change:i.change,close:i.close,open:i.open}),n.ul[0].innerHTML=""},dataBind:function(e){W(e)&&this.timeView.dataBind(e)},_editable:function(e){var t=this,n=e.disable,i=e.readonly,r=t._arrow.off(y),o=t.element.off(y),a=t._inputWrapper.off(y);i||n?(a.addClass(n?H:x).removeClass(n?x:H),o.attr(C,n).attr(T,i).attr(O,n).attr(N,i)):(a.addClass(x).removeClass(H).on(F,t._toggleHover),o.removeAttr(C).removeAttr(T).attr(O,!1).attr(N,!1).on("keydown"+y,G(t._keydown,t)).on("blur"+y,G(t._blur,t)).on("focus"+y,function(){t._inputWrapper.addClass(A)}),r.on(k,G(t._click,t)).on(I,s))},readonly:function(e){this._editable({readonly:e===t?!0:e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t?!0:e)})},destroy:function(){var e=this;v.fn.destroy.call(e),e.timeView.destroy(),e.element.off(y),e._arrow.off(y),e._inputWrapper.off(y),e._form&&e._form.off("reset",e._resetHandler)},close:function(){this.timeView.close()},open:function(){this.timeView.open()},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},value:function(e){var n=this;return e===t?n._value:(n._old=n._update(e),null===n._old&&n.element.val(""),n._oldText=n.element.val(),t)},_blur:function(){var e=this,t=e.element.val();e.close(),t!==e._oldText&&e._change(t),e._inputWrapper.removeClass(A)},_click:function(){var e=this,t=e.element;e.timeView.toggle(),h.touch||t[0]===p()||t.focus()},_change:function(e){var t=this;e=t._update(e),+t._old!=+e&&(t._old=e,t._oldText=t.element.val(),t.trigger(w),t.element.trigger(w))},_icon:function(){var t,n=this,i=n.element;t=i.next("span.k-select"),t[0]||(t=e('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-clock">select</span></span>').insertAfter(i)),n._arrow=t.attr({role:"button","aria-controls":n.timeView._timeViewID})},_keydown:function(e){var t=this,n=e.keyCode,i=t.timeView,r=t.element.val();i.popup.visible()||e.altKey?i.move(e):n===u.ENTER&&r!==t._oldText&&t._change(r)},_option:function(e,n){var i=this,r=i.options;return n===t?r[e]:(n=i.timeView._parse(n),n&&(n=new q(+n),r[e]=n,i.timeView.options[e]=n,i.timeView.bind()),t)},_toggleHover:function(t){e(t.currentTarget).toggleClass(E,"mouseenter"===t.type)},_update:function(e){var t=this,n=t.options,i=t.timeView,r=i._parse(e);return o(r,n.min,n.max)||(r=null),t._value=r,t.element.val(r?c.toString(r,n.format,n.culture):e),i.value(r),r},_wrapper:function(){var t,n=this,i=n.element;t=i.parents(".k-timepicker"),t[0]||(t=i.wrap(D).parent().addClass("k-picker-wrap k-state-default"),t=t.wrap(D).parent()),t[0].style.cssText=i[0].style.cssText,n.wrapper=t.addClass("k-widget k-timepicker k-header").addClass(i[0].className),i.css({width:"100%",height:i[0].style.height}),n._inputWrapper=e(t[0].firstChild)},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){t.value(n[0].defaultValue)},t._form=r.on("reset",t._resetHandler))}}),m.plugin(d)}(window.kendo.jQuery),function(e,t){function n(e){e.preventDefault()}function i(t){var n,i=r.getCulture(t.culture).calendars.standard.patterns;t.format=l(t.format||i.g),t.timeFormat=n=l(t.timeFormat||i.t),r.DateView.normalize(t),-1===e.inArray(n,t.parseFormats)&&t.parseFormats.splice(1,0,n)}var r=window.kendo,o=r.TimeView,a=r.parseDate,s=r._activeElement,l=r._extractFormat,d=r.calendar,c=d.isInRange,u=d.restrictValue,p=d.isEqualDatePart,f=o.getMilliseconds,h=r.ui,g=h.Widget,m="open",v="close",_="change",b=".kendoDateTimePicker",w="click"+b,y="disabled",k="readonly",x="k-state-default",C="k-state-focused",T="k-state-hover",S="k-state-disabled",D="mouseenter"+b+" mouseleave"+b,A="mousedown"+b,E="month",F="<span/>",I="aria-activedescendant",P="aria-expanded",B="aria-hidden",z="aria-owns",H="aria-disabled",R="aria-readonly",M=Date,L=new M(1900,0,1),O=new M(2099,11,31),N={view:"date"},V={view:"time"},U=e.extend,W=g.extend({init:function(e,t){var n,o=this;g.fn.init.call(o,e,t),e=o.element,t=o.options,i(t),o._wrapper(),o._views(),o._icons(),o._reset(),o._template(),e[0].type="text",e.addClass("k-input").attr({role:"textbox","aria-haspopup":!0,"aria-expanded":!1}),o._midnight=0===f(t.min)+f(t.max),n=e.is("[disabled]"),n?o.enable(!1):o.readonly(e.is("[readonly]")),o._old=o._update(t.value||o.element.val()),o._oldText=e.val(),r.notify(o)},options:{name:"DateTimePicker",value:null,format:"",timeFormat:"",culture:"",parseFormats:[],dates:[],min:new M(L),max:new M(O),interval:30,height:200,footer:"",start:E,depth:E,animation:{},month:{},ARIATemplate:'Current focused date is #=kendo.toString(data.current, "G")#'},events:[m,v,_],setOptions:function(e){var t,n,r,o=this,a=o.dateView.options,s=o.timeView.options;g.fn.setOptions.call(o,e),i(o.options),e=o.options,t=e.min,n=e.max,r=e.value||o._value||o.dateView._current,t&&!p(t,r)&&(t=new M(L)),n&&!p(n,r)&&(n=new M(O)),U(a,e,{change:a.change,close:a.close,open:a.open}),U(s,e,{format:e.timeFormat,active:s.active,change:s.change,close:s.close,open:s.open,min:t,max:n}),o.timeView.ul[0].innerHTML=""},_editable:function(t){var i=this,o=i.element.off(b),a=i._dateIcon.off(b),l=i._timeIcon.off(b),d=i._inputWrapper.off(b),c=t.readonly,u=t.disable;c||u?(d.addClass(u?S:x).removeClass(u?x:S),o.attr(y,u).attr(k,c).attr(H,u).attr(R,c)):(d.addClass(x).removeClass(S).on(D,i._toggleHover),o.removeAttr(y).removeAttr(k).attr(H,!1).attr(R,!1).on("keydown"+b,e.proxy(i._keydown,i)).on("focus"+b,function(){i._inputWrapper.addClass(C)}).on("blur"+b,function(){i._inputWrapper.removeClass(C),o.val()!==i._oldText&&i._change(o.val()),i.close("date"),i.close("time")}),a.on(A,n).on(w,function(){i.toggle("date"),r.support.touch||o[0]===s()||o.focus()}),l.on(A,n).on(w,function(){i.toggle("time"),r.support.touch||o[0]===s()||o.focus()}))},readonly:function(e){this._editable({readonly:e===t?!0:e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t?!0:e)})},destroy:function(){var e=this;g.fn.destroy.call(e),e.dateView.destroy(),e.timeView.destroy(),e.element.off(b),e._dateIcon.off(b),e._timeIcon.off(b),e._inputWrapper.off(b),e._form&&e._form.off("reset",e._resetHandler)},close:function(e){"time"!==e&&(e="date"),this[e+"View"].close()},open:function(e){"time"!==e&&(e="date"),this[e+"View"].open()},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},toggle:function(e){var t="timeView";"time"!==e?e="date":t="dateView",this[e+"View"].toggle(),this[t].close()},value:function(e){var n=this;return e===t?n._value:(n._old=n._update(e),null===n._old&&n.element.val(""),n._oldText=n.element.val(),t)},_change:function(e){var t=this;e=t._update(e),+t._old!=+e&&(t._old=e,t._oldText=t.element.val(),t.trigger(_),t.element.trigger(_))},_option:function(e,n){var i=this,r=i.options,o=i.timeView,s=o.options,l=i._value||i._old;if(n===t)return r[e];if(n=a(n,r.parseFormats,r.culture)){if(r[e]=new M(+n),i.dateView[e](n),i._midnight=0===f(r.min)+f(r.max),l&&p(n,l)){if(i._midnight&&"max"==e)return s[e]=O,o.dataBind([O]),t;s[e]=n}else s.max=O,s.min=L;o.bind()}},_toggleHover:function(t){e(t.currentTarget).toggleClass(T,"mouseenter"===t.type)},_update:function(t){var n,i,o,s,l,d=this,f=d.options,h=f.min,g=f.max,m=f.dates,v=d.timeView,_=a(t,f.parseFormats,f.culture);return+_===+d._value?(l=r.toString(_,f.format,f.culture),l!==t&&d.element.val(null===_?t:l),_):(null!==_&&p(_,h)?_=u(_,h,g):c(_,h,g)||(_=null),d._value=_,v.value(_),d.dateView.value(_),_&&(o=d._old,i=v.options,m[0]&&(m=e.grep(m,function(e){return p(_,e)}),m[0]&&(v.dataBind(m),s=!0)),s||(p(_,h)&&(i.min=h,i.max=O,n=!0),p(_,g)&&(d._midnight?(v.dataBind([O]),s=!0):(i.max=g,n||(i.min=L),n=!0))),!s&&(!o&&n||o&&!p(o,_))&&(n||(i.max=O,i.min=L),v.bind())),d.element.val(_?r.toString(_,f.format,f.culture):t),d._updateARIA(_),_)},_keydown:function(e){var t=this,n=t.dateView,i=t.timeView,o=t.element.val(),a=n.popup.visible();e.altKey&&e.keyCode===r.keys.DOWN?t.toggle(a?"time":"date"):a?(n.move(e),t._updateARIA(n._current)):i.popup.visible()?i.move(e):e.keyCode===r.keys.ENTER&&o!==t._oldText&&t._change(o)},_views:function(){var e,t,n,i,s,l=this,d=l.element,u=l.options,p=d.attr("id");l.dateView=e=new r.DateView(U({},u,{id:p,anchor:l.wrapper,change:function(){var t,n=e.calendar.value(),i=+n,r=+u.min,o=+u.max;(i===r||i===o)&&(t=new M(+l._value),t.setFullYear(n.getFullYear()),t.setMonth(n.getMonth()),t.setDate(n.getDate()),c(t,r,o)&&(n=t)),l._change(n),l.close("date")},close:function(e){l.trigger(v,N)?e.preventDefault():(d.attr(P,!1),n.attr(B,!0),t.popup.visible()||d.removeAttr(z))},open:function(t){l.trigger(m,N)?t.preventDefault():(l.element.val()!==l._oldText&&(s=a(d.val(),u.parseFormats,u.culture),s?(l.dateView._current=s,l.dateView.calendar._focus(s)):l.dateView.value(s)),n.attr(B,!1),d.attr(P,!0).attr(z,e._dateViewID))}})),n=e.div,l.timeView=t=new o({id:p,value:u.value,anchor:l.wrapper,animation:u.animation,format:u.timeFormat,culture:u.culture,height:u.height,interval:u.interval,min:new M(L),max:new M(O),parseFormats:u.parseFormats,change:function(n,i){n=t._parse(n),n<u.min?(n=new M(+u.min),t.options.min=n):n>u.max&&(n=new M(+u.max),t.options.max=n),i?(l._timeSelected=!0,l._change(n)):(d.val(r.toString(n,u.format,u.culture)),e.value(n),l._updateARIA(n))},close:function(t){l.trigger(v,V)?t.preventDefault():(i.attr(B,!0),d.attr(P,!1),e.popup.visible()||d.removeAttr(z))},open:function(e){t._adjustListWidth(),l.trigger(m,V)?e.preventDefault():(i.attr(B,!1),d.attr(P,!0).attr(z,t._timeViewID))},active:function(e){d.removeAttr(I),e&&d.attr(I,t._optionID)}}),i=t.ul},_icons:function(){var t,n=this,i=n.element;t=i.next("span.k-select"),t[0]||(t=e('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-calendar">select</span><span unselectable="on" class="k-icon k-i-clock">select</span></span>').insertAfter(i)),t=t.children(),n._dateIcon=t.eq(0).attr({role:"button","aria-controls":n.dateView._dateViewID}),n._timeIcon=t.eq(1).attr({role:"button","aria-controls":n.timeView._timeViewID})},_wrapper:function(){var t,n=this,i=n.element;t=i.parents(".k-datetimepicker"),t[0]||(t=i.wrap(F).parent().addClass("k-picker-wrap k-state-default"),t=t.wrap(F).parent()),t[0].style.cssText=i[0].style.cssText,i.css({width:"100%",height:i[0].style.height}),n.wrapper=t.addClass("k-widget k-datetimepicker k-header").addClass(i[0].className),n._inputWrapper=e(t[0].firstChild)},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){t.value(n[0].defaultValue)},t._form=r.on("reset",t._resetHandler))},_template:function(){this._ariaTemplate=r.template(this.options.ARIATemplate)},_updateARIA:function(e){this.element.attr("aria-label",this._ariaTemplate({current:e}))}});h.plugin(W)}(window.kendo.jQuery),function(e,t){function n(e){return function(t){var n=t.children(".k-animation-container");return n.length||(n=t),n.children(e)}}function i(e){return p.template(e,{useWithBlock:!1})}function r(e){return e.children("div").find(".k-checkbox:first :checkbox")}function o(e){return function(t,n){n=n.closest(V);var i,r=n.parent();return r.parent().is("li")&&(i=r.parent()),this._dataSourceMove(t,r,i,function(t,i){return this._insert(t.data(),i,n.index()+e)})}}function a(t){var n,i,r=t.children("div"),o=t.children("ul"),a=r.children(".k-icon"),s=t.children(":checkbox"),l=r.children(".k-in");if(!t.hasClass("k-treeview")&&(r.length||(r=e("<div />").prependTo(t)),!a.length&&o.length?a=e("<span class='k-icon' />").prependTo(r):o.length&&o.children().length||(a.remove(),o.remove()),s.length&&e("<span class='k-checkbox' />").appendTo(r).append(s),!l.length&&r.length))for(l=e("<span class='k-in' />").appendTo(r)[0],n=r[0].nextSibling,l=r.find(".k-in")[0];n&&"ul"!=n.nodeName.toLowerCase();)i=n,n=n.nextSibling,3==i.nodeType&&(i.nodeValue=e.trim(i.nodeValue)),l.appendChild(i)}function s(e){var t=this;t.treeview=e,t.hovered=e.element,t._draggable=new f.Draggable(e.element,{filter:"div:not(.k-state-disabled) .k-in",hint:function(t){return e.templates.dragClue({item:e.dataItem(t),treeview:e.options})},cursorOffset:{left:10,top:p.support.touch||p.support.msPointers||p.support.pointers?-40/p.support.zoomLevel():10},dragstart:w(t.dragstart,t),dragcancel:w(t.dragcancel,t),drag:w(t.drag,t),dragend:w(t.dragend,t)})}var l,d,c,u,p=window.kendo,f=p.ui,h=p.data,g=e.extend,m=p.template,v=e.isArray,_=f.Widget,b=h.HierarchicalDataSource,w=e.proxy,y=p.keys,k=".kendoTreeView",x="select",C="navigate",T="expand",S="change",D="error",A="checked",E="collapse",F="dragstart",I="drag",P="drop",B="dragend",z="dataBound",H="click",R="visibility",M="undefined",L="k-state-hover",O="k-treeview",N=":visible",V=".k-item",U="string",W="aria-selected",j="aria-disabled",G={text:"dataTextField",url:"dataUrlField",spriteCssClass:"dataSpriteCssClassField",imageUrl:"dataImageUrlField"},q=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&typeof e.nodeName===U};d=n(".k-group"),c=n(".k-group,.k-content"),u=function(e){return e.children("div").children(".k-icon")},l=_.extend({init:function(e,t){var n,i,r=this,o=!1,a=t&&!!t.dataSource;v(t)&&(n=!0,t={dataSource:t}),t&&typeof t.loadOnDemand==M&&v(t.dataSource)&&(t.loadOnDemand=!1),_.prototype.init.call(r,e,t),e=r.element,t=r.options,i=e.is("ul")&&e||e.hasClass(O)&&e.children("ul"),o=!a&&i.length,o&&(t.dataSource.list=i),r._animation(),r._accessors(),r._templates(),e.hasClass(O)?(r.wrapper=e,r.root=e.children("ul").eq(0)):(r._wrapper(),i&&(r.root=e,r._group(r.wrapper))),r._tabindex(),r.wrapper.filter("[role=tree]").length||r.wrapper.attr("role","tree"),r._dataSource(o),r._attachEvents(),r._dragging(),o?r._attachUids():t.autoBind&&(r._progress(!0),r.dataSource.fetch()),t.checkboxes&&t.checkboxes.checkChildren&&r.updateIndeterminate(),r.element[0].id&&(r._ariaId=p.format("{0}_tv_active",r.element[0].id))},_attachEvents:function(){var t=this,n=".k-in:not(.k-state-selected,.k-state-disabled)",i="mouseenter";t.wrapper.on(i+k,".k-in.k-state-selected",function(e){e.preventDefault()}).on(i+k,n,function(){e(this).addClass(L)}).on("mouseleave"+k,n,function(){e(this).removeClass(L)}).on(H+k,n,w(t._click,t)).on("dblclick"+k,".k-in:not(.k-state-disabled)",w(t._toggleButtonClick,t)).on(H+k,".k-plus,.k-minus",w(t._toggleButtonClick,t)).on("keydown"+k,w(t._keydown,t)).on("focus"+k,w(t._focus,t)).on("blur"+k,w(t._blur,t)).on("mousedown"+k,".k-in,.k-checkbox :checkbox,.k-plus,.k-minus",w(t._mousedown,t)).on("change"+k,".k-checkbox :checkbox",w(t._checkboxChange,t)).on("click"+k,".k-checkbox :checkbox",w(t._checkboxClick,t)).on("click"+k,".k-request-retry",w(t._retryRequest,t)).on("click"+k,function(n){e(n.target).is(":focusable")||t.focus()})},_checkboxClick:function(t){var n=e(t.target);n.data("indeterminate")&&(n.data("indeterminate",!1).prop("indeterminate",!1).prop(A,!0),this._checkboxChange(t))},_attachUids:function(t,n){var i,r=this,o=p.attr("uid");t=t||r.root,n=n||r.dataSource,i=n.view(),t.children("li").each(function(t,n){n=e(n).attr(o,i[t].uid),n.attr("role","treeitem"),r._attachUids(n.children("ul"),i[t].children)})},_animation:function(){var e=this.options,t=e.animation;t===!1?t={expand:{effects:{}},collapse:{hide:!0,effects:{}}}:t.collapse&&"effects"in t.collapse||(t.collapse=g({reverse:!0},t.expand)),g(t.collapse,{hide:!0}),e.animation=t},_dragging:function(){var e=this.options.dragAndDrop,t=this.dragging;e&&!t?this.dragging=new s(this):!e&&t&&(t.destroy(),this.dragging=null)},_templates:function(){var e=this,t=e.options,n=w(e._fieldAccessor,e);t.template&&typeof t.template==U?t.template=m(t.template):t.template||(t.template=i("# var text = "+n("text")+"(data.item); #"+"# if (typeof data.item.encoded != 'undefined' && data.item.encoded === false) {#"+"#= text #"+"# } else { #"+"#: text #"+"# } #")),e._checkboxes(),e.templates={wrapperCssClass:function(e,t){var n="k-item",i=t.index;return e.firstLevel&&0===i&&(n+=" k-first"),i==e.length-1&&(n+=" k-last"),n},cssClass:function(e,t){var n="",i=t.index,r=e.length-1;return e.firstLevel&&0===i&&(n+="k-top "),n+=0===i&&i!=r?"k-top":i==r?"k-bot":"k-mid"},textClass:function(e){var t="k-in";return e.enabled===!1&&(t+=" k-state-disabled"),e.selected===!0&&(t+=" k-state-selected"),t},toggleButtonClass:function(e){var t="k-icon";return t+=e.expanded!==!0?" k-plus":" k-minus",e.enabled===!1&&(t+="-disabled"),t},groupAttributes:function(e){return e.expanded!==!0?" style='display:none'":""},groupCssClass:function(e){var t="k-group";return e.firstLevel&&(t+=" k-treeview-lines"),t},dragClue:i("<div class='k-header k-drag-clue'><span class='k-icon k-drag-status' />#= data.treeview.template(data) #</div>"),group:i("<ul class='#= data.r.groupCssClass(data.group) #'#= data.r.groupAttributes(data.group) # role='group'>#= data.renderItems(data) #</ul>"),itemContent:i("# var imageUrl = "+n("imageUrl")+"(data.item); #"+"# var spriteCssClass = "+n("spriteCssClass")+"(data.item); #"+"# if (imageUrl) { #"+"<img class='k-image' alt='' src='#= imageUrl #'>"+"# } #"+"# if (spriteCssClass) { #"+"<span class='k-sprite #= spriteCssClass #' />"+"# } #"+"#= data.treeview.template(data) #"),itemElement:i("# var item = data.item, r = data.r; ## var url = "+n("url")+"(item); #"+"<div class='#= r.cssClass(data.group, item) #'>"+"# if (item.hasChildren) { #"+"<span class='#= r.toggleButtonClass(item) #' role='presentation' />"+"# } #"+"# if (data.treeview.checkboxes) { #"+"<span class='k-checkbox' role='presentation'>"+"#= data.treeview.checkboxes.template(data) #"+"</span>"+"# } #"+"# var tag = url ? 'a' : 'span'; #"+"# var textAttr = url ? ' href=\\'' + url + '\\'' : ''; #"+"<#=tag#  class='#= r.textClass(item) #'#= textAttr #>"+"#= r.itemContent(data) #"+"</#=tag#>"+"</div>"),item:i("# var item = data.item, r = data.r; #<li role='treeitem' class='#= r.wrapperCssClass(data.group, item) #' "+p.attr("uid")+"='#= item.uid #'"+"#=item.selected ? \"aria-selected='true'\" : ''#"+"#=item.enabled === false ? \"aria-disabled='true'\" : ''#"+">"+"#= r.itemElement(data) #"+"</li>"),loading:i("<div class='k-icon k-loading' /> Loading..."),retry:i("Request failed. <button class='k-button k-request-retry'>Retry</button>")}},items:function(){return this.element.find(".k-item")},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.dataSource.fetch()},_bindDataSource:function(){this._refreshHandler=w(this.refresh,this),this._errorHandler=w(this._error,this),this.dataSource.bind(S,this._refreshHandler),this.dataSource.bind(D,this._errorHandler)},_unbindDataSource:function(){var e=this.dataSource;e&&(e.unbind(S,this._refreshHandler),e.unbind(D,this._errorHandler))},_dataSource:function(e){function t(e){for(var n=0;n<e.length;n++)e[n]._initChildren(),e[n].children.fetch(),t(e[n].children.view())}var n=this,i=n.options,r=i.dataSource;r=v(r)?{data:r}:r,n._unbindDataSource(),r.fields||(r.fields=[{field:"text"},{field:"url"},{field:"spriteCssClass"},{field:"imageUrl"}]),n.dataSource=r=b.create(r),e&&(r.fetch(),t(r.view())),n._bindDataSource()},events:[F,I,P,B,z,T,E,x,S,C],options:{name:"TreeView",dataSource:{},animation:{expand:{effects:"expand:vertical",duration:200},collapse:{duration:100}},dragAndDrop:!1,checkboxes:!1,autoBind:!0,loadOnDemand:!0,template:"",dataTextField:null},_accessors:function(){var e,t,n,i=this,r=i.options,o=i.element;for(e in G)t=r[G[e]],n=o.attr(p.attr(e+"-field")),!t&&n&&(t=n),t||(t=e),v(t)||(t=[t]),r[G[e]]=t},_fieldAccessor:function(t){var n=this.options[G[t]],i=n.length,r="(function(item) {";return 0===i?r+="return item['"+t+"'];":(r+="var levels = ["+e.map(n,function(e){return"function(d){ return "+p.expr(e)+"}"}).join(",")+"];",r+="return levels[Math.min(item.level(), "+i+"-1)](item)"),r+="})"},setOptions:function(e){_.fn.setOptions.call(this,e),this._animation(),this._dragging(),this._templates()},_trigger:function(e,t){return this.trigger(e,{node:t.closest(V)[0]})},_setChecked:function(t,n){if(t&&e.isFunction(t.view))for(var i=0,r=t.view();i<r.length;i++)r[i][A]=n,r[i].children&&this._setChecked(r[i].children,n)},_setIndeterminate:function(e){var t,n,i,o=d(e),a=!0;if(o.length&&(t=r(o.children()),n=t.length)){if(n>1){for(i=1;n>i;i++)if(t[i].checked!=t[i-1].checked||t[i].indeterminate||t[i-1].indeterminate){a=!1;break}}else a=!t[0].indeterminate;r(e).data("indeterminate",!a).prop("indeterminate",!a).prop(A,a&&t[0].checked)}},updateIndeterminate:function(e){e=e||this.wrapper;var t,n=d(e).children();if(n.length){for(t=0;t<n.length;t++)this.updateIndeterminate(n.eq(t));this._setIndeterminate(e)}},_bubbleIndeterminate:function(e){var t,n=this.parent(e);n.length&&(this._setIndeterminate(n),t=n.children("div").find(".k-checkbox :checkbox"),t.prop("indeterminate")===!1?this.dataItem(n).set(A,t.prop(A)):this.dataItem(n).checked=!1,this._bubbleIndeterminate(n))},_checkboxChange:function(t){var n=e(t.target),i=n.prop(A),r=n.closest(V);this.dataItem(r).set(A,i)},_toggleButtonClick:function(t){this.toggle(e(t.target).closest(V))},_mousedown:function(t){var n=e(t.currentTarget).closest(V);this._clickTarget=n,this.current(n)},_focusable:function(e){return e&&e.length&&e.is(":visible")&&!e.find(".k-in:first").hasClass("k-state-disabled")},_focus:function(){var t=this.select(),n=this._clickTarget;p.support.touch||(n&&n.length&&(t=n),this._focusable(t)||(t=this.current()),this._focusable(t)||(t=this._nextVisible(e())),this.current(t))},focus:function(){var e,t=this.wrapper,n=t[0],i=[],r=[],o=document.documentElement;do n=n.parentNode,n.scrollHeight>n.clientHeight&&(i.push(n),r.push(n.scrollTop));while(n!=o);for(t.focus(),e=0;e<i.length;e++)i[e].scrollTop=r[e]},_blur:function(){this.current().find(".k-in:first").removeClass("k-state-focused")},_enabled:function(e){return!e.children("div").children(".k-in").hasClass("k-state-disabled")},parent:function(t){var n,i,r=/\bk-treeview\b/,o=/\bk-item\b/;typeof t==U&&(t=this.element.find(t)),q(t)||(t=t[0]),i=o.test(t.className);do t=t.parentNode,o.test(t.className)&&(i?n=t:i=!0);while(!r.test(t.className)&&!n);return e(n)},_nextVisible:function(e){function t(e){for(;e.length&&!e.next().length;)e=i.parent(e);return e.next().length?e.next():e}var n,i=this,r=i._expanded(e);return e.length&&e.is(":visible")?r?(n=d(e).children().first(),n.length||(n=t(e))):n=t(e):n=i.root.children().eq(0),i._enabled(n)||(n=i._nextVisible(n)),n},_previousVisible:function(e){var t,n,i=this;if(!e.length||e.prev().length)for(n=e.length?e.prev():i.root.children().last();i._expanded(n)&&(t=d(n).children().last(),t.length);)n=t;else n=i.parent(e)||e;return i._enabled(n)||(n=i._previousVisible(n)),n},_keydown:function(n){var i,r=this,o=n.keyCode,a=r.current(),s=r._expanded(a),l=a.find(".k-checkbox:first :checkbox"),d=p.support.isRtl(r.element);n.target==n.currentTarget&&(!d&&o==y.RIGHT||d&&o==y.LEFT?s?i=r._nextVisible(a):r.expand(a):!d&&o==y.LEFT||d&&o==y.RIGHT?s?r.collapse(a):(i=r.parent(a),r._enabled(i)||(i=t)):o==y.DOWN?i=r._nextVisible(a):o==y.UP?i=r._previousVisible(a):o==y.HOME?i=r._nextVisible(e()):o==y.END?i=r._previousVisible(e()):o==y.ENTER?a.find(".k-in:first").hasClass("k-state-selected")||r._trigger(x,a)||r.select(a):o==y.SPACEBAR&&l.length&&(l.prop(A,!l.prop(A)).data("indeterminate",!1).prop("indeterminate",!1),r._checkboxChange({target:l}),i=a),i&&(n.preventDefault(),a[0]!=i[0]&&(r._trigger(C,i),r.current(i))))},_click:function(t){var n,i=this,r=e(t.currentTarget),o=c(r.closest(V)),a=r.attr("href");n=a?"#"==a||a.indexOf("#"+this.element.id+"-")>=0:o.length&&!o.children().length,n&&t.preventDefault(),r.hasClass(".k-state-selected")||i._trigger(x,r)||i.select(r)},_wrapper:function(){var e,t,n=this,i=n.element,r="k-widget k-treeview";i.is("ul")?(e=i.wrap("<div />").parent(),t=i):(e=i,t=e.children("ul").eq(0)),n.wrapper=e.addClass(r),n.root=t},_group:function(e){var t=this,n=e.hasClass(O),i={firstLevel:n,expanded:n||t._expanded(e)},r=e.children("ul");r.addClass(t.templates.groupCssClass(i)).css("display",i.expanded?"":"none"),t._nodes(r,i)
},_nodes:function(t,n){var i,r=this,o=t.children("li");n=g({length:o.length},n),o.each(function(t,o){o=e(o),i={index:t,expanded:r._expanded(o)},a(o),r._updateNodeClasses(o,n,i),r._group(o)})},_checkboxes:function(){var e,t=this.options,n=t.checkboxes;(n||t.checkboxTemplate)&&(t.checkboxTemplate?e=t.checkboxTemplate:(e="<input type='checkbox' #= (item.enabled === false) ? 'disabled' : '' # #= item.checked ? 'checked' : '' #",n.name&&(e+=" name='"+n.name+"'"),e+=" />"),n=g({template:e},t.checkboxes),typeof n.template==U&&(n.template=m(n.template)),t.checkboxes=n)},_updateNodeClasses:function(e,t,n){var i=e.children("div"),r=e.children("ul"),o=this.templates;e.hasClass("k-treeview")||(n=n||{},n.expanded=typeof n.expanded!=M?n.expanded:this._expanded(e),n.index=typeof n.index!=M?n.index:e.index(),n.enabled=typeof n.enabled!=M?n.enabled:!i.children(".k-in").hasClass("k-state-disabled"),t=t||{},t.firstLevel=typeof t.firstLevel!=M?t.firstLevel:e.parent().parent().hasClass(O),t.length=typeof t.length!=M?t.length:e.parent().children().length,e.removeClass("k-first k-last").addClass(o.wrapperCssClass(t,n)),i.removeClass("k-top k-mid k-bot").addClass(o.cssClass(t,n)),i.children(".k-in").removeClass("k-in k-state-default k-state-disabled").addClass(o.textClass(n)),(r.length||"true"==e.attr("data-hasChildren"))&&(i.children(".k-icon").removeClass("k-plus k-minus k-plus-disabled k-minus-disabled").addClass(o.toggleButtonClass(n)),r.addClass("k-group")))},_processNodes:function(t,n){var i=this;i.element.find(t).each(function(t,r){n.call(i,t,e(r).closest(V))})},dataItem:function(t){var n=e(t).closest(V).attr(p.attr("uid")),i=this.dataSource;return i&&i.getByUid(n)},_insertNode:function(t,n,i,r,o){var s,l,c,u,p=this,f=d(i),h=f.children().length+1,g={firstLevel:i.hasClass(O),expanded:!o,length:h},m="",v=function(e,t){e.appendTo(t)};for(c=0;c<t.length;c++)u=t[c],u.index=n+c,m+=p._renderItem({group:g,item:u});if(l=e(m),l.length){for(f.length||(f=e(p._renderGroup({group:g})).appendTo(i)),r(l,f),i.hasClass("k-item")&&(a(i),p._updateNodeClasses(i)),p._updateNodeClasses(l.prev().first()),p._updateNodeClasses(l.next().last()),c=0;c<t.length;c++)u=t[c],u.hasChildren&&(s=u.children.data(),s.length&&p._insertNode(s,u.index,l.eq(c),v,!p._expanded(l.eq(c))));return l}},_updateNode:function(t,n){function i(){f=!0}function r(e,t){e.find(".k-checkbox :checkbox").prop(A,t).data("indeterminate",!1).prop("indeterminate",!1)}var o,a,s,l,d,u=this,p={treeview:u.options,item:s},f=!1;if("selected"==t)s=n[0],a=u.findByUid(s.uid).find(".k-in:first").removeClass("k-state-hover").toggleClass("k-state-selected",s[t]).end(),s[t]?(u.current(a),a.attr(W,!0)):a.attr(W,!1);else for(e.inArray(t,u.options.dataTextField)>=0?f=!0:(p.item=n[0],p.item.bind("get",i),u.templates.itemContent(p),p.item.unbind("set",i)),o=0;o<n.length;o++)p.item=s=n[o],("spriteCssClass"==t||"imageUrl"==t||f)&&u.findByUid(s.uid).find(">div>.k-in").html(u.templates.itemContent(p)),t==A?(a=u.findByUid(s.uid),l=s[t],r(a.children("div"),l),u.options.checkboxes.checkChildren&&(r(a.children(".k-group"),l),u._setChecked(s.children,l),u._bubbleIndeterminate(a))):"expanded"==t?u._toggle(u.findByUid(s.uid),s,s[t]):"enabled"==t&&(a=u.findByUid(s.uid),a.find(".k-checkbox :checkbox").prop("disabled",!s[t]),d=!c(a).is(N),a.removeAttr(j),s[t]||(s.selected&&s.set("selected",!1),s.expanded&&s.set("expanded",!1),d=!0,a.removeAttr(W).attr(j,!0)),u._updateNodeClasses(a,{},{enabled:s[t],expanded:!d}))},refresh:function(e){function n(e,t){var n=d(t),i=n.children(),o=!r._expanded(t);typeof u==M&&(u=i.length),r._insertNode(e,u,t,function(e,t){u==i.length?e.appendTo(t):e.insertBefore(i.eq(u))},o),r._expanded(t)&&(r._updateNodeClasses(t),d(t).css("display","block"))}var i,r=this,o=r.wrapper,s=e.node,l=e.action,c=e.items,u=e.index,p=r.options,f=p.loadOnDemand,h=p.checkboxes&&p.checkboxes.checkChildren;if(e.field)return r._updateNode(e.field,c);if(s&&(o=r.findByUid(s.uid),r._progress(o,!1)),h&&"remove"!=l&&s&&s.checked)for(i=0;i<c.length;i++)c[i].checked=!0;for("add"==l?n(c,o):"remove"==l?r._remove(r.findByUid(c[0].uid),!1):s?(d(o).empty(),c.length?n(c,o):a(o)):r.root=r.wrapper.html(r._renderGroup({items:c,group:{firstLevel:!0,expanded:!0}})).children("ul"),i=0;i<c.length;i++)(!f||c[i].expanded)&&c[i].load();r.trigger(z,{node:s?o:t})},_error:function(e){var t=this,n=e.node&&t.findByUid(e.node.uid);n?(this._progress(n,!1),this._expanded(n,!1),u(n).addClass("k-i-refresh"),e.node.loaded(!1)):(this._progress(!1),this.element.html(this.templates.retry))},_retryRequest:function(e){e.preventDefault(),this.dataSource.fetch()},expand:function(e){this._processNodes(e,function(e,t){this.toggle(t,!0)})},collapse:function(e){this._processNodes(e,function(e,t){this.toggle(t,!1)})},enable:function(e,t){t=2==arguments.length?!!t:!0,this._processNodes(e,function(e,n){this.dataItem(n).set("enabled",t)})},current:function(n){var i=this,r=i._current,o=i.element,a=i._ariaId;return arguments.length>0&&n&&n.length?(r&&(r[0].id===a&&r.removeAttr("id"),r.find(".k-in:first").removeClass("k-state-focused")),r=i._current=e(n,o).closest(V),r.find(".k-in:first").addClass("k-state-focused"),a=r[0].id||a,a&&(i.wrapper.removeAttr("aria-activedescendant"),r.attr("id",a),i.wrapper.attr("aria-activedescendant",a)),t):(r||(r=i._nextVisible(e())),r)},select:function(n){var i=this,r=i.element;return arguments.length?(n=e(n,r).closest(V),r.find(".k-state-selected").each(function(){var e=i.dataItem(this);e.set("selected",!1),delete e.selected}),n.length&&i.dataItem(n).set("selected",!0),i.trigger(S),t):r.find(".k-state-selected").closest(V)},_toggle:function(e,t,n){var i,r=this,o=r.options,a=c(e),s=n?"expand":"collapse",l=o.animation[s];if(!a.data("animating")&&!r._trigger(s,e))if(r._expanded(e,n),i=t&&t.loaded(),i&&a.children().length>0){if(r._updateNodeClasses(e,{},{expanded:n}),a.css("display")==(n?"block":"none"))return;n||a.css("height",a.height()).css("height"),a.kendoStop(!0,!0).kendoAnimate(g({reset:!0},l,{complete:function(){n&&a.css("height","")}}))}else n&&(o.loadOnDemand&&r._progress(e,!0),a.remove(),t.load())},toggle:function(t,n){t=e(t),u(t).is(".k-minus,.k-plus,.k-minus-disabled,.k-plus-disabled")&&(1==arguments.length&&(n=!this._expanded(t)),this._expanded(t,n))},destroy:function(){var e=this;_.fn.destroy.call(e),e.element.off(k),e._unbindDataSource(),e.dragging&&e.dragging.destroy(),p.destroy(e.element)},_expanded:function(e,n){var i=p.attr("expanded"),r=this.dataItem(e);return 1==arguments.length?"true"===e.attr(i)||r&&r.expanded:(c(e).data("animating")||(r&&(r.set("expanded",n),n=r.expanded),n?(e.attr(i,"true"),e.attr("aria-expanded","true")):(e.removeAttr(i),e.attr("aria-expanded","false"))),t)},_progress:function(e,t){var n=this.element;1==arguments.length?(t=e,t?n.html(this.templates.loading):n.empty()):u(e).toggleClass("k-loading",t).removeClass("k-i-refresh")},text:function(e,n){var i=this.dataItem(e),r=this.options[G.text],o=i.level(),a=r.length,s=r[Math.min(o,a-1)];return n?(i.set(s,n),t):i[s]},_objectOrSelf:function(t){return e(t).closest("[data-role=treeview]").data("kendoTreeView")||this},_dataSourceMove:function(e,t,n,i){var r,o=this._objectOrSelf(n||t),a=o.dataSource;return n&&n[0]!=o.element[0]&&(r=o.dataItem(n),r.loaded()||(o._progress(n,!0),r.load()),n!=this.root&&(a=r.children,a&&a instanceof b||(r._initChildren(),r.loaded(!0),a=r.children))),e=this._toObservableData(e),i.call(this,a,e)},_toObservableData:function(t){var n,i,r=t;return(t instanceof window.jQuery||q(t))&&(n=this._objectOrSelf(t).dataSource,i=e(t).attr(p.attr("uid")),r=n.getByUid(i),r&&(r=n.remove(r))),r},_insert:function(e,t,n){t instanceof p.data.ObservableArray?t=t.toJSON():v(t)||(t=[t]);var i=e.parent();return i&&(i.hasChildren=!0,i._initChildren()),e.splice.apply(e,[n,0].concat(t)),this.findByUid(e[n].uid)},insertAfter:o(1),insertBefore:o(0),append:function(t,n,i){var r=this,o=r.root;return i=i||e.noop,n&&(o=d(n)),r._dataSourceMove(t,o,n,function(e,t){function o(){n&&r._expanded(n,!0);var i=e.data(),o=Math.max(i.length,0);return r._insert(i,t,o)}var a;return e.data()?(a=o(),i(a),a):(e.one(S,function(){i(o())}),null)})},_remove:function(t,n){var i,r,o,s=this;return t=e(t,s.element),i=t.parent().parent(),r=t.prev(),o=t.next(),t[n?"detach":"remove"](),i.hasClass("k-item")&&(a(i),s._updateNodeClasses(i)),s._updateNodeClasses(r),s._updateNodeClasses(o),t},remove:function(e){var t=this.dataItem(e);t&&this.dataSource.remove(t)},detach:function(e){return this._remove(e,!0)},findByText:function(t){return e(this.element).find(".k-in").filter(function(n,i){return e(i).text()==t}).closest(V)},findByUid:function(e){return this.element.find(".k-item["+p.attr("uid")+"="+e+"]")},_renderItem:function(e){return e.group||(e.group={}),e.treeview=this.options,e.r=this.templates,this.templates.item(e)},_renderGroup:function(e){var t=this;return e.renderItems=function(e){var n="",i=0,r=e.items,o=r?r.length:0,a=e.group;for(a.length=o;o>i;i++)e.group=a,e.item=r[i],e.item.index=i,n+=t._renderItem(e);return n},e.r=t.templates,t.templates.group(e)}}),s.prototype={_removeTouchHover:function(){var e=this;p.support.touch&&e.hovered&&(e.hovered.find("."+L).removeClass(L),e.hovered=!1)},_hintStatus:function(n){var i=this._draggable.hint.find(".k-drag-status")[0];return n?(i.className="k-icon k-drag-status "+n,t):e.trim(i.className.replace(/k-(icon|drag-status)/g,""))},dragstart:function(t){var n=this,i=n.treeview,r=n.sourceNode=t.currentTarget.closest(V);i.trigger(F,{sourceNode:r[0]})&&t.preventDefault(),n.dropHint=e("<div class='k-drop-hint' />").css(R,"hidden").appendTo(i.element)},drag:function(t){var n,i,r,o,a,s,l,d,c,u,f=this,h=f.treeview,g=f.sourceNode,m=f.dropTarget=e(p.eventTarget(t)),v=m.closest(".k-treeview");v.length?e.contains(g[0],m[0])?n="k-denied":(n="k-insert-middle",i=m.closest(".k-top,.k-mid,.k-bot"),i.length?(o=i.outerHeight(),a=p.getOffset(i).top,s=m.closest(".k-in"),l=o/(s.length>0?4:2),d=t.y.location<a+l,c=a+o-l<t.y.location,f._removeTouchHover(),u=s.length&&!d&&!c,f.hovered=u?v:!1,f.dropHint.css(R,u?"hidden":"visible"),s.toggleClass(L,u),u?n="k-add":(r=i.position(),r.top+=d?0:o,f.dropHint.css(r)[d?"prependTo":"appendTo"](m.closest(V).children("div:first")),d&&i.hasClass("k-top")&&(n="k-insert-top"),c&&i.hasClass("k-bot")&&(n="k-insert-bottom"))):m[0]!=f.dropHint[0]&&(n=v[0]!=h.element[0]?"k-add":"k-denied")):(n="k-denied",f._removeTouchHover()),h.trigger(I,{sourceNode:g[0],dropTarget:m[0],pageY:t.y.location,pageX:t.x.location,statusClass:n.substring(2),setStatusClass:function(e){n=e}}),0!==n.indexOf("k-insert")&&f.dropHint.css(R,"hidden"),f._hintStatus(n)},dragcancel:function(){this.dropHint.remove()},dragend:function(){function e(e){a.trigger(B,{sourceNode:e&&e[0],destinationNode:n[0],dropPosition:s})}var n,i,r,o=this,a=o.treeview,s="over",l=o.sourceNode,d=o.dropHint,c=o.dropTarget;return"visible"==d.css(R)?(s=d.prevAll(".k-in").length>0?"after":"before",n=d.closest(V)):c&&(n=c.closest(V),n.length||(n=c.closest(".k-treeview"))),i={sourceNode:l[0],destinationNode:n[0],valid:"k-denied"!=o._hintStatus(),setValid:function(e){this.valid=e},dropTarget:c[0],dropPosition:s},r=a.trigger(P,i),d.remove(),o._removeTouchHover(),!i.valid||r?(o._draggable.dropped=i.valid,t):(o._draggable.dropped=!0,"over"==s?a.append(l,n,e):("before"==s?l=a.insertBefore(l,n):"after"==s&&(l=a.insertAfter(l,n)),e(l)),t)},destroy:function(){this._draggable.destroy()}},f.plugin(l)}(window.kendo.jQuery),function(e,t){function n(e,t,n){var i=n?" k-slider-horizontal":" k-slider-vertical",r=e.style?e.style:t.attr("style"),o=t.attr("class")?" "+t.attr("class"):"",a="";return"bottomRight"==e.tickPlacement?a=" k-slider-bottomright":"topLeft"==e.tickPlacement&&(a=" k-slider-topleft"),r=r?" style='"+r+"'":"","<div class='k-widget k-slider"+i+o+"'"+r+">"+"<div class='k-slider-wrap"+(e.showButtons?" k-slider-buttons":"")+a+"'></div></div>"}function i(e,t,n){var i="";return i="increase"==t?n?"k-i-arrow-e":"k-i-arrow-n":n?"k-i-arrow-w":"k-i-arrow-s","<a class='k-button k-button-"+t+"'><span class='k-icon "+i+"' title='"+e[t+"ButtonTitle"]+"'>"+e[t+"ButtonTitle"]+"</span></a>"}function r(e,t){var n,i="<ul class='k-reset k-slider-items'>",r=y.floor(d(t/e.smallStep))+1;for(n=0;r>n;n++)i+="<li class='k-tick' role='presentation'>&nbsp;</li>";return i+="</ul>"}function o(e,t){var n=t.is("input")?1:2,i=2==n?e.leftDragHandleTitle:e.dragHandleTitle;return"<div class='k-slider-track'><div class='k-slider-selection'><!-- --></div><a href='#' class='k-draghandle' title='"+i+"' role='slider' aria-valuemin='"+e.min+"' aria-valuemax='"+e.max+"' aria-valuenow='"+(n>1?e.selectionStart||e.min:e.value||e.min)+"'>Drag</a>"+(n>1?"<a href='#' class='k-draghandle' title='"+e.rightDragHandleTitle+"'role='slider' aria-valuemin='"+e.min+"' aria-valuemax='"+e.max+"' aria-valuenow='"+(e.selectionEnd||e.max)+"'>Drag</a>":"")+"</div>"}function a(e){return function(t){return t+e}}function s(e){return function(){return e}}function l(e){return(e+"").replace(".",f.cultures.current.numberFormat["."])}function d(e){e=parseFloat(e,10);var t=y.pow(10,j||0);return y.round(e*t)/t}function c(e,n){var i=_(e.getAttribute(n));return null===i&&(i=t),i}function u(e){return typeof e!==q}var p,f=window.kendo,h=f.ui.Widget,g=f.ui.Draggable,m=e.extend,v=f.format,_=f.parseFloat,b=e.proxy,w=e.isArray,y=Math,k=f.support,x=k.pointers,C=k.msPointers,T="change",S="slide",D=".slider",A="touchstart"+D+" mousedown"+D,E=x?"pointerdown"+D:C?"MSPointerDown"+D:A,F="touchend"+D+" mouseup"+D,I=x?"pointerup":C?"MSPointerUp"+D:F,P="moveSelection",B="keydown"+D,z="click"+D,H="mouseover"+D,R="focus"+D,M="blur"+D,L=".k-draghandle",O=".k-slider-track",N=".k-tick",V="k-state-selected",U="k-state-default",W="k-state-disabled",j=3,G="disabled",q="undefined",Y="tabindex",Q=f.getTouches,$=h.extend({init:function(e,t){var n,i,o,l=this;h.fn.init.call(l,e,t),t=l.options,l._distance=t.max-t.min,l._isHorizontal="horizontal"==t.orientation,l._isRtl=l._isHorizontal&&f.support.isRtl(e),l._position=l._isHorizontal?"left":"bottom",l._size=l._isHorizontal?"width":"height",l._outerSize=l._isHorizontal?"outerWidth":"outerHeight",t.tooltip.format=t.tooltip.enabled?t.tooltip.format||"{0}":"{0}",l._createHtml(),l.wrapper=l.element.closest(".k-slider"),l._trackDiv=l.wrapper.find(O),l._setTrackDivWidth(),l._maxSelection=l._trackDiv[l._size](),n=l._maxSelection/((t.max-t.min)/t.smallStep),i=l._calculateItemsWidth(y.floor(l._distance/t.smallStep)),"none"!=t.tickPlacement&&n>=2&&(l._trackDiv.before(r(t,l._distance)),l._setItemsWidth(i),l._setItemsTitle(),l._setItemsLargeTick()),l._calculateSteps(i),l._tabindex(l.wrapper.find(L)),l[t.enabled?"enable":"disable"](),o=f.support.isRtl(l.wrapper)?-1:1,l._keyMap={37:a(-1*o*t.smallStep),40:a(-t.smallStep),39:a(1*o*t.smallStep),38:a(+t.smallStep),35:s(t.max),36:s(t.min),33:a(+t.largeStep),34:a(-t.largeStep)},f.notify(l)},events:[T,S],options:{enabled:!0,min:0,max:10,smallStep:1,largeStep:5,orientation:"horizontal",tickPlacement:"both",tooltip:{enabled:!0,format:"{0}"}},_setTrackDivWidth:function(){var e=this,t=2*parseFloat(e._trackDiv.css(e._isRtl?"right":e._position),10);e._trackDiv[e._size](e.wrapper[e._size]()-2-t)},_setItemsWidth:function(t){var n,i=this,r=i.options,o=0,a=t.length-1,s=i.wrapper.find(N),l=0,d=2,c=s.length,u=0;for(n=0;c-2>n;n++)e(s[n+1])[i._size](t[n]);if(i._isHorizontal?(e(s[o]).addClass("k-first")[i._size](t[a-1]),e(s[a]).addClass("k-last")[i._size](t[a])):(e(s[a]).addClass("k-first")[i._size](t[a]),e(s[o]).addClass("k-last")[i._size](t[a-1])),0!==i._distance%r.smallStep&&!i._isHorizontal){for(n=0;n<t.length;n++)u+=t[n];l=i._maxSelection-u,l+=parseFloat(i._trackDiv.css(i._position),10)+d,i.wrapper.find(".k-slider-items").css("padding-top",l)}},_setItemsTitle:function(){for(var t=this,n=t.options,i=t.wrapper.find(N),r=n.min,o=i.length,a=t._isHorizontal&&!t._isRtl?0:o-1,s=t._isHorizontal&&!t._isRtl?o:-1,l=t._isHorizontal&&!t._isRtl?1:-1;0!==a-s;a+=l)e(i[a]).attr("title",v(n.tooltip.format,d(r))),r+=n.smallStep},_setItemsLargeTick:function(){var t,n=this,i=n.options,r=n.wrapper.find(N),o={},a=d(i.largeStep/i.smallStep);if(0===1e3*i.largeStep%(1e3*i.smallStep))if(n._isHorizontal&&!n._isRtl)for(t=0;t<r.length;t=d(t+a))o=e(r[t]),o.addClass("k-tick-large").html("<span class='k-label'>"+o.attr("title")+"</span>");else for(t=r.length-1;t>=0;t=d(t-a))o=e(r[t]),o.addClass("k-tick-large").html("<span class='k-label'>"+o.attr("title")+"</span>"),n._isRtl||0!==t&&t!==r.length-1&&o.css("line-height",o[n._size]()+"px")},_calculateItemsWidth:function(e){var t,n,i,r=this,o=r.options,a=parseFloat(r._trackDiv.css(r._size))+1,s=a/r._distance;for(r._distance/o.smallStep-y.floor(r._distance/o.smallStep)>0&&(a-=r._distance%o.smallStep*s),t=a/e,n=[],i=0;e-1>i;i++)n[i]=t;return n[e-1]=n[e]=t/2,r._roundWidths(n)},_roundWidths:function(e){var t,n=0,i=e.length;for(t=0;i>t;t++)n+=e[t]-y.floor(e[t]),e[t]=y.floor(e[t]);return n=y.round(n),this._addAdditionalSize(n,e)},_addAdditionalSize:function(e,t){if(0===e)return t;var n,i=parseFloat(t.length-1)/parseFloat(1==e?e:e-1);for(n=0;e>n;n++)t[parseInt(y.round(i*n),10)]+=1;return t},_calculateSteps:function(e){var t,n=this,i=n.options,r=i.min,o=0,a=y.ceil(n._distance/i.smallStep),s=1;if(a+=0===n._distance/i.smallStep%1?1:0,e.splice(0,0,2*e[a-2]),e.splice(a-1,1,2*e.pop()),n._pixelSteps=[o],n._values=[r],0!==a){for(;a>s;)o+=(e[s-1]+e[s])/2,n._pixelSteps[s]=o,n._values[s]=r+=i.smallStep,s++;t=0===n._distance%i.smallStep?a-1:a,n._pixelSteps[t]=n._maxSelection,n._values[t]=i.max,n._isRtl&&(n._pixelSteps.reverse(),n._values.reverse())}},_getValueFromPosition:function(e,t){var n,i=this,r=i.options,o=y.max(r.smallStep*(i._maxSelection/i._distance),0),a=0,s=o/2;if(i._isHorizontal?(a=e-t.startPoint,i._isRtl&&(a=i._maxSelection-a)):a=t.startPoint-e,i._maxSelection-(parseInt(i._maxSelection%o,10)-3)/2<a)return r.max;for(n=0;n<i._pixelSteps.length;n++)if(y.abs(i._pixelSteps[n]-a)-1<=s)return d(i._values[n])},_getFormattedValue:function(e,t){var n,i,r,o=this,a="",s=o.options.tooltip;return w(e)?(i=e[0],r=e[1]):t&&t.type&&(i=t.selectionStart,r=t.selectionEnd),t&&(n=t.tooltipTemplate),!n&&s.template&&(n=f.template(s.template)),w(e)||t&&t.type?n?a=n({selectionStart:i,selectionEnd:r}):(i=v(s.format,i),r=v(s.format,r),a=i+" - "+r):(t&&(t.val=e),a=n?n({value:e}):v(s.format,e)),a},_getDraggableArea:function(){var e=this,t=f.getOffset(e._trackDiv);return{startPoint:e._isHorizontal?t.left:t.top+e._maxSelection,endPoint:e._isHorizontal?t.left+e._maxSelection:t.top}},_createHtml:function(){var e=this,t=e.element,r=e.options,a=t.find("input");2==a.length?(a.eq(0).val(r.selectionStart),a.eq(1).val(r.selectionEnd)):t.val(r.value),t.wrap(n(r,t,e._isHorizontal)).hide(),r.showButtons&&t.before(i(r,"increase",e._isHorizontal)).before(i(r,"decrease",e._isHorizontal)),t.before(o(r,t))},_focus:function(t){var n=this,i=t.target,r=n.value(),o=n._drag;o||(i==n.wrapper.find(L).eq(0)[0]?(o=n._firstHandleDrag,n._activeHandle=0):(o=n._lastHandleDrag,n._activeHandle=1),r=r[n._activeHandle]),e(i).addClass(V),o&&(n._activeHandleDrag=o,o.selectionStart=n.options.selectionStart,o.selectionEnd=n.options.selectionEnd,o._updateTooltip(r))},_focusWithMouse:function(t){t=e(t);var n=this,i=t.is(L)?t.index():0;window.setTimeout(function(){n.wrapper.find(L)[2==i?1:0].focus()},1),n._setTooltipTimeout()},_blur:function(t){var n=this,i=n._activeHandleDrag;e(t.target).removeClass(V),i&&(i._removeTooltip(),delete n._activeHandleDrag,delete n._activeHandle)},_setTooltipTimeout:function(){var e=this;e._tooltipTimeout=window.setTimeout(function(){var t=e._drag||e._activeHandleDrag;t&&t._removeTooltip()},300)},_clearTooltipTimeout:function(){var e,t=this;window.clearTimeout(this._tooltipTimeout),e=t._drag||t._activeHandleDrag,e&&e.tooltipDiv&&e.tooltipDiv.stop(!0,!1).css("opacity",1)}}),K=$.extend({init:function(n,i){var r,o=this;n.type="text",i=m({},{value:c(n,"value"),min:c(n,"min"),max:c(n,"max"),smallStep:c(n,"step")},i),n=e(n),i&&i.enabled===t&&(i.enabled=!n.is("[disabled]")),$.fn.init.call(o,n,i),i=o.options,u(i.value)&&null!==i.value||(i.value=i.min,n.val(i.min)),i.value=y.max(y.min(i.value,i.max),i.min),r=o.wrapper.find(L),new K.Selection(r,o,i),o._drag=new K.Drag(r,"",o,i)},options:{name:"Slider",showButtons:!0,increaseButtonTitle:"Increase",decreaseButtonTitle:"Decrease",dragHandleTitle:"drag",tooltip:{format:"{0}"},value:null},enable:function(n){var i,r,o,a=this,s=a.options;a.disable(),n!==!1&&(a.wrapper.removeClass(W).addClass(U),a.wrapper.find("input").removeAttr(G),i=function(n){var i,r,o,s=Q(n)[0];if(s){if(i=a._isHorizontal?s.location.pageX:s.location.pageY,r=a._getDraggableArea(),o=e(n.target),o.hasClass("k-draghandle"))return o.addClass(V),t;a._update(a._getValueFromPosition(i,r)),a._focusWithMouse(n.target),a._drag.dragstart(n),n.preventDefault()}},a.wrapper.find(N+", "+O).on(E,i).end().on(E,function(){e(document.documentElement).one("selectstart",f.preventDefault)}).on(I,function(){a._drag._end()}),a.wrapper.find(L).attr(Y,0).on(F,function(){a._setTooltipTimeout()}).on(z,function(e){a._focusWithMouse(e.target),e.preventDefault()}).on(R,b(a._focus,a)).on(M,b(a._blur,a)),r=b(function(e){var t=a._nextValueByIndex(a._valueIndex+1*e);a._setValueInRange(t),a._drag._updateTooltip(t)},a),s.showButtons&&(o=b(function(e,t){this._clearTooltipTimeout(),(1===e.which||k.touch&&0===e.which)&&(r(t),this.timeout=setTimeout(b(function(){this.timer=setInterval(function(){r(t)},60)},this),200))},a),a.wrapper.find(".k-button").on(F,b(function(e){this._clearTimer(),a._focusWithMouse(e.target)},a)).on(H,function(t){e(t.currentTarget).addClass("k-state-hover")}).on("mouseout"+D,b(function(t){e(t.currentTarget).removeClass("k-state-hover"),this._clearTimer()},a)).eq(0).on(A,b(function(e){o(e,1)},a)).click(!1).end().eq(1).on(A,b(function(e){o(e,-1)},a)).click(f.preventDefault)),a.wrapper.find(L).off(B,!1).on(B,b(this._keydown,a)),s.enabled=!0)},disable:function(){var t=this;t.wrapper.removeClass(U).addClass(W),e(t.element).prop(G,G),t.wrapper.find(".k-button").off(A).on(A,f.preventDefault).off(F).on(F,f.preventDefault).off("mouseleave"+D).on("mouseleave"+D,f.preventDefault).off(H).on(H,f.preventDefault),t.wrapper.find(N+", "+O).off(E).off(I),t.wrapper.find(L).attr(Y,-1).off(F).off(B).off(z).off(R).off(M),t.options.enabled=!1},_update:function(e){var t=this,n=t.value()!=e;t.value(e),n&&t.trigger(T,{value:t.options.value})},value:function(e){var n=this,i=n.options;return e=d(e),isNaN(e)?i.value:(e>=i.min&&e<=i.max&&i.value!=e&&(n.element.prop("value",l(e)),i.value=e,n._refreshAriaAttr(e),n._refresh()),t)},_refresh:function(){this.trigger(P,{value:this.options.value})},_refreshAriaAttr:function(e){var t,n=this,i=n._drag;t=i&&i._tooltipDiv?i._tooltipDiv.text():n._getFormattedValue(e,null),this.wrapper.find(L).attr("aria-valuenow",e).attr("aria-valuetext",t)},_clearTimer:function(){clearTimeout(this.timeout),clearInterval(this.timer)},_keydown:function(e){var t=this;e.keyCode in t._keyMap&&(t._clearTooltipTimeout(),t._setValueInRange(t._keyMap[e.keyCode](t.options.value)),t._drag._updateTooltip(t.value()),e.preventDefault())},_setValueInRange:function(e){var n=this,i=n.options;return e=d(e),isNaN(e)?(n._update(i.min),t):(e=y.max(y.min(e,i.max),i.min),n._update(e),t)},_nextValueByIndex:function(e){var t=this._values.length;return this._isRtl&&(e=t-1-e),this._values[y.max(0,y.min(e,t-1))]},destroy:function(){var e=this;h.fn.destroy.call(e),e.wrapper.off(D).find(".k-button").off(D).end().find(L).off(D).end().find(N+", "+O).off(D).end(),e._drag.draggable.destroy()}});K.Selection=function(e,t,n){function i(i){var r=i-n.min,o=t._valueIndex=y.ceil(d(r/n.smallStep)),a=parseInt(t._pixelSteps[o],10),s=t._trackDiv.find(".k-slider-selection"),l=parseInt(e[t._outerSize]()/2,10),c=t._isRtl?2:0;s[t._size](t._isRtl?t._maxSelection-a:a),e.css(t._position,a-l-c)}i(n.value),t.bind([T,S,P],function(e){i(parseFloat(e.value,10))})},K.Drag=function(e,t,n,i){var r=this;r.owner=n,r.options=i,r.element=e,r.type=t,r.draggable=new g(e,{distance:0,dragstart:b(r._dragstart,r),drag:b(r.drag,r),dragend:b(r.dragend,r),dragcancel:b(r.dragcancel,r)}),e.click(!1)},K.Drag.prototype={dragstart:function(e){this.owner._activeDragHandle=this,this.draggable.userEvents.cancel(),this.draggable.userEvents._start(e)},_dragstart:function(n){var i=this,r=i.owner,o=i.options;return o.enabled?(this.owner._activeDragHandle=this,r.element.off(H),i.element.addClass(V),e(document.documentElement).css("cursor","pointer"),i.dragableArea=r._getDraggableArea(),i.step=y.max(o.smallStep*(r._maxSelection/r._distance),0),i.type?(i.selectionStart=o.selectionStart,i.selectionEnd=o.selectionEnd,r._setZIndex(i.type)):i.oldVal=i.val=o.value,i._removeTooltip(!0),i._createTooltip(),t):(n.preventDefault(),t)},_createTooltip:function(){var t,n,i=this,r=i.owner,o=i.options.tooltip,a="",s=e(window);o.enabled&&(o.template&&(t=i.tooltipTemplate=f.template(o.template)),e(".k-slider-tooltip").remove(),i.tooltipDiv=e("<div class='k-widget k-tooltip k-slider-tooltip'><!-- --></div>").appendTo(document.body),a=r._getFormattedValue(i.val||r.value(),i),i.type||(n="k-callout-"+(r._isHorizontal?"s":"e"),i.tooltipInnerDiv="<div class='k-callout "+n+"'><!-- --></div>",a+=i.tooltipInnerDiv),i.tooltipDiv.html(a),i._scrollOffset={top:s.scrollTop(),left:s.scrollLeft()},i.moveTooltip())},drag:function(e){var t,n=this,i=n.owner,r=e.x.location,o=e.y.location,a=n.dragableArea.startPoint,s=n.dragableArea.endPoint;e.preventDefault(),n.val=i._isHorizontal?i._isRtl?n.constrainValue(r,a,s,s>r):n.constrainValue(r,a,s,r>=s):n.constrainValue(o,s,a,s>=o),n.oldVal!=n.val&&(n.oldVal=n.val,n.type?("firstHandle"==n.type?n.selectionStart=n.val<n.selectionEnd?n.val:n.selectionEnd=n.val:n.val>n.selectionStart?n.selectionEnd=n.val:n.selectionStart=n.selectionEnd=n.val,t={values:[n.selectionStart,n.selectionEnd],value:[n.selectionStart,n.selectionEnd]}):t={value:n.val},i.trigger(S,t)),n._updateTooltip(n.val)},_updateTooltip:function(e){var t=this,n=t.options,i=n.tooltip,r="";i.enabled&&(t.tooltipDiv||t._createTooltip(),r=t.owner._getFormattedValue(d(e),t),t.type||(r+=t.tooltipInnerDiv),t.tooltipDiv.html(r),t.moveTooltip())},dragcancel:function(){return this.owner._refresh(),e(document.documentElement).css("cursor",""),this._end()},dragend:function(){var t=this,n=t.owner;return e(document.documentElement).css("cursor",""),t.type?n._update(t.selectionStart,t.selectionEnd):n._update(t.val),t._end()},_end:function(){var e=this,t=e.owner;return t._focusWithMouse(e.element),t.element.on(H),!1},_removeTooltip:function(t){var n=this,i=n.owner;n.tooltipDiv&&i.options.tooltip.enabled&&i.options.enabled&&(t?(n.tooltipDiv.remove(),n.tooltipDiv=null):n.tooltipDiv.fadeOut("slow",function(){e(this).remove(),n.tooltipDiv=null}))},moveTooltip:function(){var t,n,i,r,o=this,a=o.owner,s=0,l=0,d=o.element,c=f.getOffset(d),u=8,p=e(window),h=o.tooltipDiv.find(".k-callout"),g=o.tooltipDiv.outerWidth(),m=o.tooltipDiv.outerHeight();o.type?(t=a.wrapper.find(L),c=f.getOffset(t.eq(0)),n=f.getOffset(t.eq(1)),a._isHorizontal?(s=n.top,l=c.left+(n.left-c.left)/2):(s=c.top+(n.top-c.top)/2,l=n.left),r=t.eq(0).outerWidth()+2*u):(s=c.top,l=c.left,r=d.outerWidth()+2*u),a._isHorizontal?(l-=parseInt((g-d[a._outerSize]())/2,10),s-=m+h.height()+u):(s-=parseInt((m-d[a._outerSize]())/2,10),l-=g+h.width()+u),a._isHorizontal?(i=o._flip(s,m,r,p.outerHeight()+o._scrollOffset.top),s+=i,l+=o._fit(l,g,p.outerWidth()+o._scrollOffset.left)):(i=o._flip(l,g,r,p.outerWidth()+o._scrollOffset.left),s+=o._fit(s,m,p.outerHeight()+o._scrollOffset.top),l+=i),i>0&&h&&(h.removeClass(),h.addClass("k-callout k-callout-"+(a._isHorizontal?"n":"w"))),o.tooltipDiv.css({top:s,left:l})},_fit:function(e,t,n){var i=0;return e+t>n&&(i=n-(e+t)),0>e&&(i=-e),i},_flip:function(e,t,n,i){var r=0;return e+t>i&&(r+=-(n+t)),0>e+r&&(r+=n+t),r},constrainValue:function(e,t,n,i){var r=this,o=0;return o=e>t&&n>e?r.owner._getValueFromPosition(e,r.dragableArea):i?r.options.max:r.options.min}},f.ui.plugin(K),p=$.extend({init:function(n,i){var r,o=this,a=e(n).find("input"),s=a.eq(0)[0],l=a.eq(1)[0];s.type="text",l.type="text",i=m({},{selectionStart:c(s,"value"),min:c(s,"min"),max:c(s,"max"),smallStep:c(s,"step")},{selectionEnd:c(l,"value"),min:c(l,"min"),max:c(l,"max"),smallStep:c(l,"step")},i),i&&i.enabled===t&&(i.enabled=!a.is("[disabled]")),$.fn.init.call(o,n,i),i=o.options,u(i.selectionStart)&&null!==i.selectionStart||(i.selectionStart=i.min,a.eq(0).val(i.min)),u(i.selectionEnd)&&null!==i.selectionEnd||(i.selectionEnd=i.max,a.eq(1).val(i.max)),r=o.wrapper.find(L),new p.Selection(r,o,i),o._firstHandleDrag=new K.Drag(r.eq(0),"firstHandle",o,i),o._lastHandleDrag=new K.Drag(r.eq(1),"lastHandle",o,i)},options:{name:"RangeSlider",leftDragHandleTitle:"drag",rightDragHandleTitle:"drag",tooltip:{format:"{0}"},selectionStart:null,selectionEnd:null},enable:function(n){var i,r=this,o=r.options;r.disable(),n!==!1&&(r.wrapper.removeClass(W).addClass(U),r.wrapper.find("input").removeAttr(G),i=function(n){var i,a,s,l,d,c,u,p=Q(n)[0];if(p){if(l=r._isHorizontal?p.location.pageX:p.location.pageY,d=r._getDraggableArea(),c=r._getValueFromPosition(l,d),u=e(n.target),u.hasClass("k-draghandle"))return u.addClass(V),t;c<o.selectionStart?(i=c,a=o.selectionEnd,s=r._firstHandleDrag):c>r.selectionEnd?(i=o.selectionStart,a=c,s=r._lastHandleDrag):c-o.selectionStart<=o.selectionEnd-c?(i=c,a=o.selectionEnd,s=r._firstHandleDrag):(i=o.selectionStart,a=c,s=r._lastHandleDrag),s.dragstart(n),r._setValueInRange(i,a),r._focusWithMouse(s.element)}},r.wrapper.find(N+", "+O).on(E,i).end().on(E,function(){e(document.documentElement).one("selectstart",f.preventDefault)}).on(I,function(){r._activeDragHandle._end()}),r.wrapper.find(L).attr(Y,0).on(F,function(){r._setTooltipTimeout()}).on(z,function(e){r._focusWithMouse(e.target),e.preventDefault()}).on(R,b(r._focus,r)).on(M,b(r._blur,r)),r.wrapper.find(L).off(B,f.preventDefault).eq(0).on(B,b(function(e){this._keydown(e,"firstHandle")},r)).end().eq(1).on(B,b(function(e){this._keydown(e,"lastHandle")},r)),r.options.enabled=!0)},disable:function(){var e=this;e.wrapper.removeClass(U).addClass(W),e.wrapper.find("input").prop(G,G),e.wrapper.find(N+", "+O).off(E).off(I),e.wrapper.find(L).attr(Y,-1).off(F).off(B).off(z).off(R).off(M),e.options.enabled=!1},_keydown:function(e,t){var n,i,r,o=this,a=o.options.selectionStart,s=o.options.selectionEnd;e.keyCode in o._keyMap&&(o._clearTooltipTimeout(),"firstHandle"==t?(r=o._activeHandleDrag=o._firstHandleDrag,a=o._keyMap[e.keyCode](a),a>s&&(s=a)):(r=o._activeHandleDrag=o._lastHandleDrag,s=o._keyMap[e.keyCode](s),a>s&&(a=s)),o._setValueInRange(a,s),n=Math.max(a,o.options.selectionStart),i=Math.min(s,o.options.selectionEnd),r.selectionEnd=Math.max(i,o.options.selectionStart),r.selectionStart=Math.min(n,o.options.selectionEnd),r._updateTooltip(o.value()[o._activeHandle]),e.preventDefault())},_update:function(e,t){var n=this,i=n.value(),r=i[0]!=e||i[1]!=t;n.value([e,t]),r&&n.trigger(T,{values:[e,t],value:[e,t]})},value:function(e){return e&&e.length?this._value(e[0],e[1]):this._value()},_value:function(e,n){var i=this,r=i.options,o=r.selectionStart,a=r.selectionEnd;return isNaN(e)&&isNaN(n)?[o,a]:(e=d(e),n=d(n),e>=r.min&&e<=r.max&&n>=r.min&&n<=r.max&&n>=e&&(o!=e||a!=n)&&(i.element.find("input").eq(0).prop("value",l(e)).end().eq(1).prop("value",l(n)),r.selectionStart=e,r.selectionEnd=n,i._refresh(),i._refreshAriaAttr(e,n)),t)},values:function(e,t){return w(e)?this._value(e[0],e[1]):this._value(e,t)},_refresh:function(){var e=this,t=e.options;e.trigger(P,{values:[t.selectionStart,t.selectionEnd],value:[t.selectionStart,t.selectionEnd]}),t.selectionStart==t.max&&t.selectionEnd==t.max&&e._setZIndex("firstHandle")},_refreshAriaAttr:function(e,t){var n,i=this,r=i.wrapper.find(L),o=i._activeHandleDrag;n=i._getFormattedValue([e,t],o),r.eq(0).attr("aria-valuenow",e),r.eq(1).attr("aria-valuenow",t),r.attr("aria-valuetext",n)},_setValueInRange:function(e,t){var n=this.options;e=y.max(y.min(e,n.max),n.min),t=y.max(y.min(t,n.max),n.min),e==n.max&&t==n.max&&this._setZIndex("firstHandle"),this._update(y.min(e,t),y.max(e,t))
},_setZIndex:function(t){this.wrapper.find(L).each(function(n){e(this).css("z-index","firstHandle"==t?1-n:n)})},destroy:function(){var e=this;h.fn.destroy.call(e),e.wrapper.off(D).find(N+", "+O).off(D).end().find(L).off(D),e._firstHandleDrag.draggable.destroy(),e._lastHandleDrag.draggable.destroy()}}),p.Selection=function(e,t,n){function i(i){i=i||[];var o=i[0]-n.min,a=i[1]-n.min,s=y.ceil(d(o/n.smallStep)),l=y.ceil(d(a/n.smallStep)),c=t._pixelSteps[s],u=t._pixelSteps[l],p=parseInt(e.eq(0)[t._outerSize]()/2,10),f=t._isRtl?2:0;e.eq(0).css(t._position,c-p-f).end().eq(1).css(t._position,u-p-f),r(c,u)}function r(e,n){var i,r,o=t._trackDiv.find(".k-slider-selection");i=y.abs(e-n),o[t._size](i),t._isRtl?(r=y.max(e,n),o.css("right",t._maxSelection-r-1)):(r=y.min(e,n),o.css(t._position,r-1))}i(t.value()),t.bind([T,S,P],function(e){i(e.values)})},f.ui.plugin(p)}(window.kendo.jQuery),function(e,t){function n(e){return m.test(e)}function i(e){return g.test(e)||/^\d+$/.test(e)}function r(e){return!n(e)&&!i(e)}function o(e,n){return function(i,r){var o,a=this.element.find(i).data(A);return 1==arguments.length?a[e]:(a[e]=r,n&&(o=this.element.data("kendo"+this.options.name),o.trigger(k)),t)}}function a(e){var t=this,n=e.orientation;t.owner=e,t._element=e.element,t.orientation=n,p(t,n===C?l:s),t._resizable=new d.ui.Resizable(e.element,{orientation:n,handle:".k-splitbar-draggable-"+n+"[data-marker="+e._marker+"]",hint:f(t._createHint,t),start:f(t._start,t),max:f(t._max,t),min:f(t._min,t),invalidClass:"k-restricted-size-"+n,resizeend:f(t._stop,t)})}var s,l,d=window.kendo,c=d.ui,u=d.keys,p=e.extend,f=e.proxy,h=c.Widget,g=/^\d+(\.\d+)?px$/i,m=/^\d+(\.\d+)?%$/i,v=".kendoSplitter",_="expand",b="collapse",w="contentLoad",y="error",k="resize",x="layoutChange",C="horizontal",T="vertical",S="mouseenter",D="click",A="pane",E="mouseleave",F="k-state-focused",I="k-"+A,P="."+I,B=h.extend({init:function(e,t){var n,i=this;h.fn.init.call(i,e,t),i.wrapper=i.element,n=i.options.orientation.toLowerCase()!=T,i.orientation=n?C:T,i._dimension=n?"width":"height",i._keys={decrease:n?u.LEFT:u.UP,increase:n?u.RIGHT:u.DOWN},i._resizeStep=10,i.bind(k,f(i._resize,i)),i._marker=d.guid().substring(0,8),i._resizeHandler=function(){i.trigger(k)},i._initPanes(),i.resizing=new a(i),i.element.triggerHandler("init"+v)},events:[_,b,w,y,k,x],_parentSplitter:function(){return this.element.parent().closest(".k-splitter")},_attachEvents:function(){var t,n=this,i=n.options.orientation,r=n._parentSplitter();n.element.children(".k-splitbar-draggable-"+i).on("keydown"+v,e.proxy(n._keydown,n)).on("mousedown"+v,function(e){e.currentTarget.focus()}).on("focus"+v,function(t){e(t.currentTarget).addClass(F)}).on("blur"+v,function(t){e(t.currentTarget).removeClass(F),n.resizing&&n.resizing.end()}).on(S+v,function(){e(this).addClass("k-splitbar-"+n.orientation+"-hover")}).on(E+v,function(){e(this).removeClass("k-splitbar-"+n.orientation+"-hover")}).on("mousedown"+v,function(){n._panes().append("<div class='k-splitter-overlay k-overlay' />")}).on("mouseup"+v,function(){n._panes().children(".k-splitter-overlay").remove()}).end().children(".k-splitbar").on("dblclick"+v,f(n._togglePane,n)).children(".k-collapse-next, .k-collapse-prev").on(D+v,n._arrowClick(b)).end().children(".k-expand-next, .k-expand-prev").on(D+v,n._arrowClick(_)).end().end(),r.length?(t=r.data("kendo"+n.options.name),t?t.bind(k,n._resizeHandler):r.off("init"+v).one("init"+v,function(){e(this).data("kendo"+n.options.name).bind(k,n._resizeHandler),n._resizeHandler()})):e(window).on("resize",n._resizeHandler)},_detachEvents:function(){var t=this,n=t._parentSplitter().data("kendo"+t.options.name);t.element.children(".k-splitbar-draggable-"+t.orientation).off(v).end().children(".k-splitbar").off("dblclick"+v).children(".k-collapse-next, .k-collapse-prev, .k-expand-next, .k-expand-prev").off(v),n?n.unbind(k,t._resizeHandler):e(window).off("resize",t._resizeHandler)},options:{name:"Splitter",orientation:C,panes:[]},destroy:function(){var e=this;h.fn.destroy.call(e),e._detachEvents(),e.resizing&&e.resizing.destroy(),d.destroy(e.element)},_keydown:function(t){var n,i=this,r=t.keyCode,o=i.resizing,a=e(t.currentTarget),s=i._keys,l=r===s.increase,d=r===s.decrease;l||d?(t.ctrlKey?(n=a[d?"next":"prev"](),o&&o.isResizing()&&o.end(),n[i._dimension]()?i._triggerAction(b,a[d?"prev":"next"]()):i._triggerAction(_,n)):o&&o.move((d?-1:1)*i._resizeStep,a),t.preventDefault()):r===u.ENTER&&o&&(o.end(),t.preventDefault())},_initPanes:function(){var e=this,t=e.options.panes||[];e.element.addClass("k-widget").addClass("k-splitter").children(":not(script)").each(function(n,i){var r=t&&t[n];e._initPane(i,r)}).end(),e.trigger(k)},_initPane:function(t,n){t=e(t).attr("role","group").addClass(I),t.data(A,n?n:{}).toggleClass("k-scrollable",n?n.scrollable!==!1:!0),this.ajaxRequest(t)},ajaxRequest:function(e,t,n){var i,r=this;e=r.element.find(e),i=e.data(A),t=t||i.contentUrl,t&&(e.append("<span class='k-icon k-loading k-pane-loading' />"),d.isLocalUrl(t)?jQuery.ajax({url:t,data:n||{},type:"GET",dataType:"html",success:function(t){e.html(t),r.trigger(w,{pane:e[0]})},error:function(t,n){r.trigger(y,{pane:e[0],status:n,xhr:t})}}):e.removeClass("k-scrollable").html("<iframe src='"+t+"' frameborder='0' class='k-content-frame'>"+"This page requires frames in order to show content"+"</iframe>"))},_triggerAction:function(e,t){this.trigger(e,{pane:t[0]})||this[e](t[0])},_togglePane:function(t){var n,i=this,r=e(t.target);r.closest(".k-splitter")[0]==i.element[0]&&(n=r.children(".k-icon:not(.k-resize-handle)"),1===n.length&&(n.is(".k-collapse-prev")?i._triggerAction(b,r.prev()):n.is(".k-collapse-next")?i._triggerAction(b,r.next()):n.is(".k-expand-prev")?i._triggerAction(_,r.prev()):n.is(".k-expand-next")&&i._triggerAction(_,r.next())))},_arrowClick:function(t){var n=this;return function(i){var r,o=e(i.target);o.closest(".k-splitter")[0]==n.element[0]&&(r=o.is(".k-"+t+"-prev")?o.parent().prev():o.parent().next(),n._triggerAction(t,r))}},_updateSplitBar:function(e,t,n){var i=function(e,t){return t?"<div class='k-icon "+e+"' />":""},r=this.orientation,o=t.resizable!==!1&&n.resizable!==!1,a=t.collapsible,s=t.collapsed,l=n.collapsible,d=n.collapsed;e.addClass("k-splitbar k-state-default k-secondary k-splitbar-"+r).attr("role","separator").attr("aria-expanded",!(s||d)).removeClass("k-splitbar-"+r+"-hover").toggleClass("k-splitbar-draggable-"+r,o&&!s&&!d).toggleClass("k-splitbar-static-"+r,!o&&!a&&!l).html(i("k-collapse-prev",a&&!s&&!d)+i("k-expand-prev",a&&s&&!d)+i("k-resize-handle",o)+i("k-collapse-next",l&&!d&&!s)+i("k-expand-next",l&&d&&!s))},_updateSplitBars:function(){var t=this;this.element.children(".k-splitbar").each(function(){var n=e(this),i=n.prevAll(P).first().data(A),r=n.nextAll(P).first().data(A);r&&t._updateSplitBar(n,i,r)})},_removeSplitBars:function(){this.element.children(".k-splitbar").remove()},_panes:function(){return this.element.children(P)},_resize:function(){var i,o,a,s,l,d,c,u,p,f,h=this,g=h.element,m=g.children(P),v=h.orientation==C,_=g.children(".k-splitbar"),b=_.length,w=v?"width":"height",y=g[w]();0===b?(b=m.length-1,m.slice(0,b).after("<div tabindex='0' class='k-splitbar' data-marker='"+h._marker+"' />"),h._updateSplitBars(),_=g.children(".k-splitbar")):h._updateSplitBars(),_.each(function(){y-=this[v?"offsetWidth":"offsetHeight"]}),i=0,o=0,a=e(),m.css({position:"absolute",top:0})[w](function(){var s,l=e(this).data(A)||{};if(l.collapsed)s=0,e(this).css("overflow","hidden");else{if(r(l.size))return a=a.add(this),t;s=parseInt(l.size,10),n(l.size)&&(s=Math.floor(s*y/100))}return o++,i+=s,s}),y-=i,s=a.length,l=Math.floor(y/s),a.slice(0,s-1).css(w,l).end().eq(s-1).css(w,y-(s-1)*l),d=0,c=v?"height":"width",u=v?"left":"top",p=v?"offsetWidth":"offsetHeight",0===s&&(f=m.filter(function(){return!(e(this).data(A)||{}).collapsed}).last(),f[w](y+f[0][p])),g.children(":not(script)").css(c,g[c]()).each(function(e,t){t.style[u]=Math.floor(d)+"px",d+=t[p]}),h._detachEvents(),h._attachEvents(),h.trigger(x)},toggle:function(e,n){var i,r=this;e=r.element.find(e),i=e.data(A),(n||i.collapsible)&&(1==arguments.length&&(n=i.collapsed===t?!1:i.collapsed),i.collapsed=!n,i.collapsed?e.css("overflow","hidden"):e.css("overflow",""),r.trigger(k))},collapse:function(e){this.toggle(e,!1)},expand:function(e){this.toggle(e,!0)},_addPane:function(e,t,n){var i=this;return n.length&&(i.options.panes.splice(t,0,e),i._initPane(n,e),i._removeSplitBars(),i.trigger(k)),n},append:function(t){t=t||{};var n=this,i=e("<div />").appendTo(n.element);return n._addPane(t,n.options.panes.length,i)},insertBefore:function(t,n){n=e(n),t=t||{};var i=this,r=n.index(".k-pane"),o=e("<div />").insertBefore(e(n));return i._addPane(t,r,o)},insertAfter:function(t,n){n=e(n),t=t||{};var i=this,r=n.index(".k-pane"),o=e("<div />").insertAfter(e(n));return i._addPane(t,r+1,o)},remove:function(t){t=e(t);var n=this;return t.length&&(d.destroy(t),t.each(function(t,i){n.options.panes.splice(e(i).index(".k-pane"),1),e(i).remove()}),n._removeSplitBars(),n.options.panes.length&&n.trigger(k)),n},size:o("size",!0),min:o("min"),max:o("max")});c.plugin(B),s={sizingProperty:"height",sizingDomProperty:"offsetHeight",alternateSizingProperty:"width",positioningProperty:"top",mousePositioningProperty:"pageY"},l={sizingProperty:"width",sizingDomProperty:"offsetWidth",alternateSizingProperty:"height",positioningProperty:"left",mousePositioningProperty:"pageX"},a.prototype={press:function(e){this._resizable.press(e)},move:function(e,t){this.pressed||(this.press(t),this.pressed=!0),this._resizable.target||this._resizable.press(t),this._resizable.move(e)},end:function(){this._resizable.end(),this.pressed=!1},destroy:function(){this._resizable.destroy()},isResizing:function(){return this._resizable.resizing},_createHint:function(t){var n=this;return e("<div class='k-ghost-splitbar k-ghost-splitbar-"+n.orientation+" k-state-default' />").css(n.alternateSizingProperty,t[n.alternateSizingProperty]())},_start:function(t){var n=this,r=e(t.currentTarget),o=r.prev(),a=r.next(),s=o.data(A),l=a.data(A),d=parseInt(o[0].style[n.positioningProperty],10),c=parseInt(a[0].style[n.positioningProperty],10)+a[0][n.sizingDomProperty]-r[0][n.sizingDomProperty],u=parseInt(n._element.css(n.sizingProperty),10),p=function(e){var t=parseInt(e,10);return(i(e)?t:u*t/100)||0},f=p(s.min),h=p(s.max)||c-d,g=p(l.min),m=p(l.max)||c-d;n.previousPane=o,n.nextPane=a,n._maxPosition=Math.min(c-g,d+h),n._minPosition=Math.max(d+f,c-m)},_max:function(){return this._maxPosition},_min:function(){return this._minPosition},_stop:function(t){var n,i,o,a,s,l,c,u,p=this,f=e(t.currentTarget),h=p.owner;return h._panes().children(".k-splitter-overlay").remove(),t.keyCode!==d.keys.ESC&&(n=t.position,i=f.prev(),o=f.next(),a=i.data(A),s=o.data(A),l=n-parseInt(i[0].style[p.positioningProperty],10),c=parseInt(o[0].style[p.positioningProperty],10)+o[0][p.sizingDomProperty]-n-f[0][p.sizingDomProperty],u=p._element.children(P).filter(function(){return r(e(this).data(A).size)}).length,(!r(a.size)||u>1)&&(r(a.size)&&u--,a.size=l+"px"),(!r(s.size)||u>1)&&(s.size=c+"px"),h._resizeHandler()),!1}}}(window.kendo.jQuery),function(e,t){function n(t){return e.map(i(t),function(e){return e.name}).join(", ")}function i(e){var t=e[0];return t.files?r(t.files):[{name:s(t.value),extension:a(t.value),size:null}]}function r(t){return e.map(t,function(e){return o(e)})}function o(e){var t=e.name||e.fileName;return{name:_.htmlEncode(t),extension:a(t),size:e.size||e.fileSize,rawFile:e}}function a(e){var t=e.match(y);return t?t[0]:""}function s(e){var t=e.lastIndexOf("\\");return-1!=t?e.substr(t+1):e}function l(t,n,i){var r,o;n._supportsRemove()&&(r=t.data("fileNames"),o=e.map(r,function(e){return e.name}),n._submitRemove(o,i,function(e,i,o){n._removeFileEntry(t),n.trigger(T,{operation:"remove",files:r,response:e,XMLHttpRequest:o})},function(e){n.trigger(S,{operation:"remove",files:r,XMLHttpRequest:e}),w("Server response: "+e.responseText)}))}function d(t,n,i){var r=!1,o="";try{o=e.parseJSON(c(t)),r=!0}catch(a){i()}r&&n(o)}function c(e){return(t===e||""===e)&&(e="{}"),e}function u(e){e.stopPropagation(),e.preventDefault()}function p(e,t,n,i){var r,o;e.on("dragenter"+t,function(){n(),o=new Date,r||(r=setInterval(function(){var e=new Date-o;e>100&&(i(),clearInterval(r),r=null)},100))}).on("dragover"+t,function(){o=new Date})}function f(e){return e.is(".k-file-progress, .k-file-success, .k-file-error")}function h(t){return e(t.target).closest(".k-file")}function g(){var n={},i=e("meta[name=csrf-token]").attr("content"),r=e("meta[name=csrf-param]").attr("content");return e("input[name^='__RequestVerificationToken']").each(function(){n[this.name]=this.value}),r!==t&&i!==t&&(n[r]=i),n}var m,v,_=window.kendo,b=_.ui.Widget,w=_.logToConsole,y=/\.([^\.]+)$/,k=".kendoUpload",x="select",C="upload",T="success",S="error",D="complete",A="cancel",E="progress",F="remove",I=b.extend({init:function(t,n){var i,r,o,a=this;b.fn.init.call(a,t,n),a.name=t.name,a.multiple=a.options.multiple,a.localization=a.options.localization,i=a.element,a.wrapper=i.closest(".k-upload"),0===a.wrapper.length&&(a.wrapper=a._wrapInput(i)),a._activeInput(i),a.toggle(a.options.enabled),r=a._ns=k+"-"+_.guid(),i.closest("form").on("submit"+r,e.proxy(a._onParentFormSubmit,a)).on("reset"+r,e.proxy(a._onParentFormReset,a)),a.options.async.saveUrl?(a._module=a._supportsFormData()?new v(a):new m(a),a._async=!0,o=a.options.files,o.length>0&&a._renderInitialFiles(o)):a._module=new P(a),a._supportsDrop()&&a._setupDropZone(),a.wrapper.on("click",".k-upload-action",e.proxy(a._onFileAction,a)).on("click",".k-upload-selected",e.proxy(a._onUploadSelected,a))},events:[x,C,T,S,D,A,E,F],options:{name:"Upload",enabled:!0,multiple:!0,showFileList:!0,template:"",files:[],async:{removeVerb:"POST",autoUpload:!0},localization:{select:"Select files...",cancel:"Cancel",retry:"Retry",remove:"Remove",uploadSelectedFiles:"Upload files",dropFilesHere:"drop files here to upload",statusUploading:"uploading",statusUploaded:"uploaded",statusFailed:"failed",headerStatusUploading:"Uploading...",headerStatusUploaded:"Done"}},setOptions:function(e){var t=this,n=t.element;b.fn.setOptions.call(t,e),t.multiple=t.options.multiple,n.attr("multiple",t._supportsMultiple()?t.multiple:!1),t.toggle(t.options.enabled)},enable:function(e){e=t===e?!0:e,this.toggle(e)},disable:function(){this.toggle(!1)},toggle:function(e){e=t===e?e:!e,this.wrapper.toggleClass("k-state-disabled",e),this.element.prop("disabled",e)},destroy:function(){var t=this;e(document).add(e(".k-dropzone",t.wrapper)).add(t.wrapper.closest("form")).off(t._ns),e(t.element).off(k),b.fn.destroy.call(t)},_addInput:function(t){if(t[0].nodeType){var n=this,i=t.clone().val("");i.insertAfter(n.element).data("kendoUpload",n),e(n.element).hide().removeAttr("id").off(k),n._activeInput(i)}},_activeInput:function(t){var n=this,i=n.wrapper;n.element=t,t.attr("multiple",n._supportsMultiple()?n.multiple:!1).attr("autocomplete","off").on("click"+k,function(e){i.hasClass("k-state-disabled")&&e.preventDefault()}).on("focus"+k,function(){e(this).parent().addClass("k-state-focused")}).on("blur"+k,function(){e(this).parent().removeClass("k-state-focused")}).on("change"+k,e.proxy(n._onInputChange,n))},_onInputChange:function(t){var n=this,r=e(t.target),o=n.trigger(x,{files:i(r)});o?(n._addInput(r),r.remove()):n._module.onSelect(t)},_onDrop:function(t){var n,i=t.originalEvent.dataTransfer,o=this,a=i.files;u(t),a.length>0&&(n=o.trigger(x,{files:r(a)}),n||o._module.onSelect({target:e(".k-dropzone",o.wrapper)},a))},_renderInitialFiles:function(t){var n,i,r=this,o=0;for(o=0;o<t.length;o++)n=t[o],i=r._enqueueFile(n.name,{fileNames:[n]}),i.addClass("k-file-success").data("files",[t[o]]),e(".k-progress",i).width("100%"),e(".k-upload-status",i).prepend("<span class='k-upload-pct'>100%</span>"),r._fileAction(i,F)},_prepareTemplateData:function(e,t){var n=t.fileNames,i={},r=0,o=0;for(o=0;o<n.length;o++)r+=n[o].size;return i.name=e,i.size=r,i.files=t.fileNames,i},_prepareDefaultFileEntryTemplate:function(t,n){var i="",r=e("<li class='k-file'><span class='k-progress'></span><span class='k-icon'></span><span class='k-filename' title='"+t+"'>"+t+"</span>"+"<strong class='k-upload-status'></strong>"+"</li>");return 1==n.fileNames.length&&n.fileNames[0].extension&&(i=n.fileNames[0].extension.substring(1),e(".k-icon",r).addClass("k-i-"+i)),r},_enqueueFile:function(t,n){var i,r,o,a=this,s=e(".k-upload-files",a.wrapper),l=a.options,d=l.template;return 0===s.length&&(s=e("<ul class='k-upload-files k-reset'></ul>").appendTo(a.wrapper),a.options.showFileList||s.hide(),a.wrapper.removeClass("k-upload-empty")),i=e(".k-file",s),d?(o=a._prepareTemplateData(t,n),d=_.template(d),r=e("<li class='k-file'>"+d(o)+"</li>"),r.find(".k-upload-action").addClass("k-button k-button-bare")):r=a._prepareDefaultFileEntryTemplate(t,n),r.appendTo(s).data(n),a._async||e(".k-progress",r).width("100%"),!a.multiple&&i.length>0&&a._module.onRemove({target:e(i,a.wrapper)}),r},_removeFileEntry:function(t){var n,i,r=this,o=t.closest(".k-upload-files");t.remove(),n=e(".k-file",o),i=e(".k-file-success, .k-file-error",o),i.length===n.length&&this._hideUploadButton(),0===n.length&&(o.remove(),r.wrapper.addClass("k-upload-empty"),r._hideHeaderUploadstatus())},_fileAction:function(e,t){var n={remove:"k-delete",cancel:"k-cancel",retry:"k-retry"},i={remove:"k-i-close",cancel:"k-i-close",retry:"k-i-refresh"};n.hasOwnProperty(t)&&(this._clearFileAction(e),this.options.template?e.find(".k-upload-action").addClass("k-button k-button-bare").append("<span class='k-icon "+i[t]+" "+n[t]+"' title='"+this.localization[t]+"'></span>").show():(e.find(".k-upload-status .k-upload-action").remove(),e.find(".k-upload-status").append(this._renderAction(n[t],this.localization[t],i[t]))))},_fileState:function(t,n){var i=this.localization,r={uploading:{text:i.statusUploading},uploaded:{text:i.statusUploaded},failed:{text:i.statusFailed}},o=r[n];o&&e(".k-icon:not(.k-delete, .k-cancel, .k-retry)",t).text(o.text)},_renderAction:function(t,n,i){return""!==t?e("<button type='button' class='k-button k-button-bare k-upload-action'><span class='k-icon "+i+" "+t+"' title='"+n+"'></span>"+"</button>"):e("<button type='button' class='k-button'>"+n+"</button>")},_clearFileAction:function(t){e(".k-upload-action",t).empty().hide()},_onFileAction:function(t){var n,i,r,o,a=this;return a.wrapper.hasClass("k-state-disabled")||(n=e(t.target).closest(".k-upload-action"),i=n.find(".k-icon"),r=n.closest(".k-file"),o={files:r.data("fileNames")},i.hasClass("k-delete")?a.trigger(F,o)||a._module.onRemove({target:e(r,a.wrapper)},o.data):i.hasClass("k-cancel")?(a.trigger(A,o),a._module.onCancel({target:e(r,a.wrapper)}),this._checkAllComplete(),a._updateHeaderUploadStatus()):i.hasClass("k-retry")&&(e(".k-warning",r).remove(),a._module.onRetry({target:e(r,a.wrapper)}))),!1},_onUploadSelected:function(){return this._module.onSaveSelected(),!1},_onFileProgress:function(t,n){var i;this.options.template?e(".k-progress",t.target).width(n+"%"):(i=e(".k-upload-pct",t.target),0===i.length&&e(".k-upload-status",t.target).prepend("<span class='k-upload-pct'></span>"),e(".k-upload-pct",t.target).text(n+"%"),e(".k-progress",t.target).width(n+"%")),this.trigger(E,{files:h(t).data("fileNames"),percentComplete:n})},_onUploadSuccess:function(e,t,n){var i=h(e);this._fileState(i,"uploaded"),i.removeClass("k-file-progress").addClass("k-file-success"),this._updateHeaderUploadStatus(),this.trigger(T,{files:i.data("fileNames"),response:t,operation:"upload",XMLHttpRequest:n}),this._supportsRemove()?this._fileAction(i,F):this._clearFileAction(i),this._checkAllComplete()},_onUploadError:function(t,n){var i=h(t),r=e(".k-upload-pct",i);this._fileState(i,"failed"),i.removeClass("k-file-progress").addClass("k-file-error"),e(".k-progress",i).width("100%"),r.length>0?r.empty().removeClass("k-upload-pct").addClass("k-icon k-warning"):e(".k-upload-status",i).prepend("<span class='k-icon k-warning'></span>"),this._updateHeaderUploadStatus(),this._fileAction(i,"retry"),this.trigger(S,{operation:"upload",files:i.data("fileNames"),XMLHttpRequest:n}),w("Server response: "+n.responseText),this._checkAllComplete()},_showUploadButton:function(){var t=e(".k-upload-selected",this.wrapper);0===t.length&&(t=this._renderAction("",this.localization.uploadSelectedFiles).addClass("k-upload-selected")),this.wrapper.append(t)},_hideUploadButton:function(){e(".k-upload-selected",this.wrapper).remove()},_showHeaderUploadStatus:function(){var t=this.localization,n=e(".k-dropzone",this.wrapper),i=e(".k-upload-status-total",this.wrapper);0!==i.length&&i.remove(),i='<strong class="k-upload-status k-upload-status-total">'+t.headerStatusUploading+'<span class="k-icon k-loading">'+t.statusUploading+"</span>"+"</strong>",n.length>0?n.append(i):e(".k-upload-button",this.wrapper).after(i)},_updateHeaderUploadStatus:function(){var t,n,i=e(".k-file",this.wrapper).not(".k-file-success, .k-file-error");0===i.length&&(t=e(".k-upload-status-total",this.wrapper),n=e(".k-icon",t).removeClass("k-loading").addClass("k-warning").text(this.localization.statusUploaded),t.text(this.localization.headerStatusUploaded).append(n))},_hideHeaderUploadstatus:function(){e(".k-upload-status-total",this.wrapper).remove()},_onParentFormSubmit:function(){var n,i=this,r=i.element;t!==this._module.onAbort&&this._module.onAbort(),r.value||(n=e(r),n.attr("disabled","disabled"),window.setTimeout(function(){n.removeAttr("disabled")},0))},_onParentFormReset:function(){e(".k-upload-files",this.wrapper).remove()},_supportsFormData:function(){return"undefined"!=typeof FormData},_supportsMultiple:function(){var e=this._userAgent().indexOf("Windows")>-1;return!(_.support.browser.opera||_.support.browser.safari&&e)},_supportsDrop:function(){var e=this._userAgent().toLowerCase(),t=/chrome/.test(e),n=!t&&/safari/.test(e),i=n&&/windows/.test(e);return!i&&this._supportsFormData()&&this.options.async.saveUrl},_userAgent:function(){return navigator.userAgent},_setupDropZone:function(){var t,n,i=this;e(".k-upload-button",this.wrapper).wrap("<div class='k-dropzone'></div>"),t=i._ns,n=e(".k-dropzone",i.wrapper).append(e("<em>"+i.localization.dropFilesHere+"</em>")).on("dragenter"+t,u).on("dragover"+t,function(e){e.preventDefault()}).on("drop"+t,e.proxy(this._onDrop,this)),p(n,t,function(){n.addClass("k-dropzone-hovered")},function(){n.removeClass("k-dropzone-hovered")}),p(e(document),t,function(){n.addClass("k-dropzone-active"),n.closest(".k-upload").removeClass("k-upload-empty")},function(){n.removeClass("k-dropzone-active"),0===e("li.k-file",n.closest(".k-upload")).length&&n.closest(".k-upload").addClass("k-upload-empty")})},_supportsRemove:function(){return!!this.options.async.removeUrl},_submitRemove:function(t,n,i,r){var o=this,a=o.options.async.removeField||"fileNames",s=e.extend(n,g());s[a]=t,jQuery.ajax({type:this.options.async.removeVerb,dataType:"json",dataFilter:c,url:this.options.async.removeUrl,traditional:!0,data:s,success:i,error:r})},_wrapInput:function(e){var t=this,n=t.options;return e.wrap("<div class='k-widget k-upload k-header'><div class='k-button k-upload-button'></div></div>"),n.async.saveUrl||e.closest(".k-upload").addClass("k-upload-sync"),e.closest(".k-upload").addClass("k-upload-empty"),e.closest(".k-button").append("<span>"+this.localization.select+"</span>"),e.closest(".k-upload")},_checkAllComplete:function(){0===e(".k-file.k-file-progress",this.wrapper).length&&this.trigger(D)}}),P=function(e){this.name="syncUploadModule",this.element=e.wrapper,this.upload=e,this.element.closest("form").attr("enctype","multipart/form-data").attr("encoding","multipart/form-data")};P.prototype={onSelect:function(t){var r,o=this.upload,a=e(t.target);o._addInput(a),r=o._enqueueFile(n(a),{relatedInput:a,fileNames:i(a)}),o._fileAction(r,F)},onRemove:function(e){var t=h(e);t.data("relatedInput").remove(),this.upload._removeFileEntry(t)}},m=function(e){this.name="iframeUploadModule",this.element=e.wrapper,this.upload=e,this.iframes=[]},I._frameId=0,m.prototype={onSelect:function(t){var n=this.upload,i=e(t.target),r=this.prepareUpload(i);n.options.async.autoUpload?this.performUpload(r):(n._supportsRemove()&&this.upload._fileAction(r,F),n._showUploadButton())},prepareUpload:function(t){var r,o,a,s=this.upload,l=e(s.element),d=s.options.async.saveField||t.attr("name");return s._addInput(t),t.attr("name",d),r=this.createFrame(s.name+"_"+I._frameId++),this.registerFrame(r),o=this.createForm(s.options.async.saveUrl,r.attr("name")).append(l),a=s._enqueueFile(n(t),{frame:r,relatedInput:l,fileNames:i(t)}),r.data({form:o,file:a}),a},performUpload:function(t){var n,i,r,o={files:t.data("fileNames")},a=t.data("frame"),s=this.upload;if(s.trigger(C,o))s._removeFileEntry(a.data("file")),this.cleanupFrame(a),this.unregisterFrame(a);else{s._hideUploadButton(),s._showHeaderUploadStatus(),a.appendTo(document.body),n=a.data("form").attr("action",s.options.async.saveUrl).appendTo(document.body),o.data=e.extend({},o.data,g());for(i in o.data)r=n.find("input[name='"+i+"']"),0===r.length&&(r=e("<input>",{type:"hidden",name:i}).appendTo(n)),r.val(o.data[i]);s._fileAction(t,A),s._fileState(t,"uploading"),e(t).addClass("k-file-progress"),a.one("load",e.proxy(this.onIframeLoad,this)),n[0].submit()}},onSaveSelected:function(){var t=this;e(".k-file",this.element).each(function(){var n=e(this),i=f(n);i||t.performUpload(n)})},onIframeLoad:function(t){var n,i=e(t.target);try{n=i.contents().text()}catch(r){n="Error trying to get server response: "+r}this.processResponse(i,n)},processResponse:function(t,n){var i=t.data("file"),r=this,o={responseText:n};d(n,function(n){e.extend(o,{statusText:"OK",status:"200"}),r.upload._onFileProgress({target:e(i,r.upload.wrapper)},100),r.upload._onUploadSuccess({target:e(i,r.upload.wrapper)},n,o),r.cleanupFrame(t),r.unregisterFrame(t)},function(){e.extend(o,{statusText:"error",status:"500"}),r.upload._onUploadError({target:e(i,r.upload.wrapper)},o)})},onCancel:function(t){var n=e(t.target).data("frame");this.stopFrameSubmit(n),this.cleanupFrame(n),this.unregisterFrame(n),this.upload._removeFileEntry(n.data("file"))},onRetry:function(e){var t=h(e);this.performUpload(t)},onRemove:function(e,t){var n=h(e),i=n.data("frame");i?(this.unregisterFrame(i),this.upload._removeFileEntry(n),this.cleanupFrame(i)):l(n,this.upload,t)},onAbort:function(){var t=this.element,n=this;e.each(this.iframes,function(){e("input",this.data("form")).appendTo(t),n.stopFrameSubmit(this[0]),this.data("form").remove(),this.remove()}),this.iframes=[]},createFrame:function(t){return e("<iframe name='"+t+"'"+" id='"+t+"'"+" style='display:none;' />")},createForm:function(t,n){return e("<form enctype='multipart/form-data' method='POST' action='"+t+"'"+" target='"+n+"'"+"/>")},stopFrameSubmit:function(e){t!==e.stop?e.stop():e.document&&e.document.execCommand("Stop")},registerFrame:function(e){this.iframes.push(e)},unregisterFrame:function(t){this.iframes=e.grep(this.iframes,function(e){return e.attr("name")!=t.attr("name")})},cleanupFrame:function(e){var t=e.data("form");e.data("file").data("frame",null),setTimeout(function(){t.remove(),e.remove()},1)}},v=function(e){this.name="formDataUploadModule",this.element=e.wrapper,this.upload=e},v.prototype={onSelect:function(t,n){var i=this.upload,o=this,a=e(t.target),s=n?r(n):this.inputFiles(a),l=this.prepareUpload(a,s);e.each(l,function(){i.options.async.autoUpload?o.performUpload(this):(i._supportsRemove()&&i._fileAction(this,F),i._showUploadButton())})},prepareUpload:function(t,n){var i=this.enqueueFiles(n);return t.is("input")&&(e.each(i,function(){e(this).data("relatedInput",t)}),t.data("relatedFileEntries",i),this.upload._addInput(t)),i},enqueueFiles:function(t){var n,i,r,o,a=this.upload,s=t.length,l=[];if(a.options.async.batch===!0)n=e.map(t,function(e){return e.name}).join(", "),o=a._enqueueFile(n,{fileNames:t}),o.data("files",t),l.push(o);else for(i=0;s>i;i++)r=t[i],n=r.name,o=a._enqueueFile(n,{fileNames:[r]}),o.data("files",[r]),l.push(o);return l},inputFiles:function(e){return i(e)},performUpload:function(t){var n,i=this.upload,r=this.createFormData(t.data("files")),o=new XMLHttpRequest,a={files:t.data("fileNames"),XMLHttpRequest:o};if(i.trigger(C,a))this.removeFileEntry(t);else{i._fileAction(t,A),i._hideUploadButton(),i._showHeaderUploadStatus(),a.data=e.extend({},a.data,g());for(n in a.data)r.append(n,a.data[n]);i._fileState(t,"uploading"),e(t).addClass("k-file-progress"),this.postFormData(i.options.async.saveUrl,r,t,o)}},onSaveSelected:function(){var t=this;e(".k-file",this.element).each(function(){var n=e(this),i=f(n);i||t.performUpload(n)})},onCancel:function(e){var t=h(e);this.stopUploadRequest(t),this.removeFileEntry(t)},onRetry:function(e){var t=h(e);this.performUpload(t)},onRemove:function(e,t){var n=h(e);n.hasClass("k-file-success")?l(n,this.upload,t):this.removeFileEntry(n)},postFormData:function(e,t,n,i){var r=this;n.data("request",i),i.addEventListener("load",function(e){r.onRequestSuccess.call(r,e,n)},!1),i.addEventListener(S,function(e){r.onRequestError.call(r,e,n)},!1),i.upload.addEventListener("progress",function(e){r.onRequestProgress.call(r,e,n)},!1),i.open("POST",e,!0),i.withCredentials="true",i.send(t)},createFormData:function(e){var t,n=new FormData,i=this.upload,r=e.length;for(t=0;r>t;t++)n.append(i.options.async.saveField||i.name,e[t].rawFile);return n},onRequestSuccess:function(t,n){function i(){o.upload._onUploadError({target:e(n,o.upload.wrapper)},r)}var r=t.target,o=this;r.status>=200&&r.status<=299?d(r.responseText,function(t){o.upload._onFileProgress({target:e(n,o.upload.wrapper)},100),o.upload._onUploadSuccess({target:e(n,o.upload.wrapper)},t,r),o.cleanupFileEntry(n)},i):i()},onRequestError:function(t,n){var i=t.target;this.upload._onUploadError({target:e(n,this.upload.wrapper)},i)},cleanupFileEntry:function(t){var n=t.data("relatedInput"),i=!0;n&&(e.each(n.data("relatedFileEntries")||[],function(){this.parent().length>0&&this[0]!=t[0]&&(i=i&&this.hasClass("k-file-success"))}),i&&n.remove())},removeFileEntry:function(e){this.cleanupFileEntry(e),this.upload._removeFileEntry(e)},onRequestProgress:function(t,n){var i=Math.round(100*t.loaded/t.total);this.upload._onFileProgress({target:e(n,this.upload.wrapper)},i)},stopUploadRequest:function(e){e.data("request").abort()}},_.ui.plugin(I)}(window.kendo.jQuery),function(e,t){function n(e){return t!==e}function i(e,t,n){return Math.max(Math.min(parseInt(e,10),1/0===n?n:parseInt(n,10)),parseInt(t,10))}function r(e,t){return function(){var n=this,i=n.wrapper,r=i[0].style,o=n.options;if(!o.isMaximized&&!o.isMinimized)return n.restoreOptions={width:r.width,height:r.height},i.find(k).hide().end().find(U).parent().hide().eq(0).before($.action({name:"Restore"})),t.call(n),"maximize"==e?n.wrapper.find(w).find(G).parent().hide():n.wrapper.find(w).find(G).parent().show(),n}}function o(e){var t=this;t.owner=e,t._draggable=new d(e.wrapper,{filter:k,group:e.wrapper.id+"-resizing",dragstart:p(t.dragstart,t),drag:p(t.drag,t),dragend:p(t.dragend,t)})}function a(e,t){var n=this;n.owner=e,n._draggable=new d(e.wrapper,{filter:t,group:e.wrapper.id+"-moving",dragstart:p(n.dragstart,n),drag:p(n.drag,n),dragend:p(n.dragend,n),dragcancel:p(n.dragcancel,n)})}var s=window.kendo,l=s.ui.Widget,d=s.ui.Draggable,c=e.isPlainObject,u=s._activeElement,p=e.proxy,f=e.extend,h=e.each,g=s.template,m="body",v=".kendoWindow",_=".k-window",b=".k-window-title",w=b+"bar",y=".k-window-content",k=".k-resize-handle",x=".k-overlay",C="k-content-frame",T="k-loading",S="k-state-hover",D="k-state-focused",A=":visible",E="hidden",F="cursor",I="open",P="activate",B="deactivate",z="close",H="refresh",R="resize",M="dragstart",L="dragend",O="error",N="overflow",V="zIndex",U=".k-window-actions .k-i-minimize,.k-window-actions .k-i-maximize",W=".k-i-pin",j=".k-i-unpin",G=W+","+j,q=".k-window-titlebar .k-window-action",Y=s.isLocalUrl,Q=l.extend({init:function(i,r){var o,a,d,u,f,h,g=this,m={},k=!1,x=r&&r.actions&&!r.actions.length;
l.fn.init.call(g,i,r),r=g.options,i=g.element,u=r.content,x&&(r.actions=[]),g.appendTo=e(e(r.appendTo)[0]||document.body),g._animations(),u&&!c(u)&&(u=r.content={url:u}),i.find("script").filter(function(){return!this.type||this.type.toLowerCase().indexOf("script")>=0}).remove(),i.parent().is(g.appendTo)||r.position.top!==t&&r.position.left!==t||(i.is(A)?(m=i.offset(),k=!0):(a=i.css("visibility"),d=i.css("display"),i.css({visibility:E,display:""}),m=i.offset(),i.css({visibility:a,display:d}))),n(r.visible)&&null!==r.visible||(r.visible=i.is(A)),o=g.wrapper=i.closest(_),i.is(".k-content")&&o[0]||(i.addClass("k-window-content k-content"),g._createWindow(i,r),o=g.wrapper=i.closest(_),g._dimensions()),o.css({top:r.position.top||m.top||"",left:r.position.left||m.left||""}),r.pinned&&g.pin(!0),u&&g.refresh(u),r.visible&&g.toFront(),f=o.children(y),g._tabindex(f),r.visible&&r.modal&&g._overlay(o.is(A)).css({opacity:.5}),o.on("mouseenter"+v,q,function(){e(this).addClass(S)}).on("mouseleave"+v,q,function(){e(this).removeClass(S)}).on("click"+v,q,p(g._windowActionHandler,g)),f.on("keydown"+v,p(g._keydown,g)).on("focus"+v,function(){o.addClass(D)}).on("blur"+v,function(){o.removeClass(D)}),this._resizable(),this._draggable(),h=i.attr("id"),h&&(h+="_wnd_title",o.find(w).children(b).attr("id",h),f.attr({role:"dialog","aria-labelledby":h})),o.add(o.find(".k-resize-handle,.k-window-titlebar")).on("mousedown"+v,p(g.toFront,g)),g.touchScroller=s.touchScroller(i),g._resizeHandler=function(e){return g._onDocumentResize(e)},e(window).on("resize",g._resizeHandler),r.visible&&(g.trigger(I),g.trigger(P)),s.notify(g)},_dimensions:function(){var e=this,t=e.wrapper,n=e.options,r=n.width,o=n.height,a=n.maxHeight;e.title(n.title),h(["minWidth","minHeight","maxWidth","maxHeight"],function(e,i){var r=n[i];r&&1/0!=r&&t.css(i,r)}),a&&1/0!=a&&e.element.css("maxHeight",a),r&&((""+r).indexOf("%")>0?t.width(r):t.width(i(r,n.minWidth,n.maxWidth))),o&&((""+o).indexOf("%")>0?t.height(o):t.height(i(o,n.minHeight,n.maxHeight))),n.visible||t.hide()},_animations:function(){var e=this.options;e.animation===!1&&(e.animation={open:{effects:{}},close:{hide:!0,effects:{}}})},_resizable:function(){var t=this.options.resizable,n=this.wrapper;t?(n.on("dblclick"+v,w,p(function(t){e(t.target).closest(".k-window-action").length||this.toggleMaximization()},this)),h("n e s w se sw ne nw".split(" "),function(e,t){n.append($.resizeHandle(t))}),this.resizing=new o(this)):this.resizing&&(n.off("dblclick"+v).find(k).remove(),this.resizing.destroy(),this.resizing=null)},_draggable:function(){var e=this.options.draggable;e?this.dragging=new a(this,e.dragHandle||w):this.dragging&&(this.dragging.destroy(),this.dragging=null)},setOptions:function(e){l.fn.setOptions.call(this,e),this._animations(),this._dimensions(),this._resizable(),this._draggable()},events:[I,P,B,z,H,R,M,L,O],options:{name:"Window",animation:{open:{effects:{zoom:{direction:"in"},fade:{direction:"in"}},duration:350},close:{effects:{zoom:{direction:"out",properties:{scale:.7}},fade:{direction:"out"}},duration:350,hide:!0}},title:"",actions:["Close"],autoFocus:!0,modal:!1,resizable:!0,draggable:!0,minWidth:90,minHeight:50,maxWidth:1/0,maxHeight:1/0,pinned:!1,position:{},content:null,visible:null,height:null,width:null},_closable:function(){return e.inArray("close",e.map(this.options.actions,function(e){return e.toLowerCase()}))>-1},_keydown:function(e){var t,n,r,o,a=this,l=a.options,d=s.keys,c=e.keyCode,u=a.wrapper,p=10,f=a.options.isMaximized;e.target!=e.currentTarget||a._closing||(c==d.ESC&&a._closable()&&a._close(!0),!l.draggable||e.ctrlKey||f||(t=s.getOffset(u),c==d.UP?n=u.css("top",t.top-p):c==d.DOWN?n=u.css("top",t.top+p):c==d.LEFT?n=u.css("left",t.left-p):c==d.RIGHT&&(n=u.css("left",t.left+p))),l.resizable&&e.ctrlKey&&!f&&(c==d.UP?(n=!0,o=u.height()-p):c==d.DOWN&&(n=!0,o=u.height()+p),c==d.LEFT?(n=!0,r=u.width()-p):c==d.RIGHT&&(n=!0,r=u.width()+p),n&&(u.css({width:i(r,l.minWidth,l.maxWidth),height:i(o,l.minHeight,l.maxHeight)}),a.trigger(R))),n&&e.preventDefault())},_overlay:function(t){var n=this.appendTo.children(x),i=this.wrapper;return n.length||(n=e("<div class='k-overlay' />")),n.insertBefore(i[0]).toggle(t).css(V,parseInt(i.css(V),10)-1),n},_windowActionHandler:function(n){var i=e(n.target).closest(".k-window-action").find(".k-icon"),r=this;r._closing||h({"k-i-close":function(){r._close(!0)},"k-i-maximize":r.maximize,"k-i-minimize":r.minimize,"k-i-restore":r.restore,"k-i-refresh":r.refresh,"k-i-pin":r.pin,"k-i-unpin":r.unpin},function(e,o){return i.hasClass(e)?(n.preventDefault(),o.call(r),!1):t})},_modals:function(){var t=this;return e(_).filter(function(){var n=e(this),i=t._object(n).options;return i.modal&&i.visible&&n.is(A)}).sort(function(t,n){return+e(t).css("zIndex")-+e(n).css("zIndex")})},_object:function(e){var t=e.children(y);return t.data("kendoWindow")||t.data("kendo"+this.options.name)},center:function(){var t=this,n=t.wrapper,i=e(window);return t.options.isMaximized?t:(n.css({left:i.scrollLeft()+Math.max(0,(i.width()-n.width())/2),top:i.scrollTop()+Math.max(0,(i.height()-n.height())/2)}),t)},title:function(e){var t=this,n=t.wrapper,i=t.options,r=n.find(w),o=r.children(b),a=r.outerHeight();return arguments.length?(e===!1?(n.addClass("k-window-titleless"),r.remove()):(r.length||n.prepend($.titlebar(f($,i))),n.css("padding-top",a),r.css("margin-top",-a)),o.text(e),t):o.text()},content:function(e){var t=this.wrapper.children(y),n=t.children(".km-scroll-container");return t=n[0]?n:t,e?(s.destroy(this.element.children()),t.html(e),this):t.html()},open:function(){var t,n,i=this,r=i.wrapper,o=i.options,a=o.animation.open,l=r.children(y),d=l.css(N);return i.trigger(I)||(i._closing&&r.kendoStop(!0,!0),i._closing=!1,i.toFront(),o.autoFocus&&i.element.focus(),o.visible=!0,o.modal&&(t=i._overlay(!1),t.kendoStop(!0,!0),a.duration&&s.effects.Fade?(n=s.fx(t).fadeIn(),n.duration(a.duration||0),n.endValue(.5),n.play()):t.css("opacity",.5),t.show()),r.is(A)||(l.css(N,E),r.show().kendoStop().kendoAnimate({effects:a.effects,duration:a.duration,complete:function(){o.autoFocus&&i.element.focus(),i.trigger(P),l.css(N,d)}}))),o.isMaximized&&(i._documentScrollTop=e(document).scrollTop(),e("html, body").css(N,E)),i},_removeOverlay:function(n){var i,r=this._modals(),o=this.options,a=o.modal&&!r.length,l=o.modal?this._overlay(!0):e(t),d=o.animation.close;a?!n&&d.duration&&s.effects.Fade?(i=s.fx(l).fadeOut(),i.duration(d.duration||0),i.startValue(.5),i.play()):this._overlay(!1).remove():r.length&&this._object(r.last())._overlay(!0)},_close:function(t){var n=this,i=n.wrapper,r=n.options,o=r.animation.open,a=r.animation.close;i.is(A)&&!n.trigger(z,{userTriggered:!!t})&&(n._closing=!0,r.visible=!1,e(_).each(function(t,n){var r=e(n).find(y);n!=i&&r.find("> ."+C).length>0&&r.children(x).remove()}),this._removeOverlay(),i.kendoStop().kendoAnimate({effects:a.effects||o.effects,reverse:a.reverse===!0,duration:a.duration,complete:function(){i.hide().css("opacity",""),n.trigger(B);var e=n._object(n._modals().last());e&&e.toFront()}})),n.options.isMaximized&&(e("html, body").css(N,""),n._documentScrollTop&&n._documentScrollTop>0&&e(document).scrollTop(n._documentScrollTop))},close:function(){return this._close(!1),this},toFront:function(t){var n,i,r=this,o=r.wrapper,a=o[0],s=+o.css(V),l=s,d=u(),c=r.element,p=t&&t.target?t.target:null;return e(_).each(function(t,n){var i=e(n),r=i.css(V),o=i.find(y);isNaN(r)||(s=Math.max(+r,s)),n!=a&&o.find("> ."+C).length>0&&o.append($.overlay)}),(!o[0].style.zIndex||s>l)&&o.css(V,s+2),r.element.find("> .k-overlay").remove(),!r.options.autoFocus||e(d).is(c)||e(p).is(q+","+q+" .k-icon,:input,a")||c.find(d).length&&c.find(p).length||(c.focus(),n=e(window).scrollTop(),i=parseInt(r.wrapper.position().top,10),i>0&&0>i-n&&(n>0?e(window).scrollTop(i):r.wrapper.css("top",n))),r},toggleMaximization:function(){return this._closing?this:this[this.options.isMaximized?"restore":"maximize"]()},restore:function(){var t=this,n=t.options,i=n.minHeight,r=t.restoreOptions;if(n.isMaximized||n.isMinimized)return i&&1/0!=i&&t.wrapper.css("min-height",i),t.wrapper.css({position:n.pinned?"fixed":"absolute",left:r.left,top:r.top,width:r.width,height:r.height}).find(".k-window-content,.k-resize-handle").show().end().find(".k-window-titlebar .k-i-restore").parent().remove().end().end().find(U).parent().show().end().end().find(G).parent().show(),e("html, body").css(N,""),this._documentScrollTop&&this._documentScrollTop>0&&e(document).scrollTop(this._documentScrollTop),n.isMaximized=n.isMinimized=!1,t.trigger(R),t},maximize:r("maximize",function(){var t=this,n=t.wrapper,i=n.position();f(t.restoreOptions,{left:i.left,top:i.top}),n.css({left:0,top:0,position:"fixed"}),this._documentScrollTop=e(document).scrollTop(),e("html, body").css(N,E),t.options.isMaximized=!0,t._onDocumentResize()}),minimize:r("minimize",function(){var e=this;e.wrapper.css({height:"",minHeight:""}),e.element.hide(),e.options.isMinimized=!0}),pin:function(t){var n=this,i=e(window),r=n.wrapper,o=parseInt(r.css("top"),10),a=parseInt(r.css("left"),10);(t||!n.options.pinned&&!n.options.isMaximized)&&(r.css({position:"fixed",top:o-i.scrollTop(),left:a-i.scrollLeft()}),r.find(w).find(W).addClass("k-i-unpin").removeClass("k-i-pin"),n.options.pinned=!0)},unpin:function(){var t=this,n=e(window),i=t.wrapper,r=parseInt(i.css("top"),10),o=parseInt(i.css("left"),10);t.options.pinned&&!t.options.isMaximized&&(i.css({position:"",top:r+n.scrollTop(),left:o+n.scrollLeft()}),i.find(w).find(j).addClass("k-i-pin").removeClass("k-i-unpin"),t.options.pinned=!1)},_onDocumentResize:function(){var t=this,n=t.wrapper,i=e(window);t.options.isMaximized&&(n.css({width:i.width(),height:i.height()-parseInt(n.css("padding-top"),10)}),t.trigger(R))},refresh:function(t){var i,r,o,a=this,s=a.options,l=e(a.element);return c(t)||(t={url:t}),t=f({},s.content,t),r=n(s.iframe)?s.iframe:t.iframe,o=t.url,o?(n(r)||(r=!Y(o)),r?(i=l.find("."+C)[0],i?i.src=o||i.src:l.html($.contentFrame(f({},s,{content:t}))),l.find("."+C).unbind("load"+v).on("load"+v,function(){a.trigger(H)})):a._ajaxRequest(t)):(t.template&&a.content(g(t.template)({})),a.trigger(H)),a},_ajaxRequest:function(t){var n=this,i=t.template,r=n.wrapper.find(".k-window-titlebar .k-i-refresh"),o=setTimeout(function(){r.addClass(T)},100);e.ajax(f({type:"GET",dataType:"html",cache:!1,error:function(e,t){n.trigger(O,{status:t,xhr:e})},complete:function(){clearTimeout(o),r.removeClass(T)},success:function(e){i&&(e=g(i)(e||{})),n.content(e),n.element.prop("scrollTop",0),n.trigger(H)}},t))},destroy:function(){var t=this.wrapper;l.fn.destroy.call(this),s.destroy(t),this.resizing&&this.resizing.destroy(),this.dragging&&this.dragging.destroy(),this.element.children("iframe").remove(),t.find(".k-resize-handle,.k-window-titlebar").off(v),t.remove().off(v),e(window).off("resize",this._resizeHandler),this._removeOverlay(!0)},_createWindow:function(){var t,n,i=this,r=i.element,o=i.options,a=s.support.isRtl(r);o.scrollable===!1&&r.attr("style","overflow:hidden;"),n=e($.wrapper(o)),o.title!==!1&&n.append($.titlebar(f($,o))),t=r.find("iframe:not(.k-content)").map(function(){var e=this.getAttribute("src");return this.src="",e}),n.toggleClass("k-rtl",a).appendTo(i.appendTo).append(r).find("iframe:not(.k-content)").each(function(e){this.src=t[e]}),n.find(".k-window-title").css(a?"left":"right",n.find(".k-window-actions").outerWidth()+10),r.show(),r.find("[data-role=editor]").each(function(){var t=e(this).data("kendoEditor");t&&t.refresh()})}}),$={wrapper:g("<div class='k-widget k-window' />"),action:g("<a role='button' href='\\#' class='k-window-action k-link'><span role='presentation' class='k-icon k-i-#= name.toLowerCase() #'>#= name #</span></a>"),titlebar:g("<div class='k-window-titlebar k-header'>&nbsp;<span class='k-window-title'>#= title #</span><div class='k-window-actions'># for (var i = 0; i < actions.length; i++) { ##= action({ name: actions[i] }) ## } #</div></div>"),overlay:"<div class='k-overlay' />",contentFrame:g("<iframe frameborder='0' title='#= title #' class='"+C+"' "+"src='#= content.url #'>"+"This page requires frames in order to show content"+"</iframe>"),resizeHandle:g("<div class='k-resize-handle k-resize-#= data #'></div>")};o.prototype={dragstart:function(t){var n=this,i=n.owner,r=i.wrapper;n.elementPadding=parseInt(i.wrapper.css("padding-top"),10),n.initialCursorPosition=s.getOffset(r,"position"),n.resizeDirection=t.currentTarget.prop("className").replace("k-resize-handle k-resize-",""),n.initialSize={width:r.width(),height:r.height()},n.containerOffset=s.getOffset(i.appendTo),r.append($.overlay).find(k).not(t.currentTarget).hide(),e(m).css(F,t.currentTarget.css(F))},drag:function(e){var t,n,r,o,a=this,s=a.owner,l=s.wrapper,d=s.options,c=a.resizeDirection,u=a.containerOffset,p=a.initialCursorPosition,f=a.initialSize,h=Math.max(e.x.location,u.left),g=Math.max(e.y.location,u.top);c.indexOf("e")>=0?(t=h-p.left,l.width(i(t,d.minWidth,d.maxWidth))):c.indexOf("w")>=0&&(o=p.left+f.width,t=i(o-h,d.minWidth,d.maxWidth),l.css({left:o-t-u.left,width:t})),c.indexOf("s")>=0?(n=g-p.top-a.elementPadding,l.height(i(n,d.minHeight,d.maxHeight))):c.indexOf("n")>=0&&(r=p.top+f.height,n=i(r-g,d.minHeight,d.maxHeight),l.css({top:r-n-u.top,height:n})),s.trigger(R)},dragend:function(t){var n=this,i=n.owner,r=i.wrapper;return r.find(x).remove().end().find(k).not(t.currentTarget).show(),e(m).css(F,""),i.touchScroller&&i.touchScroller.reset(),27==t.keyCode&&r.css(n.initialCursorPosition).css(n.initialSize),!1},destroy:function(){this._draggable.destroy()}},a.prototype={dragstart:function(t){var n=this.owner,i=n.element,r=i.find(".k-window-actions"),o=s.getOffset(n.appendTo);n.trigger(M),n.initialWindowPosition=s.getOffset(n.wrapper,"position"),n.startPosition={left:t.x.client-n.initialWindowPosition.left,top:t.y.client-n.initialWindowPosition.top},n.minLeftPosition=r.length>0?r.outerWidth()+parseInt(r.css("right"),10)-i.outerWidth():20-i.outerWidth(),n.minLeftPosition-=o.left,n.minTopPosition=-o.top,n.wrapper.append($.overlay).find(k).hide(),e(m).css(F,t.currentTarget.css(F))},drag:function(t){var n=this.owner,i={left:Math.max(t.x.client-n.startPosition.left,n.minLeftPosition),top:Math.max(t.y.client-n.startPosition.top,n.minTopPosition)};e(n.wrapper).css(i)},_finishDrag:function(){var t=this.owner;t.wrapper.find(k).toggle(!t.options.isMinimized).end().find(x).remove(),e(m).css(F,"")},dragcancel:function(e){this._finishDrag(),e.currentTarget.closest(_).css(this.owner.initialWindowPosition)},dragend:function(){return this._finishDrag(),this.owner.trigger(L),!1},destroy:function(){this._draggable.destroy()}},s.ui.plugin(Q)}(window.kendo.jQuery),function(e){function t(e,t){function n(e,r){var o,a;if(r=r[t])for(o=i[e]=i[e]||[],a=0;a<r.length;a++)o.push(r[a]),n(e+1,r[a])}var i=[];return n(0,e),i}function n(){return F.support.cssBorderSpacing?"":'cellspacing="0"'}function i(t,i){return t.length?"<table "+n()+' class="'+e.trim("k-scheduler-table "+(i||""))+'">'+"<tr>"+t.join("</tr><tr>")+"</tr>"+"</table>":""}function r(e,t){return e.length?"<div style='position:relative'>"+i(e,t)+"</div>":""}function o(t,n,r){var o,a=[];if(r>0)for(o=0;t>o;o++)a.push("<th></th>");return n&&a.push('<th class="k-scheduler-times-all-day">'+n.text+"</th>"),1>r?e():e('<div class="k-scheduler-times">'+i(a)+"</div>")}function a(t,n,o){var a,s,l,d,c,u,p,f,h=[];for(s=0;s<t.length;s++){for(l=t[s],d=[],c=n/l.length,a=0;a<l.length;a++)d.push('<th colspan="'+c+'" class="'+(l[a].className||"")+'">'+l[a].text+"</th>");h.push(d.join(""))}if(u=[],o){for(p=t[t.length-1],f=[],a=0;a<p.length;a++)f.push('<td class="'+(p[a].className||"")+'">&nbsp;</th>');u.push(f.join(""))}return e('<div class="k-scheduler-header k-state-default"><div class="k-scheduler-header-wrap">'+i(h)+r(u,"k-scheduler-header-all-day")+"</div>"+"</div>")}function s(t,n){var r,o,a,s,l,d=Array(n).join().split(","),c=[];for(o=0;o<t.length;o++)for(a=t[o],s=n/a.length,r=0;r<a.length;r++)l=a[r].className||"",a[r].allDay&&(l="k-scheduler-times-all-day"),d[s*r]+='<th class="'+l+'" rowspan="'+s+'">'+a[r].text+"</th>";for(r=0;n>r;r++)c.push(d[r]);return 1>n?e():e('<div class="k-scheduler-times">'+i(c)+"</div>")}function l(){return e('<div class="k-scheduler-content"><table '+n()+' class="k-scheduler-table"/>'+"</div>")}function d(){return D=D?D:F.support.scrollbar()}function c(e,t,n){var i,r,o,a,s;for(i=e.length-1;i>=0;i--)r=u(e[i]),o=r.start,s=r.end,a=t>=o&&s>=t,(a||o>=t&&n>=s||o>=t&&n>=o)&&(t>o&&(t=o),s>n&&(n=s));return p(e,t,n)}function u(e){return{start:e.start,end:e.end}}function p(e,t,n){var i,r,o=[];for(i=0;i<e.length;i++)r=u(e[i]),(r.start<t&&r.end>t||r.start>=t&&r.end<=n)&&o.push(e[i]);return o}function f(e){return g(e)}function h(e){return g(e)}function g(e){var t,n,i,r,o,a,s,l=[];for(t=0;t<e.length;t++){for(n=e[t],i=u(n),r=null,o=0,a=l.length;a>o;o++)if(s=i.start>l[o].end,i.start<l[o].start||s){r=l[o],r.end<i.end&&(r.end=i.end);break}r||(r={start:i.start,end:i.end,events:[]},l.push(r)),r.events.push(n)}return l}function m(e,t,n){var i,r,o,a,s=t[0];if(s){for(i=[],r=s.dataSource.view(),o=0;o<r.length;o++)a={text:F.getter(s.dataTextField)(r[o]),className:"k-slot-cell"},a[e]=m(e,t.slice(1),n),i.push(a);return i}return n}function v(t){return function(n){if(e.isArray(n)||n instanceof F.data.ObservableArray){for(var i=0;i<n.length;i++)if(n[i]==t)return!0;return!1}return n==t}}function _(e){e.className=e.className.replace(E,"")+" k-state-selected"}var b,w,y,k,x,C,T,S,D,A,E,F=window.kendo,I=F.ui,P=I.Widget,B=F.keys,z=".kendoSchedulerView",H=Math,R='<div class="k-marquee k-scheduler-marquee"><div class="k-marquee-color"></div><div class="k-marquee-text"><div class="k-label-top"></div><div class="k-label-bottom"></div></div></div>';F.ui.scheduler={},b=F.Class.extend({init:function(e){this._index=e,this._timeSlotCollections=[],this._daySlotCollections=[]},addTimeSlotCollection:function(e,t){return this._addCollection(e,t,this._timeSlotCollections)},addDaySlotCollection:function(e,t){return this._addCollection(e,t,this._daySlotCollections)},_addCollection:function(e,t,n){var i=new x(e,t,this._index,n.length);return n.push(i),i},timeSlotCollectionCount:function(){return this._timeSlotCollections.length},daySlotCollectionCount:function(){return this._daySlotCollections.length},daySlotByPosition:function(e,t){return this._slotByPosition(e,t,this._daySlotCollections)},timeSlotByPosition:function(e,t){return this._slotByPosition(e,t,this._timeSlotCollections)},_slotByPosition:function(e,t,n){var i,r,o,a;for(i=0;i<n.length;i++)for(r=n[i],o=0;o<r.count();o++)if(a=r.at(o),e>=a.offsetLeft&&e<a.offsetLeft+a.clientWidth&&t>=a.offsetTop&&t<a.offsetTop+a.clientHeight)return a},refresh:function(){var e;for(e=0;e<this._daySlotCollections.length;e++)this._daySlotCollections[e].refresh();for(e=0;e<this._timeSlotCollections.length;e++)this._timeSlotCollections[e].refresh()},timeSlotRanges:function(e,t){var n=this._timeSlotCollections,i=this._startSlot(e,n),r=i;return t>e&&(r=this._endSlot(t,n)),this._continuousRange(y,n,i,r)},daySlotRanges:function(e,t,n){var i=this._daySlotCollections,r=this._startSlot(e,i,n),o=r;return t>e&&(o=this._endSlot(t,i,n)),this._continuousRange(k,i,r,o)},_continuousRange:function(e,t,n,i){var r,o,a,s,l,d,c=n.slot,u=i.slot,p=c.collectionIndex,f=u.collectionIndex,h=[];for(r=p;f>=r;r++)o=t[r],a=o.first(),s=o.last(),l=!1,d=!1,r==p&&(d=!n.inRange),r==f&&(l=!i.inRange),a.start<c.start&&(a=c),s.start>u.start&&(s=u),f>p&&(r==p?l=!0:r==f?d=!0:l=d=!0),h.push(new e({start:a,end:s,collection:o,head:l,tail:d}));return h},slotRanges:function(e,t){var n=F.date.toUtcTime(e.start),i=F.date.toUtcTime(e.end);return void 0===t&&(t=e.isMultiDay()),t?this.daySlotRanges(n,i,e.isAllDay):(e.startTime&&(n=F.date.getMilliseconds(e.startTime)+F.date.toUtcTime(F.date.getDate(e.start))),e.endTime&&(i=F.date.getMilliseconds(e.endTime)+F.date.toUtcTime(F.date.getDate(e.end))),this.timeSlotRanges(n,i))},ranges:function(e,t,n,i){return"number"!=typeof e&&(e=F.date.toUtcTime(e)),"number"!=typeof t&&(t=F.date.toUtcTime(t)),n?this.daySlotRanges(e,t,i):this.timeSlotRanges(e,t)},_startCollection:function(e,t){var n,i;for(n=0;n<t.length;n++)if(i=t[n],i.startInRange(e))return i;return null},_endCollection:function(e,t){var n,i;for(n=0;n<t.length;n++)if(i=t[n],i.endInRange(e))return i;return null},_getCollections:function(e){return e?this._daySlotCollections:this._timeSlotCollections},continuousSlot:function(e,t){var n=t?-1:1,i=this._getCollections(e.isDaySlot),r=i[e.collectionIndex+n];return r?r[t?"last":"first"]():void 0},firstSlot:function(){var e=this._getCollections(this.daySlotCollectionCount());return e[0].first()},lastSlot:function(){var e=this._getCollections(this.daySlotCollectionCount());return e[e.length-1].last()},upSlot:function(e,t){var n=this,i=function(e,i,r){var o=0===r;return!t&&!e&&o&&n.daySlotCollectionCount()?n._daySlotCollections[0].at(i):void 0};return this.timeSlotCollectionCount()||(t=!0),this._verticalSlot(e,-1,i)},downSlot:function(e,t){var n=this,i=function(e,i,r){return!t&&e&&n.timeSlotCollectionCount()?n._timeSlotCollections[r].at(0):void 0};return this.timeSlotCollectionCount()||(t=!0),this._verticalSlot(e,1,i)},leftSlot:function(e){return this._horizontalSlot(e,-1)},rightSlot:function(e){return this._horizontalSlot(e,1)},_horizontalSlot:function(e,t){var n,i=e.index,r=e.isDaySlot,o=e.collectionIndex,a=this._getCollections(r);return r?i+=t:o+=t,n=a[o],n?n.at(i):void 0},_verticalSlot:function(e,t,n){var i,r=e.index,o=e.isDaySlot,a=e.collectionIndex,s=this._getCollections(o);return(e=n(o,a,r))?e:(o?a+=t:r+=t,i=s[a],i?i.at(r):void 0)},_collection:function(e,t){var n=t?this._daySlotCollections:this._timeSlotCollections;return n[e]},_startSlot:function(e,t,n){var i,r=this._startCollection(e,t),o=!0;return r||(r=t[0],o=!1),i=r.slotByStartDate(e,n),i||(i=r.first(),o=!1),{slot:i,inRange:o}},_endSlot:function(e,t,n){var i,r=this._endCollection(e,t),o=!0;return r||(r=t[t.length-1],o=!1),i=r.slotByEndDate(e,n),i||(i=r.last(),o=!1),{slot:i,inRange:o}},getSlotCollection:function(e,t){return this[t?"getDaySlotCollection":"getTimeSlotCollection"](e)},getTimeSlotCollection:function(e){return this._timeSlotCollections[e]},getDaySlotCollection:function(e){return this._daySlotCollections[e]}}),w=F.Class.extend({init:function(t){e.extend(this,t)},innerHeight:function(){var e,t=this.collection,n=this.start.index,i=this.end.index,r=0;for(e=n;i>=e;e++)r+=t.at(e).offsetHeight;return r},events:function(){return this.collection.events()},addEvent:function(e){this.events().push(e)},startSlot:function(){return this.start.offsetLeft>this.end.offsetLeft?this.end:this.start},endSlot:function(){return this.start.offsetLeft>this.end.offsetLeft?this.start:this.end}}),y=w.extend({innerHeight:function(){var e,t=this.collection,n=this.start.index,i=this.end.index,r=0;for(e=n;i>=e;e++)r+=t.at(e).offsetHeight;return r}}),k=w.extend({innerWidth:function(){var e,t=this.collection,n=this.start.index,i=this.end.index,r=0,o=n!==i?"offsetWidth":"clientWidth";for(e=n;i>=e;e++)r+=t.at(e)[o];return r}}),x=F.Class.extend({init:function(e,t,n,i){this._slots=[],this._events=[],this._start=F.date.toUtcTime(e),this._end=F.date.toUtcTime(t),this._groupIndex=n,this._collectionIndex=i},refresh:function(){var e,t,n,i,r,o=[];for(e=0;e<this._slots.length;e++)t=this._slots[e],n=t.offsetTop,t.refresh(),o[e]=t.offsetTop-n;for(i=0;i<this._events.length;i++)r=this._events[i],r.element.css({top:r.element[0].offsetTop+o[r.slotIndex]})},startInRange:function(e){return this._start<=e&&e<this._end},endInRange:function(e){return this._start<e&&e<=this._end},slotByStartDate:function(e){var t,n,i=e;for("number"!=typeof i&&(i=F.date.toUtcTime(e)),t=0;t<this._slots.length;t++)if(n=this._slots[t],n.startInRange(i))return n;return null},slotByEndDate:function(e,t){var n,i,r=e;if("number"!=typeof r&&(r=F.date.toUtcTime(e)),t)return this.slotByStartDate(e,!1);for(n=0;n<this._slots.length;n++)if(i=this._slots[n],i.endInRange(r))return i;return null},count:function(){return this._slots.length},events:function(){return this._events},addTimeSlot:function(e,t,n){var i=new T(e,t,n,this._groupIndex,this._collectionIndex,this._slots.length);this._slots.push(i)},addDaySlot:function(e,t,n,i){var r=new S(e,t,n,this._groupIndex,this._collectionIndex,this._slots.length,i);this._slots.push(r)},first:function(){return this._slots[0]},last:function(){return this._slots[this._slots.length-1]},at:function(e){return this._slots[e]}}),C=F.Class.extend({init:function(e,t,n,i,r,o){this.element=e,this.clientWidth=e.clientWidth,this.clientHeight=e.clientHeight,this.offsetWidth=e.offsetWidth,this.offsetHeight=e.offsetHeight,this.offsetTop=e.offsetTop,this.offsetLeft=e.offsetLeft,this.start=t,this.end=n,this.element=e,this.groupIndex=i,this.collectionIndex=r,this.index=o,this.isDaySlot=!1},startDate:function(){var e=new Date(this.start);return F.timezone.apply(e,"Etc/UTC")},endDate:function(){var e=new Date(this.end);return F.timezone.apply(e,"Etc/UTC")},startInRange:function(e){return this.start<=e&&e<this.end},endInRange:function(e){return this.start<e&&e<=this.end}}),T=C.extend({refresh:function(){this.offsetTop=this.element.offsetTop},offsetX:function(e,t){return e?this.offsetLeft+t:this.offsetLeft+t},startInRange:function(e){return this.start<=e&&e<this.end},endInRange:function(e){return this.start<e&&e<=this.end}}),S=C.extend({init:function(e,t,n,i,r,o,a){C.fn.init.apply(this,arguments),this.eventCount=a,this.isDaySlot=!0,this.firstChildHeight=this.element.firstChild.offsetHeight+3},refresh:function(){this.clientHeight=this.element.clientHeight,this.offsetTop=this.element.offsetTop},startDate:function(){var e=new Date(this.start);return F.timezone.apply(e,"Etc/UTC")},endDate:function(){var e=new Date(this.end);return F.timezone.apply(e,"Etc/UTC")},startInRange:function(e){return this.start<=e&&e<this.end},endInRange:function(e){return this.start<e&&e<=this.end}}),F.ui.SchedulerView=P.extend({init:function(t,n){P.fn.init.call(this,t,n),this._scrollbar=d(),this._isRtl=F.support.isRtl(t),this._resizeHint=e(),this._moveHint=e(),this._cellId=F.guid(),this._resourcesForGroups()},_addResourceView:function(){var e=new b(this.groups.length);return this.groups.push(e),e},dateForTitle:function(){return F.format(this.options.selectedDateFormat,this.startDate(),this.endDate())},_changeGroup:function(e,t){var n=t?"prevGroupSlot":"nextGroupSlot",i=this[n](e.start,e.groupIndex,e.isAllDay);return i&&(e.groupIndex+=t?-1:1),i},_changeGroupContinuously:function(){return null},_changeViewPeriod:function(){return!1},_horizontalSlots:function(e,t,n,i){var r,o,a=i?"leftSlot":"rightSlot",s=t[0].start,l=t[t.length-1].end,d=this.groups[e.groupIndex];return n||(r=this._normalizeHorizontalSelection(e,t,i),r&&(s=l=r)),s=d[a](s),l=d[a](l),n||this._isVerticallyGrouped()||s&&l||(s=l=this._changeGroup(e,i)),s&&l||(o=this._continuousSlot(e,t,i),o=this._changeGroupContinuously(e,o,n,i),o&&(s=l=o)),{startSlot:s,endSlot:l}},_verticalSlots:function(e,t,n,i){var r,o,a=t[0].start,s=t[t.length-1].end,l=this.groups[e.groupIndex];return n||(r=this._normalizeVerticalSelection(e,t,i),r&&(a=s=r)),o=i?"upSlot":"downSlot",a=l[o](a,n),s=l[o](s,n),n||!this._isVerticallyGrouped()||a&&s||(a=s=this._changeGroup(e,i)),{startSlot:a,endSlot:s}},_normalizeHorizontalSelection:function(){return null},_normalizeVerticalSelection:function(e,t,n){var i;return i=n?t[0].start:t[t.length-1].end},_continuousSlot:function(){return null},constrainSelection:function(e){if(!this.inRange(e)){var t=this.groups[0].firstSlot();e.isAllDay=t.isDaySlot,e.start=t.startDate(),e.end=t.endDate()}},move:function(e,t,n){var i,r,o,a,s,l,d=!1,c=this.groups[e.groupIndex];if(c.timeSlotCollectionCount()||(e.isAllDay=!0),i=c.ranges(e.start,e.end,e.isAllDay,!1),t===B.DOWN||t===B.UP){if(d=!0,a=t===B.UP,this._updateDirection(e,i,n,a,!0),s=this._verticalSlots(e,i,n,a),!s.startSlot&&!n&&this._changeViewPeriod(e,a,!0))return d}else if((t===B.LEFT||t===B.RIGHT)&&(d=!0,a=t===B.LEFT,this._updateDirection(e,i,n,a,!1),s=this._horizontalSlots(e,i,n,a),!s.startSlot&&!n&&this._changeViewPeriod(e,a,!1)))return d;return d&&(r=s.startSlot,o=s.endSlot,n?(l=e.backward,l&&r?e.start=r.startDate():!l&&o&&(e.end=o.endDate())):r&&o&&(e.isAllDay=r.isDaySlot,e.start=r.startDate(),e.end=o.endDate()),e.events=[]),d},moveToEventInGroup:function(t,n,i,r){for(var o,a,s=t._continuousEvents||[],l=r?-1:1,d=s.length,c=r?d-1:0;d>c&&c>-1;){if(a=s[c],(!r&&a.start.startDate()>=n.startDate()||r&&a.start.startDate()<=n.startDate())&&(i.length&&(a=s[c+l]),a&&-1===e.inArray(a.uid,i))){o=!!a;break}c+=l}return a},moveToEvent:function(e,t){for(var n,i=e.groupIndex,r=this.groups[i],o=r.ranges(e.start,e.end,e.isAllDay,!1)[0].start,a=this.groups.length,s=t?-1:1,l=e.events;a>i&&i>-1&&(n=this.moveToEventInGroup(r,o,l,t),i+=s,r=this.groups[i],r&&!n);)l=[],o=t?r.lastSlot():r.firstSlot(!0);return n&&(e.events=[n.uid],e.start=n.start.startDate(),e.end=n.end.endDate(),e.isAllDay=n.start.isDaySlot,e.groupIndex=n.start.groupIndex),!!n},current:function(e){return void 0===e?this._current:(this._current=e,this._scrollTo(e,this.content[0]),void 0)},select:function(e){this.clearSelection(),this._selectEvents(e)||this._selectSlots(e)},_selectSlots:function(e){var t,n,i,r,o,a,s=e.isAllDay,l=this.groups[e.groupIndex];for(l.timeSlotCollectionCount()||(s=!0),t=l.ranges(e.start,e.end,s,!1),i=0;i<t.length;i++)for(r=t[i],o=r.collection,a=r.start.index;a<=r.end.index;a++)n=o.at(a).element,n.setAttribute("aria-selected",!0),_(n);e.backward&&(n=t[0].start.element),this.current(n)},_selectEvents:function(t){var n,i,r=!1,o=t.events,a=this.groups[t.groupIndex]._continuousEvents||[],s=a.length;if(!o[0]||!a[0])return r;for(i=e(),n=0;s>n;n++)e.inArray(a[n].uid,o)>-1&&(i=i.add(a[n].element));return i[0]&&(i.addClass("k-state-selected").attr("aria-selected",!0),this.current(i.last()[0]),r=!0),r},inRange:function(e){var t=this.startDate(),n=F.date.addDays(this.endDate(),1),i=e.start,r=e.end;return i>=t&&n>i&&r>t&&n>=r},_scrollbarOffset:function(e,t){return!this._isRtl||t&&!this._isVerticallyGrouped()||!F.support.browser.webkit?e:this._scrollbarWidth+e},_resourceValue:function(e,t){return e.valuePrimitive&&(t=F.getter(e.dataValueField)(t)),t},_resourceBySlot:function(e){var t,n,i,r,o,a=this.groupedResources,s={};if(a.length)for(t=e.groupIndex,n=a.length-1;n>=0;n--)i=a[n],r=this._resourceValue(i,i.dataSource.at(t%i.dataSource.total())),i.multiple&&(r=[r]),o=F.setter(i.field),o(s,r),t=Math.floor(t/i.dataSource.total());return s},_createResizeHint:function(t,n,i,r){return e(R).css({left:t,top:n,width:i,height:r})},_removeResizeHint:function(){this._resizeHint.remove(),this._resizeHint=e()},_removeMoveHint:function(){this._moveHint.remove(),this._moveHint=e()},_scrollTo:function(e,t){var n=e.offsetTop,i=e.offsetHeight,r=t.scrollTop,o=t.clientHeight,a=n+i,s=0;s=r>n?n:a>r+o?o>=i?a-o:n:r,t.scrollTop=s},_shouldInverseResourceColor:function(e){var t=new A(e.color).isDark(),n=this.element.css("color"),i=new A(n).isDark();return t==i},eventResources:function(e){var t,n,i,r,o,a,s,l,d,c,u=[],p=this.options;if(!p.resources)return u;for(t=0;t<p.resources.length;t++)if(n=p.resources[t],i=n.field,r=F.getter(i)(e))for(n.multiple||(r=[r]),o=n.dataSource.view(),a=0;a<r.length;a++){for(s=null,l=r[a],n.valuePrimitive||(l=F.getter(n.dataValueField)(l)),d=0;d<o.length;d++)if(o[d].get(n.dataValueField)==l){s=o[d];break}null!=s&&(c=F.getter(n.dataColorField)(s),u.push({text:F.getter(n.dataTextField)(s),value:l,color:c}))}return u},createLayout:function(i){var r,o,a,s,l,d=-1;for(i.rows||(i.rows=[]),r=0;r<i.rows.length;r++)if(i.rows[r].allDay){d=r;break}o=i.rows[d],d>=0&&i.rows.splice(d,1),a=this.columnLevels=t(i,"columns"),s=this.rowLevels=t(i,"rows"),this.table=e("<table "+n()+' class="k-scheduler-layout">'),l=s[s.length-1].length,this.table.append(this._topSection(a,o,l)),this.table.append(this._bottomSection(a,s,l)),this.element.append(this.table),this._scroller()},refreshLayout:function(){var t,n,i,r,o,a=this,s=a.element.find(">.k-scheduler-toolbar"),l=a.element.innerHeight(),d=this._scrollbar,c=0,u=this._isRtl?"left":"right";
s.length&&(l-=s.outerHeight()),a.datesHeader&&(c=a.datesHeader.outerHeight()),a.timesHeader&&a.timesHeader.outerHeight()>c&&(c=a.timesHeader.outerHeight()),a.datesHeader&&a.timesHeader&&(t=a.datesHeader.find("table:first tr"),a.timesHeader.find("tr").height(function(n){e(this).height(t.eq(n).height())})),c&&(l-=c),a.footer&&(l-=a.footer.outerHeight()),n=function(e){var t,n;return e[0].style.height?!0:(t=e.height(),e.height("auto"),n=e.height(),t!=n?(e.height(""),!0):(e.height(""),!1))},i=a.content[0],r=F.support.kineticScrollNeeded?0:d,this._scrollbarWidth=0,n(a.element)&&(l>2*d?a.content.height(l):a.content.height(2*d+1),a.times.height(i.clientHeight),o=a.times.find("table"),o.length&&o.height(a.content.find("table")[0].clientHeight)),i.offsetWidth-i.clientWidth>0&&(a.table.addClass("k-scrollbar-v"),a.datesHeader.css("padding-"+u,r-parseInt(a.datesHeader.children().css("border-"+u+"-width"),10)),this._scrollbarWidth=r),(i.offsetHeight-i.clientHeight>0||i.clientHeight>a.content.children(".k-scheduler-table").height())&&a.table.addClass("k-scrollbar-h")},_topSection:function(t,n,i){this.timesHeader=o(t.length,n,i);var r=t[t.length-1].length;return this.datesHeader=a(t,r,n),e("<tr>").append(this.timesHeader.add(this.datesHeader).wrap("<td>").parent())},_bottomSection:function(t,n,i){return this.times=s(n,i),this.content=l(t[t.length-1],n[n.length-1]),e("<tr>").append(this.times.add(this.content).wrap("<td>").parent())},_scroller:function(){var t,n=this;this.content.bind("scroll"+z,function(){n.datesHeader.find(">.k-scheduler-header-wrap").scrollLeft(this.scrollLeft),n.times.scrollTop(this.scrollTop)}),t=F.touchScroller(this.content,{avoidScrolling:function(t){return e(t.event.target).closest(".k-event.k-state-selected").length>0}}),t&&t.movable&&(this._touchScroller=t,this.content=t.scrollElement,t.movable.bind("change",function(e){n.datesHeader.find(">.k-scheduler-header-wrap").scrollLeft(-e.sender.x),n.times.scrollTop(-e.sender.y)}))},_resourcesForGroups:function(){var e,t,n,i,r=[],o=this.options.group,a=this.options.resources;if(o=o&&o.resources?o.resources:[],a&&o.length)for(e=0,t=a.length;t>e;e++)for(n=0,i=o.length;i>n;n++)a[e].name===o[n]&&r.push(a[e]);this.groupedResources=r},_createColumnsLayout:function(e,t){return m("columns",e,t)},_groupOrientation:function(){var e=this.options.group;return e&&e.resources?e.orientation:"horizontal"},_isVerticallyGrouped:function(){return this.groupedResources.length&&"vertical"===this._groupOrientation()},_createRowsLayout:function(e,t){return m("rows",e,t)},selectionByElement:function(){return null},clearSelection:function(){this.content.find(".k-state-selected").removeAttr("id").attr("aria-selected",!1).removeClass("k-state-selected")},destroy:function(){var e=this;P.fn.destroy.call(this),e.table&&(F.destroy(e.table),e.table.remove())},calendarInfo:function(){return F.getCulture().calendars.standard},prevGroupSlot:function(e,t,n){var i,r=this.groups[t],o=r.ranges(e,e,n,!1)[0].start;if(!(0>=t))return this._isVerticallyGrouped()?r.timeSlotCollectionCount()?(i=r._collection(n?o.index:o.collectionIndex,!1),i.last()):(i=r._collection(r.daySlotCollectionCount()-1,!0),i.at(o.index)):r.timeSlotCollectionCount()?(i=r._collection(n?0:r.timeSlotCollectionCount()-1,n),n?i.last():i.at(o.index)):(i=r._collection(o.collectionIndex,!0),i.last())},nextGroupSlot:function(e,t,n){var i,r=this.groups[t],o=r.ranges(e,e,n,!1)[0].start;if(!(t>=this.groups.length-1))return this._isVerticallyGrouped()?r.timeSlotCollectionCount()?(i=r._collection(0,r.daySlotCollectionCount()),n?i.last():i.at(o.collectionIndex)):(i=r._collection(0,!0),i.at(o.index)):r.timeSlotCollectionCount()?(i=r._collection(0,n),n?i.first():i.at(o.index)):(i=r._collection(o.collectionIndex,!0),i.first())}}),A=function(e){var t,n,i,r,o,a=this,s=A.formats;if(1===arguments.length)for(e=a.resolveColor(e),r=0;r<s.length;r++)t=s[r].re,n=s[r].process,i=t.exec(e),i&&(o=n(i),a.r=o[0],a.g=o[1],a.b=o[2]);else a.r=arguments[0],a.g=arguments[1],a.b=arguments[2];a.r=a.normalizeByte(a.r),a.g=a.normalizeByte(a.g),a.b=a.normalizeByte(a.b)},A.prototype={resolveColor:function(e){return e=e||"#000","#"==e.charAt(0)&&(e=e.substr(1,6)),e=e.replace(/ /g,""),e=e.toLowerCase(),e=A.namedColors[e]||e},normalizeByte:function(e){return 0>e||isNaN(e)?0:e>255?255:e},percBrightness:function(){var e=this;return H.sqrt(.241*e.r*e.r+.691*e.g*e.g+.068*e.b*e.b)},isDark:function(){var e=this,t=e.percBrightness();return 180>t}},A.formats=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(e){return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],A.namedColors={aqua:"00ffff",azure:"f0ffff",beige:"f5f5dc",black:"000000",blue:"0000ff",brown:"a52a2a",coral:"ff7f50",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgray:"a9a9a9",darkgreen:"006400",darkorange:"ff8c00",darkred:"8b0000",dimgray:"696969",fuchsia:"ff00ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lightblue:"add8e6",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumblue:"0000cd",navy:"000080",olive:"808000",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",pink:"ffc0cb",plum:"dda0dd",purple:"800080",red:"ff0000",royalblue:"4169e1",salmon:"fa8072",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",steelblue:"4682b4",tan:"d2b48c",teal:"008080",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},E=/\s*k-state-selected/,e.extend(I.SchedulerView,{createColumns:f,createRows:h,rangeIndex:u,collidingEvents:c,groupEqFilter:v})}(window.kendo.jQuery),function(e){function t(e){var t=new Date(1980,1,1,0,0,0);return s(t,h(e)),t}function n(e,t,n){var i,r=t.getTime(),o=n.getTime();return i=e.getTime(),i>=r&&o>=i}function i(e,t,n,i){return i=i?n>=e:n>e,e>t&&i}function r(e,t,n,i){var r,a=e._continuousEvents,s=a[a.length-1],l=u(t.start.startDate()).getTime();if(i&&s&&u(s.start.startDate()).getTime()==l){for(r=a.length-1;r>-1&&!(a[r].isAllDay||u(a[r].start.startDate()).getTime()<l);r--);a.splice(r+1,0,{element:n,isAllDay:!0,uid:n.attr(o.attr("uid")),start:t.start,end:t.end})}else a.push({element:n,isAllDay:i,uid:n.attr(o.attr("uid")),start:t.start,end:t.end})}var o=window.kendo,a=o.ui,s=o.date.setTime,l=a.SchedulerView,d=e.extend,c=e.proxy,u=o.date.getDate,p=o.date.MS_PER_MINUTE,f=o.date.MS_PER_DAY,h=o.date.getMilliseconds,g=".kendoMultiDayView",m=o.template('<div title="(#=kendo.format("{0:t} - {1:t}", start, end)#): #=title.replace(/"/g,"&\\#34;")#"><div class="k-event-template k-event-time">#:kendo.format("{0:t} - {1:t}", start, end)#</div><div class="k-event-template">${title}</div></div>'),v=o.template('<div title="(#=kendo.format("{0:t}", start)#): #=title.replace(/"/g,"&\\#34;")#"><div class="k-event-template">${title}</div></div>'),_=o.template("<span class='k-link k-nav-day'>#=kendo.toString(date, 'ddd M/dd')#</span>"),b='<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#"#if (resources[0]) { #style="background-color:#=resources[0].color#; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#" #} else {#class="k-event"#}#><span class="k-event-actions"># if(data.tail || data.middle) {#<span class="k-icon k-i-arrow-w"></span>#}## if(data.isException()) {#<span class="k-icon k-i-exception"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"></span># } #</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}## if(data.head || data.middle) {#<span class="k-icon k-i-arrow-e"></span>#}#</span>#if(resizable && !singleDay && !data.tail && !data.middle){#<span class="k-resize-handle k-resize-w"></span>#}##if(resizable && !singleDay && !data.head && !data.middle){#<span class="k-resize-handle k-resize-e"></span>#}#</div>',w='<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#" #if (resources[0]) { #style="background-color:#=resources[0].color #; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#"#} else {#class="k-event"#}#><span class="k-event-actions"># if(data.isException()) {#<span class="k-icon k-i-exception"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"></span># } #</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}#</span><span class="k-event-top-actions"># if(data.tail || data.middle) {#<span class="k-icon k-i-arrow-n"></span># } #</span><span class="k-event-bottom-actions"># if(data.head || data.middle) {#<span class="k-icon k-i-arrow-s"></span># } #</span># if(resizable && !data.tail && !data.middle) {#<span class="k-resize-handle k-resize-n"></span># } ## if(resizable && !data.head && !data.middle) {#<span class="k-resize-handle k-resize-s"></span># } #</div>',y=l.extend({init:function(e,t){var n=this;l.fn.init.call(n,e,t),n.title=n.options.title||n.options.name,n._templates(),n._editable(),n.calculateDateRange(),n._groups()},_updateResizeHint:function(e,t,n){var i,r,a,s,d,c,u,p,f=e.isMultiDay(),h=this.groups[n.groupIndex],g=h.ranges(t.start,e.isAllDay?n.start:n.end,f,e.isAllDay);for(this._removeResizeHint(),i=0;i<g.length;i++)r=g[i],a=r.startSlot(),s=a.offsetWidth,d=a.clientHeight,f?s=r.innerWidth():d=r.innerHeight(),c=l.fn._createResizeHint.call(this,this._scrollbarOffset(a.offsetLeft,f),a.offsetTop,s,d),this._resizeHint=this._resizeHint.add(c);u="t",p=this.content,f&&(u="M/dd",p=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day) > div"),p.length||(p=this.content)),this._resizeHint.appendTo(p),this._resizeHint.find(".k-label-top,.k-label-bottom").text(""),this._resizeHint.first().addClass("k-first").find(".k-label-top").text(o.toString(t.startDate(),u)),this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(o.toString(n.endDate(),u))},_updateMoveHint:function(e,t,n){var i,r,a,s,l,d,c=e.isMultiDay(),u=this.groups[n.groupIndex],p=n.start-t.start,f=o.date.toUtcTime(e.start)+p,g=f+e.duration(),m=u.ranges(f,g,c,e.isAllDay);for(f=o.timezone.apply(new Date(f),"Etc/UTC"),g=o.timezone.apply(new Date(g),"Etc/UTC"),this._removeMoveHint(),!c&&(0===h(g)||h(g)<h(this.startTime()))&&m.length>1&&m.pop(),i=0;i<m.length;i++)r=m[i],a=r.start,s=this._createEventElement(e.clone({start:f,startTime:f,end:g,endTime:g}),!c),s.addClass("k-event-drag-hint"),l={left:a.offsetLeft+2,top:a.offsetTop},this._isRtl&&(l.left=.1*a.clientWidth+this._scrollbarOffset(a.offsetLeft)+2),c?l.width=r.innerWidth()-4:(l.height=r.innerHeight()-3,l.width=.9*a.clientWidth-4),s.css(l),this._moveHint=this._moveHint.add(s);d=this.content,c&&(d=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day) > div"),d.length||(d=this.content)),this._moveHint.appendTo(d)},_slotByPosition:function(e,t){var n,i,r,o;for(i=this._isVerticallyGrouped()?this.content.offset():this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day)").find(">div").offset(),i&&(e-=i.left,t-=i.top),e=Math.ceil(e),t=Math.ceil(t),o=0;o<this.groups.length;o++)if(r=this.groups[o],n=r.daySlotByPosition(e,t))return n;for(i&&(e+=i.left,t+=i.top),i=this.content.offset(),e-=i.left,t-=i.top,t+=this.content[0].scrollTop,e+=this.content[0].scrollLeft,e=Math.ceil(e),t=Math.ceil(t),o=0;o<this.groups.length;o++)if(r=this.groups[o],n=r.timeSlotByPosition(e,t))return n;return null},_groupCount:function(){var e=this.groupedResources;return e.length?"vertical"===this._groupOrientation()?this._rowCountForLevel(e.length-1):this._columnCountForLevel(e.length)/this._columnOffsetForResource(e.length):1},_columnCountInResourceView:function(){var e=this.groupedResources;return!e.length||this._isVerticallyGrouped()?this._columnCountForLevel(0):this._columnOffsetForResource(e.length)},_timeSlotGroups:function(e,t){var n,i,r,o,a,s,l,d,c,u,p,f,g,m,v,_,b=this._timeSlotInterval(),w=this.content.find("tr:not(.k-scheduler-header-all-day)");for(w.attr("role","row"),n=w.length,this._isVerticallyGrouped()&&(n=Math.floor(n/e)),i=0;e>i;i++)for(r=0,this._isVerticallyGrouped()&&(r=i),o=r*n,s=0,this._isVerticallyGrouped()||(s=i);(r+1)*n>o;){for(l=w[o].children,d=this.groups[i],0===o%n&&(a=h(new Date(+this.startTime()))),c=s*t;(s+1)*t>c;c++)u=l[c],p=c%t,f=d.getTimeSlotCollection(p),g=this._dates[p],m=Date.UTC(g.getFullYear(),g.getMonth(),g.getDate()),v=m+a,_=v+b,u.setAttribute("role","gridcell"),u.setAttribute("aria-selected",!1),f.addTimeSlot(u,v,_);a+=b,o++}},_daySlotGroups:function(e,t){var n,i,r,a,s,l,d,c,u,p,f,h;for(n=this._isVerticallyGrouped()?this.element.find(".k-scheduler-header-all-day"):this.element.find(".k-scheduler-header-all-day tr"),n.attr("role","row"),i=0;e>i;i++)for(r=0,this._isVerticallyGrouped()&&(r=i),a=this.groups[i],s=a.getDaySlotCollection(0),l=n[r].children,d=0,this._isVerticallyGrouped()||(d=i),c=0,u=d*t;(d+1)*t>u;u++)p=l[u],0===u%t&&(c=0),f=o.date.addDays(this.startDate(),c),h=Date.UTC(f.getFullYear(),f.getMonth(),f.getDate()),c++,p.setAttribute("role","gridcell"),p.setAttribute("aria-selected",!1),s.addDaySlot(p,h,h+o.date.MS_PER_DAY)},_groups:function(){var e,t,n,i=this._groupCount(),r=this._columnCountInResourceView();for(this.groups=[],e=0;i>e;e++){for(t=this._addResourceView(e),n=0;r>n;n++)t.addTimeSlotCollection(this._dates[n],o.date.addDays(this._dates[n],1));t.addDaySlotCollection(this._dates[0],this._dates[this._dates.length-1])}this._timeSlotGroups(i,r),this.options.allDaySlot&&this._daySlotGroups(i,r)},options:{name:"MultiDayView",selectedDateFormat:"{0:D}",allDaySlot:!0,workDay:!1,title:"",startTime:o.date.today(),endTime:o.date.today(),minorTickCount:2,majorTick:60,majorTimeHeaderTemplate:"#=kendo.toString(date, 't')#",minorTimeHeaderTemplate:"&nbsp;",eventTemplate:m,allDayEventTemplate:v,dateHeaderTemplate:_,editable:!0,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),footer:{command:"workDay"},messages:{allDay:"all day",showFullDay:"Show full day",showWorkDay:"Show business hours"}},events:["remove","add","edit"],_templates:function(){var e=this.options,t=d({},o.Template,e.templateSettings);this.eventTemplate=this._eventTmpl(e.eventTemplate,w),this.allDayEventTemplate=this._eventTmpl(e.allDayEventTemplate,b),this.majorTimeHeaderTemplate=o.template(e.majorTimeHeaderTemplate,t),this.minorTimeHeaderTemplate=o.template(e.minorTimeHeaderTemplate,t),this.dateHeaderTemplate=o.template(e.dateHeaderTemplate,t)},_editable:function(){this.options.editable&&(o.support.mobileOS?this._touchEditable():this._mouseEditable())},_mouseEditable:function(){var t=this;t.element.on("click"+g,".k-event a:has(.k-si-close)",function(n){t.trigger("remove",{uid:e(this).closest(".k-event").attr(o.attr("uid"))}),n.preventDefault()}),t.options.editable.create!==!1&&t.element.on("dblclick"+g,".k-scheduler-content td",function(n){var i,r;e(this).parent().hasClass("k-scheduler-header-all-day")||(i=t._slotByPosition(n.pageX,n.pageY),r=t._resourceBySlot(i),t.trigger("add",{eventInfo:d({start:i.startDate(),end:i.endDate()},r)}),n.preventDefault())}).on("dblclick"+g,".k-scheduler-header-all-day td",function(e){var n=t._slotByPosition(e.pageX,e.pageY),i=t._resourceBySlot(n);t.trigger("add",{eventInfo:d({},{isAllDay:!0,start:o.date.getDate(n.startDate()),end:o.date.getDate(n.startDate())},i)}),e.preventDefault()}),t.options.editable.update!==!1&&t.element.on("dblclick"+g,".k-event",function(n){t.trigger("edit",{uid:e(this).closest(".k-event").attr(o.attr("uid"))}),n.preventDefault()})},_touchEditable:function(){var t=this;t._closeUserEvents=new o.UserEvents(t.element,{filter:".k-event a:has(.k-si-close)",tap:function(n){t.trigger("remove",{uid:e(n.target).closest(".k-event").attr(o.attr("uid"))}),n.preventDefault()}}),t.options.editable.create!==!1&&(t._addUserEvents=new o.UserEvents(t.element,{filter:".k-scheduler-content td",tap:function(n){var i,r;e(n.target).parent().hasClass("k-scheduler-header-all-day")||(i=t._slotByPosition(n.x.location,n.y.location),r=t._resourceBySlot(i),t.trigger("add",{eventInfo:d({start:i.startDate(),end:i.endDate()},r)}),n.preventDefault())}}),t._allDayUserEvents=new o.UserEvents(t.element,{filter:".k-scheduler-header-all-day td",tap:function(e){var n=t._slotByPosition(e.x.location,e.y.location),i=t._resourceBySlot(n);t.trigger("add",{eventInfo:d({},{isAllDay:!0,start:o.date.getDate(n.startDate()),end:o.date.getDate(n.endDate())},i)}),e.preventDefault()}})),t.options.editable.update!==!1&&(t._editUserEvents=new o.UserEvents(t.element,{filter:".k-event.k-state-selected",tap:function(n){0===e(n.event.target).closest("a:has(.k-si-close)").length&&(t.trigger("edit",{uid:e(n.target).closest(".k-event").attr(o.attr("uid"))}),n.preventDefault())}}))},_layout:function(e){var t,n,i,r=[],a=[],s=this.options,l=this;for(t=0;t<e.length;t++)n={},n.text=l.dateHeaderTemplate({date:e[t]}),o.date.isToday(e[t])&&(n.className="k-today"),r.push(n);return s.allDaySlot&&a.push({text:s.messages.allDay,allDay:!0}),this._forTimeRange(this.startTime(),this.endTime(),function(e,t,n,i){var r=t?l.majorTimeHeaderTemplate:l.minorTimeHeaderTemplate,o={text:r({date:e}),className:i?"k-slot-cell":""};a.push(o)}),i=this.groupedResources,i.length&&("vertical"===this._groupOrientation()?a=this._createRowsLayout(i,a):r=this._createColumnsLayout(i,r)),{columns:r,rows:a}},_footer:function(){var t,n,i,r=this.options;r.footer!==!1&&(t='<div class="k-header k-scheduler-footer">',n=r.footer.command,n&&"workDay"===n?(t+='<ul class="k-reset k-header k-toolbar">',t+='<li class="k-state-default k-scheduler-fullday"><a href="#" class="k-link"><span class="k-icon k-i-clock"></span>',t+=(r.workDay?r.messages.showFullDay:r.messages.showWorkDay)+"</a></li>",t+="</ul>"):t+="&nbsp;",t+="</div>",this.footer=e(t).appendTo(this.element),i=this,this.footer.on("click"+g,".k-scheduler-fullday",function(e){e.preventDefault(),i.trigger("navigate",{view:i.name||r.name,date:i.startDate(),isWorkDay:!r.workDay})}))},_forTimeRange:function(e,n,i,r){var o,a,l,d,c,u,g,m,v,_,b,w,y,k,x,C;for(e=t(e),n=t(n),l=this,d=h(e),c=h(n),u=l.options.minorTickCount,g=l.options.majorTick*p,m=g/u||1,v=new Date(+e),_=v.getDate(),b=0,w="",a=f/m,d!=c&&(d>c&&(c+=f),a=(c-d)/m),a=Math.round(a);a>b;b++)y=b%(g/m),k=0===y,x=u-1>y,C=y===u-1,w+=i(v,k,x,C),s(v,m,!1);return c&&(o=h(v),_<v.getDate()&&(o+=f),o>c&&(v=new Date(+n))),r&&(w+=r(v)),w},_content:function(e){var t,n,i=this,r=i.options,a=i.startTime(),s=this.endTime(),l=1,d=1,c=e.length,u="",p=this.groupedResources,f="";for(p.length&&("vertical"===i._groupOrientation()?(d=this._rowCountForLevel(this.rowLevels.length-2),r.allDaySlot&&(f='<tr class="k-scheduler-header-all-day">'+Array(e.length+1).join("<td>&nbsp;</td>")+"</tr>")):l=this._columnCountForLevel(this.columnLevels.length-2)),u+="<tbody>",t=function(t,n){var i,r,a,s="";for(s="<tr"+(n?' class="k-middle-row"':"")+">",a=0;l>a;a++)for(i=0,r=c;r>i;i++)s+="<td"+(o.date.isToday(e[i])?' class="k-today"':"")+">",s+="&nbsp;</td>";return s+="</tr>"},n=0;d>n;n++)u+=f,u+=this._forTimeRange(a,s,t);u+="</tbody>",this.content.find("table").append(u)},_render:function(t){var n,i=this;t=t||[],this._dates=t,this._startDate=t[0],this._endDate=t[t.length-1||0],this.createLayout(this._layout(t)),this._content(t),this._footer(),this.refreshLayout(),n=this.element.find(".k-scheduler-header-all-day td"),n.length&&(this._allDayHeaderHeight=n.first()[0].clientHeight),i.datesHeader.on("click"+g,".k-nav-day",function(t){var n=e(t.currentTarget).closest("th"),r=n.offset(),o=i._slotByPosition(r.left,r.top+n.outerHeight());i.trigger("navigate",{view:"day",date:o.startDate()})})},startTime:function(){var e=this.options;return e.workDay?e.workDayStart:e.startTime},endTime:function(){var e=this.options;return e.workDay?e.workDayEnd:e.endTime},startDate:function(){return this._startDate},endDate:function(){return this._endDate},_end:function(e){var t=h(this.endTime())||f;return e&&(t=0),new Date(this._endDate.getTime()+t)},nextDate:function(){return o.date.nextDay(this.endDate())},previousDate:function(){return o.date.previousDay(this.startDate())},calculateDateRange:function(){this._render([this.options.date])},destroy:function(){var e=this;e.datesHeader&&e.datesHeader.off(g),e.element&&e.element.off(g),l.fn.destroy.call(this),e.footer&&e.footer.remove(),o.support.mobileOS&&(e._closeUserEvents.destroy(),e.options.editable.create!==!1&&(e._addUserEvents.destroy(),e._allDayUserEvents.destroy()),e.options.editable.update!==!1&&e._editUserEvents.destroy())},selectionByElement:function(e){var t=e.offset();return this._slotByPosition(t.left,t.top)},_timeSlotInterval:function(){var e=this.options;return e.majorTick/e.minorTickCount*p},_columnCountInGroup:function(){var e=this.groupedResources;return e.length?this._columnOffsetForResource(e.length):0},_rowCountInGroup:function(){var e,t=this.groupedResources;return t.length?(e=this.options.allDaySlot?this._rowCountForLevel(t.length-1):0,(this._rowCountForLevel(t.length)-e)/this._rowCountForLevel(t.length-1)):0},_timeSlotIndex:function(e){var t=this.options,n=h(e),i=h(this.startTime()),r=t.majorTick/t.minorTickCount*p;return(n-i)/r},_collectionIndex:function(e,t){return t?0:this._dateSlotIndex(e,!0)},_slotIndex:function(e,t){return t?this._dateSlotIndex(e):this._timeSlotIndex(e)},_dateIndex:function(e){var t,i,r,a,s=this._dates||[];for(t=0,i=s.length;i>t;t++)if(r=o.date.getDate(s[t]),a=new Date(o.date.getDate(s[t]).getTime()+f-1),n(e,r,a))return t;return-1},_dateSlotIndex:function(e,t){var i,r,a,s,l=this._dates||[],d=1;for(i=0,r=l.length;r>i;i++)if(a=o.date.getDate(l[i]),s=new Date(o.date.getDate(l[i]).getTime()+f-(t?0:1)),n(e,a,s))return i*d;return-1},_positionAllDayEvent:function(t,n){var i,r,o,a,s,d,c,u=n.innerWidth(),p=n.start.index,f=n.end.index,h=l.collidingEvents(n.events(),p,f),g=this._headerColumnCount||0,m=2,v=p!==f?5:4,_=this._allDayHeaderHeight,b=n.startSlot();for(t.css({left:this._scrollbarOffset(b.offsetLeft+m,!0),width:u-v}),n.addEvent({start:p,end:f,element:t}),h.push({start:p,end:f,element:t}),i=l.createRows(h),i.length&&i.length>g&&(this._updateAllDayHeaderHeight(_*i.length+_),this._headerColumnCount=i.length),r=n.start.offsetTop,o=0,a=i.length;a>o;o++)for(s=i[o].events,d=0,c=s.length;c>d;d++)e(s[d].element).css({top:r+o*_})},_arrangeColumns:function(e,t){var n,i,r,o,a,s,d,c,u,p,f,h=t.start.index,g=t.end.index;for(e={element:e,start:h,end:g},r=t.start.clientWidth,o=.1*r,a=t.events(),s=l.collidingEvents(a,e.start,e.end),t.addEvent(e),s.push(e),n=l.createColumns(s),d=(r-o)/n.length,c=0,u=n.length;u>c;c++)for(i=n[c].events,p=0,f=i.length;f>p;p++)i[p].element[0].style.width=d-4+"px",i[p].element[0].style.left=(this._isRtl?this._scrollbarOffset(o):0)+t.start.offsetLeft+c*d+2+"px"},_positionEvent:function(e,t,n){var i=4;t.css({height:n.innerHeight()-i,top:n.start.offsetTop}),this._arrangeColumns(t,n)},_eventTmpl:function(e,t){var n,i=this.options,r=d({},o.Template,i.templateSettings),a=r.paramName,s="",l=typeof e,u={storage:{},count:0};return"function"===l?(u.storage["tmpl"+u.count]=e,s+="#=this.tmpl"+u.count+"("+a+")#",u.count++):"string"===l&&(s+=e),n=o.template(o.format(t,s),r),u.count>0&&(n=c(n,u.storage)),n},_createEventElement:function(t,i,r,a){var s,l,c,p=i?this.eventTemplate:this.allDayEventTemplate,g=this.options,m=g.editable,v=m&&m.destroy!==!1,_=m&&m.resize!==!1,b=u(this.startDate()),w=u(this.endDate()),y=h(this.startTime()),k=h(this.endTime()),x=h(t.startTime||t.start),C=h(t.endTime||t.end);return y>=k&&(k=h(new Date(this.endTime().getTime()+f-1))),i||t.isAllDay||(w=new Date(w.getTime()+f)),l=t.end,t.isAllDay&&(l=u(t.end)),!n(u(t.start),b,w)&&!n(l,b,w)||i&&y>x&&C>k?s=!0:u(t.start)<b||i&&y>x?a=!0:(l>w&&!i||i&&C>k)&&(r=!0),c=this.eventResources(t),e(p(d({},{ns:o.ns,resizable:_,showDelete:v,middle:s,head:r,tail:a,singleDay:1==this._dates.length,resources:c,inverseColor:c&&c[0]?this._shouldInverseResourceColor(c[0]):!1},t,{start:t.startTime||t.start,end:t.endTime||t.end})))},_isInTimeSlot:function(e){var t,n=this.startTime(),r=this.endTime(),a=e.startTime||e.start,l=e.endTime||e.end;return h(r)===h(o.date.getDate(r))&&(r=o.date.getDate(r),s(r,f-1)),o.date.getDate(l)>o.date.getDate(a)&&(l=o.date.getDate(l),s(l,f-1)),l=h(l),a=h(a),r=h(r),n=h(n),n===a&&a===l?!0:(t=!0,i(a,n,r,t)||i(l,n,r,t)||i(n,a,l)||i(r,a,l))},_isInDateSlot:function(e){var t=this.startDate(),i=new Date(this.endDate().getTime()+f-1);return(n(e.start,t,i)||n(e.end,t,i)||n(t,e.start,e.end)||n(i,e.start,e.end))&&(!n(e.end,t,t)||n(e.end,e.start,e.start)||e.isAllDay)},_updateAllDayHeaderHeight:function(e){var t,n=this.element.find(".k-scheduler-header-all-day td");if(n.length)for(n.parent().add(this.element.find(".k-scheduler-times-all-day").parent()).height(e),t=0;t<this.groups.length;t++)this.groups[t].refresh()},_renderEvents:function(e,t){var n,i,o,a,s,l,d,c,u,p,h,g,m,v,_,b=this.datesHeader.find(".k-scheduler-header-wrap > div");for(i=0,o=e.length;o>i;i++)if(n=e[i],this._isInDateSlot(n))if(a=n.isAllDay||n.end.getTime()-n.start.getTime()>=f,s=a&&!this._isVerticallyGrouped()?b:this.content,a)this.options.allDaySlot&&(c=this.groups[t],c._continuousEvents||(c._continuousEvents=[]),d=c.slotRanges(n),l=this._createEventElement(n,!a),this._positionAllDayEvent(l,d[0]),r(c,d[0],l,!0),l.appendTo(s));else if(this._isInTimeSlot(n))for(c=this.groups[t],c._continuousEvents||(c._continuousEvents=[]),d=c.slotRanges(n),u=d.length,p=0;u>p;p++)h=d[p],g=n.start,m=n.end,u>1&&(0===p?m=h.end.endDate():p==u-1?g=h.start.startDate():(g=h.start.startDate(),m=h.end.endDate())),v=n.clone({start:g,end:m}),this._isInTimeSlot(v)&&(_=h.head,l=this._createEventElement(n,!a,_,h.tail),this._positionEvent(v,l,h),r(c,h,l,!1),l.appendTo(s))},render:function(e){this._headerColumnCount=0,this._groups(),this.element.find(".k-event").remove(),this._updateAllDayHeaderHeight(this._allDayHeaderHeight),e=new o.data.Query(e).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray();var t=this.groupedResources;t.length?this._renderGroups(e,t,0):this._renderEvents(e,0,0),this.refreshLayout(),this.trigger("activate")},_renderGroups:function(e,t,n){var i,r,a,s,d=t[0];if(d)for(i=d.dataSource.view(),r=0;r<i.length;r++)a=this._resourceValue(d,i[r]),s=new o.data.Query(e).filter({field:d.field,operator:l.groupEqFilter(a)}).toArray(),t.length>1?n=this._renderGroups(s,t.slice(1),n++):this._renderEvents(s,n++);return n},_columnOffsetForResource:function(e){return this._columnCountForLevel(e)/this._columnCountForLevel(e-1)},_columnCountForLevel:function(e){var t=this.columnLevels[e];return t?t.length:0},_rowCountForLevel:function(e){var t=this.rowLevels[e];return t?t.length:0},clearSelection:function(){this.content.add(this.datesHeader).find(".k-state-selected").removeAttr("id").attr("aria-selected",!1).removeClass("k-state-selected")},_updateDirection:function(e,t,n,i,r){var o=e.isAllDay,a=t[0].start,s=t[t.length-1].end;n&&(r?o||a.index!==s.index||a.collectionIndex!==s.collectionIndex||(e.backward=i):(o&&a.index===s.index||!o&&a.collectionIndex===s.collectionIndex)&&(e.backward=i))},_changeViewPeriod:function(e,t,n){var i,r,o,a;return n?undefined:(i=t?this.previousDate():this.nextDate(),r=e.start,o=e.end,e.start=new Date(i),e.end=new Date(i),a=e.isAllDay?f:h(o),s(e.start,h(r)),s(e.end,a),this._isVerticallyGrouped()||(e.groupIndex=t?this.groups.length-1:0),e.events=[],!0)}});d(!0,a,{MultiDayView:y,DayView:y.extend({options:{title:"Day"},name:"day"}),WeekView:y.extend({options:{title:"Week",selectedDateFormat:"{0:D} - {1:D}"},name:"week",calculateDateRange:function(){var e,t,n=this.options.date,i=o.date.dayOfWeek(n,this.calendarInfo().firstDay,-1),r=[];for(e=0,t=7;t>e;e++)r.push(i),i=o.date.nextDay(i);this._render(r)}})})}(window.kendo.jQuery),function(e){function t(e){var t,n,i=0;for(t=0,n=e.length;n>t;t++)i+=e[t].items.length;return i}function n(e,t){return e.valuePrimitive&&(t=o.getter(e.dataValueField)(t)),t}function i(e){for(var t,n=0,i=e.length,o=[];i>n;n++)t=e[n],t.groups?(t=r(t.groups),o=o.concat(t)):o=o.concat(r(t.items));return o}function r(e){for(var t=[].concat(e),n=t.shift(),i=[],r=[].push;n;)n.groups?r.apply(t,n.groups):n.items?r.apply(t,n.items):r.call(i,n),n=t.shift();return i}var o=window.kendo,a=o.ui,s=".kendoAgendaView";a.AgendaView=a.SchedulerView.extend({init:function(t,n){a.SchedulerView.fn.init.call(this,t,n),n=this.options,n.editable&&(n.editable=e.extend({"delete":!0},n.editable,{create:!1,update:!1})),this.title=n.title,this.name="agenda",this._eventTemplate=o.template(n.eventTemplate),this._dateTemplate=o.template(n.eventDateTemplate),this._groupTemplate=o.template(n.eventGroupTemplate),this._timeTemplate=o.template(n.eventTimeTemplate),this.element.on("mouseenter"+s,".k-scheduler-agenda .k-scheduler-content tr","_mouseenter").on("mouseleave"+s,".k-scheduler-agenda .k-scheduler-content tr","_mouseleave").on("click"+s,".k-scheduler-agenda .k-scheduler-content .k-link:has(.k-si-close)","_remove"),this._renderLayout(n.date)},_mouseenter:function(t){e(t.currentTarget).addClass("k-state-hover")},_mouseleave:function(t){e(t.currentTarget).removeClass("k-state-hover")},_remove:function(t){t.preventDefault(),this.trigger("remove",{uid:e(t.currentTarget).closest(".k-task").attr(o.attr("uid"))})},nextDate:function(){return o.date.nextDay(this.startDate())},startDate:function(){return this._startDate},endDate:function(){return this._endDate},previousDate:function(){return o.date.previousDay(this.startDate())},_renderLayout:function(e){this._startDate=e,this._endDate=o.date.addDays(e,7),this.createLayout(this._layout()),this.table.addClass("k-scheduler-agenda")},_layout:function(){var e,t,n=[{text:this.options.messages.date,className:"k-scheduler-datecolumn"},{text:this.options.messages.time,className:"k-scheduler-timecolumn"},{text:this.options.messages.event}],i=this.groupedResources;if(i.length){for(e=[],t=0;t<i.length;t++)e.push({text:"",className:"k-scheduler-groupcolumn"});n=e.concat(n)}return{columns:n}},_tasks:function(e){var t,n,i,r,a,s,l,d=[];for(t=0;t<e.length;t++)if(n=e[t],i=n.start,r=n.end,n.isAllDay&&(r=o.date.nextDay(r)),a=Math.ceil((r-i)/o.date.MS_PER_DAY),n.isAllDay||1!==a||o.date.getDate(r).getTime()===o.date.getDate(i).getTime()||(a+=1),s=n.clone(),s.startDate=o.date.getDate(i),s.startDate>=this.startDate()&&d.push(s),a>1)for(s.end=o.date.nextDay(i),s.head=!0,l=1;a>l;l++)i=s.end,s=n.clone(),s.start=i,s.startDate=o.date.getDate(i),s.end=o.date.nextDay(i),l==a-1?(s.end=new Date(s.start.getFullYear(),s.start.getMonth(),s.start.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()),s.tail=!0):(s.isAllDay=!0,s.middle=!0),s.end<=this.endDate()&&s.start>=this.startDate()&&d.push(s);return new o.data.Query(d).sort([{field:"start",dir:"asc"},{field:"end",dir:"asc"}]).groupBy({field:"startDate"}).toArray()},_renderTaskGroups:function(e,t){var n,i,r,a,s,l,d,c,u=[],p=this.options.editable,f=p&&p.destroy!==!1;for(n=0;n<e.length;n++)for(i=e[n].value,r=e[n].items,a=o.date.isToday(i),s=0;s<r.length;s++){if(l=r[s],d=[],0===n&&0===s&&t.length)for(c=0;c<t.length;c++)d.push(o.format('<td class="k-scheduler-groupcolumn{2}" rowspan="{0}">{1}</td>',t[c].rowSpan,this._groupTemplate({value:t[c].text}),t[c].className));0===s&&d.push(o.format('<td class="k-scheduler-datecolumn{2}" rowspan="{0}">{1}</td>',r.length,this._dateTemplate({date:i}),n!=e.length-1||t.length?"":" k-last")),l.format=l.head?"{0:t}":l.tail?"{1:t}":"{0:t}-{1:t}",l.resources=this.eventResources(l),d.push(o.format('<td class="k-scheduler-timecolumn"><div>{0}{1}{2}</div></td><td>{3}</td>',l.tail||l.middle?'<span class="k-icon k-i-arrow-w"></span>':"",this._timeTemplate(l.clone({start:l.startTime||l.start,end:l.endTime||l.end})),l.head||l.middle?'<span class="k-icon k-i-arrow-e"></span>':"",this._eventTemplate(l.clone({showDelete:f})))),u.push('<tr role="row" aria-selected="false"'+(a?' class="k-today">':">")+d.join("")+"</tr>")
}return u.join("")},render:function(e){var t,n=this.content.find("table").empty(),r=[];e.length>0&&(t=this.groupedResources,t.length?(r=this._createGroupConfiguration(e,t,null),this._renderGroups(r,n,[])):(r=this._tasks(e),n.append(this._renderTaskGroups(r,[])))),this._eventsList=i(r),this.refreshLayout(),this.trigger("activate")},_renderGroups:function(e,t,n){var i,r,o;for(i=0,r=e.length;r>i;i++)o=n.splice(0),o.push(e[i]),e[i].groups?this._renderGroups(e[i].groups,t,o):t.append(this._renderTaskGroups(e[i].items,o))},_createGroupConfiguration:function(e,i,r){var s,l,d,c,u,p,f,h=i[0],g=[],m=h.dataSource.view();for(s=0;s<m.length;s++)l=n(h,m[s]),d=new o.data.Query(e).filter({field:h.field,operator:a.SchedulerView.groupEqFilter(l)}).toArray(),d.length&&(c=this._tasks(d),u=r?"":" k-first",s===m.length-1&&(!r||r.className.indexOf("k-last")>-1)&&(u+=" k-last"),p={text:o.getter(h.dataTextField)(m[s]),value:l,rowSpan:0,className:u},i.length>1?(p.groups=this._createGroupConfiguration(d,i.slice(1),p),r&&(r.rowSpan+=p.rowSpan)):(p.items=c,f=t(p.items),p.rowSpan=f,r&&(r.rowSpan+=f)),g.push(p));return g},selectionByElement:function(t){var n,i;return t=e(t),t.hasClass("k-scheduler-datecolumn")?void 0:(n=t.parent().index(),i=this._eventsList[n],{index:n,start:i.start,end:i.end,isAllDay:i.isAllDay,uid:i.uid})},select:function(e){this.clearSelection();var t=this.table.find(".k-task").eq(e.index).closest("tr").addClass("k-state-selected")[0];t&&this._scrollTo(t,this.content[0])},move:function(e,t){var n,i=!1,r=e.index;return t==o.keys.UP?(r--,i=!0):t==o.keys.DOWN&&(r++,i=!0),i&&(n=this._eventsList[r],n&&(e.start=n.start,e.end=n.end,e.isAllDay=n.isAllDay,e.events=[n.uid],e.index=r)),i},moveToEvent:function(){return!1},constrainSelection:function(e){var t=this._eventsList[0];t&&(e.start=t.start,e.end=t.end,e.isAllDay=t.isAllDay,e.events=[t.uid],e.index=0)},isInRange:function(){return!0},destroy:function(){this.element&&this.element.off(s),a.SchedulerView.fn.destroy.call(this)},options:{title:"Agenda",name:"agenda",editable:!0,selectedDateFormat:"{0:D}-{1:D}",eventTemplate:'<div class="k-task" title="#:title.replace(/"/g,"\'")#" data-#=kendo.ns#uid="#=uid#"># if (resources[0]) {#<span class="k-scheduler-mark" style="background-color:#=resources[0].color#"></span># } ## if (data.isException()) { #<span class="k-icon k-i-exception"></span># } else if (data.isRecurring()) {#<span class="k-icon k-i-refresh"></span># } ##:title##if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}#</div>',eventTimeTemplate:"#if(data.isAllDay) {#all day#} else { ##=kendo.format(format, start, end)## } #",eventDateTemplate:'<strong class="k-scheduler-agendaday">#=kendo.toString(date, "dd")#</strong><em class="k-scheduler-agendaweek">#=kendo.toString(date,"dddd")#</em><span class="k-scheduler-agendadate">#=kendo.toString(date, "y")#</span>',eventGroupTemplate:'<strong class="k-scheduler-adgendagroup">#=value#</strong>',messages:{event:"Event",date:"Date",time:"Time"}}})}(window.kendo.jQuery),function(e){function t(e,t){return e.slice(t).concat(e.slice(0,t))}function n(e,t){for(var n=t.firstDay,i=new Date(e.getFullYear(),e.getMonth(),0,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());i.getDay()!=n;)r.date.setTime(i,-1*u);return i}function i(e,t,n){var i,r=t.getTime(),o=n.getTime();return i=e.getTime(),i>=r&&o>=i}var r=window.kendo,o=r.ui,a=o.SchedulerView,s=".kendoMonthView",l=e.extend,d=e.proxy,c=r.date.getDate,u=r.date.MS_PER_DAY,p=6,f=7,h=r.template('<span class="k-link k-nav-day">#:kendo.toString(date, "dd")#</span>'),g='<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#"#if (resources[0]) { #style="background-color:#=resources[0].color #; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#"#} else {#class="k-event"#}#><span class="k-event-actions"># if(data.tail || data.middle) {#<span class="k-icon k-i-arrow-w"></span>#}## if(data.isException()) {#<span class="k-icon k-i-exception"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"></span>#}#</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}## if(data.head || data.middle) {#<span class="k-icon k-i-arrow-e"></span>#}#</span># if(resizable && !data.tail && !data.middle) {#<span class="k-resize-handle k-resize-w"></span>#}## if(resizable && !data.head && !data.middle) {#<span class="k-resize-handle k-resize-e"></span>#}#</div>',m=r.template('<div title="#=title.replace(/"/g,"&\\#34;")#"><div class="k-event-template">#:title#</div></div>'),v=r.template('<div style="width:#=width#px;left:#=left#px;top:#=top#px" class="k-more-events k-button"><span>...</span></div>');o.MonthView=a.extend({init:function(e,t){var n=this;a.fn.init.call(n,e,t),n.title=n.options.title,n.name="month",n._templates(),n._editable(),n._renderLayout(n.options.date),n._groups()},_updateDirection:function(e,t,n,i,r){var o,a,s,l,d;n&&(o=t[0].start,a=t[t.length-1].end,s=o.index===a.index,l=o.collectionIndex===a.collectionIndex,d=r?s&&l||l:s&&l,d&&(e.backward=i))},_changeViewPeriod:function(e,t,n){var i=n?7:1;return t&&(i*=-1),e.start=r.date.addDays(e.start,i),e.end=r.date.addDays(e.end,i),(!n||n&&this._isVerticallyGrouped())&&(e.groupIndex=t?this.groups.length-1:0),e.events=[],!0},_continuousSlot:function(e,t,n){var i=e.backward?0:t.length-1,r=this.groups[e.groupIndex];return r.continuousSlot(t[i].start,n)},_changeGroupContinuously:function(e,t,n,i){var r,o,a,s;return n||(r=e.groupIndex,o=this.groups.length-1,a=this._isVerticallyGrouped(),s=this.groups[r],!t&&a?(t=s[i?"lastSlot":"firstSlot"](),r+=i?-1:1):t&&!a&&(r=i?o:0),(0>r||r>o)&&(r=i?o:0,t=null),e.groupIndex=r),t},_normalizeHorizontalSelection:function(e,t,n){var i;return i=n?t[0].start:t[t.length-1].end},_normalizeVerticalSelection:function(e,t){var n;return n=e.backward?t[0].start:t[t.length-1].end},_templates:function(){var e=this.options,t=l({},r.Template,e.templateSettings);this.eventTemplate=this._eventTmpl(e.eventTemplate),this.dayTemplate=r.template(e.dayTemplate,t)},dateForTitle:function(){return r.format(this.options.selectedDateFormat,this._firstDayOfMonth,this._lastDayOfMonth)},nextDate:function(){return r.date.nextDay(this._lastDayOfMonth)},previousDate:function(){return r.date.previousDay(this._firstDayOfMonth)},startDate:function(){return this._startDate},endDate:function(){return this._endDate},_renderLayout:function(t){var i=this;this._firstDayOfMonth=r.date.firstDayOfMonth(t),this._lastDayOfMonth=r.date.lastDayOfMonth(t),this._startDate=n(t,this.calendarInfo()),this.createLayout(this._layout()),this.table.addClass("k-scheduler-monthview"),this._content(),this.refreshLayout(),this.content.on("click"+s,".k-nav-day,.k-more-events",function(t){var n=e(t.currentTarget).offset(),r=i._slotByPosition(n.left,n.top);t.preventDefault(),i.trigger("navigate",{view:"day",date:r.startDate()})})},_editable:function(){this.options.editable&&(r.support.mobileOS?this._touchEditable():this._mouseEditable())},_mouseEditable:function(){var t=this;t.element.on("click"+s,".k-scheduler-monthview .k-event a:has(.k-si-close)",function(n){t.trigger("remove",{uid:e(this).closest(".k-event").attr(r.attr("uid"))}),n.preventDefault()}),t.options.editable.create!==!1&&t.element.on("dblclick"+s,".k-scheduler-monthview .k-scheduler-content td",function(n){var i=e(n.currentTarget).offset(),r=t._slotByPosition(i.left,i.top),o=t._resourceBySlot(r);t.trigger("add",{eventInfo:l({isAllDay:!0,start:r.startDate(),end:r.startDate()},o)}),n.preventDefault()}),t.options.editable.update!==!1&&t.element.on("dblclick"+s,".k-scheduler-monthview .k-event",function(n){t.trigger("edit",{uid:e(this).closest(".k-event").attr(r.attr("uid"))}),n.preventDefault()})},_touchEditable:function(){var t=this;t._closeUserEvents=new r.UserEvents(t.element,{filter:".k-scheduler-monthview .k-event a:has(.k-si-close)",tap:function(n){t.trigger("remove",{uid:e(n.target).closest(".k-event").attr(r.attr("uid"))}),n.preventDefault()}}),t.options.editable.create!==!1&&(t._addUserEvents=new r.UserEvents(t.element,{filter:".k-scheduler-monthview .k-scheduler-content td",tap:function(n){var i=e(n.target).offset(),r=t._slotByPosition(i.left,i.top),o=t._resourceBySlot(r);t.trigger("add",{eventInfo:l({isAllDay:!0,start:r.startDate(),end:r.endDate()},o)}),n.preventDefault()}})),t.options.editable.update!==!1&&(t._editUserEvents=new r.UserEvents(t.element,{filter:".k-scheduler-monthview .k-event.k-state-selected",tap:function(n){0===e(n.event.target).closest("a:has(.k-si-close)").length&&(t.trigger("edit",{uid:e(n.target).closest(".k-event").attr(r.attr("uid"))}),n.preventDefault())}}))},selectionByElement:function(t){var n=e(t).offset();return this._slotByPosition(n.left,n.top)},_columnCountForLevel:function(e){var t=this.columnLevels[e];return t?t.length:0},_rowCountForLevel:function(e){var t=this.rowLevels[e];return t?t.length:0},_content:function(){var e,t="<tbody>",n=1,i=this.groupedResources;for(i.length&&this._isVerticallyGrouped()&&(n=this._rowCountForLevel(i.length-1)),e=0;n>e;e++)t+=this._createCalendar();t+="</tbody>",this.content.find("table").html(t)},_createCalendar:function(){var e,t,n,i=this.startDate(),o=f*p,a=f,s=[i],l="",d=1,c=this.groupedResources;for(c.length&&(this._isVerticallyGrouped()||(d=this._columnCountForLevel(c.length-1))),this._slotIndices={},e=0;o/a>e;e++){for(l+="<tr>",s.push(i),t=e*a,n=0;d>n;n++)l+=this._createRow(i,t,a);i=r.date.addDays(i,a),l+="</tr>"}return this._weekStartDates=s,this._endDate=r.date.previousDay(i),l},_createRow:function(e,t,n){var i,o=this._firstDayOfMonth,a=this._lastDayOfMonth,s=this.dayTemplate,l="",d="";for(i=0;n>i;i++)l="",r.date.isToday(e)&&(l+="k-today"),r.date.isInDateRange(e,o,a)||(l+=" k-other-month"),d+="<td ",""!==l&&(d+='class="'+l+'"'),d+=">",d+=s({date:e}),d+="</td>",this._slotIndices[c(e).getTime()]=t+i,e=r.date.nextDay(e);return d},_layout:function(){var n,i,r,o=this.calendarInfo(),a=t(o.days.names,o.firstDay),s=e.map(a,function(e){return{text:e}}),l=this.groupedResources;if(l.length)if(this._isVerticallyGrouped()){for(i=[],r=0;6>r;r++)i.push({text:"<div>&nbsp;</div>",className:"k-hidden k-slot-cell"});n=this._createRowsLayout(l,i)}else s=this._createColumnsLayout(l,s);return{columns:s,rows:n}},_eventTmpl:function(e){var t,n=this.options,i=l({},r.Template,n.templateSettings),o=i.paramName,a="",s=typeof e,c={storage:{},count:0};return"function"===s?(c.storage["tmpl"+c.count]=e,a+="#=this.tmpl"+c.count+"("+o+")#",c.count++):"string"===s&&(a+=e),t=r.template(r.format(g,a),i),c.count>0&&(t=d(t,c.storage)),t},_createEventElement:function(t){var n=this.options,i=n.editable;return t.showDelete=i&&i.destroy!==!1,t.resizable=i&&i.resize!==!1,t.ns=r.ns,t.resources=this.eventResources(t),t.inverseColor=t.resources&&t.resources[0]?this._shouldInverseResourceColor(t.resources[0]):!1,e(this.eventTemplate(t))},_isInDateSlot:function(e){var t=this.startDate(),n=new Date(this.endDate().getTime()+u-1);return i(e.start,t,n)||i(e.end,t,n)||i(t,e.start,e.end)||i(n,e.start,e.end)},_slotIndex:function(e){return this._slotIndices[c(e).getTime()]},_positionEvent:function(t,n,i){var o,s,l,d,c,u,p,f,h,g,m,_,b,w,y,k=this.options.eventHeight,x=t.start;for(t.start.offsetLeft>t.end.offsetLeft&&(x=t.end),o=t.start.index,s=t.end.index,l=x.eventCount,d=a.collidingEvents(t.events(),o,s),c=o!==s?5:4,d.push({element:n,start:o,end:s}),u=a.createRows(d),p=0,f=Math.min(u.length,l);f>p;p++)for(h=u[p].events,g=x.offsetTop+x.firstChildHeight+p*k+3*p+"px",m=0,_=h.length;_>m;m++)h[m].element[0].style.top=g;if(u.length>l)for(b=o;s>=b;b++){if(w=t.collection,y=w.at(b),y.more)return;y.more=e(v({ns:r.ns,start:b,end:b,width:y.clientWidth-2,left:this._scrollbarOffset(y.offsetLeft+2),top:y.offsetTop+y.firstChildHeight+l*k+3*l})),this.content[0].appendChild(y.more[0])}else t.addEvent({element:n,start:o,end:s,groupIndex:x.groupIndex}),n[0].style.width=t.innerWidth()-c+"px",n[0].style.left=this._scrollbarOffset(x.offsetLeft+2)+"px",n[0].style.height=k+"px",i._continuousEvents.push({element:n,uid:n.attr(r.attr("uid")),start:t.start,end:t.end}),this.content[0].appendChild(n[0])},_slotByPosition:function(e,t){var n,i,r=this.content.offset();for(e-=r.left,t-=r.top,t+=this.content[0].scrollTop,e+=this.content[0].scrollLeft,e=Math.ceil(e),t=Math.ceil(t),n=0;n<this.groups.length;n++)if(i=this.groups[n].daySlotByPosition(e,t))return i;return null},_createResizeHint:function(e){var t,n,i,r,o=e.startSlot().offsetLeft;o=this._scrollbarOffset(o),t=e.start.offsetTop,n=e.innerWidth(),i=e.start.clientHeight-2,r=a.fn._createResizeHint.call(this,o,t,n,i),r.appendTo(this.content),this._resizeHint=this._resizeHint.add(r)},_updateResizeHint:function(e,t,n){var i,o,a;for(this._removeResizeHint(),i=this.groups[n.groupIndex],o=i.ranges(t.startDate(),e.isAllDay?n.startDate():n.endDate(),!0,e.isAllDay),a=0;a<o.length;a++)this._createResizeHint(o[a]);this._resizeHint.find(".k-label-top,.k-label-bottom").text(""),this._resizeHint.first().addClass("k-first").find(".k-label-top").text(r.toString(t.startDate(),"M/dd")),this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(r.toString(n.startDate(),"M/dd"))},_updateMoveHint:function(e,t,n){var i,o,a,s,l,d=n.start-t.start,c=r.date.toUtcTime(e.start)+d,u=c+e.duration(),p=this.groups[n.groupIndex],f=p.ranges(c,u,!0,e.isAllDay);for(this._removeMoveHint(),i=0;i<f.length;i++)o=f[i],a=o.startSlot(),s=o.endSlot(),l=this._createEventElement(e.clone({head:o.head,tail:o.tail})),l.css({left:a.offsetLeft+2,top:a.offsetTop+a.firstChildHeight,height:this.options.eventHeight,width:o.innerWidth()-(a.index!==s.index?5:4)}),l.addClass("k-event-drag-hint"),l.appendTo(this.content),this._moveHint=this._moveHint.add(l)},_groups:function(){var e,t,n,i,o,a,s,l,d,c,u,h,g,m,v,_,b,w=this._groupCount(),y=f,k=p;for(this.groups=[],e=0;w>e;e++)this._addResourceView(e);for(t=this.content[0].getElementsByTagName("tr"),n=0;w>n;n++)for(i=0,o=0,this._isVerticallyGrouped()&&(o=n),a=o*k;(o+1)*k>a;a++)for(s=this.groups[n],l=s.addDaySlotCollection(r.date.addDays(this.startDate(),i),r.date.addDays(this.startDate(),i+y)),d=t[a],c=d.children,u=0,d.setAttribute("role","row"),this._isVerticallyGrouped()||(u=n),h=u*y;(u+1)*y>h;h++)g=c[h],m=g.clientHeight,v=g.firstChild.offsetHeight+3,_=r.date.toUtcTime(r.date.addDays(this.startDate(),i)),i++,b=Math.floor((m-v)/(this.options.eventHeight+3)),g.setAttribute("role","gridcell"),g.setAttribute("aria-selected",!1),l.addDaySlot(g,_,_+r.date.MS_PER_DAY,b)},render:function(e){this.content.children(".k-event,.k-more-events").remove(),this._groups(),e=new r.data.Query(e).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray();var t=this.groupedResources;t.length?this._renderGroups(e,t,0,1):this._renderEvents(e,0),this.refreshLayout(),this.trigger("activate")},_renderEvents:function(e,t){var n,i,r,o,a,s,l,d,c,u,p;for(i=0,r=e.length;r>i;i++)if(n=e[i],this._isInDateSlot(n))for(o=this.groups[t],o._continuousEvents||(o._continuousEvents=[]),a=o.slotRanges(n,!0),s=a.length,l=0;s>l;l++)d=a[l],c=n.start,u=n.end,s>1&&(0===l?u=d.end.endDate():l==s-1?c=d.start.startDate():(c=d.start.startDate(),u=d.end.endDate())),p=n.clone({start:c,end:u,head:d.head,tail:d.tail}),this._positionEvent(d,this._createEventElement(p),o)},_renderGroups:function(e,t,n,i){var o,s,l,d,c=t[0];if(c)for(o=c.dataSource.view(),s=0;s<o.length;s++)l=this._resourceValue(c,o[s]),d=new r.data.Query(e).filter({field:c.field,operator:a.groupEqFilter(l)}).toArray(),t.length>1?n=this._renderGroups(d,t.slice(1),n++,i+1):this._renderEvents(d,n++);return n},_groupCount:function(){var e=this.groupedResources;return e.length?this._isVerticallyGrouped()?this._rowCountForLevel(e.length-1):this._columnCountForLevel(e.length)/this._columnOffsetForResource(e.length):1},_removeOffset:function(e,t){var n,i,r,o,a=this.groupedResources,s=0;return a.length&&(this._isVerticallyGrouped()?s=f*p*t:(n=this._columnOffsetForResource(a.length),i=this._groupCount(),r=n*i,o=Math.floor(e/r),s=n*(i-1)*o,s+=n*t)),e-s},_applyOffset:function(e,t){var n,i,r=this.groupedResources,o=0,a=f,s=p;return r.length&&(this._isVerticallyGrouped()?o=a*s*t:(n=Math.floor(e/a),i=this._columnOffsetForResource(r.length),o=i*(this._groupCount()-1)*n,o+=i*t)),e+o},_groupIndex:function(e){var t,n,i,r,o,a=this.groupedResources;return a.length?this._isVerticallyGrouped()?Math.floor(e/(f*p)):(t=this._columnOffsetForResource(a.length),n=this._groupCount(),i=t*n,r=Math.floor(e/i),o=t*n*r,Math.floor((e-o)/t)):0},_columnOffsetForResource:function(e){return this._columnCountForLevel(e)/this._columnCountForLevel(e-1)},destroy:function(){this.table&&this.table.removeClass("k-scheduler-monthview"),this.content&&this.content.off(s),this.element&&this.element.off(s),a.fn.destroy.call(this),r.support.mobileOS&&(this._closeUserEvents.destroy(),this.options.editable.create!==!1&&this._addUserEvents.destroy(),this.options.editable.update!==!1&&this._editUserEvents.destroy())},events:["remove","add","edit","navigate"],options:{title:"Month",name:"month",eventHeight:25,editable:!0,selectedDateFormat:"{0:y}",dayTemplate:h,eventTemplate:m}})}(window.kendo.jQuery),function(e,t){function n(e){var t=e.getMonth(),n=m(e)?X[t]:J[t];return n+e.getDate()}function i(e,n){var i,r;return e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),Q(e,0),i=e.getFullYear(),n!==t?(Y(e,n,-1),e.setDate(e.getDate()+4)):e.setDate(e.getDate()+(4-(e.getDay()||7))),Q(e,0),r=Math.floor((e.getTime()-new Date(i,0,1,-6))/864e5),1+Math.floor(r/7)}function r(e,t){var n=$(e).getDay(),i=Math.abs(7-(n+7-(t||7)))||7;return Math.ceil((e.getDate()-i)/7)+1}function o(e,t,n){return 0>t&&(t=a(e,n)+(t+1)),t}function a(e,t){return r(new Date(e.getFullYear(),e.getMonth()+1,0),t)}function s(e,t,n){var i=t.offset,a=r(e,n);return l(e,t,n)||(a-=1),a===o(e,i,n)}function l(e,t,n){var i,r,a=t.day,s=t.offset;return s?(i=$(e).getDay(),n>i&&(i+=n),n>a&&(a+=n),r=a>=i,!r&&0>s&&1!==o(e,s,n)&&(r=!0),r):!0}function d(e,t,n){var i,a,s,d,c=t.getDay(),u=e.length,p=[],f=0;for(n>c&&(c+=7);u>f;f++)if(i=e[f],s=i.offset,a=i.day,n>a&&(a+=7),d=r(t,n),s=s?o(t,s,n):d,s>d)p.push(i);else if(d===s&&l(t,i,n))if(a>c)p.push(i);else if(c===a)return null;return p}function c(e,t,n){for(var i,r=0,o=e.length,a=[];o>r;r++){if(i=e[r],n&&(i=n(i)),t===i)return null;i>t&&a.push(i)}return a}function u(e,t){for(var n,i=[],r=t.length,o=0;r>o;o++)n=e[t[o]-1],n&&i.push(n);return i}function p(e,t){for(var n,i=0,r=e.length;r>i;i++){if(n=parseInt(e[i],10),isNaN(n)||n<t.start||n>t.end||0===n&&t.start<0)return null;e[i]=n}return e.sort(v)}function f(e){for(var n,i,r,o=0,a=e.length;a>o;o++){if(n=e[o],i=n.length,r=n.substring(i-2).toUpperCase(),r=tt[r],r===t)return null;e[o]={offset:parseInt(n.substring(0,i-2),10)||0,day:r}}return e}function h(e){for(var t,n,i=0,r=e.length,o=[];r>i;i++)t=e[i],"string"==typeof t?n=t:(n=""+et[t.day],t.offset&&(n=t.offset+n)),o.push(n);return""+o}function g(e){var t=e.getMonth();return 1===t?1===new Date(e.getFullYear(),1,29).getMonth()?29:28:Z[t]}function m(e){return e=e.getFullYear(),0===e%4&&0!==e%100||0===e%400}function v(e,t){return e-t}function _(e,t){var n,i,r=0,o=[];if(e)for(e=e.split(";"),n=e.length;n>r;r++)i=y(e[r],t),i&&o.push(i);return o}function b(t,n,i){for(var r=e.isArray(t)?t:_(t,i),o=n.getTime()-n.getMilliseconds(),a=0,s=r.length;s>a;a++)if(r[a].getTime()===o)return!0;return!1}function w(e,n,i,r){var o,a,s,l,d,c,p,f,h,g,m,v,w,y,k,C,T=x(e.recurrenceRule),S=1,D=[];if(!T)return[e];for(h=T.start,g=T.end,(h||g)&&(e=e.clone({start:h?new Date(h.value):t,end:g?new Date(g.value):t})),y=e.start,k=y.getTime(),C=K(y),m=_(e.recurrenceException,r),f=n=new Date(n),i=new Date(i),w=pt[T.freq],v=T.count,T.until&&T.until<i&&(i=new Date(T.until)),k>n||v||T.interval>1?(n=new Date(k),l=n.getHours()):(l=n.getHours(),d=n.getMinutes(),c=n.getSeconds(),T.hours||(l=y.getHours()),T.minutes||(d=y.getMinutes()),T.seconds||(c=y.getSeconds()),n.setHours(l,d,c,y.getMilliseconds())),p=e.duration(),T._startTime=o=N.date.toInvariantTime(n),w.setup&&w.setup(T,n,y),w.limit(n,i,T);i>=n&&(n>=f&&!b(m,n,r)&&(s=new Date(n),q(s,p),a=new Date(T._startTime),q(a,p),k!==n.getTime()||C!==K(o)?D.push(e.toOccurrence({start:new Date(n),startTime:new Date(o),end:s,endTime:a})):(e.startTime=o,e.endTime=a,D.push(e))),!v||v!==S);)S++,w.next(n,T),w.limit(n,i,T);return T.setPositions&&(D=u(D,T.setPositions)),D}function y(e,t){return e=N.parseDate(e,nt),e&&t&&(e=V.convert(e,e.getTimezoneOffset(),t)),e}function k(e,n){var i,r,o,a,s,l,d=e.split(";");for(s=0,l=d.length;l>s;s++)i=d[s].split(":"),r=i[0],o=i[1],-1!==r.indexOf("TZID")&&(a=r.substring(r.indexOf("TZID")).split("=")[1]),o&&(o=y(o,a||n));return o?{value:o,tzid:a}:t}function x(n,i){var r,o,a,s,l,d,c,u,h,g={},m=0,v=function(e,t){var n=e.day,i=t.day;return l>n&&(n+=l),l>i&&(i+=l),n-i};if(!n)return null;for(h=n.split("\n"),h[1]||-1===n.indexOf("DTSTART")&&-1===n.indexOf("DTEND")||(h=n.split(" ")),m=0,r=h.length;r>m;m++)u=h[m],-1!==u.indexOf("DTSTART")?g.start=k(u,i):-1!==u.indexOf("DTEND")?g.end=k(u,i):c=-1!==u.indexOf("RRULE")?u.substring(6):u;for(c=c.split(";"),m=0,r=c.length;r>m;m++){switch(s=c[m],o=s.split("="),a=e.trim(o[1]).split(","),e.trim(o[0]).toUpperCase()){case"FREQ":g.freq=a[0].toLowerCase();break;case"UNTIL":g.until=y(a[0],i);break;case"COUNT":g.count=parseInt(a[0],10);break;case"INTERVAL":g.interval=parseInt(a[0],10);break;case"BYSECOND":g.seconds=p(a,{start:0,end:60});break;case"BYMINUTE":g.minutes=p(a,{start:0,end:59});break;case"BYHOUR":g.hours=p(a,{start:0,end:23});break;case"BYMONTHDAY":g.monthDays=p(a,{start:-31,end:31});break;case"BYYEARDAY":g.yearDays=p(a,{start:-366,end:366});break;case"BYMONTH":g.months=p(a,{start:1,end:12});break;case"BYDAY":g.weekDays=d=f(a);break;case"BYSETPOS":g.setPositions=p(a,{start:1,end:366});break;case"BYWEEKNO":g.weeks=p(a,{start:-53,end:53});break;case"WKST":g.weekStart=l=tt[a[0]]}if(g.freq===t||g.count!==t&&g.until)return null;g.interval||(g.interval=1),l===t&&(g.weekStart=l=N.culture().calendar.firstDay),d&&(g.weekDays=d.sort(v))}return g}function C(e,t){var n=e.value,i=e.tzid||"";return n=V.convert(n,i||t||n.getTimezoneOffset(),"Etc/UTC"),i&&(i=";TZID="+i),i+":"+N.toString(n,"yyyyMMddTHHmmssZ")+" "}function T(e,n){var i=e.weekStart,r="FREQ="+e.freq.toUpperCase(),o=e.until,a=e.start||"",s=e.end||"";return e.interval>1&&(r+=";INTERVAL="+e.interval),e.count&&(r+=";COUNT="+e.count),o&&(o=V.convert(o,n||o.getTimezoneOffset(),"Etc/UTC"),r+=";UNTIL="+N.toString(o,"yyyyMMddTHHmmssZ")),e.months&&(r+=";BYMONTH="+e.months),e.weeks&&(r+=";BYWEEKNO="+e.weeks),e.yearDays&&(r+=";BYYEARDAY="+e.yearDays),e.monthDays&&(r+=";BYMONTHDAY="+e.monthDays),e.weekDays&&(r+=";BYDAY="+h(e.weekDays)),e.hours&&(r+=";BYHOUR="+e.hours),e.minutes&&(r+=";BYMINUTE="+e.minutes),e.seconds&&(r+=";BYSECOND="+e.seconds),e.setPositions&&(r+=";BYSETPOS="+e.setPositions),i!==t&&(r+=";WKST="+et[i]),a&&(a="DTSTART"+C(a,n)),s&&(s="DTEND"+C(s,n)),(a||s)&&(r=a+s+"RRULE:"+r),r}var S,D,A,E,F,I,P,B,z,H,R,M,L,O,N=window.kendo,V=N.timezone,U=N.Class,W=N.ui,j=W.Widget,G=N.date,q=G.setTime,Y=G.setDayOfWeek,Q=G.adjustDST,$=G.firstDayOfMonth,K=G.getMilliseconds,X=[0,31,60,91,121,152,182,213,244,274,305,335,366],J=[0,31,59,90,120,151,181,212,243,273,304,334,365],Z=[31,28,30,31,30,31,30,31,30,31,30,31],et={0:"SU",1:"MO",2:"TU",3:"WE",4:"TH",5:"FR",6:"SA"},tt={SU:0,MO:1,TU:2,WE:3,TH:4,FR:5,SA:6},nt=["yyyy-MM-ddTHH:mm:ss.fffzzz","yyyy-MM-ddTHH:mm:sszzz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm","yyyy-MM-ddTHH","yyyy-MM-dd","yyyyMMddTHHmmssfffzzz","yyyyMMddTHHmmsszzz","yyyyMMddTHHmmss","yyyyMMddTHHmm","yyyyMMddTHH","yyyyMMdd"],it=["months","weeks","yearDays","monthDays","weekDays","hours","minutes","seconds"],rt=it.length,ot={months:function(e,t,n){var i=n.months,r=c(i,e.getMonth()+1),o=!1;return null!==r&&(r.length?e.setMonth(r[0]-1,1):e.setFullYear(e.getFullYear()+1,i[0],1),o=!0),o},monthDays:function(e,t,n){for(var i,r,o,a=!1,s=e.getHours(),l=function(e){return 0>e&&(e=i+e),e};t>=e;){if(r=e.getMonth(),i=g(e),o=c(n.monthDays,e.getDate(),l),null===o)return a;if(a=!0,o.length){if(e.setMonth(r,o.sort(v)[0]),Q(e,s),r===e.getMonth())break}else e.setMonth(r+1,1)}return a},yearDays:function(e,t,i){for(var r,o,a=!1,s=e.getHours(),l=function(e){return 0>e&&(e=r+e),e};t>e;){if(r=m(e)?366:365,o=c(i.yearDays,n(e),l),null===o)return a;if(a=!0,r=e.getFullYear(),o.length){e.setFullYear(r,0,o.sort(v)[0]),Q(e,s);break}e.setFullYear(r+1,0,1)}return a},weeks:function(e,t,n){for(var r,o,a,s=n.weekStart,l=!1,d=e.getHours(),u=function(e){return 0>e&&(e=53+e),e};t>e;){if(o=c(n.weeks,i(e,s),u),null===o)return l;if(l=!0,r=e.getFullYear(),o.length){a=7*o.sort(v)[0]-1,e.setFullYear(r,0,a),Y(e,s,-1),Q(e,d);break}e.setFullYear(r+1,0,1)}return l},weekDays:function(e,t,n){var i,r,o=n.weekDays,a=n.weekStart,l=d(o,e,a),c=n.interval,u=e.getHours();if(null===l)return!1;if(i=l[0],i||(i=o[0],Y(e,a),n._weekDayFound&&c>1&&(e.setDate(e.getDate()+7*(c-1)),Q(e,u))),r=i.day,n._weekDayFound=!0,i.offset)for(;t>=e&&!s(e,i,a);)e.setDate(e.getDate()+7),Q(e,u),Y(e,a,-1);return e.getDay()!==r&&Y(e,r),!0},hours:function(e,t,n){var i=n.hours,r=n._startTime,o=r.getHours(),a=c(i,o),s=!1;return null!==a&&(s=!0,e.setHours(o),Q(e,o),a.length?(a=a[0],e.setHours(a)):(a=e.getHours(),e.setDate(e.getDate()+1),Q(e,a),a=i[0],e.setHours(a),Q(e,a)),n.minutes&&e.setMinutes(0),r.setHours(a,e.getMinutes())),s},minutes:function(e,t,n){var i=n.minutes,r=e.getMinutes(),o=c(i,r),a=n._startTime.getHours(),s=!1;return null!==o&&(s=!0,o.length?o=o[0]:(a+=1,o=i[0]),n.seconds&&e.setSeconds(0),e.setHours(a,o),a%=24,Q(e,a),n._startTime.setHours(a,o,e.getSeconds())),s},seconds:function(e,t,n){var i=n.seconds,r=n._startTime.getHours(),o=c(i,e.getSeconds()),a=e.getMinutes(),s=!1;return null!==o&&(s=!0,o.length?e.setSeconds(o[0]):(a+=1,e.setMinutes(a,i[0]),a>59&&(a%=60,r=(r+1)%24)),n._startTime.setHours(r,a,e.getSeconds())),s}},at=U.extend({next:function(e,t){var n,i,r=t._startTime,o=r.getDate();if(t.seconds)i=e.getSeconds()+1,e.setSeconds(i),r.setSeconds(i),r.setDate(o);else{if(!t.minutes)return!1;n=e.getMinutes()+1,e.setMinutes(n),r.setMinutes(n),r.setDate(o)}return!0},normalize:function(e){var t=e.rule;4===e.idx&&t.hours&&(t._startTime.setHours(0),this._hour(e.date,t))},limit:function(e,n,i){for(var r,o,a,s,l;n>=e;){for(a=o=t,l=e.getDate(),s=0;rt>s;s++){if(r=it[s],i[r]){if(a=ot[r](e,n,i),o!==t&&a)break;o=a}a&&this.normalize({date:e,rule:i,day:l,idx:s})}if(s===rt)break}},_hour:function(e,t,n){var i=t._startTime,r=i.getHours();n&&(r+=n),e.setHours(r),r%=24,i.setHours(r),Q(e,r)},_date:function(e,t,n){var i=e.getHours();e.setDate(e.getDate()+n),Q(e,i)||this._hour(e,t)}}),st=at.extend({next:function(e,t){at.fn.next(e,t)||this._hour(e,t,t.interval)},normalize:function(e){var t=e.rule;4===e.idx&&(t._startTime.setHours(0),this._hour(e.date,t))}}),lt=at.extend({next:function(e,t){at.fn.next(e,t)||(t.hours?this._hour(e,t,1):this._date(e,t,t.interval))}}),dt=at.extend({next:function(e,t){at.fn.next(e,t)||(t.hours?this._hour(e,t,1):this._date(e,t,1))},setup:function(e,t){e.weekDays||(e.weekDays=[{day:t.getDay(),offset:0}])}}),ct=at.extend({next:function(e,t){var n,i;if(!at.fn.next(e,t))if(t.hours)this._hour(e,t,1);else if(t.monthDays||t.weekDays||t.yearDays||t.weeks)this._date(e,t,1);else{for(n=e.getDate(),i=e.getHours(),e.setMonth(e.getMonth()+1),Q(e,i);e.getDate()!==n;)e.setDate(n),Q(e,i);this._hour(e,t)}},normalize:function(e){var t=e.rule,n=e.date,i=n.getHours();0!==e.idx||t.monthDays||t.weekDays?at.fn.normalize(e):(n.setDate(e.day),Q(n,i))},setup:function(e,t,n){e.monthDays||e.weekDays||t.setDate(n.getDate())}}),ut=ct.extend({next:function(e,t){var n,i=e.getHours();if(!at.fn.next(e,t))if(t.hours)this._hour(e,t,1);else if(t.monthDays||t.weekDays||t.yearDays||t.weeks)this._date(e,t,1);else if(t.months){for(n=e.getDate(),e.setMonth(e.getMonth()+1),Q(e,i);e.getDate()!==n;)e.setDate(n),Q(e,i);this._hour(e,t)}else e.setFullYear(e.getFullYear()+1),Q(e,i),this._hour(e,t)},setup:function(){}}),pt={hourly:new st,daily:new lt,weekly:new dt,monthly:new ct,yearly:new ut};N.recurrence={rule:{parse:x,serialize:T},expand:w,dayInYear:n,weekInYear:i,weekInMonth:r,numberOfWeeks:a,isException:b},S='<div class="k-edit-label"><label>{0}</label></div><div class="k-edit-field"><input class="k-recur-interval" />{1}</div>',D='<input class="k-recur-count" />{0}',A='<input class="k-recur-until" />',E='<div class="k-edit-label"><label>{0}</label></div><div class="k-edit-field"><ul class="k-reset"><li><label><input class="k-recur-end-never" type="radio" name="end" value="never" />{1}</label></li><li><label><input class="k-recur-end-count" type="radio" name="end" value="count" />{2}</label>{3}</li><li><label><input class="k-recur-end-until" type="radio" name="end" value="until" />{4}</label>{5}</li></ul></div>',F='<div class="k-edit-label"><label>{0}</label></div><div class="k-edit-field">{1}</div>',I='<ul class="k-reset">{0}</ul>',P='<li><label><input class="k-recur-month-radio" type="radio" name="month" value="monthday" />{0}</label><input class="k-recur-monthday" /></li>',B='<li><input class="k-recur-month-radio" type="radio" name="month" value="weekday" /><input class="k-recur-offset" /><input class="k-recur-weekday" /></li>',z='<li><input class="k-recur-year-radio" type="radio" name="year" value="monthday" /><input class="k-recur-month" /><input class="k-recur-monthday" /></li>',H='<li><input class="k-recur-year-radio" type="radio" name="year" value="weekday" /><input class="k-recur-offset" /><input class="k-recur-weekday" />{0}<input class="k-recur-month" /></li>',R=function(e){for(var t=N.culture().calendar.days.namesShort,n=t.length,i="",r=0,o=[];n>r;r++)o.push(r);for(t=t.slice(e).concat(t.slice(0,e)),o=o.slice(e).concat(o.slice(0,e)),r=0;n>r;r++)i+='<label><input class="k-recur-weekday-checkbox" type="checkbox" value="'+o[r]+'" /> '+t[r]+"</label>";return i},M=".kendoRecurrenceEditor",L="click"+M,O=j.extend({init:function(e,t){var n,i=this;j.fn.init.call(i,e,t),i.wrapper=i.element,t=i.options,t.start=n=t.start||G.today(),"string"==typeof n&&(t.start=N.parseDate(n,"yyyyMMddTHHmmss")),null===t.firstWeekDay&&(t.firstWeekDay=N.culture().calendar.firstDay),i._frequencyChooser(),i._container(),i._views(),i._value={},i.value(t.value)},options:{name:"RecurrenceEditor",frequencies:["never","daily","weekly","monthly","yearly"],firstWeekDay:null,timezone:"",start:"",value:"",messages:{frequencies:{never:"Never",daily:"Daily",weekly:"Weekly",monthly:"Monthly",yearly:"Yearly"},end:{endLabel:"End:",endNever:"Never",endCountAfter:"After ",endCountOccurrence:" occurrence(s)",endUntilOn:"On "},offsetPositions:{first:"first",second:"second",third:"third",fourth:"fourth",last:"last"},daily:{repeatEvery:"Repeat every: ",days:" day(s)"},weekly:{weeks:" week(s)",repeatEvery:"Repeat every: ",repeatOn:"Repeat on: "},monthly:{repeatEvery:"Repeat every: ",repeatOn:"Repeat on: ",months:" month(s)",day:"Day "},yearly:{repeatEvery:"Repeat every: ",repeatOn:"Repeat on: ",years:" year(s)",of:" of "}}},events:["change"],destroy:function(){this.ddlFrequency.destroy(),this.container.find("input[type=radio],input[type=checkbox]").off(L),N.destroy(this.container),j.fn.destroy.call(this)},value:function(e){var n=this,i=n.options.timezone;return e===t?n._value.freq?T(n._value,i):"":(n._value=x(e,i)||{},n.ddlFrequency.value(n._value.freq||""),n.setView(n.ddlFrequency.value()),t)},setView:function(e){var n=this,i=this.container,r=this["_"+e]||"",o=n._value;return N.destroy(i),i.html(r),r?(o.freq=e,n._interval(),"weekly"===e?(o.weekDays||(o.weekDays=[{day:this.options.start.getDay(),offset:0}]),n._weekDays()):"monthly"===e?(n._monthDay(),n._weekDay(),n._setMonthRule()):"yearly"===e&&(n._month(),n._monthDay(),n._weekDay(),n._setYearRule()),n._count(),n._until(),n._setEndRule(),t):(n._value={},t)},_interval:function(){var e=this,t=e.container.find(".k-recur-interval"),n=e._value;t.kendoNumericTextBox({value:n.interval||1,decimals:0,format:"#",min:1,change:function(){n.interval=this.value(),e.trigger("change")
}})},_weekDay:function(){var t,n,i,r=this,o=r.options.messages.offsetPositions,a=r.container.find(".k-recur-offset"),s=r.container.find(".k-recur-weekday"),l=r._value,d=l.weekDays;s[0]&&(r.weekDayOffsetDDL=t=new N.ui.DropDownList(a,{dataTextField:"text",dataValueField:"value",dataSource:[{text:o.first,value:"1"},{text:o.second,value:"2"},{text:o.third,value:"3"},{text:o.fourth,value:"4"},{text:o.last,value:"-1"}],change:function(){l.weekDays=[{offset:Number(t.value()),day:Number(n.value())}],r.trigger("change")}}),i=e.map(N.culture().calendar.days.names,function(e,t){return{text:e,value:t}}),r.weekDayNameDDL=n=new N.ui.DropDownList(s,{dataTextField:"text",dataValueField:"value",dataSource:i,change:function(){l.weekDays=[{offset:Number(t.value()),day:Number(n.value())}],r.trigger("change")}}),d&&(d=d[0],t.value(d.offset||""),n.value(d.day)))},_weekDays:function(){var t,n,i,r,o,a=this,s=a._value,l=a.container.find(".k-recur-weekday-checkbox");if(l[0]&&(l.on(L,function(){s.weekDays=e.map(l.filter(":checked"),function(e){return{day:Number(e.value),offset:0}}),a.trigger("change")}),s.weekDays))for(i=0,r=l.length,o=s.weekDays.length;r>i;i++)for(n=l[i],t=0;o>t;t++)n.value==s.weekDays[t].day&&(n.checked=!0)},_monthDay:function(){var e=this,t=e._value,n=e.container.find(".k-recur-monthday");n[0]&&(e.monthDayNumericTextBox=new N.ui.NumericTextBox(n,{min:1,max:31,decimals:0,format:"#",value:t.monthDays?t.monthDays[0]:e.options.start.getDate(),change:function(){var n=this.value();n&&(n=[n]),t.monthDays=n,e.trigger("change")}}))},_month:function(){var t,n,i,r=this,o=r._value,a=r.options.start,s=o.months||[a.getMonth()+1],l=r.container.find(".k-recur-month");l[0]&&(t=e.map(N.culture().calendar.months.names,function(e,t){return{text:e,value:t+1}}),r.monthDDL1=n=new N.ui.DropDownList(l[0],{dataTextField:"text",dataValueField:"value",dataSource:t,change:function(){o.months=[Number(this.value())],r.trigger("change")}}),r.monthDDL2=i=new N.ui.DropDownList(l[1],{dataTextField:"text",dataValueField:"value",dataSource:t,change:function(){o.months=[Number(this.value())],r.trigger("change")}}),s&&(s=s[0],n.value(s),i.value(s)))},_count:function(){var e=this,t=e.container.find(".k-recur-count"),n=e._value;e.countNumericTextBox=t.kendoNumericTextBox({value:n.count||1,decimals:0,format:"#",min:1,change:function(){n.count=this.value(),e.trigger("change")}}).data("kendoNumericTextBox")},_until:function(){var e=this,t=e.container.find(".k-recur-until"),n=e.options.start,i=e._value,r=i.until;e.untilDatePicker=t.kendoDatePicker({min:r&&n>r?r:n,value:r||n,change:function(){i.until=this.value(),e.trigger("change")}}).data("kendoDatePicker")},_setEndRule:function(){var e=this,t=e._value,n=e.container,i=function(t){e._toggleEndRule(t.currentTarget.value),e.trigger("change")};e.radioButtonNever=n.find(".k-recur-end-never").on(L,i),e.radioButtonCount=n.find(".k-recur-end-count").on(L,i),e.radioButtonUntil=n.find(".k-recur-end-until").on(L,i),t.count?e._toggleEndRule("count"):t.until?e._toggleEndRule("until"):e._toggleEndRule()},_setMonthRule:function(){var e=this,t=e._value,n=function(t){e._toggleMonthDayRule(t.currentTarget.value),e.trigger("change")},i=e.container.find(".k-recur-month-radio").on(L,n);e.radioButtonMonthDay=i.eq(0),e.radioButtonWeekDay=i.eq(1),t.weekDays?e._toggleMonthDayRule("weekday"):e._toggleMonthDayRule("monthday")},_setYearRule:function(){var e=this,t=e._value,n=function(t){e._toggleYearRule(t.currentTarget.value),e.trigger("change")},i=e.container.find(".k-recur-year-radio").on(L,n);e.radioButtonMonthDay=i.eq(0),e.radioButtonWeekDay=i.eq(1),t.weekDays?e._toggleYearRule("weekday"):e._toggleYearRule("monthday")},_toggleEndRule:function(e){var t=this,n=t._value;"count"===e?(t.radioButtonCount.prop("checked",!0),t.untilDatePicker.enable(!1),t.countNumericTextBox.enable(!0),n.count=t.countNumericTextBox.value(),n.until=null):"until"===e?(t.radioButtonUntil.prop("checked",!0),t.untilDatePicker.enable(!0),t.countNumericTextBox.enable(!1),n.count=null,n.until=t.untilDatePicker.value()):(t.radioButtonNever.prop("checked",!0),t.untilDatePicker.enable(!1),t.countNumericTextBox.enable(!1),n.count=null,n.until=null)},_toggleMonthDayRule:function(e){var t=this,n=t._value;"monthday"===e?(t.radioButtonMonthDay.prop("checked",!0),t.monthDayNumericTextBox.enable(!0),t.weekDayNameDDL.enable(!1),t.weekDayOffsetDDL.enable(!1),n.weekDays=null,n.monthDays=[t.monthDayNumericTextBox.value()]):(t.radioButtonWeekDay.prop("checked",!0),t.monthDayNumericTextBox.enable(!1),t.weekDayOffsetDDL.enable(!0),t.weekDayNameDDL.enable(!0),n.monthDays=null,n.weekDays=[{offset:Number(t.weekDayOffsetDDL.value()),day:Number(t.weekDayNameDDL.value())}])},_toggleYearRule:function(e){var t,n=this;"monthday"===e?(n.monthDDL1.enable(!0),n.monthDDL2.enable(!1),t=n.monthDDL1.value()):(n.monthDDL1.enable(!1),n.monthDDL2.enable(!0),t=n.monthDDL2.value()),n._value.months=[t],n._toggleMonthDayRule(e)},_container:function(){var t=this.element,n=e('<div class="k-recur-view" />'),i=t.parent(".k-edit-field");i[0]?n.insertAfter(i):t.append(n),this.container=n},_frequencyChooser:function(){var t,n=this,i=n.options,r=i.frequencies,o=i.messages.frequencies,a=e("<input />");r=e.map(r,function(e){return{text:o[e],value:e}}),t=r[0],t&&"never"===t.value&&(t.value=""),n.element.append(a),n.ddlFrequency=new N.ui.DropDownList(a,{dataTextField:"text",dataValueField:"value",dataSource:r,change:function(){n._value={},n.setView(n.ddlFrequency.value()),n.trigger("change")}})},_views:function(){var e=this,t=e.options,n=t.messages,i=n.end,r=n.daily,o=n.weekly,a=n.monthly,s=n.yearly,l=N.format(D,i.endCountOccurrence),d=N.format(E,i.endLabel,i.endNever,i.endCountAfter,l,i.endUntilOn,A),c=N.format(F,o.repeatOn,R(t.firstWeekDay)),u=N.format(F,a.repeatOn,N.format(I,N.format(P,a.day)+B)),p=N.format(F,s.repeatOn,N.format(I,z+N.format(H,s.of)));e._daily=N.format(S,r.repeatEvery,r.days)+d,e._weekly=N.format(S,o.repeatEvery,o.weeks)+c+d,e._monthly=N.format(S,a.repeatEvery,a.months)+u+d,e._yearly=N.format(S,s.repeatEvery,s.years)+p+d}}),W.plugin(O)}(window.kendo.jQuery),function(e,t){function n(e,t){var n,i=t.model.fields[t.field].validation;i&&(n=i.dateCompare,n&&F(n)&&n.message&&(e[_.attr("dateCompare-msg")]=n.message))}function i(e,t){return function(n){return n=e(n),o(n,"apply",t),n||[]}}function r(e,t){return function(n){return n&&("[object Array]"===B.call(n)||n instanceof _.data.ObservableArray||(n=[n])),o(n,"remove",t,!0),n=e(n),n||[]}}function o(e,t,n,i){var r,o,a;for(e=e||[],o=0,a=e.length;a>o;o++)r=e[o],i?r.startTimezone||r.endTimezone?n?(r.start=_.timezone.convert(r.start,r.startTimezone||r.endTimezone,n),r.end=_.timezone.convert(r.end,r.endTimezone||r.startTimezone,n),r.start=_.timezone[t](r.start,n),r.end=_.timezone[t](r.end,n)):(r.start=_.timezone[t](r.start,r.startTimezone||r.endTimezone),r.end=_.timezone[t](r.end,r.endTimezone||r.startTimezone)):n&&(r.start=_.timezone[t](r.start,n),r.end=_.timezone[t](r.end,n)):r.startTimezone||r.endTimezone?(r.start=_.timezone[t](r.start,r.startTimezone||r.endTimezone),r.end=_.timezone[t](r.end,r.endTimezone||r.startTimezone),n&&(r.start=_.timezone.convert(r.start,r.startTimezone||r.endTimezone,n),r.end=_.timezone.convert(r.end,r.endTimezone||r.startTimezone,n))):n&&(r.start=_.timezone[t](r.start,n),r.end=_.timezone[t](r.end,n)),i&&delete r.uid;return e}function a(e,t){for(var n,i=e.length,r=0;i>r;r++)if(n=e[r],n.uid===t)return n}function s(e){var t=new Date(1980,0,1);return t.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),t}function l(e){var t,n,i,r,o;return e.filter("[name=end]").length&&(t=e.closest(".k-scheduler-edit-form"),n=t.find("[name=start]:visible"),i=t.find("[name=end]:visible"),i.length&&n.length&&(r=_.widgetInstance(n,_.ui),o=_.widgetInstance(i,_.ui),r&&o))?r.value()<=o.value():!0}function d(e,t,n,i){for(var r=e.length,o=[],a=0;r>a;a++)o=o.concat(e[a].expand(t,n,i));return o}function c(e){return delete e.name,delete e.prefix,delete e.remove,delete e.edit,delete e.add,delete e.navigate,e}function u(t){return function(n){e(_.format('<select data-{0}bind="value:{1}">',_.ns,t.field)).appendTo(n).kendoDropDownList({dataTextField:t.dataTextField,dataValueField:t.dataValueField,dataSource:t.dataSource,valuePrimitive:t.valuePrimitive,optionLabel:"None",template:_.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#',t.dataColorField,t.dataTextField)})}}function p(t){return function(n){e(_.format('<select data-{0}bind="value:{1}">',_.ns,t.field)).appendTo(n).kendoMultiSelect({dataTextField:t.dataTextField,dataValueField:t.dataValueField,dataSource:t.dataSource,valuePrimitive:t.valuePrimitive,itemTemplate:_.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#',t.dataColorField,t.dataTextField),tagTemplate:_.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#',t.dataColorField,t.dataTextField)})}}function f(e,t){var n,i=e.end.getTime()-e.start.getTime(),r=new Date(e.start.getTime());return _.date.setTime(r,t),n=new Date(r.getTime()),_.date.setTime(n,i),{start:r,end:n}}var h,g,m,v,_=window.kendo,b=_.date,w=b.MS_PER_DAY,y=b.getDate,k=_.recurrence,x=_.keys,C=_.ui,T=C.Widget,S="string",D=C.Popup,A=C.Calendar,E=_.data.DataSource,F=e.isPlainObject,I=e.extend,P=e.proxy,B=Object.prototype.toString,z=e.isArray,H=".kendoScheduler",R="click",M="change",L="cancel",O="remove",N="save",V="add",U="edit",W=y(new Date),j="recurrenceException",G="yyyyMMddTHHmmssZ",q="Are you sure you want to delete this event?",Y="Do you want to delete only this event occurrence or the whole series?",Q="Do you want to edit only this event occurrence or the whole series?",$='<a class="k-button #=className#" #=attr# href="\\#">#=text#</a>',K=_.template('<div class="k-floatwrap k-header k-scheduler-toolbar k-secondary"><ul class="k-reset k-header k-toolbar k-scheduler-navigation"><li class="k-state-default k-nav-today"><a role="button" href="\\#" class="k-link">${messages.today}</a></li><li class="k-state-default k-nav-prev"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-arrow-w"></span></a></li><li class="k-state-default k-nav-next"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-arrow-e"></span></a></li><li class="k-state-default k-nav-current"><a role="button" href="\\#" class="k-link"><span class="k-icon k-i-calendar"></span><span data-#=ns#bind="text: formattedDate"></span></a></li></ul><ul class="k-reset k-header k-toolbar k-scheduler-views">#for(var view in views){#<li class="k-state-default k-view-#=view#" data-#=ns#name="#=view#"><a role="button" href="\\#" class="k-link">${views[view].title}</a></li>#}#</ul></div>'),X=function(t,i){var r={name:i.field};n(r,i),e('<input type="text" required '+_.attr("type")+'="date"'+" "+_.attr("role")+'="datetimepicker" '+_.attr("bind")+'="value:'+i.field+',invisible:isAllDay" />').attr(r).appendTo(t),e('<input type="text" required '+_.attr("type")+'="date"'+" "+_.attr("role")+'="datepicker" '+_.attr("bind")+'="value:'+i.field+',visible:isAllDay" />').attr(r).appendTo(t),e("<span "+_.attr("bind")+'="text: '+i.field+'Timezone"></span>').appendTo(t),"end"===i.field&&e("<span "+_.attr("bind")+'="text: startTimezone, invisible: endTimezone"></span>').appendTo(t),e("<span "+_.attr("for")+'="'+i.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},J=_.date.getMilliseconds,Z=function(t,n){e("<div "+_.attr("bind")+'="value:'+n.field+'" />').attr({name:n.field}).appendTo(t).kendoRecurrenceEditor({start:n.model.start,timezone:n.timezone,messages:n.messages})},et=function(t,n){e('<a href="#" class="k-button">'+n.messages.timezoneEditorButton+"<a/>").click(n.click).appendTo(t)},tt=function(t,n){e("<div "+_.attr("bind")+'="value:'+n.field+'" />').attr({name:n.field}).toggle(n.visible).appendTo(t).kendoTimezoneEditor()},nt=_.Class.extend({init:function(t,n){var o=t.timezone;this.reader=n,n.model&&(this.model=n.model),this.timezone=o,this.data=i(e.proxy(this.data,this),o),this.serialize=r(e.proxy(this.serialize,this),o)},errors:function(e){return this.reader.errors(e)},parse:function(e){return this.reader.parse(e)},data:function(e){return this.reader.data(e)},total:function(e){return this.reader.total(e)},groups:function(e){return this.reader.groups(e)},aggregates:function(e){return this.reader.aggregates(e)},serialize:function(e){return this.reader.serialize(e)}}),it=_.data.Model.define({init:function(e){var t=this;_.data.Model.fn.init.call(t,e)},clone:function(t,n){var i=this.uid,r=new this.constructor(e.extend({},this.toJSON(),t));return n||(r.uid=i),r},duration:function(){var e=this.end,t=this.start,n=(e.getTimezoneOffset()-t.getTimezoneOffset())*_.date.MS_PER_MINUTE;return e-t-n},expand:function(e,t,n){return k?k.expand(this,e,t,n):[this]},update:function(e){for(var t in e)this.set(t,e[t]);this.set("startTime",s(this.start)),this.set("endTime",s(this.end))},isMultiDay:function(){return this.isAllDay||this.duration()>=_.date.MS_PER_DAY},isException:function(){return this.id&&this.recurrenceId},isOccurrence:function(){return this.isNew()&&this.recurrenceId},isRecurring:function(){return!(!this.recurrenceRule&&!this.recurrenceId)},isRecurrenceHead:function(){return!(!this.id||!this.recurrenceRule)},toOccurrence:function(t){return t=e.extend(t,{recurrenceException:null,recurrenceRule:null,recurrenceId:this.id||this.recurrenceId,id:this.defaults.id}),t[this.idField]=this.defaults.id,this.clone(t,!0)},toJSON:function(){var e=_.data.Model.fn.toJSON.call(this);return e.uid=this.uid,delete e.startTime,delete e.endTime,e},set:function(e,t){var n,i,r,o=this.isAllDay||!1;_.data.Model.fn.set.call(this,e,t),"isAllDay"==e&&t!=o&&(n=_.date.getDate(this.start),i=new Date(this.end),r=_.date.getMilliseconds(i),0===r&&t&&(r=w),this.set("start",n),t===!0?(_.date.setTime(i,-r),n>i&&(i=n)):_.date.setTime(i,w-r),this.set("end",i))},id:"id",fields:{id:{type:"number"},title:{defaultValue:"",type:"string"},start:{type:"date",validation:{required:!0}},startTimezone:{type:"string"},end:{type:"date",validation:{required:!0,dateCompare:{value:l,message:"End date should be greater than or equal to the start date"}}},endTimezone:{type:"string"},recurrenceRule:{defaultValue:"",type:"string"},recurrenceException:{defaultValue:"",type:"string"},isAllDay:{type:"boolean",defaultValue:!1},description:{type:"string"}}}),rt=E.extend({init:function(e){E.fn.init.call(this,I(!0,{},{schema:{modelBase:it,model:it}},e)),this.reader=new nt(this.options.schema,this.reader)},expand:function(e,t){var n=this.view(),i={};return e&&t&&(t=new Date(t.getTime()+w-1),i={logic:"or",filters:[{logic:"and",filters:[{field:"start",operator:"gte",value:e},{field:"end",operator:"gte",value:e},{field:"start",operator:"lte",value:t}]},{logic:"and",filters:[{field:"start",operator:"lte",value:new Date(e.getTime()+w-1)},{field:"end",operator:"gte",value:e}]}]},n=new _.data.Query(d(n,e,t,this.reader.timezone)).filter(i).toArray()),n},cancelChanges:function(e){e&&e.isOccurrence()&&this._removeExceptionDate(e),E.fn.cancelChanges.call(this,e)},insert:function(e,t){if(t){if(!(t instanceof it)){var n=t;t=this._createNewModel(),t.accept(n)}return(t.isRecurrenceHead()||t.recurrenceId)&&(t=t.recurrenceId?t:t.toOccurrence(),this._addExceptionDate(t)),E.fn.insert.call(this,e,t)}},remove:function(e){return e.isRecurrenceHead()?this._removeExceptions(e):e.isRecurring()&&this._addExceptionDate(e),E.fn.remove.call(this,e)},_removeExceptions:function(e){for(var t=this.data().slice(0),n=t.shift(),i=e.id;n;)n.recurrenceId===i&&E.fn.remove.call(this,n),n=t.shift();e.set(j,"")},_removeExceptionDate:function(e){var t,n,i;e.recurrenceId&&(t=this.get(e.recurrenceId),t&&(n=e.start,n=_.timezone.convert(n,this.reader.timezone||n.getTimezoneOffset(),"Etc/UTC"),i=_.toString(n,G)+";",t.set(j,t.recurrenceException.replace(i,""))))},_addExceptionDate:function(e){var t=e.start,n=this.reader.timezone,i=this.get(e.recurrenceId),r=i.recurrenceException||"";k.isException(r,t,n)||(t=_.timezone.convert(t,n||t.getTimezoneOffset(),"Etc/UTC"),r+=_.toString(t,G)+";",i.set(j,r))}});rt.create=function(e){e=e&&e.push?{data:e}:e;var t=e||{},n=t.data;if(t.data=n,!(t instanceof rt)&&t instanceof _.data.DataSource)throw Error("Incorrect DataSource type. Only SchedulerDataSource instances are supported");return t instanceof rt?t:new rt(t)},I(!0,_.data,{SchedulerDataSource:rt,SchedulerDataReader:nt,SchedulerEvent:it}),h={update:{text:"Save",className:"k-scheduler-update"},canceledit:{text:"Cancel",className:"k-scheduler-cancel"},destroy:{text:"Delete",imageClass:"k-delete",className:"k-scheduler-delete",iconClass:"k-icon"}},g=T.extend({init:function(t,n){var i=this;T.fn.init.call(i,t,n),i.options.views&&i.options.views.length||(i.options.views=["day","week"]),i.resources=[],i._initModel(),i._wrapper(),i._views(),i._toolbar(),i._dataSource(),i._resources(),i._resizeHandler=P(i._resize,i),i.wrapper.on("mousedown"+H+" selectstart"+H,function(e){e.preventDefault()}),i.options.editable&&i.options.editable.resize!==!1&&i._resizable(),i.options.editable&&i.options.editable.move!==!1&&i._movable(),e(window).on("resize"+H,i._resizeHandler),i.options.messages&&i.options.messages.recurrence&&(k.options=i.options.messages.recurrence),i._selectable(),i._ariaId=_.guid()},_selectable:function(){var t,n=this,i=n.wrapper,r=_.support.mobileOS?"touchend":"mousedown";n.options.selectable&&(n._tabindex(),i.on(r,".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event",function(e){n._createSelection(e.currentTarget),i.focus()}),t=e.proxy(n._mouseMove,n),i.on("mousedown"+H,".k-scheduler-header-all-day td, .k-scheduler-content td",function(){i.on("mousemove"+H,".k-scheduler-header-all-day td, .k-scheduler-content td",t)}),i.on("mouseup"+H+" mouseleave"+H,function(){i.off("mousemove"+H,".k-scheduler-header-all-day td, .k-scheduler-content td",t)}),i.on("focus"+H,function(){n._selection||n._createSelection(e(".k-scheduler-content").find("td:first")),n._select()}),i.on("focusout"+H,function(){n.view().clearSelection(),n._ctrlKey=n._shiftKey=!1}),i.on("keydown"+H,P(n._keydown,n)),i.on("keyup"+H,function(e){n._ctrlKey=e.ctrlKey,n._shiftKey=e.shiftKey}))},_select:function(){var e,t,n=this.view(),i=this.wrapper,r=n.current(),o=this._selection;r&&(r.removeAttribute("id"),r.removeAttribute("aria-label"),i.removeAttr("aria-activedescendant")),n.select(o),r=n.current(),r&&(t=o,o.events[0]?(t=this.occurrenceByUid(o.events[o.events.length-1])||o,e=_.format(this.options.messages.ariaEventLabel,t.title,t.start,t.start)):e=_.format(this.options.messages.ariaSlotLabel,t.start,t.end),r.setAttribute("id",this._ariaId),r.setAttribute("aria-label",e),i.attr("aria-activedescendant",this._ariaId))},_mouseMove:function(t){var n=this;clearTimeout(n._moveTimer),n._moveTimer=setTimeout(function(){var i,r,o,a=n.view(),s=n._selection;s&&(i=a.selectionByElement(e(t.currentTarget)),i&&s.groupIndex===i.groupIndex&&(r=i.startDate(),o=i.endDate(),r>=s.end?s.backward=!1:o<=s.start&&(s.backward=!0),s.backward?s.start=r:s.end=o,n._select()))},5)},_viewByIndex:function(e){var t,n=this.views;for(t in n){if(!e)return t;e--}},_keydown:function(t){var n=this,i=t.keyCode,r=n.view(),o=r.options.editable,a=n._selection,s=t.shiftKey;n._ctrlKey=t.ctrlKey,n._shiftKey=t.shiftKey,i===x.TAB?r.moveToEvent(a,s)&&(n._select(),t.preventDefault()):o&&i===x.ENTER?a.events.length?o.update!==!1&&n.editEvent(a.events[0]):o.create!==!1&&(a.isAllDay&&(a=e.extend({},a,{end:_.date.addDays(a.end,-1)})),n.addEvent(a)):i===x.DELETE?n.removeEvent(a.events[0]):i>=49&&57>=i?n.view(n._viewByIndex(i-49)):r.move(a,i,s)&&(r.inRange(a)?n._select():n.date(a.start),t.preventDefault()),n._adjustSelectedDate()},_createSelection:function(t){var n,i,r;this._selection&&(this._ctrlKey||this._shiftKey)||(this._selection={events:[],groupIndex:0}),t=e(t),r=this._selection,n=t.attr(_.attr("uid")),i=this.view().selectionByElement(t),i&&(r.groupIndex=i.groupIndex||0),n&&(i=a(this._data,n)),i&&i.uid&&(n=[i.uid]),this._updateSelection(i,n),this._adjustSelectedDate()},_updateSelection:function(e,t){var n,i,r=this._selection;e&&r&&(this._shiftKey&&r.start&&r.end?(n=e.end<r.end,i=this.view(),r.end=e.endDate?e.endDate():e.end,n&&i._timeSlotInterval&&_.date.setTime(r.end,-i._timeSlotInterval())):(r.start=e.startDate?e.startDate():e.start,r.end=e.endDate?e.endDate():e.end),r.isAllDay="isDaySlot"in e?e.isDaySlot:e.isAllDay,r.index=e.index,r.events=this._ctrlKey?r.events.concat(t||[]):t||[])},options:{name:"Scheduler",date:W,editable:!0,autoBind:!0,timezone:"",messages:{today:"Today",save:"Save",cancel:"Cancel",destroy:"Delete",deleteWindowTitle:"Delete event",ariaSlotLabel:"Selected from {0:t} to {1:t}",ariaEventLabel:"{0} on {1:D} at {2:t}",views:{day:"Day",week:"Week",agenda:"Agenda",month:"Month"},recurrenceMessages:{deleteWindowTitle:"Delete Recurring Item",deleteWindowOccurrence:"Delete current occurrence",deleteWindowSeries:"Delete the series",editWindowTitle:"Edit Recurring Item",editWindowOccurrence:"Edit current occurrence",editWindowSeries:"Edit the series"},editor:{title:"Title",start:"Start",end:"End",allDayEvent:"All day event",description:"Description",repeat:"Repeat",timezone:" ",startTimezone:"Start timezone",endTimezone:"End timezone",separateTimezones:"Use separate start and end time zones",timezoneEditorTitle:"Timezones",timezoneEditorButton:"Time zone",editorTitle:"Event"}},height:null,width:null,resources:[],group:{resources:[],direction:"horizontal"},views:[],selectable:!1},events:[O,U,L,N,"add","dataBinding","dataBound","moveStart","move","moveEnd","resizeStart","resize","resizeEnd","navigate"],destroy:function(){var t,n=this;T.fn.destroy.call(n),n.dataSource&&n.dataSource.unbind(M,n._refreshHandler),n.calendar&&(n.calendar.destroy(),n.popup.destroy()),n.view()&&n.view().destroy(),n._destroyEditable(),t=n.element.add(n.wrapper).add(n.toolbar).add(n.popup),t.off(H),e(window).off("resize"+H,n._resizeHandler),_.destroy(n.wrapper)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.options.autoBind&&e.fetch()},items:function(){return this.wrapper.children(".k-event, .k-task")},_movable:function(){var t,n,i,r=this;r._moveDraggable=new _.ui.Draggable(r.element,{distance:0,filter:".k-event",dragstart:function(e){var o=r.view(),a=e.currentTarget;i=r.occurrenceByUid(a.attr(_.attr("uid"))),t=o._slotByPosition(e.x.location,e.y.location),n=t,(!t||r.trigger("moveStart",{event:i}))&&e.preventDefault()},drag:function(e){var o,a,s=r.view(),l=s._slotByPosition(e.x.location,e.y.location);l&&(s._updateMoveHint(i,t,l),o=l.start-t.start,a=f(i,o),r.trigger("move",{event:i,slot:{element:l.element,start:l.startDate(),end:l.endDate()},resources:s._resourceBySlot(l),start:a.start,end:a.end})?s._updateMoveHint(i,t,n):n=l)},dragend:function(){var o,a,s,l,d,c,u;r.view()._removeMoveHint(),o=n.start-t.start,a=f(i,o),s=a.start,l=a.end,d=r.view()._resourceBySlot(n),c=r.view()._resourceBySlot(t),u=r.trigger("moveEnd",{event:i,slot:{element:n.element,start:n.startDate(),end:n.endDate()},start:s,end:l,resources:d}),u||i.start.getTime()==s.getTime()&&i.end.getTime()==l.getTime()&&_.stringify(d)==_.stringify(c)||r._updateEvent(null,i,e.extend({start:s,end:l},d))},dragcancel:function(){r.view()._removeMoveHint()}})},_resizable:function(){function t(e){var t,n={"k-resize-e":"east","k-resize-w":"west","k-resize-n":"north","k-resize-s":"south"};for(t in n)if(e.hasClass(t))return n[t]}var n,i,r,o=this;o._resizeDraggable=new _.ui.Draggable(o.element,{distance:0,filter:".k-resize-handle",dragstart:function(t){var a,s,l,d=e(t.currentTarget),c=d.closest(".k-event"),u=c.attr(_.attr("uid"));r=o.occurrenceByUid(u),o.trigger("resizeStart",{event:r})&&t.preventDefault(),a=o.view(),s=this.element.find(_.format(".k-event[{0}={1}]",_.attr("uid"),u)),c=s.first(),l=c.offset(),n=a._slotByPosition(l.left,l.top),c=s.last(),l=c.offset(),l.left+=c[0].clientWidth,l.top+=c[0].clientHeight,i=a._slotByPosition(l.left,l.top)},drag:function(a){var s,l,d,c=e(a.currentTarget),u=t(c),p=o.view(),f=p._slotByPosition(a.x.location,a.y.location);f&&(s=!1,l=n,d=i,"south"==u?!f.isDaySlot&&n.groupIndex==f.groupIndex&&f.end-_.date.toUtcTime(r.start)>=p._timeSlotInterval()&&(i=f,s=!0):"north"==u?!f.isDaySlot&&i.groupIndex==f.groupIndex&&_.date.toUtcTime(r.end)-f.start>=p._timeSlotInterval()&&(n=f,s=!0):"east"==u?f.isDaySlot&&n.groupIndex==f.groupIndex&&_.date.toUtcTime(_.date.getDate(f.endDate()))>=_.date.toUtcTime(_.date.getDate(r.start))&&(i=f,s=!0):"west"==u&&f.isDaySlot&&i.groupIndex==f.groupIndex&&_.date.toUtcTime(_.date.getDate(r.end))>=_.date.toUtcTime(_.date.getDate(f.startDate()))&&(n=f,s=!0),s&&(o.trigger("resize",{event:r,slot:{element:f.element,start:f.startDate(),end:f.endDate()},start:n.startDate(),end:i.endDate(),resources:p._resourceBySlot(f)})?(n=l,i=d):p._updateResizeHint(r,n,i)))},dragend:function(a){var s,l=e(a.currentTarget),d=new Date(r.start.getTime()),c=new Date(r.end.getTime()),u=t(l);o.view()._removeResizeHint(),"south"==u?c=i.endDate():"north"==u?d=n.startDate():"east"==u?c=r.isAllDay?_.date.getDate(i.startDate()):_.date.getDate(i.endDate()):"west"==u&&(d=new Date(n.start),d.setHours(0),d.setMinutes(0)),s=o.trigger("resizeEnd",{event:r,slot:{element:i.element,start:i.startDate(),end:i.endDate()},start:d,end:c,resources:o.view()._resourceBySlot(i)}),!s&&c.getTime()>=d.getTime()&&(r.start.getTime()!=d.getTime()||r.end.getTime()!=c.getTime())&&o._updateEvent(u,r,{start:d,end:c})},dragcancel:function(){o.view()._removeResizeHint()}})},_updateEvent:function(e,t,n){var i=this,r=function(e){try{i._preventRefresh=!0,e.update(n)}finally{i._preventRefresh=!1}i.refresh(),i.trigger(N,{event:e})||(i._updateSelection(e),i.dataSource.sync())},o=function(e){return e.recurrenceRule?i.dataSource.getByUid(e.uid):i.dataSource.get(e.recurrenceId)},a=function(){var i,a,s=o(t);("south"==e||"north"==e)&&(n.start&&(i=_.date.getDate(s.start),_.date.setTime(i,J(n.start)),n.start=i),n.end&&(a=_.date.getDate(s.end),_.date.setTime(a,J(n.end)),n.end=a)),r(s)},s=function(){var e=o(t).toOccurrence({start:t.start,end:t.end});r(i.dataSource.add(e))},l=i.options.messages.recurrenceMessages;t.recurrenceRule||t.isOccurrence()?i.showDialog({title:l.editWindowTitle,text:l.editRecurring?l.editRecurring:Q,buttons:[{text:l.editWindowOccurrence,click:s},{text:l.editWindowSeries,click:a}]}):r(i.dataSource.getByUid(t.uid))},_modelForContainer:function(t){return t=e(t).closest("["+_.attr("uid")+"]"),this.dataSource.getByUid(t.attr(_.attr("uid")))},showDialog:function(t){var n,i,r=_.format("<div class='k-popup-edit-form'><div class='k-edit-form-container'><p class='k-popup-message'>{0}</p>",t.text),o=this;for(r+='<div class="k-edit-buttons k-state-default">',n=0;n<t.buttons.length;n++)r+=o._createButton(t.buttons[n]);r+="</div></div></div>",i=e(r).appendTo(o.wrapper).eq(0).on("click",".k-button",function(n){n.preventDefault(),i.close();var r=e(n.currentTarget).index();t.buttons[r].click()}).kendoWindow({modal:!0,resizable:!1,draggable:!1,title:t.title,visible:!1,close:function(){this.destroy(),o.focus()}}).getKendoWindow(),i.center().open()},focus:function(){this.wrapper.focus()},_confirmation:function(e){var t,n,i=this.options.editable;i===!0||i.confirmation!==!1?(t=this.options.messages,n=typeof i.confirmation===S?i.confirmation:q,this.showDialog({text:n,title:t.deleteWindowTitle,buttons:[{name:"destroy",text:t.destroy,click:function(){e()}},{name:"canceledit",text:t.cancel,click:function(){e(!0)}}]})):e()},addEvent:function(e){var t,n,i=this.editable,r=this.dataSource;e=e||{},n=this.trigger("add",{event:e}),!n&&(i&&i.end()||!i)&&(this.cancelEvent(),e&&e.toJSON&&(e=e.toJSON()),t=r.add(e),t&&(this.cancelEvent(),this._editEvent(t)))},saveEvent:function(){var e=this,t=e._editContainer,n=e._modelForContainer(t),i=e.editable;t&&i&&i.end()&&!e.trigger(N,{container:t,event:n})&&(n.dirty||e._convertDates(n,"remove"),n.isRecurrenceHead()&&e.dataSource._removeExceptions(n),e.dataSource.sync())},cancelEvent:function(){var e,t=this,n=t._editContainer;n&&(e=t._modelForContainer(n),t.dataSource.cancelChanges(e),t._destroyEditable())},editEvent:function(e){var t="string"==typeof e?this.occurrenceByUid(e):e;t&&(this.cancelEvent(),t.isRecurring()?this._editRecurringDialog(t):this._editEvent(t))},_editEvent:function(e){var t,n=this;n._createPopupEditor(e),t=n._editContainer,t.on(R+H,"a.k-scheduler-cancel",function(i){i.preventDefault(),i.stopPropagation(),n.trigger(L,{container:t,event:e})||n.cancelEvent()}),t.on(R+H,"a.k-scheduler-update",function(e){e.preventDefault(),e.stopPropagation(),n.saveEvent()})},_editRecurringDialog:function(e){var t=this,n=function(){e.isException()?t._editEvent(e):t.addEvent(e)},i=function(){e.recurrenceId&&(e=t.dataSource.get(e.recurrenceId)),t._editEvent(e)},r=t.options.messages.recurrenceMessages;t.showDialog({title:r.editWindowTitle,text:r.editRecurring?r.editRecurring:Q,buttons:[{text:r.editWindowOccurrence,click:n},{text:r.editWindowSeries,click:i}]})},_createButton:function(e){var t=e.template||$,n=typeof e===S?e:e.name||e.text,i={className:"k-scheduler-"+(n||"").replace(/\s/g,""),text:n,attr:""};if(!(n||F(e)&&e.template))throw Error("Custom commands should have name specified");return F(e)?(e.className&&(e.className+=" "+i.className),"edit"===n&&F(e.text)&&(e=I(!0,{},e),e.text=e.text.edit),i=I(!0,i,h[n],e)):i=I(!0,i,h[n]),_.template(t)(i)},_convertDates:function(e,t){var n=this.dataSource.reader.timezone,i=e.startTimezone,r=e.endTimezone,o=e.start,a=e.start;t=t||"apply",i=i||r,r=r||i,i&&(n?"apply"===t?(o=_.timezone.convert(e.start,n,i),a=_.timezone.convert(e.end,n,r)):(o=_.timezone.convert(e.start,i,n),a=_.timezone.convert(e.end,r,n)):(o=_.timezone[t](e.start,i),a=_.timezone[t](e.end,r)),e._set("start",o),e._set("end",a))},_revertTimezones:function(e){e.set("startTimezone",this._startTimezone),e.set("endTimezone",this._endTimezone),delete this._startTimezone,delete this._endTimezone},_createTimezonePopup:function(e,t){var n,i=this,r=i._editContainer.find(".k-scheduler-timezones"),o=r.find(".k-timezone-toggle"),a=r.find("[data-role=timezoneeditor]:first").data("kendoTimezoneEditor"),s=r.find(".k-edit-label:last").add(r.find(".k-edit-field:last")),l=r.find(".k-scheduler-savetimezone"),d=r.find(".k-scheduler-canceltimezone"),c=i._timezonePopup;i._startTimezone=e.startTimezone,i._endTimezone=e.endTimezone,c||(i._timezonePopup=c=r.kendoWindow({modal:!0,resizable:!1,draggable:!0,title:i.options.messages.editor.timezoneEditorTitle,visible:!1,close:function(n){n.userTriggered&&i._revertTimezones(e),t&&t.focus()}}),o.click(function(){s.toggle(o.prop("checked")),e.set("endTimezone","")}),l.click(function(e){e.preventDefault(),n.close()}),d.click(function(t){t.preventDefault(),i._revertTimezones(e),n.close()}),a&&a.bind("change",function(){var t=this.value();o.prop("disabled",!t),t||(s.hide(),e.set("endTimezone",""),o.prop("checked",!1))})),o.prop("checked",e.endTimezone).prop("disabled",!e.endTimezone),s.toggle(e.endTimezone),n=c.data("kendoWindow"),n.center().open()},_createPopupEditor:function(n){var i,r,o,a,s,l,d,c,f=this,h=f.options.editable,g="<div "+_.attr("uid")+'="'+n.uid+'" class="k-popup-edit-form k-scheduler-edit-form"><div class="k-edit-form-container">',m=h.template,v=f.options.messages,b=v.save,w=v.cancel,y=function(e){e.preventDefault(),f._createTimezonePopup(n,this)},k=[{field:"title",title:v.editor.title},{field:"start",title:v.editor.start,editor:X},{field:"end",title:v.editor.end,editor:X},{field:"isAllDay",title:v.editor.allDayEvent}],x=F(h)?h.window:{},C=I({},_.Template,f.options.templateSettings),T=C.paramName,D=[];if(m)typeof m===S&&(m=window.unescape(m)),g+=_.template(m,C)(n);else{_.timezone.windows_zones&&!n.isAllDay&&(k.push({field:"timezone",title:v.editor.timezone,editor:et,click:y,messages:v.editor}),k.push({field:"startTimezone",title:v.editor.startTimezone,editor:tt}),k.push({field:"endTimezone",title:v.editor.endTimezone,editor:tt})),n.recurrenceId||k.push({field:"recurrenceRule",title:v.editor.repeat,editor:Z,timezone:this.dataSource.reader.timezone,messages:v.recurrenceEditor}),"description"in n&&k.push({field:"description",title:v.editor.description,editor:'<textarea name="description" class="k-textbox"/>'});
for(r=0;r<f.resources.length;r++)o=f.resources[r],k.push({field:o.field,title:o.title,editor:o.multiple?p(o):u(o)});for(a=0,s=k.length;s>a;a++)l=k[a],"startTimezone"===l.field&&(g+='<div class="k-popup-edit-form k-scheduler-edit-form k-scheduler-timezones" style="display:none">',g+='<div class="k-edit-form-container">',g+='<div class="k-edit-label"></div>',g+='<div class="k-edit-field"><label><input class="k-timezone-toggle" type="checkbox" />'+v.editor.separateTimezones+"</label></div>"),g+='<div class="k-edit-label"><label for="'+l.field+'">'+(l.title||l.field||"")+"</label></div>",!n.editable||n.editable(l.field)?(D.push(l),g+="<div "+_.attr("container-for")+'="'+l.field+'" class="k-edit-field"></div>'):(d="#:",l.field?(l=_.expr(l.field,T),d+=l+"==null?'':"+l):d+="''",d+="#",d=_.template(d,C),g+='<div class="k-edit-field">'+d(n)+"</div>"),"endTimezone"===l.field&&(g+='<div class="k-edit-buttons k-state-default">',g+=f._createButton({name:"savetimezone",text:v.save})+f._createButton({name:"canceltimezone",text:v.cancel}),g+="</div></div></div>")}g+='<div class="k-edit-buttons k-state-default">',g+=f._createButton({name:"update",text:b,attr:i})+f._createButton({name:"canceledit",text:w,attr:i}),g+="</div></div></div>",c=f._editContainer=e(g).appendTo(f.wrapper).eq(0).kendoWindow(I({modal:!0,resizable:!1,draggable:!0,title:v.editor.editorTitle,visible:!1,close:function(e){if(e.userTriggered){if(f.trigger(L,{container:c,event:n}))return e.preventDefault(),t;f.cancelEvent(),f.focus()}}},x)),n.isNew()||f._convertDates(n),f.editable=f._editContainer.kendoEditable({fields:D,model:n,clearContainer:!1,validateOnBlur:!0}).data("kendoEditable"),f.trigger(U,{container:c,event:n})?f.cancelEvent():c.data("kendoWindow").center().open()},_destroyEditable:function(){var e=this,t=function(){e.editable&&(e.editable.destroy(),e.editable=null,e._editContainer=null)};e.editable&&(e._timezonePopup&&e._timezonePopup.data("kendoWindow")&&(e._timezonePopup.data("kendoWindow").destroy(),e._timezonePopup=null),e._editContainer.data("kendoWindow").bind("deactivate",t).close())},removeEvent:function(e){var t=this,n="string"==typeof e?t.occurrenceByUid(e):e;n&&(n.isRecurring()?t._deleteRecurringDialog(n):t._confirmation(function(e){e||t._removeEvent(n)}))},occurrenceByUid:function(e){var t=this.dataSource.getByUid(e);return t||(t=a(this._data,e)),t},occurrencesInRange:function(e,t){return new _.data.Query(this._data).filter({logic:"or",filters:[{logic:"and",filters:[{field:"start",operator:"gte",value:e},{field:"end",operator:"gte",value:e},{field:"start",operator:"lt",value:t}]},{logic:"and",filters:[{field:"start",operator:"lte",value:e},{field:"end",operator:"gt",value:e}]}]}).toArray()},_removeEvent:function(e){this.trigger(O,{event:e})||this.dataSource.remove(e)&&this.dataSource.sync()},_deleteRecurringDialog:function(e){var t=this,n=function(){var n=e.recurrenceId?e:e.toOccurrence();t._removeEvent(n)},i=function(){e.recurrenceId&&(e=t.dataSource.get(e.recurrenceId)),t._removeEvent(e)},r=t.options.messages.recurrenceMessages;t.showDialog({title:r.deleteWindowTitle,text:r.deleteRecurring?r.deleteRecurring:Y,buttons:[{text:r.deleteWindowOccurrence,click:n},{text:r.deleteWindowSeries,click:i}]})},_unbindView:function(e){e.destroy()},_bindView:function(e){var t=this;t.options.editable&&(t._viewRemoveHandler&&e.unbind(O,t._viewRemoveHandler),t._viewRemoveHandler=function(e){t.removeEvent(e.uid)},e.bind(O,t._viewRemoveHandler),t._viewAddHandler&&e.unbind(V,t._viewAddHandler),t._viewAddHandler=function(e){t.addEvent(e.eventInfo)},e.bind(V,this._viewAddHandler),t._viewEditHandler&&e.unbind(U,t._viewEditHandler),t._viewEditHandler=function(e){t.editEvent(e.uid)},e.bind(U,this._viewEditHandler)),t._viewNavigateHandler&&e.unbind("navigate",t._viewNavigateHandler),t._viewNavigateHandler=function(e){var n,i;e.view&&(n="isWorkDay"in e,i=n?"changeWorkDay":"changeView",t.trigger("navigate",{view:e.view,isWorkDay:e.isWorkDay,action:i,date:e.date})||(n&&(t._workDayMode=e.isWorkDay),t._selectView(e.view),t.date(e.date)))},e.bind("navigate",t._viewNavigateHandler),t._viewActivateHandler&&e.unbind("activate",t._viewActivateHandler),t._viewActivateHandler=function(){var e=this;t._selection&&(e.constrainSelection(t._selection),t._select(),t._adjustSelectedDate())},e.bind("activate",t._viewActivateHandler)},_selectView:function(e){var t=this;e&&t.views[e]&&(t._selectedView&&t._unbindView(t._selectedView),t._selectedView=t._renderView(e),t._selectedViewName=e,t.toolbar.find(".k-scheduler-views li").removeClass("k-state-selected").end().find(".k-view-"+e).addClass("k-state-selected"))},view:function(e){var n=this;return e?(n._selectView(e),n.rebind(),t):n._selectedView},_renderView:function(e){var t=this._initializeView(e);return this._bindView(t),this._model.set("formattedDate",t.dateForTitle()),t},_resize:function(){this.refresh({action:"resize"})},_adjustSelectedDate:function(){var e=this._model.selectedDate,t=this._selection,n=t.start;n&&!_.date.isInDateRange(e,y(n),y(t.end))&&e.setFullYear(n.getFullYear(),n.getMonth(),n.getDate())},_initializeView:function(e){var t,n,i=this.views[e];if(i){if(t=F(i),n=i.type,typeof n===S&&(n=_.getter(i.type)(window)),!n)throw Error("There is no such view");i=new n(this.wrapper,c(I(!0,{},this.options,t?i:{},{resources:this.resources,date:this.date(),workDay:this._workDayMode})))}return i},_views:function(){var e,t,n,i,r,o,a,s,l,d=this.options.views;for(this.views={},a=0,s=d.length;s>a;a++)l=!1,e=d[a],i=F(e),i?(o=r=e.type?e.type:e,typeof o!==S&&(r=e.title,l=!0)):o=r=e,t=m[r],t&&!l&&(e.type=t.type,t.title=this.options.messages.views[r],"day"===t.type?t.messages={allDay:this.options.messages.allDay}:"agenda"===t.type&&(t.messages={event:this.options.messages.event,date:this.options.messages.date,time:this.options.messages.time})),e=I({title:r},t,i?e:{}),r&&(this.views[r]=e,(!n||e.selected)&&(n=r));n&&(this._selectedViewName=n)},rebind:function(){this.dataSource.fetch()},_dataSource:function(){var e=this,t=e.options,n=t.dataSource;n=z(n)?{data:n}:n,!t.timezone||n instanceof rt||(n=I(!0,n,{schema:{timezone:t.timezone}})),e.dataSource&&e._refreshHandler?e.dataSource.unbind(M,e._refreshHandler):e._refreshHandler=P(e.refresh,e),e.dataSource=_.data.SchedulerDataSource.create(n).bind(M,e._refreshHandler)},_resources:function(){var t,n,i,r,o,a=this,s=a.options.resources;for(t=0;t<s.length;t++){if(n=s[t],i=n.field,r=n.dataSource,!i||!r)throw Error('The "field" and "dataSource" options of the scheduler resource are mandatory.');a.resources.push({field:i,name:n.name||i,title:n.title||i,dataTextField:n.dataTextField||"text",dataValueField:n.dataValueField||"value",dataColorField:n.dataColorField||"color",valuePrimitive:null!=n.valuePrimitive?n.valuePrimitive:!0,multiple:n.multiple||!1,dataSource:_.data.DataSource.create(r)})}o=e.map(a.resources,function(e){return e.dataSource.fetch()}),e.when.apply(null,o).then(function(){a.options.autoBind?a.view(a._selectedViewName):a._selectView(a._selectedViewName)})},_initModel:function(){var e=this;e._model=_.observable({selectedDate:this.options.date,formattedDate:""}),e._model.bind("change",function(t){"selectedDate"===t.field&&e.view(e._selectedViewName)})},_wrapper:function(){var e=this,t=e.options.height;e.wrapper=e.element.addClass("k-widget k-scheduler k-floatwrap").attr("role","grid").attr("aria-multiselectable",!0),t&&e.wrapper.css("height",t)},date:function(e){return null!=e&&this._model.set("selectedDate",e),y(this._model.get("selectedDate"))},_toolbar:function(){var n=this,i=n.options,r=e(K({messages:i.messages,ns:_.ns,views:n.views}));n.wrapper.append(r),n.toolbar=r,_.bind(n.toolbar,n._model),r.on(R+H,".k-scheduler-navigation li",function(i){var r=e(this),o=new Date(n.date()),a="";if(i.preventDefault(),r.hasClass("k-nav-today"))a="today",o=new Date;else if(r.hasClass("k-nav-next"))a="next",o=n.view().nextDate();else if(r.hasClass("k-nav-prev"))a="previous",o=n.view().previousDate();else if(r.hasClass("k-nav-current"))return n._showCalendar(),t;n.trigger("navigate",{view:n._selectedViewName,action:a,date:o})||n.date(o)}),r.on(R+H,".k-scheduler-views li",function(t){t.preventDefault();var i=e(this).attr(_.attr("name"));n.trigger("navigate",{view:i,action:"changeView",date:n.date()})||n.view(i)}),r.find("li").hover(function(){e(this).addClass("k-state-hover")},function(){e(this).removeClass("k-state-hover")})},_showCalendar:function(){var t=this,n=t.toolbar.find(".k-nav-current"),i=e('<div class="k-calendar-container"><div class="k-scheduler-calendar"/></div>');t.popup||(t.popup=new D(i,{anchor:n,activate:function(){t.calendar||(t.calendar=new A(this.element.find(".k-scheduler-calendar"),{change:function(){var e=this.value();t.trigger("navigate",{view:t._selectedViewName,action:"changeDate",date:e})||(t.date(e),t.popup.close())}})),t.calendar.value(t.date())},copyAnchorStyles:!1})),t.popup.open()},refresh:function(e){var t=this.view();e&&"itemchange"===e.action&&(this.editable||this._preventRefresh)||(this.trigger("dataBinding"),e&&"resize"===e.action&&this.editable||this._destroyEditable(),this._data=this.dataSource.expand(t.startDate(),t.endDate()),t.render(this._data),this.trigger("dataBound"))}}),m={day:{type:"kendo.ui.DayView"},week:{type:"kendo.ui.WeekView"},agenda:{type:"kendo.ui.AgendaView"},month:{type:"kendo.ui.MonthView"}},C.plugin(g),v=T.extend({init:function(e,t){var n=this,i=_.timezone.windows_zones;if(!i||!_.timezone.zones_titles)throw Error("kendo.timezones.min.js is not included.");T.fn.init.call(n,e,t),n.wrapper=n.element,n._zonesQuery=new _.data.Query(i),n._zoneTitleId=_.guid(),n._zoneTitlePicker(),n._zonePicker(),n.value(n.options.value)},options:{name:"TimezoneEditor",value:"",optionLabel:"No timezone"},events:["change"],_zoneTitlePicker:function(){var t=this,n=e('<input id="'+t._zoneTitleId+'"/>').appendTo(t.wrapper);t._zoneTitle=new _.ui.DropDownList(n,{dataSource:_.timezone.zones_titles,dataValueField:"other_zone",dataTextField:"name",optionLabel:t.options.optionLabel,cascade:function(){this.value()||t._zone.wrapper.hide()}})},_zonePicker:function(){var t=this,n=e("<input />").appendTo(this.wrapper);t._zone=new _.ui.DropDownList(n,{dataValueField:"zone",dataTextField:"territory",dataSource:t._zonesQuery.data,cascadeFrom:t._zoneTitleId,cascade:function(){t._value=this.value(),t.trigger("change")},dataBound:function(){t._value=this.value(),this.wrapper.toggle(this.dataSource.view().length>1)}}),t._zone.wrapper.hide()},destroy:function(){T.fn.destroy.call(this),this._moveDraggable&&this._moveDraggable.destroy(),this._resizeDraggable&&this._resizeDraggable.destroy(),_.destroy(this.wrapper)},value:function(e){var n,i=this;return e===t?i._value:(n=i._zonesQuery.filter({field:"zone",operator:"eq",value:e}).data[0],n?(i._zoneTitle.value(n.other_zone),i._zone.value(n.zone)):i._zoneTitle.value(""),t)}}),C.plugin(v)}(window.kendo.jQuery),function(e,t){function n(e,t){var n={top:0,right:0,bottom:0,left:0};return t=t||0,"number"==typeof e?n[Zt]=n[Xt]=n[Ct]=n[Ut]=e:(n[Zt]=e[Zt]||t,n[Xt]=e[Xt]||t,n[Ct]=e[Ct]||t,n[Ut]=e[Ut]||t),n}function i(e,t){return ut.extend({init:function(e){this.view=e},decorate:function(n){var i,r=this,o=r.view,a=n.options.animation;return a&&a.type===e&&o.options.transitions&&(i=n._animation=new t(n,a),o.animations.push(i)),n}})}function r(t,n,i){var o,s,d,c,u,p,f,h,g,m,v,_=a(n),b=t+_+i,w=r.cache.get(b),y={width:0,height:0,baseline:0};if(w)return w;o=r.measureBox,s=r.baselineMarker.cloneNode(!1),o&&o.parentNode||(o=r.measureBox=e("<div style='position: absolute; top: -4000px;line-height: normal; visibility: hidden;' />").appendTo(lt.body)[0]);for(d in n)o.style[d]=n[d];return o.innerHTML=t,o.appendChild(s),(t+"").length&&(y={width:o.offsetWidth-kt,height:o.offsetHeight,baseline:s.offsetTop+kt}),i&&(c=y.width,u=y.height,p=c/2,f=u/2,h=l(0,0,p,f,i),g=l(c,0,p,f,i),m=l(c,u,p,f,i),v=l(0,u,p,f,i),y.normalWidth=c,y.normalHeight=u,y.width=mt.max(h.x,g.x,m.x,v.x)-mt.min(h.x,g.x,m.x,v.x),y.height=mt.max(h.y,g.y,m.y,v.y)-mt.min(h.y,g.y,m.y,v.y)),r.cache.put(b,y),y}function o(e,t){var n,i,r,o=v(t-e,It-1);if(0===o){if(0===t)return.1;o=mt.abs(t)}return n=mt.pow(10,mt.floor(mt.log(o)/mt.log(10))),i=v(o/n,It),r=1,r=1.904762>i?.2:4.761904>i?.5:9.523809>i?1:2,v(n*r,It)}function a(e){var t,n=[];for(t in e)n.push(t+e[t]);return n.sort().join(" ")}function s(){return it.current.alloc()}function l(e,t,n,i,r){var o=r*Bt;return new dn(n+(e-n)*mt.cos(o)+(t-i)*mt.sin(o),i-(e-n)*mt.sin(o)+(t-i)*mt.cos(o))}function d(t,n){if(t.x1==n.x1&&t.y1==n.y1&&t.x2==n.x2&&t.y2==n.y2)return n;var i=mt.min(t.x1,n.x1),r=mt.max(t.x1,n.x1),o=mt.min(t.x2,n.x2),a=mt.max(t.x2,n.x2),s=mt.min(t.y1,n.y1),l=mt.max(t.y1,n.y1),d=mt.min(t.y2,n.y2),c=mt.max(t.y2,n.y2),u=[];return u[0]=F(r,s,o,l),u[1]=F(i,l,r,d),u[2]=F(o,l,a,d),u[3]=F(r,d,o,c),t.x1==i&&t.y1==s||n.x1==i&&n.y1==s?(u[4]=F(i,s,r,l),u[5]=F(o,d,a,c)):(u[4]=F(o,s,a,l),u[5]=F(i,d,r,c)),e.grep(u,function(e){return e.height()>0&&e.width()>0})[0]}function c(){return lt.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}function u(){return!!lt.createElement("canvas").getContext}function p(e,t){return-1!=gt(e,t)}function f(e){return e[e.length-1]}function h(e,t){[].push.apply(e,t)}function g(e,t){return v(mt.ceil(e/t)*t,It)}function m(e,t){return v(mt.floor(e/t)*t,It)}function v(e,t){var n=mt.pow(10,t||0);return mt.round(e*n)/n}function _(e,t,n){var i=v(mt.abs(e%t),It),r=t*(1-n);return 0===i||i>r}function b(e,t,n){return v(e+(t-e)*n,St)}function w(e){return typeof e!==tn}function y(e,t){return w(e)?e:t}function k(e,t){return e-t}function x(e,t,n){var i,r=e.length;for(i=0;r>i;i++)e[i][t]=n}function C(e,t){return e.match(Ht)?dt.format.apply(this,arguments):dt.toString(t,e)}function T(e){return lt.getElementById(e)}function S(e){for(var t=e.parentNode;t&&t.parentNode;)t=t.parentNode;return t!==lt}function D(e,t){return-e.x*t.y+e.y*t.x<0}function A(e){if(!e||!e.indexOf||e.indexOf("&")<0)return e;var t=A._element;return t.innerHTML=e,t.textContent||t.innerText}function E(e,t){return e&&t?e.getTime()-t.getTime():0}var F,I,P,B,z,H,R,M,L,O,N,V,U,W,j,G,q,Y,Q,$,K,X,J,Z,et,tt,nt,it,rt,ot,at,st,lt=document,dt=window.kendo,ct=dt.dataviz={},ut=dt.Class,pt=dt.template,ft=e.map,ht=e.noop,gt=e.inArray,mt=Math,vt=dt.deepExtend,_t=function(e){return pt(e,{useWithBlock:!1,paramName:"d"})},bt="k-",wt=10,yt="axisLabelClick",kt=1,xt="#000",Ct="bottom",Tt="center",St=3,Dt="clip",At="circle",Et="12px sans-serif",Ft=400,It=6,Pt=600,Bt=mt.PI/180,zt="fadeIn",Ht=/\{\d+:?/,Rt="height",Mt="k",Lt=1e3,Ot=1e4,Nt=600,Vt="inside",Ut="left",Wt="linear",jt=Number.MAX_VALUE,Gt=-Number.MAX_VALUE,qt="none",Yt="noteClick",Qt="noteHover",$t="outside",Kt="radial",Xt="right",Jt="swing",Zt="top",en="triangle",tn="undefined",nn=/([A-Z])/g,rn="width",on="#fff",an="x",sn="y",ln=.2,dn=function(e,n){var i=this;return i instanceof dn?(i.x=v(e||0,St),i.y=v(n||0,St),t):new dn(e,n)};dn.fn=dn.prototype={clone:function(){var e=this;return new dn(e.x,e.y)},equals:function(e){return e&&e.x===this.x&&e.y===this.y},rotate:function(e,t){var n=this,i=t*Bt,r=mt.cos(i),o=mt.sin(i),a=e.x,s=e.y,l=n.x,d=n.y;return n.x=v(a+(l-a)*r+(d-s)*o,St),n.y=v(s+(d-s)*r-(l-a)*o,St),n},distanceTo:function(e){var t=this.x-e.x,n=this.y-e.y;return mt.sqrt(t*t+n*n)}},dn.onCircle=function(e,t,n){return t*=Bt,new dn(e.x-n*mt.cos(t),e.y-n*mt.sin(t))},F=function(e,n,i,r){var o=this;return o instanceof F?(o.x1=e||0,o.x2=i||0,o.y1=n||0,o.y2=r||0,t):new F(e,n,i,r)},F.fn=F.prototype={width:function(){return this.x2-this.x1},height:function(){return this.y2-this.y1},translate:function(e,t){var n=this;return n.x1+=e,n.x2+=e,n.y1+=t,n.y2+=t,n},move:function(e,t){var n=this,i=n.height(),r=n.width();return n.x1=e,n.y1=t,n.x2=n.x1+r,n.y2=n.y1+i,n},wrap:function(e){var t=this;return t.x1=mt.min(t.x1,e.x1),t.y1=mt.min(t.y1,e.y1),t.x2=mt.max(t.x2,e.x2),t.y2=mt.max(t.y2,e.y2),t},wrapPoint:function(e){return this.wrap(new F(e.x,e.y,e.x,e.y)),this},snapTo:function(e,t){var n=this;return t!=an&&t||(n.x1=e.x1,n.x2=e.x2),t!=sn&&t||(n.y1=e.y1,n.y2=e.y2),n},alignTo:function(e,t){var n,i,r=this,o=r.height(),a=r.width(),s=t==Zt||t==Ct?sn:an,l=s==sn?o:a;return t===Tt?(n=e.center(),i=r.center(),r.x1+=n.x-i.x,r.y1+=n.y-i.y):r[s+1]=t===Zt||t===Ut?e[s+1]-l:e[s+2],r.x2=r.x1+a,r.y2=r.y1+o,r},shrink:function(e,t){var n=this;return n.x2-=e,n.y2-=t,n},expand:function(e,t){return this.shrink(-e,-t),this},pad:function(e){var t=this,i=n(e);return t.x1-=i.left,t.x2+=i.right,t.y1-=i.top,t.y2+=i.bottom,t},unpad:function(e){var t=this,i=n(e);return i.left=-i.left,i.top=-i.top,i.right=-i.right,i.bottom=-i.bottom,t.pad(i)},clone:function(){var e=this;return new F(e.x1,e.y1,e.x2,e.y2)},center:function(){var e=this;return new dn(e.x1+e.width()/2,e.y1+e.height()/2)},containsPoint:function(e){var t=this;return e.x>=t.x1&&e.x<=t.x2&&e.y>=t.y1&&e.y<=t.y2},points:function(){var e=this;return[new dn(e.x1,e.y1),new dn(e.x2,e.y1),new dn(e.x2,e.y2),new dn(e.x1,e.y2)]},getHash:function(){var e=this;return[e.x1,e.y1,e.x2,e.y2].join(",")}},I=ut.extend({init:function(e,t,n,i,r){var o=this;o.c=e,o.ir=t,o.r=n,o.startAngle=i,o.angle=r},clone:function(){var e=this;return new I(e.c,e.ir,e.r,e.startAngle,e.angle)},middle:function(){return this.startAngle+this.angle/2},radius:function(e,t){var n=this;return t?n.ir=e:n.r=e,n},point:function(e,t){var n=this,i=e*Bt,r=mt.cos(i),o=mt.sin(i),a=t?n.ir:n.r,s=n.c.x-r*a,l=n.c.y-o*a;return new dn(s,l)},adjacentBox:function(e,t,n){var i=this.clone().expand(e),r=i.middle(),o=i.point(r),a=t/2,s=n/2,l=o.x-a,d=o.y-s,c=mt.sin(r*Bt),u=mt.cos(r*Bt);return mt.abs(c)<.9&&(l+=a*-u/mt.abs(u)),mt.abs(u)<.9&&(d+=s*-c/mt.abs(c)),new F(l,d,l+t,d+n)},containsPoint:function(e){var t=this,n=t.c,i=t.ir,r=t.r,o=t.startAngle,a=t.startAngle+t.angle,s=e.x-n.x,l=e.y-n.y,d=new dn(s,l),c=t.point(o),u=new dn(c.x-n.x,c.y-n.y),p=t.point(a),f=new dn(p.x-n.x,p.y-n.y),h=s*s+l*l;return(u.equals(d)||D(u,d))&&!D(f,d)&&h>=i*i&&r*r>=h},getBBox:function(){var e,t,n,i=this,r=new F(jt,jt,Gt,Gt),o=v(i.startAngle%360),a=v((o+i.angle)%360),s=i.ir,l=[0,90,180,270,o,a].sort(k),d=gt(o,l),c=gt(a,l);for(e=o==a?l:c>d?l.slice(d,c+1):[].concat(l.slice(0,c+1),l.slice(d,l.length)),t=0;t<e.length;t++)n=i.point(e[t]),r.wrapPoint(n),r.wrapPoint(n,s);return s||r.wrapPoint(i.c),r},expand:function(e){return this.r+=e,this}}),P=I.extend({init:function(e,t,n,i){I.fn.init.call(this,e,0,t,n,i)},expand:function(e){return I.fn.expand.call(this,e)},clone:function(){var e=this;return new P(e.c,e.r,e.startAngle,e.angle)},radius:function(e){return I.fn.radius.call(this,e)},point:function(e){return I.fn.point.call(this,e)}}),B=ut.extend({init:function(e){vt(this,{height:40,rotation:90,radius:10,arcAngle:10},e)}}),z=ut.extend({init:function(e){var t=this;t.children=[],t.options=vt({},t.options,e)},reflow:function(e){var t,n,i,r=this,o=r.children;for(n=0;n<o.length;n++)i=o[n],i.reflow(e),t=t?t.wrap(i.box):i.box.clone();r.box=t||e},getViewElements:function(e){var t,n,i,r=this,o=r.options,a=o.modelId,s=[],l=r.children,d=l.length;for(n=0;d>n;n++)i=l[n],i.discoverable||(i.options=i.options||{},i.options.modelId=a),s.push.apply(s,i.getViewElements(e));return r.discoverable&&(t=r.getRoot(),t&&(t.modelMap[a]=r)),s},enableDiscovery:function(){var e=this,t=e.options;t.modelId=it.current.alloc(),e.discoverable=!0},destroy:function(){var e,n=this,i=n.children,r=n.getRoot(),o=n.options.modelId,a=n.options.id,s=it.current;for(a&&s.free(a),o&&(s.free(o),r&&r.modelMap[o]&&(r.modelMap[o]=t)),e=0;e<i.length;e++)i[e].destroy()},getRoot:function(){var e=this.parent;return e?e.getRoot():null},translateChildren:function(e,t){var n,i=this,r=i.children,o=r.length;for(n=0;o>n;n++)r[n].box.translate(e,t)},append:function(){var e,t=this,n=arguments.length;for(h(t.children,arguments),e=0;n>e;e++)arguments[e].parent=t}}),H=z.extend({init:function(e){var t=this;t.modelMap={},z.fn.init.call(t,e)},options:{width:Pt,height:Ft,background:on,border:{color:xt,width:0},margin:n(5),zIndex:-2},reflow:function(){var e,t=this,n=t.options,i=t.children,r=new F(0,0,n.width,n.height);for(t.box=r.unpad(n.margin),e=0;e<i.length;e++)i[e].reflow(r),r=d(r,i[e].box)},getViewElements:function(e){var t=this,n=t.options,i=n.border||{},r=t.box.clone().pad(n.margin).unpad(i.width),o=[e.createRect(r,{stroke:i.width?i.color:"",strokeWidth:i.width,dashType:i.dashType,fill:n.background,fillOpacity:n.opacity,zIndex:n.zIndex})];return o.concat(z.fn.getViewElements.call(t,e))},getRoot:function(){return this}}),R=z.extend({init:function(e){z.fn.init.call(this,e)},options:{align:Ut,vAlign:Zt,margin:{},padding:{},border:{color:xt,width:0},background:"",shrinkToFit:!1,width:0,height:0,visible:!0},reflow:function(e){function t(){s.align(e,an,l.align),s.align(e,sn,l.vAlign),s.paddingBox=i.clone().unpad(d).unpad(u)}var i,r,o,a,s=this,l=s.options,d=n(l.margin),c=n(l.padding),u=l.border.width,p=s.children;for(z.fn.reflow.call(s,e),i=l.width&&l.height?s.box=new F(0,0,l.width,l.height):s.box,l.shrinkToFit?(t(),r=s.contentBox=s.paddingBox.clone().unpad(c)):(r=s.contentBox=i.clone(),i.pad(c).pad(u).pad(d),t()),s.translateChildren(i.x1-r.x1+d.left+u+c.left,i.y1-r.y1+d.top+u+c.top),o=0;o<p.length;o++)a=p[o],a.reflow(a.box)},align:function(e,t,n){var i=this,r=i.box,o=t+1,a=t+2,s=t===an?rn:Rt,l=r[s]();p(n,[Ut,Zt])?(r[o]=e[o],r[a]=r[o]+l):p(n,[Xt,Ct])?(r[a]=e[a],r[o]=r[a]-l):n==Tt&&(r[o]=e[o]+(e[s]()-l)/2,r[a]=r[o]+l)},hasBox:function(){var e=this.options;return e.border.width||e.background},getViewElements:function(e,t){var n=this,i=n.options,r=[];return i.visible?(n.hasBox()&&r.push(e.createRect(n.paddingBox,vt(n.elementStyle(),t))),r.concat(z.fn.getViewElements.call(n,e))):[]},elementStyle:function(){var e=this,t=e.options,n=t.border||{};return{id:t.id,stroke:n.width?n.color:"",strokeWidth:n.width,dashType:n.dashType,strokeOpacity:t.opacity,fill:t.background,fillOpacity:t.opacity,animation:t.animation,zIndex:t.zIndex,data:{modelId:t.modelId}}}}),M=z.extend({init:function(e,t){var n=this;z.fn.init.call(n,t),n.content=A(e),n.reflow(F())},options:{font:Et,color:xt,align:Ut,vAlign:""},reflow:function(e){var t,n,i=this,o=i.options;t=o.size=r(i.content,{font:o.font},o.rotation),i.baseline=t.baseline,o.align==Ut?i.box=new F(e.x1,e.y1,e.x1+t.width,e.y1+t.height):o.align==Xt?i.box=new F(e.x2-t.width,e.y1,e.x2,e.y1+t.height):o.align==Tt&&(n=(e.width()-t.width)/2,i.box=new F(v(e.x1+n,St),e.y1,v(e.x2-n,St),e.y1+t.height)),o.vAlign==Tt?(n=(e.height()-t.height)/2,i.box=new F(i.box.x1,e.y1+n,i.box.x2,e.y2-n)):o.vAlign==Ct?i.box=new F(i.box.x1,e.y2-t.height,i.box.x2,e.y2):o.vAlign==Zt&&(i.box=new F(i.box.x1,e.y1,i.box.x2,e.y1+t.height))},getViewElements:function(e){var t=this,n=t.options;return z.fn.getViewElements.call(this,e),[e.createText(t.content,vt({},n,{x:t.box.x1,y:t.box.y1,baseline:t.baseline,data:{modelId:n.modelId}}))]}}),L=R.extend({init:function(e,t){var n,i=this;R.fn.init.call(i,t),t=i.options,n=new M(e,vt({},t,{align:Ut,vAlign:Zt})),i.append(n),i.hasBox()&&(n.options.id=s()),i.reflow(new F)}}),O=z.extend({init:function(e){var t=this;z.fn.init.call(t,e),e=t.options,t.append(new L(e.text,vt({},e,{vAlign:e.position})))},options:{color:xt,position:Zt,align:Tt,margin:n(5),padding:n(5)},reflow:function(e){var t=this;z.fn.reflow.call(t,e),t.box.snapTo(e,an)}}),O.buildTitle=function(e,t,n){var i;return"string"==typeof e&&(e={text:e}),e=vt({visible:!0},n,e),e&&e.visible&&e.text&&(i=new O(e),t.append(i)),i},N=L.extend({init:function(e,t,n,i){var r=this,o=e;i.template?(r.template=pt(i.template),o=r.template({value:e,dataItem:n})):i.format&&(o=r.formatValue(e,i)),r.text=o,r.value=e,r.index=t,r.dataItem=n,L.fn.init.call(r,o,vt({id:s()},i)),r.enableDiscovery()},formatValue:function(e,t){return C(t.format,e)},click:function(t,n){var i=this;t.trigger(yt,{element:e(n.target),value:i.value,text:i.text,index:i.index,dataItem:i.dataItem,axis:i.parent.options})}}),V=z.extend({init:function(e){var t=this;z.fn.init.call(t,e),t.options.visible||(t.options=vt({},t.options,{labels:{visible:!1},line:{visible:!1},margin:0,majorTickSize:0,minorTickSize:0})),t.options.minorTicks=vt({},{color:t.options.line.color,width:t.options.line.width,visible:t.options.minorTickType!=qt},t.options.minorTicks,{size:t.options.minorTickSize,align:t.options.minorTickType}),t.options.majorTicks=vt({},{color:t.options.line.color,width:t.options.line.width,visible:t.options.majorTickType!=qt},t.options.majorTicks,{size:t.options.majorTickSize,align:t.options.majorTickType}),t.createLabels(),t.createTitle(),t.createNotes()},options:{labels:{visible:!0,rotation:0,mirror:!1,step:1,skip:0},line:{width:1,color:xt,visible:!0},title:{visible:!0,position:Tt},majorTicks:{align:$t,size:4,skip:0,step:1},minorTicks:{align:$t,size:3,skip:0,step:1},axisCrossingValue:0,majorTickType:$t,minorTickType:qt,majorGridLines:{skip:0,step:1},minorGridLines:{visible:!1,width:1,color:xt,skip:0,step:1},margin:5,visible:!0,reverse:!1,justified:!0,notes:{},_alignLines:!0},createLabels:function(){var e,t,n,i=this,r=i.options,o=r.vertical?Xt:Tt,a=vt({},r.labels,{align:o,zIndex:r.zIndex,modelId:r.modelId}),s=a.step;if(i.labels=[],a.visible)for(n=i.labelsCount(),t=a.skip;n>t;t+=s)e=i.createAxisLabel(t,a),i.append(e),i.labels.push(e)},destroy:function(){var e,t=this,n=t.labels;for(e=0;e<n.length;e++)n[e].destroy();z.fn.destroy.call(t)},lineBox:function(){var e=this,t=e.options,n=e.box,i=t.vertical,r=e.labels,o=i?Rt:rn,a=t.justified,s=t.labels.mirror,l=s?n.x1:n.x2,d=s?n.y2:n.y1,c=0,u=t.line.width;return a&&r.length>1&&(c=r[0].box[o]()/2,u=f(r).box[o]()/2),i?F(l,n.y1+c,l,n.y2-u):F(n.x1+c,d,n.x2-u,d)},createTitle:function(){var e,t=this,n=t.options,i=vt({rotation:n.vertical?-90:0,text:"",zIndex:1},n.title);i.visible&&i.text&&(e=new L(i.text,i),t.append(e),t.title=e)},createNotes:function(){var e,t,n,i,r,o=this,a=o.options,s=a.notes,l=s.data||[];for(o.notes=[],t=0;t<l.length;t++)i=vt({},s,l[t]),i.value=o.parseNoteValue(i.value),n=i.label.text||i.value,i.label.template?(e=pt(i.label.template),n=e({value:n})):i.label.format&&(n=C(i.label.format,n)),r=new U(vt({},i,{label:{text:n}})),r.options.visible&&(w(r.options.position)?a.vertical&&!p(r.options.position,[Ut,Xt])?r.options.position=a.reverse?Ut:Xt:a.vertical||p(r.options.position,[Zt,Ct])||(r.options.position=a.reverse?Ct:Zt):r.options.position=a.vertical?a.reverse?Ut:Xt:a.reverse?Ct:Zt,o.append(r),o.notes.push(r))},parseNoteValue:function(e){return e},renderTicks:function(e){function t(t,s){var p,f=t.length;if(s.visible)for(p=s.skip;f>p;p+=s.step)0!==p%s.skipUnit&&(n=u?c.x2:c.x2-s.size,i=u?c.y1-s.size:c.y1,r=t[p],d.vertical?(o=dn(n,r),a=dn(n+s.size,r)):(o=dn(r,i),a=dn(r,i+s.size)),l.push(e.createLine(o.x,o.y,a.x,a.y,{strokeWidth:s.width,stroke:s.color,align:d._alignLines})))}var n,i,r,o,a,s=this,l=[],d=s.options,c=s.lineBox(),u=d.labels.mirror,p=d.majorTicks.visible?d.majorUnit:0;return t(s.getMajorTickPositions(),d.majorTicks),t(s.getMinorTickPositions(),vt({},{skipUnit:p/d.minorUnit},d.minorTicks)),l},renderLine:function(e){var t,n=this,i=n.options,r=i.line,o=n.lineBox(),a=[];return r.width>0&&r.visible&&(t={strokeWidth:r.width,stroke:r.color,dashType:r.dashType,zIndex:r.zIndex,align:i._alignLines},a.push(e.createLine(o.x1,o.y1,o.x2,o.y2,t)),h(a,n.renderTicks(e))),a},getViewElements:function(e){var t=this,n=z.fn.getViewElements.call(t,e);return h(n,t.renderLine(e)),h(n,t.renderPlotBands(e)),n},getActualTickSize:function(){var e=this,t=e.options,n=0;return t.majorTicks.visible&&t.minorTicks.visible?n=mt.max(t.majorTicks.size,t.minorTicks.size):t.majorTicks.visible?n=t.majorTicks.size:t.minorTicks.visible&&(n=t.minorTicks.size),n},renderPlotBands:function(e){var t,n,i,r,o=this,a=o.options,s=a.plotBands||[],l=a.vertical,d=[],c=o.plotArea;return s.length&&(d=ft(s,function(a){return i=y(a.from,Gt),r=y(a.to,jt),l?(t=c.axisX.lineBox(),n=o.getSlot(a.from,a.to)):(t=o.getSlot(a.from,a.to),n=c.axisY.lineBox()),e.createRect(F(t.x1,n.y1,t.x2,n.y2),{fill:a.color,fillOpacity:a.opacity,zIndex:-1})})),d},renderGridLines:function(e,t){function n(t,n){var a,u=t.length;if(n.visible)for(a=n.skip;u>a;a+=n.step)i=v(t[a]),p(i,w)||0===a%n.skipUnit||c&&b===i||(l.vertical?(r=dn(m,i),o=dn(_,i)):(r=dn(i,m),o=dn(i,_)),r&&o&&(s.push(e.createLine(r.x,r.y,o.x,o.y,{data:{modelId:d},strokeWidth:n.width,stroke:n.color,dashType:n.dashType,zIndex:-1})),w.push(i)))}var i,r,o,a=this,s=[],l=a.options,d=a.plotArea.options.modelId,c=t.options.line.visible,u=l.majorGridLines,f=u.visible?l.majorUnit:0,h=l.vertical,g=t.lineBox(),m=g[h?"x1":"y1"],_=g[h?"x2":"y2"],b=g[h?"y1":"x1"],w=[];return n(a.getMajorTickPositions(),l.majorGridLines),n(a.getMinorTickPositions(),vt({},{skipUnit:f/l.minorUnit},l.minorGridLines)),s},reflow:function(e){var t,n,i=this,r=i.options,o=r.vertical,a=i.labels,s=a.length,l=i.getActualTickSize()+r.margin,d=0,c=0,u=i.title;for(n=0;s>n;n++)t=a[n],d=mt.max(d,t.box.height()),c=mt.max(c,t.box.width());u&&(o?c+=u.box.width():d+=u.box.height()),i.box=o?F(e.x1,e.y1,e.x1+c+l,e.y2):F(e.x1,e.y1,e.x2,e.y1+d+l),i.arrangeTitle(),i.arrangeLabels(),i.arrangeNotes()},arrangeLabels:function(){var e,t,n,i,r,o,a,s,l,d,c,u=this,p=u.options,f=p.labels,h=u.labels,g=!p.justified,m=p.vertical,v=u.lineBox(),_=p.labels.mirror,b=u.getMajorTickPositions(),w=u.getActualTickSize()+p.margin;for(n=0;n<h.length;n++)s=h[n],l=f.skip+f.step*n,d=m?s.box.height():s.box.width(),c=b[l]-d/2,m?(g&&(i=b[l],r=b[l+1],o=i+(r-i)/2,c=o-d/2),a=v.x2,_?a+=w:a-=w+s.box.width(),e=s.box.move(a,c)):(g?(i=b[l],r=b[l+1]):(i=c,r=c+d),t=v.y1,_?t-=w+s.box.height():t+=w,e=F(i,t,r,t+s.box.height())),s.reflow(e)},arrangeTitle:function(){var e=this,t=e.options,n=t.labels.mirror,i=t.vertical,r=e.title;r&&(i?(r.options.align=n?Xt:Ut,r.options.vAlign=r.options.position):(r.options.align=r.options.position,r.options.vAlign=n?Zt:Ct),r.reflow(e.box))},arrangeNotes:function(){var e,t,n,i,r=this;for(e=0;e<r.notes.length;e++)t=r.notes[e],i=t.options.value,w(i)?(r.shouldRenderNote(i)?t.show():t.hide(),n=r.getSlot(i)):t.hide(),t.reflow(n||r.lineBox())},alignTo:function(e){var t=this,n=e.lineBox(),i=t.options.vertical,r=i?sn:an;t.box.snapTo(n,r),i?t.box.shrink(0,t.lineBox().height()-n.height()):t.box.shrink(t.lineBox().width()-n.width(),0),t.box[r+1]-=t.lineBox()[r+1]-n[r+1],t.box[r+2]-=t.lineBox()[r+2]-n[r+2]}}),U=R.extend({init:function(e){var t=this;R.fn.init.call(t,e),t.enableDiscovery(),t.render()},options:{icon:{zIndex:1,visible:!0,type:At},label:{zIndex:2,position:Vt,visible:!0,align:Tt,vAlign:Tt},line:{visible:!0,zIndex:2},visible:!0,position:Zt},hide:function(){this.options.visible=!1},show:function(){this.options.visible=!0},render:function(){var e,t,n,i=this,r=i.options,o=r.label,a=r.icon,s=a.size,l={data:{modelId:r.modelId}},d=F();r.visible&&(w(o)&&o.visible&&(i.label=new L(o.text||r.value,vt({},o,l)),i.append(i.label),o.position===Vt&&(a.type===At?s=mt.max(i.label.box.width(),i.label.box.height()):(t=i.label.box.width(),n=i.label.box.height()),d.wrap(i.label.box))),a.width=t||s,a.height=n||s,e=new W(vt({},a,l)),i.marker=e,i.append(e),e.reflow(F()),i.wrapperBox=d.wrap(e.box))},reflow:function(e){var t,n,i,r=this,o=r.options,a=e.center(),s=r.wrapperBox,l=o.line.length,d=o.position,c=r.label,u=r.marker;o.visible&&(p(d,[Ut,Xt])?d===Ut?(i=s.alignTo(e,d).translate(-l,e.center().y-s.center().y),o.line.visible&&(t=dn(mt.floor(e.x1),a.y),r.linePoints=[t,dn(mt.floor(i.x2),a.y)],n=i.clone().wrapPoint(t))):(i=s.alignTo(e,d).translate(l,e.center().y-s.center().y),o.line.visible&&(t=dn(mt.floor(e.x2),a.y),r.linePoints=[t,dn(mt.floor(i.x1),a.y)],n=i.clone().wrapPoint(t))):d===Ct?(i=s.alignTo(e,d).translate(e.center().x-s.center().x,l),o.line.visible&&(t=dn(mt.floor(a.x),mt.floor(e.y2)),r.linePoints=[t,dn(mt.floor(a.x),mt.floor(i.y1))],n=i.clone().wrapPoint(t))):(i=s.alignTo(e,d).translate(e.center().x-s.center().x,-l),o.line.visible&&(t=dn(mt.floor(a.x),mt.floor(e.y1)),r.linePoints=[t,dn(mt.floor(a.x),mt.floor(i.y2))],n=i.clone().wrapPoint(t))),u&&u.reflow(i),c&&(c.reflow(i),u&&(o.label.position===$t&&c.box.alignTo(u.box,d),c.reflow(c.box))),r.contentBox=i,r.box=n||i)},getViewElements:function(e){var t=this,n=R.fn.getViewElements.call(t,e),i=e.createGroup({data:{modelId:t.options.modelId},zIndex:1});
return t.options.visible&&h(n,t.createLine(e)),i.children=n,[i]},createLine:function(e){var t=this,n=t.options.line;return[e.createPolyline(t.linePoints,!1,{stroke:n.color,strokeWidth:n.width,dashType:n.dashType,zIndex:n.zIndex})]},click:function(e,t){var n=this.eventArgs(t);e.trigger(Yt,n)||t.preventDefault()},hover:function(e,t){var n=this.eventArgs(t);e.trigger(Qt,n)||t.preventDefault()},leave:function(e){e._unsetActivePoint()},eventArgs:function(t){var n=this.parent,i=n.options;return{element:e(t.target),text:w(i.label)?i.label.text:""}}}),W=R.extend({options:{type:At,align:Tt,vAlign:Tt},getViewElements:function(e,t){var n,i,r,o,a=this,s=a.options,l=s.type,d=s.rotation,c=a.paddingBox,u=c.center(),p=c.width()/2;if(z.fn.getViewElements.call(this,e),!((t||{}).visible===!0||s.visible&&a.hasBox()))return[];if(i=vt(a.elementStyle(),t),l===At?n=e.createCircle(new dn(v(c.x1+p,St),v(c.y1+c.height()/2,St)),p,i):r=l===en?[new dn(c.x1+p,c.y1),new dn(c.x1,c.y2),new dn(c.x2,c.y2)]:c.points(),r){if(d)for(o=0;o<r.length;o++)r[o].rotate(u,d);n=e.createPolyline(r,!0,i)}return[n]}}),j=R.extend({init:function(e){var t=this;R.fn.init.call(t,e),t.createTextBox()},options:{arcAngle:300,border:{width:1,color:"red"},label:{zIndex:2,margin:n(2),border:{width:1,color:"green"}}},createTextBox:function(){var e=this,t=e.options,n=new L(t.code,t.label);e.append(n),e.textBox=n},reflow:function(e){var t=this,n=t.textBox;t.box=F(0,0,n.box.height(),1.5*n.box.height()),R.fn.reflow.call(t,e)},getViewElements:function(e){var t=this,n=t.options,i=t.box.center(),r=e.createPin(new B({origin:new dn(i.x,i.y),radius:t.textBox.box.height()/2,height:1.5*t.textBox.box.height(),rotation:0,arcAngle:n.arcAngle}),vt({},{fill:"red",zIndex:1,kur:1,id:"111"},n)),o=[r];return h(o,R.fn.getViewElements.call(t,e)),o}}),G=V.extend({init:function(e,t,n){var i=this,r=i.initDefaults(e,t,n);V.fn.init.call(i,r)},options:{type:"numeric",min:0,max:1,vertical:!0,majorGridLines:{visible:!0,width:1,color:xt},zIndex:1},initDefaults:function(e,t,n){var i,r=this,a=n.narrowRange,s=r.autoAxisMin(e,t,a),l=r.autoAxisMax(e,t,a),d=o(s,l),c={majorUnit:d};return n.roundToMajorUnit!==!1&&(0>s&&_(s,d,1/3)&&(s-=d),l>0&&_(l,d,1/3)&&(l+=d)),c.min=m(s,d),c.max=g(l,d),n&&(i=w(n.min)||w(n.max),i&&n.min===n.max&&(n.min>0?n.min=0:n.max=1),n.majorUnit?(c.min=m(c.min,n.majorUnit),c.max=g(c.max,n.majorUnit)):i&&(n=vt(c,n),c.majorUnit=o(n.min,n.max))),c.minorUnit=(n.majorUnit||c.majorUnit)/5,vt(c,n)},range:function(){var e=this.options;return{min:e.min,max:e.max}},autoAxisMax:function(e,t,n){var i,r;if(!e&&!t)return 1;if(0>=e&&0>=t){if(t=e==t?0:t,r=mt.abs((t-e)/t),!n&&r>ln)return 0;i=mt.min(0,t-(e-t)/2)}else e=e==t?0:e,i=t;return i},autoAxisMin:function(e,t,n){var i,r;if(!e&&!t)return 0;if(e>=0&&t>=0){if(e=e==t?0:e,r=(t-e)/t,!n&&r>ln)return 0;i=mt.max(0,e-(t-e)/2)}else t=e==t?0:t,i=e;return i},getDivisions:function(e){var t=this.options,n=t.max-t.min;return mt.floor(v(n/e,St))+1},getTickPositions:function(e,t){var n,i=this,r=i.options,o=r.vertical,a=r.reverse,s=i.lineBox(),l=o?s.height():s.width(),d=r.max-r.min,c=l/d,u=e*c,p=0,f=i.getDivisions(e),h=(o?-1:1)*(a?-1:1),g=1===h?1:2,m=s[(o?sn:an)+g],_=[];for(t&&(p=t/e),n=0;f>n;n++)0!==n%p&&_.push(v(m,St)),m+=u*h;return _},getMajorTickPositions:function(){var e=this;return e.getTickPositions(e.options.majorUnit)},getMinorTickPositions:function(){var e=this;return e.getTickPositions(e.options.minorUnit)},getSlot:function(e,t){var n,i,r=this,o=r.options,a=o.reverse,s=o.vertical,l=s?sn:an,d=r.lineBox(),c=d[l+(a?2:1)],u=s?d.height():d.width(),p=a?-1:1,f=p*(u/(o.max-o.min)),h=new F(d.x1,d.y1,d.x1,d.y1);return w(e)||(e=t||0),w(t)||(t=e||0),e=mt.max(mt.min(e,o.max),o.min),t=mt.max(mt.min(t,o.max),o.min),s?(n=o.max-mt.max(e,t),i=o.max-mt.min(e,t)):(n=mt.min(e,t)-o.min,i=mt.max(e,t)-o.min),h[l+1]=c+f*(a?i:n),h[l+2]=c+f*(a?n:i),h},getValue:function(e){var t,n=this,i=n.options,r=i.reverse,o=i.vertical,a=1*i.max,s=1*i.min,l=o?sn:an,d=n.lineBox(),c=d[l+(r?2:1)],u=o?d.height():d.width(),p=r?-1:1,f=p*(e[l]-c),h=(a-s)/u,g=f*h;return 0>f||f>u?null:(t=o?a-g:s+g,v(t,It))},translateRange:function(e){var t=this,n=t.options,i=t.lineBox(),r=n.vertical,o=n.reverse,a=r?i.height():i.width(),s=n.max-n.min,l=a/s,d=v(e/l,It);return!r&&!o||r&&o||(d=-d),{min:n.min+d,max:n.max+d}},scaleRange:function(e){var t=this,n=t.options,i=-e*n.majorUnit;return{min:n.min-i,max:n.max+i}},labelsCount:function(){return this.getDivisions(this.options.majorUnit)},createAxisLabel:function(e,t){var n=this,i=n.options,r=v(i.min+e*i.majorUnit,It);return new N(r,e,null,t)},shouldRenderNote:function(e){var t=this.range();return t.min<=e&&e<=t.max}}),q=ut.extend({init:function(e){var t=this;t.children=[],t.options=vt({},t.options,e)},render:function(){return this.template(this)},renderContent:function(){var e,t=this,n="",i=t.sortChildren(),r=i.length;for(e=0;r>e;e++)n+=i[e].render();return n},sortChildren:function(){var e,t,n=this,i=n.children;for(t=0,e=i.length;e>t;t++)i[t]._childIndex=t;return i.slice(0).sort(n.compareChildren)},refresh:e.noop,destroy:function(){var e,t,n=this,i=n.options.id,r=n.children;for(i&&it.current.free(i),t=0,e=r.length;e>t;t++)r[t].destroy()},compareChildren:function(e,t){var n=e.options.zIndex||0,i=t.options.zIndex||0;return n!==i?n-i:e._childIndex-t._childIndex},renderId:function(){var e=this,t="";return e.options.id&&(t=e.renderAttr("id",e.options.id)),t},renderAttr:function(e,t){return w(t)?" "+e+"='"+t+"' ":""},renderDataAttributes:function(){var e,t,n=this,i=n.options.data,r="";for(e in i)t="data-"+e.replace(nn,"-$1").toLowerCase(),r+=n.renderAttr(t,i[e]);return r},renderCursor:function(){var e=this.options,t="";return w(e.cursor)&&e.cursor.style&&(t+="cursor: "+e.cursor.style+";"),t}}),Y=q.extend({init:function(e){var t=this;q.fn.init.call(t,e),t.definitions={},t.decorators=[],t.animations=[]},destroy:function(){var e=this,t=e.animations,n=e._viewElement;for(q.fn.destroy.call(this);t.length>0;)t.shift().destroy();n&&(e._freeIds(n),e._viewElement=null)},_freeIds:function(t){e("[id]",t).each(function(){it.current.free(e(this).attr("id"))})},replace:function(e){var t=this,n=T(e.options.id);n&&(t._freeIds(n),n.parentNode.replaceChild(t.renderElement(e.getViewElements(t)[0]),n))},load:function(e){var t=this;t.children=e.getViewElements(t)},renderDefinitions:function(){var e,t=this.definitions,n="";for(e in t)t.hasOwnProperty(e)&&(n+=t[e].render());return n},decorate:function(e){var t,n,i=this.decorators,r=i.length;for(t=0;r>t;t++)n=i[t],this._decorateChildren(n,e),e=n.decorate.call(n,e);return e},_decorateChildren:function(e,t){var n,i=this,r=t.children,o=r.length;for(n=0;o>n;n++)i._decorateChildren(e,r[n]),r[n]=e.decorate.call(e,r[n])},setupAnimations:function(){for(var e=0;e<this.animations.length;e++)this.animations[e].setup()},playAnimations:function(){for(var e=0;e<this.animations.length;e++)this.animations[e].play()},buildGradient:function(e){var t,n,i,r=this,o=r._gradientCache;return o||(o=r._gradientCache=[]),e&&(t=a(e),n=o[t],i=ct.Gradients[e.gradient],!n&&i&&(n=vt({id:s()},i,e),o[t]=n)),n},setDefaults:function(e){var t=this.options;return e=e||{},w(e.inline)||(e.inline=t.inline),w(e.align)||(e.align=t.align),e}}),ct.Gradients={glass:{type:Wt,rotation:0,stops:[{offset:0,color:on,opacity:0},{offset:.25,color:on,opacity:.3},{offset:1,color:on,opacity:0}]},sharpBevel:{type:Kt,stops:[{offset:0,color:on,opacity:.55},{offset:.65,color:on,opacity:0},{offset:.95,color:on,opacity:.25}]},roundedBevel:{type:Kt,stops:[{offset:.33,color:on,opacity:.06},{offset:.83,color:on,opacity:.2},{offset:.95,color:on,opacity:0}]},roundedGlass:{type:Kt,supportVML:!1,stops:[{offset:0,color:on,opacity:0},{offset:.5,color:on,opacity:.3},{offset:.99,color:on,opacity:0}]},sharpGlass:{type:Kt,supportVML:!1,stops:[{offset:0,color:on,opacity:.2},{offset:.15,color:on,opacity:.15},{offset:.17,color:on,opacity:.35},{offset:.85,color:on,opacity:.05},{offset:.87,color:on,opacity:.15},{offset:.99,color:on,opacity:0}]}},Q=ut.extend({init:function(e,t){var n=this;n.options=vt({},n.options,t),n.element=e},options:{duration:Nt,easing:Jt},play:function(){var t,n,i,r,o,a=this,s=a.options,l=a.element,d=l.options.id,c=s.delay||0,u=+new Date+c,p=s.duration,f=u+p,h=e.easing[s.easing];setTimeout(function(){var e=function(){a._stopped||(n=+new Date,i=mt.min(n-u,p),r=i/p,o=h(r,i,0,1,p),a.step(o),(!t||S(t))&&(t=T(d)),l.refresh(t),f>n?ct.requestFrame(e):a.destroy())};e()},c)},abort:function(){this._stopped=!0},destroy:function(){this.abort()},setup:ht,step:ht}),$=Q.extend({options:{duration:200,easing:Wt},setup:function(){var e=this,t=e.element.options;e.targetFillOpacity=t.fillOpacity,e.targetStrokeOpacity=t.strokeOpacity,t.fillOpacity=t.strokeOpacity=0},step:function(e){var t=this,n=t.element.options;n.fillOpacity=e*t.targetFillOpacity,n.strokeOpacity=e*t.targetStrokeOpacity}}),K=Q.extend({options:{size:0,easing:Wt},setup:function(){var e=this.element.points;e[1].x=e[2].x=e[0].x},step:function(e){var t=this.options,n=b(0,t.size,e),i=this.element.points;i[1].x=i[2].x=i[0].x+n},destroy:function(){Q.fn.destroy.call(this),this.element.destroy()}}),X=Q.extend({options:{easing:Wt,duration:900},setup:function(){var e,t,n=this,i=n.element,r=i.options,o=n.options,a=o.center;r.rotation&&(e=o.startAngle,t=r.rotation[0],o.duration=mt.max(1e3*(mt.abs(e-t)/o.speed),1),n.endState=t,r.rotation=[e,a.x,a.y])},step:function(e){var t=this,n=t.element;n.options.rotation&&(n.options.rotation[0]=b(t.options.startAngle,t.endState,e))}}),J=Q.extend({options:{easing:Jt},setup:function(){var e,t=this,n=t.element,i=n.points,r=n.options,o=r.vertical?sn:an,a=r.stackBase,s=r.aboveAxis,l=t.endState={top:i[0].y,right:i[1].x,bottom:i[3].y,left:i[0].x};e=o===sn?y(a,l[s?Ct:Zt]):y(a,l[s?Ut:Xt]),t.startPosition=e,x(i,o,e)},step:function(e){var t=this,n=t.startPosition,i=t.endState,r=t.element,o=r.points;r.options.vertical?(o[0].y=o[1].y=b(n,i.top,e),o[2].y=o[3].y=b(n,i.bottom,e)):(o[0].x=o[3].x=b(n,i.left,e),o[1].x=o[2].x=b(n,i.right,e))}}),Z=Q.extend({options:{easing:Jt,duration:1e3},setup:function(){var e,t,n,i=this,r=i.element,o=r.points,a=r.options.animation,s=a.vertical,l=a.reverse,d=i.axis=s?"y":"x",c=i.options.endPosition,u=i.initialState={top:o[0].y,right:o[1].x,bottom:o[3].y,left:o[0].x},p=!w(i.options.endPosition);s?(n=l?"y2":"y1",e=u[p&&!l?Ct:Zt],t=p?u[l?Ct:Zt]:c[n]):(n=l?"x1":"x2",e=u[p&&!l?Ut:Xt],t=p?u[l?Ut:Xt]:c[n]),i.start=e,i.end=t,p?x(o,d,i.start):a.speed&&(i.options.duration=mt.max(1e3*(mt.abs(i.start-i.end)/a.speed),1))},step:function(e){var t=this,n=t.start,i=t.end,r=t.element,o=r.points,a=t.axis;r.options.animation.vertical?o[0][a]=o[1][a]=b(n,i,e):o[1][a]=o[2][a]=b(n,i,e)}}),et=Q.extend({options:{easing:Jt,duration:1e3},setup:function(){var e,t,n,i=this,r=i.element,o=r.points,a=r.options.animation,s=a.vertical,l=a.reverse,d=s?"y":"x",c=d+(l?"1":"2"),u=d+(l?"2":"1"),p=a.startPosition[s?c:u],f=a.size/2,h=o.length,g=!w(i.options.endPosition),m=f;for(i.axis=d,i.endPositions=[],i.startPositions=[],g||(p=o[1][d],t=i.options.endPosition[s?u:c],a.speed&&(i.options.duration=mt.max(1e3*(mt.abs(p-t)/a.speed),1))),n=0;h>n;n++)e=vt({},o[n]),g?(i.endPositions[n]=e[d],o[n][d]=p-m):i.endPositions[n]=t-m,i.startPositions[n]=o[n][d],m-=f},step:function(e){var t,n=this,i=n.startPositions,r=n.endPositions,o=n.element,a=o.points,s=n.axis,l=a.length;for(t=0;l>t;t++)a[t][s]=b(i[t],r[t],e)}}),tt=i(zt,$),nt=function(e){var t,n,i,r,o,a=this,s=nt.formats;if(1===arguments.length)for(e=a.resolveColor(e),r=0;r<s.length;r++)t=s[r].re,n=s[r].process,i=t.exec(e),i&&(o=n(i),a.r=o[0],a.g=o[1],a.b=o[2]);else a.r=arguments[0],a.g=arguments[1],a.b=arguments[2];a.r=a.normalizeByte(a.r),a.g=a.normalizeByte(a.g),a.b=a.normalizeByte(a.b)},nt.prototype={toHex:function(){var e=this,t=e.padDigit,n=e.r.toString(16),i=e.g.toString(16),r=e.b.toString(16);return"#"+t(n)+t(i)+t(r)},resolveColor:function(e){return e=e||xt,"#"==e.charAt(0)&&(e=e.substr(1,6)),e=e.replace(/ /g,""),e=e.toLowerCase(),e=nt.namedColors[e]||e},normalizeByte:function(e){return 0>e||isNaN(e)?0:e>255?255:e},padDigit:function(e){return 1===e.length?"0"+e:e},brightness:function(e){var t=this,n=mt.round;return t.r=n(t.normalizeByte(t.r*e)),t.g=n(t.normalizeByte(t.g*e)),t.b=n(t.normalizeByte(t.b*e)),t},percBrightness:function(){var e=this;return mt.sqrt(.241*e.r*e.r+.691*e.g*e.g+.068*e.b*e.b)}},nt.formats=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(e){return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],nt.namedColors={aqua:"00ffff",azure:"f0ffff",beige:"f5f5dc",black:"000000",blue:"0000ff",brown:"a52a2a",coral:"ff7f50",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgray:"a9a9a9",darkgreen:"006400",darkorange:"ff8c00",darkred:"8b0000",dimgray:"696969",fuchsia:"ff00ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lightblue:"add8e6",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumblue:"0000cd",navy:"000080",olive:"808000",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",pink:"ffc0cb",plum:"dda0dd",purple:"800080",red:"ff0000",royalblue:"4169e1",salmon:"fa8072",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",steelblue:"4682b4",tan:"d2b48c",teal:"008080",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},it=ut.extend({init:function(e,t,n){this._pool=[],this._freed={},this._size=e,this._id=n,this._prefix=t},alloc:function(){var e,t=this,n=t._pool;return n.length>0?(e=n.pop(),t._freed[e]=!1):e=t._prefix+t._id++,e},free:function(e){var t=this,n=t._pool,i=t._freed;n.length<t._size&&!i[e]&&(n.push(e),i[e]=!0)}}),it.current=new it(Lt,Mt,Ot),rt=ut.extend({init:function(e){this._size=e,this._length=0,this._map={}},put:function(e,t){var n=this,i=n._map,r={key:e,value:t};i[e]=r,n._head?(n._tail.newer=r,r.older=n._tail,n._tail=r):n._head=n._tail=r,n._length>=n._size?(i[n._head.key]=null,n._head=n._head.newer,n._head.older=null):n._length++},get:function(e){var n=this,i=n._map[e];return i?(i===n._head&&i!==n._tail&&(n._head=i.newer,n._head.older=null),i!==n._tail&&(i.older&&(i.older.newer=i.newer,i.newer.older=i.older),i.older=n._tail,i.newer=null,n._tail.newer=i,n._tail=i),i.value):t}}),ot=function(){this._views=[]},ot.prototype={register:function(e,t,n){var i=this._views,r=i[0],o={name:e,type:t,order:n};!r||n<r.order?i.unshift(o):i.push(o)},create:function(e,n){var i,r=this._views,o=r[0];if(n)for(n=n.toLowerCase(),i=0;i<r.length;i++)if(r[i].name===n){o=r[i];break}return o?new o.type(e):(dt.logToConsole("Warning: KendoUI DataViz cannot render. Possible causes:\n- The browser does not support SVG, VML and Canvas. User agent: "+navigator.userAgent+"\n"+"- The kendo.dataviz.(svg|vml|canvas).js scripts are not loaded"),t)}},ot.current=new ot,at={svg:function(){if(ct.SVGView){var e=this._getModel(),t=new ct.SVGView(e.options);return t.load(e),t.render()}throw Error("Unable to create SVGView. Check that kendo.dataviz.svg.js is loaded.")},imageDataURL:function(){if(ct.CanvasView){if(ct.supportsCanvas()){var e=this._getModel(),t=document.createElement("div"),n=new ct.CanvasView(e.options);return n.load(e),n.renderTo(t).toDataURL()}return dt.logToConsole("Warning: Unable to generate image. The browser does not support Canvas.\nUser agent: "+navigator.userAgent),null}throw Error("Unable to create CanvasView. Check that kendo.dataviz.canvas.js is loaded.")}},r.cache=new rt(1e3),r.baselineMarker=e("<div class='"+bt+"baseline-marker' "+"style='display: inline-block; vertical-align: baseline;"+"width: "+kt+"px; height: "+kt+"px;"+"overflow: hidden;' />")[0],st=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,wt)},ct.requestFrame=function(e,t){return st(e,t)},A._element=lt.createElement("span"),vt(dt.dataviz,{init:function(e){dt.init(e,dt.dataviz.ui)},ui:{roles:{},themes:{},views:[],plugin:function(e){dt.ui.plugin(e,ct.ui)}},AXIS_LABEL_CLICK:yt,COORD_PRECISION:St,DEFAULT_PRECISION:It,DEFAULT_WIDTH:Pt,DEFAULT_HEIGHT:Ft,DEFAULT_FONT:Et,INITIAL_ANIMATION_DURATION:Nt,NOTE_CLICK:Yt,NOTE_HOVER:Qt,CLIP:Dt,DASH_ARRAYS:{dot:[1.5,3.5],dash:[4,3.5],longdash:[8,3.5],dashdot:[3.5,3.5,1.5,3.5],longdashdot:[8,3.5,1.5,3.5],longdashdotdot:[8,3.5,1.5,3.5,1.5,3.5]},Axis:V,AxisLabel:N,Box2D:F,BoxElement:R,ChartElement:z,Color:nt,ElementAnimation:Q,ExpandAnimation:K,ExportMixin:at,ArrowAnimation:et,BarAnimation:J,BarIndicatorAnimatin:Z,FadeAnimation:$,FadeAnimationDecorator:tt,IDPool:it,LRUCache:rt,Note:U,NumericAxis:G,Point2D:dn,PinElement:j,Ring:I,Pin:B,RootElement:H,RotationAnimation:X,Sector:P,ShapeElement:W,Text:M,TextBox:L,Title:O,ViewBase:Y,ViewElement:q,ViewFactory:ot,animationDecorator:i,append:h,autoFormat:C,autoMajorUnit:o,boxDiff:d,defined:w,decodeEntities:A,dateComparer:E,getElement:T,getSpacing:n,inArray:p,interpolateValue:b,last:f,measureText:r,rotatePoint:l,round:v,ceil:g,floor:m,supportsCanvas:u,supportsSVG:c,renderTemplate:_t,uniqueId:s,valueOrDefault:y})}(window.kendo.jQuery),function(){var e=window.kendo,t=e.dataviz.ui,n=e.deepExtend,i=1.5,r=.4,o="#000",a="Arial,Helvetica,sans-serif",s="11px "+a,l="12px "+a,d="16px "+a,c="#fff",u={title:{font:d},legend:{labels:{font:l}},seriesDefaults:{visible:!0,labels:{font:s},donut:{margin:1},line:{width:4},vericalLine:{width:4},scatterLine:{width:1},area:{opacity:.4,markers:{visible:!1,size:6},line:{opacity:1,width:0}},verticalArea:{opacity:.4,markers:{visible:!1,size:6},line:{opacity:1,width:0}},radarLine:{width:4,markers:{visible:!1}},radarArea:{opacity:.5,markers:{visible:!1,size:6},line:{opacity:1,width:0}},candlestick:{line:{width:1,color:o},border:{width:1,_brightness:.8},gap:1,spacing:.3,downColor:c,highlight:{line:{width:2},border:{width:2,opacity:1}}},ohlc:{line:{width:1},gap:1,spacing:.3,highlight:{line:{width:3,opacity:1}}},bubble:{opacity:.6,border:{width:0},labels:{background:"transparent"}},bar:{gap:i,spacing:r},column:{gap:i,spacing:r},bullet:{gap:i,spacing:r,target:{color:"#ff0000"}},verticalBullet:{gap:i,spacing:r,target:{color:"#ff0000"}},notes:{icon:{size:7,border:{width:1}},label:{padding:3,font:l},line:{length:10,width:1},visible:!0}},categoryAxis:{majorGridLines:{visible:!0}},axisDefaults:{labels:{font:l},title:{font:d,margin:5},crosshair:{tooltip:{font:l}},notes:{icon:{size:7,border:{width:1}},label:{padding:3,font:l},line:{length:10,width:1},visible:!0}},tooltip:{font:l},navigator:{pane:{height:90,margin:{top:10}}}},p={scale:{labels:{font:l}}},f=t.themes,h=t.registerTheme=function(e,t){var i,r={};r.chart=n({},u,t.chart),r.gauge=n({},p,t.gauge),i=r.chart.seriesDefaults,i.verticalLine=n({},i.line),i.verticalArea=n({},i.area),i.polarArea=n({},i.radarArea),i.polarLine=n({},i.radarLine),f[e]=r};h("black",{chart:{title:{color:c},legend:{labels:{color:c},inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}},seriesDefaults:{labels:{color:c},notes:{icon:{background:"#3b3b3b",border:{color:"#8e8e8e"}},label:{color:c},line:{color:"#8e8e8e"}},pie:{overlay:{gradient:"sharpBevel"}},donut:{overlay:{gradient:"sharpGlass"}},line:{markers:{background:"#3d3d3d"}},scatter:{markers:{background:"#3d3d3d"}},scatterLine:{markers:{background:"#3d3d3d"}},candlestick:{downColor:"#555",line:{color:c},border:{_brightness:1.5,opacity:1},highlight:{border:{color:c,opacity:.2}}},ohlc:{line:{color:c}}},chartArea:{background:"#3d3d3d"},seriesColors:["#0081da","#3aafff","#99c900","#ffeb3d","#b20753","#ff4195"],axisDefaults:{line:{color:"#8e8e8e"},labels:{color:c},majorGridLines:{color:"#545454"},minorGridLines:{color:"#454545"},title:{color:c},crosshair:{color:"#8e8e8e"},notes:{icon:{background:"#3b3b3b",border:{color:"#8e8e8e"}},label:{color:c},line:{color:"#8e8e8e"}}}},gauge:{pointer:{color:"#0070e4"},scale:{rangePlaceholderColor:"#1d1d1d",labels:{color:c},minorTicks:{color:c},majorTicks:{color:c},line:{color:c}}}}),h("blueopal",{chart:{title:{color:"#293135"},legend:{labels:{color:"#293135"},inactiveItems:{labels:{color:"#27A5BA"},markers:{color:"#27A5BA"}}},seriesDefaults:{labels:{color:o,background:c,opacity:.5},candlestick:{downColor:"#c4d0d5",line:{color:"#9aabb2"}},notes:{icon:{background:"transparent",border:{color:"#9aabb2"}},label:{color:"#293135"},line:{color:"#9aabb2"}}},seriesColors:["#0069a5","#0098ee","#7bd2f6","#ffb800","#ff8517","#e34a00"],axisDefaults:{line:{color:"#9aabb2"},labels:{color:"#293135"},majorGridLines:{color:"#c4d0d5"},minorGridLines:{color:"#edf1f2"},title:{color:"#293135"},crosshair:{color:"#9aabb2"},notes:{icon:{background:"transparent",border:{color:"#9aabb2"}},label:{color:"#293135"},line:{color:"#9aabb2"}}}},gauge:{pointer:{color:"#005c83"},scale:{rangePlaceholderColor:"#daecf4",labels:{color:"#293135"},minorTicks:{color:"#293135"},majorTicks:{color:"#293135"},line:{color:"#293135"}}}}),h("highcontrast",{chart:{title:{color:"#ffffff"},legend:{labels:{color:"#ffffff"},inactiveItems:{labels:{color:"#66465B"},markers:{color:"#66465B"}}},seriesDefaults:{labels:{color:"#ffffff"},notes:{icon:{background:"transparent",border:{color:"#ffffff"}},label:{color:"#ffffff"},line:{color:"#ffffff"}},pie:{overlay:{gradient:"sharpGlass"}},donut:{overlay:{gradient:"sharpGlass"}},line:{markers:{background:"#2c232b"}},scatter:{markers:{background:"#2c232b"}},scatterLine:{markers:{background:"#2c232b"}},area:{opacity:.5},candlestick:{downColor:"#664e62",line:{color:"#ffffff"},border:{_brightness:1.5,opacity:1},highlight:{border:{color:"#ffffff",opacity:1}}},ohlc:{line:{color:"#ffffff"}}},chartArea:{background:"#2c232b"},seriesColors:["#a7008f","#ffb800","#3aafff","#99c900","#b20753","#ff4195"],axisDefaults:{line:{color:"#ffffff"},labels:{color:"#ffffff"},majorGridLines:{color:"#664e62"},minorGridLines:{color:"#4f394b"},title:{color:"#ffffff"},crosshair:{color:"#ffffff"},notes:{icon:{background:"transparent",border:{color:"#ffffff"}},label:{color:"#ffffff"},line:{color:"#ffffff"}}}},gauge:{pointer:{color:"#a7008f"},scale:{rangePlaceholderColor:"#2c232b",labels:{color:"#ffffff"},minorTicks:{color:"#2c232b"},majorTicks:{color:"#664e62"},line:{color:"#ffffff"}}}}),h("default",{chart:{title:{color:"#8e8e8e"},legend:{labels:{color:"#232323"},inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}},seriesDefaults:{labels:{color:o,background:c,opacity:.5},candlestick:{downColor:"#dedede",line:{color:"#8d8d8d"}},notes:{icon:{background:"transparent",border:{color:"#8e8e8e"}},label:{color:"#232323"},line:{color:"#8e8e8e"}}},seriesColors:["#ff6800","#a0a700","#ff8d00","#678900","#ffb53c","#396000"],axisDefaults:{line:{color:"#8e8e8e"},labels:{color:"#232323"},minorGridLines:{color:"#f0f0f0"},majorGridLines:{color:"#dfdfdf"},title:{color:"#232323"},crosshair:{color:"#8e8e8e"},notes:{icon:{background:"transparent",border:{color:"#8e8e8e"}},label:{color:"#232323"},line:{color:"#8e8e8e"}}}},gauge:{pointer:{color:"#ea7001"},scale:{rangePlaceholderColor:"#dedede",labels:{color:"#2e2e2e"},minorTicks:{color:"#2e2e2e"},majorTicks:{color:"#2e2e2e"},line:{color:"#2e2e2e"}}}}),h("silver",{chart:{title:{color:"#4e5968"},legend:{labels:{color:"#4e5968"},inactiveItems:{labels:{color:"#B1BCC8"},markers:{color:"#B1BCC8"}}},seriesDefaults:{labels:{color:"#293135",background:"#eaeaec",opacity:.5},notes:{icon:{background:"transparent",border:{color:"#4e5968"}},label:{color:"#4e5968"},line:{color:"#4e5968"}},line:{markers:{background:"#eaeaec"}},scatter:{markers:{background:"#eaeaec"}},scatterLine:{markers:{background:"#eaeaec"}},pie:{connectors:{color:"#A6B1C0"}},donut:{connectors:{color:"#A6B1C0"}},candlestick:{downColor:"#a6afbe"}},chartArea:{background:"#eaeaec"},seriesColors:["#007bc3","#76b800","#ffae00","#ef4c00","#a419b7","#430B62"],axisDefaults:{line:{color:"#a6b1c0"},labels:{color:"#4e5968"},majorGridLines:{color:"#dcdcdf"},minorGridLines:{color:"#eeeeef"},title:{color:"#4e5968"},crosshair:{color:"#a6b1c0"},notes:{icon:{background:"transparent",border:{color:"#4e5968"}},label:{color:"#4e5968"},line:{color:"#4e5968"}}}},gauge:{pointer:{color:"#0879c0"},scale:{rangePlaceholderColor:"#f3f3f4",labels:{color:"#515967"},minorTicks:{color:"#515967"},majorTicks:{color:"#515967"},line:{color:"#515967"}}}}),h("metro",{chart:{title:{color:"#777777"},legend:{labels:{color:"#777777"},inactiveItems:{labels:{color:"#CBCBCB"},markers:{color:"#CBCBCB"}}},seriesDefaults:{labels:{color:o},notes:{icon:{background:"transparent",border:{color:"#777777"}},label:{color:"#777777"},line:{color:"#777777"}},candlestick:{downColor:"#c7c7c7",line:{color:"#787878"}},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:["#8ebc00","#309b46","#25a0da","#ff6900","#e61e26","#d8e404","#16aba9","#7e51a1","#313131","#ed1691"],axisDefaults:{line:{color:"#c7c7c7"},labels:{color:"#777777"},minorGridLines:{color:"#c7c7c7"},majorGridLines:{color:"#c7c7c7"},title:{color:"#777777"},crosshair:{color:"#c7c7c7"},notes:{icon:{background:"transparent",border:{color:"#777777"}},label:{color:"#777777"},line:{color:"#777777"}}}},gauge:{pointer:{color:"#8ebc00"},scale:{rangePlaceholderColor:"#e6e6e6",labels:{color:"#777"},minorTicks:{color:"#777"},majorTicks:{color:"#777"},line:{color:"#777"}}}}),h("metroblack",{chart:{title:{color:"#ffffff"},legend:{labels:{color:"#ffffff"},inactiveItems:{labels:{color:"#797979"},markers:{color:"#797979"}}},seriesDefaults:{border:{_brightness:1},labels:{color:"#ffffff"},notes:{icon:{background:"transparent",border:{color:"#cecece"}},label:{color:"#ffffff"},line:{color:"#cecece"}},line:{markers:{background:"#0e0e0e"}},bubble:{opacity:.6},scatter:{markers:{background:"#0e0e0e"}},scatterLine:{markers:{background:"#0e0e0e"}},candlestick:{downColor:"#828282",line:{color:"#ffffff"}},overlay:{gradient:"none"}},chartArea:{background:"#0e0e0e"},seriesColors:["#00aba9","#309b46","#8ebc00","#ff6900","#e61e26","#d8e404","#25a0da","#7e51a1","#313131","#ed1691"],axisDefaults:{line:{color:"#cecece"},labels:{color:"#ffffff"},minorGridLines:{color:"#2d2d2d"},majorGridLines:{color:"#333333"},title:{color:"#ffffff"},crosshair:{color:"#cecece"},notes:{icon:{background:"transparent",border:{color:"#cecece"}},label:{color:"#ffffff"},line:{color:"#cecece"}}}},gauge:{pointer:{color:"#00aba9"},scale:{rangePlaceholderColor:"#2d2d2d",labels:{color:"#ffffff"},minorTicks:{color:"#333333"},majorTicks:{color:"#cecece"},line:{color:"#cecece"}}}}),h("moonlight",{chart:{title:{color:"#ffffff"},legend:{labels:{color:"#ffffff"},inactiveItems:{labels:{color:"#A1A7AB"},markers:{color:"#A1A7AB"}}},seriesDefaults:{labels:{color:"#ffffff"},notes:{icon:{background:"transparent",border:{color:"#8c909e"}},label:{color:"#ffffff"},line:{color:"#8c909e"}},pie:{overlay:{gradient:"sharpBevel"}},donut:{overlay:{gradient:"sharpGlass"}},line:{markers:{background:"#212a33"}},bubble:{opacity:.6},scatter:{markers:{background:"#212a33"}},scatterLine:{markers:{background:"#212a33"}},area:{opacity:.3},candlestick:{downColor:"#757d87",line:{color:"#ea9d06"},border:{_brightness:1.5,opacity:1},highlight:{border:{color:c,opacity:.2}}},ohlc:{line:{color:"#ea9d06"}}},chartArea:{background:"#212a33"},seriesColors:["#ffca08","#ff710f","#ed2e24","#ff9f03","#e13c02","#a00201"],axisDefaults:{line:{color:"#8c909e"},minorTicks:{color:"#8c909e"},majorTicks:{color:"#8c909e"},labels:{color:"#ffffff"},majorGridLines:{color:"#3e424d"},minorGridLines:{color:"#2f3640"},title:{color:"#ffffff"},crosshair:{color:"#8c909e"},notes:{icon:{background:"transparent",border:{color:"#8c909e"}},label:{color:"#ffffff"},line:{color:"#8c909e"}}}},gauge:{pointer:{color:"#f4af03"},scale:{rangePlaceholderColor:"#2f3640",labels:{color:c},minorTicks:{color:"#8c909e"},majorTicks:{color:"#8c909e"},line:{color:"#8c909e"}}}}),h("uniform",{chart:{title:{color:"#686868"},legend:{labels:{color:"#686868"},inactiveItems:{labels:{color:"#B6B6B6"},markers:{color:"#B6B6B6"}}},seriesDefaults:{labels:{color:"#686868"},notes:{icon:{background:"transparent",border:{color:"#9e9e9e"}},label:{color:"#686868"},line:{color:"#9e9e9e"}},pie:{overlay:{gradient:"sharpBevel"}},donut:{overlay:{gradient:"sharpGlass"}},line:{markers:{background:"#ffffff"}},bubble:{opacity:.6},scatter:{markers:{background:"#ffffff"}},scatterLine:{markers:{background:"#ffffff"}},area:{opacity:.3},candlestick:{downColor:"#cccccc",line:{color:"#cccccc"},border:{_brightness:1.5,opacity:1},highlight:{border:{color:"#cccccc",opacity:.2}}},ohlc:{line:{color:"#cccccc"}}},chartArea:{background:"#ffffff"},seriesColors:["#527aa3","#6f91b3","#8ca7c2","#a8bdd1","#c5d3e0","#e2e9f0"],axisDefaults:{line:{color:"#9e9e9e"},minorTicks:{color:"#aaaaaa"},majorTicks:{color:"#888888"},labels:{color:"#686868"},majorGridLines:{color:"#dadada"},minorGridLines:{color:"#e7e7e7"},title:{color:"#686868"},crosshair:{color:"#9e9e9e"},notes:{icon:{background:"transparent",border:{color:"#9e9e9e"}},label:{color:"#686868"},line:{color:"#9e9e9e"}}}},gauge:{pointer:{color:"#527aa3"},scale:{rangePlaceholderColor:"#e7e7e7",labels:{color:"#686868"},minorTicks:{color:"#aaaaaa"},majorTicks:{color:"#888888"},line:{color:"#9e9e9e"}}}}),h("bootstrap",{chart:{title:{color:"#343434"},legend:{labels:{color:"#343434"},inactiveItems:{labels:{color:"#9A9A9A"},markers:{color:"#9A9A9A"}}},seriesDefaults:{labels:{color:"#343434"},notes:{icon:{background:"transparent",border:{color:"#b8b8b8"}},label:{color:"#343434"},line:{color:"#b8b8b8"}},pie:{overlay:{gradient:"sharpBevel"}},donut:{overlay:{gradient:"sharpGlass"}},line:{markers:{background:"#ffffff"}},bubble:{opacity:.6},scatter:{markers:{background:"#ffffff"}},scatterLine:{markers:{background:"#ffffff"}},area:{opacity:.3},candlestick:{downColor:"#d0d0d0",line:{color:"#d0d0d0"},border:{_brightness:1.5,opacity:1},highlight:{border:{color:"#b8b8b8",opacity:.2}}},ohlc:{line:{color:"#d0d0d0"}}},chartArea:{background:"#ffffff"},seriesColors:["#006dcc","#49AFCD","#5BB75B","#FAA732","#DA4F49","#363636"],axisDefaults:{line:{color:"#b8b8b8"},minorTicks:{color:"#dddddd"},majorTicks:{color:"#b8b8b8"},labels:{color:"#343434"},majorGridLines:{color:"#b8b8b8"},minorGridLines:{color:"#dddddd"},title:{color:"#343434"},crosshair:{color:"#b8b8b8"},notes:{icon:{background:"transparent",border:{color:"#b8b8b8"}},label:{color:"#343434"},line:{color:"#b8b8b8"}}}},gauge:{pointer:{color:"#0044cc"},scale:{rangePlaceholderColor:"#b8b8b8",labels:{color:"#343434"},minorTicks:{color:"#dddddd"},majorTicks:{color:"#b8b8b8"},line:{color:"#b8b8b8"}}}}),h("flat",{chart:{title:{color:"#4c5356"},legend:{labels:{color:"#4c5356"},inactiveItems:{labels:{color:"#CBCBCB"},markers:{color:"#CBCBCB"}}},seriesDefaults:{labels:{color:"#4c5356"},notes:{icon:{background:"transparent",border:{color:"#cdcdcd"}},label:{color:"#4c5356"},line:{color:"#cdcdcd"}},candlestick:{downColor:"#c7c7c7",line:{color:"#787878"}},area:{opacity:.9},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:["#10c4b2","#ff7663","#ffb74f","#a2df53","#1c9ec4","#ff63a5","#1cc47b"],axisDefaults:{line:{color:"#cdcdcd"},labels:{color:"#4c5356"},minorGridLines:{color:"#cdcdcd"},majorGridLines:{color:"#cdcdcd"},title:{color:"#4c5356"},crosshair:{color:"#cdcdcd"},notes:{icon:{background:"transparent",border:{color:"#cdcdcd"}},label:{color:"#4c5356"},line:{color:"#cdcdcd"}}}},gauge:{pointer:{color:"#10c4b2"},scale:{rangePlaceholderColor:"#cdcdcd",labels:{color:"#4c5356"},minorTicks:{color:"#4c5356"},majorTicks:{color:"#4c5356"},line:{color:"#4c5356"}}}})}(window.kendo.jQuery),function(e,t){function n(){this._defaults={}}function i(e){return o(e).min}function r(e){return o(e).max}function o(e){var n,i,r=Vi,o=Ui,a=e.length;for(n=0;a>n;n++)i=e[n],null!==i&&isFinite(i)&&(r=en.min(r,i),o=en.max(o,i));
return{min:r===Vi?t:r,max:o===Ui?t:o}}function a(e,t,n,i){var r,o,a=(i.x-n.x)*(e.y-n.y)-(i.y-n.y)*(e.x-n.x),s=(i.y-n.y)*(t.x-e.x)-(i.x-n.x)*(t.y-e.y);return 0!==s&&(o=a/s,r=new Cn(e.x+o*(t.x-e.x),e.y+o*(t.y-e.y))),r}function s(e,t){var n,i,r,o=e.series,a=o.length,s=e.seriesDefaults,d=dn({},e.seriesDefaults),c=t?dn({},t.seriesDefaults):{},u=dn({},c);for(l(d),l(u),n=0;a>n;n++)i=o[n].type||e.seriesDefaults.type,r=dn({},u,c[i],{tooltip:e.tooltip},d,s[i]),o[n]._defaults=r,o[n]=dn({},r,o[n])}function l(e){delete e.bar,delete e.column,delete e.line,delete e.verticalLine,delete e.pie,delete e.donut,delete e.area,delete e.verticalArea,delete e.scatter,delete e.scatterLine,delete e.bubble,delete e.candlestick,delete e.ohlc,delete e.bullet,delete e.verticalBullet,delete e.polarArea,delete e.polarLine,delete e.radarArea,delete e.radarLine}function d(e){var t,n,i,r,o=e.series,a=e.seriesColors||[];for(t=0;t<o.length;t++)n=o[t],i=a[t%a.length],n.color=n.color||i,r=n._defaults,r&&(r.color=r.color||i)}function c(e){var t;Xt([ai,Mr,Wr,jr],function(){t=this+"Axes",e[t]&&(e[this+"Axis"]=e[t],delete e[t])})}function u(t,n){var i=(n||{}).axisDefaults||{};Xt([ai,Mr,Wr,jr],function(){var n=this+"Axis",r=[].concat(t[n]),o=t.axisDefaults||{};r=e.map(r,function(e){var t=(e||{}).color,r=dn({},i,i[n],o,o[n],{line:{color:t},labels:{color:t},title:{color:t}},e);return delete r[n],r}),t[n]=r.length>1?r:r[0]})}function p(e,t,n){e[t]=(e[t]||0)+n}function f(e){var t,n=e.length,i=0;for(t=0;n>t;t++)i=en.max(i,e[t].data.length);return i}function h(e){return e*e}function g(e,t){if(null===t)return t;var n=cn(e,!0);return n(t)}function m(e,t){if(null===t)return t;var n="_date_"+e,i=t[n];return i||(i=v(cn(e,!0)(t)),t[n]=i),i}function v(e){var t,n;if(e instanceof Date)t=e;else if(typeof e===yr)t=rn.parseDate(e)||new Date(e);else if(e)if(Jt(e))for(t=[],n=0;n<e.length;n++)t.push(v(e[n]));else t=new Date(e);return t}function _(e){return Jt(e)?Zt(e,_):e?v(e).getTime():t}function b(e,t,n,i){var r=e;return e&&(e=v(e),n===Gr?r=new Date(e.getFullYear()+t,0,1):n===ji?r=new Date(e.getFullYear(),e.getMonth()+t,1):n===Vr?r=b(w(e,i),7*t,_i):n===_i?r=new Date(e.getFullYear(),e.getMonth(),e.getDate()+t):n===Fi?(r=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours()+t),t>0&&F(e,r)&&(r=b(e,t+1,n,i))):n===Wi?(r=new Date(e.getTime()+t*xr),r.setSeconds(0)):n===gr&&(r=new Date(e.getTime()+t*kr)),r.setMilliseconds(0)),r}function w(e,t){var n=e.getDay(),i=0;if(!isNaN(n))for(t=t||0;n!==t;)0===n?n=6:n--,i++;return C(e,-i*Tr)}function y(e,t,n){return e=v(e),b(e,0,t,n)}function k(e,t,n){return e=v(e),e&&y(e,t,n).getTime()===e.getTime()?e:b(e,1,t,n)}function x(e,t){var n=e.getTime()-t,i=e.getTimezoneOffset()-t.getTimezoneOffset();return n-i*xr}function C(e,t){var n=e.getTimezoneOffset(),i=new Date(e.getTime()+t),r=i.getTimezoneOffset()-n;return new Date(i.getTime()+r*xr)}function T(e,t,n){var i;return i=n===Gr?t.getFullYear()-e.getFullYear():n===ji?12*T(e,t,Gr)+t.getMonth()-e.getMonth():n===_i?en.floor(x(t,e)/Tr):en.floor((t-e)/Er[n])}function S(e){return 1===e.length?e[0]:e}function D(e,t,n){return en.max(en.min(e,n),t)}function A(e){var t,n,i,r=e.length;if(r>0)for(n=0;r>n;n++)i=e[n].box,t?t.wrap(i):t=i.clone();return t||vn()}function E(e,t){return e&&t?e.toLowerCase()===t.toLowerCase():e===t}function F(e,t){return e&&t?_(e)===_(t):e===t}function I(e){for(var t,n=e.length;n--;)if(t=e[n],zn(t)&&null!==t)return t}function P(e,t){null!==t&&e.push(t)}function B(e,t){for(var n,i,r=0,o=t.length-1;o>=r;)if(n=en.floor((r+o)/2),i=t[n],e>i)r=n+1;else{if(!(i>e)){for(;F(t[n-1],e);)n--;return n}o=n-1}return t[n]<=e?n:n-1}function z(e){return"number"==typeof e&&!isNaN(e)}function H(e){var t,n,i=e.length,r=0;for(t=0;i>t;t++)n=e[t],z(n)&&r++;return r}function R(e){return H(e)===e.length}function M(e){var t,n,i,r={};for(t=0;t<e.length;t++)n=e[t],i=n.options.name,i&&(r[i]=n.range());return r}function L(e){var t=e.originalEvent,n=0;return t.wheelDelta&&(n=-t.wheelDelta/120,n=n>0?en.ceil(n):en.floor(n)),t.detail&&(n=Vn(t.detail/3)),n}function O(e,t,n){var i,r,o,a,s;if(n=n||{},o=n.excluded=n.excluded||[],a=n.defaults=n.defaults||{},s=n.depth=n.depth||0,!(s>Ni))for(i in e)Ln(i,n.excluded)||(r=e[i],un(r)?e[i]=jn(r(t),a[i]):typeof r===nr&&(n.defaults=a[i],n.depth++,O(r,t,n),n.depth--))}function N(e,n){var i,r,o,a=[],s=e.groupNameTemplate,l=n.length;for(zn(s)?(rn.logToConsole("'groupNameTemplate' is obsolete and will be removed in future versions. Specify the group name template as 'series.name'"),s&&(i=pn(s))):(i=pn(e.name||""),0===i._slotCount&&(i=pn(zn(e.name)?"#= group.value #: #= series.name #":"#= group.value #"))),r=0;l>r;r++)o=dn({},e),o.color=t,o._groupIx=r,a.push(o),i&&(o.name=i({series:o,group:n[r]}));return a}function V(e,t){var n,i,r=[];for(t=[].concat(t),n=0;n<e.length;n++)i=e[n],Ln(i.type,t)&&r.push(i);return r}function U(t,n){if(t instanceof Date){for(var i=0,r=n.length;r>i;i++)if(F(n[i],t))return i;return-1}return e.inArray(t,n)}function W(e,t){t=t||Hn;for(var n=1,i=e.length;i>n;n++)if(t(e[n],e[n-1])<0){e.sort(t);break}return e}function j(e,t){var n,i=W(e,t),r=i.length,o=r>0?[i[0]]:[];for(t=t||Hn,n=1;r>n;n++)0!==t(i[n],Nn(o))&&o.push(i[n]);return o}function G(e,t){var n=e.type,i=t instanceof Date;return!n&&i||E(n,vi)}function q(e){var t,n,i,r,o=[],a=e.length;for(t=0;a>t;t++)for(n=e[t],r=n.length,i=0;r>i;i++)o[i]=o[i]||[],o[i].push(n[i]);return o}function Y(e,t){if(e.indexOf(".")>-1)for(var n=e.split("."),i="";n.length>1;)i+=n.shift(),t[i]=t[i]||{},i+="."}var Q,$,K,X,J,Z,et,tt,nt,it,rt,ot,at,st,lt,dt,ct,ut,pt,ft,ht,gt,mt,vt,_t,bt,wt,yt,kt,xt,Ct,Tt,St,Dt,At,Et,Ft,It,Pt,Bt,zt,Ht,Rt,Mt,Lt,Ot,Nt,Vt,Ut,Wt,jt,Gt,qt,Yt,Qt,$t,Kt,Xt=e.each,Jt=e.isArray,Zt=e.map,en=Math,tn=e.extend,nn=e.proxy,rn=window.kendo,on=rn.Class,an=rn.Observable,sn=rn.data.DataSource,ln=rn.ui.Widget,dn=rn.deepExtend,cn=rn.getter,un=rn.isFunction,pn=rn.template,fn=rn.dataviz,hn=fn.Axis,gn=fn.AxisLabel,mn=fn.BarAnimation,vn=fn.Box2D,_n=fn.BoxElement,bn=fn.ChartElement,wn=fn.Color,yn=fn.ElementAnimation,kn=fn.Note,xn=fn.NumericAxis,Cn=fn.Point2D,Tn=fn.RootElement,Sn=fn.Ring,Dn=fn.ShapeElement,An=fn.Text,En=fn.TextBox,Fn=fn.Title,In=fn.animationDecorator,Pn=fn.append,Bn=fn.autoFormat,zn=fn.defined,Hn=fn.dateComparer,Rn=fn.getElement,Mn=fn.getSpacing,Ln=fn.inArray,On=fn.interpolateValue,Nn=fn.last,Vn=fn.round,Un=fn.renderTemplate,Wn=fn.uniqueId,jn=fn.valueOrDefault,Gn=".kendoChart",qn="above",Yn="area",Qn="auto",$n="fit",Kn=fn.AXIS_LABEL_CLICK,Xn="bar",Jn=.8,Zn="below",ei="#000",ti="both",ni="bottom",ii="bubble",ri="bullet",oi="candlestick",ai="category",si="center",li="change",di="circle",ci="click"+Gn,ui=fn.CLIP,pi="color",fi="column",hi=fn.COORD_PRECISION,gi="k-",mi="dataBound",vi="date",_i="days",bi=fn.DEFAULT_FONT,wi=fn.DEFAULT_HEIGHT,yi=fn.DEFAULT_PRECISION,ki=fn.DEFAULT_WIDTH,xi="donut",Ci=50,Ti="drag",Si="dragEnd",Di="dragStart",Ai="fadeIn",Ei="glass",Fi="hours",Ii=fn.INITIAL_ANIMATION_DURATION,Pi="insideBase",Bi="insideEnd",zi="interpolate",Hi="left",Ri="legendItemClick",Mi="legendItemHover",Li="line",Oi=8,Ni=5,Vi=Number.MAX_VALUE,Ui=-Number.MAX_VALUE,Wi="minutes",ji="months",Gi="mouseleave"+Gn,qi="mousemove.tracking",Yi="mouseover"+Gn,Qi="mouseout"+Gn,$i="mousemove"+Gn,Ki=20,Xi=150,Ji="DOMMouseScroll"+Gn+" mousewheel"+Gn,Zi=fn.NOTE_CLICK,er=fn.NOTE_HOVER,tr="noteText",nr="object",ir="ohlc",rr="outsideEnd",or="_outline",ar="pie",sr=70,lr="plotAreaClick",dr="pointer",cr="right",ur="roundedBevel",pr="roundedGlass",fr="scatter",hr="scatterLine",gr="seconds",mr="selectStart",vr="select",_r="selectEnd",br="seriesClick",wr="seriesHover",yr="string",kr=1e3,xr=60*kr,Cr=60*xr,Tr=24*Cr,Sr=7*Tr,Dr=31*Tr,Ar=365*Tr,Er={years:Ar,months:Dr,weeks:Sr,days:Tr,hours:Cr,minutes:xr,seconds:kr},Fr="top",Ir=150,Pr=5,Br=100,zr=100,Hr="tooltip-inverse",Rr="touchstart"+Gn,Mr="value",Lr="verticalArea",Or="verticalBullet",Nr="verticalLine",Vr="weeks",Ur="#fff",Wr="x",jr="y",Gr="years",qr="zero",Yr=3,Qr="zoomStart",$r="zoom",Kr="zoomEnd",Xr=[gr,Wi,Fi,_i,Vr,ji,Gr],Jr=[Xn,fi,ir,oi,ri],Zr={seconds:"HH:mm:ss",minutes:"HH:mm",hours:"HH:mm",days:"M/d",weeks:"M/d",months:"MMM 'yy",years:"yyyy"},eo=ln.extend({init:function(e,t){var n,i=this;rn.destroy(e),ln.fn.init.call(i,e),n=dn({},i.options,t),i.element.addClass(gi+n.name.toLowerCase()).css("position","relative"),i._originalOptions=dn({},n),i._initTheme(n),i.bind(i.events,i.options),i.wrapper=i.element,i._initDataSource(t),rn.notify(i,fn.ui)},_initTheme:function(n){var i,r=this,o=fn.ui.themes||{},a=n.theme,s=o[a]||o[a.toLowerCase()],l=a&&s?s.chart:{},u=[],p=n.series||[];for(i=0;i<p.length;i++)u.push(e.extend({},p[i]));n.series=u,c(n),r._applyDefaults(n,l),null===n.seriesColors&&(n.seriesColors=t),r.options=dn({},l,n),d(r.options)},_initDataSource:function(e){var t=this,n=(e||{}).dataSource;t._dataChangeHandler=nn(t._onDataChanged,t),t.dataSource=sn.create(n).bind(li,t._dataChangeHandler),t._bindCategories(),t._redraw(),t._attachEvents(),n&&t.options.autoBind&&t.dataSource.fetch()},setDataSource:function(e){var t=this;t.dataSource.unbind(li,t._dataChangeHandler),t.dataSource=e,e.bind(li,t._dataChangeHandler),t.options.autoBind&&e.fetch()},events:[mi,br,wr,Kn,Ri,Mi,lr,Di,Ti,Si,Qr,$r,Kr,mr,vr,_r,Zi,er],items:function(){return e()},options:{name:"Chart",renderAs:"",theme:"default",chartArea:{},legend:{visible:!0,labels:{}},categoryAxis:{},autoBind:!0,seriesDefaults:{type:fi,data:[],highlight:{visible:!0},labels:{},negativeValues:{visible:!1}},series:[],seriesColors:null,tooltip:{visible:!1},transitions:!0,valueAxis:{},plotArea:{},title:{},xAxis:{},yAxis:{}},refresh:function(){var e=this;e._applyDefaults(e.options),d(e.options),e._bindSeries(),e._bindCategories(),e.trigger(mi),e._redraw()},redraw:function(e){var t,n,i=this;i._applyDefaults(i.options),e?(n=i._model._plotArea,t=n.findPane(e),n.redraw(t)):i._redraw()},_redraw:function(){var e,t=this,n=t._getModel();t._destroyView(),t._model=n,t._plotArea=n._plotArea,e=t._view=fn.ViewFactory.current.create(n.options,t.options.renderAs),e&&(e.load(n),t._viewElement=t._renderView(e),t._tooltip=t._createTooltip(),t._highlight=new Ut(e,t._viewElement),t._setupSelection())},_sharedTooltip:function(){var e=this,t=e.options;return e._plotArea instanceof Pt&&t.tooltip.shared},_createTooltip:function(){var e,t=this,n=t.options,i=t.element;return e=t._sharedTooltip()?new Gt(i,t._plotArea,n.tooltip):new jt(i,n.tooltip)},_renderView:function(){var e=this;return e._view.renderTo(e.element[0])},_applyDefaults:function(e,t){u(e,t),s(e,t)},_getModel:function(){var e,t=this,n=t.options,i=new Tn(t._modelOptions());return i.parent=t,Fn.buildTitle(n.title,i),e=i._plotArea=t._createPlotArea(),n.legend.visible&&i.append(new J(e.options.legend)),i.append(e),i.reflow(),i},_modelOptions:function(){var e=this,t=e.options,n=e.element,i=en.floor(n.height()),r=en.floor(n.width());return dn({width:r||ki,height:i||wi,transitions:t.transitions},t.chartArea)},_createPlotArea:function(){var e=this,t=e.options;return Q.current.create(t.series,t)},_setupSelection:function(){var e,t,n,i,r,o,a=this,s=a._plotArea,l=s.axes,d=a._selections=[];for(a._selectStartHandler||(a._selectStartHandler=nn(a._selectStart,a),a._selectHandler=nn(a._select,a),a._selectEndHandler=nn(a._selectEnd,a)),t=0;t<l.length;t++)n=l[t],o=n.options,n instanceof Z&&o.select&&!o.vertical&&(i=0,r=o.categories.length-1,n instanceof tt&&(i=o.categories[i],r=o.categories[r]),o.justified||(n instanceof tt?r=b(r,1,o.baseUnit,o.weekStartDay):r++),e=new $t(a,n,dn({min:i,max:r},o.select)),e.bind(mr,a._selectStartHandler),e.bind(vr,a._selectHandler),e.bind(_r,a._selectEndHandler),d.push(e))},_selectStart:function(e){return this.trigger(mr,e)},_select:function(e){return this.trigger(vr,e)},_selectEnd:function(e){return this.trigger(_r,e)},_attachEvents:function(){var e=this,t=e.element;t.on(ci,nn(e._click,e)),t.on(Yi,nn(e._mouseover,e)),t.on(Qi,nn(e._mouseout,e)),t.on(Ji,nn(e._mousewheel,e)),t.on(Rr,nn(e._tap,e)),t.on(Gi,nn(e._mouseleave,e)),(e._plotArea.crosshairs.length||e._tooltip&&e._sharedTooltip())&&t.on($i,nn(e._mousemove,e)),rn.UserEvents&&(e._userEvents=new rn.UserEvents(t,{global:!0,threshold:5,filter:":not(.k-selector)",multiTouch:!1,start:nn(e._start,e),move:nn(e._move,e),end:nn(e._end,e)}))},_mouseout:function(e){var t=this,n=t._model.modelMap[e.target.getAttribute("data-model-id")];n&&n.leave&&n.leave(t,e)},_start:function(e){var t=this,n=t._events;zn(n[Di]||n[Ti]||n[Si])&&t._startNavigation(e,Di)},_move:function(e){var t,n,i,r,o,a,s=this,l=s._navState,d={};if(l){for(e.preventDefault(),t=l.axes,n=0;n<t.length;n++)i=t[n],r=i.options.name,r&&(o=i.options.vertical?e.y:e.x,a=o.startLocation-o.location,0!==a&&(d[i.options.name]=i.translateRange(a)));l.axisRanges=d,s.trigger(Ti,{axisRanges:d,originalEvent:e})}},_end:function(e){this._endNavigation(e,Si)},_mousewheel:function(e){var t,n,i,r,o,a,s=this,l=e.originalEvent,d=L(e),c=s._navState,u={};if(c||(t=s._startNavigation(l,Qr),t||(c=s._navState)),c){for(n=c.totalDelta||d,c.totalDelta=n+d,i=s._navState.axes,r=0;r<i.length;r++)o=i[r],a=o.options.name,a&&(u[a]=o.scaleRange(n));s.trigger($r,{delta:d,axisRanges:u,originalEvent:e}),s._mwTimeout&&clearTimeout(s._mwTimeout),s._mwTimeout=setTimeout(function(){s._endNavigation(e,Kr)},Xi)}},_startNavigation:function(e,t){var n,i,r,o=this,a=o._eventCoordinates(e),s=o._model._plotArea,l=s.findPointPane(a),d=s.axes.slice(0),c=!1;if(l){for(n=0;n<d.length;n++)if(i=d[n],i.box.containsPoint(a)){c=!0;break}!c&&s.backgroundBox().containsPoint(a)&&(r=o.trigger(t,{axisRanges:M(d),originalEvent:e}),r?o._userEvents.cancel():(o._suppressHover=!0,o._unsetActivePoint(),o._navState={pane:l,axes:d}))}},_endNavigation:function(e,t){var n=this;n._navState&&(n.trigger(t,{axisRanges:n._navState.axisRanges,originalEvent:e}),n._suppressHover=!1,n._navState=null)},_getChartElement:function(t){var n,i=this,r=e(t.target).data("modelId"),o=i._model;return r&&(n=o.modelMap[r]),n&&n.aliasFor&&(n=n.aliasFor(t,i._eventCoordinates(t))),n},_eventCoordinates:function(e){var t=this,n=zn((e.x||{}).client),i=n?e.x.client:e.clientX,r=n?e.y.client:e.clientY;return t._toModelCoordinates(i,r)},_toModelCoordinates:function(t,n){var i=this.element,r=i.offset(),o=parseInt(i.css("paddingLeft"),10),a=parseInt(i.css("paddingTop"),10),s=e(window);return new Cn(t-r.left-o+s.scrollLeft(),n-r.top-a+s.scrollTop())},_click:function(e){for(var t=this,n=t._getChartElement(e);n;)n.click&&n.click(t,e),n=n.parent},_startHover:function(e){var n,i=this,r=i._tooltip,o=i._highlight,a=i.options.tooltip;if(!i._suppressHover&&o&&!Ln(e.target,o._overlays)&&!i._sharedTooltip())return n=i._getChartElement(e),n&&n.hover&&(n.hover(i,e),!e.isDefaultPrevented())?(i._activePoint=n,a=dn({},a,n.options.tooltip),a.visible&&r.show(n),o.show(n),!0):t},_mouseover:function(t){var n=this;n._startHover(t)&&e(document).on(qi,nn(n._mouseMoveTracking,n))},_mouseMoveTracking:function(t){var n,i,r,o=this,a=o.options,s=o._tooltip,l=o._highlight,d=o._eventCoordinates(t),c=o._activePoint;o._plotArea.box.containsPoint(d)?c&&c.series&&(c.series.type===Li||c.series.type===Yn)&&(i=c.parent,r=i.getNearestPoint(d.x,d.y,c.seriesIx),r&&r!=c&&(r.hover(o,t),o._activePoint=r,n=dn({},a.tooltip,c.options.tooltip),n.visible&&s.show(r),l.show(r))):(e(document).off(qi),o._unsetActivePoint())},_mousemove:function(e){var t,n=this,i=new Date,r=n._mousemove.timestamp;(!r||i-r>Ki)&&(t=n._eventCoordinates(e),n._trackCrosshairs(t),n._sharedTooltip()&&n._trackSharedTooltip(t),n._mousemove.timestamp=i)},_trackCrosshairs:function(e){var t,n,i=this._plotArea.crosshairs;for(t=0;t<i.length;t++)n=i[t],n.box.containsPoint(e)?n.showAt(e):n.hide()},_trackSharedTooltip:function(e){var t,n,i=this,r=i.options,o=i._plotArea,a=o.categoryAxis,s=i._tooltip,l=r.tooltip,d=i._highlight;t=a.pointCategoryIndex(e),t!==i._tooltipCategoryIx&&(n=o.pointsByCategoryIndex(t),n.length>0?(l.visible&&s.showAt(n,e),d.show(n)):s.hide(),i._tooltipCategoryIx=t)},_mouseleave:function(){var e,t=this,n=t._plotArea,i=n.crosshairs,r=t._tooltip,o=t._highlight;for(e=0;e<i.length;e++)i[e].hide();setTimeout(nn(r.hide,r),zr),o.hide(),t._tooltipCategoryIx=null},_unsetActivePoint:function(){var e=this,t=e._tooltip,n=e._highlight;e._activePoint=null,t&&t.hide(),n&&n.hide()},_onDataChanged:function(){var e,t,n=this,i=n.options,r=n._sourceSeries||i.series,o=r.length,a=n.dataSource.view(),s=(n.dataSource.group()||[]).length>0,l=[];for(e=0;o>e;e++)t=r[e],n._isBindable(t)&&s?Pn(l,N(t,a)):l.push(t||[]);n._sourceSeries=r,i.series=l,d(n.options),n._bindSeries(),n._bindCategories(),n.trigger(mi),n._redraw()},_bindSeries:function(){var e,t,n,i,r=this,o=r.dataSource.view(),a=r.options.series,s=a.length;for(e=0;s>e;e++)t=a[e],r._isBindable(t)&&(n=t._groupIx,i=zn(n)?(o[n]||{}).items:o,t.autoBind!==!1&&(t.data=i))},_bindCategories:function(){var e,t,n=this,i=n.dataSource.view()||[],r=(n.dataSource.group()||[]).length>0,o=i,a=n.options,s=[].concat(a.categoryAxis);for(r&&i.length&&(o=i[0].items),e=0;e<s.length;e++)t=s[e],t.autoBind!==!1&&n._bindCategoryAxis(t,o,e)},_bindCategoryAxis:function(e,t,n){var i,r,o,a=(t||[]).length;if(e.field)for(e.categories=[],i=0;a>i;i++)o=t[i],r=g(e.field,o),0===i?(e.categories=[r],e.dataItems=[o]):(e.categories.push(r),e.dataItems.push(o));else this._bindCategoryAxisFromSeries(e,n)},_bindCategoryAxisFromSeries:function(e,t){var n,i,r,o,a,s,l,d,c,u,p,f=this,h=[],v=f.options.series,_=v.length,b={};for(i=0;_>i;i++)if(r=v[i],o=r.categoryAxis===e.name||!r.categoryAxis&&0===t,a=r.data,l=a.length,r.categoryField&&o&&l>0)for(p=G(e,g(r.categoryField,a[0])),u=p?m:g,s=0;l>s;s++)d=a[s],c=u(r.categoryField,d),(p||!b[c])&&(h.push([c,d]),p||(b[c]=!0));h.length>0&&(p&&(h=j(h,function(e,t){return Hn(e[0],t[0])})),n=q(h),e.categories=n[0],e.dataItems=n[1])},_isBindable:function(e){var t,n,i=$.current.valueFields(e),r=!0;for(n=0;n<i.length;n++)if(t=i[n],t===Mr?t="field":t+="Field",!e[t]){r=!1;break}return r},_tap:function(e){var t=this;t._startHover(e)||t._unsetActivePoint(),t._click(e)},_legendItemClick:function(e,t){var n,i,r=this,o=r._plotArea,a=(o.srcSeries||o.series)[e];Ln(a.type,[ar,xi])?(n=a.data[t],n.visible=zn(n.visible)?!n.visible:!1):a.visible=!a.visible,r.options.transitions&&(r.options.transitions=!1,i=!0),r.redraw(),i&&(r.options.transitions=!0)},_legendItemHover:function(e,t){var n,i,r=this,o=r._plotArea,a=r._highlight,s=(o.srcSeries||o.series)[e];n=Ln(s.type,[ar,xi])?t:e,i=o.pointsBySeriesIndex(n),a.show(i)},setOptions:function(e){var t=this;t._originalOptions=dn(t._originalOptions,e),t.options=dn({},t._originalOptions),t._sourceSeries=null,ln.fn.setOptions.call(t,e),t._initTheme(t.options),e.dataSource&&t.setDataSource(sn.create(e.dataSource)),t.options.dataSource?t.refresh():t.redraw()},destroy:function(){var t=this,n=t.dataSource;t.element.off(Gn),n.unbind(li,t._dataChangeHandler),e(document).off(qi),t._userEvents&&t._userEvents.destroy(),t._destroyView(),ln.fn.destroy.call(t)},_destroyView:function(){var e=this,t=e._model,n=e._view,i=e._selections;if(t&&(t.destroy(),e._model=null),n&&(n.destroy(),e._view=null),i)for(;i.length>0;)i.shift().destroy()}});dn(eo.fn,fn.ExportMixin),Q=on.extend({init:function(){this._registry=[]},register:function(e,t){this._registry.push({type:e,seriesTypes:t})},create:function(e,t){var n,i,r,o=this._registry,a=o[0];for(n=0;n<o.length;n++)if(i=o[n],r=V(e,i.seriesTypes),r.length>0){a=i;break}return new a.type(r,t)}}),Q.current=new Q,$=on.extend({init:function(){this._valueFields={},this._otherFields={},this._nullValue={},this._undefinedValue={}},register:function(e,n,i){var r,o,a=this;for(n=n||[Mr],r=0;r<e.length;r++)o=e[r],a._valueFields[o]=n,a._otherFields[o]=i,a._nullValue[o]=a._makeValue(n,null),a._undefinedValue[o]=a._makeValue(n,t)},canonicalFields:function(e){return this.valueFields(e).concat(this.otherFields(e))},valueFields:function(e){return this._valueFields[e.type]||[Mr]},otherFields:function(e){return this._otherFields[e.type]||[Mr]},bindPoint:function(e,t){var n,i,r,o,a,s=this,l=e.data,d=l[t],c={valueFields:{value:d}},u=s.valueFields(e),p=s._otherFields[e.type];return null===d?a=s._nullValue[e.type]:zn(d)?Jt(d)?(i=d.slice(u.length),a=s._bindFromArray(d,u),n=s._bindFromArray(i,p)):typeof d===nr&&(r=s.sourceFields(e,u),o=s.sourceFields(e,p),a=s._bindFromObject(d,u,r),n=s._bindFromObject(d,p,o)):a=s._undefinedValue[e.type],zn(a)&&(1===u.length?c.valueFields.value=a[u[0]]:c.valueFields=a),c.fields=n||{},c},_makeValue:function(e,t){var n,i,r={},o=e.length;for(n=0;o>n;n++)i=e[n],r[i]=t;return r},_bindFromArray:function(e,t){var n,i,r={};if(t)for(i=en.min(t.length,e.length),n=0;i>n;n++)r[t[n]]=e[n];return r},_bindFromObject:function(e,t,n){var i,r,o,a,s={};if(t)for(r=t.length,n=n||t,i=0;r>i;i++)o=t[i],a=n[i],s[o]=g(a,e);return s},sourceFields:function(e,t){var n,i,r,o,a;if(t)for(i=t.length,o=[],n=0;i>n;n++)r=t[n],a=r===Mr?"field":r+"Field",o.push(e[a]||r);return o}}),$.current=new $,K=bn.extend({init:function(e,t){var n=this;bn.fn.init.call(n,t),n.append(new En(e,n.options))},options:{position:rr,margin:Mn(3),padding:Mn(4),color:ei,background:"",border:{width:1,color:""},aboveAxis:!0,vertical:!1,animation:{type:Ai,delay:Ii},zIndex:1},reflow:function(e){var t=this,n=t.options,i=n.vertical,r=n.aboveAxis,o=t.children[0],a=o.box,s=o.options.padding;o.options.align=i?si:Hi,o.options.vAlign=i?Fr:si,n.position==Bi?i?(o.options.vAlign=Fr,!r&&a.height()<e.height()&&(o.options.vAlign=ni)):o.options.align=r?cr:Hi:n.position==si?(o.options.vAlign=si,o.options.align=si):n.position==Pi?i?o.options.vAlign=r?ni:Fr:o.options.align=r?Hi:cr:n.position==rr&&(i?e=r?new vn(e.x1,e.y1-a.height(),e.x2,e.y1):new vn(e.x1,e.y2,e.x2,e.y2+a.height()):(o.options.align=si,e=r?new vn(e.x2+a.width(),e.y1,e.x2,e.y2):new vn(e.x1-a.width(),e.y1,e.x1,e.y2))),i?s.left=s.right=(e.width()-o.contentBox.width())/2:s.top=s.bottom=(e.height()-o.contentBox.height())/2,o.reflow(e)}}),X=An.extend({init:function(e,t){var n=this;n.item=e,An.fn.init.call(n,e.text,dn({id:Wn(),cursor:{style:dr}},t)),n.enableDiscovery()},click:function(e,t){var n=this.eventArgs(t);e.trigger(Ri,n)||(t.preventDefault(),e._legendItemClick(n.seriesIndex,n.pointIndex))},hover:function(e,t){var n=this.eventArgs(t);e.trigger(Mi,n)||(t.preventDefault(),e._legendItemHover(n.seriesIndex,n.pointIndex))},leave:function(e){e._unsetActivePoint()},eventArgs:function(t){var n=this.item;return{element:e(t.target),text:n.text,series:n.series,seriesIndex:n.series.index,pointIndex:n.pointIndex}}}),J=bn.extend({init:function(e){var t=this;bn.fn.init.call(t,e),t.createLabels()},options:{position:cr,items:[],labels:{},offsetX:0,offsetY:0,margin:Mn(10),padding:Mn(5),border:{color:ei,width:0},background:"",zIndex:1,markers:{border:{width:1}}},createLabels:function(){var e,t,n=this,i=n.options.items,r=i.length;for(e=0;r>e;e++)t=i[e],n.append(new X(t,dn({},n.options.labels,{color:t.labelColor})))},reflow:function(e){var n=this,i=n.options,r=n.children.length;return 0===r?(n.box=e.clone(),t):"custom"==i.position?(n.customLayout(e),t):(i.position==Fr||i.position==ni?n.horizontalLayout(e):n.verticalLayout(e),t)},getViewElements:function(e){var t,n,i,r,o,a,s,l=this,d=l.children,c=l.options,u=c.items,p=u.length,f=l.markerSize(),h=e.createGroup({zIndex:c.zIndex}),g=c.border||{};for(Pn(h.children,bn.fn.getViewElements.call(l,e)),s=0;p>s;s++)r=u[s].markerColor,o=d[s],n=vn(),a=o.box,i=i?i.wrap(a):a.clone(),n.x1=a.x1-2*f,n.x2=n.x1+f,n.y1=c.position==Fr||c.position==ni?a.y1+f/2:a.y1+(a.height()-f)/2,n.y2=n.y1+f,h.children.push(e.createRect(n,{fill:r,stroke:r,strokeWidth:c.markers.border.width,data:{modelId:o.options.modelId},cursor:{style:dr}}));return d.length>0&&(t=Mn(c.padding),t.left+=2*f,i.pad(t),h.children.unshift(e.createRect(i,{stroke:g.width?g.color:"",strokeWidth:g.width,dashType:g.dashType,fill:c.background}))),[h]},verticalLayout:function(e){var t,n,i,r,o,a=this,s=a.options,l=a.children,d=l.length,c=l[0].box.clone(),u=Mn(s.margin),p=2*a.markerSize();for(r=1;d>r;r++)i=a.children[r],i.box.alignTo(a.children[r-1].box,ni),c.wrap(i.box);s.position==Hi?(t=e.x1+p+u.left,n=(e.y2-c.height())/2,c.x2+=p+u.left+u.right):(t=e.x2-c.width()-u.right,n=(e.y2-c.height())/2,c.translate(t,n),c.x1-=p+u.left),a.translateChildren(t+s.offsetX,n+s.offsetY),o=c.width(),c.x1=en.max(e.x1,c.x1),c.x2=c.x1+o,c.y1=e.y1,c.y2=e.y2,a.box=c},horizontalLayout:function(e){var t,n,i,r,o=this,a=o.options,s=o.children,l=s.length,d=s[0].box.clone(),c=3*o.markerSize(),u=Mn(a.margin),p=s[0].box.width()+c,f=e.width(),h=0;for(r=1;l>r;r++)i=s[r],p+=i.box.width()+c,p>f-c?(i.box=vn(d.x1,d.y2,d.x1+i.box.width(),d.y2+i.box.height()),p=i.box.width()+c,h=i.box.y1):(i.box.alignTo(s[r-1].box,cr),i.box.y2=h+i.box.height(),i.box.y1=h,i.box.translate(c,0)),d.wrap(i.box);t=(e.width()-d.width()+c)/2,a.position===Fr?(n=e.y1+u.top,d.y2=e.y1+d.height()+u.top+u.bottom,d.y1=e.y1):(n=e.y2-d.height()-u.bottom,d.y1=e.y2-d.height()-u.top-u.bottom,d.y2=e.y2),o.translateChildren(t+a.offsetX,n+a.offsetY),d.x1=e.x1,d.x2=e.x2,o.box=d},customLayout:function(e){var t,n=this,i=n.options,r=n.children,o=r.length,a=r[0].box.clone(),s=2*n.markerSize();for(t=1;o>t;t++)a=n.children[t].box,a.alignTo(n.children[t-1].box,ni),a.wrap(a);n.translateChildren(i.offsetX+s,i.offsetY),n.box=e},markerSize:function(){var e=this,t=e.children;return t.length>0?t[0].box.height()/2:0}}),Z=hn.extend({init:function(e){var t=this;hn.fn.init.call(t,e),e=t.options,e.categories=e.categories.slice(0),t._ticks={}},options:{type:ai,categories:[],vertical:!1,majorGridLines:{visible:!1,width:1,color:ei},zIndex:1,justified:!1},range:function(){return{min:0,max:this.options.categories.length}},getTickPositions:function(e){var t,n=this,i=n.options,r=i.vertical,o=i.justified,a=n.lineBox(),s=r?a.height():a.width(),l=e-(o?1:0),d=s/l,c=r?jr:Wr,u=a[c+1],p=[];for(t=0;e>t;t++)p.push(Vn(u,hi)),u+=d;return o||p.push(a[c+2]),i.reverse?p.reverse():p},getMajorTickPositions:function(){return this.getTicks().majorTicks},getMinorTickPositions:function(){return this.getTicks().minorTicks},getTicks:function(){var e,t=this,n=t._ticks,i=t.options,r=i.categories.length,o=i.reverse,a=i.justified,s=t.lineBox();return e=s.getHash()+r+o+a,n._hash!==e&&(n._hash=e,n.majorTicks=t.getTickPositions(r),n.minorTicks=t.getTickPositions(2*r)),n},getSlot:function(e,t){var n,i,r,o=this,a=o.options,s=o.getMajorTickPositions(),l=a.reverse,d=a.justified,c=a.vertical?jr:Wr,u=o.lineBox(),p=u[c+(l?2:1)],f=u[c+(l?1:2)],h=u.clone(),g=en.max(1,s.length-(d?0:1));return e=jn(e,0),t=jn(t,e),e=D(e,0,g),t=D(t-1,e,g),t=en.max(e,t),n=0===e?p:s[e]||f,i=d?n:s[t],r=t-e,(r>0||e===t)&&(i=s[t+1]||f),d&&(e===g?n=i:i=n),h[c+1]=l?i:n,h[c+2]=l?n:i,h},pointCategoryIndex:function(e){var t,n,i,r,o=this,a=o.options,s=a.reverse,l=a.vertical,d=l?jr:Wr,c=o.lineBox(),u=c[d+1],p=c[d+2],f=e[d],h=o.getMajorTickPositions(),g=Vi;if(u>f||f>p)return null;for(i=0;i<h.length;i++)if(t=h[i],n=h[i+1],zn(n)||(n=s?u:p),s&&(t=n,n=h[i]),a.justified){if(f===n){r=en.max(0,l?h.length-i-1:i+1);break}en.abs(f-t)<g&&(g=f-t,r=i)}else if(f>=t&&n>=f){r=i;break}return r},getCategory:function(e){var t=this.pointCategoryIndex(e);return null===t?null:this.options.categories[t]},categoryIndex:function(e){return U(e,this.options.categories)},translateRange:function(e){var t=this,n=t.options,i=t.lineBox(),r=n.vertical?i.height():i.width(),o=n.categories.length,a=r/o,s=Vn(e/a,yi);return{min:s,max:o+s}},scaleRange:function(e){var t=this,n=t.options,i=n.categories.length,r=e*i;return{min:-r,max:i+r}},labelsCount:function(){return this.options.categories.length},createAxisLabel:function(e,t){var n=this,i=n.options,r=i.dataItems?i.dataItems[e]:null,o=jn(i.categories[e],"");return new gn(o,e,r,t)},shouldRenderNote:function(){return this.options.categories.length}}),et=gn.extend({formatValue:function(e,t){return rn.toString(e,t.format,t.culture)}}),tt=Z.extend({init:function(e){var t,n,i=this;e=e||{},e=dn({roundToBaseUnit:!0},e,{categories:v(e.categories),min:v(e.min),max:v(e.max)}),e.categories&&e.categories.length>0?(t=(e.baseUnit||"").toLowerCase(),n=t!==$n&&!Ln(t,Xr),n&&(e.baseUnit=i.defaultBaseUnit(e)),(t===$n||e.baseUnitStep===Qn)&&i.autoBaseUnit(e),i.groupCategories(e)):e.baseUnit=e.baseUnit||_i,Z.fn.init.call(i,e)},options:{type:vi,labels:{dateFormats:Zr},autoBaseUnitSteps:{seconds:[1,2,5,15,30],minutes:[1,2,5,15,30],hours:[1,2,3],days:[1,2,3],weeks:[1,2],months:[1,2,3,6],years:[1,2,3,5,10,25,50]},maxDateGroups:10},shouldRenderNote:function(e){var t=this,n=t.range(),i=t.options.categories||[];return Hn(e,n.min)>=0&&Hn(e,n.max)<=0&&i.length},parseNoteValue:function(e){return v(e)},translateRange:function(e){var t,n,i=this,r=i.options,o=r.baseUnit,a=r.weekStartDay,s=i.lineBox(),l=r.vertical?s.height():s.width(),d=i.range(),c=l/(d.max-d.min),u=Vn(e/c,yi);return d.min&&d.max&&(t=C(r.min||d.min,u),n=C(r.max||d.max,u),d={min:b(t,0,o,a),max:b(n,0,o,a)}),d},scaleRange:function(e){var t,n=this,i=en.abs(e),r=n.range(),o=r.min,a=r.max;if(r.min&&r.max){for(;i--;)r=x(o,a),t=en.round(.1*r),0>e?(o=C(o,t),a=C(a,-t)):(o=C(o,-t),a=C(a,t));r={min:o,max:a}}return r},defaultBaseUnit:function(e){var t,n,i,r,o,a=e.categories,s=zn(a)?a.length:0,l=Vi;for(t=0;s>t;t++)n=a[t],n&&r&&(i=x(n,r),i>0&&(l=en.min(l,i),o=l>=Ar?Gr:l>=Dr-3*Tr?ji:l>=Sr?Vr:l>=Tr?_i:l>=Cr?Fi:l>=xr?Wi:gr)),r=n;return o||_i},range:function(e){e=e||this.options;var t=e.categories,n=e.baseUnit===$n,i=n?Xr[0]:e.baseUnit,r=e.baseUnitStep||1,a=_(e.min),s=_(e.max),l=o(t),d=_(l.min),c=_(l.max);return e.roundToBaseUnit?{min:b(a||d,0,i,e.weekStartDay),max:b(s||c,r,i,e.weekStartDay)}:{min:v(a||d),max:v(s||c)}},autoBaseUnit:function(e){for(var t,n,i,r=this,o=r.range(dn({},e,{baseUnitStep:1})),a=e.baseUnit===$n,s=0,l=a?Xr[s++]:e.baseUnit,d=o.max-o.min,c=d/Er[l],u=c,p=e.maxDateGroups||r.options.maxDateGroups,f=dn({},r.options.autoBaseUnitSteps,e.autoBaseUnitSteps);!n||c>p;)if(t=t||f[l].slice(0),i=t.shift())n=i,c=u/n;else{if(l===Nn(Xr)){n=en.ceil(u/p);break}if(!a){c>p&&(n=en.ceil(u/p));break}l=Xr[s++]||Nn(Xr),u=d/Er[l],t=null}e.baseUnitStep=n,e.baseUnit=l},getMajorTickPositions:function(){var e,t,n,i,r,o,a,s,l,d,c,u,p,f,h,g,m,v=this,_=v.options,b=_.categories,w=[];if(_.roundToBaseUnit||0===b.length)w=Z.fn.getMajorTickPositions.call(v);else{for(n=_.vertical,i=_.reverse,r=v.lineBox(),o=n?r.height():r.width(),a=b[0].getTime(),s=v.range(v.options),l=s.max-s.min,d=o/l,c=b.length,u=(n?-1:1)*(i?-1:1),p=1===u?1:2,f=1===u?2:1,h=r[(n?jr:Wr)+p],g=r[(n?jr:Wr)+f],m=h,e=0;c>e;e++)t=b[e]-a,m=h+t*d*u,w.push(Vn(m,hi));Nn(w)!==g&&w.push(g)}return w},groupCategories:function(e){var t,n,i=this,o=e.categories,a=v(r(o)),s=e.baseUnit,l=e.baseUnitStep||1,d=i.range(e),c=d.max,u=[];for(t=d.min;c>t&&(u.push(t),n=b(t,l,s,e.weekStartDay),!(n>a)||e.max);t=n);e.roundToBaseUnit||F(Nn(u),c)||u.push(c),e.srcCategories=o,e.categories=u},createAxisLabel:function(e,t){var n,i=this.options,r=i.dataItems?i.dataItems[e]:null,o=i.categories[e],a=i.baseUnit,s=!0,l=t.dateFormats[a];return i.justified&&(n=y(o,a,i.weekStartDay),s=F(n,o)),t=dn({format:l},t,{visible:s}),new et(o,e,r,t)},categoryIndex:function(e,t){var n,i,r,o=this,a=o.options,s=a.categories,l=s.length-1;return e=v(e),t=t||o.range(),i=a.roundToBaseUnit&&F(t.max,e),!e||e>t.max||e<t.min||i?-1:(r=B(e,s),r!==l||a.justified||a.roundToBaseUnit||(n=b(e,0,a.baseUnit,a.startOfWeek),F(n,e)||r--),r)},getSlot:function(e,t){var n=this;return typeof e===nr&&(e=n.categoryIndex(e)),typeof t===nr&&(t=n.categoryIndex(t)),Z.fn.getSlot.call(n,e,t)}}),nt=hn.extend({init:function(e,t,n){var i=this;n=n||{},dn(n,{min:v(n.min),max:v(n.max),axisCrossingValue:v(n.axisCrossingValues||n.axisCrossingValue)}),n=i.applyDefaults(v(e),v(t),n),hn.fn.init.call(i,n)},options:{type:vi,labels:{dateFormats:Zr}},applyDefaults:function(e,n,i){var r=this,o=i.min||e,a=i.max||n,s=i.baseUnit||r.timeUnits(a-o),l=Er[s],d=y(_(o)-1,s)||v(a),c=k(_(a)+1,s),u=i.majorUnit?i.majorUnit:t,p=u||fn.ceil(fn.autoMajorUnit(d.getTime(),c.getTime()),l)/l,f=T(d,c,s),h=fn.ceil(f,p),g=h-f,m=en.floor(g/2),w=g-m;return i.baseUnit||delete i.baseUnit,dn({baseUnit:s,min:b(d,-m,s),max:b(c,w,s),minorUnit:p/5},i,{majorUnit:p})},range:function(){var e=this.options;
return{min:e.min,max:e.max}},getDivisions:function(e){var t=this.options;return en.floor(T(t.min,t.max,t.baseUnit)/e+1)},getTickPositions:function(e){var t,n=this,i=n.options,r=i.vertical,o=i.reverse,a=n.lineBox(),s=r?a.height():a.width(),l=T(i.min,i.max,i.baseUnit),d=s/l,c=e*d,u=n.getDivisions(e),p=(r?-1:1)*(o?-1:1),f=1===p?1:2,h=a[(r?jr:Wr)+f],g=[];for(t=0;u>t;t++)g.push(Vn(h,hi)),h+=c*p;return g},getMajorTickPositions:function(){var e=this;return e.getTickPositions(e.options.majorUnit)},getMinorTickPositions:function(){var e=this;return e.getTickPositions(e.options.minorUnit)},getSlot:function(e,t){return xn.fn.getSlot.call(this,v(e),v(t))},getValue:function(e){var t=xn.fn.getValue.call(this,e);return null!==t?v(t):null},labelsCount:function(){return this.getDivisions(this.options.majorUnit)},createAxisLabel:function(e,t){var n=this.options,i=e*n.majorUnit,r=b(n.min,i,n.baseUnit),o=t.dateFormats[n.baseUnit];return t.format=t.format||o,new et(r,e,null,t)},timeUnits:function(e){var t=Fi;return e>=Ar?t=Gr:e>=Dr?t=ji:e>=Sr?t=Vr:e>=Tr&&(t=_i),t},translateRange:function(e){var t=this,n=t.options,i=n.baseUnit,r=n.weekStartDay,o=t.lineBox(),a=n.vertical?o.height():o.width(),s=t.range(),l=a/(s.max-s.min),d=Vn(e/l,yi),c=C(n.min,d),u=C(n.max,d);return{min:b(c,0,i,r),max:b(u,0,i,r)}},scaleRange:function(e){for(var t,n,i=this,r=i.options,o=r.baseUnit,a=r.weekStartDay,s=en.abs(e),l=r.min,d=r.max;s--;)t=x(l,d),n=en.round(.1*t),0>e?(l=C(l,n),d=C(d,-n)):(l=C(l,-n),d=C(d,n)),l=b(l,0,o,a),d=b(d,1,o,a);return{min:l,max:d}}}),it=bn.extend({options:{vertical:!1,gap:0,spacing:0},reflow:function(e){var t,n,i=this,r=i.options,o=r.vertical,a=o?jr:Wr,s=i.children,l=r.gap,d=r.spacing,c=s.length,u=c+l+d*(c-1),p=(o?e.height():e.width())/u,f=e[a+1]+p*(l/2);for(n=0;c>n;n++)t=(s[n].box||e).clone(),t[a+1]=f,t[a+2]=f+p,s[n].reflow(t),c-1>n&&(f+=p*d),f+=p}}),rt=bn.extend({options:{vertical:!0,isReversed:!1},reflow:function(e){var t,n,i,r,o=this,a=o.options,s=a.vertical,l=s?Wr:jr,d=s?jr:Wr,c=e[d+2],u=o.children,p=o.box=new vn,f=u.length;for(t=a.isReversed?s?ni:Hi:s?Fr:cr,n=0;f>n;n++)i=u[n],r=i.box.clone(),r.snapTo(e,l),i.options&&(i.options.stackBase=c),0===n?p=o.box=r.clone():r.alignTo(u[n-1].box,t),i.reflow(r),p.wrap(r)}}),ot={click:function(t,n){var i=this;t.trigger(br,{value:i.value,category:i.category,series:i.series,dataItem:i.dataItem,element:e(n.target)})},hover:function(t,n){var i=this;t.trigger(wr,{value:i.value,category:i.category,series:i.series,dataItem:i.dataItem,element:e(n.target)})}},at=bn.extend({init:function(e,t){var n=this;bn.fn.init.call(n,t),n.value=e,n.options.id=Wn(),n.enableDiscovery()},options:{color:Ur,border:{width:1},vertical:!0,overlay:{gradient:Ei},aboveAxis:!0,labels:{visible:!1},animation:{type:Xn},opacity:1,notes:{label:{}}},render:function(){var e,t=this,n=t.value,i=t.options,r=i.labels,o=n;t._rendered||(t._rendered=!0,r.visible&&n&&(r.template?(e=pn(r.template),o=e({dataItem:t.dataItem,category:t.category,value:t.value,series:t.series})):r.format&&(o=Bn(r.format,o)),t.append(new K(o,dn({vertical:i.vertical,id:Wn()},i.labels)))),t.creteNote())},creteNote:function(){var e,t=this,n=t.options.notes,i=n.label.text;n.visible&&zn(i)&&null!==i&&(n.label.template?(e=pn(n.label.template),i=e({dataItem:t.dataItem,category:t.category,value:t.value,series:t.series})):n.label.format&&(i=Bn(n.label.format,i)),t.note=new kn(dn({},n,{label:{text:i}})),t.append(t.note))},reflow:function(e){this.render();var t=this,n=t.options,i=t.children,r=i[0];t.box=e,r&&(r.options.aboveAxis=n.aboveAxis,r.reflow(e)),t.note&&t.note.reflow(e)},getViewElements:function(e){var t=this,n=t.options,i=n.vertical,r=n.border.width>0?{stroke:t.getBorderColor(),strokeWidth:n.border.width,strokeOpacity:n.border.opacity,dashType:n.border.dashType}:{},o=t.box,a=dn({id:n.id,fill:n.color,fillOpacity:n.opacity,strokeOpacity:n.opacity,vertical:n.vertical,aboveAxis:n.aboveAxis,stackBase:n.stackBase,animation:n.animation,data:{modelId:n.modelId}},r),s=[];return o.width()>0&&o.height()>0&&(n.overlay&&(a.overlay=dn({rotation:i?0:90},n.overlay)),s.push(e.createRect(o,a))),Pn(s,bn.fn.getViewElements.call(t,e)),s},highlightOverlay:function(e,t){var n=this,i=n.box;return t=dn({data:{modelId:n.options.modelId}},t),t.id=null,e.createRect(i,t)},getBorderColor:function(){var e=this,t=e.options,n=t.color,i=t.border,r=i.color,o=i._brightness||Jn;return zn(r)||(r=new wn(n).brightness(o).toHex()),r},tooltipAnchor:function(e,t){var n,i,r=this,o=r.options,a=r.box,s=o.vertical,l=o.aboveAxis;return s?(n=a.x2+Pr,i=l?a.y1:a.y2-t):o.isStacked?(n=l?a.x2-e:a.x1,i=a.y1-t-Pr):(n=l?a.x2+Pr:a.x1-e-Pr,i=a.y1),new Cn(n,i)},formatValue:function(e){var t=this;return t.owner.formatPointValue(t,e)}}),dn(at.fn,ot),st=bn.extend({init:function(e,t){var n=this;bn.fn.init.call(n,t),n.plotArea=e,n.categoryAxis=e.seriesCategoryAxis(t.series[0]),n.valueAxisRanges={},n.points=[],n.categoryPoints=[],n.seriesPoints=[],n.render()},options:{series:[],invertAxes:!1,isStacked:!1},render:function(){var e=this;e.traverseDataPoints(nn(e.addValue,e))},addValue:function(e,t,n,i,r){var o,a=this,s=a.categoryPoints[n],l=a.seriesPoints[r];s||(a.categoryPoints[n]=s=[]),l||(a.seriesPoints[r]=l=[]),a.updateRange(e.valueFields,n,i),o=a.createPoint(e,t,n,i,r),o&&(o.category=t,o.series=i,o.seriesIx=r,o.owner=a,o.dataItem=i.data[n]),a.points.push(o),l.push(o),s.push(o)},evalPointOptions:function(e,t,n,i,r){O(e,{value:t,series:r,dataItem:r.data[i],category:n,index:i},{defaults:r._defaults,excluded:["data","aggregate"]})},updateRange:function(e,t,n){var i=this,r=n.axis,o=e.value,a=i.valueAxisRanges[r];isFinite(o)&&null!==o&&(a=i.valueAxisRanges[r]=a||{min:Vi,max:Ui},a.min=en.min(a.min,o),a.max=en.max(a.max,o))},seriesValueAxis:function(e){var t=this.plotArea,n=e.axis,i=n?t.namedValueAxes[n]:t.valueAxis;if(!i)throw Error("Unable to locate value axis with name "+n);return i},reflow:function(e){var t,n,i,r,o=this,a=0,s=o.categorySlots=[],l=o.points,d=o.categoryAxis;o.traverseDataPoints(function(e,c,u,p){t=o.pointValue(e),n=o.seriesValueAxis(p),i=o.categoryAxisCrossingValue(n),r=l[a++],r&&r.plotValue&&(t=r.plotValue);var f=o.categorySlot(d,u,n),h=o.valueSlot(n,t,i),g=o.pointSlot(f,h),m=n.options.reverse?i>t:t>=i;r&&(r.options.aboveAxis=m,o.reflowPoint(r,g)),s[u]||(s[u]=f)}),o.reflowCategories(s),o.box=e},categoryAxisCrossingValue:function(e){var t=this.categoryAxis,n=e.options,i=[].concat(n.axisCrossingValues||n.axisCrossingValue);return i[t.axisIndex||0]||0},reflowPoint:function(e,t){e.reflow(t)},reflowCategories:function(){},pointSlot:function(e,t){var n=this,i=n.options,r=i.invertAxes,o=r?t:e,a=r?e:t;return new vn(o.x1,a.y1,o.x2,a.y2)},valueSlot:function(e,t,n){return e.getSlot(t,n)},categorySlot:function(e,t){return e.getSlot(t)},_traverseDataPoints:function(e){var t,n,i,r,o,a,s,l,d,c,u,p=this,f=p.options,h=f.series,g=p.plotArea,m=h.length;for(n=0;m>n;n++)for(o=h[n],a=g.seriesCategoryAxis(o),s=a.options.categories||[],l=o.data,d=l.length,c=0;d>c;c++)i=$.current.bindPoint(o,c),u=i.fields.category,t=u?U(u,s):c,r=s[t],e(i,r,t,o,n)},traverseDataPoints:function(e){var t,n,i,r,o,a=this,s=a.options,l=s.series,d=a.categoryAxis.options.categories||[],c=f(l),u=l.length;for(t=0;c>t;t++)for(n=0;u>n;n++)o=l[n],r=d[t],i=$.current.bindPoint(o,t),e(i,r,t,o,n)},formatPointValue:function(e,t){return Bn(t,e.value)},pointValue:function(e){return e.valueFields.value}}),lt=st.extend({init:function(e,t){var n=this;n._groupTotals={},n._groups=[],st.fn.init.call(n,e,t)},render:function(){var e=this;st.fn.render.apply(e),e.computeAxisRanges()},pointType:function(){return at},clusterType:function(){return it},stackType:function(){return rt},createPoint:function(e,n,i,r){var o,a,s,l,d,c,u=this,p=e.valueFields.value,f=u.options,h=u.children,g=u.options.isStacked,m=dn({},r.labels),v=u.pointType(),_=u.clusterType(),b=u.stackType();return g&&m.position==rr&&(m.position=Bi),a=dn({vertical:!f.invertAxes,overlay:r.overlay,labels:m,isStacked:g},r,{color:e.fields.color||t,notes:{label:{text:e.fields.noteText}}}),0>p&&a.negativeColor&&(a.color=a.negativeColor),u.evalPointOptions(a,p,n,i,r),o=new v(p,a),s=h[i],s||(s=new _({vertical:f.invertAxes,gap:f.gap,spacing:f.spacing}),u.append(s)),g?(c=u.getStackWrap(r,s),0===c.children.length?(l=new b({vertical:!f.invertAxes}),d=new b({vertical:!f.invertAxes,isReversed:!0}),c.append(l,d)):(l=c.children[0],d=c.children[1]),p>0?l.append(o):d.append(o)):s.append(o),o},getStackWrap:function(e,t){var n,i,r=t.children,o=e.stack,a=r.length;if(typeof o===yr){for(i=0;a>i;i++)if(r[i]._stackGroup===o){n=r[i];break}}else n=r[0];return n||(n=new bn,n._stackGroup=o,t.append(n)),n},updateRange:function(e,t,n){var i,r=this,o=e.value,a=r.options.isStacked;zn(o)&&(a?(i=r.groupTotals(n.stack),p(o>0?i.positive:i.negative,t,o)):st.fn.updateRange.apply(r,arguments))},computeAxisRanges:function(){var e,t,n=this,o=n.options.isStacked;o&&(e=n.options.series[0].axis,t=n.categoryTotals(),n.valueAxisRanges[e]={min:i(t.negative.concat(0)),max:r(t.positive.concat(0))})},seriesValueAxis:function(e){var t=this,n=t.options;return st.fn.seriesValueAxis.call(t,n.isStacked?t.options.series[0]:e)},valueSlot:function(e,t,n){return e.getSlot(t,this.options.isStacked?0:n)},categorySlot:function(e,t,n){var i,r,o=this,a=o.options,s=e.getSlot(t);return a.isStacked&&(r=n.getSlot(0,0),i=a.invertAxes?Wr:jr,s[i+1]=s[i+2]=r[i+1]),s},reflow:function(e){var t=this;t.setStacksDirection(),st.fn.reflow.call(t,e)},setStacksDirection:function(){var e,t,n,i,r,o,a,s,l,d=this,c=d.options,u=c.series,p=f(u),h=d.children,g=u.length;for(t=0;g>t;t++)for(n=u[t],i=d.seriesValueAxis(n),e=0;p>e;e++)r=h[e],o=d.getStackWrap(n,r),a=o.children,s=a[0],l=a[1],s&&l&&(s.options.isReversed=i.options.reverse,l.options.isReversed=!i.options.reverse)},reflowCategories:function(e){var t,n=this,i=n.children,r=i.length;for(t=0;r>t;t++)i[t].reflow(e[t])},groupTotals:function(e){var t,n,i=this;return t=typeof e===yr?e:i._groups[0]||"default",n=i._groupTotals[t],n||(n=i._groupTotals[t]={positive:[],negative:[]},i._groups.push(t)),n},categoryTotals:function(){var e,t,n,i=this,r=i._groups,o=i._groupTotals,a={positive:[],negative:[]},s=r.length;for(n=0;s>n;n++)e=r[n],t=o[e],Pn(a.positive,t.positive),Pn(a.negative,t.negative);return a}}),dt=st.extend({init:function(e,t){var n=this;n.wrapData(t),st.fn.init.call(n,e,t)},wrapData:function(e){var t,n,i,r=e.series;for(t=0;t<r.length;t++)i=r[t],n=i.data,n&&!Jt(n[0])&&typeof n[0]!=nr&&(i.data=[n])},reflowCategories:function(e){var t,n=this,i=n.children,r=i.length;for(t=0;r>t;t++)i[t].reflow(e[t])},createPoint:function(e,t,n,i){var r,o,a,s=this,l=e.valueFields,d=s.options,c=s.children;return o=dn({},{vertical:!d.invertAxes,overlay:i.overlay,categoryIx:n,invertAxes:d.invertAxes},i,{notes:{label:{text:e.fields.noteText}}}),s.evalPointOptions(o,l,t,n,i),r=new ct(l,o),a=c[n],a||(a=new it({vertical:d.invertAxes,gap:d.gap,spacing:d.spacing}),s.append(a)),a.append(r),r},updateRange:function(e,t,n){var i=this,r=n.axis,o=e.current,a=e.target,s=i.valueAxisRanges[r];zn(o)&&!isNaN(o)&&zn(a&&!isNaN(a))&&(s=i.valueAxisRanges[r]=s||{min:Vi,max:Ui},s.min=en.min.apply(en,[s.min,o,a]),s.max=en.max.apply(en,[s.max,o,a]))},formatPointValue:function(e,t){return Bn(t,e.value.current,e.value.target)},pointValue:function(e){return e.valueFields.current}}),ct=bn.extend({init:function(e,t){var n=this;bn.fn.init.call(n,t),n.value=e,n.options.id=Wn(),n.enableDiscovery(),n.render()},options:{color:Ur,border:{width:1},vertical:!1,animation:{type:Xn},opacity:1,target:{shape:"",border:{width:0,color:"green"},line:{width:2}},tooltip:{format:"Current: {0}</br>Target: {1}"}},render:function(){var e=this,t=e.options;zn(e.value.target)&&(e.target=new ut({id:e.options.id,type:t.target.shape,background:t.target.color||t.color,opacity:t.opacity,zIndex:t.zIndex,border:t.target.border,vAlign:Fr,align:cr}),e.append(e.target)),e.creteNote()},creteNote:function(){var e,t=this,n=t.options.notes,i=n.label.text;n.visible&&zn(i)&&null!==i&&(n.label.template?(e=pn(n.label.template),i=e({dataItem:t.dataItem,category:t.category,value:t.value,series:t.series})):n.label.format&&(i=Bn(n.label.format,i)),t.note=new kn(dn({},n,{label:{text:i}})),t.append(t.note))},reflow:function(e){var t=this,n=t.options,i=t.owner,r=t.target,o=n.invertAxes,a=i.seriesValueAxis(t.options),s=i.categorySlot(i.categoryAxis,n.categoryIx,a),l=i.valueSlot(a,t.value.target,t.value.target),d=o?l:s,c=o?s:l,u=new vn(d.x1,c.y1,d.x2,c.y2);r&&(r.options.height=o?u.height():n.target.line.width,r.options.width=o?n.target.line.width:u.width(),r.reflow(u)),t.note&&t.note.reflow(e),t.box=e},getViewElements:function(e){var t=this,n=t.options,i=n.vertical,r=n.border.width>0?{stroke:n.border.color||n.color,strokeWidth:n.border.width,dashType:n.border.dashType}:{},o=t.box,a=dn({id:n.id,fill:n.color,fillOpacity:n.opacity,strokeOpacity:n.opacity,vertical:n.vertical,aboveAxis:n.aboveAxis,animation:n.animation,data:{modelId:n.modelId}},r),s=[];return o.width()>0&&o.height()>0&&(n.overlay&&(a.overlay=dn({rotation:i?0:90},n.overlay)),s.push(e.createRect(o,a))),Pn(s,bn.fn.getViewElements.call(t,e)),s},tooltipAnchor:function(e,t){var n,i,r=this,o=r.options,a=r.box,s=o.vertical,l=o.aboveAxis;return s?(n=a.x2+Pr,i=l?a.y1:a.y2-t):o.isStacked?(n=l?a.x2-e:a.x1,i=a.y1-t-Pr):(n=l?a.x2+Pr:a.x1-e-Pr,i=a.y1),new Cn(n,i)},highlightOverlay:function(e,t){var n=this,i=n.box;return t=dn({data:{modelId:n.options.modelId}},t),t.id=null,e.createRect(i,t)},formatValue:function(e){var t=this;return t.owner.formatPointValue(t,e)}}),dn(ct.fn,ot),ut=Dn.extend(),dn(ut.fn,ot),pt=bn.extend({init:function(e,t){var n,i=this;i.value=e,bn.fn.init.call(i,t),t=i.options,t.id=Wn(),n=t.markers.border,zn(n.color)||(n.color=t.color),i.enableDiscovery()},options:{aboveAxis:!0,vertical:!0,markers:{visible:!0,background:Ur,size:Oi,type:di,border:{width:2},opacity:1},labels:{visible:!1,position:qn,margin:Mn(3),padding:Mn(4),animation:{type:Ai,delay:Ii}},notes:{label:{}},highlight:{markers:{border:{}}}},render:function(){var e,t=this,n=t.options,i=n.markers,r=n.labels,o=i.background,a=dn({},i.border),s=t.value;t._rendered||(t._rendered=!0,zn(a.color)||(a.color=new wn(o).brightness(Jn).toHex()),t.marker=new Dn({id:t.options.id,visible:i.visible&&i.size,type:i.type,width:i.size,height:i.size,rotation:i.rotation,background:o,border:a,opacity:i.opacity,zIndex:i.zIndex,animation:i.animation}),t.append(t.marker),r.visible&&(r.template?(e=pn(r.template),s=e({dataItem:t.dataItem,category:t.category,value:t.value,series:t.series})):r.format&&(s=t.formatValue(r.format)),t.label=new En(s,dn({id:Wn(),align:si,vAlign:si,margin:{left:5,right:5}},r)),t.append(t.label)),t.creteNote())},creteNote:function(){var e,t=this,n=t.options.notes,i=n.label.text;n.visible&&zn(i)&&null!==i&&(n.label.template?(e=pn(n.label.template),i=e({dataItem:t.dataItem,category:t.category,value:t.value,series:t.series})):n.label.format&&(i=Bn(n.label.format,i)),t.note=new kn(dn({},n,{label:{text:i}})),t.append(t.note))},markerBox:function(){return this.marker.box},reflow:function(e){var t,n,i,r=this,o=r.options,a=o.vertical,s=o.aboveAxis;r.render(),r.box=e,t=e.clone(),a?s?t.y1-=t.height():t.y2+=t.height():s?t.x1+=t.width():t.x2-=t.width(),r.marker.reflow(t),r.reflowLabel(t),r.note&&(r.marker.options.visible?n=r.marker.box:(i=r.marker.box.center(),n=vn(i.x,i.y,i.x,i.y)),r.note.reflow(n))},reflowLabel:function(e){var t=this,n=t.options,i=t.marker,r=t.label,o=n.labels.position;r&&(o=o===qn?Fr:o,o=o===Zn?ni:o,r.reflow(e),r.box.alignTo(i.box,o),r.reflow(r.box))},highlightOverlay:function(e,t){var n=this,i=n.options.highlight,r=i.markers,o=n.marker,a=o.options.border.color;return t=dn({data:{modelId:n.options.modelId}},t,{fill:r.color||a,stroke:r.border.color,strokeWidth:r.border.width,strokeOpacity:r.border.opacity||0,fillOpacity:r.opacity||1,visible:r.visible,id:null}),o.getViewElements(e,t)[0]},tooltipAnchor:function(e,t){var n=this,i=n.marker.box,r=n.options.aboveAxis;return Cn(i.x2+Pr,r?i.y1-t:i.y2)},formatValue:function(e){var t=this;return t.owner.formatPointValue(t,e)}}),dn(pt.fn,ot),ft=pt.extend({init:function(e,t){var n=this;pt.fn.init.call(n,e,t),n.category=e.category},options:{labels:{position:si},highlight:{opacity:1,border:{width:1,opacity:1}}},highlightOverlay:function(e){var t=this,n=t.options,i=n.highlight,r=i.border.width,o=n.markers,a=t.box.center(),s=o.size/2-r/2,l=i.border.color||new wn(o.background).brightness(Jn).toHex();return e.createCircle(a,s,{id:null,data:{modelId:t.options.modelId},stroke:l,strokeWidth:r,strokeOpacity:i.border.opacity})},toggleHighlight:function(e){var n,i=this,r=i.options.highlight.opacity;i.highlighted=!i.highlighted,n=i.marker.getViewElements(e,{fillOpacity:i.highlighted?r:t})[0],n.refresh(Rn(this.options.id))}}),ht=bn.extend({init:function(e,t,n){var i=this;bn.fn.init.call(i),i.linePoints=e,i.series=t,i.seriesIx=n,i.options.id=Wn(),i.enableDiscovery()},options:{closed:!1},points:function(e){var t,n,i=this,r=i.linePoints.concat(e||[]),o=[],a=r.length;for(t=0;a>t;t++)n=r[t].markerBox().center(),o.push(Cn(n.x,n.y));return o},getViewElements:function(e){var t=this,n=t.options,i=t.series,r=i._defaults,o=i.color;return bn.fn.getViewElements.call(t,e),un(o)&&r&&(o=r.color),[e.createPolyline(t.points(),n.closed,{id:n.id,stroke:o,strokeWidth:i.width,strokeOpacity:i.opacity,fill:"",dashType:i.dashType,data:{modelId:n.modelId},zIndex:-1})]},aliasFor:function(e,t){var n=this,i=n.seriesIx;return n.parent.getNearestPoint(t.x,t.y,i)}}),gt={renderSegments:function(){var e,t,n,i,r,o,a,s=this,l=s.options,d=l.series,c=s.seriesPoints,u=c.length,p=[];for(t=0;u>t;t++){for(e=d[t],n=s.sortPoints(c[t]),a=n.length,i=[],o=0;a>o;o++)r=n[o],r?i.push(r):s.seriesMissingValues(e)!==zi&&(i.length>1&&p.push(s.createSegment(i,e,t,Nn(p))),i=[]);i.length>1&&p.push(s.createSegment(i,e,t,Nn(p)))}s._segments=p,s.append.apply(s,p)},sortPoints:function(e){return e},seriesMissingValues:function(e){var t=e.missingValues,n=!t&&this.options.isStacked;return n?qr:t||zi},createSegment:function(e,t,n){return new ht(e,t,n)},getNearestPoint:function(e,t,n){var i,r,o,a,s,l=this,d=l.options.invertAxes,c=d?jr:Wr,u=d?t:e,p=l.seriesPoints[n],f=Vi,h=p.length;for(s=0;h>s;s++)i=p[s],i&&zn(i.value)&&null!==i.value&&(r=i.box,o=en.abs(r.center()[c]-u),f>o&&(a=i,f=o));return a}},mt=st.extend({init:function(e,t){var n=this;n._stackAxisRange={min:Vi,max:Ui},n._categoryTotals=[],n.enableDiscovery(),st.fn.init.call(n,e,t)},render:function(){var e=this;st.fn.render.apply(e),e.computeAxisRanges(),e.renderSegments()},createPoint:function(e,t,n,i){var r,o,a,s=this,l=e.valueFields.value,d=s.options,c=d.isStacked,u=s.categoryPoints[n],p=s.seriesMissingValues(i),f=0,h=e.fields;if(!zn(l)||null===l){if(p!==qr)return null;l=0}return a=dn({vertical:!d.invertAxes},i,{color:h.color,notes:{label:{text:e.fields.noteText}}}),s.evalPointOptions(a,l,t,n,i),o=new pt(l,a),c&&(r=I(u),r&&(f=r.plotValue),o.plotValue=l+f),s.append(o),o},updateRange:function(e,t){var n,i=this,r=i.options.isStacked,a=e.value,s=i._stackAxisRange,l=i._categoryTotals;zn(a)&&(r?(p(l,t,a),n=o(l),s.min=en.min(s.min,n.min),s.max=en.max(s.max,n.max)):st.fn.updateRange.apply(i,arguments))},computeAxisRanges:function(){var e,t=this,n=t.options.isStacked;n&&(e=t.options.series[0].axis,t.valueAxisRanges[e]=t._stackAxisRange)},getViewElements:function(e){var t=this,n=st.fn.getViewElements.call(t,e),i=e.createGroup({animation:{type:ui}});return i.children=n,[i]}}),dn(mt.fn,gt),vt=ht.extend({init:function(e,t,n,i){var r=this;r.stackPoints=t,ht.fn.init.call(r,e,n,i)},points:function(){var e,t,n=this,i=n.parent,r=i.plotArea,o=i.options.invertAxes,a=i.seriesValueAxis(n.series),s=a.lineBox(),l=r.seriesCategoryAxis(n.series),d=l.lineBox(),c=o?d.x1:d.y1,u=n.stackPoints,p=ht.fn.points.call(n,u),f=o?Wr:jr;return c=D(c,s[f+1],s[f+2]),!n.stackPoints&&p.length>1&&(e=p[0],t=Nn(p),o?(p.unshift(Cn(c,e.y)),p.push(Cn(c,t.y))):(p.unshift(Cn(e.x,c)),p.push(Cn(t.x,c)))),p},getViewElements:function(e){var t,n=this,i=n.series,r=i._defaults,o=i.color,a=ht.fn.points.call(n),s=n.points();return bn.fn.getViewElements.call(n,e),un(o)&&r&&(o=r.color),t=dn({color:o,opacity:i.opacity},i.line),[e.createPolyline(s,!1,{id:n.options.id,fillOpacity:i.opacity,fill:o,stack:i.stack,data:{modelId:n.options.modelId},zIndex:-1}),e.createPolyline(a,!1,{stroke:t.color,strokeWidth:t.width,strokeOpacity:t.opacity,dashType:t.dashType,data:{modelId:n.options.modelId},strokeLineCap:"butt",zIndex:-1,align:!1})]}}),_t=mt.extend({createSegment:function(e,t,n,i){var r,o=this,a=o.options;return a.isStacked&&n>0&&i&&(r=i.linePoints.slice(0).reverse()),new vt(e,r,t,n)},seriesMissingValues:function(e){return e.missingValues||qr}}),bt=bn.extend({init:function(e,t){var n=this;bn.fn.init.call(n,t),n.plotArea=e,n.xAxisRanges={},n.yAxisRanges={},n.points=[],n.seriesPoints=[],n.render()},options:{series:[],tooltip:{format:"{0}, {1}"},labels:{format:"{0}, {1}"}},render:function(){var e=this;e.traverseDataPoints(nn(e.addValue,e))},addValue:function(e,t){var n,i=this,r=e.x,o=e.y,a=t.seriesIx,s=i.seriesPoints[a];i.updateRange(e,t.series),zn(r)&&null!==r&&zn(o)&&null!==o&&(n=i.createPoint(e,t),n&&tn(n,t)),i.points.push(n),s.push(n)},updateRange:function(e,t){var n=this,i=e.x,r=e.y,o=t.xAxis,a=t.yAxis,s=n.xAxisRanges[o],l=n.yAxisRanges[a];zn(i)&&null!==i&&(s=n.xAxisRanges[o]=s||{min:Vi,max:Ui},typeof i===yr&&(i=v(i)),s.min=en.min(s.min,i),s.max=en.max(s.max,i)),zn(r)&&null!==r&&(l=n.yAxisRanges[a]=l||{min:Vi,max:Ui},typeof r===yr&&(r=v(r)),l.min=en.min(l.min,r),l.max=en.max(l.max,r))},evalPointOptions:function(e,t,n){var i=n.series;O(e,{value:t,series:i,dataItem:n.dataItem},{defaults:i._defaults,excluded:["data"]})},createPoint:function(e,t){var n,i,r=this,o=t.series;return i=dn({markers:{opacity:o.opacity},tooltip:{format:r.options.tooltip.format},labels:{format:r.options.labels.format}},o,{color:t.color,notes:{label:{text:t.noteText}}}),r.evalPointOptions(i,e,t),n=new pt(e,i),r.append(n),n},seriesAxes:function(e){var t=this.plotArea,n=e.xAxis,i=n?t.namedXAxes[n]:t.axisX,r=e.yAxis,o=r?t.namedYAxes[r]:t.axisY;if(!i)throw Error("Unable to locate X axis with name "+n);if(!o)throw Error("Unable to locate Y axis with name "+r);return{x:i,y:o}},reflow:function(e){var t,n,i=this,r=i.points,o=0;i.traverseDataPoints(function(e,a){t=r[o++],n=i.seriesAxes(a.series);var s=n.x.getSlot(e.x,e.x),l=n.y.getSlot(e.y,e.y),d=i.pointSlot(s,l);t&&t.reflow(d)}),i.box=e},pointSlot:function(e,t){return new vn(e.x1,t.y1,e.x2,t.y2)},getViewElements:function(e){var t=this,n=bn.fn.getViewElements.call(t,e),i=e.createGroup({animation:{type:ui}});return i.children=n,[i]},traverseDataPoints:function(e){var t,n,i,r,o,a,s,l=this,d=l.options,c=d.series,u=l.seriesPoints;for(n=0;n<c.length;n++)for(i=c[n],r=u[n],r||(u[n]=[]),t=0;t<i.data.length;t++)o=$.current.bindPoint(i,t),a=o.valueFields,s=o.fields,e(a,dn({pointIx:t,series:i,seriesIx:n,dataItem:i.data[t],owner:l},s))},formatPointValue:function(e,t){var n=e.value;return Bn(t,n.x,n.y)}}),wt=bt.extend({render:function(){var e=this;bt.fn.render.call(e),e.renderSegments()}}),dn(wt.fn,gt),yt=bt.extend({options:{tooltip:{format:"{3}"},labels:{format:"{3}"}},addValue:function(e,t){var n,i=this,r=t.series,o=r.negativeValues,a=i.plotArea.options.seriesColors||[],s=!0;n=t.color||r.color||a[t.pointIx%a.length],e.size<0&&(n=o.color||n,s=o.visible),t.color=n,s&&bt.fn.addValue.call(this,e,t)},reflow:function(e){var t=this;t.updateBubblesSize(e),bt.fn.reflow.call(t,e)},createPoint:function(e,t){var n,i,r=this,o=t.series,a=o.data.length,s=t.pointIx*(Ii/a),l={delay:s,duration:Ii-s,type:ii};return i=dn({tooltip:{format:r.options.tooltip.format},labels:{format:r.options.labels.format,animation:l}},o,{color:t.color,markers:{type:di,background:t.color,border:o.border,opacity:o.opacity,animation:l},notes:{label:{text:t.noteText}}}),r.evalPointOptions(i,e,t),n=new ft(e,i),r.append(n),n},updateBubblesSize:function(e){var t,n,i,r,o,a,s,l,d,c,u,p,f,h,g,m,v=this,_=v.options,b=_.series,w=en.min(e.width(),e.height());for(t=0;t<b.length;t++)for(i=b[t],r=v.seriesPoints[t],o=v.maxSize(r),a=i.minSize||en.max(.02*w,10),s=i.maxSize||.2*w,l=a/2,d=s/2,c=en.PI*l*l,u=en.PI*d*d,p=u-c,f=p/o,n=0;n<r.length;n++)h=r[n],g=en.abs(h.value.size)*f,m=en.sqrt((c+g)/en.PI),dn(h.options,{markers:{size:2*m,zIndex:d-m},labels:{zIndex:d-m+1}})},maxSize:function(e){var t,n,i=e.length,r=0;for(t=0;i>t;t++)n=e[t].value.size,r=en.max(r,en.abs(n));return r},getViewElements:function(e){var t=this,n=bn.fn.getViewElements.call(t,e),i=e.createGroup();return i.children=n,[i]},formatPointValue:function(e,t){var n=e.value;return Bn(t,n.x,n.y,n.size,e.category)}}),kt=bn.extend({init:function(e,t){var n=this;bn.fn.init.call(n,t),n.value=e,n.options.id=Wn(),n.enableDiscovery(),n.createNote()},options:{border:{_brightness:.8},line:{width:2},overlay:{gradient:Ei},tooltip:{format:"<table style='text-align: left;'><th colspan='2'>{4:d}</th><tr><td>Open:</td><td>{0:C}</td></tr><tr><td>High:</td><td>{1:C}</td></tr><tr><td>Low:</td><td>{2:C}</td></tr><tr><td>Close:</td><td>{3:C}</td></tr></table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:!0,label:{}}},reflow:function(e){var t,n,i,r=this,o=r.options,a=r.owner,s=r.value,l=a.seriesValueAxis(o),d=[];n=l.getSlot(s.open,s.close),i=l.getSlot(s.low,s.high),n.x1=i.x1=e.x1,n.x2=i.x2=e.x2,r.realBody=n,t=i.center().x,d.push([Cn(t,i.y1),Cn(t,n.y1)]),d.push([Cn(t,n.y2),Cn(t,i.y2)]),r.lowHighLinePoints=d,r.box=i.clone().wrap(n),r.reflowNote()},reflowNote:function(){var e=this;e.note&&e.note.reflow(e.box)},createNote:function(){var e,t=this,n=t.options.notes,i=n.label.text;n.visible&&zn(i)&&null!==i&&(n.label.template?(e=pn(n.label.template),i=e({dataItem:t.dataItem,category:t.category,value:t.value,series:t.series})):n.label.format&&(i=Bn(n.label.format,i)),t.note=new kn(dn({},n,{label:{text:i}})),t.append(t.note))},getViewElements:function(e){var t=this,n=t.options,i=[],r=n.border.width>0?{stroke:t.getBorderColor(),strokeWidth:n.border.width,dashType:n.border.dashType,strokeOpacity:jn(n.border.opacity,n.opacity)}:{},o=dn({fill:n.color,fillOpacity:n.opacity},r),a={strokeOpacity:jn(n.line.opacity,n.opacity),strokeWidth:n.line.width,stroke:n.line.color||n.color,dashType:n.line.dashType,strokeLineCap:"butt"},s=e.createGroup({animation:{type:ui}});return n.overlay&&(o.overlay=dn({rotation:0},n.overlay)),i.push(e.createRect(t.realBody,o)),i.push(e.createPolyline(t.lowHighLinePoints[0],!1,a)),i.push(e.createPolyline(t.lowHighLinePoints[1],!1,a)),i.push(t.createOverlayRect(e,n)),Pn(i,bn.fn.getViewElements.call(t,e)),s.children=i,[s]},getBorderColor:function(){var e=this,t=e.options,n=t.border,i=n.color;return zn(i)||(i=new wn(t.color).brightness(n._brightness).toHex()),i},createOverlayRect:function(e,t){return e.createRect(this.box,{data:{modelId:t.modelId},fill:"#fff",fillOpacity:0})},highlightOverlay:function(e,t){var n=this,i=n.options,r=i.highlight,o=r.border,a=n.getBorderColor(),s=r.line,l={data:{modelId:i.modelId}},d=dn({},l,t,{stroke:a,strokeOpacity:o.opacity,strokeWidth:o.width}),c=dn({},l,{stroke:s.color||a,strokeWidth:s.width,strokeOpacity:s.opacity,strokeLineCap:"butt"}),u=e.createGroup();return u.children.push(e.createRect(n.realBody,d)),u.children.push(e.createPolyline(n.lowHighLinePoints[0],!1,c)),u.children.push(e.createPolyline(n.lowHighLinePoints[1],!1,c)),u},tooltipAnchor:function(){var e=this,t=e.box;return new Cn(t.x2+Pr,t.y1+Pr)},formatValue:function(e){var t=this;return t.owner.formatPointValue(t,e)}}),dn(kt.fn,ot),xt=st.extend({options:{},reflowCategories:function(e){var t,n=this,i=n.children,r=i.length;for(t=0;r>t;t++)i[t].reflow(e[t])},addValue:function(e,t,n,i,r){var o,a,s=this,l=s.options,d=e.valueFields,c=s.children,u=e.fields.color||i.color,p=this.splitValue(d),f=R(p),h=s.categoryPoints[n],g=i.data[n];h||(s.categoryPoints[n]=h=[]),f&&(i.type==oi&&d.open>d.close&&(u=e.fields.downColor||i.downColor||i.color),o=s.createPoint(e,t,n,dn({},i,{color:u}))),a=c[n],a||(a=new it({vertical:l.invertAxes,gap:l.gap,spacing:l.spacing}),s.append(a)),o&&(s.updateRange(d,n,i),a.append(o),o.categoryIx=n,o.category=t,o.series=i,o.seriesIx=r,o.owner=s,o.dataItem=g),s.points.push(o),h.push(o)},pointType:function(){return kt},createPoint:function(e,t,n,i){var r=this,o=e.valueFields,a=dn({},i,{notes:{label:{text:e.fields.noteText}}}),s=r.pointType();return r.evalPointOptions(a,o,t,n,i),new s(o,a)},splitValue:function(e){return[e.low,e.open,e.close,e.high]},updateRange:function(e,t,n){var i=this,r=n.axis,o=i.valueAxisRanges[r],a=i.splitValue(e);o=i.valueAxisRanges[r]=o||{min:Vi,max:Ui},o=i.valueAxisRanges[r]={min:en.min.apply(en,a.concat([o.min])),max:en.max.apply(en,a.concat([o.max]))}},formatPointValue:function(e,t){var n=e.value;return Bn(t,n.open,n.high,n.low,n.close,e.category)}}),Ct=kt.extend({reflow:function(e){var t,n,i,r,o=this,a=o.options,s=o.owner,l=o.value,d=s.seriesValueAxis(a),c=[],u=[],p=[];r=d.getSlot(l.low,l.high),n=d.getSlot(l.open,l.open),i=d.getSlot(l.close,l.close),n.x1=i.x1=r.x1=e.x1,n.x2=i.x2=r.x2=e.x2,t=r.center().x,c.push(Cn(n.x1,n.y1)),c.push(Cn(t,n.y1)),u.push(Cn(t,i.y1)),u.push(Cn(i.x2,i.y1)),p.push(Cn(t,r.y1)),p.push(Cn(t,r.y2)),o.oPoints=c,o.cPoints=u,o.lhPoints=p,o.box=r.clone().wrap(n.clone().wrap(i)),o.reflowNote()},getViewElements:function(e){var t=this,n=t.options,i=[],r={strokeOpacity:n.opacity,zIndex:-1,strokeWidth:n.width,stroke:n.color,dashType:n.dashType},o=e.createGroup({animation:{type:ui}});return i.push(t.createOverlayRect(e,n)),i.push(e.createPolyline(t.oPoints,!0,r)),i.push(e.createPolyline(t.cPoints,!0,r)),i.push(e.createPolyline(t.lhPoints,!0,r)),Pn(i,bn.fn.getViewElements.call(t,e)),o.children=i,[o]},highlightOverlay:function(e){var t=this,n=t.options,i=n.highlight,r={data:{modelId:n.modelId}},o=dn(r,{strokeWidth:i.line.width,strokeOpacity:i.line.opacity,stroke:i.line.color||t.color}),a=e.createGroup();return a.children.push(e.createPolyline(t.oPoints,!0,o)),a.children.push(e.createPolyline(t.cPoints,!0,o)),a.children.push(e.createPolyline(t.lhPoints,!0,o)),a}}),Tt=xt.extend({pointType:function(){return Ct}}),St=bn.extend({init:function(e,t,n){var i=this;i.value=e,i.sector=t,bn.fn.init.call(i,n),i.options.id=Wn(),i.enableDiscovery()},options:{color:Ur,overlay:{gradient:ur},border:{width:.5},labels:{visible:!1,distance:35,font:bi,margin:Mn(.5),align:di,zIndex:1,position:rr},animation:{type:ar},highlight:{visible:!0,border:{width:1}},visible:!0},render:function(){var e,t=this,n=t.options,i=n.labels,r=t.value;t._rendered||t.visible===!1||(t._rendered=!0,i.template?(e=pn(i.template),r=e({dataItem:t.dataItem,category:t.category,value:t.value,series:t.series,percentage:t.percentage})):i.format&&(r=Bn(i.format,r)),i.visible&&r&&(t.label=new En(r,dn({},i,{id:Wn(),align:si,vAlign:"",animation:{type:Ai,delay:t.animationDelay}})),t.append(t.label)))},reflow:function(e){var t=this;t.render(),t.box=e,t.reflowLabel()},reflowLabel:function(){var e,t,n,i,r=this,o=r.sector.clone(),a=r.options,s=r.label,l=a.labels,d=l.distance,c=o.middle();s&&(i=s.box.height(),n=s.box.width(),l.position==si?(o.r=en.abs((o.r-i)/2)+i,e=o.point(c),s.reflow(vn(e.x,e.y-i/2,e.x,e.y))):l.position==Bi?(o.r=o.r-i/2,e=o.point(c),s.reflow(vn(e.x,e.y-i/2,e.x,e.y))):(e=o.clone().expand(d).point(c),e.x>=o.c.x?(t=e.x+n,s.orientation=cr):(t=e.x-n,s.orientation=Hi),s.reflow(vn(t,e.y-i,e.x,e.y))))},getViewElements:function(e){var t=this,n=t.sector,i=t.options,r=i.border||{},o=r.width>0?{stroke:r.color,strokeWidth:r.width,strokeOpacity:r.opacity,dashType:r.dashType}:{},a=[],s=i.overlay;return s&&(s=dn({},i.overlay,{r:n.r,ir:n.ir,cx:n.c.x,cy:n.c.y,bbox:n.getBBox()})),t.value&&a.push(t.createSegment(e,n,dn({id:i.id,fill:i.color,overlay:s,fillOpacity:i.opacity,strokeOpacity:i.opacity,animation:dn(i.animation,{delay:t.animationDelay}),data:{modelId:i.modelId},zIndex:i.zIndex,singleSegment:1===(t.options.data||[]).length},o))),Pn(a,bn.fn.getViewElements.call(t,e)),a},createSegment:function(e,t,n){return n.singleSegment?e.createCircle(t.c,t.r,n):e.createSector(t,n)
},highlightOverlay:function(e,t){var n,i=this,r=i.options.highlight||{},o=r.border||{},a=i.options.id+or;return t=dn({},t,{id:a}),0!==i.value&&(n=i.createSegment(e,i.sector,dn({},t,{fill:r.color,fillOpacity:r.opacity,strokeOpacity:o.opacity,strokeWidth:o.width,stroke:o.color,id:null,data:{modelId:i.options.modelId}}))),n},tooltipAnchor:function(e,t){var n=this,i=n.sector.adjacentBox(Pr,e,t);return new Cn(i.x1,i.y1)},formatValue:function(e){var t=this;return t.owner.formatPointValue(t,e)}}),dn(St.fn,ot),Dt=bn.extend({init:function(e,t){var n=this;bn.fn.init.call(n,t),n.plotArea=e,n.points=[],n.legendItems=[],n.render()},options:{startAngle:90,connectors:{width:1,color:"#939393",padding:4},inactiveItems:{markers:{},labels:{}}},render:function(){var e=this;e.traverseDataPoints(nn(e.addValue,e))},traverseDataPoints:function(e){var t,n,i,r,o,a,s,l,d,c,u,p,f=this,h=f.options,g=f.plotArea.options.seriesColors||[],m=g.length,v=h.series,_=v.length,b=Wn(),w=0;for(r=0;_>r;r++){for(t=v[r],a=t.data,c=f.pointsTotal(t),s=360/c,u=zn(t.startAngle)?t.startAngle:h.startAngle,r!=_-1&&t.labels.position==rr&&(t.labels.position=si),p=0;p<a.length;p++)n=$.current.bindPoint(t,p),l=n.valueFields.value,i=n.fields,o=Vn(l*s,yi),d=1!=a.length&&!!i.explode,un(t.color)||(t.color=i.color||g[p%m]),e(l,new Sn(null,0,0,u,o),{owner:f,category:i.category||"",index:w,series:t,seriesIx:r,dataItem:a[p],percentage:l/c,explode:d,visibleInLegend:i.visibleInLegend,visible:i.visible,overlay:{id:b+r},zIndex:_-r,animationDelay:f.animationDelay(p,r,_)}),n.fields.visible!==!1&&(u+=o),w++;w=0}},evalSegmentOptions:function(e,t,n){var i=n.series;O(e,{value:t,series:i,dataItem:n.dataItem,category:n.category,percentage:n.percentage},{defaults:i._defaults,excluded:["data"]})},addValue:function(e,t,n){var i,r,o=this;o.createLegendItem(e,n),n.visible!==!1&&(r=dn({},n.series,{index:n.index}),o.evalSegmentOptions(r,e,n),i=new St(e,t,r),tn(i,n),o.append(i),o.points.push(i))},createLegendItem:function(e,t){var n,i,r,o,a=this,s=(a.options.legend||{}).labels||{},l=(a.options.legend||{}).inactiveItems||{};t&&t.visibleInLegend!==!1&&(n=t.category||"",(s||{}).template&&(i=pn(s.template),n=i({text:n,series:t.series,dataItem:t.dataItem,percentage:t.percentage,value:e})),t.visible===!1?(r=(l.markers||{}).color,o=(l.labels||{}).color):(r=(t.series||{}).color,o=s.color),n&&a.legendItems.push({pointIndex:t.index,text:n,series:t.series,markerColor:r,labelColor:o}))},pointsTotal:function(e){var t,n,i,r=e.data,o=r.length,a=0;for(n=0;o>n;n++)i=$.current.bindPoint(e,n),t=i.valueFields.value,"string"==typeof t&&(t=parseFloat(t)),t&&i.fields.visible!==!1&&(a+=t);return a},reflow:function(e){var t,n,i,r,o,a,s,l,d=this,c=d.options,u=e.clone(),p=5,f=en.min(u.width(),u.height()),h=f/2,g=f-.85*f,m=jn(c.padding,g),v=vn(u.x1,u.y1,u.x1+f,u.y1+f),_=v.center(),b=d.seriesConfigs||[],w=u.center(),y=d.points,k=y.length,x=c.series.length,C=[],T=[];for(m=m>h-p?h-p:m,v.translate(w.x-_.x,w.y-_.y),a=h-m,l=Cn(a+v.x1+m,a+v.y1+m),s=0;k>s;s++)r=y[s],o=r.sector,o.r=a,o.c=l,n=r.seriesIx,b.length&&(t=b[n],o.ir=t.ir,o.r=t.r),n==x-1&&r.explode&&(o.c=o.clone().radius(.15*o.r).point(o.middle())),r.reflow(v),i=r.label,i&&i.options.position===rr&&n==x-1&&(i.orientation===cr?T.push(i):C.push(i));C.length>0&&(C.sort(d.labelComparator(!0)),d.leftLabelsReflow(C)),T.length>0&&(T.sort(d.labelComparator(!1)),d.rightLabelsReflow(T)),d.box=v},leftLabelsReflow:function(e){var t=this,n=t.distanceBetweenLabels(e);t.distributeLabels(n,e)},rightLabelsReflow:function(e){var t=this,n=t.distanceBetweenLabels(e);t.distributeLabels(n,e)},distanceBetweenLabels:function(e){var t,n,i,r=this,o=r.points,a=o[o.length-1],s=a.sector,l=e[0].box,d=e.length-1,c=s.r+a.options.labels.distance,u=[];for(n=Vn(l.y1-(s.c.y-c-l.height()-l.height()/2)),u.push(n),i=0;d>i;i++)l=e[i].box,t=e[i+1].box,n=Vn(t.y1-l.y2),u.push(n);return n=Vn(s.c.y+c-e[d].box.y2-e[d].box.height()/2),u.push(n),u},distributeLabels:function(e,t){var n,i,r,o,a=this,s=e.length;for(o=0;s>o;o++)for(i=r=o,n=-e[o];n>0&&(i>=0||s>r);)n=a._takeDistance(e,o,--i,n),n=a._takeDistance(e,o,++r,n);a.reflowLabels(e,t)},_takeDistance:function(e,t,n,i){if(e[n]>0){var r=en.min(e[n],i);i-=r,e[n]-=r,e[t]+=r}return i},reflowLabels:function(e,t){var n,i,r,o,a=this,s=a.points,l=s[s.length-1],d=l.sector,c=t.length,u=l.options.labels,p=u.distance,f=d.c.y-(d.r+p)-t[0].box.height();for(e[0]+=2,o=0;c>o;o++)n=t[o],f+=e[o],r=n.box,i=a.hAlignLabel(r.x2,d.clone().expand(p),f,f+r.height(),n.orientation==cr),n.orientation==cr?(u.align!==di&&(i=d.r+d.c.x+p),n.reflow(new vn(i+r.width(),f,i,f))):(u.align!==di&&(i=d.c.x-d.r-p),n.reflow(new vn(i-r.width(),f,i,f))),f+=r.height()},getViewElements:function(e){var t,n,i,r,o,s,l,d,c,u,p,f,h,g,m,v=this,_=v.options,b=_.connectors,w=v.points,y=[],k=w.length,x=4;for(d=0;k>d;d++)o=w[d],n=o.sector,i=n.middle(),l=o.label,s={seriesId:o.seriesIx},l&&(r=[],l.options.position===rr&&0!==o.value&&(f=l.box,h=n.c,g=n.point(i),m=Cn(f.x1,f.center().y),g=n.clone().expand(b.padding).point(i),r.push(g),l.orientation==cr?(u=Cn(f.x1-b.padding,f.center().y),p=a(h,g,m,u),m=Cn(u.x-x,u.y),p=p||m,p.x=en.min(p.x,m.x),v.pointInCircle(p,n.c,n.r+x)||p.x<n.c.x?(c=n.c.x+n.r+x,o.options.labels.align!==fi?c<m.x?r.push(Cn(c,g.y)):r.push(Cn(g.x+2*x,g.y)):r.push(Cn(c,g.y)),r.push(Cn(m.x,u.y))):(p.y=u.y,r.push(p))):(u=Cn(f.x2+b.padding,f.center().y),p=a(h,g,m,u),m=Cn(u.x+x,u.y),p=p||m,p.x=en.max(p.x,m.x),v.pointInCircle(p,n.c,n.r+x)||p.x>n.c.x?(c=n.c.x-n.r-x,o.options.labels.align!==fi?c>m.x?r.push(Cn(c,g.y)):r.push(Cn(g.x-2*x,g.y)):r.push(Cn(c,g.y)),r.push(Cn(m.x,u.y))):(p.y=u.y,r.push(p))),r.push(u),t=e.createPolyline(r,!1,{id:Wn(),stroke:b.color,strokeWidth:b.width,animation:{type:Ai,delay:o.animationDelay},data:{modelId:o.options.modelId}}),y.push(t)));return Pn(y,bn.fn.getViewElements.call(v,e)),y},labelComparator:function(e){return e=e?-1:1,function(t,n){return t=(t.parent.sector.middle()+270)%360,n=(n.parent.sector.middle()+270)%360,(t-n)*e}},hAlignLabel:function(e,t,n,i,r){var o=t.c.x,a=t.c.y,s=t.r,l=en.min(en.abs(a-n),en.abs(a-i));return l>s?e:o+en.sqrt(s*s-l*l)*(r?1:-1)},pointInCircle:function(e,t,n){return h(t.x-e.x)+h(t.y-e.y)<h(n)},formatPointValue:function(e,t){return Bn(t,e.value)},animationDelay:function(e){return e*sr}}),At=St.extend({options:{overlay:{gradient:pr},labels:{position:si},animation:{type:ar}},reflowLabel:function(){var e,t,n=this,i=n.sector.clone(),r=n.options,o=n.label,a=r.labels,s=i.middle();o&&(t=o.box.height(),a.position==si?(i.r-=(i.r-i.ir)/2,e=i.point(s),o.reflow(new vn(e.x,e.y-t/2,e.x,e.y))):St.fn.reflowLabel.call(n))},createSegment:function(e,t,n){return e.createRing(t,n)}}),dn(At.fn,ot),Et=Dt.extend({options:{startAngle:90,connectors:{width:1,color:"#939393",padding:4}},addValue:function(e,t,n){var i,r,o=this;o.createLegendItem(e,n),e&&n.visible!==!1&&(r=dn({},n.series),o.evalSegmentOptions(r,e,n),i=new At(e,t,r),tn(i,n),o.append(i),o.points.push(i))},reflow:function(e){var t,n,i,r,o,a,s=this,l=s.options,d=e.clone(),c=5,u=en.min(d.width(),d.height()),p=u/2,f=u-.85*u,h=jn(l.padding,f),g=l.series,m=g.length,v=0,_=0,b=0,w=0;for(s.seriesConfigs=[],h=h>p-c?p-c:h,i=p-h,o=0;m>o;o++)t=g[o],0===o&&zn(t.holeSize)&&(n=t.holeSize,i-=t.holeSize),zn(t.size)?i-=t.size:v++,zn(t.margin)&&o!=m-1&&(i-=t.margin);for(zn(n)||(w=(p-h)/(m+.75),n=.75*w,i-=n),b=n,o=0;m>o;o++)t=g[o],r=jn(t.size,i/v),b+=_,a=b+r,s.seriesConfigs.push({ir:b,r:a}),_=t.margin||0,b=a;Dt.fn.reflow.call(s,e)},animationDelay:function(e,t,n){return e*Ci+Ii*(t+1)/(n+1)}}),Ft=_n.extend({init:function(e){var t=this;_n.fn.init.call(t,e),e=t.options,e.id=Wn(),t.title=Fn.buildTitle(e.title,t,Ft.fn.options.title),t.content=new bn,t.append(t.content),t.axes=[],t.charts=[]},options:{zIndex:-1,shrinkToFit:!0,title:{align:Hi},visible:!0},appendAxis:function(e){var t=this;t.content.append(e),t.axes.push(e),e.pane=t},appendChart:function(e){var t=this;t.charts.push(e),t.content.append(e),e.pane=t},empty:function(){var e,t=this,n=t.parent;if(n){for(e=0;e<t.axes.length;e++)n.removeAxis(t.axes[e]);for(e=0;e<t.charts.length;e++)n.removeChart(t.charts[e])}t.axes=[],t.charts=[],t.content.destroy(),t.content.children=[]},reflow:function(e){var t=this;Nn(t.children)===t.content&&t.children.pop(),_n.fn.reflow.call(t,e),t.title&&(t.contentBox.y1+=t.title.box.height())},getViewElements:function(e){var t=this,n=_n.fn.getViewElements.call(t,e),i=e.createGroup({id:t.options.id}),r=[];return i.children=n.concat(t.renderGridLines(e),t.content.getViewElements(e)),t.view=e,t.options.visible&&(r=[i]),r},renderGridLines:function(e){var t,n,i,r,o,a,s=this,l=s.axes,d=l.concat(s.parent.axes),c=[],u=[];for(n=0;n<l.length;n++)for(r=l[n],o=r.options.vertical,t=o?c:u,i=0;i<d.length;i++)0===t.length&&(a=d[i],o!==a.options.vertical&&Pn(t,r.renderGridLines(e,a,r)));return c.concat(u)},refresh:function(){var e=this,t=e.view;t&&t.replace(e)}}),It=bn.extend({init:function(e,t){var n=this;bn.fn.init.call(n,t),n.series=e,n.setSeriesIndexes(),n.charts=[],n.options.legend.items=[],n.axes=[],n.crosshairs=[],n.options.id=Wn(),n.enableDiscovery(),n.createPanes(),n.render(),n.createCrosshairs()},options:{series:[],plotArea:{margin:{}},background:"",border:{color:ei,width:0},legend:{}},setSeriesIndexes:function(){var e,t,n=this.series;for(e=0;e<n.length;e++)t=n[e],t.index=e},createPanes:function(){var e,t,n=this,i=[],r=n.options.panes||[],o=en.max(r.length,1);for(e=0;o>e;e++)t=new Ft(r[e]),t.paneIndex=e,i.push(t),n.append(t);n.panes=i},destroy:function(){var e,t=this,n=t.charts,i=t.axes;for(e=0;e<n.length;e++)n[e].destroy();for(e=0;e<i.length;e++)i[e].destroy();bn.fn.destroy.call(t)},createCrosshairs:function(){var e,t,n,i,r,o=this,a=o.panes;for(e=0;e<a.length;e++)for(n=a[e],t=0;t<n.axes.length;t++)i=n.axes[t],i.options.crosshair&&i.options.crosshair.visible&&(r=new qt(i,i.options.crosshair),o.crosshairs.push(r),o.append(r))},findPane:function(e){var t,n,i=this,r=i.panes;for(t=0;t<r.length;t++)if(r[t].options.name===e){n=r[t];break}return n||r[0]},findPointPane:function(e){var t,n,i=this,r=i.panes;for(t=0;t<r.length;t++)if(r[t].box.containsPoint(e)){n=r[t];break}return n},appendAxis:function(e){var t=this,n=t.findPane(e.options.pane);n.appendAxis(e),t.axes.push(e),e.plotArea=t},removeAxis:function(e){var t,n,i=this,r=[];for(t=0;t<i.axes.length;t++)n=i.axes[t],e!==n?r.push(n):n.destroy();i.axes=r},appendChart:function(e,t){var n=this;n.charts.push(e),t?t.appendChart(e):n.append(e)},removeChart:function(e){var t,n,i=this,r=[];for(t=0;t<i.charts.length;t++)n=i.charts[t],n!==e?r.push(n):n.destroy();i.charts=r},addToLegend:function(e){var t,n,i,r,o,a,s,l=e.length,d=[],c=this.options.legend,u=c.labels||{},p=c.inactiveItems||{};for(t=0;l>t;t++)n=e[t],n.visibleInLegend!==!1&&(i=n.name||"",u.template&&(i=pn(u.template)({text:i,series:n})),r=n.color,s=n._defaults,un(r)&&s&&(r=s.color),n.visible===!1?(o=p.labels.color,a=p.markers.color):(o=u.color,a=r),i&&d.push({text:i,labelColor:o,markerColor:a,series:n,active:n.visible}));Pn(c.items,d)},groupAxes:function(e){var t,n,i,r,o=[],a=[];for(i=0;i<e.length;i++)for(t=e[i].axes,r=0;r<t.length;r++)n=t[r],n.options.vertical?a.push(n):o.push(n);return{x:o,y:a,any:o.concat(a)}},groupSeriesByPane:function(){var e,t,n,i=this,r=i.series,o={};for(e=0;e<r.length;e++)n=r[e],t=i.seriesPaneName(n),o[t]?o[t].push(n):o[t]=[n];return o},filterVisibleSeries:function(e){var t,n,i=[];for(t=0;t<e.length;t++)n=e[t],n.visible!==!1&&i.push(n);return i},reflow:function(e){var t=this,n=t.options.plotArea,i=t.panes,r=Mn(n.margin);t.box=e.clone().unpad(r),t.reflowPanes(),t.reflowAxes(i),t.reflowCharts(i)},redraw:function(e){var t,n=this;for(e=[].concat(e),t=0;t<e.length;t++)e[t].empty();for(n.render(e),n.reflowAxes(n.panes),n.reflowCharts(e),t=0;t<e.length;t++)e[t].refresh()},axisCrossingValues:function(e,t){var n,i=e.options,r=[].concat(i.axisCrossingValues||i.axisCrossingValue),o=t.length-r.length,a=r[0]||0;for(n=0;o>n;n++)r.push(a);return r},alignAxisTo:function(e,t,n,i){var r=e.getSlot(n,n),o=e.options.reverse?2:1,a=t.getSlot(i,i),s=t.options.reverse?2:1,l=e.box.translate(a[Wr+s]-r[Wr+o],a[jr+s]-r[jr+o]);e.pane!==t.pane&&l.translate(0,e.pane.box.y1-t.pane.box.y1),e.reflow(l)},alignAxes:function(e,t){var n,i,r,o,a=this,s=e[0],l=t[0],d=a.axisCrossingValues(s,t),c=a.axisCrossingValues(l,e),u={},p={},f={},h={};for(o=0;o<t.length;o++)r=t[o],n=r.pane,i=n.options.id,a.alignAxisTo(r,s,c[o],d[o]),r.options._overlap||(Vn(r.lineBox().x1)===Vn(s.lineBox().x1)&&(u[i]&&r.reflow(r.box.alignTo(u[i].box,Hi).translate(-r.options.margin,0)),u[i]=r),Vn(r.lineBox().x2)===Vn(s.lineBox().x2)&&(r._mirrored||(r.options.labels.mirror=!r.options.labels.mirror,r._mirrored=!0),a.alignAxisTo(r,s,c[o],d[o]),p[i]&&r.reflow(r.box.alignTo(p[i].box,cr).translate(r.options.margin,0)),p[i]=r),0!==o&&l.pane===r.pane&&r.alignTo(l));for(o=0;o<e.length;o++)r=e[o],n=r.pane,i=n.options.id,a.alignAxisTo(r,l,d[o],c[o]),r.options._overlap||(Vn(r.lineBox().y1)===Vn(l.lineBox().y1)&&(r._mirrored||(r.options.labels.mirror=!r.options.labels.mirror,r._mirrored=!0),a.alignAxisTo(r,l,d[o],c[o]),f[i]&&r.reflow(r.box.alignTo(f[i].box,Fr).translate(0,-r.options.margin)),f[i]=r),Vn(r.lineBox().y2,hi)===Vn(l.lineBox().y2,hi)&&(h[i]&&r.reflow(r.box.alignTo(h[i].box,ni).translate(0,r.options.margin)),h[i]=r),0!==o&&r.alignTo(s))},shrinkAxisWidth:function(e){var t,n,i,r=this,o=r.groupAxes(e).any,a=A(o),s=0;for(t=0;t<e.length;t++)n=e[t],n.axes.length>0&&(s=en.max(s,a.width()-n.contentBox.width()));for(t=0;t<o.length;t++)i=o[t],i.options.vertical||i.reflow(i.box.shrink(s,0))},shrinkAxisHeight:function(e){var t,n,i,r,o,a;for(t=0;t<e.length;t++)for(n=e[t],i=n.axes,r=en.max(0,A(i).height()-n.contentBox.height()),o=0;o<i.length;o++)a=i[o],a.options.vertical&&a.reflow(a.box.shrink(0,r))},fitAxes:function(e){var t,n,i,r,o,a,s,l,d=this,c=d.groupAxes(e).any,u=0;for(s=0;s<e.length;s++)if(o=e[s],t=o.axes,n=o.contentBox,t.length>0)for(i=A(t),u=en.max(u,n.x1-i.x1),r=en.max(n.y1-i.y1,n.y2-i.y2),l=0;l<t.length;l++)a=t[l],a.reflow(a.box.translate(0,r));for(s=0;s<c.length;s++)a=c[s],a.reflow(a.box.translate(u,0))},reflowAxes:function(e){var t,n=this,i=n.groupAxes(e);for(t=0;t<e.length;t++)n.reflowPaneAxes(e[t]);i.x.length>0&&i.y.length>0&&(n.alignAxes(i.x,i.y),n.shrinkAxisWidth(e),n.alignAxes(i.x,i.y),n.shrinkAxisHeight(e),n.alignAxes(i.x,i.y),n.fitAxes(e))},reflowPaneAxes:function(e){var t,n=e.axes,i=n.length;if(i>0)for(t=0;i>t;t++)n[t].reflow(e.contentBox)},reflowCharts:function(e){var t,n,i=this,r=i.charts,o=r.length,a=i.box;for(n=0;o>n;n++)t=r[n].pane,(!t||Ln(t,e))&&r[n].reflow(a)},reflowPanes:function(){var e,t,n,i,r,o=this,a=o.box,s=o.panes,l=s.length,d=a.height(),c=l,u=0,p=a.y1;for(e=0;l>e;e++)t=s[e],i=t.options.height,t.options.width=a.width(),t.options.height?(i.indexOf&&i.indexOf("%")&&(r=parseInt(i,10)/100,t.options.height=r*a.height()),t.reflow(a.clone()),d-=t.options.height):u++;for(e=0;l>e;e++)t=s[e],t.options.height||(t.options.height=d/u);for(e=0;l>e;e++)t=s[e],n=a.clone().move(a.x1,p),t.reflow(n),c--,p+=t.options.height},backgroundBox:function(){var e,t,n,i,r,o,a=this,s=a.axes,l=s.length;for(n=0;l>n;n++)for(r=s[n],i=0;l>i;i++)o=s[i],r.options.vertical!==o.options.vertical&&(e=r.lineBox().clone().wrap(o.lineBox()),t=t?t.wrap(e):e);return t||a.box},getViewElements:function(e){var t=this,n=t.backgroundBox(),i=t.options,r=i.plotArea,o=r.border||{},a=bn.fn.getViewElements.call(t,e);return Pn(a,[e.createRect(n,{fill:r.background,fillOpacity:r.opacity,zIndex:-2,strokeWidth:.1}),e.createRect(n,{id:i.id,data:{modelId:i.modelId},stroke:o.width?o.color:"",strokeWidth:o.width,fill:Ur,fillOpacity:0,zIndex:-1,dashType:o.dashType})]),a},pointsByCategoryIndex:function(e){var t,n,i,r,o,a=this.charts,s=[];if(null!==e)for(t=0;t<a.length;t++)if(o=a[t],"_navigator"!==o.pane.options.name&&(i=a[t].categoryPoints[e],i&&i.length))for(n=0;n<i.length;n++)r=i[n],r&&zn(r.value)&&null!==r.value&&s.push(r);return s},pointsBySeriesIndex:function(e){var t,n,i,r,o,a=this.charts,s=[];for(i=0;i<a.length;i++)for(o=a[i],t=o.points,r=0;r<t.length;r++)n=t[r],n&&n.options.index===e&&s.push(n);return s},paneByPoint:function(e){var t,n,i=this,r=i.panes;for(n=0;n<r.length;n++)if(t=r[n],t.box.containsPoint(e))return t}}),Pt=It.extend({init:function(e,t){var n=this;n.namedCategoryAxes={},n.namedValueAxes={},n.valueAxisRangeTracker=new Bt,e.length>0&&(n.invertAxes=Ln(e[0].type,[Xn,ri,Nr,Lr])),It.fn.init.call(n,e,t)},options:{categoryAxis:{categories:[]},valueAxis:{}},render:function(e){var t=this;e=e||t.panes,t.createCategoryAxes(e),t.aggregateCategories(e),t.createCharts(e),t.createValueAxes(e)},removeAxis:function(e){var t=this,n=e.options.name;It.fn.removeAxis.call(t,e),e instanceof Z?delete t.namedCategoryAxes[n]:(t.valueAxisRangeTracker.reset(n),delete t.namedValueAxes[n]),e===t.categoryAxis&&delete t.categoryAxis,e===t.valueAxis&&delete t.valueAxis},createCharts:function(e){var t,n,i,r,o=this,a=o.groupSeriesByPane();for(t=0;t<e.length;t++)n=e[t],i=a[n.options.name||"default"]||[],o.addToLegend(i),r=o.filterVisibleSeries(i),r&&(o.createAreaChart(V(r,[Yn,Lr]),n),o.createBarChart(V(r,[fi,Xn]),n),o.createLineChart(V(r,[Li,Nr]),n),o.createCandlestickChart(V(r,oi),n),o.createOHLCChart(V(r,ir),n),o.createBulletChart(V(r,[ri,Or]),n))},aggregateCategories:function(e){var t,n,i,r,o,a=this,s=a.srcSeries||a.series,l=[];for(t=0;t<s.length;t++)n=s[t],i=a.seriesCategoryAxis(n),r=a.findPane(i.options.pane),o=E(i.options.type,vi),(o||n.categoryField)&&Ln(r,e)&&(n=a.aggregateSeries(n,i)),l.push(n);a.srcSeries=s,a.series=l},aggregateSeries:function(e,t){var i,r,o,a,s,l=t.options,d=E(t.options.type,vi),c=l.categories,u=l.srcCategories||c,p=e.data,f=[],h=t.range(),v=dn({},e),_=dn({},e),b=g;for(v.data=a=[],d&&(b=m),i=0;i<p.length;i++)r=e.categoryField?b(e.categoryField,p[i]):u[i],o=t.categoryIndex(r,h),o>-1&&(f[o]=f[o]||[],f[o].push(i));for(s=new Kt(_,$.current,n.current),i=0;i<c.length;i++)a[i]=s.aggregatePoints(f[i],c[i]);return v},appendChart:function(e,t){for(var n=this,i=e.options.series,r=n.seriesCategoryAxis(i[0]),o=r.options.categories,a=en.max(0,f(i)-o.length);a--;)o.push("");n.valueAxisRangeTracker.update(e.valueAxisRanges),It.fn.appendChart.call(n,e,t)},seriesPaneName:function(t){var n=this,i=n.options,r=t.axis,o=[].concat(i.valueAxis),a=e.grep(o,function(e){return e.name===r})[0],s=i.panes||[{}],l=(s[0]||{}).name||"default",d=(a||{}).pane||l;return d},seriesCategoryAxis:function(e){var t=this,n=e.categoryAxis,i=n?t.namedCategoryAxes[n]:t.categoryAxis;if(!i)throw Error("Unable to locate category axis with name "+n);return i},createBarChart:function(e,t){if(0!==e.length){var n=this,i=e[0],r=new lt(n,{series:e,invertAxes:n.invertAxes,isStacked:i.stack&&e.length>1,gap:i.gap,spacing:i.spacing});n.appendChart(r,t)}},createBulletChart:function(e,t){if(0!==e.length){var n=this,i=e[0],r=new dt(n,{series:e,invertAxes:n.invertAxes,gap:i.gap,spacing:i.spacing});n.appendChart(r,t)}},createLineChart:function(e,t){if(0!==e.length){var n=this,i=e[0],r=new mt(n,{invertAxes:n.invertAxes,isStacked:i.stack&&e.length>1,series:e});n.appendChart(r,t)}},createAreaChart:function(e,t){if(0!==e.length){var n=this,i=e[0],r=new _t(n,{invertAxes:n.invertAxes,isStacked:i.stack&&e.length>1,series:e});n.appendChart(r,t)}},createOHLCChart:function(e,t){if(0!==e.length){var n=this,i=e[0],r=new Tt(n,{invertAxes:n.invertAxes,gap:i.gap,series:e,spacing:i.spacing});n.appendChart(r,t)}},createCandlestickChart:function(e,t){if(0!==e.length){var n=this,i=e[0],r=new xt(n,{invertAxes:n.invertAxes,gap:i.gap,series:e,spacing:i.spacing});n.appendChart(r,t)}},axisRequiresRounding:function(e,t){var n,i,r=this,o=V(r.series,Jr);for(n=0;n<o.length;n++)if(i=o[n].categoryAxis||"",i===e||!i&&0===t)return!0},createCategoryAxes:function(e){var t,n,i,r,o,a,s,l,d=this,c=d.invertAxes,u=[].concat(d.options.categoryAxis),p=[];for(t=0;t<u.length;t++)if(n=u[t],i=d.findPane(n.pane),Ln(i,e)){if(a=n.name,r=n.categories||[],o=n.type||"",n=dn({vertical:c,axisCrossingValue:c?Vi:0},n),zn(n.justified)||(n.justified=d.isJustified()),d.axisRequiresRounding(a,t)&&(n.justified=!1,n.roundToBaseUnit=!0),s=G(n,r[0])?new tt(n):new Z(n),a){if(d.namedCategoryAxes[a])throw Error("Category axis with name "+a+" is already defined");d.namedCategoryAxes[a]=s}s.axisIndex=t,p.push(s),d.appendAxis(s)}l=d.categoryAxis||p[0],d.categoryAxis=l,c?d.axisY=l:d.axisX=l},isJustified:function(){var e,t,n=this,i=n.series;for(e=0;e<i.length;e++)if(t=i[e],!Ln(t.type,[Yn,Lr]))return!1;return!0},createValueAxes:function(e){var t,n,i,r,o,a,s,l=this,d=l.valueAxisRangeTracker,c=d.query(),u=[].concat(l.options.valueAxis),p=l.invertAxes,f={vertical:!p},h=[];for(s=0;s<u.length;s++)if(t=u[s],n=l.findPane(t.pane),Ln(n,e)){if(a=t.name,o=d.query(a)||c||{min:0,max:1},0===s&&o&&c&&(o.min=en.min(o.min,c.min),o.max=en.max(o.max,c.max)),i=new xn(o.min,o.max,dn({},f,t)),a){if(l.namedValueAxes[a])throw Error("Value axis with name "+a+" is already defined");l.namedValueAxes[a]=i}i.axisIndex=s,h.push(i),l.appendAxis(i)}r=l.valueAxis||h[0],l.valueAxis=r,p?l.axisX=r:l.axisY=r},click:function(t,n){var i,r,o,a=this,s=t._eventCoordinates(n),l=new Cn(s.x,s.y),d=a.pointPane(l),c=[],u=[];if(d){for(i=d.axes,r=0;r<i.length;r++)o=i[r],o.getValue?P(u,o.getValue(l)):P(c,o.getCategory(l));0===c.length&&P(c,a.categoryAxis.getCategory(l)),c.length>0&&u.length>0&&t.trigger(lr,{element:e(n.target),category:S(c),value:S(u)})}},pointPane:function(e){var t,n,i=this,r=i.panes;for(n=0;n<r.length;n++)if(t=r[n],t.contentBox.containsPoint(e))return t}}),Bt=on.extend({init:function(){var e=this;e.axisRanges={}},update:function(e){var t,n,i,r=this,o=r.axisRanges;for(i in e)t=o[i],n=e[i],o[i]=t=t||{min:Vi,max:Ui},t.min=en.min(t.min,n.min),t.max=en.max(t.max,n.max)},reset:function(e){this.axisRanges[e]=t},query:function(e){return this.axisRanges[e]}}),zt=It.extend({init:function(e,t){var n=this;n.namedXAxes={},n.namedYAxes={},n.xAxisRangeTracker=new Bt,n.yAxisRangeTracker=new Bt,It.fn.init.call(n,e,t)},options:{xAxis:{},yAxis:{}},render:function(e){var t,n,i,r,o=this,a=o.groupSeriesByPane();for(e=e||o.panes,t=0;t<e.length;t++)n=e[t],i=a[n.options.name||"default"]||[],o.addToLegend(i),r=o.filterVisibleSeries(i),r&&(o.createScatterChart(V(r,fr),n),o.createScatterLineChart(V(r,hr),n),o.createBubbleChart(V(r,ii),n));o.createAxes(e)},appendChart:function(e,t){var n=this;n.xAxisRangeTracker.update(e.xAxisRanges),n.yAxisRangeTracker.update(e.yAxisRanges),It.fn.appendChart.call(n,e,t)},removeAxis:function(e){var t=this,n=e.options.name;It.fn.removeAxis.call(t,e),e.options.vertical?(t.yAxisRangeTracker.reset(n),delete t.namedYAxes[n]):(t.xAxisRangeTracker.reset(n),delete t.namedXAxes[n]),e===t.axisX&&delete t.axisX,e===t.axisY&&delete t.axisY},seriesPaneName:function(t){var n=this,i=n.options,r=t.xAxis,o=[].concat(i.xAxis),a=e.grep(o,function(e){return e.name===r})[0],s=t.yAxis,l=[].concat(i.yAxis),d=e.grep(l,function(e){return e.name===s})[0],c=i.panes||[{}],u=c[0].name||"default",p=(a||{}).pane||(d||{}).pane||u;return p},createScatterChart:function(e,t){var n=this;e.length>0&&n.appendChart(new bt(n,{series:e}),t)},createScatterLineChart:function(e,t){var n=this;e.length>0&&n.appendChart(new wt(n,{series:e}),t)},createBubbleChart:function(e,t){var n=this;e.length>0&&n.appendChart(new yt(n,{series:e}),t)},createXYAxis:function(e,t,n){var i,r,o,a,s,l,d,c=this,u=e.name,p=t?c.namedYAxes:c.namedXAxes,f=t?c.yAxisRangeTracker:c.xAxisRangeTracker,h=f.query(),g=f.query(u)||h||{min:0,max:1},m=dn({},e,{vertical:t}),v=c.series,_=[m.min,m.max];for(r=0;r<v.length;r++)if(o=v[r],a=o[t?"yAxis":"xAxis"],a==m.name||0===n&&!a){s=$.current.bindPoint(o,0).valueFields,_.push(s[t?"y":"x"]);break}for(0===n&&h&&(g.min=en.min(g.min,h.min),g.max=en.max(g.max,h.max)),d=0;d<_.length;d++)if(_[d]instanceof Date){l=!0;break}if(i=E(m.type,vi)||!m.type&&l?new nt(g.min,g.max,m):new xn(g.min,g.max,m),u){if(p[u])throw Error((t?"Y":"X")+" axis with name "+u+" is already defined");p[u]=i}return c.appendAxis(i),i},createAxes:function(e){var t,n=this,i=n.options,r=[].concat(i.xAxis),o=[],a=[].concat(i.yAxis),s=[];Xt(r,function(i){t=n.findPane(this.pane),Ln(t,e)&&o.push(n.createXYAxis(this,!1,i))}),Xt(a,function(i){t=n.findPane(this.pane),Ln(t,e)&&s.push(n.createXYAxis(this,!0,i))}),n.axisX=n.axisX||o[0],n.axisY=n.axisY||s[0]},click:function(t,n){var i,r,o,a,s=this,l=t._eventCoordinates(n),d=new Cn(l.x,l.y),c=s.axes,u=c.length,p=[],f=[];for(i=0;u>i;i++)r=c[i],a=r.options.vertical?f:p,o=r.getValue(d),null!==o&&a.push(o);p.length>0&&f.length>0&&t.trigger(lr,{element:e(n.target),x:S(p),y:S(f)})}}),Ht=It.extend({render:function(){var e=this,t=e.series;e.createPieChart(t)},createPieChart:function(e){var t=this,n=e[0],i=new Dt(t,{series:e,padding:n.padding,startAngle:n.startAngle,connectors:n.connectors,legend:t.options.legend});t.appendChart(i)},appendChart:function(e,t){It.fn.appendChart.call(this,e,t),Pn(this.options.legend.items,e.legendItems)}}),Rt=Ht.extend({render:function(){var e=this,t=e.series;e.createDonutChart(t)},createDonutChart:function(e){var t=this,n=e[0],i=new Et(t,{series:e,padding:n.padding,connectors:n.connectors,legend:t.options.legend});t.appendChart(i)}}),Mt=yn.extend({options:{easing:"easeOutElastic",duration:Ii},setup:function(){var e,t=this.element,n=t.config;t.options.singleSegment&&(n=t),this.endRadius=n.r,e=this.startRadius=n.ir||0,n.r=e},step:function(e){var t=this,n=t.element,i=t.endRadius,r=n.config,o=t.startRadius;n.options.singleSegment&&(r=n),r.r=On(o,i,e)}}),Lt=yn.extend({options:{easing:"easeOutElastic",duration:Ii},setup:function(){var e=this.element;e.endRadius=e.radius,e.radius=0},step:function(e){var t=this.element,n=t.endRadius;t.radius=On(0,n,e)}}),Ot=In(Xn,mn),Nt=In(ar,Mt),Vt=In(ii,Lt),Ut=on.extend({init:function(e,t,n){var i=this;i.options=dn({},i.options,n),i.view=e,i.viewElement=t,i._overlays=[]},options:{fill:Ur,fillOpacity:.2,stroke:Ur,strokeWidth:1,strokeOpacity:.2},show:function(e){var t,n,i,r,o,a=this,s=a.view,l=a.viewElement,d=a._overlays;for(a.hide(),a._points=e=[].concat(e),i=0;i<e.length;i++)r=e[i],r&&(o=r.options,(!o||(o.highlight||{}).visible)&&(r.highlightOverlay&&(t=r.highlightOverlay(s,a.options),t&&(n=s.renderElement(t),l.appendChild(n),d.push(n))),r.toggleHighlight&&r.toggleHighlight(s)))},hide:function(){for(var e,t,n,i,r=this,o=r._points,a=r._overlays;a.length;)e=r._overlays.pop(),e.parentNode.removeChild(e);if(o)for(t=0;t<o.length;t++)n=o[t],n&&(i=n.options,(!i||(i.highlight||{}).visible)&&n.toggleHighlight&&n.toggleHighlight(r.view));r._points=[]}}),Wt=on.extend({init:function(t,n){var i=this;i.options=dn({},i.options,n),i.chartElement=t,i.chartPadding={top:parseInt(t.css("paddingTop"),10),left:parseInt(t.css("paddingLeft"),10)},i.template=Wt.template,i.template||(i.template=Wt.template=Un("<div class='"+gi+"tooltip' "+"style='display:none; position: absolute; font: #= d.font #;"+"border: #= d.border.width #px solid;"+"opacity: #= d.opacity #; filter: alpha(opacity=#= d.opacity * 100 #);'>"+"</div>")),i.element=e(i.template(i.options)).appendTo(t),i._moveProxy=nn(i.move,i)},options:{border:{width:1},opacity:1,animation:{duration:Ir}},move:function(){var e=this,t=e.options,n=e.element,i=e._offset();e.visible||n.css({top:i.top,left:i.left}),n.stop(!0,!0).show().animate({left:i.left,top:i.top},t.animation.duration),e.visible=!0},_offset:function(){var t=this,n=t.element,i=t.anchor,r=t.chartPadding,o=Vn(i.y+r.top),a=Vn(i.x+r.left),s=rn.support.zoomLevel(),l=e(window),d=window.pageYOffset||document.documentElement.scrollTop||0,c=window.pageXOffset||document.documentElement.scrollLeft||0;return d=t.chartElement.offset().top-d,c=t.chartElement.offset().left-c,o+=t._currentPosition(o+d,n.outerHeight(),l.outerHeight()/s),a+=t._currentPosition(a+c,n.outerWidth(),l.outerWidth()/s),{top:o,left:a}},setStyle:function(e){this.element.css({backgroundColor:e.background,borderColor:e.border.color||e.background,font:e.font,color:e.color,opacity:e.opacity,borderWidth:e.border.width})},show:function(){var e=this;e.showTimeout=setTimeout(e._moveProxy,Br)},hide:function(){var e=this;clearTimeout(e.showTimeout),e.visible&&(e._hideElement(),e.point=null,e.visible=!1,e.index=null)},_hideElement:function(){this.element.fadeOut()},_pointContent:function(e){var t,n,i=this,r=dn({},i.options,e.options.tooltip);return zn(e.value)&&(t=""+e.value),r.template?(n=pn(r.template),t=n({value:e.value,category:e.category,series:e.series,dataItem:e.dataItem,percentage:e.percentage})):r.format&&(t=e.formatValue(r.format)),t},_pointAnchor:function(e){var t=this,n=t.element;return e.tooltipAnchor(n.outerWidth(),n.outerHeight())},_currentPosition:function(e,t,n){var i=0;return e+t>n&&(i=n-(e+t)),0>e&&(i=-e),i},_updateStyle:function(e,t){if(zn(e.background)||(e.background=t.color),!zn(e.color)){var n=this,i=n.element,r=new wn(e.background).percBrightness();r>180?i.addClass(gi+Hr):i.removeClass(gi+Hr)}}}),jt=Wt.extend({show:function(e){var t=this,n=dn({},t.options,e.options.tooltip);e&&(t.element.html(t._pointContent(e)),t.anchor=t._pointAnchor(e),t._updateStyle(n,e.options),t.setStyle(n),Wt.fn.show.call(t,e))}}),Gt=Wt.extend({init:function(e,t,n){var i=this;Wt.fn.init.call(i,e,n),i.plotArea=t},options:{sharedTemplate:"<table><th colspan='2'>#= categoryText #</th># for(var i = 0; i < points.length; i++) { ## var point = points[i]; #<tr># if(point.series.name) { #<td>#= point.series.name #:</td> # } #<td>#= content(point) #</td></tr># } #</table>",categoryFormat:"{0:d}"},showAt:function(e,t){var n,i=this,r=i.options,o=i.plotArea,a=o.categoryAxis,s=a.pointCategoryIndex(t),l=a.getCategory(t),d=a.getSlot(s);n=i._content(e,l),i.element.html(n),i.anchor=i._slotAnchor(t,d),i._updateStyle(r,e[0].options),i.setStyle(r),Wt.fn.show.call(i)},_slotAnchor:function(e,t){var n,i=this,r=i.plotArea,o=r.categoryAxis,a=e.y-i.element.height()/2;return n=o.options.vertical?Cn(e.x,a):Cn(t.center().x,a)},_content:function(e,t){var n,i,r=this;return n=rn.template(r.options.sharedTemplate),i=n({points:e,category:t,categoryText:Bn(r.options.categoryFormat,t),content:r._pointContent})}}),qt=bn.extend({init:function(e,t){var n=this;bn.fn.init.call(n,t),n.axis=e,n.options.id||(n.options.id=Wn()),n._visible=!1,n.stickyMode=e instanceof Z},options:{color:ei,width:1,zIndex:-1,tooltip:{visible:!1}},repaint:function(){var e=this,t=e.element;e.getViewElements(e._view),t=e.element,t.refresh(Rn(e.options.id))},showAt:function(e){var t=this;t.updateAxisReference(),t._visible=!0,t.point=e,t.repaint(),t.options.tooltip.visible&&(t.tooltip||(t.tooltip=new Yt(t,dn({},t.options.tooltip,{stickyMode:t.stickyMode}))),t.tooltip.showAt(e))},hide:function(){var e=this;e._visible&&(e._visible=!1,e.repaint(),e.tooltip&&e.tooltip.hide())},linePoints:function(){var e,t,n,i=this,r=i.axis,o=r.options.vertical,a=i.getBox(),s=i.point,l=o?jr:Wr;return t=Cn(a.x1,a.y1),n=o?Cn(a.x2,a.y1):Cn(a.x1,a.y2),s&&(i.stickyMode?(e=r.getSlot(r.pointCategoryIndex(s)),t[l]=n[l]=e.center()[l]):t[l]=n[l]=s[l]),i.box=a,[t,n]},getBox:function(){var e,t,n,i=this,r=i.axis,o=r.pane.axes,a=o.length,s=r.options.vertical,l=r.lineBox().clone(),d=s?Wr:jr;for(n=0;a>n;n++)t=o[n],t.options.vertical!=s&&(e?e.wrap(t.lineBox()):e=t.lineBox().clone());return l[d+1]=e[d+1],l[d+2]=e[d+2],l},getViewElements:function(e){var t=this,n=t.options,i=[];return t.points=t.linePoints(),t.element=e.createPolyline(t.points,!1,{id:n.id,stroke:n.color,strokeWidth:n.width,strokeOpacity:n.opacity,dashType:n.dashType,zIndex:n.zIndex,visible:t._visible}),i.push(t.element),t._view=e,Pn(i,bn.fn.getViewElements.call(t,e)),i},updateAxisReference:function(){var e,t,n=this,i=n.axis,r=i.plotArea,o=r.axes;for(t=0;t<o.length;t++)if(e=o[t],zn(i.axisIndex)&&i instanceof xn!=e instanceof Z&&i.axisIndex===e.axisIndex){n.axis=e;break}}}),Yt=Wt.extend({init:function(e,t){var n=this,i=e.axis.getRoot().parent.element;n.crosshair=e,Wt.fn.init.call(n,i,dn({},n.options,{background:e.axis.plotArea.options.seriesColors[0]},t)),n._updateStyle(n.options,{}),n.setStyle(n.options)},options:{padding:10},showAt:function(e){var t=this,n=t.element;t.point=e,t.element.html(t.content(e)),t.anchor=t.getAnchor(n.outerWidth(),n.outerHeight()),t.move()
},move:function(){var e=this,t=e.element,n=e._offset();t.css({top:n.top,left:n.left}).show()},content:function(e){var t,n,i,r=this,o=r.options,a=r.crosshair.axis,s=a.options;return n=t=a[o.stickyMode?"getCategory":"getValue"](e),o.template?(i=pn(o.template),t=i({value:n})):o.format?t=Bn(o.format,n):s.type===vi&&(t=Bn(s.labels.dateFormats[s.baseUnit],n)),t},getAnchor:function(e,t){var n,i,r=this,o=r.options,a=o.position,s=r.crosshair.axis.options.vertical,l=r.crosshair.points,d=l[0],c=l[1],u=e/2,p=t/2,f=o.padding;return s?a===Hi?(n=d.x-e-f,i=d.y-p):(n=c.x+f,i=c.y-p):a===ni?(n=c.x-u,i=c.y+f):(n=d.x-u,i=d.y-t-f),Cn(n,i)},hide:function(){this.element.hide(),this.point=null}}),Qt={min:function(e){var t,n,i=Vi,r=e.length;for(t=0;r>t;t++)n=e[t],z(n)&&(i=en.min(i,n));return i===Vi?e[0]:i},max:function(e){var t,n,i=Ui,r=e.length;for(t=0;r>t;t++)n=e[t],z(n)&&(i=en.max(i,n));return i===Ui?e[0]:i},sum:function(e){var t,n,i=e.length,r=0;for(t=0;i>t;t++)n=e[t],z(n)&&(r+=n);return r},count:function(e){var t,n,i=e.length,r=0;for(t=0;i>t;t++)n=e[t],null!==n&&zn(n)&&r++;return r},avg:function(e){var t=e[0],n=H(e);return n>0&&(t=Qt.sum(e)/n),t},first:function(e){var t,n,i=e.length;for(t=0;i>t;t++)if(n=e[t],null!==n&&zn(n))return n;return e[0]}},n.prototype={register:function(e,t){for(var n=0;n<e.length;n++)this._defaults[e[n]]=t},query:function(e){return this._defaults[e]}},n.current=new n,$t=an.extend({init:function(t,n,i){var r,o,a=this,s=t.element,l=n.lineBox(),d=a.getValueAxis(n),c=d.lineBox(),u="."+gi;an.fn.init.call(a),a.options=dn({},a.options,i),i=a.options,a.chart=t,a.chartElement=s,a.categoryAxis=n,a._dateAxis=a.categoryAxis instanceof tt,a.valueAxis=d,a._dateAxis&&dn(i,{min:v(i.min),max:v(i.max),from:v(i.from),to:v(i.to)}),a.template=$t.template,a.template||(a.template=$t.template=Un("<div class='"+gi+"selector' "+"style='width: #= d.width #px; height: #= d.height #px;"+" top: #= d.offset.top #px; left: #= d.offset.left #px;'>"+"<div class='"+gi+"mask'></div>"+"<div class='"+gi+"mask'></div>"+"<div class='"+gi+"selection'>"+"<div class='"+gi+"selection-bg'></div>"+"<div class='"+gi+"handle "+gi+"leftHandle'><div></div></div>"+"<div class='"+gi+"handle "+gi+"rightHandle'><div></div></div>"+"</div></div>")),o={left:parseInt(s.css("paddingLeft"),10),right:parseInt(s.css("paddingTop"),10)},a.options=dn({},{width:l.width(),height:c.height(),padding:o,offset:{left:c.x2+o.left,top:c.y1+o.right},from:i.min,to:i.max},i),a.options.visible&&(a.wrapper=r=e(a.template(a.options)).appendTo(s),a.selection=r.find(u+"selection"),a.leftMask=r.find(u+"mask").first(),a.rightMask=r.find(u+"mask").last(),a.leftHandle=r.find(u+"leftHandle"),a.rightHandle=r.find(u+"rightHandle"),a.options.selection={border:{left:parseFloat(a.selection.css("border-left-width"),10),right:parseFloat(a.selection.css("border-right-width"),10)}},a.leftHandle.css("top",(a.selection.height()-a.leftHandle.height())/2),a.rightHandle.css("top",(a.selection.height()-a.rightHandle.height())/2),a.set(a._index(i.from),a._index(i.to)),a.bind(a.events,a.options),a.wrapper[0].style.cssText=a.wrapper[0].style.cssText,a.wrapper.on(Ji,nn(a._mousewheel,a)),rn.UserEvents?a.userEvents=new rn.UserEvents(a.wrapper,{global:!0,threshold:5,stopPropagation:!0,multiTouch:!0,start:nn(a._start,a),move:nn(a._move,a),end:nn(a._end,a),tap:nn(a._tap,a),gesturestart:nn(a._gesturechange,a),gesturechange:nn(a._gesturechange,a)}):a.leftHandle.add(a.rightHandle).removeClass(gi+"handle"))},events:[mr,vr,_r],options:{visible:!0,mousewheel:{zoom:ti},min:Ui,max:Vi},destroy:function(){var e=this,t=e.userEvents;t&&t.destroy()},_rangeEventArgs:function(e){var t=this;return{axis:t.categoryAxis.options,from:t._value(e.from),to:t._value(e.to)}},_start:function(t){var n,i=this,r=i.options,o=e(t.event.target);!i._state&&o&&(i.chart._unsetActivePoint(),i._state={moveTarget:o.parents(".k-handle").add(o).first(),startLocation:t.x?t.x.location:0,range:{from:i._index(r.from),to:i._index(r.to)}},n=i._rangeEventArgs({from:i._index(r.from),to:i._index(r.to)}),i.trigger(mr,n)&&(i.userEvents.cancel(),i._state=null))},_move:function(e){if(this._state){var t=this,n=t._state,i=t.options,r=t.categoryAxis.options.categories,o=t._index(i.from),a=t._index(i.to),s=t._index(i.min),l=t._index(i.max),d=n.startLocation-e.x.location,c=n.range,u={from:c.from,to:c.to},p=c.to-c.from,f=n.moveTarget,h=t.wrapper.width()/(r.length-1),g=en.round(d/h);f&&(e.preventDefault(),f.is(".k-selection, .k-selection-bg")?(c.from=en.min(en.max(s,o-g),l-p),c.to=en.min(c.from+p,l)):f.is(".k-leftHandle")?(c.from=en.min(en.max(s,o-g),l-1),c.to=en.max(c.from+1,c.to)):f.is(".k-rightHandle")&&(c.to=en.min(en.max(s+1,a-g),l),c.from=en.min(c.to-1,c.from)),(c.from!==u.from||c.to!==u.to)&&(t.move(c.from,c.to),t.trigger(vr,t._rangeEventArgs(c))))}},_end:function(){var e=this,t=e._state.range;delete e._state,e.set(t.from,t.to),e.trigger(_r,e._rangeEventArgs(t))},_gesturechange:function(e){if(this._state){var t=this,n=t.chart,i=t._state,r=t.options,o=t.categoryAxis,a=i.range,s=n._toModelCoordinates(e.touches[0].x.location).x,l=n._toModelCoordinates(e.touches[1].x.location).x,d=en.min(s,l),c=en.max(s,l);e.preventDefault(),i.moveTarget=null,a.from=o.pointCategoryIndex(new fn.Point2D(d))||r.min,a.to=o.pointCategoryIndex(new fn.Point2D(c))||r.max,t.move(a.from,a.to)}},_tap:function(e){var t=this,n=t.options,i=t.chart._eventCoordinates(e),r=t.categoryAxis,o=r.pointCategoryIndex(new fn.Point2D(i.x,r.box.y1)),a=t._index(n.from),s=t._index(n.to),l=t._index(n.min),d=t._index(n.max),c=s-a,u=a+c/2,p=en.round(u-o),f={},h=3===e.event.which;t._state||h||(e.preventDefault(),t.chart._unsetActivePoint(),r.options.justified||p--,f.from=en.min(en.max(l,a-p),d-c),f.to=en.min(f.from+c,d),t._start(e),t._state&&(t._state.range=f,t.trigger(vr,t._rangeEventArgs(f)),t._end()))},_mousewheel:function(e){var t,n=this,i=n.options,r=L(e);n._start({event:{target:n.selection}}),n._state&&(t=n._state.range,e.preventDefault(),e.stopPropagation(),en.abs(r)>1&&(r*=Yr),i.mousewheel.reverse&&(r*=-1),n.expand(r)&&n.trigger(vr,{axis:n.categoryAxis.options,delta:r,originalEvent:e,from:n._value(t.from),to:n._value(t.to)}),n._mwTimeout&&clearTimeout(n._mwTimeout),n._mwTimeout=setTimeout(function(){n._end()},Xi))},_index:function(e){var t=this,n=t.categoryAxis,i=n.options.categories,r=e;return e instanceof Date&&(r=B(e,i),!n.options.justified&&e>Nn(i)&&(r+=1)),r},_value:function(e){var t=this,n=this.categoryAxis,i=n.options.categories,r=e;return t._dateAxis&&(r=e>i.length-1?t.options.max:i[e]),r},_slot:function(e){var t=this,n=this.categoryAxis;return n.getSlot(t._index(e))},move:function(e,t){var n,i,r,o,a=this,s=a.options,l=s.offset,d=s.padding,c=s.selection.border;r=a._slot(e),n=Vn(r.x1-l.left+d.left),a.leftMask.width(n),a.selection.css("left",n),r=a._slot(t),i=Vn(s.width-(r.x1-l.left+d.left)),a.rightMask.width(i),o=s.width-i,o!=s.width&&(o+=c.right),a.rightMask.css("left",o),a.selection.width(en.max(s.width-(n+i)-c.right,0))},set:function(e,t){var n=this,i=n.options,r=n._index(i.min),o=n._index(i.max);e=D(n._index(e),r,o),t=D(n._index(t),e+1,o),i.visible&&n.move(e,t),i.from=n._value(e),i.to=n._value(t)},expand:function(e){var n=this,i=n.options,r=n._index(i.min),o=n._index(i.max),a=i.mousewheel.zoom,s=n._index(i.from),l=n._index(i.to),d={from:s,to:l},c=dn({},d);return n._state&&(d=n._state.range),a!==cr&&(d.from=D(D(s-e,0,l-1),r,o)),a!==Hi&&(d.to=D(D(l+e,d.from+1,o),r,o)),d.from!==c.from||d.to!==c.to?(n.set(d.from,d.to),!0):t},getValueAxis:function(e){var t,n,i=e.pane.axes,r=i.length;for(t=0;r>t;t++)if(n=i[t],n.options.vertical!==e.options.vertical)return n}}),Kt=function(e,t,n){var i,r,o,a=this,s=t.canonicalFields(e),l=t.valueFields(e),d=t.sourceFields(e,s),c=a._seriesFields=[],u=n.query(e.type),p=e.aggregate||u;for(a._series=e,a._binder=t,i=0;i<s.length;i++){if(o=s[i],typeof p===nr)r=p[o];else{if(0!==i&&!Ln(o,l))break;r=p}r&&c.push({canonicalName:o,name:d[i],transform:un(r)?r:Qt[r]})}},Kt.prototype={aggregatePoints:function(e,t){var n,i,r,o,a=this,s=a._bindPoints(e||[]),l=a._series,d=a._seriesFields,c={};for(n=0;n<d.length;n++){if(i=d[n],r=a._bindField(s.values,i.canonicalName),o=i.transform(r,l,s.dataItems,t),null!==o&&typeof o===nr){c=o;break}zn(o)&&(Y(i.name,c),rn.setter(i.name)(c,o))}return c},_bindPoints:function(e){var t,n,i=this,r=i._binder,o=i._series,a=[],s=[];for(t=0;t<e.length;t++)n=e[t],a.push(r.bindPoint(o,n)),s.push(o.data[n]);return{values:a,dataItems:s}},_bindField:function(e,t){var n,i,r,o,a=[],s=e.length;for(n=0;s>n;n++)i=e[n],o=i.valueFields,r=zn(o[t])?o[t]:i.fields[t],a.push(r);return a}},tn(e.easing,{easeOutElastic:function(e,t,n,i){var r=1.70158,o=0,a=i;return 0===e?n:1===e?n+i:(o||(o=.5),a<en.abs(i)?(a=i,r=o/4):r=o/(2*en.PI)*en.asin(i/a),a*en.pow(2,-10*e)*en.sin((1*e-r)*1.1*en.PI/o)+i+n)}}),fn.ui.plugin(eo),Q.current.register(Pt,[Xn,fi,Li,Nr,Yn,Lr,oi,ir,ri,Or]),Q.current.register(zt,[fr,hr,ii]),Q.current.register(Ht,[ar]),Q.current.register(Rt,[xi]),$.current.register([Xn,fi,Li,Nr,Yn,Lr],[Mr],[ai,pi,tr]),n.current.register([Xn,fi,Li,Nr,Yn,Lr],{value:"max",color:"first",noteText:"first"}),$.current.register([fr,hr,ii],[Wr,jr],[pi,tr]),$.current.register([ii],[Wr,jr,"size"],[pi,ai,tr]),$.current.register([oi,ir],["open","high","low","close"],[ai,pi,"downColor",tr]),n.current.register([oi,ir],{open:"max",high:"max",low:"min",close:"max",color:"first",downColor:"first",noteText:"first"}),$.current.register([ri,Or],["current","target"],[ai,pi,"visibleInLegend",tr]),n.current.register([ri,Or],{current:"max",target:"max",color:"first",noteText:"first"}),$.current.register([ar,xi],[Mr],[ai,pi,"explode","visibleInLegend","visible"]),dn(fn,{EQUALLY_SPACED_SERIES:Jr,Aggregates:Qt,AreaChart:_t,AreaSegment:vt,AxisGroupRangeTracker:Bt,Bar:at,BarAnimationDecorator:Ot,BarChart:lt,BarLabel:K,BubbleAnimationDecorator:Vt,BubbleChart:yt,BulletChart:dt,CandlestickChart:xt,Candlestick:kt,CategoricalChart:st,CategoricalPlotArea:Pt,CategoryAxis:Z,ClusterLayout:it,Crosshair:qt,CrosshairTooltip:Yt,DateCategoryAxis:tt,DateValueAxis:nt,DefaultAggregates:n,DonutChart:Et,DonutPlotArea:Rt,DonutSegment:At,Highlight:Ut,SharedTooltip:Gt,Legend:J,LineChart:mt,LinePoint:pt,LineSegment:ht,Pane:Ft,PieAnimation:Mt,PieAnimationDecorator:Nt,PieChart:Dt,PiePlotArea:Ht,PieSegment:St,PlotAreaBase:It,PlotAreaFactory:Q,ScatterChart:bt,ScatterLineChart:wt,Selection:$t,SeriesAggregator:Kt,SeriesBinder:$,ShapeElement:Dn,StackLayout:rt,Tooltip:jt,OHLCChart:Tt,OHLCPoint:Ct,XYPlotArea:zt,addDuration:b,areNumbers:R,axisGroupBox:A,categoriesCount:f,ceilDate:k,countNumbers:H,duration:T,indexOf:U,isNumber:z,floorDate:y,filterSeriesByType:V,limitValue:D,lteDateIndex:B,evalOptions:O,singleItemOrArray:S,sortDates:W,sparseArrayLimits:o,startOfWeek:w,transpose:q,toDate:v,toTime:_,uniqueDates:j})}(window.kendo.jQuery),function(e){function t(e,t){return e.value.x-t.value.x}function n(e,t){return 180-b.abs(b.abs(e-t)-180)}var i,r,o,a,s,l,d,c,u,p,f,h,g,m,v,_,b=Math,w=window.kendo,y=w.deepExtend,k=w.dataviz,x=k.AreaSegment,C=k.Axis,T=k.AxisGroupRangeTracker,S=k.BarChart,D=k.Box2D,A=k.CategoryAxis,E=k.CategoricalChart,F=k.CategoricalPlotArea,I=k.ChartElement,P=k.DonutSegment,B=k.LineChart,z=k.LineSegment,H=k.NumericAxis,R=k.PlotAreaBase,M=k.PlotAreaFactory,L=k.Point2D,O=k.Ring,N=k.ScatterChart,V=k.ScatterLineChart,U=k.SeriesBinder,W=k.append,j=k.getSpacing,G=k.filterSeriesByType,q=k.limitValue,Y=k.round,Q="arc",$="#000",K=k.COORD_PRECISION,X=.15,J=b.PI/180,Z="plotAreaClick",et="polarArea",tt="polarLine",nt="polarScatter",it="radarArea",rt="radarColumn",ot="radarLine",at="x",st="y",lt="zero",dt=[et,tt,nt],ct=[it,rt,ot],ut={renderGridLines:function(e,t){var n,i,r=this,o=r.options,a=b.abs(r.box.center().y-t.lineBox().y1),s=!1,l=[];return o.majorGridLines.visible&&(n=r.majorGridLineAngles(t),s=!0,l=r.gridLineElements(e,n,a,o.majorGridLines)),o.minorGridLines.visible&&(i=r.minorGridLineAngles(t,s),W(l,r.gridLineElements(e,i,a,o.minorGridLines))),l},gridLineElements:function(e,t,n,i){var r,o,a,s=this,l=s.box.center(),d=s.plotArea.options.modelId,c=[];for(a={data:{modelId:d},zIndex:-1,strokeWidth:i.width,stroke:i.color,dashType:i.dashType},r=0;r<t.length;r++)o=L.onCircle(l,t[r],n),c.push(e.createLine(l.x,l.y,o.x,o.y,a));return c},gridLineAngles:function(t,n,i){var r=this,o=r.intervals(n,i);return e.map(o,function(e){var n=r.intervalAngle(e);return t.options.visible&&90===n?undefined:n})}},pt=A.extend({options:{startAngle:90,labels:{margin:j(10)},majorGridLines:{visible:!0},justified:!0},range:function(){return{min:0,max:this.options.categories.length}},reflow:function(e){this.box=e,this.reflowLabels()},lineBox:function(){return this.box},reflowLabels:function(){var e,t,n=this,i=new D,r=n.labels;for(t=0;t<r.length;t++)r[t].reflow(i),e=r[t].box,r[t].reflow(n.getSlot(t).adjacentBox(0,e.width(),e.height()))},intervals:function(e,t){var n,i=this,r=i.options,o=r.categories.length,a=0,s=0,l=o/e||1,d=360/l,c=[];for(t&&(s=360/(o/t)),n=0;l>n;n++)a=Y(a,K),0!==a%s&&c.push(a%360),r.reverse?a=360+a-d:a+=d;return c},majorIntervals:function(){return this.intervals(1)},minorIntervals:function(){return this.intervals(.5)},intervalAngle:function(e){return(360+e+this.options.startAngle)%360},majorAngles:function(){return e.map(this.majorIntervals(),e.proxy(this.intervalAngle,this))},renderLine:function(){return[]},majorGridLineAngles:function(e){return this.gridLineAngles(e,1)},minorGridLineAngles:function(e,t){return this.gridLineAngles(e,.5,t?1:0)},renderPlotBands:function(e){var t,n,i,r,o,a,s=this,l=s.options,d=l.plotBands||[],c=[];for(t=0;t<d.length;t++)n=d[t],i=s.plotBandSlot(n),r=s.getSlot(n.from),o=n.from-b.floor(n.from),i.startAngle+=o*r.angle,a=b.ceil(n.to)-n.to,i.angle-=(a+o)*r.angle,c.push(e.createSector(i,{fill:n.color,fillOpacity:n.opacity,strokeOpacity:n.opacity,zIndex:-1}));return c},plotBandSlot:function(e){return this.getSlot(e.from,e.to-1)},getSlot:function(e,t){var n,i,r,o=this,a=o.options,s=a.justified,l=o.box,d=o.majorAngles(),c=d.length,u=360/c;return a.reverse&&!s&&(e=(e+1)%c),e=q(b.floor(e),0,c-1),i=d[e],s&&(i-=u/2,0>i&&(i+=360)),t=q(b.ceil(t||e),e,c-1),n=t-e+1,r=u*n,new O(l.center(),0,l.height()/2,i,r)},pointCategoryIndex:function(e){var t,n,i=this,r=null,o=i.options.categories.length;for(t=0;o>t;t++)if(n=i.getSlot(t),n.containsPoint(e)){r=t;break}return r}});y(pt.fn,ut),i=H.extend({options:{majorGridLines:{visible:!0}},renderPlotBands:function(e){var t,n,i,r,o,a=this,s=a.options,l=s.plotBands||[],d=[],c=s.majorGridLines.type,u=a.plotArea.polarAxis,p=u.majorAngles(),f=u.box.center();for(t=0;t<l.length;t++)n=l[t],i={fill:n.color,fillOpacity:n.opacity,strokeOpacity:n.opacity,zIndex:-1},r=a.getSlot(n.from,n.to),o=new O(f,f.y-r.y2,f.y-r.y1,0,360),d.push(c===Q?e.createRing(o,i):e.createPolyline(a.plotBandPoints(o,p),!0,i));return d},plotBandPoints:function(e,t){var n,i=[],r=[];for(n=0;n<t.length;n++)i.push(L.onCircle(e.c,t[n],e.ir)),r.push(L.onCircle(e.c,t[n],e.r));return i.reverse(),i.push(i[0]),r.push(r[0]),r.concat(i)},renderGridLines:function(e,t){var n,i=this,r=i.options,o=i.getTickPositions(r.majorUnit),a=t.majorAngles(),s=0,l=t.box.center(),d=[];return r.majorGridLines.visible&&(s=r.majorUnit,d=i.gridLineElements(e,l,o,a,r.majorGridLines)),r.minorGridLines.visible&&(n=i.getTickPositions(r.minorUnit,s),W(d,i.gridLineElements(e,l,n,a,r.minorGridLines))),d},gridLineElements:function(e,t,n,i,r){var o,a,s,l,d,c=this,u=c.plotArea.options.modelId,p=[];for(o={data:{modelId:u},zIndex:-1,strokeWidth:r.width,stroke:r.color,dashType:r.dashType},l=0;l<n.length;l++)if(s=t.y-n[l],s>0)if(r.type===Q)p.push(e.createCircle(t,s,o));else{for(a=[],d=0;d<i.length;d++)a.push(L.onCircle(t,i[d],s));p.push(e.createPolyline(a,!0,o))}return p},getValue:function(e){var t,i,r,o,a,s,l,d=this,c=d.options,u=d.lineBox(),p=d.plotArea.polarAxis,f=p.majorAngles(),h=p.box.center(),g=e.distanceTo(h),m=g;return c.majorGridLines.type!==Q&&f.length>1&&(t=e.x-h.x,i=e.y-h.y,r=(b.atan2(i,t)/J+540)%360,f.sort(function(e,t){return n(e,r)-n(t,r)}),o=n(f[0],f[1])/2,a=n(r,f[0]),s=90-o,l=180-a-s,m=g*(b.sin(l*J)/b.sin(s*J))),H.fn.getValue.call(d,new L(u.x1,u.y2-m))}}),r=C.extend({init:function(e){var t=this;C.fn.init.call(t,e),e=t.options,e.minorUnit=e.minorUnit||t.options.majorUnit/2},options:{type:"polar",startAngle:0,reverse:!1,majorUnit:60,min:0,max:360,labels:{margin:j(10)},majorGridLines:{color:$,visible:!0},minorGridLines:{color:"#aaa"}},getDivisions:function(e){return H.fn.getDivisions.call(this,e)-1},reflow:function(e){this.box=e,this.reflowLabels()},reflowLabels:function(){var e,t,n=this,i=new D,r=n.majorIntervals(),o=n.labels;for(t=0;t<o.length;t++)o[t].reflow(i),e=o[t].box,o[t].reflow(n.getSlot(r[t]).adjacentBox(0,e.width(),e.height()))},lineBox:function(){return this.box},intervals:function(e,t){var n,i=this,r=i.options,o=i.getDivisions(e),a=r.min,s=[];for(t&&(t/=e),n=0;o>n;n++)0!==n%t&&s.push((360+a)%360),a+=e;return s},majorIntervals:function(){return this.intervals(this.options.majorUnit)},minorIntervals:function(){return this.intervals(this.options.minorUnit)},intervalAngle:function(e){return(360+e-this.options.startAngle)%360},majorAngles:pt.fn.majorAngles,renderLine:function(){return[]},majorGridLineAngles:function(e){return this.gridLineAngles(e,this.options.majorUnit)},minorGridLineAngles:function(e,t){return this.gridLineAngles(e,this.options.minorUnit,t?this.options.majorUnit:0)},renderPlotBands:pt.fn.renderPlotBands,plotBandSlot:function(e){return this.getSlot(e.from,e.to)},getSlot:function(e,t){var n,i=this,r=i.options,o=r.startAngle,a=i.box;return e=q(e,r.min,r.max),t=q(t||e,e,r.max),r.reverse&&(e*=-1,t*=-1),e=(540-e-o)%360,t=(540-t-o)%360,e>t&&(n=e,e=t,t=n),new O(a.center(),0,a.height()/2,e,t-e)},getValue:function(e){var t=this,n=t.options,i=t.box.center(),r=e.x-i.x,o=e.y-i.y,a=b.round(b.atan2(o,r)/J),s=n.startAngle;return n.reverse||(a*=-1,s*=-1),(a+s+360)%360},labelsCount:H.fn.labelsCount,createAxisLabel:H.fn.createAxisLabel}),y(r.fn,ut),o=I.extend({options:{gap:1,spacing:0},reflow:function(e){var t,n,i=this,r=i.options,o=i.children,a=r.gap,s=r.spacing,l=o.length,d=l+a+s*(l-1),c=e.angle/d,u=e.startAngle+c*(a/2);for(n=0;l>n;n++)t=e.clone(),t.startAngle=u,t.angle=c,o[n].sector&&(t.r=o[n].sector.r),o[n].reflow(t),o[n].sector=t,u+=c+c*s}}),a=I.extend({reflow:function(e){var t,n,i,r=this,o=r.options.isReversed,a=r.children,s=a.length,l=o?s-1:0,d=o?-1:1;for(r.box=new D,i=l;i>=0&&s>i;i+=d)t=a[i].sector,t.startAngle=e.startAngle,t.angle=e.angle,i!==l&&(n=a[o?i+1:i-1].sector,t.ir=n.r,t.r+=t.ir)}}),s=P.extend({init:function(e,t){P.fn.init.call(this,e,null,t)},options:{overlay:{gradient:null},labels:{distance:10}}}),l=S.extend({pointType:function(){return s},clusterType:function(){return o},stackType:function(){return a},valueSlot:function(e,t){return e.getSlot(t)},categorySlot:function(e,t){return e.getSlot(t)},pointSlot:function(e,t){var n=e.clone(),i=e.c.y-t.y1;return n.r=i,n},reflow:E.fn.reflow,reflowPoint:function(e,t){e.sector=t,e.reflow()}}),d=B.extend({pointSlot:function(e,t){var n=e.c.y-t.y1,i=L.onCircle(e.c,e.middle(),n);return new D(i.x,i.y,i.x,i.y)},createSegment:function(e,t,n){var i=new z(e,t,n);return e.length===t.data.length&&(i.options.closed=!0),i}}),c=x.extend({points:function(){return z.fn.points.call(this,this.stackPoints)}}),u=d.extend({createSegment:function(e,t,n,i){var r,o=this,a=o.options;return a.isStacked&&n>0&&i&&(r=i.linePoints.slice(0).reverse()),e.push(e[0]),new c(e,r,t,n)},seriesMissingValues:function(e){return e.missingValues||lt}}),p=N.extend({pointSlot:function(e,t){var n=e.c.y-t.y1,i=L.onCircle(e.c,e.startAngle,n);return new D(i.x,i.y,i.x,i.y)}}),f=V.extend({pointSlot:p.fn.pointSlot}),h=x.extend({points:function(){var e=this,t=e.parent,n=t.plotArea,i=n.polarAxis,r=i.box.center(),o=e.stackPoints,a=z.fn.points.call(e,o);return a.unshift(r),a.push(r),a}}),g=f.extend({createSegment:function(e,t,n){return new h(e,[],t,n)},seriesMissingValues:function(e){return e.missingValues||lt},sortPoints:function(e){return e.sort(t)}}),m=R.extend({init:function(e,t){var n=this;n.valueAxisRangeTracker=new T,R.fn.init.call(n,e,t)},render:function(){var e=this;e.addToLegend(e.series),e.createPolarAxis(),e.createCharts(),e.createValueAxis()},createValueAxis:function(){var e,t,n=this,r=n.valueAxisRangeTracker,o=r.query();e=r.query(name)||o||{min:0,max:1},e&&o&&(e.min=b.min(e.min,o.min),e.max=b.max(e.max,o.max)),t=new i(e.min,e.max,n.valueAxisOptions({roundToMajorUnit:!1})),n.valueAxis=t,n.appendAxis(t)},reflowAxes:function(){var e,t=this,n=t.options.plotArea,i=t.valueAxis,r=t.polarAxis,o=t.box,a=b.min(o.width(),o.height())*X,s=j(n.padding||{},a),l=o.clone().unpad(s),d=l.clone().shrink(0,l.height()/2);r.reflow(l),i.reflow(d),e=i.lineBox().height()-i.box.height(),i.reflow(i.box.unpad({top:e})),t.axisBox=l,t.alignAxes(l)},alignAxes:function(){var e=this,t=e.valueAxis,n=t.getSlot(t.options.min),i=t.options.reverse?2:1,r=e.polarAxis.getSlot(0).c,o=t.box.translate(r.x-n[at+i],r.y-n[st+i]);t.reflow(o)},backgroundBox:function(){return this.box}}),v=m.extend({options:{categoryAxis:{categories:[]},valueAxis:{}},createPolarAxis:function(){var e,t=this;e=new pt(t.options.categoryAxis),t.polarAxis=e,t.categoryAxis=e,t.appendAxis(e)},valueAxisOptions:function(e){var t=this;return t._hasBarCharts&&y(e,{majorGridLines:{type:Q},minorGridLines:{type:Q}}),y(e,t.options.valueAxis)},appendChart:F.fn.appendChart,createCharts:function(){var e=this,t=e.series,n=e.panes[0];e.createAreaChart(G(t,[it]),n),e.createLineChart(G(t,[ot]),n),e.createBarChart(G(t,[rt]),n)},createAreaChart:function(e,t){if(0!==e.length){var n=this,i=e[0],r=n.filterVisibleSeries(e),o=new u(n,{isStacked:i.stack&&r.length>1,series:e});n.appendChart(o,t)}},createLineChart:function(e,t){if(0!==e.length){var n=this,i=e[0],r=n.filterVisibleSeries(e),o=new d(n,{isStacked:i.stack&&r.length>1,series:e});n.appendChart(o,t)}},createBarChart:function(e,t){if(0!==e.length){var n=this,i=e[0],r=n.filterVisibleSeries(e),o=new l(n,{isStacked:i.stack&&r.length>1,series:e,gap:i.gap,spacing:i.spacing});n._hasBarCharts=!0,n.appendChart(o,t)}},seriesCategoryAxis:function(){return this.categoryAxis},click:function(t,n){var i,r,o=this,a=t._eventCoordinates(n),s=new L(a.x,a.y);i=o.categoryAxis.getCategory(s),r=o.valueAxis.getValue(s),null!==i&&null!==r&&t.trigger(Z,{element:e(n.target),category:i,value:r})}}),_=m.extend({options:{xAxis:{},yAxis:{}},createPolarAxis:function(){var e,t=this;e=new r(t.options.xAxis),t.polarAxis=e,t.axisX=e,t.appendAxis(e)},valueAxisOptions:function(e){var t=this;return y(e,{majorGridLines:{type:Q},minorGridLines:{type:Q}},t.options.yAxis)},createValueAxis:function(){var e=this;m.fn.createValueAxis.call(e),e.axisY=e.valueAxis},appendChart:function(e,t){var n=this;n.valueAxisRangeTracker.update(e.yAxisRanges),R.fn.appendChart.call(n,e,t)},createCharts:function(){var e=this,t=e.series,n=e.panes[0];e.createLineChart(G(t,[tt]),n),e.createScatterChart(G(t,[nt]),n),e.createAreaChart(G(t,[et]),n)},createLineChart:function(e,t){if(0!==e.length){var n=this,i=new f(n,{series:e});n.appendChart(i,t)}},createScatterChart:function(e,t){if(0!==e.length){var n=this,i=new p(n,{series:e});n.appendChart(i,t)}},createAreaChart:function(e,t){if(0!==e.length){var n=this,i=new g(n,{series:e});n.appendChart(i,t)}},click:function(t,n){var i,r,o=this,a=t._eventCoordinates(n),s=new L(a.x,a.y);i=o.axisX.getValue(s),r=o.axisY.getValue(s),null!==i&&null!==r&&t.trigger(Z,{element:e(n.target),x:i,y:r})}}),M.current.register(_,dt),M.current.register(v,ct),U.current.register(dt,[at,st],["color"]),U.current.register(ct,["value"],["color"]),k.DefaultAggregates.current.register(ct,{value:"max",color:"first"}),y(k,{PolarAxis:r,PolarPlotArea:_,RadarBarChart:l,RadarCategoryAxis:pt,RadarClusterLayout:o,RadarNumericAxis:i,RadarPlotArea:v,RadarStackLayout:a})}(window.kendo.jQuery),function(){function e(e,t,n){var i=S(e.from)?e.from:O,r=S(e.to)?e.to:L;return e.from=a.max(a.min(r,i),t),e.to=a.min(a.max(r,i),n),e}var t,n,i,r,o,a=Math,s=window.kendo,l=s.ui.Widget,d=s.deepExtend,c=s.dataviz,u=c.Axis,p=c.Box2D,f=c.ChartElement,h=c.NumericAxis,g=c.Pin,m=c.Ring,v=c.RootElement,_=c.RotationAnimation,b=c.BarIndicatorAnimatin,w=c.ArrowAnimation,y=c.append,k=c.animationDecorator,x=c.autoMajorUnit,C=c.getElement,T=c.getSpacing,S=c.defined,D=c.rotatePoint,A=c.Point2D,E=c.round,F=c.uniqueId,I=150,P="arrow",B="arrowPointer",z="barIndicator",H="#000",R=.05,M=c.COORD_PRECISION,L=Number.MAX_VALUE,O=-Number.MAX_VALUE,N=200,V=.5,U=200,W=60,j=60,G=a.PI/180,q="inside",Y="needle",Q="outside",$="radialPointer",K=90,X=f.extend({init:function(e,t){var n=this,i=e.options;f.fn.init.call(n,t),t=n.options,t.id||(t.id=F()),t.fill=t.color,n.scale=e,t.value=S(t.value)?a.min(a.max(t.value,i.min),i.max):i.min},options:{color:H},value:function(e){var t=this,n=t.options,i=n.value,r=t.scale.options;return 0===arguments.length?i:(n._oldValue=n.value,n.value=a.min(a.max(e,r.min),r.max),t.repaint(),undefined)}}),J=X.extend({options:{shape:Y,cap:{size:R},arrow:{width:16,height:14},animation:{type:$,speed:I}},reflow:function(){var e=this,t=e.options,n=e.scale,i=n.ring,r=i.c,o=i.r*t.cap.size;e.box=new p(r.x-o,r.y-o,r.x+o,r.y+o)},repaint:function(){var e=this,t=e.scale,n=e.options,i=e.elements[0],r=n.animation,o=t.slotAngle(t.options.min),a=t.slotAngle(n._oldValue)-o,s=i._animation;i.options.rotation[0]=t.slotAngle(n.value)-o,s&&s.abort(),r.transitions===!1?i.refresh(C(n.id)):(s=i._animation=new _(i,d(r,{startAngle:a,reverse:t.options.reverse})),s.setup(),s.play())},_renderNeedle:function(e,t,n,i){var r=this,o=r.options,a=r.scale,s=a.ring.r*o.cap.size;return[e.createPolyline([D((t.x1+t.x2)/2,t.y1+a.options.minorTicks.size,n.x,n.y,i),D(n.x-s/2,n.y,n.x,n.y,i),D(n.x+s/2,n.y,n.x,n.y,i)],!0,o),e.createCircle(n,s,{fill:o.cap.color||o.color})]},_renderArrow:function(e,t,n,i){var r=this,o=r.options,a=r.scale,s=a.ring.clone(),l=5,d=o.arrow,c=d.height;return s.ir=s.r-l,[e.createPin(new g({origin:D((t.x1+t.x2)/2,t.y1+c,n.x,n.y,i),height:d.height,radius:l,rotation:i,arcAngle:180}),o),e.createRing(s,{fill:o.color})]},renderPointer:function(e){var t,n=this,i=n.scale,r=i.ring,o=r.c,a=r.r,s=n.options,l=new p(o.x-a,o.y-a,o.x+a,o.y+a),c=l.center(),u=i.slotAngle(i.options.min),f=K-u;return s.animation!==!1&&d(s.animation,{startAngle:0,center:c,reverse:i.options.reverse}),d(s,{rotation:[i.slotAngle(s.value)-u,c.x,c.y]}),t=s.shape==P?n._renderArrow(e,l,c,f):n._renderNeedle(e,l,c,f)},getViewElements:function(e){var t=this,n=t.renderPointer(e);return t.elements=n,n}}),Z=h.extend({init:function(e){var t=this;t.options=d({},t.options,e),t.options.majorUnit=t.options.majorUnit||x(t.options.min,t.options.max),u.fn.init.call(t,t.options),t.options.minorUnit=t.options.minorUnit||t.options.majorUnit/10},options:{min:0,max:100,majorTicks:{size:15,align:q,color:H,width:V,visible:!0},minorTicks:{size:10,align:q,color:H,width:V,visible:!0},startAngle:-30,endAngle:210,labels:{position:q,padding:2}},reflow:function(e){var t=this,n=t.options,i=e.center(),r=a.min(e.height(),e.width())/2,o=t.ring||new c.Ring(i,r-n.majorTicks.size,r,n.startAngle,n.endAngle-n.startAngle);t.ring=o,t.box=o.getBBox(),t.arrangeLabels()},slotAngle:function(e){var t,n=this.options,i=n.startAngle,r=n.reverse,o=n.endAngle-i,a=n.min,s=n.max;return t=r?n.endAngle-(e-a)/(s-a)*o:(e-a)/(s-a)*o+i},renderTicks:function(e){function t(t,r,o,a,s){var l,d,c,u=n.tickAngles(t,r),p=s/r,f=u.length;if(a)for(l=0;f>l;l++)0!==l%p&&(c=t.point(u[l]),d=t.point(u[l],!0),i.push(e.createLine(d.x,d.y,c.x,c.y,{align:!1,stroke:o.color,strokeWidth:o.width})))}var n=this,i=[],r=n.ring,o=r.clone(),a=n.options,s=a.minorTicks.size;return t(r,a.majorUnit,a.majorTicks,a.majorTicks.visible),a.labels.position==q?o.radius(o.r-s,!0):o.radius(o.ir+s),t(o,a.minorUnit,a.minorTicks,a.minorTicks.visible,a.majorUnit),i},arrangeLabels:function(){var e,t,n,i,r,o,s,l,d,c,u=this,f=u.options,h=u.ring.clone(),g=u.tickAngles(h,f.majorUnit),m=u.labels,v=m.length,_=f.labels,b=_.padding,w=.05*h.r,y=f.rangeSize=f.rangeSize||.1*h.r,k=f.ranges||[];for(undefined!==u.options.rangeDistance?w=u.options.rangeDistance:u.options.rangeDistance=w,_.position===q&&k.length&&(h.r-=y+w,h.ir-=y+w),s=0;v>s;s++)r=m[s],e=r.box.width()/2,t=r.box.height()/2,i=g[s],n=i*G,c=_.position===q,o=h.point(i,c),l=o.x+a.cos(n)*(e+b)*(c?1:-1),d=o.y+a.sin(n)*(t+b)*(c?1:-1),r.reflow(new p(l-e,d-t,l+e,d+t)),u.box.wrap(r.box)},tickAngles:function(e,t){var n,i=this,r=i.options,o=r.reverse,a=r.max-r.min,s=e.angle,l=e.startAngle,d=a/t,c=s/d,u=[];for(o&&(l+=s,c=-c),n=0;d>n;n++)u.push(E(l,M)),l+=c;return E(l)<=r.endAngle&&u.push(l),u},renderRanges:function(e){var t,n,i,r,o,a=this,s=[],l=a.rangeSegments(),d=l.length,c=a.options.reverse;if(d)for(r=a.getRadius(),o=0;d>o;o++)i=l[o],t=a.slotAngle(i[c?"to":"from"]),n=a.slotAngle(i[c?"from":"to"]),0!==n-t&&s.push(e.createRing(new m(a.ring.c,r.inner,r.outer,t,n-t),{fill:i.color,fillOpacity:i.opacity,zIndex:-1}));return s},rangeSegments:function(){function t(e,t,n){return{from:e,to:t,color:n}}var n,i,r,o,a,s=this,l=s.options,d=l.ranges||[],c=d.length,u=l.rangePlaceholderColor,p=[],f=l.min,h=l.max;if(c)for(p.push(t(f,h,u)),o=0;c>o;o++)for(n=e(d[o],f,h),i=p.length,a=0;i>a;a++)if(r=p[a],r.from<=n.from&&n.from<=r.to){p.push(t(n.from,n.to,n.color)),r.from<=n.to&&n.to<=r.to&&p.push(t(n.to,r.to,u)),r.to=n.from;break}return p},getRadius:function(){var e,t,n=this,i=n.options,r=i.rangeSize,o=i.rangeDistance,a=n.ring;return i.labels.position===Q?(t=a.ir-o,e=t-r):(t=a.r,e=t-r,a.r-=r+o,a.ir-=r+o),{inner:e,outer:t}},getViewElements:function(e){var t=this,n=f.fn.getViewElements.call(t,e);return y(n,t.renderRanges(e)),y(n,t.renderTicks(e)),n}}),et=f.extend({init:function(e){f.fn.init.call(this,e),this.render()},options:{margin:{},background:"",border:{color:H,width:0},minorTicks:{align:q}},reflow:function(e){var t,n=this,i=n.scale,r=n.pointer;i.reflow(e),t=i.box.clone(),r.scale=i,r.reflow(),t.wrap(r.box),n.box=t,n.fitScale(e),n.alignScale(e)},alignScale:function(e){var t=this,n=t.box.center(),i=e.center(),r=n.x-i.x,o=n.y-i.y,a=t.scale,s=t.pointer;a.ring.c.x-=r,a.ring.c.y-=o,a.reflow(e),s.reflow(),t.box=a.box.clone().wrap(s.box)},fitScale:function(e){for(var t,n,i,r,o=this,s=o.scale,l=s.ring,d=o.box,c=a.abs(o.getDiff(d,e)),u=E(c,M),p=E(-c,M),f=0;!(!(100>f)||(f++,u!=r&&(t=o.getPlotBox(u,e,l),t>=0&&2>=t))||p!=r&&(i=o.getPlotBox(p,e,l),i>=0&&2>=i)||(r=t>0&&i>0?2*u:0>t&&0>i?2*p:E((u+p)/2||1,M),n=o.getPlotBox(r,e,l),n>=0&&2>=n));)n>0?(p=r,i=n):(u=r,t=n)},getPlotBox:function(e,t,n){var i=this,r=i.scale,o=i.pointer;return n=n.clone(),n.r+=e,n.ir+=e,r.ring=n,r.reflow(t),o.scale=r,o.reflow(),i.box=r.box.clone().wrap(o.box),i.getDiff(i.box,t)},getDiff:function(e,t){return a.min(t.width()-e.width(),t.height()-e.height())},render:function(){var e,t=this,n=t.options;e=t.scale=new Z(n.scale),t.append(t.scale),t.pointer=new J(e,d({},n.pointer,{animation:{transitions:n.transitions}})),t.append(t.pointer)}}),tt=h.extend({init:function(e){var t=this;t.options=d({},t.options,e),t.options=d({},t.options,{labels:{mirror:t.options.mirror}}),t.options.majorUnit=t.options.majorUnit||x(t.options.min,t.options.max),u.fn.init.call(t,t.options),t.options.minorUnit=t.options.minorUnit||t.options.majorUnit/10},options:{min:0,max:50,majorTicks:{size:15,align:q,color:H,width:V,visible:!0},minorTicks:{size:10,align:q,color:H,width:V,visible:!0},line:{width:V},labels:{position:q,padding:2},mirror:!1,_alignLines:!1},renderRanges:function(t){var n,i,r,o,a,s=this,l=s.options,d=l.min,c=l.max,u=l.ranges||[],f=l.vertical,h=l.labels.mirror,g=[],m=u.length,v=l.rangeSize||l.minorTicks.size/2;if(m)for(o=0;m>o;o++)n=e(u[o],d,c),a=s.getSlot(n.from,n.to),i=f?s.lineBox():a,r=f?a:s.lineBox(),f?i.x1-=v*(h?-1:1):r.y2+=v*(h?-1:1),g.push(t.createRect(new p(i.x1,r.y1,i.x2,r.y2),{fill:n.color,fillOpacity:n.opacity}));return g},getViewElements:function(e){var t=this,n=h.fn.getViewElements.call(t,e);return y(n,t.renderRanges(e)),n}}),nt=X.extend({init:function(e,t){var n=this;X.fn.init.call(n,e,t),n.options=d({size:n.pointerSize(),track:{visible:S(t.track)}},n.options)
},options:{shape:z,track:{border:{width:1}},color:H,border:{width:1},opacity:1,margin:T(3),animation:{type:z},visible:!0},repaint:function(){var e=this,t=e.scale,n=e.options,i=e.element,r=i._animation;r&&r.abort(),n.animation.transitions===!1?(e.getViewElements(e._view),i.points=e.element.points,i.refresh(C(n.id))):(n.animation=d({},n.animation,{endPosition:t.getSlot(t.options.min,n.value),reverse:t.options.reverse}),r=i._animation=n.shape===P?new w(i,n.animation):new b(i,n.animation),r.setup(),r.play())},reflow:function(){var e,t,n,i=this,r=i.options,o=i.scale,a=o.lineBox(),s=r.track.size||r.size,l=r.size/2,d=o.options.mirror,c=T(r.margin),u=o.options.vertical,f=u?c[d?"left":"right"]:c[d?"bottom":"top"];f=d?-f:f,u?(n=new p(a.x1+f,a.y1,a.x1+f,a.y2),d?n.x1-=s:n.x2+=s,r.shape!==z&&(t=new p(a.x2+f,a.y1-l,a.x2+f,a.y2+l),e=t)):(n=new p(a.x1,a.y1-f,a.x2,a.y1-f),d?n.y2+=s:n.y1-=s,r.shape!==z&&(t=new p(a.x1-l,a.y1-f,a.x2+l,a.y1-f),e=t)),i.trackBox=n,i.pointerRangeBox=t,i.box=e||n.clone().pad(r.border.width)},renderPointer:function(e){var t,n=this,i=n.scale,r=n.options,o=S(r.border)?{stroke:r.border.width?r.border.color||r.color:"",strokeWidth:r.border.width,dashType:r.border.dashType}:{},a=d({fill:r.color,fillOpacity:r.opacity,animation:d(r.animation,{startPosition:i.getSlot(i.options.min,r.value),size:r.size,vertical:i.options.vertical,reverse:i.options.reverse}),id:r.id,zIndex:2,align:!1},o),s=n.pointerShape(r.value);return r.shape===P?(a.animation.type=B,t=e.createPolyline(s,!0,a)):t=e.createRect(s,a),t},pointerShape:function(e){var t,n,i,r=this,o=r.options,a=r.scale,s=a.getSlot(e,a.options.min),l=o.size,d=r.pointerRangeBox,c=a.options.vertical,u=l/2,f=a.options.mirror?-1:1,h=a.options.reverse;return o.shape==P?c?(n=h?"y2":"y1",t=[new A(d.x1,s[n]-u),new A(d.x1-f*l,s[n]),new A(d.x1,s[n]+u)]):(n=h?"x1":"x2",t=[new A(s[n]-u,d.y2),new A(s[n],d.y2+f*l),new A(s[n]+u,d.y2)]):(i=r.trackBox,t=c?new p(i.x1,s.y1,i.x1+l,s.y2):new p(s.x1,i.y1,s.x2,i.y1+l)),t},pointerSize:function(){var e,t=this,n=t.options,i=t.scale,r=i.options.majorTicks.size;return e=n.shape===P?.6*r:.3*r,E(e)},renderTrack:function(e){var t=this,n=t.options,i=n.track,r=i.border||{},o=t.trackBox.clone().pad(r.width||0);return e.createRect(o,{fill:i.color,fillOpacity:i.opacity,stroke:r.width?r.color||i.color:"",strokeWidth:r.width,dashType:r.dashType,align:!1})},getViewElements:function(e){var t=this,n=t.options,i=[];return t.element=t.renderPointer(e),i.push(t.element),!n.track.visible||n.shape!==z&&""!==n.shape||i.push(t.renderTrack(e)),t._view=e,y(i,X.fn.getViewElements.call(t,e)),i}}),it=f.extend({init:function(e){f.fn.init.call(this,e),this.render()},options:{plotArea:{margin:{},background:"",border:{color:H,width:0}},pointer:{},scale:{}},reflow:function(e){var t=this,n=t.scale,i=t.pointer;n.reflow(e),i.reflow(e),t.box=t.getBox(e),t.alignElements(),t.shrinkElements()},shrinkElements:function(){var e=this,t=e.scale,n=e.pointer,i=t.box.clone(),r=n.box,o=t.options.vertical?"y":"x";i[o+1]+=a.max(i[o+1]-r[o+1],0),i[o+2]-=a.max(r[o+2]-i[o+2],0),t.reflow(i),n.reflow(e.box)},getBox:function(e){var t,n=this,i=n.scale,r=n.pointer,o=e.center(),a=r.box.clone().wrap(i.box);return i.options.vertical?(t=a.width()/2,a=new p(o.x-t,e.y1,o.x+t,e.y2)):(t=a.height()/2,a=new p(e.x1,o.y-t,e.x2,o.y+t)),a},alignElements:function(){var e,t=this,n=t.scale,i=t.pointer,r=n.box,o=i.box.clone().wrap(n.box),a=t.box;n.options.vertical?(e=a.center().x-o.center().x,n.reflow(new p(r.x1+e,a.y1,r.x2+e,a.y2))):(e=a.center().y-o.center().y,n.reflow(new p(a.x1,r.y1+e,a.x2,r.y2+e))),i.reflow(t.box)},render:function(){var e,t=this,n=t.options;e=t.scale=new tt(n.scale),t.append(t.scale),t.pointer=new nt(e,d({},n.pointer,{animation:{transitions:n.transitions}})),t.append(t.pointer)},getViewElements:function(e){var t=this,n=t.options.plotArea,i=f.fn.getViewElements.call(t,e),r=n.border||{},o=[e.createRect(t.box,{fill:n.background,stroke:r.width?r.color:"",strokeWidth:r.width,dashType:r.dashType})];return y(o,i),o}}),rt=l.extend({init:function(e,t){var n,i,r,o,a=this,s=c.ui.themes||{};l.fn.init.call(a,e),a.wrapper=a.element,a._originalOptions=d({},t),n=d({},a.options,t),r=n.theme,o=s[r]||s[r.toLowerCase()],i=r&&o?o.gauge:{},a.options=d({},i,n),a.element.addClass("k-gauge"),a.redraw()},options:{plotArea:{},theme:"default",renderAs:"",pointer:{},scale:{},gaugeArea:{}},value:function(e){var t=this,n=t._pointers[0];return 0===arguments.length?n.value():(t.options.pointer.value=e,t._view.renderElement?n.value(e):t.redraw(),undefined)},redraw:function(){var e,t=this,n=t.element,i=t._model=t._getModel();t._plotArea=i._plotArea,e=t._view=c.ViewFactory.current.create(i.options,t.options.renderAs),e&&(e.load(i),t._viewElement=e.renderTo(n[0]))},_createModel:function(){var e=this,t=e.options,n=e._getSize();return new v(d({width:n.width,height:n.height,transitions:t.transitions},t.gaugeArea))},_getSize:function(){var e=this,t=e.element,n=t.width(),i=t.height();return n||(n=U),i||(i=N),{width:n,height:i}}});d(rt.fn,c.ExportMixin),t=rt.extend({init:function(e,t){var n=this;rt.fn.init.call(n,e,t),s.notify(n,c.ui)},options:{name:"RadialGauge",transitions:!0,gaugeArea:{background:""}},_getModel:function(){var e,t=this,n=t.options,i=t._createModel();return e=i._plotArea=new et(n),t._pointers=[e.pointer],i.append(e),i.reflow(),i}}),n=rt.extend({init:function(e,t){var n=this;rt.fn.init.call(n,e,t),s.notify(n,c.ui)},options:{name:"LinearGauge",transitions:!0,gaugeArea:{background:""},scale:{vertical:!0}},_getModel:function(){var e,t=this,n=t.options,i=t._createModel();return e=i._plotArea=new it(n),t._pointers=[e.pointer],i.append(e),i.reflow(),i},_getSize:function(){var e=this,t=e.element,n=t.width(),i=t.height(),r=e.options.scale.vertical;return n||(n=r?W:U),i||(i=r?N:j),{width:n,height:i}}}),i=k($,_),r=k(B,w),o=k(z,b),c.ui.plugin(t),c.ui.plugin(n),d(c,{Gauge:rt,RadialGaugePlotArea:et,LinearGaugePlotArea:it,RadialPointer:J,LinearPointer:nt,LinearScale:tt,RadialScale:Z,RadialPointerAnimationDecorator:i,ArrowPointerAnimationDecorator:r,BarIndicatorAnimationDecorator:o})}(window.kendo.jQuery),function(e,t){function n(e,t,n){return e.substring(t,t+n)}var i,r,o,a,s,l,d=window.kendo,c=e.extend,u=d.deepExtend,p=e.inArray,f=e.isPlainObject,h=d.dataviz,g=d.ui.Widget,m=h.Box2D,v=h.Text,_=300,b=100,w=10,y=/^\d+$/,k=/^[a-z0-9]+$/i,x="Character '{0}'  is not valid for symbology {1}",C=d.Class.extend({init:function(e){this.setOptions(e)},setOptions:function(e){var t=this;t.options=c({},t.options,e),t.quietZoneLength=t.options.addQuietZone?2*t.options.quietZoneLength:0},encode:function(e,n,i){var r=this;return e!==t&&(e+=""),r.initValue(e,n,i),r.options.addQuietZone&&r.addQuietZone(),r.addData(),r.options.addQuietZone&&r.addQuietZone(),{baseUnit:r.baseUnit,pattern:r.pattern}},options:{quietZoneLength:w,addQuietZone:!0,addCheckSum:!0},initValue:function(){},addQuietZone:function(){this.pattern.push(this.options.quietZoneLength||w)},addData:function(){},invalidCharacterError:function(e){throw Error(d.format(x,e,this.name))}}),T={},S=C.extend({minBaseUnitLength:.7,addData:function(){var e,t=this,n=t.value;for(t.addStart(),e=0;e<n.length;e++)t.addCharacter(n.charAt(e));t.options.addCheckSum&&t.pushCheckSum(),t.addStop(),t.prepareValues()},addCharacter:function(e){var t=this,n=t.characterMap[e];n||t.invalidCharacterError(e),t.addBase(n)},addBase:function(){}}),D={addCharacter:function(e){var t=this;t.characterMap[e]?t.addBase(t.characterMap[e]):e.charCodeAt(0)>127?t.invalidCharacterError(e):t.addExtended(e.charCodeAt(0))},addExtended:function(e){var n,i,r,o=this;for(i=0;i<o.extendedMappings.length;i++)if(n=o.extendedMappings[i].call(o,e)){for(r=0;r<n.length;r++)o.addBase(n[r]);return o.dataLength+=n.length-1,t}},extendedMappings:[function(e){if(e>=97&&122>=e){var t=this;return[t.characterMap[t.shiftCharacters[0]],t.characterMap[String.fromCharCode(e-32)]]}},function(e){if(e>=33&&58>=e){var t=this;return[t.characterMap[t.shiftCharacters[1]],t.characterMap[String.fromCharCode(e+32)]]}},function(e){if(e>=1&&26>=e){var t=this;return[t.characterMap[t.shiftCharacters[2]],t.characterMap[String.fromCharCode(e+64)]]}},function(e){var t,n,i,r=this;if(r.specialAsciiCodes[e])for(t=[],i=0;i<r.specialAsciiCodes[e].length;i++)t.push(r.characterMap[r.shiftCharacters[3]]),t.push(r.characterMap[r.specialAsciiCodes[e][i]]);else n=6*Math.floor(e/32)+(e-27)%32+64,t=[r.characterMap[r.shiftCharacters[3]],r.characterMap[String.fromCharCode(n)]];return t}],specialAsciiCodes:{0:["U"],64:["V"],96:["W"],127:["T","X","Y","Z"]},shiftValuesAsciiCodes:{39:36,40:47,41:43,42:37},characterMap:{"+":!1,"/":!1,$:!1,"%":!1},shiftCharacters:["SHIFT0","SHIFT1","SHIFT2","SHIFT3"]};T.code39=S.extend({name:"Code 39",checkSumMod:43,minRatio:2.5,maxRatio:3,gapWidth:1,splitCharacter:"|",initValue:function(e,t,n){var i=this;i.width=t,i.height=n,i.value=e,i.dataLength=e.length,i.pattern=[],i.patternString=""},prepareValues:function(){var e,t,n=this,i=n.minBaseUnitLength,r=n.maxRatio,o=n.minRatio,a=Math.max(.15*n.width,24);if(n.height<a)throw Error("Insufficient Height. The minimum height for value: "+n.value+" is: "+a);for(;(e=n.getBaseUnit(r))<i&&r>o;)r=parseFloat((r-.1).toFixed(1));if(i>e)throw t=Math.ceil(n.getBaseWidth(o)*i),Error("Insufficient width. The minimum width for value: "+n.value+" is: "+t);n.ratio=r,n.baseUnit=e,n.patternString=n.patternString.substring(0,n.patternString.length-1),n.pattern=n.pattern.concat(n.patternString.replace(/ratio/g,r).split(n.splitCharacter))},getBaseUnit:function(e){return this.width/this.getBaseWidth(e)},getBaseWidth:function(e){var t=this,n=3*(e+2);return t.quietZoneLength+n*(t.dataLength+2)+t.gapWidth*(t.dataLength+1)},addStart:function(){var e=this;e.addPattern(e.characterMap.START.pattern),e.addCharacterGap()},addBase:function(e){this.addPattern(e.pattern),this.addCharacterGap()},addStop:function(){this.addPattern(this.characterMap.START.pattern)},addPattern:function(e){for(var t=0;t<e.length;t++)this.patternString+=this.patternMappings[e.charAt(t)]},addCharacterGap:function(){var e=this;e.patternString+=e.gapWidth+e.splitCharacter},patternMappings:{b:"1|",w:"1|",B:"ratio|",W:"ratio|"},characterMap:{0:{pattern:"bwbWBwBwb",value:0},1:{pattern:"BwbWbwbwB",value:1},2:{pattern:"bwBWbwbwB",value:2},3:{pattern:"BwBWbwbwb",value:3},4:{pattern:"bwbWBwbwB",value:4},5:{pattern:"BwbWBwbwb",value:5},6:{pattern:"bwBWBwbwb",value:6},7:{pattern:"bwbWbwBwB",value:7},8:{pattern:"BwbWbwBwb",value:8},9:{pattern:"bwBWbwBwb",value:9},A:{pattern:"BwbwbWbwB",value:10},B:{pattern:"bwBwbWbwB",value:11},C:{pattern:"BwBwbWbwb",value:12},D:{pattern:"bwbwBWbwB",value:13},E:{pattern:"BwbwBWbwb",value:14},F:{pattern:"bwBwBWbwb",value:15},G:{pattern:"bwbwbWBwB",value:16},H:{pattern:"BwbwbWBwb",value:17},I:{pattern:"bwBwbWBwb",value:18},J:{pattern:"bwbwBWBwb",value:19},K:{pattern:"BwbwbwbWB",value:20},L:{pattern:"bwBwbwbWB",value:21},M:{pattern:"BwBwbwbWb",value:22},N:{pattern:"bwbwBwbWB",value:23},O:{pattern:"BwbwBwbWb",value:24},P:{pattern:"bwBwBwbWb",value:25},Q:{pattern:"bwbwbwBWB",value:26},R:{pattern:"BwbwbwBWb",value:27},S:{pattern:"bwBwbwBWb",value:28},T:{pattern:"bwbwBwBWb",value:29},U:{pattern:"BWbwbwbwB",value:30},V:{pattern:"bWBwbwbwB",value:31},W:{pattern:"BWBwbwbwb",value:32},X:{pattern:"bWbwBwbwB",value:33},Y:{pattern:"BWbwBwbwb",value:34},Z:{pattern:"bWBwBwbwb",value:35},"-":{pattern:"bWbwbwBwB",value:36},".":{pattern:"BWbwbwBwb",value:37}," ":{pattern:"bWBwbwBwb",value:38},$:{pattern:"bWbWbWbwb",value:39},"/":{pattern:"bWbWbwbWb",value:40},"+":{pattern:"bWbwbWbWb",value:41},"%":{pattern:"bwbWbWbWb",value:42},START:{pattern:"bWbwBwBwb"}},options:{addCheckSum:!1}}),T.code39extended=T.code39.extend(u({},D,{name:"Code 39 extended",characterMap:{SHIFT0:{pattern:"bWbwbWbWb",value:41},SHIFT1:{pattern:"bWbWbwbWb",value:40},SHIFT2:{pattern:"bWbWbWbwb",value:39},SHIFT3:{pattern:"bwbWbWbWb",value:42}}})),T.code93=S.extend({name:"Code 93",cCheckSumTotal:20,kCheckSumTotal:15,checkSumMod:47,initValue:function(e,t,n){var i=this;i.value=e,i.width=t,i.height=n,i.pattern=[],i.values=[],i.dataLength=e.length},prepareValues:function(){var e=this,t=Math.max(.15*e.width,24);if(e.height<t)throw Error("Insufficient Height");if(e.setBaseUnit(),e.baseUnit<e.minBaseUnitLength)throw Error("Insufficient Width")},setBaseUnit:function(){var e=this,t=2;e.baseUnit=e.width/(9*(e.dataLength+2+t)+e.quietZoneLength+1)},addStart:function(){var e=this.characterMap.START.pattern;this.addPattern(e)},addStop:function(){var e=this;e.addStart(),e.pattern.push(e.characterMap.TERMINATION_BAR)},addBase:function(e){this.addPattern(e.pattern),this.values.push(e.value)},pushCheckSum:function(){var e,t,n=this,i=n._getCheckValues();for(n.checksum=i.join(""),t=0;t<i.length;t++)e=n.characterMap[n._findCharacterByValue(i[t])],n.addPattern(e.pattern)},_getCheckValues:function(){var e,t,n,i=this,r=i.values,o=r.length,a=0;for(n=o-1;n>=0;n--)a+=i.weightedValue(r[n],o-n,i.cCheckSumTotal);for(e=a%i.checkSumMod,a=i.weightedValue(e,1,i.kCheckSumTotal),n=o-1;n>=0;n--)a+=i.weightedValue(r[n],o-n+1,i.kCheckSumTotal);return t=a%i.checkSumMod,[e,t]},_findCharacterByValue:function(e){for(var t in this.characterMap)if(this.characterMap[t].value===e)return t},weightedValue:function(e,t,n){return(t%n||n)*e},addPattern:function(e){var t,n;for(n=0;n<e.length;n++)t=parseInt(e.charAt(n),10),this.pattern.push(t)},characterMap:{0:{pattern:"131112",value:0},1:{pattern:"111213",value:1},2:{pattern:"111312",value:2},3:{pattern:"111411",value:3},4:{pattern:"121113",value:4},5:{pattern:"121212",value:5},6:{pattern:"121311",value:6},7:{pattern:"111114",value:7},8:{pattern:"131211",value:8},9:{pattern:"141111",value:9},A:{pattern:"211113",value:10},B:{pattern:"211212",value:11},C:{pattern:"211311",value:12},D:{pattern:"221112",value:13},E:{pattern:"221211",value:14},F:{pattern:"231111",value:15},G:{pattern:"112113",value:16},H:{pattern:"112212",value:17},I:{pattern:"112311",value:18},J:{pattern:"122112",value:19},K:{pattern:"132111",value:20},L:{pattern:"111123",value:21},M:{pattern:"111222",value:22},N:{pattern:"111321",value:23},O:{pattern:"121122",value:24},P:{pattern:"131121",value:25},Q:{pattern:"212112",value:26},R:{pattern:"212211",value:27},S:{pattern:"211122",value:28},T:{pattern:"211221",value:29},U:{pattern:"221121",value:30},V:{pattern:"222111",value:31},W:{pattern:"112122",value:32},X:{pattern:"112221",value:33},Y:{pattern:"122121",value:34},Z:{pattern:"123111",value:35},"-":{pattern:"121131",value:36},".":{pattern:"311112",value:37}," ":{pattern:"311211",value:38},$:{pattern:"321111",value:39},"/":{pattern:"112131",value:40},"+":{pattern:"113121",value:41},"%":{pattern:"211131",value:42},SHIFT0:{pattern:"122211",value:46},SHIFT1:{pattern:"311121",value:45},SHIFT2:{pattern:"121221",value:43},SHIFT3:{pattern:"312111",value:44},START:{pattern:"111141"},TERMINATION_BAR:"1"}}),T.code93extended=T.code93.extend(u({},D,{name:"Code 93 extended",pushCheckSum:function(){var e,t,n=this,i=n._getCheckValues();for(n.checksum=i.join(""),t=0;t<i.length;t++)e=i[t],n.shiftValuesAsciiCodes[e]?n.addExtended(n.shiftValuesAsciiCodes[e]):n.addPattern(n.characterMap[n._findCharacterByValue(e)].pattern)}})),i=d.Class.extend({init:function(e){this.encoding=e},addStart:function(){},is:function(){},move:function(){},pushState:function(){}}),r=i.extend({FNC4:"FNC4",init:function(e,t){var n=this;n.encoding=e,n.states=t,n._initMoves(t)},addStart:function(){this.encoding.addPattern(this.START)},is:function(e,t){var n=e.charCodeAt(t);return this.isCode(n)},move:function(e){for(var t=this,n=0;!t._moves[n].call(t,e)&&n<t._moves.length;)n++},pushState:function(e){var t,n,i=this,r=i.states,o=e.value,a=o.length;for(p("C",r)>=0&&(n=o.substr(e.index).match(/\d{4,}/g),n&&(a=o.indexOf(n[0],e.index)));(t=e.value.charCodeAt(e.index))>=0&&i.isCode(t)&&e.index<a;)i.encoding.addPattern(i.getValue(t)),e.index++},_initMoves:function(e){var t=this;t._moves=[],p(t.FNC4,e)>=0&&t._moves.push(t._moveFNC),p(t.shiftKey,e)>=0&&t._moves.push(t._shiftState),t._moves.push(t._moveState)},_moveFNC:function(e){return e.fnc?(e.fnc=!1,e.previousState==this.key):t},_shiftState:function(e){var n=this;return e.previousState==n.shiftKey&&(e.index+1>=e.value.length||n.encoding[n.shiftKey].is(e.value,e.index+1))?(n.encoding.addPattern(n.SHIFT),e.shifted=!0,!0):t},_moveState:function(){return this.encoding.addPattern(this.MOVE),!0},SHIFT:98}),o={},o.A=r.extend({key:"A",shiftKey:"B",isCode:function(e){return e>=0&&96>e},getValue:function(e){return 32>e?e+64:e-32},MOVE:101,START:103}),o.B=r.extend({key:"B",shiftKey:"A",isCode:function(e){return e>=32&&128>e},getValue:function(e){return e-32},MOVE:100,START:104}),o.C=i.extend({key:"C",addStart:function(){this.encoding.addPattern(this.START)},is:function(e,t){var i=n(e,t,4);return(t+4<=e.length||2==e.length)&&y.test(i)},move:function(){this.encoding.addPattern(this.MOVE)},pushState:function(e){for(var t;(t=n(e.value,e.index,2))&&y.test(t)&&2==t.length;)this.encoding.addPattern(parseInt(t,10)),e.index+=2},getValue:function(e){return e},MOVE:99,START:105}),o.FNC4=i.extend({key:"FNC4",dependentStates:["A","B"],init:function(e,t){this.encoding=e,this._initSubStates(t)},addStart:function(e){var t=e.value.charCodeAt(0)-128,n=this._getSubState(t);this.encoding[n].addStart()},is:function(e,t){var n=e.charCodeAt(t);return this.isCode(n)},isCode:function(e){return e>=128&&256>e},pushState:function(e){var t,n=this,i=n._initSubState(e),r=n.encoding,o=i.value.length;if(e.index+=o,3>o)for(;i.index<o;i.index++)t=i.value.charCodeAt(i.index),i.state=n._getSubState(t),i.previousState!=i.state&&(i.previousState=i.state,r[i.state].move(i)),r.addPattern(r[i.state].MOVE),r.addPattern(r[i.state].getValue(t));else i.state!=i.previousState&&r[i.state].move(i),n._pushStart(i),r.pushData(i,n.subStates),e.index<e.value.length&&n._pushStart(i);e.fnc=!0,e.state=i.state},_pushStart:function(e){var t=this;t.encoding.addPattern(t.encoding[e.state].MOVE),t.encoding.addPattern(t.encoding[e.state].MOVE)},_initSubState:function(e){var t=this,n={value:t._getAll(e.value,e.index),index:0};return n.state=t._getSubState(n.value.charCodeAt(0)),n.previousState=e.previousState==t.key?n.state:e.previousState,n},_initSubStates:function(e){var t,n=this;for(n.subStates=[],t=0;t<e.length;t++)p(e[t],n.dependentStates)>=0&&n.subStates.push(e[t])},_getSubState:function(e){var t,n=this;for(t=0;t<n.subStates.length;t++)if(n.encoding[n.subStates[t]].isCode(e))return n.subStates[t]},_getAll:function(e,t){for(var n,i="";(n=e.charCodeAt(t++))&&this.isCode(n);)i+=String.fromCharCode(n-128);return i}}),o.FNC1=i.extend({key:"FNC1",startState:"C",dependentStates:["C","B"],startAI:"(",endAI:")",init:function(e,t){this.encoding=e,this.states=t},addStart:function(){this.encoding[this.startState].addStart()},is:function(){return p(this.key,this.states)>=0},pushState:function(e){var t,n,i,r=this,o=r.encoding,a=e.value.replace(/\s/g,""),s=RegExp("["+r.startAI+r.endAI+"]","g"),l=e.index,d={state:r.startState};for(o.addPattern(r.START);;){if(d.index=0,i=a.charAt(l)===r.startAI?2:0,t=i>0?r.getBySeparator(a,l):r.getByLength(a,l),t.ai.length)n=l+i+t.id.length+t.ai.length;else if(n=a.indexOf(r.startAI,l+1),0>n){if(l+t.ai.max+t.id.length+i<a.length)throw Error("Separators are required after variable length identifiers");n=a.length}if(d.value=a.substring(l,n).replace(s,""),r.validate(t,d.value),o.pushData(d,r.dependentStates),n>=a.length)break;l=n,d.state!=r.startState&&(o[r.startState].move(d),d.state=r.startState),t.ai.length||o.addPattern(r.START)}e.index=e.value.length},validate:function(e,t){var n=t.substr(e.id.length),i=e.ai;if(!i.type&&!y.test(n))throw Error("Application identifier "+e.id+" is numeric only but contains non numeric character(s).");if("alphanumeric"==i.type&&!k.test(n))throw Error("Application identifier "+e.id+" is alphanumeric only but contains non alphanumeric character(s).");if(i.length&&i.length!==n.length)throw Error("Application identifier "+e.id+" must be "+i.length+" characters long.");if(i.min&&i.min>n.length)throw Error("Application identifier "+e.id+" must be at least "+i.min+" characters long.");if(i.max&&i.max<n.length)throw Error("Application identifier "+e.id+" must be at most "+i.max+" characters long.")},getByLength:function(e,t){var i,r,o,a=this;for(o=2;4>=o;o++)if(i=n(e,t,o),r=a.getAI(i)||a.getAI(i.substring(0,i.length-1)))return{id:i,ai:r};a.unsupportedAIError(i)},unsupportedAIError:function(e){throw Error(d.format("'{0}' is not a supported Application Identifier"),e)},getBySeparator:function(e,t){var n=this,i=e.indexOf(n.startAI,t),r=e.indexOf(n.endAI,i),o=e.substring(i+1,r),a=n.getAI(o)||n.getAI(o.substr(o.length-1));return a||n.unsupportedAIError(o),{ai:a,id:o}},getAI:function(e){var t,n,i,r=this.applicationIdentifiers,o=r.multiKey;if(r[e])return r[e];for(t=0;t<o.length;t++){if(o[t].ids&&p(e,o[t].ids)>=0)return o[t].type;if(o[t].ranges)for(n=o[t].ranges,i=0;i<n.length;i++)if(n[i][0]<=e&&e<=n[i][1])return o[t].type}},applicationIdentifiers:{22:{max:29,type:"alphanumeric"},402:{length:17},7004:{max:4,type:"alphanumeric"},242:{max:6,type:"alphanumeric"},8020:{max:25,type:"alphanumeric"},703:{min:3,max:30,type:"alphanumeric"},8008:{min:8,max:12,type:"alphanumeric"},253:{min:13,max:17,type:"alphanumeric"},8003:{min:14,max:30,type:"alphanumeric"},multiKey:[{ids:["15","17","8005","8100"],ranges:[[11,13],[310,316],[320,336],[340,369]],type:{length:6}},{ids:["240","241","250","251","400","401","403","7002","8004","8007","8110"],ranges:[[-9]],type:{max:30,type:"alphanumeric"}},{ids:["7001"],ranges:[[410,414]],type:{length:13}},{ids:["10","21","254","420","8002"],type:{max:20,type:"alphanumeric"}},{ids:["00","8006","8017","8018"],type:{length:18}},{ids:["01","02","8001"],type:{length:14}},{ids:["422"],ranges:[[424,426]],type:{length:3}},{ids:["20","8102"],type:{length:2}},{ids:["30","37"],type:{max:8,type:"alphanumeric"}},{ids:["390","392"],type:{max:15,type:"alphanumeric"}},{ids:["421","423"],type:{min:3,max:15,type:"alphanumeric"}},{ids:["391","393"],type:{min:3,max:18,type:"alphanumeric"}},{ids:["7003","8101"],type:{length:10}}]},START:102}),a=C.extend({init:function(e){C.fn.init.call(this,e),this._initStates()},_initStates:function(){var e,t=this;for(e=0;e<t.states.length;e++)t[t.states[e]]=new o[t.states[e]](t,t.states)},initValue:function(e,t,n){var i=this;i.pattern=[],i.value=e,i.width=t,i.height=n,i.checkSum=0,i.totalUnits=0,i.index=0,i.position=1},addData:function(){var e=this,t={value:e.value,index:0,state:""};0!==e.value.length&&(t.state=t.previousState=e.getNextState(t,e.states),e.addStart(t),e.pushData(t,e.states),e.addCheckSum(),e.addStop(),e.setBaseUnit())},pushData:function(e,t){for(var n,i=this;;){if(i[e.state].pushState(e),e.index>=e.value.length)break;e.shifted?(n=e.state,e.state=e.previousState,e.previousState=n,e.shifted=!1):(e.previousState=e.state,e.state=i.getNextState(e,t),i[e.state].move(e))}},addStart:function(e){this[e.state].addStart(e),this.position=1},addCheckSum:function(){var e=this;e.checksum=e.checkSum%103,e.addPattern(e.checksum)},addStop:function(){this.addPattern(this.STOP)},setBaseUnit:function(){var e=this;e.baseUnit=e.width/(e.totalUnits+e.quietZoneLength)},addPattern:function(e){var t,n,i=this,r=""+i.characterMap[e];for(n=0;n<r.length;n++)t=parseInt(r.charAt(n),10),i.pattern.push(t),i.totalUnits+=t;i.checkSum+=e*i.position++},getNextState:function(e,t){for(var n=0;n<t.length;n++)if(this[t[n]].is(e.value,e.index))return t[n];this.invalidCharacterError(e.value.charAt(e.index))},characterMap:[212222,222122,222221,121223,121322,131222,122213,122312,132212,221213,221312,231212,112232,122132,122231,113222,123122,123221,223211,221132,221231,213212,223112,312131,311222,321122,321221,312212,322112,322211,212123,212321,232121,111323,131123,131321,112313,132113,132311,211313,231113,231311,112133,112331,132131,113123,113321,133121,313121,211331,231131,213113,213311,213131,311123,311321,331121,312113,312311,332111,314111,221411,431111,111224,111422,121124,121421,141122,141221,112214,112412,122114,122411,142112,142211,241211,221114,413111,241112,134111,111242,121142,121241,114212,124112,124211,411212,421112,421211,212141,214121,412121,111143,111341,131141,114113,114311,411113,411311,113141,114131,311141,411131,211412,211214,211232,2331112],STOP:106}),T.code128a=a.extend({name:"Code 128 A",states:["A"]}),T.code128b=a.extend({name:"Code 128 B",states:["B"]}),T.code128c=a.extend({name:"Code 128 C",states:["C"]}),T.code128=a.extend({name:"Code 128",states:["C","B","A","FNC4"]}),T["gs1-128"]=a.extend({name:"Code GS1-128",states:["FNC1","C","B"]}),s=C.extend({initValue:function(e,t){var n=this;n.pattern=[],n.value=e,n.checkSumLength=0,n.width=t},setBaseUnit:function(){var e=this,t=7;e.baseUnit=e.width/(12*(e.value.length+e.checkSumLength)+e.quietZoneLength+t)},addData:function(){var e,t=this,n=t.value;for(t.addPattern(t.START),e=0;e<n.length;e++)t.addCharacter(n.charAt(e));t.options.addCheckSum&&t.addCheckSum(),t.addPattern(t.STOP),t.setBaseUnit()},addCharacter:function(e){var t=this,n=t.characterMap[e];n||t.invalidCharacterError(e),t.addPattern(n)},addPattern:function(e){for(var t=0;t<e.length;t++)this.pattern.push(parseInt(e.charAt(t),10))},addCheckSum:function(){var e,t=this,n=t.checkSums[t.checkSumType],i=n.call(t.checkSums,t.value);for(t.checksum=i.join(""),e=0;e<i.length;e++)t.checkSumLength++,t.addPattern(t.characterMap[i[e]])},checkSums:{Modulo10:function(e){var t,n,i,r=[0,""],o=e.length%2;for(t=0;t<e.length;t++)r[(t+o)%2]+=parseInt(e.charAt(t),10);for(i=r[0],n=""+2*r[1],t=0;t<n.length;t++)i+=parseInt(n.charAt(t),10);return[(10-i%10)%10]},Modulo11:function(e){var t,n,i,r=0,o=11,a=e.length;for(i=0;a>i;i++)t=((a-i)%6||6)+1,r+=t*e.charAt(i);return n=(o-r%o)%o,10!=n?[n]:[1,0]},Modulo11Modulo10:function(e){var t,n=this.Modulo11(e);return t=e+n[0],n.concat(this.Modulo10(t))},Modulo10Modulo10:function(e){var t,n=this.Modulo10(e);return t=e+n[0],n.concat(this.Modulo10(t))}},characterMap:["12121212","12121221","12122112","12122121","12211212","12211221","12212112","12212121","21121212","21121221"],START:"21",STOP:"121",checkSumType:""}),T.msimod10=s.extend({name:"MSI Modulo10",checkSumType:"Modulo10"}),T.msimod11=s.extend({name:"MSI Modulo11",checkSumType:"Modulo11"}),T.msimod1110=s.extend({name:"MSI Modulo11 Modulo10",checkSumType:"Modulo11Modulo10"}),T.msimod1010=s.extend({name:"MSI Modulo10 Modulo10",checkSumType:"Modulo10Modulo10"}),T.code11=C.extend({name:"Code 11",cCheckSumTotal:10,kCheckSumTotal:9,kCheckSumMinLength:10,checkSumMod:11,DASH_VALUE:10,DASH:"-",START:"112211",STOP:"11221",initValue:function(e,t){var n=this;n.pattern=[],n.value=e,n.width=t,n.totalUnits=0},addData:function(){var e,t=this,n=t.value;for(t.addPattern(t.START),e=0;e<n.length;e++)t.addCharacter(n.charAt(e));t.options.addCheckSum&&t.addCheckSum(),t.addPattern(t.STOP),t.setBaseUnit()},setBaseUnit:function(){var e=this;e.baseUnit=e.width/(e.totalUnits+e.quietZoneLength)},addCheckSum:function(){var e,t=this,n=t.value,i=n.length,r=t.getWeightedSum(n,i,t.cCheckSumTotal)%t.checkSumMod;t.checksum=r+"",t.addPattern(t.characterMap[r]),i++,i>=t.kCheckSumMinLength&&(e=(r+t.getWeightedSum(n,i,t.kCheckSumTotal))%t.checkSumMod,t.checksum+=e,t.addPattern(t.characterMap[e]))},getWeightedSum:function(e,t,n){var i,r=0;for(i=0;i<e.length;i++)r+=this.weightedValue(this.getValue(e.charAt(i)),t,i,n);return r},weightedValue:function(e,t,n,i){var r=(t-n)%i||i;return r*e},getValue:function(e){var t=this;return isNaN(e)?(e!==t.DASH&&t.invalidCharacterError(e),t.DASH_VALUE):parseInt(e,10)},addCharacter:function(e){var t=this,n=t.getValue(e),i=t.characterMap[n];t.addPattern(i)},addPattern:function(e){var t,n;for(n=0;n<e.length;n++)t=parseInt(e.charAt(n),10),this.pattern.push(t),this.totalUnits+=t},characterMap:["111121","211121","121121","221111","112121","212111","122111","111221","211211","211111","112111"],options:{addCheckSum:!0}}),T.postnet=C.extend({name:"Postnet",START:"2",VALID_CODE_LENGTHS:[5,9,11],DIGIT_SEPARATOR:"-",initValue:function(e,t,n){var i=this;i.height=n,i.width=t,i.baseHeight=n/2,i.value=e.replace(RegExp(i.DIGIT_SEPARATOR,"g"),""),i.pattern=[],i.validate(i.value),i.checkSum=0,i.setBaseUnit()},addData:function(){var e,t=this,n=t.value;for(t.addPattern(t.START),e=0;e<n.length;e++)t.addCharacter(n.charAt(e));t.options.addCheckSum&&t.addCheckSum(),t.addPattern(t.START),t.pattern.pop()},addCharacter:function(e){var t=this,n=t.characterMap[e];t.checkSum+=parseInt(e,10),t.addPattern(n)},addCheckSum:function(){var e=this;e.checksum=(10-e.checkSum%10)%10,e.addCharacter(e.checksum)},setBaseUnit:function(){var e=this,t=3;e.baseUnit=e.width/(10*(e.value.length+1)+t+e.quietZoneLength)},validate:function(e){var t=this;if(y.test(e)||t.invalidCharacterError(e.match(/[^0-9]/)[0]),p(e.length,t.VALID_CODE_LENGTHS)<0)throw Error("Invalid value length. Valid lengths for the Postnet symbology are "+t.VALID_CODE_LENGTHS.join(","))},addPattern:function(e){var t,n,i=this;for(n=0;n<e.length;n++)t=i.height-i.baseHeight*e.charAt(n),i.pattern.push({width:1,y1:t,y2:i.height}),i.pattern.push(1)},characterMap:["22111","11122","11212","11221","12112","12121","12211","21112","21121","21211"]}),T.ean13=C.extend({initValue:function(e,t,n){if("number"==typeof e&&(e+=""),12!=e.length||/\D/.test(e))throw Error("Invalid value provided");e.length<12&&(e="");var i=this;i.pattern=[],i.options.height=n,i.baseUnit=t/(95+i.quietZoneLength),i.value=e,i.checksum=i.calculateChecksum(),i.leftKey=e[0],i.leftPart=e.substr(1,6),i.rightPart=e.substr(7)+i.checksum},addData:function(){var e=this;e.addPieces(e.characterMap.start),e.addSide(e.leftPart,e.leftKey),e.addPieces(e.characterMap.middle),e.addSide(e.rightPart),e.addPieces(e.characterMap.start)},addSide:function(e,t){var n,i=this;for(n=0;n<e.length;n++)t&&parseInt(i.keyTable[t].charAt(n),10)?i.addPieces(Array.prototype.slice.call(i.characterMap.digits[e.charAt(n)]).reverse(),!0):i.addPieces(i.characterMap.digits[e.charAt(n)],!0)},addPieces:function(e,t){var n,i=this;for(n=0;n<e.length;n++)t?i.pattern.push({y1:0,y2:.95*i.options.height,width:e[n]}):i.pattern.push(e[n])},calculateChecksum:function(){var e,t,n=0,i=0,r=this.value.split("").reverse().join("");for(e=0;e<r.length;e++)e%2?i+=parseInt(r.charAt(e),10):n+=parseInt(r.charAt(e),10);return t=(10-(3*n+i)%10)%10},keyTable:["000000","001011","001101","001110","010011","011001","011100","010101","010110","011010"],characterMap:{digits:[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2]],start:[1,1,1],middle:[1,1,1,1,1]}}),T.ean8=T.ean13.extend({initValue:function(e,t,n){var i=this;if(7!=e.length||/\D/.test(e))throw Error("Invalid value provided");i.value=e,i.options.height=n,i.checksum=i.calculateChecksum(i.value),i.leftPart=i.value.substr(0,4),i.rightPart=i.value.substr(4)+i.checksum,i.pattern=[],i.baseUnit=t/(67+i.quietZoneLength)}}),l=g.extend({init:function(t,n){var i=this;g.fn.init.call(i,t,n),i.element=e(t),i.element.addClass("k-barcode"),i.view=h.ViewFactory.current.create({},i.options.renderAs),i.setOptions(n)},setOptions:function(n){var i=this;if(i.type=(n.type||i.options.type).toLowerCase(),"upca"==i.type&&(i.type="ean13",n.value="0"+n.value),"upce"==i.type&&(i.type="ean8",n.value="0"+n.value),!T[i.type])throw Error("Encoding "+i.type+"is not supported.");i.encoding=new T[i.type],i.options=e.extend(!0,i.options,n),n.value!==t&&i.redraw()},redraw:function(){var e=this,t=e.view;e._redraw(t),t.renderTo(e.element[0])},svg:function(){if(h.SVGView){var e=new h.SVGView;return this._redraw(e),e.render()}throw Error("Unable to create SVGView. Check that kendo.dataviz.svg.js is loaded.")},imageDataURL:function(){if(h.CanvasView){if(h.supportsCanvas()){var e=document.createElement("div"),t=new h.CanvasView;return this._redraw(t),t.renderTo(e).toDataURL()}return d.logToConsole("Warning: Unable to generate image. The browser does not support Canvas.\nUser agent: "+navigator.userAgent),null}throw Error("Unable to create CanvasView. Check that kendo.dataviz.canvas.js is loaded.")
},_redraw:function(e){var n,i,r,o=this,a=o.options,s=a.text,l=o._getSize(),d=a.border||{},c=o.encoding,u=m(0,0,l.width,l.height).unpad(d.width).unpad(a.padding),p=u.height();o.contentBox=u,e.children=[],o._renderBackground(e,l),r=h.measureText(u,{font:a.text.font}).height,s.visible&&(p-=r),n=c.encode(a.value,l.width-(a.padding.left+a.padding.right),p),s.visible&&(i=a.value,a.checksum&&c.checksum!==t&&(i+=" "+c.checksum),o._renderTextElement(e,i)),o.barHeight=p,e.options.width=l.width,e.options.height=l.height,o._renderElements(e,n.pattern,n.baseUnit)},_getSize:function(){var e=this,t=e.element,n={width:_,height:b};return t.width()>0&&(n.width=t.width()),t.height()>0&&(n.height=t.height()),e.options.width&&(n.width=e.options.width),e.options.height&&(n.height=e.options.height),n},value:function(e){var n=this;return e===t?n.options.value:(n.options.value=e+"",n.redraw(),t)},_renderElements:function(e,t,n){var i,r,o,a=this,s=0+a.options.padding.left;for(o=0;o<t.length;o++)r=f(t[o])?t[o]:{width:t[o],y1:0,y2:a.barHeight},i=r.width*n,o%2&&e.children.push(e.createRect(new m(s,r.y1+a.contentBox.y1,s+i,r.y2+a.contentBox.y1),{fill:a.options.color,crispEdges:!0})),s+=i},_renderBackground:function(e,t){var n=this,i=n.options,r=i.border||{},o=m(0,0,t.width,t.height).unpad(r.width/2),a=e.createRect(o,{fill:i.background,stroke:r.width?r.color:"",strokeWidth:r.width,dashType:r.dashType});e.children.push(a)},_renderTextElement:function(e,t){var n=this,i=n.options.text,r=new v(t,{font:i.font,color:i.color,align:"center",vAlign:"bottom"});n.text=r,r.reflow(n.contentBox),r.box.unpad(i.margin),e.children.push(e.createText(t,{baseline:r.baseline,x:r.box.x1,y:r.box.y1,color:i.color,font:i.font}))},options:{name:"Barcode",renderAs:"canvas",value:"",type:"code39",checksum:!1,width:0,height:0,color:"black",background:"white",text:{visible:!0,font:"16px Consolas, Monaco, Sans Mono, monospace, sans-serif",color:"black",margin:{top:0,bottom:0,left:0,right:0}},border:{width:0,dashType:"solid",color:"black"},padding:{top:0,bottom:0,left:0,right:0}}}),h.ui.plugin(l),d.deepExtend(h,{encodings:T,Encoding:C})}(window.kendo.jQuery),function(e,t){function n(e){return parseInt(e,2)}function i(e,t){var n=Number(e).toString(2);return n.length<t&&(n=Array(t-n.length+1).join(0)+n),n}function r(e,t){for(var n=[],i=0;i<e.length;)n.push(e.substring(i,i+t)),i+=t;return n}function o(e,t,n,i){for(var r=0;r<e.length;r++)e[r][n][i]=t}function a(e,t,n,i){for(var r=0;r<mt.length;r++)e[r][n][i]=mt[r](n,i)?1^t:parseInt(t,10)}function s(){var e,t;for(t=1;255>t;t++)e=2*rt[t-1],e>255&&(e=285^e),rt[t]=e,it[e]=t;e=285^2*rt[t-1],rt[t]=e,rt[-1]=0}function l(){var e,t,n,i=68;for(e=2;i>=e;e++)t=ot[e-1],n=[e,0],ot[e]=w(t,n)}function d(e,n){var i=[],r=e.length-1;do i[r]=rt[(e[r]+n)%255],r--;while(e[r]!==t);return i}function c(e,t){return parseInt(e.charAt(t),10)}function u(e,t,n,i,r){t[e][i]=(t[e][i]<<1^r)%128,t[e][i]==gt&&(n[e]+=40)}function p(e,t,n,i,r,o){n[e][o]==i?r[e][o]++:(n[e][o]=i,r[e][o]>=5&&(t[e]+=3+r[e][o]-5),r[e][o]=1)}function f(e,t){var n=Math.floor(100*(e/t)),i=n%5,r=Math.abs(n-i-50),o=Math.abs(n+5-i-50),a=10*Math.min(r/5,o/5);return a}var h,g,m,v,_,b,w,y,k,x,C,T,S,D,A,E,F,I,P,B,z,H,R,M,L,O,N,V,U,W,j,G,q,Y,Q=window.kendo,$=e.extend,K=Q.dataviz,X=Q.ui.Widget,J=K.Box2D,Z="0000",et="numeric",tt="alphanumeric",nt="byte",it={1:0},rt={0:1},ot=[[1,0],[1,25,0]],at={15:20,16:20,18:24,19:24,22:20,24:22,26:24,28:20,30:20,31:24,32:28,33:24,36:18,37:22,39:20,40:24},st=[{L:{groups:[[1,19]],totalDataCodewords:19,errorCodewordsPerBlock:7},M:{groups:[[1,16]],totalDataCodewords:16,errorCodewordsPerBlock:10},Q:{groups:[[1,13]],totalDataCodewords:13,errorCodewordsPerBlock:13},H:{groups:[[1,9]],totalDataCodewords:9,errorCodewordsPerBlock:17}},{L:{groups:[[1,34]],totalDataCodewords:34,errorCodewordsPerBlock:10},M:{groups:[[1,28]],totalDataCodewords:28,errorCodewordsPerBlock:16},Q:{groups:[[1,22]],totalDataCodewords:22,errorCodewordsPerBlock:22},H:{groups:[[1,16]],totalDataCodewords:16,errorCodewordsPerBlock:28}},{L:{groups:[[1,55]],totalDataCodewords:55,errorCodewordsPerBlock:15},M:{groups:[[1,44]],totalDataCodewords:44,errorCodewordsPerBlock:26},Q:{groups:[[2,17]],totalDataCodewords:34,errorCodewordsPerBlock:18},H:{groups:[[2,13]],totalDataCodewords:26,errorCodewordsPerBlock:22}},{L:{groups:[[1,80]],totalDataCodewords:80,errorCodewordsPerBlock:20},M:{groups:[[2,32]],totalDataCodewords:64,errorCodewordsPerBlock:18},Q:{groups:[[2,24]],totalDataCodewords:48,errorCodewordsPerBlock:26},H:{groups:[[4,9]],totalDataCodewords:36,errorCodewordsPerBlock:16}},{L:{groups:[[1,108]],totalDataCodewords:108,errorCodewordsPerBlock:26},M:{groups:[[2,43]],totalDataCodewords:86,errorCodewordsPerBlock:24},Q:{groups:[[2,15],[2,16]],totalDataCodewords:62,errorCodewordsPerBlock:18},H:{groups:[[2,11],[2,12]],totalDataCodewords:46,errorCodewordsPerBlock:22}},{L:{groups:[[2,68]],totalDataCodewords:136,errorCodewordsPerBlock:18},M:{groups:[[4,27]],totalDataCodewords:108,errorCodewordsPerBlock:16},Q:{groups:[[4,19]],totalDataCodewords:76,errorCodewordsPerBlock:24},H:{groups:[[4,15]],totalDataCodewords:60,errorCodewordsPerBlock:28}},{L:{groups:[[2,78]],totalDataCodewords:156,errorCodewordsPerBlock:20},M:{groups:[[4,31]],totalDataCodewords:124,errorCodewordsPerBlock:18},Q:{groups:[[2,14],[4,15]],totalDataCodewords:88,errorCodewordsPerBlock:18},H:{groups:[[4,13],[1,14]],totalDataCodewords:66,errorCodewordsPerBlock:26}},{L:{groups:[[2,97]],totalDataCodewords:194,errorCodewordsPerBlock:24},M:{groups:[[2,38],[2,39]],totalDataCodewords:154,errorCodewordsPerBlock:22},Q:{groups:[[4,18],[2,19]],totalDataCodewords:110,errorCodewordsPerBlock:22},H:{groups:[[4,14],[2,15]],totalDataCodewords:86,errorCodewordsPerBlock:26}},{L:{groups:[[2,116]],totalDataCodewords:232,errorCodewordsPerBlock:30},M:{groups:[[3,36],[2,37]],totalDataCodewords:182,errorCodewordsPerBlock:22},Q:{groups:[[4,16],[4,17]],totalDataCodewords:132,errorCodewordsPerBlock:20},H:{groups:[[4,12],[4,13]],totalDataCodewords:100,errorCodewordsPerBlock:24}},{L:{groups:[[2,68],[2,69]],totalDataCodewords:274,errorCodewordsPerBlock:18},M:{groups:[[4,43],[1,44]],totalDataCodewords:216,errorCodewordsPerBlock:26},Q:{groups:[[6,19],[2,20]],totalDataCodewords:154,errorCodewordsPerBlock:24},H:{groups:[[6,15],[2,16]],totalDataCodewords:122,errorCodewordsPerBlock:28}},{L:{groups:[[4,81]],totalDataCodewords:324,errorCodewordsPerBlock:20},M:{groups:[[1,50],[4,51]],totalDataCodewords:254,errorCodewordsPerBlock:30},Q:{groups:[[4,22],[4,23]],totalDataCodewords:180,errorCodewordsPerBlock:28},H:{groups:[[3,12],[8,13]],totalDataCodewords:140,errorCodewordsPerBlock:24}},{L:{groups:[[2,92],[2,93]],totalDataCodewords:370,errorCodewordsPerBlock:24},M:{groups:[[6,36],[2,37]],totalDataCodewords:290,errorCodewordsPerBlock:22},Q:{groups:[[4,20],[6,21]],totalDataCodewords:206,errorCodewordsPerBlock:26},H:{groups:[[7,14],[4,15]],totalDataCodewords:158,errorCodewordsPerBlock:28}},{L:{groups:[[4,107]],totalDataCodewords:428,errorCodewordsPerBlock:26},M:{groups:[[8,37],[1,38]],totalDataCodewords:334,errorCodewordsPerBlock:22},Q:{groups:[[8,20],[4,21]],totalDataCodewords:244,errorCodewordsPerBlock:24},H:{groups:[[12,11],[4,12]],totalDataCodewords:180,errorCodewordsPerBlock:22}},{L:{groups:[[3,115],[1,116]],totalDataCodewords:461,errorCodewordsPerBlock:30},M:{groups:[[4,40],[5,41]],totalDataCodewords:365,errorCodewordsPerBlock:24},Q:{groups:[[11,16],[5,17]],totalDataCodewords:261,errorCodewordsPerBlock:20},H:{groups:[[11,12],[5,13]],totalDataCodewords:197,errorCodewordsPerBlock:24}},{L:{groups:[[5,87],[1,88]],totalDataCodewords:523,errorCodewordsPerBlock:22},M:{groups:[[5,41],[5,42]],totalDataCodewords:415,errorCodewordsPerBlock:24},Q:{groups:[[5,24],[7,25]],totalDataCodewords:295,errorCodewordsPerBlock:30},H:{groups:[[11,12],[7,13]],totalDataCodewords:223,errorCodewordsPerBlock:24}},{L:{groups:[[5,98],[1,99]],totalDataCodewords:589,errorCodewordsPerBlock:24},M:{groups:[[7,45],[3,46]],totalDataCodewords:453,errorCodewordsPerBlock:28},Q:{groups:[[15,19],[2,20]],totalDataCodewords:325,errorCodewordsPerBlock:24},H:{groups:[[3,15],[13,16]],totalDataCodewords:253,errorCodewordsPerBlock:30}},{L:{groups:[[1,107],[5,108]],totalDataCodewords:647,errorCodewordsPerBlock:28},M:{groups:[[10,46],[1,47]],totalDataCodewords:507,errorCodewordsPerBlock:28},Q:{groups:[[1,22],[15,23]],totalDataCodewords:367,errorCodewordsPerBlock:28},H:{groups:[[2,14],[17,15]],totalDataCodewords:283,errorCodewordsPerBlock:28}},{L:{groups:[[5,120],[1,121]],totalDataCodewords:721,errorCodewordsPerBlock:30},M:{groups:[[9,43],[4,44]],totalDataCodewords:563,errorCodewordsPerBlock:26},Q:{groups:[[17,22],[1,23]],totalDataCodewords:397,errorCodewordsPerBlock:28},H:{groups:[[2,14],[19,15]],totalDataCodewords:313,errorCodewordsPerBlock:28}},{L:{groups:[[3,113],[4,114]],totalDataCodewords:795,errorCodewordsPerBlock:28},M:{groups:[[3,44],[11,45]],totalDataCodewords:627,errorCodewordsPerBlock:26},Q:{groups:[[17,21],[4,22]],totalDataCodewords:445,errorCodewordsPerBlock:26},H:{groups:[[9,13],[16,14]],totalDataCodewords:341,errorCodewordsPerBlock:26}},{L:{groups:[[3,107],[5,108]],totalDataCodewords:861,errorCodewordsPerBlock:28},M:{groups:[[3,41],[13,42]],totalDataCodewords:669,errorCodewordsPerBlock:26},Q:{groups:[[15,24],[5,25]],totalDataCodewords:485,errorCodewordsPerBlock:30},H:{groups:[[15,15],[10,16]],totalDataCodewords:385,errorCodewordsPerBlock:28}},{L:{groups:[[4,116],[4,117]],totalDataCodewords:932,errorCodewordsPerBlock:28},M:{groups:[[17,42]],totalDataCodewords:714,errorCodewordsPerBlock:26},Q:{groups:[[17,22],[6,23]],totalDataCodewords:512,errorCodewordsPerBlock:28},H:{groups:[[19,16],[6,17]],totalDataCodewords:406,errorCodewordsPerBlock:30}},{L:{groups:[[2,111],[7,112]],totalDataCodewords:1006,errorCodewordsPerBlock:28},M:{groups:[[17,46]],totalDataCodewords:782,errorCodewordsPerBlock:28},Q:{groups:[[7,24],[16,25]],totalDataCodewords:568,errorCodewordsPerBlock:30},H:{groups:[[34,13]],totalDataCodewords:442,errorCodewordsPerBlock:24}},{L:{groups:[[4,121],[5,122]],totalDataCodewords:1094,errorCodewordsPerBlock:30},M:{groups:[[4,47],[14,48]],totalDataCodewords:860,errorCodewordsPerBlock:28},Q:{groups:[[11,24],[14,25]],totalDataCodewords:614,errorCodewordsPerBlock:30},H:{groups:[[16,15],[14,16]],totalDataCodewords:464,errorCodewordsPerBlock:30}},{L:{groups:[[6,117],[4,118]],totalDataCodewords:1174,errorCodewordsPerBlock:30},M:{groups:[[6,45],[14,46]],totalDataCodewords:914,errorCodewordsPerBlock:28},Q:{groups:[[11,24],[16,25]],totalDataCodewords:664,errorCodewordsPerBlock:30},H:{groups:[[30,16],[2,17]],totalDataCodewords:514,errorCodewordsPerBlock:30}},{L:{groups:[[8,106],[4,107]],totalDataCodewords:1276,errorCodewordsPerBlock:26},M:{groups:[[8,47],[13,48]],totalDataCodewords:1e3,errorCodewordsPerBlock:28},Q:{groups:[[7,24],[22,25]],totalDataCodewords:718,errorCodewordsPerBlock:30},H:{groups:[[22,15],[13,16]],totalDataCodewords:538,errorCodewordsPerBlock:30}},{L:{groups:[[10,114],[2,115]],totalDataCodewords:1370,errorCodewordsPerBlock:28},M:{groups:[[19,46],[4,47]],totalDataCodewords:1062,errorCodewordsPerBlock:28},Q:{groups:[[28,22],[6,23]],totalDataCodewords:754,errorCodewordsPerBlock:28},H:{groups:[[33,16],[4,17]],totalDataCodewords:596,errorCodewordsPerBlock:30}},{L:{groups:[[8,122],[4,123]],totalDataCodewords:1468,errorCodewordsPerBlock:30},M:{groups:[[22,45],[3,46]],totalDataCodewords:1128,errorCodewordsPerBlock:28},Q:{groups:[[8,23],[26,24]],totalDataCodewords:808,errorCodewordsPerBlock:30},H:{groups:[[12,15],[28,16]],totalDataCodewords:628,errorCodewordsPerBlock:30}},{L:{groups:[[3,117],[10,118]],totalDataCodewords:1531,errorCodewordsPerBlock:30},M:{groups:[[3,45],[23,46]],totalDataCodewords:1193,errorCodewordsPerBlock:28},Q:{groups:[[4,24],[31,25]],totalDataCodewords:871,errorCodewordsPerBlock:30},H:{groups:[[11,15],[31,16]],totalDataCodewords:661,errorCodewordsPerBlock:30}},{L:{groups:[[7,116],[7,117]],totalDataCodewords:1631,errorCodewordsPerBlock:30},M:{groups:[[21,45],[7,46]],totalDataCodewords:1267,errorCodewordsPerBlock:28},Q:{groups:[[1,23],[37,24]],totalDataCodewords:911,errorCodewordsPerBlock:30},H:{groups:[[19,15],[26,16]],totalDataCodewords:701,errorCodewordsPerBlock:30}},{L:{groups:[[5,115],[10,116]],totalDataCodewords:1735,errorCodewordsPerBlock:30},M:{groups:[[19,47],[10,48]],totalDataCodewords:1373,errorCodewordsPerBlock:28},Q:{groups:[[15,24],[25,25]],totalDataCodewords:985,errorCodewordsPerBlock:30},H:{groups:[[23,15],[25,16]],totalDataCodewords:745,errorCodewordsPerBlock:30}},{L:{groups:[[13,115],[3,116]],totalDataCodewords:1843,errorCodewordsPerBlock:30},M:{groups:[[2,46],[29,47]],totalDataCodewords:1455,errorCodewordsPerBlock:28},Q:{groups:[[42,24],[1,25]],totalDataCodewords:1033,errorCodewordsPerBlock:30},H:{groups:[[23,15],[28,16]],totalDataCodewords:793,errorCodewordsPerBlock:30}},{L:{groups:[[17,115]],totalDataCodewords:1955,errorCodewordsPerBlock:30},M:{groups:[[10,46],[23,47]],totalDataCodewords:1541,errorCodewordsPerBlock:28},Q:{groups:[[10,24],[35,25]],totalDataCodewords:1115,errorCodewordsPerBlock:30},H:{groups:[[19,15],[35,16]],totalDataCodewords:845,errorCodewordsPerBlock:30}},{L:{groups:[[17,115],[1,116]],totalDataCodewords:2071,errorCodewordsPerBlock:30},M:{groups:[[14,46],[21,47]],totalDataCodewords:1631,errorCodewordsPerBlock:28},Q:{groups:[[29,24],[19,25]],totalDataCodewords:1171,errorCodewordsPerBlock:30},H:{groups:[[11,15],[46,16]],totalDataCodewords:901,errorCodewordsPerBlock:30}},{L:{groups:[[13,115],[6,116]],totalDataCodewords:2191,errorCodewordsPerBlock:30},M:{groups:[[14,46],[23,47]],totalDataCodewords:1725,errorCodewordsPerBlock:28},Q:{groups:[[44,24],[7,25]],totalDataCodewords:1231,errorCodewordsPerBlock:30},H:{groups:[[59,16],[1,17]],totalDataCodewords:961,errorCodewordsPerBlock:30}},{L:{groups:[[12,121],[7,122]],totalDataCodewords:2306,errorCodewordsPerBlock:30},M:{groups:[[12,47],[26,48]],totalDataCodewords:1812,errorCodewordsPerBlock:28},Q:{groups:[[39,24],[14,25]],totalDataCodewords:1286,errorCodewordsPerBlock:30},H:{groups:[[22,15],[41,16]],totalDataCodewords:986,errorCodewordsPerBlock:30}},{L:{groups:[[6,121],[14,122]],totalDataCodewords:2434,errorCodewordsPerBlock:30},M:{groups:[[6,47],[34,48]],totalDataCodewords:1914,errorCodewordsPerBlock:28},Q:{groups:[[46,24],[10,25]],totalDataCodewords:1354,errorCodewordsPerBlock:30},H:{groups:[[2,15],[64,16]],totalDataCodewords:1054,errorCodewordsPerBlock:30}},{L:{groups:[[17,122],[4,123]],totalDataCodewords:2566,errorCodewordsPerBlock:30},M:{groups:[[29,46],[14,47]],totalDataCodewords:1992,errorCodewordsPerBlock:28},Q:{groups:[[49,24],[10,25]],totalDataCodewords:1426,errorCodewordsPerBlock:30},H:{groups:[[24,15],[46,16]],totalDataCodewords:1096,errorCodewordsPerBlock:30}},{L:{groups:[[4,122],[18,123]],totalDataCodewords:2702,errorCodewordsPerBlock:30},M:{groups:[[13,46],[32,47]],totalDataCodewords:2102,errorCodewordsPerBlock:28},Q:{groups:[[48,24],[14,25]],totalDataCodewords:1502,errorCodewordsPerBlock:30},H:{groups:[[42,15],[32,16]],totalDataCodewords:1142,errorCodewordsPerBlock:30}},{L:{groups:[[20,117],[4,118]],totalDataCodewords:2812,errorCodewordsPerBlock:30},M:{groups:[[40,47],[7,48]],totalDataCodewords:2216,errorCodewordsPerBlock:28},Q:{groups:[[43,24],[22,25]],totalDataCodewords:1582,errorCodewordsPerBlock:30},H:{groups:[[10,15],[67,16]],totalDataCodewords:1222,errorCodewordsPerBlock:30}},{L:{groups:[[19,118],[6,119]],totalDataCodewords:2956,errorCodewordsPerBlock:30},M:{groups:[[18,47],[31,48]],totalDataCodewords:2334,errorCodewordsPerBlock:28},Q:{groups:[[34,24],[34,25]],totalDataCodewords:1666,errorCodewordsPerBlock:30},H:{groups:[[20,15],[61,16]],totalDataCodewords:1276,errorCodewordsPerBlock:30}}],lt=[1,0,1,1,1],dt=[1,0,1],ct={L:"01",M:"00",Q:"11",H:"10"},ut="101010000010010",pt="10100110111",ft="1111100100101",ht=["11101100","00010001"],gt=93,mt=[function(e,t){return 0===(e+t)%2},function(e){return 0===e%2},function(e,t){return 0===t%3},function(e,t){return 0===(e+t)%3},function(e,t){return 0===(Math.floor(e/2)+Math.floor(t/3))%2},function(e,t){return 0===e*t%2+e*t%3},function(e,t){return 0===(e*t%2+e*t%3)%2},function(e,t){return 0===((e+t)%2+e*t%3)%2}],vt=/^\d+/,_t="A-Z0-9 $%*+./:-",bt="A-Z $%*+./:-",wt=RegExp("^["+bt+"]+"),yt=RegExp("^["+_t+"]+"),kt=RegExp("^[^"+_t+"]+"),xt=8,Ct=5,Tt=8,St=17,Dt=9,At=16,Et=Math.round,Ft=Q.Class.extend({getVersionIndex:function(e){return 10>e?0:e>26?2:1},getBitsCharacterCount:function(e){var t=this;return t.bitsInCharacterCount[t.getVersionIndex(e||40)]},getModeCountString:function(e,t){var n=this;return n.modeIndicator+i(e,n.getBitsCharacterCount(t))},encode:function(){},getStringBitsLength:function(){},getValue:function(){},modeIndicator:"",bitsInCharacterCount:[]}),It={};It[et]=Ft.extend({bitsInCharacterCount:[10,12,14],modeIndicator:"0001",getValue:function(e){return parseInt(e,10)},encode:function(e,t){var n,o=this,a=r(e,3),s=o.getModeCountString(e.length,t);for(n=0;n<a.length-1;n++)s+=i(a[n],10);return s+i(a[n],1+3*a[n].length)},getStringBitsLength:function(e,t){var n=e%3;return 4+this.getBitsCharacterCount(t)+10*Math.floor(e/3)+3*n+(0===n?0:1)}}),It[tt]=Ft.extend({characters:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,I:18,J:19,K:20,L:21,M:22,N:23,O:24,P:25,Q:26,R:27,S:28,T:29,U:30,V:31,W:32,X:33,Y:34,Z:35," ":36,$:37,"%":38,"*":39,"+":40,"-":41,".":42,"/":43,":":44},bitsInCharacterCount:[9,11,13],modeIndicator:"0010",getValue:function(e){return this.characters[e]},encode:function(e,t){var n,o,a=this,s=r(e,2),l=a.getModeCountString(e.length,t);for(o=0;o<s.length-1;o++)n=45*a.getValue(s[o].charAt(0))+a.getValue(s[o].charAt(1)),l+=i(n,11);return n=2==s[o].length?45*a.getValue(s[o].charAt(0))+a.getValue(s[o].charAt(1)):a.getValue(s[o].charAt(0)),l+i(n,1+5*s[o].length)},getStringBitsLength:function(e,t){return 4+this.getBitsCharacterCount(t)+11*Math.floor(e/2)+6*(e%2)}}),It[nt]=Ft.extend({bitsInCharacterCount:[8,16,16],modeIndicator:"0100",getValue:function(e){var t=e.charCodeAt(0);if(127>=t||t>=160&&255>=t)return t;throw Error("Unsupported character: "+e)},encode:function(e,t){var n,r=this,o=r.getModeCountString(e.length,t);for(n=0;n<e.length;n++)o+=i(r.getValue(e.charAt(n)),8);return o},getStringBitsLength:function(e,t){return 4+this.getBitsCharacterCount(t)+8*e}}),h={};for(g in It)h[g]=new It[g];m=function(e){var n=this,i=e.length-1,r=e.length-1,o=r,a=-1,s=0;n.move=function(){i+=a*s,s^=1,r=o-s},n.getNextCell=function(){for(;e[i][r]!==t;)n.move(),(0>i||i>=e.length)&&(a=-a,o-=8!=o?2:3,r=o,i=0>a?e.length-1:0);return{row:i,column:r}},n.getNextRemainderCell=function(){return n.move(),e[i][r]===t?{row:i,column:r}:t}},v=function(e,t){var n,i,r,o,s,l,d=new m(e[0]);for(o=0;o<t.length;o++)for(n=t[o],i=0;n.length>0;){for(s=0;s<n.length;s++)for(l=0;8>l;l++)r=d.getNextCell(),a(e,n[s][i].charAt(l),r.row,r.column);for(i++;n[0]&&i==n[0].length;)n.splice(0,1)}for(;r=d.getNextRemainderCell();)a(e,0,r.row,r.column)},_=function(e,t){for(var n=8*t,i=0,r=0;e.length<n&&i<Z.length;)e+=Z.charAt(i++);for(0!==e.length%8&&(e+=Array(9-e.length%8).join("0"));e.length<n;)e+=ht[r],r^=1;return e},b=function(e,t){var n,i=[],r=e.length-2;for(n=r;n>=0;n--)i[n]=e[n]^t[n];return i},w=function(e,n){var i,r,o=[];for(i=0;i<e.length;i++)for(r=0;r<n.length;r++)o[i+r]=o[i+r]===t?(e[i]+(n[r]>=0?n[r]:0))%255:it[rt[o[i+r]]^rt[(e[i]+n[r])%255]];return o},s(),l(),y=function(e,t){var n,r,o=ot[t-1],a=Array(t).concat(e),s=Array(a.length-o.length).concat(o),l=e.length,c=[];for(r=0;l>r;r++)n=d(s,it[a[a.length-1]]),s.splice(0,1),a=b(n,a);for(r=a.length-1;r>=0;r--)c[t-1-r]=i(a[r],8);return c},k=function(e,t){var i,r,o,a,s,l,d,c,u=0,p=[],f=[],h=t.groups;for(l=0;l<h.length;l++)for(o=h[l][0],d=0;o>d;d++){for(r=h[l][1],i=[],a=[],c=1;r>=c;c++)s=e.substring(u,u+8),i.push(s),a[r-c]=n(s),u+=8;p.push(i),f.push(y(a,t.errorCodewordsPerBlock))}return[p,f]},x=function(e,t,n,i,r){var o,a,s=vt.exec(e),l=s?s[0]:"",d=wt.exec(e),c=d?d[0]:"",u=yt.exec(e),p=u?u[0]:"";return l&&(l.length>=t||e.length==l.length||l.length>=n&&!yt.test(e.charAt(l.length)))?(o=et,a=l):p&&(e.length==p.length||p.length>=i||r==tt)?(o=tt,a=l||c):(o=nt,a=p?p+kt.exec(e.substring(p.length))[0]:kt.exec(e)[0]),{mode:o,modeString:a}},C=function(e){var t,n,i=[],r=0;for(i.push(x(e,xt,Ct,Tt,t)),t=i[0].mode,e=e.substr(i[0].modeString.length);e.length>0;)n=x(e,St,Dt,At,t),n.mode!=t?(t=n.mode,i.push(n),r++):i[r].modeString+=n.modeString,e=e.substr(n.modeString.length);return i},T=function(e){var t,n,i=0;for(n=0;n<e.length;n++)t=h[e[n].mode],i+=t.getStringBitsLength(e[n].modeString.length);return Math.ceil(i/8)},S=function(e,t){var n=0,i=st.length-1,r=Math.floor(st.length/2);do e<st[r][t].totalDataCodewords?i=r:n=r,r=n+Math.floor((i-n)/2);while(i-n>1);return e<=st[n][t].totalDataCodewords?r+1:i+1},D=function(e,t){var n,i,r="";for(i=0;i<e.length;i++)n=h[e[i].mode],r+=n.encode(e[i].modeString,t);return r},A=function(e){var t,i,r=n(e),o="";if(0===r)return"101010000010010";for(t=E(n(e),pt,15),i=0;i<t.length;i++)o+=t.charAt(i)^ut.charAt(i);return o},E=function(e,t,r){var o=n(t),a=t.length-1,s=e<<a,l=r-a,d=i(e,l),c=F(s,o);return c=d+i(c,a)},F=function(e,t){var n=t.toString(2).length,i=e.toString(2).length;do e^=t<<i-n,i=e.toString(2).length;while(i>=n);return e},I=function(e){var t,n,i=[],r=17+4*e;for(t=0;t<mt.length;t++)for(i[t]=Array(r),n=0;r>n;n++)i[t][n]=Array(r);return i},P=function(e,t){var n,i,r=e[0],a=0,s=t.length;for(n=0,i=8;8>=n;n++)6!==n&&o(e,c(t,s-1-a++),n,i);for(n=8,i=7;i>=0;i--)6!==i&&o(e,c(t,s-1-a++),n,i);for(a=0,i=r.length-1,n=8;i>=r.length-8;i--)o(e,c(t,s-1-a++),n,i);for(o(e,1,r.length-8,8),n=r.length-7,i=8;n<r.length;n++)o(e,c(t,s-1-a++),n,i)},B=function(e){return E(e,ft,18)},z=function(e,t){var n,i,r,a,s=e[0],l=s.length,d=0,u=l-11,p=l-11,f=0;for(a=0;a<t.length;a++)n=Math.floor(a/3),i=a%3,r=c(t,t.length-a-1),o(e,r,d+n,u+i),o(e,r,p+i,f+n)},H=function(e,t,n,i){var r,a,s,l=t.length+2,d=t.length+1;for(a=0;a<t.length;a++)for(s=a;l-a>s;s++)r=t[a],o(e,r,n+s,i+a),o(e,r,n+a,i+s),o(e,r,n+d-s,i+d-a),o(e,r,n+d-a,i+d-s)},R=function(e,t,n,i){var r=n,a=i,s=e[0];do o(e,0,r,i),o(e,0,n,a),r+=t[0],a+=t[1];while(r>=0&&r<s.length)},M=function(e){var t=e[0].length;H(e,lt,0,0),R(e,[-1,-1],7,7),H(e,lt,t-7,0),R(e,[1,-1],t-8,7),H(e,lt,0,t-7),R(e,[-1,1],7,t-8)},L=function(e,n){var i,r,o,a,s,l,d,c,u;if(!(2>n)){for(o=e[0],a=o.length,s=Math.floor(n/7),l=[6],d=0,(i=at[n])?r=(a-13-i)/s:i=r=(a-13)/(s+1),l.push(l[d++]+i);l[d]+r<a;)l.push(l[d++]+r);for(c=0;c<l.length;c++)for(u=0;u<l.length;u++)o[l[c]][l[u]]===t&&H(e,dt,l[c]-2,l[u]-2)}},O=function(e){var t,n=6,i=6,r=1,a=e[0].length;for(t=8;a-8>t;t++)o(e,r,n,t),o(e,r,t,i),r^=1},N=function(e){var t,n,i,r,o,a,s,l=[],d=[],c=[],h=[],g=[],m=0,v=1,_=e[0].length;for(n=0;n<e.length;n++)l[n]=0,c[n]=0,g[n]=[0,0],h[n]=[0,0],d[n]=[];for(n=0;_>n;n++)for(i=0;_>i;i++)for(r=0;r<e.length;r++)t=e[r],c[r]+=parseInt(t[n][i],10),d[r][m]===t[n][i]&&_>n+1&&i-1>=0&&t[n+1][i]==d[r][m]&&t[n+1][i-1]==d[r][m]&&(l[r]+=3),u(r,h,l,m,t[n][i]),u(r,h,l,v,t[i][n]),p(r,l,d,t[n][i],g,m),p(r,l,d,t[i][n],g,v);for(a=_*_,s=Number.MAX_VALUE,n=0;n<l.length;n++)l[n]+=f(c[n],a),l[n]<s&&(s=l[n],o=n);return o},V=function(e,t){this.dataString=e,this.version=t},U=function(){this.getEncodingResult=function(e,t){var n=C(e),i=T(n),r=S(i,t),o=D(n,r);return new V(o,r)}},W=function(){this.mode=h[this.encodingMode]},W.fn=W.prototype={encodingMode:nt,utfBOM:"111011111011101110111111",initialModeCountStringLength:20,getEncodingResult:function(e,t){var n=this,i=n.encode(e),r=n.getDataCodewordsCount(i),o=S(r,t),a=n.mode.getModeCountString(i.length/8,o)+i;return new V(a,o)},getDataCodewordsCount:function(e){var t=this,n=e.length,i=Math.ceil((t.initialModeCountStringLength+n)/8);return i},encode:function(e){var t,n=this,i=n.utfBOM;for(t=0;t<e.length;t++)i+=n.encodeCharacter(e.charCodeAt(t));return i},encodeCharacter:function(e){var t,n,r=this.getBytesCount(e),o=r-1,a="";if(1==r)a=i(e,8);else{for(t=8-r,n=0;o>n;n++)a=i(128|63&e>>6*n,8)+a;a=(e>>6*o|255>>t<<t).toString(2)+a}return a},getBytesCount:function(e){var t,n=this.ranges;for(t=0;t<n.length;t++)if(e<n[t])return t+1},ranges:[128,2048,65536,2097152,67108864]},j=function(e){return e&&e.toLowerCase().indexOf("utf_8")>=0?new W:new U},G=function(e,t,n){var r,o,a,s=new j(n),l=s.getEncodingResult(e,t),d=l.version,c=st[d-1][t],u=_(l.dataString,c.totalDataCodewords),p=k(u,c),f=I(d);return M(f),L(f,d),O(f),d>=7&&z(f,i(0,18)),P(f,i(0,15)),v(f,p),r=N(f),o=f[r],d>=7&&z([o],B(d)),a=ct[t]+i(r,3),P([o],A(a)),o},q={DEFAULT_SIZE:200,QUIET_ZONE_LENGTH:4,DEFAULT_ERROR_CORRECTION_LEVEL:"L",DEFAULT_BACKGROUND:"#fff",DEFAULT_DARK_MODULE_COLOR:"#000",MIN_BASE_UNIT_SIZE:1},Y=X.extend({init:function(t,n){var i=this;X.fn.init.call(i,t,n),i.element=e(t),i.element.addClass("k-qrcode"),i._view=K.ViewFactory.current.create({},i.options.renderAs),i.setOptions(n)},redraw:function(){var e=this,t=e._view;e._redraw(t),t.renderTo(e.element[0])},svg:function(){if(K.SVGView){var e=new K.SVGView;return this._redraw(e),e.render()}throw Error("Unable to create SVGView. Check that kendo.dataviz.svg.js is loaded.")},imageDataURL:function(){if(K.CanvasView){if(K.supportsCanvas()){var e=document.createElement("div"),t=new K.CanvasView;return this._redraw(t),t.renderTo(e).toDataURL()}return Q.logToConsole("Warning: Unable to generate image. The browser does not support Canvas.\nUser agent: "+navigator.userAgent),null}throw Error("Unable to create CanvasView. Check that kendo.dataviz.canvas.js is loaded.")},_redraw:function(e){var t,n,i,r,o,a,s=this,l=s._value,d=s.options.border||{},c=d.width||0;d.width=c,l&&(i=G(l,s.options.errorCorrection,s.options.encoding),r=s._getSize(),a=r-2*c,t=s._calculateBaseUnit(a,i.length),o=i.length*t,n=s._calculateQuietZone(o,a,c),e.children=[],e.options.width=r,e.options.height=r,s._renderBackground(e,r,d),s._renderMatrix(e,i,t,n))},_getSize:function(){var e,t,n,i=this;return i.options.size?e=parseInt(i.options.size,10):(t=i.element,n=Math.min(t.width(),t.height()),e=n>0?n:q.DEFAULT_SIZE),e},_calculateBaseUnit:function(e,t){var n=Math.floor(e/t);if(n<q.MIN_BASE_UNIT_SIZE)throw Error("Insufficient size.");return n*t>=e&&n-1>=q.MIN_BASE_UNIT_SIZE&&n--,n},_calculateQuietZone:function(e,t,n){return n+(t-e)/2},_renderMatrix:function(e,t,n,i){var r,o,a,s,l,d=this,c=[];for(l=0;l<t.length;l++)for(r=i+l*n,s=0;s<t.length;){for(;0===t[l][s]&&s<t.length;)s++;if(s<t.length){for(o=s;1==t[l][s];)s++;a=new J(Et(i+o*n),Et(r),Et(i+s*n),Et(r+n)),c.push(a.points())}}e.children.push(e.createMultiLine(c,{crispEdges:!0,fill:d.options.color,stroke:d.options.color,strokeWidth:0,align:!1}))},_renderBackground:function(e,t,n){var i=this;e.children.push(e.createRect(J(0,0,t,t).unpad(n.width/2),{fill:i.options.background,stroke:n.color,strokeWidth:n.width,align:!1}))},setOptions:function(e){var n=this;e=e||{},n.options=$(n.options,e),e.value!==t&&(n._value=n.options.value+""),n.redraw()},value:function(e){var n=this;return e===t?n._value:(n._value=e+"",n.redraw(),t)},options:{name:"QRCode",renderAs:"canvas",encoding:"ISO_8859_1",value:"",errorCorrection:q.DEFAULT_ERROR_CORRECTION_LEVEL,background:q.DEFAULT_BACKGROUND,color:q.DEFAULT_DARK_MODULE_COLOR,size:"",border:{color:"",width:0}}}),K.ui.plugin(Y),Q.deepExtend(K,{QRCode:Y,QRCodeDefaults:q,QRCodeFunctions:{FreeCellVisitor:m,fillData:v,padDataString:_,generateErrorCodewords:y,xorPolynomials:b,getBlocks:k,multiplyPolynomials:w,chooseMode:x,getModes:C,getDataCodewordsCount:T,getVersion:S,getDataString:D,encodeFormatInformation:A,encodeBCH:E,dividePolynomials:F,initMatrices:I,addFormatInformation:P,encodeVersionInformation:B,addVersionInformation:z,addCentricPattern:H,addFinderSeparator:R,addFinderPatterns:M,addAlignmentPatterns:L,addTimingFunctions:O,scoreMaskMatrixes:N,encodeData:G,UTF8Encoder:W},QRCodeFields:{modes:h,powersOfTwo:it,powersOfTwoResult:rt,generatorPolynomials:ot}})}(window.kendo.jQuery),function(e){function t(){}function n(e){return t.prototype=e,new t}var i,r=window.kendo,o=r.Class,a=r.Observable,s=r.deepExtend,l=Math,d=e.proxy,c=r.dataviz,u=c.defined,p=c.filterSeriesByType,f=r.template,h=c.ui.Chart,g=c.Selection,m=c.addDuration,v=c.last,_=c.limitValue,b=c.lteDateIndex,w=c.renderTemplate,y=c.toDate,k=c.toTime,x=28,C="change",T="k-",S="drag",D="dragEnd",A="_navigator",E=A,F=c.EQUALLY_SPACED_SERIES,I=3,P="zoom",B="zoomEnd",z=h.extend({init:function(t,n){e(t).addClass(T+"chart"),h.fn.init.call(this,t,n)},_applyDefaults:function(e,t){var n=this,i=n.element.width()||c.DEFAULT_WIDTH,r={seriesDefaults:{categoryField:e.dateField},axisDefaults:{categoryAxis:{name:"default",majorGridLines:{visible:!1},labels:{step:2},majorTicks:{visible:!1},maxDateGroups:l.floor(i/x)}}};t&&(t=s({},t,r)),n._navigator||H.setup(e,t),h.fn._applyDefaults.call(n,e,t)},_initDataSource:function(e){var t,n,i=e||{},r=i.dataSource,o=r&&r.serverFiltering,a=[].concat(i.categoryAxis)[0],l=i.navigator||{},d=l.select,u=d&&d.from&&d.to;o&&u&&(t=[].concat(r.filter||[]),n=new c.DateCategoryAxis(s({baseUnit:"fit"},a,{categories:[d.from,d.to]})),r.filter=H.buildFilter(n.range().min,d.to).concat(t)),h.fn._initDataSource.call(this,e)},options:{name:"StockChart",dateField:"date",axisDefaults:{categoryAxis:{type:"date",baseUnit:"fit",justified:!0},valueAxis:{narrowRange:!0,labels:{format:"C"}}},navigator:{select:{},seriesDefaults:{markers:{visible:!1},tooltip:{visible:!0,template:"#= kendo.toString(category, 'd') #"},line:{width:2}},hint:{},visible:!0},tooltip:{visible:!0},legend:{visible:!1}},_redraw:function(){var e=this,t=e._navigator;t&&t.dataSource?t.redrawSlaves():(t||(t=e._navigator=new H(e)),t.filterAxes(),h.fn._redraw.call(e),t.redraw())},_onDataChanged:function(){var e=this;h.fn._onDataChanged.call(e),e._dataBound=!0},_bindCategoryAxis:function(e,t,n){var i,r=this,o=r.options.categoryAxis,a=o.length;if(h.fn._bindCategoryAxis.apply(this,arguments),e.name===E)for(;a>n;)i=o[n++],i.pane==A&&(i.categories=e.categories)},_trackSharedTooltip:function(e){var t=this,n=t._plotArea,i=n.paneByPoint(e);i&&i.options.name===A?t._unsetActivePoint():h.fn._trackSharedTooltip.call(t,e)},destroy:function(){var e=this;e._navigator.destroy(),h.fn.destroy.call(e)}}),H=a.extend({init:function(e){var t=this;t.chart=e,t.options=s({},t.options,e.options.navigator),t._initDataSource(),u(t.options.hint.visible)||(t.options.hint.visible=t.options.visible),e.bind(S,d(t._drag,t)),e.bind(D,d(t._dragEnd,t)),e.bind(P,d(t._zoom,t)),e.bind(B,d(t._zoomEnd,t))},options:{},_initDataSource:function(){var e=this,t=e.options,n=t.autoBind,i=t.dataSource;u(n)||(n=e.chart.options.autoBind),e._dataChangedHandler=d(e._onDataChanged,e),i&&(e.dataSource=r.data.DataSource.create(i).bind(C,e._dataChangedHandler),n&&e.dataSource.fetch())},_onDataChanged:function(){var e,t,n,i,r,o=this,a=o.chart,s=a.options.series,l=s.length,d=a.options.categoryAxis,c=d.length,u=o.dataSource.view();for(e=0;l>e;e++)n=s[e],n.axis==E&&a._isBindable(n)&&(n.data=u);for(t=0;c>t;t++)i=d[t],i.pane==A&&(i.name==E?(a._bindCategoryAxis(i,u,t),r=i.categories):i.categories=r);a._model&&(o.redraw(),o.filterAxes(),(!a.options.dataSource||a.options.dataSource&&a._dataBound)&&o.redrawSlaves())},destroy:function(){var e=this,t=e.dataSource;t&&t.unbind(C,e._dataChangeHandler),e.selection&&e.selection.destroy()},redraw:function(){this._redrawSelf();var t=this,r=t.chart,o=t.options,a=t.mainAxis(),s=n(a),l=a.options.categories,d=t.options.select||{},c=t.selection,u=a.range(),p=u.min,f=u.max,h=d.from||p,m=d.to||f;l.length>0&&(c&&(c.destroy(),c.wrapper.remove()),s.box=a.box,c=t.selection=new g(r,s,{min:p,max:f,from:h,to:m,selectStart:e.proxy(t._selectStart,t),select:e.proxy(t._select,t),selectEnd:e.proxy(t._selectEnd,t),mousewheel:{zoom:"left"}}),o.hint.visible&&(t.hint=new i(r.element,{min:p,max:f,template:o.hint.template,format:o.hint.format})))},_redrawSelf:function(e){var t=this.chart._plotArea;t&&t.redraw(v(t.panes),e)},redrawSlaves:function(){var e=this,t=e.chart,n=t._plotArea,i=n.panes.slice(0,-1);n.srcSeries=t.options.series,n.redraw(i)},_drag:function(e){var t,n,i,r=this,o=r.chart,a=o._eventCoordinates(e.originalEvent),s=r.mainAxis(),l=s.range(),d=s.pane.box.containsPoint(a),c=o._plotArea.categoryAxis,u=e.axisRanges[c.options.name],p=r.options.select,f=r.selection;
u&&!d&&f&&(t=p.from&&p.to?k(p.to)-k(p.from):k(f.options.to)-k(f.options.from),n=y(_(k(u.min),l.min,k(l.max)-t)),i=y(_(k(n)+t,k(l.min)+t,l.max)),r.options.select={from:n,to:i},r._liveDrag()&&(r.filterAxes(),r.redrawSlaves()),f.set(n,i),r.showHint(n,i))},_dragEnd:function(){var e=this;e.filterAxes(),e.filterDataSource(),e.redrawSlaves(),e.hint&&e.hint.hide()},_liveDrag:function(){var e=r.support,t=e.touch,n=e.browser,i=n.mozilla,o=n.msie&&n.version<9;return!t&&!i&&!o},readSelection:function(){var e=this,t=e.selection,n=t.options,i=e.options.select;i.from=n.from,i.to=n.to},filterAxes:function(){var e,t,n=this,i=n.options.select||{},r=n.chart,o=r.options.categoryAxis,a=i.from,s=i.to;for(e=0;e<o.length;e++)t=o[e],t.pane!==A&&(t.min=y(a),t.max=y(s))},filterDataSource:function(){var e,t=this,n=t.options.select||{},i=t.chart,r=i.dataSource,o=r&&r.options.serverFiltering;t.dataSource&&o&&(e=new c.DateCategoryAxis(s({baseUnit:"fit"},i.options.categoryAxis[0],{categories:[n.from,n.to]})).options,r.filter(H.buildFilter(m(e.min,-e.baseUnitStep,e.baseUnit),m(e.max,e.baseUnitStep,e.baseUnit))))},_zoom:function(e){var t,n,i=this,o=i.chart,a=e.delta,s=o._plotArea.categoryAxis,d=i.options.select,c=i.selection,u=i.mainAxis().options.categories;c&&(t=b(c.options.from,u),n=b(c.options.to,u),e.originalEvent.preventDefault(),l.abs(a)>1&&(a*=I),n-t>1?(c.expand(a),i.readSelection()):(s.options.min=d.from,d.from=s.scaleRange(-e.delta).min),r.support.touch||(i.filterAxes(),i.redrawSlaves()),c.set(d.from,d.to),i.showHint(i.options.select.from,i.options.select.to))},_zoomEnd:function(e){this._dragEnd(e)},showHint:function(e,t){var n=this,i=n.chart,r=i._plotArea;n.hint&&n.hint.show(e,t,r.backgroundBox())},_selectStart:function(e){var t=this.chart;t._selectStart.call(t,e)},_select:function(e){var t=this,n=t.chart;t.showHint(e.from,e.to),n._select.call(n,e)},_selectEnd:function(e){var t=this,n=t.chart;t.hint&&t.hint.hide(),t.readSelection(),t.filterAxes(),t.filterDataSource(),t.redrawSlaves(),n._selectEnd.call(n,e)},mainAxis:function(){var e=this.chart._plotArea;return e?e.namedCategoryAxes[E]:undefined}});H.setup=function(e,t){e=e||{},t=t||{};var n=s({},t.navigator,e.navigator),i=e.panes=[].concat(e.panes),r=s({},n.pane,{name:A});n.visible||(r.visible=!1,r.height=.1),i.push(r),H.attachAxes(e,n),H.attachSeries(e,n,t)},H.attachAxes=function(e,t){var n=t.series||[],i=e.categoryAxis=[].concat(e.categoryAxis),r=e.valueAxis=[].concat(e.valueAxis),o=p(n,F),a=0===o.length,l=s({type:"date",pane:A,roundToBaseUnit:!a,justified:a,tooltip:{visible:!1},labels:{step:1},autoBind:!t.dataSource,autoBaseUnitSteps:{minutes:[1],hours:[1],days:[1],weeks:[],months:[1],years:[1]},_overlap:!1},t.categoryAxis);i.push(s({},l,{name:E,baseUnit:"fit",maxDateGroups:200,baseUnitStep:"auto",labels:{visible:!1},majorTicks:{visible:!1}}),s({},l,{name:E+"_labels",maxDateGroups:20,baseUnitStep:"auto",autoBaseUnitSteps:{minutes:[]},majorTicks:{visible:!0}}),s({},l,{name:E+"_ticks",maxDateGroups:200,majorTicks:{visible:!0,width:.5},labels:{visible:!1,mirror:!0}})),r.push({name:E,pane:A,majorGridLines:{visible:!1},visible:!1})},H.attachSeries=function(e,t,n){var i,r=e.series=e.series||[],o=[].concat(t.series||[]),a=n.seriesColors,l=t.seriesDefaults;for(i=0;i<o.length;i++)r.push(s({color:a[i%a.length],categoryField:t.dateField,visibleInLegend:!1,tooltip:{visible:!1}},l,o[i],{axis:E,categoryAxis:E,autoBind:!t.dataSource}))},H.buildFilter=function(e,t){return[{field:"Date",operator:"gte",value:y(e)},{field:"Date",operator:"lt",value:y(t)}]},i=o.extend({init:function(t,n){var i=this;i.options=s({},i.options,n),i.container=t,i.chartPadding={top:parseInt(t.css("paddingTop"),10),left:parseInt(t.css("paddingLeft"),10)},i.template=i.template,i.template||(i.template=i.template=w("<div class='"+T+"navigator-hint' "+"style='display: none; position: absolute; top: 1px; left: 1px;'>"+"<div class='"+T+"tooltip'>&nbsp;</div>"+"<div class='"+T+"scroll' />"+"</div>")),i.element=e(i.template()).appendTo(t)},options:{format:"{0:d} - {1:d}",hideDelay:500},show:function(e,t,n){var i,o=this,a=y(k(e)+k(t-e)/2),s=o.options,l=r.format(o.options.format,e,t),d=o.element.find("."+T+"tooltip"),c=o.element.find("."+T+"scroll"),u=.4*n.width(),p=n.center().x-u,h=n.center().x,g=h-p,m=s.max-s.min,v=g/m,_=a-s.min;o._hideTimeout&&clearTimeout(o._hideTimeout),o._visible||(o.element.stop(!1,!0).css("visibility","hidden").show(),o._visible=!0),s.template&&(i=f(s.template),l=i({from:e,to:t})),d.html(l).css({left:n.center().x-d.outerWidth()/2,top:n.y1}),c.css({width:u,left:p+_*v,top:n.y1+parseInt(d.css("margin-top"),10)+parseInt(d.css("border-top-width"),10)+d.height()/2}),o.element.css("visibility","visible")},hide:function(){var e=this;e._hideTimeout&&clearTimeout(e._hideTimeout),e._hideTimeout=setTimeout(function(){e._visible=!1,e.element.fadeOut("slow")},e.options.hideDelay)}}),c.ui.plugin(z),s(c,{Navigator:H})}(window.kendo.jQuery),function(e){function t(e){return"number"==typeof e?[e]:e}var n=window.kendo,i=n.dataviz,r=i.ui.Chart,o=n.data.ObservableArray,a=i.SharedTooltip,s=n.deepExtend,l=e.isArray,d=i.inArray,c=Math,u="k-",p=150,f=150,h="bar",g="bullet",m="pie",v=[h,g],_=r.extend({init:function(n,i){var a=this,p=a.stage=e("<span />"),f=i||{};n=e(n).addClass(u+"sparkline").empty().append(p),a._initialWidth=c.floor(n.width()),f=t(f),(l(f)||f instanceof o)&&(f={seriesDefaults:{data:f}}),f.series||(f.series=[{data:t(f.data)}]),s(f,{seriesDefaults:{type:f.type}}),(d(f.series[0].type,v)||d(f.seriesDefaults.type,v))&&(f=s({},{categoryAxis:{crosshair:{visible:!1}}},f)),r.fn.init.call(a,n,f)},options:{name:"Sparkline",chartArea:{margin:2},axisDefaults:{visible:!1,majorGridLines:{visible:!1},valueAxis:{narrowRange:!0}},seriesDefaults:{type:"line",area:{line:{width:.5}},bar:{stack:!0},width:.5,overlay:{gradient:null},highlight:{visible:!1},border:{width:0},markers:{size:2,visible:!1}},tooltip:{visible:!0,shared:!0},categoryAxis:{crosshair:{visible:!0,tooltip:{visible:!1}}},legend:{visible:!1},transitions:!1,pointWidth:5},_applyDefaults:function(e){var t=this,n=i.ViewFactory.current.create({},e.renderAs);i.CanvasView&&n instanceof i.CanvasView&&s(e,{categoryAxis:{crosshair:{visible:!1}}}),r.fn._applyDefaults.apply(t,arguments)},_modelOptions:function(){var e,t=this,n=t.options,i=t._initialWidth,r=t.stage;return t.stage[0].innerHTML="&nbsp;",e=s({width:i?i:t._autoWidth(),height:r.height(),transitions:n.transitions},n.chartArea,{inline:!0,align:!1}),r.css({width:e.width,height:e.height}),e},_createTooltip:function(){var e,t=this,n=t.options,i=t.element;return e=t._sharedTooltip()?new b(i,t._plotArea,n.tooltip):r.fn._createTooltip.call(t)},_renderView:function(){var e=this;return e.element.empty().append(e.stage),e._view.renderTo(e.stage[0])},_autoWidth:function(){var e,t,n,r=this,o=r.options,a=i.getSpacing(o.chartArea.margin),s=o.series,l=r.dataSource.total(),d=0;for(t=0;t<s.length;t++){if(n=s[t],n.type===h)return p;if(n.type===g)return f;if(n.type===m)return r.stage.height();n.data&&(d=c.max(d,n.data.length))}return e=c.max(l,d)*o.pointWidth,e>0&&(e+=a.left+a.right),e}}),b=a.extend({options:{animation:{duration:0}},_anchor:function(e,t){var n=a.fn._anchor.call(this,e,t);return n.y=-this.element.height()-this.options.offset,n},_hideElement:function(){this.element.hide()}});i.ui.plugin(_),s(i,{})}(window.kendo.jQuery),function(){function e(e){this.view=e}function t(e){this.view=e}function n(e){return l.round(e)+.5}function i(e,t){var n,i,r=[];if(e=e?e.toLowerCase():null,e&&e!=P){for(n=S[e],i=0;i<n.length;i++)r.push(n[i]*(t||1));return"stroke-dasharray='"+r.join(" ")+"' "}return""}var r,o,a=jQuery,s=document,l=Math,d=window.kendo,c=d.Class,u=d.dataviz,p=u.Box2D,f=u.ExpandAnimation,h=u.Point2D,g=u.ViewBase,m=u.ViewElement,v=d.deepExtend,_=u.defined,b=u.round,w=u.renderTemplate,y=u.rotatePoint,k=u.uniqueId,x="butt",C=u.CLIP,T=u.COORD_PRECISION,S=u.DASH_ARRAYS,D=u.DEFAULT_WIDTH,A=u.DEFAULT_HEIGHT,E=u.DEFAULT_FONT,F="none",I="radial",P="solid",B="square",z="http://www.w3.org/2000/svg",H="transparent",R="undefined",M=g.extend({init:function(n){var i=this;g.fn.init.call(i,n),i.decorators.push(new e(i),new t(i)),u.ui.Chart&&i.decorators.push(new u.BarAnimationDecorator(i),new u.PieAnimationDecorator(i),new u.BubbleAnimationDecorator(i)),i.decorators.push(new r(i),new u.FadeAnimationDecorator(i)),u.Gauge&&i.decorators.push(new u.RadialPointerAnimationDecorator(i),new u.ArrowPointerAnimationDecorator(i),new u.BarIndicatorAnimationDecorator(i)),i.defsId=k(),i.template=M.template,i.display=i.options.inline?"inline":"block",i.template||(i.template=M.template=w("<?xml version='1.0' ?><svg xmlns='"+z+"' version='1.1' "+"width='#= d.options.width #px' height='#= d.options.height #px' "+"style='position: relative; display: #= d.display #;'>"+"#= d.renderDefinitions() #"+"#= d.renderContent() #</svg>"))},options:{width:D,height:A},renderTo:function(e){var t,n=this;return n.setupAnimations(),u.renderSVG(e,n.render()),t=e.firstElementChild,n.alignToScreen(t),n.playAnimations(),n._viewElement=t,t},renderDefinitions:function(){var e=this,t=e.defsId,n=g.fn.renderDefinitions.call(e);return"<defs id='"+t+"'>"+n+"</defs>"},renderElement:function(e){var t,n,i=this,r=s.createElement("div"),o=s.getElementById(i.defsId);return u.renderSVG(r,"<?xml version='1.0' ?><svg xmlns='"+z+"' version='1.1'>"+i.renderDefinitions()+e.render()+"</svg>"),t=r.firstElementChild.firstChild,n=r.firstElementChild.lastChild,o&&o.textContent!==t.textContent&&o.parentNode.replaceChild(t,o),n},createGroup:function(e){return this.decorate(new q(e))},createText:function(e,t){return this.decorate(new L(e,t))},createRect:function(e,t){return this.decorate(new N(e.points(),!0,this.setDefaults(t)))},createLine:function(e,t,n,i,r){return this.decorate(new N([new h(e,t),new h(n,i)],!1,this.setDefaults(r)))},createMultiLine:function(e,t){return this.decorate(new V(e,!1,this.setDefaults(t)))},createPolyline:function(e,t,n){return this.decorate(new N(e,t,this.setDefaults(n)))},createCircle:function(e,t,n){return this.decorate(new G(e,t,n))},createSector:function(e,t){return this.decorate(new j(e,t))},createRing:function(e,t){return this.decorate(new U(e,t))},createPin:function(e,t){return this.decorate(new W(e,t))},createGradient:function(e){return e.type===I?_(e.ir)?new X(e):new K(e):new $(e)},alignToScreen:function(e){var t,n,i,r;try{t=e.getScreenCTM?e.getScreenCTM():null}catch(o){}t&&(n=-t.e%1,i=-t.f%1,r=e.style,(0!==n||0!==i)&&(r.left=n+"px",r.top=i+"px"))}}),L=m.extend({init:function(e,t){var n=this;m.fn.init.call(n,t),n.content=e,n.template=L.template,n.template||(n.template=L.template=w("<text #= d.renderId() # #= d.renderDataAttributes() # x='#= Math.round(d.options.x) #' y='#= Math.round(d.options.y + d.options.baseline) #' fill-opacity='#= d.options.fillOpacity #' #= d.options.rotation ? d.renderRotation() : '' # style='font: #= d.options.font #; #= d.renderCursor() #' fill='#= d.options.color #'>#= d.content #</text>"))},options:{x:0,y:0,baseline:0,font:E,size:{width:0,height:0},fillOpacity:1,cursor:{}},refresh:function(e){var t=this.options;a(e).attr({"fill-opacity":t.fillOpacity})},clone:function(){var e=this;return new L(e.content,v({},e.options))},renderRotation:function(){var e=this,t=e.options,n=t.size,i=b(t.x+n.normalWidth/2,T),r=b(t.y+n.normalHeight/2,T),o=b(t.x+n.width/2,T),a=b(t.y+n.height/2,T),s=b(o-i,T),l=b(a-r,T);return"transform='translate("+s+","+l+") "+"rotate("+t.rotation+","+i+","+r+")'"}}),O=m.extend({init:function(e){var t=this;m.fn.init.call(t,e),t.template=O.template,t.template||(t.template=O.template=w("<path #= d.renderId() #style='display: #= d.renderDisplay() #; #= d.renderCursor() #' #= d.renderDataAttributes() # d='#= d.renderPoints() #' #= d.renderAttr(\"stroke\", d.options.stroke) # #= d.renderAttr(\"stroke-width\", d.options.strokeWidth) ##= d.renderDashType() # #= d.renderShapeOptions() # stroke-linecap='#= d.renderLinecap() #' stroke-linejoin='round' fill-opacity='#= d.options.fillOpacity #' stroke-opacity='#= d.options.strokeOpacity #' fill='#= d.renderFill() #'></path>"))},options:{fill:"",fillOpacity:1,strokeOpacity:1,rotation:[0,0,0],strokeLineCap:B,visible:!0,cursor:{}},refresh:function(e){var t=this.options;a(e).attr({d:this.renderPoints(),"fill-opacity":t.fillOpacity,"stroke-opacity":t.strokeOpacity}).css("display",this.renderDisplay())},clone:function(){return new O(v({},this.options))},renderPoints:function(){},renderDashType:function(){var e=this,t=e.options;return i(t.dashType,t.strokeWidth)},renderLinecap:function(){var e=this.options,t=e.dashType,n=e.strokeLineCap;return t&&t!=P?x:n},renderFill:function(){var e=this.options.fill;return e&&e!==H?e:F},renderDisplay:function(){return this.options.visible?"block":"none"},renderShapeOptions:function(){return this.options.crispEdges?"shape-rendering='crispEdges'":""},destroy:function(){}}),N=O.extend({init:function(e,t,n){var i=this;O.fn.init.call(i,n),i.points=e,i.closed=t},renderPoints:function(){var e=this,t=e.points;return e._renderPoints(t)},_renderPoints:function(e){var t,n=this,i=n.options.rotation,r=new h(i[1],i[2]),o=-i[0],a=[];for(t=0;t<e.length;t++)a.push(n._print(e[t].clone().rotate(r,o)));return n.closed&&a.push("z"),"M"+a.join(" ")},clone:function(){var e=this;return new N(v([],e.points),e.closed,v({},e.options))},_print:function(e){var t=this,i=t.options,r=i.strokeWidth,o=i.align!==!1&&r&&0!==r%2,a=o?n:b;return a(e.x,T)+" "+a(e.y,T)}}),V=N.extend({renderPoints:function(){var e,t=this,n=t.points,i=[];for(e=0;e<n.length;e++)i.push(t._renderPoints(n[e]));return i.join(" ")}}),U=O.extend({init:function(e,t){var n=this;O.fn.init.call(n,t),n.pathTemplate=U.pathTemplate,n.pathTemplate||(n.pathTemplate=U.pathTemplate=w("M #= d.firstOuterPoint.x # #= d.firstOuterPoint.y # A#= d.r # #= d.r # 0 #= d.isReflexAngle ? '1' : '0' #,1 #= d.secondOuterPoint.x # #= d.secondOuterPoint.y # L #= d.secondInnerPoint.x # #= d.secondInnerPoint.y # A#= d.ir # #= d.ir # 0 #= d.isReflexAngle ? '1' : '0' #,0 #= d.firstInnerPoint.x # #= d.firstInnerPoint.y # z")),n.config=e||{}},renderPoints:function(){var e,t,n=this,i=n.config,r=i.startAngle,o=i.angle+r,a=o-r>180,s=l.max(i.r,0),d=l.max(i.ir,0),c=i.c,u=i.point(r),p=i.point(r,!0);return b(r)%360===b(o)%360&&(o-=.05),e=i.point(o),t=i.point(o,!0),n.pathTemplate({firstOuterPoint:u,secondOuterPoint:e,isReflexAngle:a,r:s,ir:d,cx:c.x,cy:c.y,firstInnerPoint:p,secondInnerPoint:t})},clone:function(){var e=this;return new U(v({},e.config),v({},e.options))}}),W=O.extend({init:function(e,t){var n=this;O.fn.init.call(n,t),n.pathTemplate=W.pathTemplate,n.pathTemplate||(n.pathTemplate=W.pathTemplate=w("M #= d.origin.x # #= d.origin.y # #= d.as.x # #= d.as.y # A#= d.r # #= d.r # 0 #= d.isReflexAngle ? '1' : '0' #,0 #= d.ae.x # #= d.ae.y # z")),n.config=e||new u.Pin},renderPoints:function(){var e=this,t=e.config,n=t.radius,i=l.PI/180,r=t.arcAngle,o=n*l.sin(r*i/2),a=t.height-n*(1-l.cos(r*i/2)),s=t.origin,d={x:s.x+o,y:s.y-a},c={x:s.x-o,y:s.y-a},u=function(n,i){var r=e.options.rotation,o=t.rotation;return n=y(n.x,n.y,r[1],r[2],-r[0]),i&&(n=y(n.x,n.y,s.x,s.y,o)),n};return s=u(s),e.pathTemplate({origin:s,as:u(d,!0),ae:u(c,!0),r:n,isReflexAngle:r>180})}}),j=U.extend({init:function(e,t){var n=this;U.fn.init.call(n,e,t),n.pathTemplate=j.pathTemplate,n.pathTemplate||(n.pathTemplate=j.pathTemplate=w("M #= d.firstOuterPoint.x # #= d.firstOuterPoint.y # A#= d.r # #= d.r # 0 #= d.isReflexAngle ? '1' : '0' #,1 #= d.secondOuterPoint.x # #= d.secondOuterPoint.y # L #= d.cx # #= d.cy # z"))},options:{fill:"",fillOpacity:1,strokeOpacity:1,strokeLineCap:B},clone:function(){var e=this;return new j(v({},e.config),v({},e.options))}}),G=m.extend({init:function(e,t,n){var i=this;m.fn.init.call(i,n),i.c=e,i.r=t,i.template=G.template,i.template||(i.template=G.template=w("<circle #= d.renderId() # #= d.renderDataAttributes() #cx='#= d.c.x #' cy='#= d.c.y #' r='#= d.r #' #= d.renderAttr(\"stroke\", d.options.stroke) # #= d.renderAttr(\"stroke-width\", d.options.strokeWidth) #fill-opacity='#= d.options.fillOpacity #' stroke-opacity='#= d.options.strokeOpacity #'  fill='#= d.options.fill || \"none\" #'></circle>"))},options:{fill:"",fillOpacity:1,strokeOpacity:1},refresh:function(e){a(e).attr({r:l.max(0,this.r),"fill-opacity":this.options.fillOpacity})},clone:function(){var e=this;return new G(v({},e.c),e.r,v({},e.options))}}),q=m.extend({init:function(e){var t=this;m.fn.init.call(t,e),t.template=q.template,t.template||(t.template=q.template=w('<g#= d.renderId() ##= d.renderDataAttributes() ##= d.renderAttr("clip-path", d.options.clipPath) #>#= d.renderContent() #</g>'))}}),Y=m.extend({init:function(e){var t=this;m.fn.init.call(t,e),t.template=Y.template,t.template||(t.template=Y.template=w('<clipPath#= d.renderAttr("id", d.options.id) #>#= d.renderContent() #</clipPath>'))}}),Q=m.extend({init:function(e){var t=this;m.fn.init.call(t,e)},options:{id:""},renderStops:function(){var e,t,n=this,i=n.options.stops,r=n.stopTemplate,o=i.length,a="";for(e=0;o>e;e++)t=i[e],a+=r(t);return a}}),$=Q.extend({init:function(e){var t=this;Q.fn.init.call(t,e),t.template=$.template,t.stopTemplate=$.stopTemplate,t.template||(t.template=$.template=w("<linearGradient id='#= d.options.id #' gradientTransform='rotate(#= d.options.rotation #)'> #= d.renderStops() #</linearGradient>"),t.stopTemplate=$.stopTemplate=w("<stop offset='#= Math.round(d.offset * 100) #%' style='stop-color:#= d.color #;stop-opacity:#= d.opacity #' />"))},options:{rotation:0}}),K=Q.extend({init:function(e){var t=this;Q.fn.init.call(t,e),t.template=K.template,t.stopTemplate=K.stopTemplate,t.template||(t.template=K.template=w("<radialGradient id='#= d.options.id #' cx='#= d.options.cx #' cy='#= d.options.cy #' fx='#= d.options.cx #' fy='#= d.options.cy #' r='#= d.options.r #' gradientUnits='userSpaceOnUse'>#= d.renderStops() #</radialGradient>"),t.stopTemplate=K.stopTemplate=w("<stop offset='#= Math.round(d.offset * 100) #%' style='stop-color:#= d.color #;stop-opacity:#= d.opacity #' />"))}}),X=m.extend({init:function(e){var t=this;m.fn.init.call(t,e),t.template=X.template,t.stopTemplate=X.stopTemplate,t.template||(t.template=X.template=w("<radialGradient id='#= d.options.id #' cx='#= d.options.cx #' cy='#= d.options.cy #' fx='#= d.options.cx #' fy='#= d.options.cy #' r='#= d.options.r #' gradientUnits='userSpaceOnUse'>#= d.renderStops() #</radialGradient>"),t.stopTemplate=X.stopTemplate=w("<stop offset='#= d.offset #%' style='stop-color:#= d.color #;stop-opacity:#= d.opacity #' />"))},options:{id:""},renderStops:function(){var e,t,n=this,i=n.options,r=i.stops,o=n.stopTemplate,a=100*(i.ir/i.r),s=r.length,l="";for(t=v({},r[0]),t.offset=a,l+=o(t),e=1;s>e;e++)t=v({},r[e]),t.offset=t.offset*(100-a)+a,l+=o(t);return l}});e.prototype={decorate:function(e){var t,n,i=this,r=i.view,o=e.options,a=o.id;return o.overlay?(e.options.id=k(),t=r.createGroup(),n=e.clone(),t.children.push(e,n),n.options.id=a,n.options.fill=o.overlay,t):e}},t.prototype={decorate:function(e){var t=this,n=e.options;return n.fill=t.getPaint(n.fill),e},getPaint:function(e){var t,n,i,r=this,o=r.view,a=o.definitions;return e&&_(e.gradient)?(t=o.buildGradient(e),t?(n=t.id,i=a[n],i||(i=o.createGradient(t),a[n]=i),"url("+r.baseUrl()+"#"+i.options.id+")"):F):e},baseUrl:function(){var e=s.getElementsByTagName("base")[0],t="",n=s.location.href,i=n.indexOf("#");return e&&!d.support.browser.msie&&(-1!==i&&(n=n.substring(0,i)),t=n),t}},r=c.extend({init:function(e){this.view=e},decorate:function(e){var t,n,i=this,r=i.view,o=i.clipId,a=r.options,s=e.options.animation,l=r.definitions;return s&&s.type===C&&a.transitions&&(o||(i.clipId=o=k()),t=l[o],t||(t=new Y({id:o}),n=r.createRect(new p(0,0,a.width,a.height),{id:k()}),t.children.push(n),l[o]=t,r.animations.push(new f(n,{size:a.width}))),e.options.clipPath="url(#"+o+")"),e}}),o=function(e,t){e.innerHTML=t},function(){var e="<svg xmlns='"+z+"'></svg>",t=s.createElement("div"),n=typeof DOMParser!=R;t.innerHTML=e,n&&t.firstChild.namespaceURI!=z&&(o=function(e,t){var n=new DOMParser,i=n.parseFromString(t,"text/xml"),r=s.adoptNode(i.documentElement);e.innerHTML="",e.appendChild(r)})}(),u.supportsSVG()&&u.ViewFactory.current.register("svg",M,10),v(u,{renderSVG:o,SVGCircle:G,SVGClipAnimationDecorator:r,SVGClipPath:Y,SVGGradientDecorator:t,SVGGroup:q,SVGLine:N,SVGMultiLine:V,SVGLinearGradient:$,SVGOverlayDecorator:e,SVGPath:O,SVGRadialGradient:K,SVGDonutGradient:X,SVGRing:U,SVGSector:j,SVGText:L,SVGView:M})}(window.kendo.jQuery),function(){function e(e){this.view=e}function t(e){this.view=e}function n(){return c.support.browser.msie&&!T()&&void 0!==window.performance}function i(e,t,n){var i=new h(e),o=new h(t),a=r(i.r,o.r,n),s=r(i.g,o.g,n),l=r(i.b,o.b,n);return new h(a,s,l).toHex()}function r(e,t,n){return d.round(n*t+(1-n)*e)}function o(e,t){var n,r,o,a=t.stops,s=a.length,l=p({},t);for(l.stops=[],n=0;s>n;n++)r=a[n],o=l.stops[n]=p({},a[n]),o.color=i(e,r.color,r.opacity),o.opacity=0;return l}var a,s=jQuery,l=document,d=Math,c=window.kendo,u=c.Class,p=c.deepExtend,f=c.dataviz,h=f.Color,g=f.Box2D,m=f.Point2D,v=f.ExpandAnimation,_=f.ViewBase,b=f.ViewElement,w=f.defined,y=f.renderTemplate,k=f.uniqueId,x=f.rotatePoint,C=f.round,T=f.supportsSVG,S="#000",D=f.CLIP,A=f.COORD_PRECISION,E=f.DEFAULT_WIDTH,F=f.DEFAULT_HEIGHT,I=f.DEFAULT_FONT,P="object",B="linear",z="radial",H="transparent",R=_.extend({init:function(i){var r=this;_.fn.init.call(r,i),r.decorators.push(new e(r),new t(r)),f.ui.Chart&&r.decorators.push(new f.BarAnimationDecorator(r),new f.PieAnimationDecorator(r),new f.BubbleAnimationDecorator(r)),r.decorators.push(new a(r)),n()||r.decorators.push(new f.FadeAnimationDecorator(r)),f.Gauge&&r.decorators.push(new f.RadialPointerAnimationDecorator(r),new f.ArrowPointerAnimationDecorator(r),new f.BarIndicatorAnimationDecorator(r)),r.template=R.template,r.tagName=r.options.inline?"span":"div",r.template||(r.template=R.template=y("<#= d.tagName # style='width:#= d.options.width #px; height:#= d.options.height #px; position: relative;'>#= d.renderContent() #</#= d.tagName #>"))},options:{width:E,height:F},renderTo:function(e){var t,n=this;return l.namespaces&&l.namespaces.add("kvml","urn:schemas-microsoft-com:vml","#default#VML"),n.setupAnimations(),e.innerHTML=n.render(),n.playAnimations(),t=e.firstChild,n._viewElement=t,t},renderElement:function(e){var t,n=l.createElement("div");return n.style.display="none",l.body.appendChild(n),n.innerHTML=e.render(),t=n.firstChild,l.body.removeChild(n),t},createText:function(e,t){return this.decorate(t&&t.rotation?new L(e,t):new M(e,t))},createRect:function(e,t){return this.decorate(new U(e.points(),!0,this.setDefaults(t)))},createLine:function(e,t,n,i,r){return this.decorate(new U([new m(e,t),new m(n,i)],!1,this.setDefaults(r)))},createMultiLine:function(e,t){return this.decorate(new W(e,!1,this.setDefaults(t)))},createPolyline:function(e,t,n){return this.decorate(new U(e,t,this.setDefaults(n)))},createCircle:function(e,t,n){return this.decorate(new q(e,t,n))},createSector:function(e,t){return this.decorate(new G(e,t))},createRing:function(e,t){return this.decorate(new j(e,this.setDefaults(t)))},createGroup:function(e){return this.decorate(new Y(this.setDefaults(e)))},createGradient:function(e){var t=w(e.cx)&&w(e.cy)&&w(e.bbox);return e.type===z&&t?new X(e):e.type===B?new K(e):S}}),M=b.extend({init:function(e,t){var n=this;b.fn.init.call(n,t),n.content=e,n.template=M.template,n.template||(n.template=M.template=y("<kvml:textbox #= d.renderId() # #= d.renderDataAttributes() #style='position: absolute; left: #= d.options.x #px; top: #= d.options.y #px; font: #= d.options.font #; color: #= d.options.color #; visibility: #= d.renderVisibility() #; white-space: nowrap; #= d.renderCursor() #'>#= d.content #</kvml:textbox>"))},options:{x:0,y:0,font:I,color:S,fillOpacity:1,cursor:{}},refresh:function(e){s(e).css("visibility",this.renderVisibility())},clone:function(){var e=this;return new M(e.content,p({},e.options))},renderVisibility:function(){return this.options.fillOpacity>0?"visible":"hidden"},renderCursor:function(){var e=this.options,t="";return w(e.cursor.style)&&(t+="cursor: "+e.cursor.style+";"),t}}),L=b.extend({init:function(e,t){var n=this;b.fn.init.call(n,t),n.content=e,n.template=L.template,n.template||(n.template=L.template=y("<kvml:shape #= d.renderId() # #= d.renderDataAttributes() #style='position: absolute; top: 0px; left: 0px; width: 1px; height: 1px;' stroked='false' coordsize='1,1'>#= d.renderPath() #<kvml:fill color='#= d.options.color #' /><kvml:textpath on='true' style='font: #= d.options.font #;' fitpath='false' string='#= d.content #' /></kvml:shape>"))},options:{x:0,y:0,font:I,color:S,size:{width:0,height:0}},renderPath:function(){var e=this,t=e.options,n=t.size.width,i=t.size.height,r=t.x+n/2,o=t.y+i/2,a=-t.rotation,s=x(t.x,o,r,o,a),l=x(t.x+n,o,r,o,a);return"<kvml:path textpathok='true' v='m "+C(s.x)+","+C(s.y)+" l "+C(l.x)+","+C(l.y)+"' />"}}),O=b.extend({init:function(e){var t=this;b.fn.init.call(t,e),t.template=O.template,t.template||(t.template=O.template=y('<kvml:stroke on=\'#= !!d.options.stroke && !!d.options.strokeWidth #\' #= d.renderAttr("color", d.options.stroke) #weight=\'#= d.options.strokeWidth || 0 #px\' #= d.renderAttr("dashstyle", d.options.dashType) ##= d.renderAttr("opacity", d.options.strokeOpacity) # />'))},refresh:function(e){try{e.opacity=this.options.strokeOpacity}catch(t){}}}),N=b.extend({init:function(e){var t=this;b.fn.init.call(t,e),t.template=N.template,t.template||(t.template=N.template=y('<kvml:fill on=\'#= d.isEnabled() #\' #= d.renderAttr("color", d.options.fill) ##= d.renderAttr("weight", d.options.fillWidth) ##= d.renderAttr("opacity", d.options.fillOpacity) # />'))},isEnabled:function(){var e=this.options.fill;return!!e&&e.toLowerCase()!==H},refresh:function(e){try{e.opacity=this.options.fillOpacity}catch(t){}}}),V=b.extend({init:function(e){var t=this;b.fn.init.call(t,e),t.template=V.template,t.template||(t.template=V.template=y("<kvml:shape #= d.renderId() # #= d.renderDataAttributes() #style='position:absolute; #= d.renderSize() # display:#= d.renderDisplay() #; #= d.renderCursor() #' coordorigin='0 0' #= d.renderCoordsize() #><kvml:path v='#= d.renderPoints() # e' />#= d.fill.render() + d.stroke.render() #</kvml:shape>")),t.stroke=new O(t.options),t.fill=new N(t.options)},options:{fill:"",fillOpacity:1,strokeOpacity:1,rotation:[0,0,0],visible:!0,cursor:{}},renderCoordsize:function(){var e=this.options.align===!1?1e4:1;return"coordsize='"+e+" "+e+"'"},renderSize:function(){var e=this.options.align===!1?100:1;return"width:"+e+"px; height:"+e+"px;"},render:function(){var e=this;return e.fill.options.fillOpacity=e.options.fillOpacity,e.stroke.options.strokeOpacity=e.options.strokeOpacity,b.fn.render.call(e)},renderDisplay:function(){return this.options.visible?"block":"none"},renderPoints:function(){},refresh:function(e){if(e){var t=this,n=s(e),i=n[0].parentNode,r=t.fill,o=t.stroke;i&&(n.find("path")[0].v=this.renderPoints(),r.options=o.options=t.options,r.refresh(n.find("fill")[0]),o.refresh(n.find("stroke")[0]),n.css("display",t.renderDisplay()),i.style.cssText=i.style.cssText)}},renderCursor:function(){var e=this.options,t="";return w(e.cursor.style)&&(t+="cursor: "+e.cursor.style+";"),t}}),U=V.extend({init:function(e,t,n){var i=this;V.fn.init.call(i,n),i.points=e,i.closed=t},renderPoints:function(){var e=this,t=e.points;return e._renderPoints(t)},_renderPoints:function(e){var t,n=this,i=e.length,r=function(e){var t=n.options.rotation;return x(e.x,e.y,t[1],t[2],-t[0])},o="m "+n._print(r(e[0]));if(i>1)for(o+=" l ",t=1;i>t;t++)o+=n._print(r(e[t])),i-1>t&&(o+=", ");return n.closed&&(o+=" x"),o},clone:function(){var e=this;return new U(p([],e.points),e.closed,p({},e.options))},_print:function(e){var t=this.options.align===!1?100:1;return d.round(e.x*t)+","+d.round(e.y*t)}}),W=U.extend({renderPoints:function(){var e,t=this,n=t.points,i=[];for(e=0;e<n.length;e++)i.push(t._renderPoints(n[e]));return i.join(" ")}}),j=V.extend({init:function(e,t){var n=this;V.fn.init.call(n,t),n.pathTemplate=j.pathTemplate,n.pathTemplate||(n.pathTemplate=j.pathTemplate=y("M #= d.osp.x #,#= d.osp.y # WA #= d.obb.l #,#= d.obb.t # #= d.obb.r #,#= d.obb.b # #= d.osp.x #,#= d.osp.y # #= d.oep.x #,#= d.oep.y # L #= d.iep.x #,#= d.iep.y # AT #= d.ibb.l #,#= d.ibb.t # #= d.ibb.r #,#= d.ibb.b # #= d.iep.x #,#= d.iep.y # #= d.isp.x #,#= d.isp.y # X E")),n.config=e},renderPoints:function(){function e(e){return new m(C(e.x),C(e.y))}var t,n,i,r,o=this,a=o.config,s=d.max(C(a.r),0),l=d.max(C(a.ir),0),c=C(a.c.x),u=C(a.c.y),p=a.startAngle,f=a.angle+p,h=f-p,g={l:c-s,t:u-s,r:c+s,b:u+s},v={l:c-l,t:u-l,r:c+l,b:u+l};return 1>=h?f+=1-h:h>359&&(f-=1-h),t=e(a.point(p)),n=e(a.point(p,!0)),r=e(a.point(f)),i=e(a.point(f,!0)),o.pathTemplate({obb:g,ibb:v,osp:t,isp:n,oep:r,iep:i,cx:c,cy:u})},clone:function(){var e=this;return new j(p({},e.config),p({},e.options))}}),G=j.extend({init:function(e,t){var n=this;j.fn.init.call(n,e,t),n.pathTemplate=G.pathTemplate,n.pathTemplate||(n.pathTemplate=G.pathTemplate=y("M #= d.osp.x #,#= d.osp.y # WA #= d.obb.l #,#= d.obb.t # #= d.obb.r #,#= d.obb.b # #= d.osp.x #,#= d.osp.y # #= d.oep.x #,#= d.oep.y # L #= d.cx #,#= d.cy # X E"))},clone:function(){var e=this;return new G(p({},e.config),p({},e.options))}}),q=b.extend({init:function(e,t,n){var i=this;b.fn.init.call(i,n),i.c=e,i.r=t,i.template=q.template,i.template||(i.template=q.template=y("<kvml:oval #= d.renderId() # #= d.renderDataAttributes() #style='position:absolute; width:#= d.r * 2 #px; height:#= d.r * 2 #px; top:#= d.c.y - d.r #px; left:#= d.c.x - d.r #px;'>#= d.fill.render() + d.stroke.render() #</kvml:oval>")),i.stroke=new O(i.options),i.fill=new N(i.options)},options:{fill:"",fillOpacity:1},refresh:function(e){var t=this,n=t.c,i=d.max(0,t.r),r=2*i,o=s(e);o.css({width:r,height:r,top:n.y-i,left:n.x-i}),t.fill.options=t.options,t.fill.refresh(o.find("fill")[0])},clone:function(){var e=this;return new q(p({},e.c),e.r,p({},e.options))}}),Y=b.extend({init:function(e){var t=this;b.fn.init.call(t,e),t.tagName=t.options.inline?"span":"div",t.template=Y.template,t.template||(t.template=Y.template=y("<#= d.tagName # #= d.renderId() ##= d.renderDataAttributes() #style='position: absolute; white-space: nowrap;'>#= d.renderContent() #</#= d.tagName #>"))}}),Q=b.extend({init:function(e,t){var n=this;b.fn.init.call(n,t),n.tagName=n.options.inline?"span":"div",n.template=Q.template,n.clipTemplate=Q.clipTemplate,n.template||(n.template=Q.template=y("<#= d.tagName # #= d.renderId() #style='position:absolute; width:#= d.box.width() #px; height:#= d.box.height() #px; top:#= d.box.y1 #px; left:#= d.box.x1 #px; clip:#= d._renderClip() #;' >#= d.renderContent() #</#= d.tagName #>"),n.clipTemplate=Q.clipTemplate=y("rect(#= d.points[0].y #px #= d.points[1].x #px #= d.points[2].y #px #= d.points[0].x #px)")),n.box=e,n.points=e.points()},clone:function(){var e=this;return new Q(e.box,p({},e.options))},refresh:function(e){e&&(e.style.clip=this._renderClip())},_renderClip:function(){return this.clipTemplate(this)},destroy:function(){s("#"+this.options.id+">*").unwrap()}}),$=b.extend({init:function(e){var t=this;b.fn.init.call(t,e)},options:{opacity:1},renderColors:function(){var e,t,n=this,i=n.options,r=i.stops,o=r.length,a=[],s=d.round;for(t=0;o>t;t++)e=r[t],a.push(s(100*e.offset)+"% "+e.color);return a.join(",")}}),K=$.extend({init:function(e){var t=this;$.fn.init.call(t,e),t.template=K.template,t.template||(t.template=K.template=y("<kvml:fill type='gradient' angle='#= 270 - d.options.rotation #' colors='#= d.renderColors() #' opacity='#= d.options.opacity #' />"))},options:{rotation:0}}),X=$.extend({init:function(e){var t=this;$.fn.init.call(t,e),t.template=X.template,t.template||(t.template=X.template=y("<kvml:fill type='gradienttitle' focus='100%' focusposition='#= d.focusPosition() #'colors='#= d.renderColors() #' color='#= d.firstColor() #' color2='#= d.lastColor() #' opacity='#= d.options.opacity #' />"))},focusPosition:function(){var e=this.options,t=e.bbox,n=e.cx,i=e.cy,r=Math.max(0,Math.min(1,(n-t.x1)/t.width())),o=Math.max(0,Math.min(1,(i-t.y1)/t.height()));
return C(r,A)+" "+C(o,A)},firstColor:function(){var e=this.options.stops;return e[0].color},lastColor:function(){var e=this.options.stops;return e[e.length-1].color}});e.prototype={decorate:function(e){var t,n,i=e.options,r=this.view;return i.overlay&&(n=i.overlay.bbox,t=r.buildGradient(p({},i.overlay,{_overlayFill:i.fill,_bboxHash:w(n)?n.getHash():""}))),t?(delete i.overlay,i.fill=p(o(i.fill,t),{opacity:i.fillOpacity}),e):e}},t.prototype={decorate:function(e){var t=this,n=t.view,i=e.options,r=i.fill;return r&&r.supportVML!==!1&&(r.gradient&&(r=n.buildGradient(r)),typeof r===P&&(e.fill=n.createGradient(r))),e}},a=u.extend({init:function(e){this.view=e},decorate:function(e){var t,n=this,i=n.view,r=i.options,o=e.options.animation;return o&&o.type===D&&r.transitions?(t=new Q(new g(0,0,r.width,r.height),{id:k(),inline:r.inline}),i.animations.push(new v(t,{size:r.width})),t.children.push(e),t):e}}),c.support.browser.msie&&f.ViewFactory.current.register("vml",R,20),p(f,{VMLCircle:q,VMLClipAnimationDecorator:a,VMLClipRect:Q,VMLFill:N,VMLGroup:Y,VMLLine:U,VMLMultiLine:W,VMLLinearGradient:K,VMLOverlayDecorator:e,VMLPath:V,VMLRadialGradient:X,VMLRing:j,VMLRotatedText:L,VMLSector:G,VMLStroke:O,VMLText:M,VMLView:R,blendColors:i,blendGradient:o})}(window.kendo.jQuery),function(){function e(e){return(e+540)%360*k}function t(e){return r.round(e)+.5}function n(e,t){var n,i,r,o=t.length;for(n=0;o>n;n++)i=t[n],r=new l(i.color),e.addColorStop(i.offset,"rgba("+r.r+","+r.g+","+r.b+","+i.opacity+")")}var i=jQuery,r=Math,o=window.kendo,a=o.dataviz,s=a.Box2D,l=a.Color,d=a.Point2D,c=a.Ring,u=a.ViewBase,p=a.ViewElement,f=o.deepExtend,h=a.round,g=a.renderTemplate,m="butt",v=a.COORD_PRECISION,_=a.DASH_ARRAYS,b=a.DEFAULT_WIDTH,w=a.DEFAULT_HEIGHT,y=a.DEFAULT_FONT,k=r.PI/180,x=2*r.PI,C="linear",T="radial",S="solid",D="square",A=g("<canvas width='#= d.options.width #px' height='#= d.options.height #px' style='position: relative; display: #= d.display #;'></canvas>"),E=u.extend({init:function(e){var t=this;u.fn.init.call(t,e),t.display=t.options.inline?"inline":"block"},options:{width:b,height:w},renderTo:function(e){var t,n=this,r=n.options;return t=e.firstElementChild,t&&"canvas"===t.tagName.toLowerCase()?(i(t).siblings().remove(),t.width=r.width,t.height=r.height):(e.innerHTML=A(this),t=e.firstElementChild),n._viewElement=t,n.renderContent(t.getContext("2d")),t},replace:function(e){var t,n=this,i=n._viewElement,r=e.box;i&&r&&(t=i.getContext("2d"),t.clearRect(r.x1,r.y1,r.width(),r.height()),e.getViewElements(n)[0].render(t))},renderContent:function(e){var t,n=this,i=n.sortChildren(),r=i.length;for(t=0;r>t;t++)i[t].render(e)},createGroup:function(e){return new F(e)},createText:function(e,t){return new M(e,t)},createRect:function(e,t){return new P(e.points(),!0,this.setDefaults(t))},createLine:function(e,t,n,i,r){return new P([new d(e,t),new d(n,i)],!1,this.setDefaults(r))},createMultiLine:function(e,t){return this.decorate(new B(e,!1,this.setDefaults(t)))},createPolyline:function(e,t,n){return new P(e,t,this.setDefaults(n))},createCircle:function(e,t,n){return new H(e,t,n)},createSector:function(e,t){return new z(e,t)},createRing:function(e,t){return new z(e,t)},createPin:function(e,t){return new R(e,t)}}),F=p.extend({render:function(e){this.renderContent(e)},renderContent:E.fn.renderContent}),I=p.extend({options:{fillOpacity:1,strokeOpacity:1,strokeLineCap:D},render:function(e){var t=this,n=t.options;e.save(),e.beginPath(),t.renderPoints(e),t.setLineDash(e),t.setLineCap(e),n.fill&&"transparent"!==n.fill&&(t.setFill(e),e.globalAlpha=n.fillOpacity,e.fill()),n.stroke&&n.strokeWidth&&(e.strokeStyle=n.stroke,e.lineWidth=n.strokeWidth,e.lineJoin="round",e.globalAlpha=n.strokeOpacity,e.stroke()),t.renderOverlay(e),e.restore()},setLineDash:function(e){var t,n=this.options.dashType;n=n?n.toLowerCase():null,n&&n!=S&&(t=_[n],e.setLineDash?e.setLineDash(t):(e.mozDash=t,e.webkitLineDash=t))},setLineCap:function(e){var t=this.options,n=t.dashType;e.lineCap=n&&n!==S?m:t.strokeLineCap},setFill:function(e){var t=this.options,n=t.fill;e.fillStyle=n},renderOverlay:function(e){var t,n,i=this.options,r=i.overlay;r&&r.gradient&&(n=a.Gradients[r.gradient],t=this.buildGradient(e,n),t&&(e.fillStyle=t,e.fill()))},renderPoints:i.noop,buildGradient:i.noop}),P=I.extend({init:function(e,t,n){var i=this;I.fn.init.call(i,n),i.points=e,i.closed=t},options:{rotation:[0,0,0]},renderPoints:function(e){var t=this,n=t.points;t._renderPoints(e,n)},_renderPoints:function(e,n){var i,r,o=this,a=o.options,s=a.strokeWidth,l=a.align!==!1&&s&&0!==s%2,d=l?t:h;if(0!==n.length&&(a.fill||a.stroke)){for(0!==a.rotation[0]&&o.setRotation(e),r=n[0],e.moveTo(d(r.x,v),d(r.y,v)),i=1;i<n.length;i++)r=n[i],e.lineTo(d(r.x,v),d(r.y,v));o.closed&&e.closePath()}},buildGradient:function(e,t){var i,r=this.bbox(),o=this.options.overlay.rotation,a=r.x2,s=r.y1;return 90===o&&(a=r.x1,s=r.y2),t&&t.type===C&&(i=e.createLinearGradient(r.x1,r.y1,a,s),n(i,t.stops)),i},bbox:function(){var e,t=this.points,n=new s;if(t.length>0)for(n.move(t[0].x,t[0].y),e=1;e<t.length;e++)n.wrapPoint(t[e]);return n},setRotation:function(e){var t=this,n=t.options,i=n.rotation,r=i[1],o=i[2];e.translate(r,o),e.rotate(i[0]*k),e.translate(-r,-o)}}),B=P.extend({renderPoints:function(e){var t,n=this,i=n.points;for(t=0;t<i.length;t++)n._renderPoints(e,i[t])}}),z=I.extend({init:function(e,t){var n=this;I.fn.init.call(n,t),n.config=e||{}},options:{strokeLineCap:D},renderPoints:function(t){var n,i,o=this,a=o.config,s=a.startAngle,l=a.angle+s,d=r.max(a.r,0),c=r.max(a.ir,0),u=a.c,p=e(s),f=e(l);p===f&&(s=0,l=360,p=0,f=2*Math.PI),n=a.point(s),i=a.point(l,!0),t.moveTo(n.x,n.y),t.arc(u.x,u.y,d,p,f),c>0?(t.lineTo(i.x,i.y),t.arc(u.x,u.y,c,f,p,!0)):t.lineTo(u.x,u.y)},buildGradient:function(e,t){var i,r=this.config,o=r.c;return t&&t.type===T&&(i=e.createRadialGradient(o.x,o.y,r.ir,o.x,o.y,r.r),n(i,t.stops)),i}}),H=I.extend({init:function(e,t,n){var i=this;I.fn.init.call(i,n),i.config=new c(e,0,t)},renderPoints:function(e){var t=this.config,n=t.c;e.arc(n.x,n.y,t.r,0,x,!1)},buildGradient:z.fn.buildGradient}),R=I.extend({init:function(e,t){var n=this;I.fn.init.call(n,t),n.config=e},renderPoints:function(t){var n=this,i=n.config,o=i.radius,a=r.PI/180,s=i.arcAngle,l=i.height-o*(1-r.cos(s*a/2)),d=i.origin,c=n.options.rotation;t.translate(c[1],c[2]),t.rotate(e(c[0])),t.translate(c[1]-d.x,c[2]-d.y),t.rotate(e(-n.config.rotation)),t.moveTo(0,0),t.arc(0,-l,o,e(90-s/2),e(90+s/2)),t.lineTo(0,0),t.closePath()}}),M=p.extend({init:function(e,t){var n=this;p.fn.init.call(n,t),n.content=e},options:{x:0,y:0,baseline:0,font:y,size:{width:0,height:0},fillOpacity:1},render:function(e){var t=this,n=t.options,i=t.content,r=n.x,o=n.y+n.baseline;e.save(),0!==n.rotation&&t.setRotation(e),e.font=n.font,e.fillStyle=n.color,e.globalAlpha=n.fillOpacity,e.fillText(i,r,o),e.restore()},setRotation:function(e){var t=this,n=t.options,i=n.size,r=n.x+i.normalWidth/2,o=n.y+i.normalHeight/2,a=n.x+i.width/2,s=n.y+i.height/2,l=a-r,d=s-o;e.translate(l,d),e.translate(r,o),e.rotate(n.rotation*k),e.translate(-r,-o)}});a.supportsCanvas()&&a.ViewFactory.current.register("canvas",E,30),f(a,{CanvasCircle:H,CanvasGroup:F,CanvasLine:P,CanvasMultiLine:B,CanvasPath:I,CanvasRing:z,CanvasText:M,CanvasView:E})}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.ui.Widget,i=e.proxy,r=Math.abs,o=20,a=t.Class.extend({init:function(n,i,o){o=e.extend({minXDelta:30,maxYDelta:20,maxDuration:1e3},o),new t.UserEvents(n,{surface:o.surface,allowSelection:!0,start:function(e){2*r(e.x.velocity)>=r(e.y.velocity)&&e.sender.capture()},move:function(e){var t=e.touch,n=e.event.timeStamp-t.startTime,a=t.x.initialDelta>0?"right":"left";r(t.x.initialDelta)>=o.minXDelta&&r(t.y.initialDelta)<o.maxYDelta&&n<o.maxDuration&&(i({direction:a,touch:t,target:t.target}),t.cancel())}})}}),s=n.extend({init:function(e,r){function o(e){return function(t){s._triggerTouch(e,t)}}function a(e){return function(t){s.trigger(e,{touches:t.touches,distance:t.distance,center:t.center,event:t.event})}}var s=this;n.fn.init.call(s,e,r),r=s.options,e=s.element,s.events=new t.UserEvents(e,{filter:r.filter,surface:r.surface,multiTouch:r.multiTouch,allowSelection:!0,press:i(s,"_touchstart"),tap:i(s,"_tap"),gesturestart:a("gesturestart"),gesturechange:a("gesturechange"),gestureend:a("gestureend")}),r.enableSwipe?(s.events.bind("start",i(s,"_swipestart")),s.events.bind("move",i(s,"_swipemove"))):(s.events.bind("start",i(s,"_dragstart")),s.events.bind("move",o("drag")),s.events.bind("end",o("dragend"))),t.notify(s)},events:["touchstart","dragstart","drag","dragend","tap","doubletap","hold","swipe","gesturestart","gesturechange","gestureend"],options:{name:"Touch",surface:null,global:!1,multiTouch:!1,enableSwipe:!1,minXDelta:30,maxYDelta:20,maxDuration:1e3,minHold:800,doubleTapTimeout:800},_cancelHold:function(){clearTimeout(this.holdTimeout)},_triggerTouch:function(e,t){this.trigger(e,{touch:t.touch,event:t.event})},_touchstart:function(e){var t=this;t._triggerTouch("touchstart",e),t._cancelHold(),t.holdTimeout=setTimeout(function(){t._triggerTouch("hold",e)},t.options.minHold)},_tap:function(e){var n=this,i=n.lastTap,r=e.touch;n._cancelHold(),i&&r.endTime-i.endTime<n.options.doubleTapTimeout&&t.touchDelta(r,i).distance<o?(n._triggerTouch("doubletap",e),n.lastTap=null):(n._triggerTouch("tap",e),n.lastTap=r)},_dragstart:function(e){this._cancelHold(),this._triggerTouch("dragstart",e)},_swipestart:function(e){this._cancelHold(),2*r(e.x.velocity)>=r(e.y.velocity)&&e.sender.capture()},_swipemove:function(e){var t=this,n=t.options,i=e.touch,o=e.event.timeStamp-i.startTime,a=i.x.initialDelta>0?"right":"left";t._cancelHold(),r(i.x.initialDelta)>=n.minXDelta&&r(i.y.initialDelta)<n.maxYDelta&&o<n.maxDuration&&(t.trigger("swipe",{direction:a,touch:e.touch}),i.cancel())}});window.jQuery.fn.kendoMobileSwipe=function(e,t){this.each(function(){new a(this,e,t)})},t.ui.plugin(s)}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.mobile,i=n.ui,r="show",o="hide",a="open",s="close",l='<div class="km-popup-wrapper" />',d='<div class="km-popup-arrow" />',c='<div class="km-popup-overlay" />',u="km-up km-down km-left km-right",p=i.Widget,f={down:{origin:"bottom center",position:"top center"},up:{origin:"top center",position:"bottom center"},left:{origin:"center left",position:"center right",collision:"fit flip"},right:{origin:"center right",position:"center left",collision:"fit flip"}},h={animation:{open:{effects:"fade:in",duration:0},close:{effects:"fade:out",duration:400}}},g={horizontal:{offset:"top",size:"height"},vertical:{offset:"left",size:"width"}},m={up:"down",down:"up",left:"right",right:"left"},v=p.extend({init:function(i,r){var a,s=this,u=i.closest(".km-modalview-wrapper"),m=u[0]?u:n.application.element,v={viewport:n.application.element,open:function(){s.overlay.show()},activate:e.proxy(s._activate,s),deactivate:function(){s.overlay.hide(),s.trigger(o)}};p.fn.init.call(s,i,r),i=s.element,r=s.options,i.wrap(l).addClass("km-popup").show(),a=s.options.direction.match(/left|right/)?"horizontal":"vertical",s.dimensions=g[a],s.wrapper=i.parent().css({width:r.width,height:r.height}).addClass("km-popup-wrapper km-"+r.direction).hide(),s.arrow=e(d).prependTo(s.wrapper).hide(),s.overlay=e(c).appendTo(m).hide(),v.appendTo=s.overlay,s.popup=new t.ui.Popup(s.wrapper,e.extend(!0,v,h,f[r.direction]))},options:{name:"Popup",width:240,height:320,direction:"down"},events:[r,o],show:function(t){var n=this,i=n.popup;i.options.anchor=e(t),i.open()},target:function(){return this.popup.options.anchor},hide:function(){this.popup.close()},destroy:function(){p.fn.destroy.call(this),this.popup.destroy()},_activate:function(){var t=this,n=t.options.direction,i=t.dimensions,o=i.offset,a=t.popup,s=a.options.anchor,l=e(s).offset(),d=e(a.element).offset(),c=a.flipped?m[n]:n,p=l[o]-d[o]+e(s)[i.size]()/2;t.wrapper.removeClass(u).addClass("km-"+c),t.arrow.css(o,p).show(),t.trigger(r)}}),_=p.extend({init:function(n,r){var o,l=this;l.initialOpen=!1,p.fn.init.call(l,n,r),r=l.options,o=e.extend({show:function(){l.trigger(a,{target:l.popup.target()})},hide:function(){l.trigger(s)}},this.options.popup),l.popup=new v(l.element,o),l.pane=new i.Pane(l.element,this.options.pane),l.pane.navigateToInitial(),t.notify(l,i)},options:{name:"PopOver",popup:{},pane:{}},events:[a,s],open:function(e){this.openFor(e)},openFor:function(e){this.popup.show(e),this.initialOpen||(this.pane.navigate(""),this.initialOpen=!0)},close:function(){this.popup.hide()},destroy:function(){p.fn.destroy.call(this),this.pane.destroy(),this.popup.destroy(),t.destroy(this.element)}});i.plugin(v),i.plugin(_)}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.mobile.ui,i=n.Widget,r=e.map(t.eventMap,function(e){return e}).join(" ").split(" "),o=i.extend({init:function(t,n){var r=this,o=e('<div class="km-loader"><span class="km-loading km-spin"></span><span class="km-loading-left"></span><span class="km-loading-right"></span></div>');i.fn.init.call(r,o,n),r.container=t,r._attachCapture(),o.append(r.options.loading).hide().appendTo(t)},options:{name:"Loader",loading:"<h1>Loading...</h1>",timeout:100},show:function(){var e=this;clearTimeout(e._loading),e.options.loading!==!1&&(e._loading=setTimeout(function(){e.element.show()},e.options.timeout))},hide:function(){var e=this;clearTimeout(e._loading),e.element.hide()},transition:function(){this.transitioning=!0,this.container.css("pointer-events","none")},transitionDone:function(){this.transitioning=!1,this.container.css("pointer-events","")},_attachCapture:function(){function e(e){n.transitioning&&e.preventDefault()}var t,n=this;for(n.transitioning=!1,t=0;t<r.length;t++)n.container[0].addEventListener(r[t],e,!0)}});n.plugin(o)}(window.kendo.jQuery),function(e,t){var n=window.kendo,i=n.mobile.ui,r=n.ui.Popup,o='<div class="km-shim"/>',a=i.Widget,s=a.extend({init:function(t,i){var s=this,l=n.mobile.application,d=l?l.os.name:n.support.mobileOS.name,c="ios"===d||"wp"===d||l.os.skin,u="blackberry"===d,p=i.align||(c?"bottom center":u?"center right":"center center"),f=i.position||(c?"bottom center":u?"center right":"center center"),h=i.effect||(c?"slideIn:up":u?"slideIn:left":"fade:in"),g=e(o).handler(s).hide();a.fn.init.call(s,t,i),s.shim=g,s.element=t,s.options.modal||s.shim.on("up","hide"),(l?l.element:e(document.body)).append(g),s.popup=new r(s.element,{anchor:g,modal:!0,appendTo:g,origin:p,position:f,animation:{open:{effects:h,duration:s.options.duration},close:{duration:s.options.duration}},deactivate:function(){g.hide()},open:function(){g.show()}}),n.notify(s)},options:{name:"Shim",modal:!0,align:t,position:t,effect:t,duration:200},show:function(){this.shim.css("height",this.shim.parent()[0].scrollHeight),this.popup.open()},hide:function(t){t&&e.contains(this.shim[0],t.target)||this.popup.close()},destroy:function(){a.fn.destroy.call(this),this.shim.kendoDestroy(),this.popup.destroy(),this.shim.remove()}});i.plugin(s)}(window.kendo.jQuery),function(e,t){function n(e){var t,n,i=e.find(k("popover")),r=d.roles;for(t=0,n=i.length;n>t;t++)s.initWidget(i[t],{},r)}function i(e){s.triggeredByInput(e)||e.preventDefault()}function r(e,t){e[0]&&t[0]&&e[0]!=t[0]&&e.kendoAnimateTo(t,{effects:"fade",duration:h})}function o(t){t.each(function(){s.initWidget(e(this),{},d.roles)})}function a(e){for(var t=e.split("?")[1]||"",n={},i=t.split(/&|=/),r=i.length,o=0;r>o;o+=2)n[i[o]]=i[o+1];return n}var s=window.kendo,l=s.mobile,d=l.ui,c=s.attr,u=s.Class,p=d.Widget,f="init",h=320,g="beforeShow",m="show",v="afterShow",_="beforeHide",b="hide",w="z-index",y=s.attrValue,k=s.roleSelector,x=p.extend({init:function(t,n){var i=this;p.fn.init.call(i,t,n),t=i.element,i.params={},i._paramsHistory=[],e.extend(i,n),i.applicationNativeScrolling=l.application&&l.application.options.useNativeScrolling,i._id(),i._layout(),i._scroller(),i._model()},events:[f,g,m,v,_,b],options:{name:"View",title:"",reload:!1,defaultTransition:"",useNativeScrolling:!1,stretch:!1,zoom:!1,model:null},destroy:function(){this.layout&&this.layout.detach(this),p.fn.destroy.call(this),this.scroller&&this.scroller.destroy(),s.destroy(this.element)},purge:function(){this.destroy(),this.element.remove()},showStart:function(){var e=this;e.element.css("display",""),e.inited||(e.inited=!0,e.trigger(f,{view:e})),e.layout&&e.layout.attach(e),e.trigger(m,{view:e}),e._padIfNativeScrolling()},hideStart:function(){this.trigger(_,{view:this})},hideComplete:function(){var e=this;e.element.hide(),e.trigger(b,{view:e})},updateParams:function(e,t,n){this._paramsHistory[this._paramsHistory.length-2]===JSON.stringify(t)&&(this._paramsHistory.pop(),this.nextViewID=this.id,this.backTransition=this.transition),this.switchWith(new C(this),e,t,n)},_padIfNativeScrolling:function(){this.applicationNativeScrolling&&this.content.css({paddingTop:this.header.height(),paddingBottom:this.footer.height()})},switchWith:function(e,t,n,i){var r=this,o=this._paramsHistory,a=function(){r.trigger(v,{view:r}),r._padIfNativeScrolling(),i()};r.trigger(g,{view:r})||(r._back=o[o.length-1]===JSON.stringify(n),r._back||o.push(JSON.stringify(n)),r.params=n,e?(e.hideStart(),r.showStart(),new T({current:e,next:r,transition:t,defaultTransition:e.options.defaultTransition,complete:a})):(r.showStart(),a()))},parallaxContents:function(e){var t=this,n=t.content;return e.header[0]||(n=n.add(t.header)),e.footer[0]||(n=n.add(t.footer)),n},contentElement:function(){var e=this;return e.options.stretch?e.content:e.scrollerContent},_scroller:function(){var t=this;t.applicationNativeScrolling||(t.options.stretch?t.content.addClass("km-stretched-view"):(t.content.kendoMobileScroller({zoom:t.options.zoom,useNative:t.options.useNativeScrolling}),t.scroller=t.content.data("kendoMobileScroller"),t.scrollerContent=t.scroller.scrollElement),s.support.kineticScrollNeeded&&(e(t.element).on("touchmove",".km-header",i),t.options.useNativeScrolling||e(t.element).on("touchmove",".km-content",i)))},_model:function(){var e=this,t=e.element,i=e.options.model;"string"==typeof i&&(i=s.getter(i)(window)),e.model=i,n(t),e.element.css("display",""),i?s.bind(t.children(),i,d,s.ui,s.dataviz.ui):l.init(t.children()),e.element.css("display","none")},_id:function(){var e=this.element;this.id=y(e,"url")||"#"+e.attr("id")},_layout:function(){var e=this,t=k("content"),n=e.element;n.data("kendoView",e).addClass("km-view"),e.transition=y(n,"transition"),e.header=n.children(k("header")).addClass("km-header"),e.footer=n.children(k("footer")).addClass("km-footer"),n.children(t)[0]||n.wrapInner("<div "+c("role")+'="content"></div>'),e.content=n.children(k("content")).addClass("km-content"),e.element.prepend(e.header).append(e.footer),e.layout&&e.layout.setup(e)}}),C=s.mobile.ui.Widget.extend({init:function(t){var n=t.element.clone(!0);e.extend(this,{element:n,header:n.children(k("header")),content:n.children(k("content")),footer:n.children(k("footer")),transition:t.transition,options:{defaultTransition:t.options.defaultTransition},params:JSON.stringify(t.params),id:t.id}),t.element.parent().append(this.element)},parallaxContents:x.prototype.parallaxContents,hideStart:e.noop,hideComplete:function(){this.element.remove()}}),T=u.extend({init:function(t){e.extend(this,t);var n=this,i=n.current,o=n.next,a=i.element,s=o.element,l=o,d=i,c=n._transition();c.reverse&&!c.parallax&&(l=i,d=o),l.element.css(w,1),d.element.css(w,0),c.parallax&&(r(i.footer,o.footer),r(i.header,o.header),a=i.parallaxContents(o),s=o.parallaxContents(i)),a.kendoAnimateTo(s,c),n.back()||(i.nextViewID=o.id,i.backTransition=c.transition)},_transition:function(){var e=this,t=e.current,n=e.next,i=e.back(),r=function(){t.hideComplete(),e.complete()},o=i?n.backTransition:n.transition,a=e.transition||o||e.defaultTransition,s=a.split(" "),l=s[0],d=/^slide/.test(l),c="reverse"===s[1];return e.back()&&!e.transition&&(c=!c),{effects:l,reverse:c,parallax:d,complete:r,transition:a,duration:h}},back:function(){var e=this.next,t=this.current;return e.nextViewID&&e.nextViewID===t.id&&e._back}}),S=p.extend({init:function(e,t){var i=this;p.fn.init.call(i,e,t),e=i.element,i.element=e.detach(),i.header=e.children(k("header")).addClass("km-header"),i.footer=e.children(k("footer")).addClass("km-footer"),i.elements=i.header.add(i.footer),n(e),s.mobile.init(i.element.children()),i.trigger(f,{layout:i})},options:{name:"Layout"},events:[f,m,b],setup:function(e){e.header[0]||(e.header=this.header),e.footer[0]||(e.footer=this.footer)},detach:function(e){var t=this;e.header===t.header&&t.header[0]&&e.element.prepend(t.header.detach()[0].cloneNode(!0)),e.footer===t.footer&&t.footer.length&&e.element.append(t.footer.detach()[0].cloneNode(!0)),t.trigger(b,{layout:t,view:e})},attach:function(e){var t=this,n=t.currentView;n&&t.detach(n),e.header===t.header&&(t.header.detach(),e.element.children(k("header")).remove(),e.element.prepend(t.header)),e.footer===t.footer&&(t.footer.detach(),e.element.children(k("footer")).remove(),e.element.append(t.footer)),t.trigger(m,{layout:t,view:e}),t.currentView=e}}),D=s.Observable,A=/<body[^>]*>(([\u000a\u000d\u2028\u2029]|.)*)<\/body>/i,E="loadStart",F="loadComplete",I="showStart",P="sameViewRequested",B="viewShow",z=D.extend({init:function(t){var n,i,r,a=this;if(D.fn.init.call(a),e.extend(a,t),a.sandbox=e("<div />"),r=a.container,n=a._hideViews(r),a.rootView=n.first(),!a.rootView[0]&&t.rootNeeded)throw i=r[0]==s.mobile.application.element[0]?'Your kendo mobile application element does not contain any direct child elements with data-role="view" attribute set. Make sure that you instantiate the mobile application using the correct container.':'Your pane element does not contain any direct child elements with data-role="view" attribute set.',Error(i);a._view=null,a.layouts={},a._setupLayouts(r),o(r.children(k("modalview drawer"))),a.loader&&(a.bind(I,function(){a.loader.transition()}),a.bind(E,function(){a.loader.show()}),a.bind(F,function(){a.loader.hide()}),a.bind(B,function(){a.loader.transitionDone()}))},view:function(){return this._view},showView:function(e,n){if(e=e.replace(RegExp("^"+this.remoteViewURLPrefix),""),""===e&&this.remoteViewURLPrefix&&(e="/"),e===this.url)return this.trigger(P),t;this.trigger(I);var i=this,r=function(t){i._show(t,n,a(e))},o=i._findViewElement(e),s=o.data("kendoView");i.url=e,s&&s.reload&&(s.purge(),o=[]),this.trigger("viewTypeDetermined",{remote:0===o.length,url:e}),o[0]?(s||(s=i._createView(o)),r(s)):i._loadView(e,r)},_findViewElement:function(e){var t,n=e.split("?")[0];return n?(t=this.container.children("["+c("url")+"='"+n+"']"),t[0]||-1!==n.indexOf("/")||(t=this.container.children("#"===n.charAt(0)?n:"#"+n)),t):this.rootView},_createView:function(e){var n,i=this,r=y(e,"layout");return t===r&&(r=i.layout),r&&(r=i.layouts[r]),n={defaultTransition:i.transition,loader:i.loader,container:i.container,layout:r,reload:y(e,"reload")},s.initWidget(e,n,d.roles)},_loadView:function(n,i){var r=this;return this.serverNavigation?(location.href=n,t):(r._xhr&&r._xhr.abort(),r.trigger(E),r._xhr=e.get(s.absoluteURL(n,r.remoteViewURLPrefix),function(e){r.trigger(F),i(r._createRemoteView(n,e))},"html").fail(function(e){r.trigger(F),0===e.status&&e.responseText&&i(r._createRemoteView(n,e.responseText))}),t)},_createRemoteView:function(e,t){var n,i,r,a=this,s=a.sandbox,l=e.split("?")[0],d=a.container;return A.test(t)&&(t=RegExp.$1),s[0].innerHTML=t,d.append(s.children("script, style")),n=a._hideViews(s),r=n.first(),r.length||(n=r=s.wrapInner("<div data-role=view />").children()),r.hide().attr(c("url"),l),a._setupLayouts(s),i=s.children(k("modalview drawer")),d.append(s.children(k("layout modalview drawer")).add(n)),o(i),a._createView(r)},_show:function(e,t,n){var i=this;i._view!==e?e.switchWith(i._view,t,n,function(){i._view=e,i.trigger(B,{view:e})}):i._view.updateParams(t,n,function(){i.trigger(B,{view:i._view})})},_hideViews:function(e){return e.children(k("view splitview")).hide()},_setupLayouts:function(n){var i=this;n.children(k("layout")).each(function(){var n=e(this),r=y(n,"platform");(r===t||r===l.application.os.name)&&(i.layouts[s.attrValue(n,"id")]=s.initWidget(n,{},d.roles))})}});s.mobile.ViewEngine=z,d.plugin(x),d.plugin(S)}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.mobile.ui,i=n.Shim,r=n.Widget,o="open",a="close",s="init",l='<div class="km-modalview-wrapper" />',d=n.View.extend({init:function(e,n){var o,a,d=this;r.fn.init.call(d,e,n),e=d.element,n=d.options,o=e[0].style.width||e.css("width"),a=e[0].style.height||e.css("height"),e.addClass("km-modalview").wrap(l),d.wrapper=e.parent().css({width:n.width||o||300,height:n.height||a||300}),e.css({width:"",height:""}),d.shim=new i(d.wrapper,{modal:n.modal,position:"center center",align:"center center",effect:"fade:in"}),d._layout(),d._scroller(),d._model(),d.element.css("display",""),d.trigger(s),t.onResize(function(){var e=d.wrapper.parent(),t=e.parent();e.css({top:(t.height()-e.height())/2+"px",left:(t.width()-e.width())/2+"px"})})},events:[s,o,a],options:{name:"ModalView",modal:!0,width:null,height:null},destroy:function(){r.fn.destroy.call(this),this.shim.destroy()},open:function(t){var n=this;n.target=e(t),n.shim.show(),n.trigger("show",{view:n})},openFor:function(e){this.open(e),this.trigger(o,{target:e})},close:function(){this.shim.hide(),this.trigger(a)}});n.plugin(d)}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.mobile,i=t.support.mobileOS,r=t.effects.Transition,o=t.roleSelector,a="x",s=n.ui,l=!(i.ios&&7==i.majorVersion),d="beforeShow",c="init",u="show",p="hide",f=s.View.extend({init:function(i,r){var a,s,d;e(i).parent().prepend(i),n.ui.Widget.fn.init.call(this,i,r),this._layout(),this._scroller(),this._model(),this.pane=this.element.closest(o("pane")).data("kendoMobilePane"),a=this,this.pane.bind("viewShow",function(e){a._viewShow(e)}),this.pane.bind("sameViewRequested",function(){a.hide()}),s=function(e){a.visible&&(a.hide(),e.preventDefault())},d=this.userEvents=new t.UserEvents(this.pane.element,{filter:o("view"),allowSelection:!0}),l?(d.bind("start",function(e){a._start(e)}),d.bind("move",function(e){a._update(e)}),d.bind("end",function(e){a._end(e)}),d.bind("tap",s)):d.bind("press",s),this.leftPositioned="left"===this.options.position,this.visible=!1,this.element.addClass("km-drawer").addClass(this.leftPositioned?"km-left-drawer":"km-right-drawer")},options:{name:"Drawer",position:"left",views:[],title:""},events:[d,p,c,u],show:function(){this._activate()&&this._show()},hide:function(){this._transitioning||(this.currentView.scroller&&this.currentView.scroller.enable(),this.visible=!1,f.current=null,this._moveViewTo(0),this.trigger(p,{view:this}))},openFor:function(){this.visible?this.hide():this.show()},destroy:function(){s.View.fn.destroy.call(this),this.userEvents.destroy()},_activate:function(){var e=this.options.views,t=!e[0]||e.indexOf(this.pane.view().id.replace("#",""))>-1;return this.trigger(d,{view:this})||!t?!1:(this._setAsCurrent(),this.trigger(u,{view:this}),!0)},_show:function(){if(!this._transitioning){this.currentView.scroller&&this.currentView.scroller.disable(),this.visible=!0;var e=this.element.width();this.leftPositioned||(e=-e),this._moveViewTo(e)}},_setAsCurrent:function(){f.last!==this&&(f.last&&f.last.element.hide(),this.element.show()),f.last=this,f.current=this},_moveViewTo:function(e){this.userEvents.cancel(),this._transitioning=!0,this.transition.moveTo({location:e,duration:400,ease:r.easeOutExpo})},_viewShow:function(e){var n,i=this,o=this.movable,s=o&&o.x;return this.currentView===e.view?(this.hide(),undefined):(this.currentView=e.view,n=e.view.element,o=this.movable=new t.ui.Movable(n),this.transition=new r({axis:a,movable:this.movable,onEnd:function(){i._transitioning=!1,0===o[a]&&(n[0].style.cssText="")}}),s&&(this.movable.moveAxis(a,s),this.hide()),undefined)},_start:function(e){var n,i,r,o,a,s=e.sender;return Math.abs(e.x.velocity)<Math.abs(e.y.velocity)||t.triggeredByInput(e.event)?(s.cancel(),undefined):(n=this.leftPositioned,i=this.visible,r=n&&i||!n&&!f.current,o=!n&&i||n&&!f.current,a=e.x.velocity<0,(r&&a||o&&!a)&&this._activate()?(s.capture(),undefined):(s.cancel(),undefined))},_update:function(e){var t,n=this.movable,i=n.x+e.x.delta;t=this.leftPositioned?Math.min(Math.max(0,i),this.element.width()):Math.max(Math.min(0,i),-this.element.width()),this.movable.moveAxis(a,t),e.event.preventDefault(),e.event.stopPropagation()},_end:function(e){var t,n=e.x.velocity,i=Math.abs(this.movable.x)>this.element.width()/2,r=.8;t=this.leftPositioned?n>-r&&(n>r||i):r>n&&(-r>n||i),t?this._show():this.hide()}});s.plugin(f)}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.mobile.ui,i=n.Widget,r=n.View,o=r.extend({init:function(r,o){var a,s=this;i.fn.init.call(s,r,o),r=s.element,e.extend(s,o),s._id(),s._layout(),s._style(),t.mobile.init(r.children(t.roleSelector("modalview"))),s.panes=[],s._paramsHistory=[],s.element.children(t.roleSelector("pane")).each(function(){a=t.initWidget(this,{},n.roles),s.panes.push(a)})},options:{name:"SplitView",style:"horizontal"},_layout:function(){var n=this,i=n.element;i.data("kendoView",n).addClass("km-view km-splitview"),n.transition=t.attrValue(i,"transition"),e.extend(n,{header:[],footer:[],content:i})},_style:function(){var t,n=this.options.style,i=this.element;n&&(t=n.split(" "),e.each(t,function(){i.addClass("km-split-"+this)}))},showStart:function(){var t=this;t.element.css("display",""),t.inited||(t.inited=!0,e.each(t.panes,function(){this.options.initial?this.navigateToInitial():this.navigate("")}),t.trigger("init",{view:t})),t.trigger("show",{view:t})}});n.plugin(o)}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.mobile,i=t.roleSelector,r=n.ui,o=r.Widget,a=n.ViewEngine,s=n.ui.Loader,l="external",d="href",c="#!",u="navigate",p="viewShow",f="sameViewRequested",h=/popover|actionsheet|modalview|drawer/,g="#:back",m=t.attrValue,v="button backbutton detailbutton listview-link",_="tab",b=o.extend({init:function(e,t){var n=this;o.fn.init.call(n,e,t),t=n.options,e=n.element,e.addClass("km-pane"),n.history=[],n.loader=new s(e,{loading:n.options.loading}),n.viewEngine=new a({container:e,transition:t.transition,rootNeeded:!t.initial,serverNavigation:t.serverNavigation,remoteViewURLPrefix:t.root||"",layout:t.layout,loader:n.loader}),n.viewEngine.bind(p,function(e){n.trigger(p,e)}),n.viewEngine.bind(f,function(e){n.trigger(f,e)}),n.viewEngine.bind("viewTypeDetermined",function(e){e.remote&&n.options.serverNavigation||n.trigger(u,{url:e.url})}),n._setupAppLinks()},navigateToInitial:function(){var e=this.options.initial;e&&this.navigate(e)},options:{name:"Pane",transition:"",layout:"",initial:null,loading:"<h1>Loading...</h1>"},events:[u,p,f],destroy:function(){o.fn.destroy.call(this),t.destroy(this.element)},navigate:function(e,t){var n=this,i=n.history;if(e===g){if(1===i.length)return;i.pop(),e=i[i.length-1]}else n.history.push(e);n.viewEngine.showView(e,t)},hideLoading:function(){this.loader.hide()},showLoading:function(){this.loader.show()},view:function(){return this.viewEngine.view()},_setupAppLinks:function(){this.element.handler(this).on("down",i(_),"_mouseup").on("up",i(v),"_mouseup").on("click",i(_+" "+v),"_appLinkClick")},_appLinkClick:function(t){var n="#"!==t.currentTarget.href[0]&&this.options.serverNavigation;n||m(e(t.currentTarget),"rel")==l||t.preventDefault()},_mouseup:function(i){if(!(i.which>1||i.isDefaultPrevented())){var o=this,a=e(i.currentTarget),s=m(a,"transition"),u=m(a,"rel")||"",p=m(a,"target"),f=a.attr(d),g=f&&"#"!==f[0]&&this.options.serverNavigation;g||u===l||undefined===f||f===c||(a.attr(d,c),setTimeout(function(){a.attr(d,f)}),u.match(h)?(t.widgetInstance(e(f),r).openFor(a),"actionsheet"===u&&i.stopPropagation()):("_top"===p?o=n.application.pane:p&&(o=e("#"+p).data("kendoMobilePane")),o.navigate(f,s)),i.preventDefault())}}});r.plugin(b)}(window.kendo.jQuery),function(e,t){function n(e,t){var n=[];return f&&n.push("km-on-"+f.name),e.skin?n.push("km-"+e.skin):("ios"==e.name&&e.majorVersion>6?n.push("km-ios7"):n.push("km-"+e.name),n.push("km-"+e.name+e.majorVersion),n.push("km-"+e.majorVersion),n.push("km-m"+(e.minorVersion?e.minorVersion[0]:0))),e.appMode?n.push("km-app"):n.push("km-web"),t&&t.statusBarStyle&&n.push("km-"+t.statusBarStyle+"-status-bar"),n.join(" ")
}function i(){return 0===parseInt(e("<div style='background: Background' />").css("background-color").split(",")[1],10)?"dark":"light"}function r(e){return f.wp?"-kendo-landscape"==e.css("animation-name"):1==Math.abs(window.orientation)/90}function o(e){return r(e)?m:g}function a(e){e.parent().addBack().css("min-height",window.innerHeight)}function s(){e("meta[name=viewport]").remove(),E.append(_({height:", width=device-width"+(r()?", height="+window.innerHeight+"px":c.mobileOS.flatVersion>=600&&c.mobileOS.flatVersion<700?", height="+window.innerWidth+"px":", height=device-height")}))}var l=window.kendo,d=l.mobile,c=l.support,u=d.ui.Pane,p="ios",f=c.mobileOS,h="blackberry"==f.device&&f.flatVersion>=600&&f.flatVersion<1e3&&f.appMode,g="km-vertical",m="km-horizontal",v={ios7:{ios:!0,browser:"default",device:"iphone",flatVersion:"700",majorVersion:"7",minorVersion:"0.0",name:"ios",tablet:!1},ios:{ios:!0,browser:"default",device:"iphone",flatVersion:"612",majorVersion:"6",minorVersion:"1.2",name:"ios",tablet:!1},android:{android:!0,browser:"default",device:"android",flatVersion:"233",majorVersion:"2",minorVersion:"3.3",name:"android",tablet:!1},blackberry:{blackberry:!0,browser:"default",device:"blackberry",flatVersion:"710",majorVersion:"7",minorVersion:"1.0",name:"blackberry",tablet:!1},meego:{meego:!0,browser:"default",device:"meego",flatVersion:"850",majorVersion:"8",minorVersion:"5.0",name:"meego",tablet:!1},wp:{wp:!0,browser:"default",device:"wp",flatVersion:"800",majorVersion:"8",minorVersion:"0.0",name:"wp",tablet:!1}},_=l.template('<meta content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no#=data.height#" name="viewport" />',{usedWithBlock:!1}),b=l.template('<meta name="apple-mobile-web-app-capable" content="#= data.webAppCapable === false ? \'no\' : \'yes\' #" /> <meta name="apple-mobile-web-app-status-bar-style" content="#=data.statusBarStyle#" /> <meta name="msapplication-tap-highlight" content="no" /> ',{usedWithBlock:!1}),w=l.template("<style>.km-view { clip: rect(0 #= data.width #px #= data.height #px 0); }</style>",{usedWithBlock:!1}),y=f.android||f.blackberry||f.meego,k=_({height:""}),x=l.template('<link rel="apple-touch-icon'+(f.android?"-precomposed":"")+'" # if(data.size) { # sizes="#=data.size#" #}# href="#=data.icon#" />',{usedWithBlock:!1}),C=("iphone"==f.device||"ipod"==f.device)&&f.majorVersion<7,T=("iphone"==f.device||"ipod"==f.device)&&f.majorVersion>=7,S=T?"none":null,D="mobilesafari"==f.browser?60:0,A=e(window),E=e("head"),F="init",I=e.proxy,P=l.Observable.extend({init:function(t,n){var i=this;d.application=i,i.options=e.extend({hideAddressBar:!0,useNativeScrolling:!1,statusBarStyle:"black",transition:"",updateDocumentTitle:!0},n),l.Observable.fn.init.call(i,i.options),i.bind(i.events,i.options),e(function(){t=e(t),i.element=t[0]?t:e(document.body),i._setupPlatform(),i._setupElementClass(),i._attachHideBarHandlers(),i.pane=new u(i.element,i.options),i.pane.navigateToInitial(),i._attachMeta(),i.options.updateDocumentTitle&&i._setupDocumentTitle(),i._startHistory(),i.trigger(F)})},events:[F],navigate:function(e,t){this.pane.navigate(e,t)},scroller:function(){return this.view().scroller},hideLoading:function(){if(!this.pane)throw Error("The mobile application instance is not fully instantiated. Please consider activating loading in the application init event handler.");this.pane.hideLoading()},showLoading:function(){if(!this.pane)throw Error("The mobile application instance is not fully instantiated. Please consider activating loading in the application init event handler.");this.pane.showLoading()},view:function(){return this.pane.view()},skin:function(e){var t=this;return arguments.length?(t.options.skin=e||"",t.element[0].className="km-pane",t._setupPlatform(),t._setupElementClass(),t.options.skin):t.options.skin},_setupPlatform:function(){var t,r=this,o=r.options.platform,a=r.options.skin,s=f||v[p];o&&(s="string"==typeof o?e.extend({},s,v[o]):o),a&&(s=e.extend({},s,{skin:a})),r.os=s,r.osCssClass=n(r.os,r.options),s.skin||"wp"!=s.name||(r.element.parent().css("overflow","hidden"),t=function(){r.element.removeClass("km-wp-dark km-wp-light").addClass("km-wp-"+i())},e(window).on("focusin",t),document.addEventListener("resume",t),t())},_startHistory:function(){var e=this,t=e.options.initial,n=new l.Router({pushState:e.options.pushState,root:e.options.root,init:function(i){var r=i.url,o=e.options.pushState?r:"/";e.pane.viewEngine.rootView.attr(l.attr("url"),o),"/"===r&&t&&(n.navigate(t,!0),i.preventDefault())},routeMissing:function(t){e.pane.navigate(t.url,S)}});e.pane.bind("navigate",function(e){n.navigate(e.url,!0)}),n.start(),e.router=n},_setupElementClass:function(){var t,n=this,i=n.element;i.parent().addClass("km-root km-"+(n.os.tablet?"tablet":"phone")),i.addClass(n.osCssClass+" "+o(i)),this.options.useNativeScrolling&&i.parent().addClass("km-native-scrolling"),c.wpDevicePixelRatio&&i.parent().css("font-size",c.wpDevicePixelRatio+"em"),h&&s(),n.options.useNativeScrolling?i.parent().addClass("km-native-scrolling"):y&&(t=(window.outerWidth>window.outerHeight?window.outerWidth:window.outerHeight)+200,e(w({width:t,height:t})).appendTo(E)),l.onResize(function(){i.removeClass("km-horizontal km-vertical").addClass(o(i)),n.options.useNativeScrolling&&a(i),h&&s()})},_attachMeta:function(){var e,t=this.options,n=t.icon;if(h||E.prepend(k),E.prepend(b(t)),n){"string"==typeof n&&(n={"":n});for(e in n)E.prepend(x({icon:n[e],size:e}))}t.useNativeScrolling&&a(this.element)},_attachHideBarHandlers:function(){var e=this,t=I(e,"_hideBar");!c.mobileOS.appMode&&e.options.hideAddressBar&&C&&!e.options.useNativeScrolling&&(e._initialHeight={},A.on("load",t),l.onResize(t),e.element[0].addEventListener("touchstart",function(t){l.triggeredByInput(t)||e._hideBar()},!0))},_setupDocumentTitle:function(){var e=this,n=document.title;e.pane.bind("viewShow",function(e){var i=e.view.title;document.title=i!==t?i:n})},_hideBar:function(){var t,n=this,i=n.element,r=window.orientation+"",o=n._initialHeight;o[r]||(o[r]=A.height()),t=o[r]+D,t!=i.height()&&(i.height(t),e(window).trigger(l.support.resize)),setTimeout(window.scrollTo,0,0,1)}});l.mobile.Application=P}(window.kendo.jQuery),function(e){var t=window.kendo,n=t.support,i=t.mobile.ui,r=i.Shim,o=i.Popup,a=i.Widget,s="open",l="li>a",d="actionsheetContext",c='<div class="km-actionsheet-wrapper" />',u=t.template('<li class="km-actionsheet-cancel"><a href="\\#">#:cancel#</a></li>'),p=a.extend({init:function(s,d){var p=this,f=n.mobileOS,h=f.tablet?o:r;a.fn.init.call(p,s,d),s=p.element,s.addClass("km-actionsheet").append(u({cancel:p.options.cancel})).wrap(c).on("up",l,"_click").on("click",l,t.preventDefault),p.wrapper=s.parent(),p.shim=new h(p.wrapper,e.extend({modal:f.ios&&f.majorVersion<7},p.options.popup)),t.notify(p,i),t.onResize(e.proxy(this,"_resize"))},events:[s],options:{name:"ActionSheet",cancel:"Cancel",popup:{height:"auto"}},open:function(t,n){var i=this;i.target=e(t),i.context=n,i.shim.show(t)},close:function(){this.context=this.target=null,this.shim.hide()},openFor:function(e){var t=this,n=e.data(d);t.open(e,n),t.trigger(s,{target:e,context:n})},destroy:function(){a.fn.destroy.call(this),this.shim.destroy()},_click:function(n){if(!n.isDefaultPrevented()){var i=e(n.currentTarget).data("action");i&&t.getter(i)(window)({target:this.target,context:this.context}),n.preventDefault(),this.close()}},_resize:function(){if(n.mobileOS.tablet)this.shim.hide();else if(this.element.is(":visible")){var e=this.wrapper.parent(),t=e.parent();e.css({top:t.height()-e.height()+"px",width:t.width()+"px"})}}});i.plugin(p)}(window.kendo.jQuery),function(e){function t(t,n,i){e(n.target).closest(".km-button,.km-detail").toggleClass("km-state-active",i),d&&t.deactivateTimeoutID&&(clearTimeout(t.deactivateTimeoutID),t.deactivateTimeoutID=0)}function n(t){return e('<span class="km-badge">'+t+"</span>")}var i=window.kendo,r=i.mobile,o=r.ui,a=o.Widget,s=i.support,l=s.mobileOS,d=l.android&&l.flatVersion>=300,c="click",u=a.extend({init:function(e,n){var r=this;a.fn.init.call(r,e,n),r._wrap(),r._style(),r._userEvents=new i.UserEvents(r.element,{press:function(e){r._activate(e)},tap:function(e){r._release(e)},release:function(e){t(r,e,!1)},end:function(e){i.mobile.application.options.useNativeScrolling&&e.preventDefault()}}),d&&r.element.on("move",function(e){r._timeoutDeactivate(e)})},destroy:function(){a.fn.destroy.call(this),this._userEvents.destroy()},events:[c],options:{name:"Button",icon:"",style:"",badge:""},badge:function(e){var t=this.badgeElement=this.badgeElement||n(e).appendTo(this.element);return e?(t.html(e),this):e===!1?(t.empty().remove(),this.badgeElement=!1,this):t.html()},_timeoutDeactivate:function(e){this.deactivateTimeoutID||(this.deactivateTimeoutID=setTimeout(t,500,this,e,!1))},_activate:function(e){var n=document.activeElement,i=n?n.nodeName:"";t(this,e,!0),("INPUT"==i||"TEXTAREA"==i)&&n.blur()},_release:function(t){var n=this;t.which>1||n.trigger(c,{target:e(t.target),button:n.element})&&t.preventDefault()},_style:function(){var t,n=this.options.style,i=this.element;n&&(t=n.split(" "),e.each(t,function(){i.addClass("km-"+this)}))},_wrap:function(){var t=this,i=t.options.icon,r=t.options.badge,o='<span class="km-icon km-'+i,a=t.element.addClass("km-button"),s=a.children("span:not(.km-icon)").addClass("km-text"),l=a.find("img").addClass("km-image");!s[0]&&a.html()&&(s=a.wrapInner('<span class="km-text" />').children("span.km-text")),!l[0]&&i&&(s[0]||(o+=" km-notext"),t.iconElement=a.prepend(e(o+'" />'))),r&&(t.badgeElement=n(r).appendTo(a))}}),p=u.extend({options:{name:"BackButton",style:"back"},init:function(e,t){var n=this;u.fn.init.call(n,e,t),undefined===n.element.attr("href")&&n.element.attr("href","#:back")}}),f=u.extend({options:{name:"DetailButton",style:""},init:function(e,t){u.fn.init.call(this,e,t)},_style:function(){var t,n=this.options.style+" detail",i=this.element;n&&(t=n.split(" "),e.each(t,function(){i.addClass("km-"+this)}))},_wrap:function(){var t=this,n=t.options.icon,i='<span class="km-icon km-'+n,r=t.element,o=r.children("span"),a=r.find("img").addClass("km-image");!a[0]&&n&&(o[0]||(i+=" km-notext"),r.prepend(e(i+'" />')))}});o.plugin(u),o.plugin(p),o.plugin(f)}(window.kendo.jQuery),function(e,t){function n(t){return e('<span class="km-badge">'+t+"</span>")}var i=window.kendo,r=i.mobile.ui,o=r.Widget,a="km-state-active",s="select",l="li:not(."+a+")",d=o.extend({init:function(e,t){var n=this;o.fn.init.call(n,e,t),n.element.addClass("km-buttongroup").find("li").each(n._button),n.element.on(n.options.selectOn,l,"_select"),n.select(n.options.index)},events:[s],options:{name:"ButtonGroup",selectOn:"down",index:-1},current:function(){return this.element.find("."+a)},select:function(n){var i=this,r=-1;n!==t&&-1!==n&&(i.current().removeClass(a),"number"==typeof n?(r=n,n=e(i.element[0].children[n])):n.nodeType&&(n=e(n),r=n.index()),n.addClass(a),i.selectedIndex=r)},badge:function(t,i){var r,o=this.element;return isNaN(t)||(t=o.children().get(t)),t=o.find(t),r=e(t.children(".km-badge")[0]||n(i).appendTo(t)),i?(r.html(i),this):i===!1?(r.empty().remove(),this):r.html()},_button:function(){var t=e(this).addClass("km-button"),r=i.attrValue(t,"icon"),o=i.attrValue(t,"badge"),a=t.children("span"),s=t.find("img").addClass("km-image");a[0]||(a=t.wrapInner("<span/>").children("span")),a.addClass("km-text"),!s[0]&&r&&t.prepend(e('<span class="km-icon km-'+r+'"/>')),o&&n(o).appendTo(t)},_select:function(e){if(!(e.which>1||e.isDefaultPrevented())){var t=this;t.select(e.currentTarget),t.trigger(s)}}});r.plugin(d)}(window.kendo.jQuery),function(e){function t(){return this.nodeType===m.TEXT_NODE&&this.nodeValue.match(V)}function n(e,t){t&&!e[0].querySelector(".km-icon")&&e.prepend('<span class="km-icon km-'+t+'"/>')}function i(e){n(e,T(e,"icon")),n(e,T(e.children(x),"icon"))}function r(e){var i=e.parent(),r=e.add(i.children(g.roleSelector("detailbutton"))),o=i.contents().not(r).not(t);o.length||(e.addClass("km-listview-link").attr(g.attr("role"),"listview-link"),n(e,T(i,"icon")),n(e,T(e,"icon")))}function o(e){if(e[0].querySelector("input[type=checkbox],input[type=radio]")){var t=e.parent();t.contents().not(e).not(function(){return 3==this.nodeType})[0]||(e.addClass("km-listview-label"),e.children("[type=checkbox],[type=radio]").addClass("km-widget"))}}function a(t,n){e(t).css("transform","translate3d(0px, "+n+"px, 0px)")}var s,l,d,c,u,p,f,h,g=window.kendo,m=window.Node,v=g.mobile,_=v.ui,b=g.data.DataSource,w=_.Widget,y=".km-list > li, > li:not(.km-group-container)",k=".km-listview-link, .km-listview-label",x="["+g.attr("icon")+"]",C=e.proxy,T=g.attrValue,S="km-group-title",D="km-state-active",A='<div class="'+S+'"><div class="km-text"></div></div>',E=g.template('<li><div class="'+S+'"><div class="km-text">#= this.headerTemplate(data) #</div></div><ul>#= kendo.render(this.template, data.items)#</ul></li>'),F='<div class="km-listview-wrapper" />',I=g.template('<form class="km-filter-form"><div class="km-filter-wrap"><input type="search" placeholder="#=placeholder#"/><a href="\\#" class="km-filter-reset" title="Clear"><span class="km-icon km-clear"></span><span class="km-text">Clear</span></a></div></form>'),P=".kendoMobileListView",B="styled",z="dataBound",H="dataBinding",R="itemChange",M="click",L="change",O="progress",N="function",V=/^\s+$/,U=/button/,W=g.Class.extend({init:function(e){var t,n,i=e.scroller();i&&(this.options=e.options,this.element=e.element,this.scroller=e.scroller(),this._shouldFixHeaders(),t=this,n=function(){t._cacheHeaders()},g.onResize(n),e.bind(B,n),e.bind(z,n),i.bind("scroll",function(e){t._fixHeader(e)}))},_fixHeader:function(t){if(this.fixedHeaders){var n,i,r,o=0,a=this.scroller,s=this.headers,l=t.scrollTop;do{if(n=s[o++],!n){r=e("<div />");break}i=n.offset,r=n.header}while(i+1>l);this.currentHeader!=o&&(a.fixedContainer.html(r.clone()),this.currentHeader=o)}},_shouldFixHeaders:function(){this.fixedHeaders="group"===this.options.type&&this.options.fixedHeaders},_cacheHeaders:function(){if(this._shouldFixHeaders(),this.fixedHeaders){var t=[],n=this.scroller.scrollTop;this.element.find("."+S).each(function(i,r){r=e(r),t.unshift({offset:r.position().top+n,header:r})}),this.headers=t,this._fixHeader({scrollTop:n})}}}),j=function(){return{page:1}},G=g.Class.extend({init:function(e){var t=this,n=e.options,i=e.scroller(),r=n.pullParameters||j;this.listView=e,this.scroller=i,e.bind("_dataSource",function(e){t.setDataSource(e.dataSource)}),i.setOptions({pullToRefresh:!0,pull:function(){t._pulled=!0,t.dataSource.read(r.call(e,t._first))},pullTemplate:n.pullTemplate,releaseTemplate:n.releaseTemplate,refreshTemplate:n.refreshTemplate})},setDataSource:function(e){var t=this;this._first=e.view()[0],this.dataSource=e,e.bind("change",function(){t._change()})},_change:function(){var e,t=this.scroller,n=this.dataSource;this._pulled&&t.pullHandled(),(this._pulled||!this._first)&&(e=n.view(),e[0]&&(this._first=e[0])),this._pulled=!1}}),q=g.Observable.extend({init:function(e){var t=this;g.Observable.fn.init.call(t),t.buffer=e.buffer,t.height=e.height,t.item=e.item,t.items=[],t.footer=e.footer,t.buffer.bind("reset",function(){t.refresh()}),t.bind("resize",function(){t.footer&&t.footer.below(t.items[t.items.length-1])})},refresh:function(){for(var e,t,n,i,r=this.buffer,o=this.items,a=!1;o.length;)o.pop().destroy();for(this.bottom=0,this.offset=r.offset,this.top=0,n=this.item,i=0;i<r.viewSize;i++){if(i===r.total()){a=!0;break}t=n(this.content(this.offset+o.length)),t.below(e),e=t,o.push(t),this.bottom=t.bottom}this.itemCount=o.length,this.trigger("reset"),this.trigger("resize",{top:this.top,bottom:this.bottom}),a&&this.trigger("endReached")},totalHeight:function(){var e=this,t=(e.bottom-e.top)/e.itemCount,n=e.buffer.length-e.offset-e.itemCount;return(this.footer?this.footer.height:0)+this.bottom+n*t},batchUpdate:function(e){var t,n=this.height(),i=this.offset;if(this.lastDirection)for(;this.bottom>e+2*n&&0!==this.offset;)this.reOrder(!0);else for(;this.top<e-n;){if(t=this.offset+this.itemCount,t===this.buffer.total()){this.trigger("endReached");break}if(t===this.buffer.length)break;this.reOrder(!1)}i!==this.offset&&this.trigger("resize",{top:this.top,bottom:this.bottom})},reOrder:function(e){var t,n=this.items;e?(this.offset--,t=n.pop(),t.update(this.content(this.offset)),t.above(n[0]),n.unshift(t)):(t=n.shift(),t.update(this.content(this.offset+this.itemCount)),t.below(n[n.length-1]),n.push(t),this.offset++),this.top=n[0].top,this.bottom=n[n.length-1].bottom},update:function(e){var t,n,i,r,o=this,a=this.items,s=this.height(),l=this.itemCount,d=s/2,c=(this.lastTop||0)>e,u=e-d,p=e+s+d;this.lastTop=e,this.lastDirection=c,c?this.top>u&&this.bottom>p+d&&this.offset>0&&(this.offset--,t=a.pop(),n=a[0],t.update(this.content(this.offset)),a.unshift(t),g.effects.animationFrame(function(){t.above(n),o.top=a[0].top,o.bottom=a[a.length-1].bottom,o.trigger("resize",{top:o.top,bottom:o.bottom})})):this.bottom<p&&this.top<u-d&&(r=this.offset+l,r===this.buffer.total()?this.trigger("endReached"):r!==this.buffer.length&&(t=a.shift(),i=a[a.length-1],a.push(t),t.update(this.content(this.offset+this.itemCount)),o.offset++,g.effects.animationFrame(function(){t.below(i),o.top=a[0].top,o.bottom=a[a.length-1].bottom,o.trigger("resize",{top:o.top,bottom:o.bottom})})))},content:function(e){return this.buffer.at(e)}});g.mobile.ui.VirtualList=q,s=g.Class.extend({init:function(t,n){var i=t.append([n])[0],r=i.offsetHeight;e.extend(this,{top:0,element:i,listView:t,height:r,bottom:r})},update:function(e){this.element=this.listView.setDataItem(this.element,e)},above:function(e){e&&(this.height=this.element.offsetHeight,this.top=e.top-this.height,this.bottom=e.top,a(this.element,this.top))},below:function(e){e&&(this.height=this.element.offsetHeight,this.top=e.bottom,this.bottom=this.top+this.height,a(this.element,this.top))},destroy:function(){g.destroy(this.element),e(this.element).remove()}}),l='<div><span class="km-icon"></span><span class="km-loading-left"></span><span class="km-loading-right"></span></div>',d=g.Class.extend({init:function(t){this.element=e('<li class="km-load-more km-scroller-refresh" style="display: none"></li>').appendTo(t.element),this._loadIcon=e(l).appendTo(this.element)},enable:function(){this.element.show(),this.height=this.element.outerHeight(!0)},disable:function(){this.element.hide(),this.height=this.element.outerHeight(!0)},below:function(e){e&&(this.top=e.bottom,this.bottom=this.height+this.top,a(this.element,this.top))}}),c=d.extend({init:function(t,n){this._loadIcon=e(l).hide(),this._loadButton=e('<a class="km-load">'+t.options.loadMoreText+"</a>").hide(),this.element=e('<li class="km-load-more" style="display: none"></li>').append(this._loadIcon).append(this._loadButton).appendTo(t.element);var i=this;this._loadButton.kendoMobileButton().data("kendoMobileButton").bind("click",function(){i._hideShowButton(),n.next()}),n.bind("resize",function(){i._showLoadButton()}),this.height=this.element.outerHeight(!0),this.disable()},_hideShowButton:function(){this._loadButton.hide(),this.element.addClass("km-scroller-refresh"),this._loadIcon.css("display","block")},_showLoadButton:function(){this._loadButton.show(),this.element.removeClass("km-scroller-refresh"),this._loadIcon.hide()}}),u=g.Class.extend({init:function(e){var t=this;this.listView=e,this.options=e.options,e.bind("_dataSource",function(e){t.setDataSource(e.dataSource)})},destroy:function(){this.list.unbind(),this.buffer.unbind(),g.unbindResize(this._resizeHandler)},setDataSource:function(t){var n,i,r,o=this.options,a=this.listView,l=a.scroller(),u=o.loadMore;this.dataSource&&this._unbindDataSource(),this.dataSource=t,i=new g.data.Buffer(t,Math.floor(t.pageSize()/2),u),n=u?new c(a,i):new d(a),r=new q({buffer:i,footer:n,item:function(e){return new s(a,e)},height:function(){return l.height()}}),l&&(l.makeVirtual(),l.bind("scroll",function(e){r.update(e.scrollTop)}),l.bind("scrollEnd",function(e){r.batchUpdate(e.scrollTop)}),r.bind("resize",function(){g.effects.animationFrame(function(){l.virtualSize(0,r.totalHeight())})}),r.bind("reset",function(){n.enable()}),r.bind("endReached",function(){n.disable()}),this._resizeHandler=g.onResize(function(){l.reset(),a.element.is(":visible")?(i.range(0),r.refresh()):r._needsRefresh=!0}),a.view().bind("show",function(){r._needsRefresh&&(setTimeout(function(){r.refresh()}),r._needsRefresh=!1)}),i.bind("expand",function(){r.lastDirection=!1,r.batchUpdate(l.scrollTop)})),e.extend(this,{buffer:i,list:r,footer:n})},refresh:function(){this.list.refresh()},_unbindDataSource:function(){}}),p=g.Class.extend({init:function(e){var t,n=this;this.listView=e,this.options=e.options,t=this,this._refreshHandler=function(e){t.refresh(e)},this._progressHandler=function(){e.showLoading()},e.bind("_dataSource",function(e){n.setDataSource(e.dataSource)})},destroy:function(){},refresh:function(e){var t,n=e&&e.action,i=e&&e.items,r=this.listView,o=this.dataSource,a=this.options.appendOnRefresh,s=o.view(),l=o.group(),d=l&&l[0];return"itemchange"===n?(t=r.findByDataItem(i)[0],t&&r.setDataItem(t,i[0]),undefined):(r.trigger(H),"add"!==n||d?"remove"!==n||d?d?r.replaceGrouped(s):a&&!r._filter?r.prepend(s):r.replace(s):r.remove(i):r.append(i),this._shouldShowLoading()&&r.hideLoading(),r.trigger(z,{ns:_}),undefined)},setDataSource:function(e){this.dataSource&&this._unbindDataSource(),this.dataSource=e,e.bind(L,this._refreshHandler),this._shouldShowLoading()&&this.dataSource.bind(O,this._progressHandler)},_unbindDataSource:function(){this.dataSource.unbind(L,this._refreshHandler).unbind(O,this._progressHandler)},_shouldShowLoading:function(){var e=this.options;return!e.pullToRefresh&&!e.loadMore&&!e.endlessScroll}}),f=g.Class.extend({init:function(e){var t=this,n=e.options.filterable,i="change paste";this.listView=e,this.options=n,e.element.before(I({placeholder:n.placeholder||"Search..."})),n.autoFilter!==!1&&(i+=" keyup"),this.searchInput=e.wrapper.find("input[type=search]").closest("form").on("submit"+P,function(e){e.preventDefault()}).end().on("focus"+P,function(){t._oldFilter=t.searchInput.val()}).on(i.split(" ").join(P+" ")+P,C(this._filterChange,this)),this.clearButton=e.wrapper.find(".km-filter-reset").on(M,C(this,"_clearFilter")).hide()},_search:function(e){this._filter=!0,this.clearButton[e?"show":"hide"](),this.listView.dataSource.filter(e)},_filterChange:function(e){var t=this;"paste"==e.type&&this.options.autoFilter!==!1?setTimeout(function(){t._applyFilter()},1):this._applyFilter()},_applyFilter:function(){var e=this.options,t=this.searchInput.val(),n=t.length?{field:e.field,operator:e.operator||"startsWith",ignoreCase:e.ignoreCase,value:t}:null;t!==this._oldFilter&&(this._oldFilter=t,this._search(n))},_clearFilter:function(e){this.searchInput.val(""),this._search(null),e.preventDefault()}}),h=w.extend({init:function(e,t){var n=this;w.fn.init.call(this,e,t),e=this.element,t=this.options,t.scrollTreshold&&(t.scrollThreshold=t.scrollTreshold),e.on("down",k,"_highlight").on("move up cancel",k,"_dim"),this._userEvents=new g.UserEvents(e,{filter:y,allowSelection:!0,tap:function(e){n._click(e)},end:function(e){g.mobile.application.options.useNativeScrolling&&e.preventDefault()}}),e.css("-ms-touch-action","auto"),e.wrap(F),this.wrapper=this.element.parent(),this._headerFixer=new W(this),this._itemsCache={},this._templates(),this.virtual=t.endlessScroll||t.loadMore,this._style(),this._itemBinder=this.virtual?new u(this):new p(this),this.options.pullToRefresh&&(this._pullToRefreshHandler=new G(this)),this.options.filterable&&(this._filter=new f(this)),this.setDataSource(t.dataSource),this._enhanceItems(this.items()),g.notify(this,_)},events:[M,H,z,R],options:{name:"ListView",style:"",type:"flat",autoBind:!0,fixedHeaders:!1,template:"#:data#",headerTemplate:'<span class="km-text">#:value#</span>',appendOnRefresh:!1,loadMore:!1,loadMoreText:"Press to load more",endlessScroll:!1,scrollThreshold:30,pullToRefresh:!1,pullTemplate:"Pull to refresh",releaseTemplate:"Release to refresh",refreshTemplate:"Refreshing",pullOffset:140,filterable:!1},refresh:function(){this._itemBinder.refresh()},setOptions:function(e){w.fn.setOptions.call(this,e)},setDataSource:function(e){var t=!e;this.dataSource=b.create(e),this.trigger("_dataSource",{dataSource:this.dataSource}),this.options.autoBind&&!t&&(this.items().remove(),this.dataSource.fetch())},destroy:function(){w.fn.destroy.call(this),g.destroy(this.element),this._userEvents.destroy(),this._itemBinder&&this._itemBinder.destroy(),delete this.element,delete this.wrapper,delete this._userEvents},items:function(){return"group"===this.options.type?this.element.find(".km-list").children():this.element.children().not(".km-load-more")},scroller:function(){return this._scrollerInstance||(this._scrollerInstance=this.element.closest(".km-scroll-wrapper").data("kendoMobileScroller")),this._scrollerInstance},showLoading:function(){var e=this.view();e&&e.loader&&e.loader.show()},hideLoading:function(){var e=this.view();e&&e.loader&&e.loader.hide()},append:function(e){return this._insert(e,"append")},prepend:function(e){return this._insert(e,"prepend")},replace:function(e){return this.element.empty(),this._insert(e,"append")},replaceGrouped:function(t){this.options.type="group",this.element.empty();var n=e(g.render(this.groupTemplate,t));this._enhanceItems(n.children("ul").children("li")),v.init(n),this.element.append(n),this._style()},remove:function(e){var t=this.findByDataItem(e);g.destroy(t),t.remove()},findByDataItem:function(e){var t,n,i=[];for(t=0,n=e.length;n>t;t++)i[t]="[data-"+g.ns+"uid="+e[t].uid+"]";return this.element.find(i.join(","))},setDataItem:function(t,n){var i=this,r=function(r){var o=e(r[0]);e(t).replaceWith(o),i.trigger(R,{item:o,data:n,ns:_})};return this._renderItems([n],r)[0]},_insert:function(e,t){var n=this;return this._renderItems(e,function(i){n.element[t](i);for(var r=0;r<i.length;r++)n.trigger(R,{item:[i[r]],data:e[r],ns:_})})},_renderItems:function(t,n){var i=e(g.render(this.template,t));return n(i),v.init(i),this._enhanceItems(i),i},_dim:function(e){this._toggle(e,!1)},_highlight:function(e){this._toggle(e,!0)},_toggle:function(t,n){if(!(t.which>1)){var i=e(t.currentTarget),r=i.parent(),o=T(i,"role")||"",a=!o.match(U),s=t.isDefaultPrevented();a&&r.toggleClass(D,n&&!s)}},_templates:function(){var e=this.options.template,t=this.options.headerTemplate,n=' data-uid="#=arguments[0].uid || ""#"',i={},r={};typeof e===N&&(i.template=e,e="#=this.template(data)#"),this.template=C(g.template("<li"+n+">"+e+"</li>"),i),r.template=this.template,typeof t===N&&(r._headerTemplate=t,t="#=this._headerTemplate(data)#"),r.headerTemplate=g.template(t),this.groupTemplate=C(E,r)},_click:function(t){if(!(t.event.which>1||t.event.isDefaultPrevented())){var n,i=t.target,r=e(t.event.target),o=r.closest(g.roleSelector("button","detailbutton","backbutton")),a=g.widgetInstance(o,_),s=i.attr(g.attr("uid"));s&&(n=this.dataSource.getByUid(s)),this.trigger(M,{target:r,item:i,dataItem:n,button:a})&&t.preventDefault()}},_styleGroups:function(){var t=this.element.children();t.children("ul").addClass("km-list"),t.each(function(){var t=e(this),n=t.contents().first();t.addClass("km-group-container"),n.is("ul")||n.is("div."+S)||n.wrap(A)})},_style:function(){var e=this.options,t="group"===e.type,n=this.element,i="inset"===e.style;n.addClass("km-listview").toggleClass("km-list",!t).toggleClass("km-virtual-list",this.virtual).toggleClass("km-listinset",!t&&i).toggleClass("km-listgroup",t&&!i).toggleClass("km-listgroupinset",t&&i),n.parents(".km-listview")[0]||n.closest(".km-content").toggleClass("km-insetcontent",i),t&&this._styleGroups(),this.trigger(B)},_enhanceItems:function(t){t.each(function(){var t,n=e(this),a=!1;n.children().each(function(){t=e(this),t.is("a")?(r(t),a=!0):t.is("label")&&(o(t),a=!0)}),a||i(n)})}}),_.plugin(h)}(window.kendo.jQuery),function(e){function t(t,n){var r=n.find("["+i.attr("align")+"="+t+"]");return r[0]?e('<div class="km-'+t+'item" />').append(r).prependTo(n):undefined}function n(t){var n=t.siblings(),i=!!t.children("ul")[0],r=!!n[0]&&""===e.trim(t.text());t.prevAll().toggleClass("km-absolute",i),t.toggleClass("km-show-title",r),t.toggleClass("km-fill-title",r&&!e.trim(t.html())),t.toggleClass("km-no-title",i),t.toggleClass("km-hide-title","hidden"==t.css("visibility")&&!n.children().is(":visible"))}var i=window.kendo,r=i.mobile,o=r.ui,a=i.roleSelector,s=o.Widget,l=s.extend({init:function(n,i){var r=this;s.fn.init.call(r,n,i),n=r.element,r.container().bind("show",e.proxy(this,"refresh")),n.addClass("km-navbar").wrapInner(e('<div class="km-view-title km-show-title" />')),r.leftElement=t("left",n),r.rightElement=t("right",n),r.centerElement=n.find(".km-view-title")},options:{name:"NavBar"},title:function(e){this.element.find(a("view-title")).text(e),n(this.centerElement)},refresh:function(e){var t=e.view;t.options.title?this.title(t.options.title):n(this.centerElement)},destroy:function(){s.fn.destroy.call(this),i.destroy(this.element)}});o.plugin(l)}(window.kendo.jQuery),function(e,t){var n,i,r,o,a,s,l,d,c=window.kendo,u=c.mobile,p=u.ui,f=e.proxy,h=c.effects.Transition,g=c.ui.Pane,m=c.ui.PaneDimensions,v=p.Widget,_=c.data.DataSource,b=c.data.Buffer,w=c.data.BatchBuffer,y=Math,k=y.abs,x=y.ceil,C=y.round,T=y.max,S=y.min,D=y.floor,A="change",E="changing",F="refresh",I="km-current-page",P="function",B=3,z=-1,H=0,R=1,M=-1,L=0,O=1,N=c.Class.extend({init:function(t){var n=this,i=e("<ol class='km-pages'/>");t.element.append(i),this._changeProxy=f(n,"_change"),this._refreshProxy=f(n,"_refresh"),t.bind(A,this._changeProxy),t.bind(F,this._refreshProxy),e.extend(n,{element:i,scrollView:t})},items:function(){return this.element.children()},_refresh:function(e){var t,n="";for(t=0;t<e.pageCount;t++)n+="<li/>";this.element.html(n),this.items().eq(e.page).addClass(I)},_change:function(e){this.items().removeClass(I).eq(e.page).addClass(I)},destroy:function(){this.scrollView.unbind(A,this._changeProxy),this.scrollView.unbind(F,this._refreshProxy),this.element.remove()}});c.mobile.ui.ScrollViewPager=N,n="transitionEnd",i="dragStart",r="dragEnd",o=c.Observable.extend({init:function(t,o){var a,s,l,d,u,p,f=this;c.Observable.fn.init.call(this),this.element=t,this.container=t.parent(),a=new c.ui.Movable(f.element),s=new h({axis:"x",movable:a,onEnd:function(){f.trigger(n)}}),l=new c.UserEvents(t,{start:function(e){2*k(e.x.velocity)>=k(e.y.velocity)?l.capture():l.cancel(),f.trigger(i,e),s.cancel()},allowSelection:!0,end:function(e){f.trigger(r,e)}}),d=new m({element:f.element,container:f.container}),u=d.x,u.bind(A,function(){f.trigger(A)}),p=new g({dimensions:d,userEvents:l,movable:a,elastic:!0}),e.extend(f,{duration:o&&o.duration||1,movable:a,transition:s,userEvents:l,dimensions:d,dimension:u,pane:p}),this.bind([n,i,r,A],o)},size:function(){return{width:this.dimensions.x.getSize(),height:this.dimensions.y.getSize()}},total:function(){return this.dimension.getTotal()},offset:function(){return-this.movable.x},updateDimension:function(){this.dimension.update(!0)},refresh:function(){this.dimensions.refresh()},moveTo:function(e){this.movable.moveAxis("x",-e)},transitionTo:function(e,t,n){n?this.moveTo(-e):this.transition.moveTo({location:e,duration:this.duration,ease:t})}}),c.mobile.ui.ScrollViewElasticPane=o,a=c.Observable.extend({init:function(e,t){var n=this;c.Observable.fn.init.call(this),n.element=e,n.pane=t,n._getPages(),this.page=0,this.pageSize=1},scrollTo:function(e,t){this.page=e,this.pane.transitionTo(-e*this.pane.size().width,h.easeOutExpo,t)},paneMoved:function(e,t,n){var i,r,o=this,a=o.pane,s=a.size().width*o.pageSize,l=C,d=t?h.easeOutBack:h.easeOutExpo;e===M?l=x:e===O&&(l=D),r=l(a.offset()/s),i=T(o.minSnap,S(-r*s,o.maxSnap)),r!=o.page&&n&&n({currentPage:o.page,nextPage:r})&&(i=-o.page*a.size().width),a.transitionTo(i,d)},updatePage:function(){var e=this.pane,t=C(e.offset()/e.size().width);return t!=this.page?(this.page=t,!0):!1},forcePageUpdate:function(){return this.updatePage()
},resizeTo:function(e){var t=this.pane,n=e.width;this.pageElements.width(n),t.updateDimension(),this._paged||(this.page=D(t.offset()/n)),this.scrollTo(this.page,!0),this.pageCount=x(t.total()/n),this.minSnap=-(this.pageCount-1)*n,this.maxSnap=0},_getPages:function(){this.pageElements=this.element.find("[data-role=page]"),this._paged=this.pageElements.length>0}}),c.mobile.ui.ScrollViewContent=a,s=c.Observable.extend({init:function(e,t,n){var i=this;c.Observable.fn.init.call(this),i.element=e,i.pane=t,i.options=n,i._templates(),i.page=0,i.pages=[],i._initPages(),i.resizeTo(i.pane.size()),i.dataSource=_.create(n.dataSource),i._buffer(),i._pendingPageRefresh=!1,i._pendingWidgetRefresh=!1,i.options.autoBind&&i.dataSource.fetch(),i.pane.dimension.forceEnabled()},_viewShow:function(){var e=this;e._pendingWidgetRefresh&&(setTimeout(function(){e._resetPages()},0),e._pendingWidgetRefresh=!1)},_buffer:function(){var e=this.options.itemsPerPage;this.buffer=e>1?new w(this.dataSource,e):new b(this.dataSource,3*e),this._resizeProxy=f(this,"_onResize"),this._resetProxy=f(this,"_onReset"),this._endReachedProxy=f(this,"_onEndReached"),this.buffer.bind({resize:this._resizeProxy,reset:this._resetProxy,endreached:this._endReachedProxy})},_templates:function(){var e=this.options.template,t=this.options.emptyTemplate,n={},i={};typeof e===P&&(n.template=e,e="#=this.template(data)#"),this.template=f(c.template(e),n),typeof t===P&&(i.emptyTemplate=t,t="#=this.emptyTemplate(data)#"),this.emptyTemplate=f(c.template(t),i)},_initPages:function(){var e,t,n=this.pages,i=this.element;for(t=0;B>t;t++)e=new l(i),n.push(e);this.pane.updateDimension()},resizeTo:function(e){var t,n,i=this.pages,r=this.pane;for(t=0;t<i.length;t++)i[t].setWidth(e.width);"auto"===this.options.contentHeight?this.element.css("height",this.pages[1].element.height()):"100%"===this.options.contentHeight&&(n=this.element.parent().height(),this.element.css("height",n),i[0].element.css("height",n),i[1].element.css("height",n),i[2].element.css("height",n)),r.updateDimension(),this._repositionPages(),this.width=e.width},scrollTo:function(e){var t,n=this.buffer;n.syncDataSource(),t=n.at(e),t&&(this._updatePagesContent(e),this.page=e)},paneMoved:function(e,t,n){var i=this,r=i.pane,o=r.size().width,a=r.offset(),s=Math.abs(a)>=o/3,l=t?c.effects.Transition.easeOutBack:c.effects.Transition.easeOutExpo,d=i.page+2>i.buffer.total(),u=0;e===O?0!==i.page&&(u=-1):e!==M||d?a>0&&s&&!d?u=1:0>a&&s&&0!==i.page&&(u=-1):u=1,n&&n()&&(u=0),0===u?i._cancelMove(l):-1===u?i._moveBackward():1===u&&i._moveForward()},updatePage:function(){var e=this.pages;return 0===this.pane.offset()?!1:(this.pane.offset()>0?(e.push(this.pages.shift()),this.page++,this.setPageContent(e[2],this.page+1)):(e.unshift(this.pages.pop()),this.page--,this.setPageContent(e[0],this.page-1)),this._repositionPages(),this._resetMovable(),!0)},forcePageUpdate:function(){var e=this.pane.offset(),t=3*this.pane.size().width/4;return k(e)>t?this.updatePage():!1},_resetMovable:function(){this.pane.moveTo(0)},_moveForward:function(e){this.pane.transitionTo(-this.width,c.effects.Transition.easeOutExpo,e)},_moveBackward:function(e){this.pane.transitionTo(this.width,c.effects.Transition.easeOutExpo,e)},_cancelMove:function(e){this.pane.transitionTo(0,e,!1)},_resetPages:function(){this._updatePagesContent(),this._repositionPages(),this.page=0,this.trigger("reset")},_onResize:function(){var e=this.pages[2],t=this.page+1;this._pendingPageRefresh&&(this.setPageContent(e,t),this._pendingPageRefresh=!1)},_onReset:function(){this.pageCount=this.dataSource.total(),this.element.is(":visible")?this._resetPages():this._widgetNeedsRefresh=!0},_onEndReached:function(){this._pendingPageRefresh=!0},_repositionPages:function(){var e=this.pages;e[0].position(z),e[1].position(H),e[2].position(R)},_updatePagesContent:function(e){var t=this.pages,n=e||0;this.setPageContent(t[0],n-1),this.setPageContent(t[1],n),this.setPageContent(t[2],n+1)},setPageContent:function(e,t){var n,i=this.buffer,r=this.template,o=this.emptyTemplate;t>=0&&(n=i.at(t)),n?e.content(r(n)):e.content(o({})),c.mobile.init(e.element)}}),c.mobile.ui.VirtualScrollViewContent=s,l=c.Class.extend({init:function(t){this.element=e("<div class='km-virtual-page'></div>"),this.width=t.width(),this.element.width(this.width),t.append(this.element)},content:function(e){this.element.html(e)},position:function(e){this.element.css("transform","translate3d("+this.width*e+"px, 0, 0)")},setWidth:function(e){this.width=e,this.element.width(e)}}),c.mobile.ui.VirtualPage=l,d=v.extend({init:function(e,t){var n=this;v.fn.init.call(n,e,t),t=n.options,e=n.element,c.stripWhitespace(e[0]),e.wrapInner("<div/>").addClass("km-scrollview"),this.options.enablePager&&(this.pager=new N(this)),n.inner=e.children().first(),n.page=0,n.inner.css("height",t.contentHeight),n.container().bind("show",f(this,"viewShow")).bind("init",f(this,"viewInit")),n.pane=new o(n.inner,{duration:this.options.duration,transitionEnd:f(this,"_transitionEnd"),dragStart:f(this,"_dragStart"),dragEnd:f(this,"_dragEnd"),change:f(this,F)}),n.page=t.page,n._content=t.dataSource?new s(n.inner,n.pane,t):new a(n.inner,n.pane),n._content.page=n.page,n._content.bind("reset",function(){n._syncWithContent()})},options:{name:"ScrollView",page:0,duration:300,velocityThreshold:.8,contentHeight:"auto",pageSize:1,itemsPerPage:1,bounceVelocityThreshold:1.6,enablePager:!0,autoBind:!0,template:"",emptyTemplate:""},events:[E,A,F],destroy:function(){v.fn.destroy.call(this),c.destroy(this.element)},viewInit:function(){this._content.scrollTo(this._content.page,!0)},viewShow:function(){this.pane.refresh()},refresh:function(){var e=this._content;e.resizeTo(this.pane.size()),this.page=e.page,this.trigger(F,{pageCount:e.pageCount,page:e.page})},content:function(e){this.element.children().first().html(e),this.pane.refresh()},scrollTo:function(e,t){this._content.scrollTo(e,t),this._syncWithContent()},_syncWithContent:function(){var e,n,i=this._content.pages,r=this._content.buffer;this.page=this._content.page,e=r?r.at(this.page):t,e instanceof Array||(e=[e]),n=i?i[1].element:t,this.trigger(A,{page:this.page,element:n,data:e})},_dragStart:function(){this._content.forcePageUpdate()&&this._syncWithContent()},_dragEnd:function(e){var t=this,n=e.x.velocity,i=this.options.velocityThreshold,r=L,o=k(n)>this.options.bounceVelocityThreshold;n>i?r=O:-i>n&&(r=M),this._content.paneMoved(r,o,function(e){return t.trigger(E,e)})},_transitionEnd:function(){this._content.updatePage()&&this._syncWithContent()}}),p.plugin(d)}(window.kendo.jQuery),function(e,t){function n(e,t,n){return Math.max(t,Math.min(n,e))}var i=window.kendo,r=i.mobile.ui,o=r.Widget,a=i.support,s="change",l="km-switch-on",d="km-switch-off",c="margin-left",u="km-state-active",p=a.transitions.css+"transform",f=e.proxy,h=o.extend({init:function(t,n){var r,a=this;o.fn.init.call(a,t,n),a._wrapper(),a._drag(),a._background(),a.origin=parseInt(a.background.css(c),10),a._handle(),a.constrain=0,a.snapPoint=0,a.container().bind("show",e.proxy(this,"refresh")),t=a.element[0],t.type="checkbox",a._animateBackground=!0,r=a.options.checked,null===r&&(r=t.checked),a.check(r),a.refresh(),i.notify(a,i.mobile.ui)},refresh:function(){var e=this;e.width=e.wrapper.width(),e.handleWidth=e.handle.outerWidth(!0),e.constrain=e.width-e.handleWidth,e.snapPoint=e.width/2-e.handleWidth/2,"number"!=typeof e.origin&&(e.origin=parseInt(e.background.css(c),10)),e.background.data("origin",e.origin),e.check(e.element[0].checked)},events:[s],options:{name:"Switch",onLabel:"on",offLabel:"off",checked:null},check:function(e){var n=this,i=n.element[0];return e===t?i.checked:(n._position(e?n.constrain:0),i.checked=e,n.wrapper.toggleClass(l,e).toggleClass(d,!e),t)},destroy:function(){o.fn.destroy.call(this),this.userEvents.destroy()},toggle:function(){var e=this;e.check(!e.element[0].checked)},_move:function(e){var t=this;e.preventDefault(),t._position(n(t.position+e.x.delta,0,t.width-t.handle.outerWidth(!0)))},_position:function(e){var t=this;t.position=e,t.handle.css(p,"translatex("+e+"px)"),t._animateBackground&&t.background.css(c,t.origin+e)},_start:function(){this.userEvents.capture(),this.handle.addClass(u)},_stop:function(){var e=this;e.handle.removeClass(u),e._toggle(e.position>e.snapPoint)},_toggle:function(e){var t,n=this,r=n.handle,o=n.element[0],a=o.checked,c=i.mobile.application&&i.mobile.application.os.wp?100:200;n.wrapper.toggleClass(l,e).toggleClass(d,!e),n.position=t=e*n.constrain,n._animateBackground&&n.background.kendoStop(!0,!0).kendoAnimate({effects:"slideMargin",offset:t,reset:!0,reverse:!e,axis:"left",duration:c}),r.kendoStop(!0,!0).kendoAnimate({effects:"slideTo",duration:c,offset:t+"px,0",reset:!0,complete:function(){a!==e&&(o.checked=e,n.trigger(s,{checked:e}))}})},_background:function(){var t,n=this;t=e("<span class='km-switch-wrapper'><span class='km-switch-background'></span></span>").appendTo(n.wrapper).children(".km-switch-background"),n.background=t},_handle:function(){var t=this,n=t.options;t.handle=e("<span class='km-switch-container'><span class='km-switch-handle' /></span>").appendTo(t.wrapper).children(".km-switch-handle"),t.handle.append('<span class="km-switch-label-on">'+n.onLabel+'</span><span class="km-switch-label-off">'+n.offLabel+"</span>")},_wrapper:function(){var e=this,t=e.element,n=t.parent("span.km-switch");n[0]||(n=t.wrap('<span class="km-switch"/>').parent()),e.wrapper=n.addClass("km-widget")},_drag:function(){var e=this;e.userEvents=new i.UserEvents(e.wrapper,{tap:function(){e._toggle(!e.element[0].checked)},start:f(e._start,e),move:f(e._move,e),end:f(e._stop,e)})}});r.plugin(h)}(window.kendo.jQuery),function(e){function t(t){return e('<span class="km-badge">'+t+"</span>")}var n=window.kendo,i=n.mobile.ui,r=i.Widget,o="km-state-active",a="select",s=r.extend({init:function(t,n){var i=this;r.fn.init.call(i,t,n),i.container().bind("show",e.proxy(this,"refresh")),i.element.addClass("km-tabstrip").find("a").each(i._buildButton).eq(i.options.selectedIndex).addClass(o),i.element.on("down","a","_release")},events:[a],switchTo:function(t){var n,i,r=this.element.find("a"),o=0,a=r.length;if(!isNaN(t))return this._setActiveItem(r.eq(t)),!0;for(;a>o;o++)if(n=r[o],i=n.href.replace(/(\#.+)(\?.+)$/,"$1"),-1!==i.indexOf(t,i.length-t.length))return this._setActiveItem(e(n)),!0;return!1},switchByFullUrl:function(e){var t;t=this.element.find("a[href$='"+e+"']"),this._setActiveItem(t)},clear:function(){this.currentItem().removeClass(o)},currentItem:function(){return this.element.children("."+o)},badge:function(n,i){var r,o=this.element;return isNaN(n)||(n=o.children().get(n)),n=o.find(n),r=e(n.find(".km-badge")[0]||t(i).insertAfter(n.children(".km-icon"))),i?(r.html(i),this):i===!1?(r.empty().remove(),this):r.html()},_release:function(t){if(!(t.which>1)){var n=this,i=e(t.currentTarget);i[0]!==n.currentItem()[0]&&(n.trigger(a,{item:i})?t.preventDefault():n._setActiveItem(i))}},_setActiveItem:function(e){e[0]&&(this.clear(),e.addClass(o))},_buildButton:function(){var i=e(this),r=n.attrValue(i,"icon"),o=n.attrValue(i,"badge"),a=i.find("img"),s=e('<span class="km-icon"/>');i.addClass("km-button").attr(n.attr("role"),"tab").contents().not(a).wrapAll('<span class="km-text"/>'),a[0]?a.addClass("km-image").prependTo(i):(i.prepend(s),r&&(s.addClass("km-"+r),o&&t(o).insertAfter(s)))},refresh:function(e){var t=e.view.element.attr(n.attr("url"));!this.switchTo(e.view.id)&&t&&this.switchTo(t)},destroy:function(){r.fn.destroy.call(this)},options:{name:"TabStrip",selectedIndex:0,enable:!0}});i.plugin(s)}(window.kendo.jQuery);return window.kendo})}(typeof define=="function"&&define.amd?define:function(deps,body){return body()});

var mvc_Views_Charts_JS =
 {
     barColors: new Array("#3F77B2", "#e2001a", "#6B8F2E", "#255D95", "#982121", "#3A8B98", "#D33828", "#3d7bab"),

     CreatePieChart: function (configuration)
     {
         var defaults = {
             showLabel: false,
             labelFormat: "{0}%\n",
             showTooltip: true,
             showLegend: true
         };
         var options = $.extend(defaults, configuration);

         var div = options.acquiredPoints + options.redeemedPoints;
         var seriesItems = [{
             color: "#3F77B2",
             category: options.categories[0] + ' (' + options.acquiredPoints + ')',
             value: (options.acquiredPoints * 100 / div).toFixed(2)
         },
     {
         color: "#e2001a",
         category: options.categories[1] + ' (' + options.redeemedPoints + ')',
         value: (options.redeemedPoints * 100 / div).toFixed(2)
     }];

         if(div == 0)
         {
             seriesItems[0].value = 0;
             seriesItems[1].value = 0;
         }

         options.element.kendoChart({
             chartArea: {
                 margin: 0,
                 padding: 0,
                 background: ""
             },
             legend:
             {
                 visible: options.showLegend,
                 position: "bottom",
                 labels: {
                     template: "#= text #",
                     //template: "#= text # (#= percentage*100 #%)",
                     font: "11px Arial"
                 }
             },
             legendItemClick: function (e)
             {//disable interactive legend
                 e.preventDefault(e);
             },
             seriesDefaults: {
                 labels: {
                     visible: options.showLabel,
                     position: "center",
                     background: "",
                     color: "#fff",
                     font: "10px Arial,Helvetica",
                     format: options.labelFormat
                 }
             },
             series: [{
                 type: "pie",
                 overlay: {
                     gradient: "none"
                 },
                 data: seriesItems //.map(function (item) { return { category: item.category, value: item.value }; }),
             }],
             seriesColors: seriesItems.map(function (item) { return item.color; }),
             tooltip: {
                 color: "#fff",
                 visible: options.showTooltip,
                 format: options.labelFormat
             }
         });
     },

     CreateBarChart: function (configuration)
     {
         var defaults = {
             showLabel: false,
             labelFormat: "{0}\n",
             showTooltip: true,
             showLegend: true
         };
         var options = $.extend(defaults, configuration);

         var seriesItems = options.items.map(function (item, i)
         {
             return {
                 color: mvc_Views_Charts_JS.barColors[i % mvc_Views_Charts_JS.barColors.length],
                 name: options.GetItemName(item),
                 data: [options.GetItemData(item)]
             };
         });

         options.element.kendoChart({
             theme: $(document).data("kendoSkin") || "default",
             legend: {
                 visible: options.showLegend,
                 position: "custom",
                 orientation: "vertical", //requires custom position :(
                 offsetX: 15,
                 //offsetX: 50,
                 offsetY: 145,
                 labels: {
                     template: "#= text # (#= data.series.data[0] #)",
                     font: "11px Arial"
                 }
             },
             legendItemClick: function (e)
             {//disable interactive legend
                 e.preventDefault(e);
             },

             chartArea: {
                 background: "#fff",
                 width: 245,
                 height: 200,
                 margin: { right: 10, bottom: 60 }
             },

             seriesDefaults: {
                 overlay: {
                     gradient: "none"
                 },
                 type: "column",
                 labels: {
                     visible: options.showLabel,
                     position: "right",
                     background: "",
                     color: "#fff",
                     font: "10px Arial,Helvetica",
                     format: options.labelFormat
                 }
             },

             series: seriesItems, //.map(function (item) { return { name: item.name, data: item.data }; }),
             categoryAxis: {
                 categories: [, ],
                 line: { visible: false },
                 majorGridLines: { visible: false },
                 minorGridLines: { visible: false },
                 majorTicks: { visible: false }
             },
             valueAxis: {
                 line: { visible: false }
                 , labels: {
                     step: 2,
                     font: "10px Arial,Helvetica", mirror: true, padding: { left: 205 }
                 }
             },
             seriesColors: seriesItems.map(function (item) { return item.color; }),
             tooltip: {
                 color: "#fff",
                 visible: options.showTooltip,
                 template: "#= series.name# (#=value#)"
             }
         });
     }
 }
$(document).ready(function () {
    AddDespatchReadOnClick();
});

function LoadDespatchCenterSliders(elem) {
    
    elem.insertBefore($('#welcome'));

    $(".despatchCenter img").click(function () {
        $('.centerList').slideToggle();
    });

    $(".despatchCenter .badge").click(function ()
    {
        $('.centerList').slideToggle();
    });

    HideCenterOnClickOutside(elem);
}

function HideCenterOnClickOutside(elem) {
    $(document).on('click', function (event) {
        if (!$(event.target).closest(elem).length) {
            $('.centerList').slideUp();
        }
    })
}

function SetDespatchAsRead(id) {
    var notif = $('[data-val="' + id + '"]');
    notif.removeClass('despatchUnread');
    notif.data('isRead', true);
}

function UpdateBadge() {
    var unread = $('div.centerList .despatchUnread').length;

    var badge = $('.despatchCenter').find('.badge');

    if (unread == 0) {
        badge.addClass('hidden');
    }
    else {
        badge.removeClass('hidden');
    }

    $('.despatchCenter').data('countUnread', unread);

    badge.text(unread);
}
var partialPreloader = {
    on: function () {
        var preloadTargets = document.getElementsByName('preload-target');
        var i = 0;
        while (preloadTargets[i]) {
            preloadTargets[i].className += " preloading";
            i++;
        }
    },
    off: function () {
        var preloadTargets = document.getElementsByName('preload-target');
        var i = 0;
        while (preloadTargets[i]) {
            preloadTargets[i].className = preloadTargets[i].className.replace(" preloading", "");
            i++;
        }

    }
};
 
  
  

function MarkAllDespatchesRead(unreadDespatches) {
 
    partialPreloader.on();

    var ids = new Array(unreadDespatches.length);
    $.each(unreadDespatches, function (index, name) {
        ids[index] = $(this).data('val');
    });

    var params =
        {
            "uiEventID": ids
        };

    var url = MakeRequestToMVC("DespatchCenter", "MarkAsRead");

    $.daisAjax({
        cache: false,
        async: true,
        background: true,
        type: "POST",
        url: url,
        data: params,
        traditional: true,
        complete: function () {
            partialPreloader.off();
        },
        success: function (list) {
            for (var i = 0; i < list.length; i++) {
                SetDespatchAsRead(list[i]);
            }

            UpdateBadge();
        }
    });
}

function MarkDespatchRead(elem) {
    if (!elem.data('isRead')) {
        var id = elem.data('val');
        var url = MakeRequestToMVC("DespatchCenter", "MarkAsRead");

        $.daisAjax({
            cache: false,
            async: true,
            background: true,
            dataType: "json",
            type: "POST",
            url: url,
            data: "uiEventID=" + id,
            success: function (data) {
                if (data[0] == id) {
                    SetDespatchAsRead(id);

                    UpdateBadge();
                }
            }
        });
    }
}

function DespatchClick(elem) {
    var xmlID = elem.data('xmlId');
    if (xmlID) {
        var url = MakeWorking(MakeRequestAndChangeXmlID(xmlID));
        NormalSubmitNoValidate(url);
    }
}
function LoadDespatchData(data, elem) {
    elem.html(data);

    LoadDespatchCenterSliders(elem);

    AddDespatchReadOnClick(elem);
}

function ReloadDespatchCenter(elem, data)
{
    elem.find('ul').empty().html(data);

    AddDespatchReadOnClick(elem);

    UpdateBadge();
}

function AddDespatchReadOnClick(elem) {
    var clas = '.despatch';

    var allDespatches;
    if (elem != null) {
        allDespatches = elem.find(clas);
    }
    else {
        allDespatches = $(clas);
    }

    allDespatches.each(function () {
        $(this).on('click', function () {
            MarkDespatchRead($(this));
        });
    });
}

function ToggleMoreInfo(id, className, event)
{//FF requuires the parameter for the event in the func def, IE requires its named 'event'
    if(event.stopPropagation)
    {
        event.stopPropagation();
    }
    else
    {
        event.cancelBubble = true;
    }

    var eventTarget = event.target;
    if(!event.target)
    {//IE8
        eventTarget = event.srcElement;
    }

    var despatchesShown = $('[data-val="' + id + '"]');
    for(var i = 0; i < despatchesShown.length; i++)
    {
        if($(despatchesShown[i].parentNode).find(eventTarget).length > 0)
        {
            $(despatchesShown[i]).find(className).toggle();
        }
    }
}

var TradeFinance_JS =
    {

        PreviewRequest: function (id) {
            var url = MakeRequestAndChangeXmlID("04CorporateServices/80TradeFinance/.TradeFinancePreview");
            return TradeFinance_JS.Preview(id, url);
        },

        PreviewIncomingTransaction: function (id) {
            var url = MakeRequestAndChangeXmlID("04CorporateServices/80TradeFinance/.IncomingPreview");
            return TradeFinance_JS.Preview(id, url);
        },

        PreviewUtilizationRequest: function(id) {            
            var url = MakeRequestAndChangeXmlID("04CorporateServices/80TradeFinance/30BankLetterOfCredit/30UtilizationRequests/.Preview");        
            return TradeFinance_JS.Preview(id, url)
        },

        PreviewMessage: function (messageId, formType, url) {
            $.daisDialogLoad({
                url: url,
                height: 500,
                width: 750,
                data: $.param({ messageId: messageId, threadFormType: formType }),
                success: function () {
                },
                loadingPanelContainer: $("#content")
            });
        },

        Preview: function (id, url) {
            url = url + "id=" + id;
            return showHelperCustom(url, '800', '800');
        },

        LoadRequests: function (url, data, resultContainerSelector, loadingPanelContainerSelector) {
            var resultContainer = $(resultContainerSelector);
            var loadingPanelContainer = $(loadingPanelContainerSelector);

            resultContainer.daisLoadPanelFromTemplate({
                url: url
                     , data: data
                     , loadingPanelContainer: loadingPanelContainer
                     , success: function (data) {
                         HidePleaseWaitDialog();

                         TradeFinance_JS.viewModel.addRequests(data);
                         ko.applyBindings(TradeFinance_JS.viewModel);
                         TradeFinance_JS.DisableSomeFields();
                         //$("#result").html("");
                         //$("#ResultTemplate").tmpl(data).appendTo($("#result"));
                     }
                    , error: function () {
                        HidePleaseWaitDialog();
                    }
            });
        },

        viewModel: {
            requests: null,
            ItemsToSign: ko.observableArray([]),
            ItemsToSend: ko.observableArray([]),
            addRequests: function (data) {
                this.requests = data;
                this.ItemsToSign.removeAll();
                this.ItemsToSend.removeAll();
            }
        },

        DisableSomeFields: function () {
            var obj = $("[enable]");

            $.each(obj, function (i) {
                if ($(this).attr("enable") != "true") {
                    $(this).attr("disabled", true);
                }
            });
        },

        CheckUncheckItem: function (obj, isChecked) {
            if (!obj.prop('disabled')) {
                if (isChecked) {
                    obj.prop('checked', true)
                }
                else {
                    obj.prop('checked', false)
                }
                obj.triggerHandler('click');
            }
        },

        SelectAllRequests: function (all_chb_id, attrName) {
            var isChecked = $("#" + all_chb_id).is(":checked");
            $("input[name='" + attrName + "']").each(function () {
                TradeFinance_JS.CheckUncheckItem($(this), isChecked);
            });
        },

        SubmitAjaxRequest: function (url, data, contentType) {
            $.daisDialogLoad({
                url: url,
                data: data,
                contentType: contentType,
                dataType: "html",
                height: 200,
                width: 500,
                buttons: [],
                open: function (event, ui) { $(".ui-dialog-titlebar-close").hide(); },
                success: function () {	   
                    HidePleaseWaitDialog();
                },
                error: function (data) {
                    HidePleaseWaitDialog();
                    ShowGeneralError();
                }
            });
        },

        DisableSomeHeaders_Filter: function (obj) {

            var v_m_from = document.forms[0].DateStart;
            var v_m_to = document.forms[0].DateEnd;
            var v_m_topn = document.forms[0].TopNValue;

            if (obj.value == null || obj.value == "") {
                obj.value = "gen_type_TopN";
            }

            switch (obj.value) {
                case "gen_type_TopN":
                    v_m_topn.disabled = false;
                    v_m_from.disabled = true;
                    v_m_to.disabled = true;
                    break;
                case "gen_type_Period":
                    v_m_topn.disabled = true;
                    v_m_from.disabled = false;
                    v_m_to.disabled = false;
                    break;
                default:
                    obj.value = "gen_type_TopN";
                    v_m_topn.disabled = false;
                    v_m_from.disabled = true;
                    v_m_to.disabled = true;
                    break;
            }

            return true;
        },

        CheckSignAndSend: function (obj) {
            var isChecked = obj.checked;
            var id = obj.value;
            var cb_Sign = $('input[name=m_ctrl_chb_Sign][value=' + id + ']');
            var cb_Send = $('input[name=m_ctrl_chb_Send][value=' + id + ']');

            TradeFinance_JS.CheckUncheckItem(cb_Sign, isChecked);
            TradeFinance_JS.CheckUncheckItem(cb_Send, isChecked);

            TradeFinance_JS.UnCheckSelectAllIfThereIsNoCheckedRequests($(obj));
        },

        UnCheckHeaderCheckIfThereIsNoCheckedSignOrSend: function (obj) {
            var id = obj.value;
            var is_cb_Sign_Checked = $('input[name=m_ctrl_chb_Sign][value=' + id + ']').is(":checked");
            var is_cb_Send_Checked = $('input[name=m_ctrl_chb_Send][value=' + id + ']').is(":checked");

            if (!is_cb_Sign_Checked)
                if (!is_cb_Send_Checked) {
                    var header_chb_Sign_Send = $('input[name=m_ctrl_chb_Sign_Send][value=' + id + ']');
                    header_chb_Sign_Send.prop("checked", false);
                    TradeFinance_JS.UnCheckSelectAllIfThereIsNoCheckedRequests(header_chb_Sign_Send);
                }
        },

        UnCheckSelectAllIfThereIsNoCheckedRequests: function (obj) {
            if (!obj.prop("checked")) {
                $("#m_ctrl_chb_SignAll").prop("checked", false);
            }
            else if ($("input[name='m_ctrl_chb_Sign_Send']:checked").size() == 0) {
                $("#m_ctrl_chb_SignAll").prop("checked", false);
            }
        },

        AddExportWordLink: function (id, exportIconStyle, containerId) {
            var exportLink = $(' <a class="link" ' + exportIconStyle + ' id="exportWord"><img src="/images/new/icons/white_word.png"/></a>');
            var navigationWizard = $(containerId);
            navigationWizard.append(exportLink);
            var exportExcel = $("#exportWord");
            var url = MakeRequestToMVC("Preview", "GenerateDocFile");
            if (url.indexOf("&id=") <= -1) {
                url = url + "id=" + id;
            }
            exportExcel.click(function () {
                showHelperCustom(url);
            });
        },

        AddPrintButton: function (id, printButtonStyle, containerId) {
            var printButtonHtml = $('<a  class="btn red" ' + printButtonStyle + ' id="printButton"><span>' + STR_PRINT_BUTTON + '</span></a> <br style="clear:both"/>');
            var navigationWizard = $(containerId);
            navigationWizard.append(printButtonHtml);
            var printButton = $("#printButton");
            printButton.click(function () {
                TradeFinance_JS.PreviewRequest(id);
            });
        },

        CheckBankGuaranteeCollateral: function (validationErrorString) {

            var receivedAdvancePayment = ($("#m_ctrl_ReceivedAdvancePayment"));
            var creditLine = ($("#m_ctrl_CreditLine"));
            var collateralAccountMoney = ($("#m_ctrl_CollateralAccountMoney"));

            if ($(receivedAdvancePayment).prop("checked") == false &&
                $(creditLine).prop("checked") == false &&
                $(collateralAccountMoney).prop("checked") == false) {
                var j = SetCustomValidationError(validationErrorString, 'orgfile');
                fillValidatioSumarry(j);
                return false;
            }
            else {
                return true;
            }
        },

        CheckLetterOfCreditCollateral: function (validationErrorString) {
            var collateralAccountMoney = ($("#m_ctrl_CollateralAccountMoney"));
            var collateralCreditContract = ($("#m_ctrl_CollateralCreditContract"));

            if (BoolAnd($(collateralAccountMoney).prop("checked") == false,
                $(collateralCreditContract).prop("checked") == false)) {
                var j = SetCustomValidationError(validationErrorString, 'orgfile');
                fillValidatioSumarry(j);
                return false;
            }
            else {
                return true;
            }
        }
    };

function TradeFinanceExportPdf(id) {
    var url = MakeRequestAndChangeXmlID("04CorporateServices/80TradeFinance/10BankGuarantees/10IssuedGuarantee/.PrintTemplate");
    url = url + "id=" + id + "&amp;mediatype=pdf";
    var pdfLink = $("#pdf");
    pdfLink.attr("export-href", url);
    return exportPdf(pdfLink);
}

function TradeFinanceDownloadAttachment(id, formTypeId) {
	var fromType = $("#" + formTypeId).val();
	var url = MakeRequestToMVC("TradeFinanceMessages", "Download") + "&file_id=" + id + "&threadFormType=" + fromType;
	var link = $("#attachment");
	link.attr("export-href", url);
	$.fileDownload($(link).attr('export-href'), {
	    successCallback: function () { },
	    failCallback: function () {
	        ShowGeneralError();
	    }
	});
}

function TradeFinanceDeleteRequest(data, url, confirmMessage) {
    var bres = confirm(confirmMessage);
    if (bres == true) {

        $.daisDialogLoad({
            url: url,
            data: data,
            height: 200,
            width: 500,
            buttons: [],
            open: function (event, ui) { $(".ui-dialog-titlebar-close").hide(); },
            success: function () {
            },
        });
    }
}

function BankGuaranteeDisableEnableAgreedText() {
    if ($("#restriction").val() != restrictionOther
            && $("#m_ctrl_GuaranteePeriod").val() != guaranteePeriodUnlimited
            && $("#m_ctrl_GuaranteeType").val() != guaranteeTypeContraGuarantee
            && $("#m_ctrl_GuaranteeKind").val() != guaranteeCustomsPurposes
            && $("#m_ctrl_GuaranteeKind").val() != guaranteeKindOther) {
        EnableAgreedText();
    }
    else {
        DisableAgreedText();
    }
}
/*
* jQuery File Download Plugin v1.4.3 
*
* http://www.johnculviner.com
*
* Copyright (c) 2013 - John Culviner
*
* Licensed under the MIT license:
*   http://www.opensource.org/licenses/mit-license.php
*
* !!!!NOTE!!!!
* You must also write a cookie in conjunction with using this plugin as mentioned in the orignal post:
* http://johnculviner.com/jquery-file-download-plugin-for-ajax-like-feature-rich-file-downloads/
* !!!!NOTE!!!!
*/

(function ($, window) {
	// i'll just put them here to get evaluated on script load
	var htmlSpecialCharsRegEx = /[<>&\r\n"']/gm;
	var htmlSpecialCharsPlaceHolders = {
		'<': 'lt;',
		'>': 'gt;',
		'&': 'amp;',
		'\r': "#13;",
		'\n': "#10;",
		'"': 'quot;',
		"'": '#39;' /*single quotes just to be safe, IE8 doesn't support &apos;, so use &#39; instead */
	};

	$.extend({
		//
		//$.fileDownload('/path/to/url/', options)
		//  see directly below for possible 'options'
		fileDownload: function (fileUrl, options) {

			//provide some reasonable defaults to any unspecified options below
			var settings = $.extend({

				//
				//Requires jQuery UI: provide a message to display to the user when the file download is being prepared before the browser's dialog appears
				//
				preparingMessageHtml: null,

				//
				//Requires jQuery UI: provide a message to display to the user when a file download fails
				//
				failMessageHtml: null,

				//
				//the stock android browser straight up doesn't support file downloads initiated by a non GET: http://code.google.com/p/android/issues/detail?id=1780
				//specify a message here to display if a user tries with an android browser
				//if jQuery UI is installed this will be a dialog, otherwise it will be an alert
				//Set to null to disable the message and attempt to download anyway
				//
				androidPostUnsupportedMessageHtml: "Unfortunately your Android browser doesn't support this type of file download. Please try again with a different browser.",

				//
				//Requires jQuery UI: options to pass into jQuery UI Dialog
				//
				dialogOptions: { modal: true },

				//
				//a function to call while the dowload is being prepared before the browser's dialog appears
				//Args:
				//  url - the original url attempted
				//
				prepareCallback: function (url) { },

				//
				//a function to call after a file download dialog/ribbon has appeared
				//Args:
				//  url - the original url attempted
				//
				successCallback: function (url) { },

				//
				//a function to call after a file download dialog/ribbon has appeared
				//Args:
				//  responseHtml    - the html that came back in response to the file download. this won't necessarily come back depending on the browser.
				//                      in less than IE9 a cross domain error occurs because 500+ errors cause a cross domain issue due to IE subbing out the
				//                      server's error message with a "helpful" IE built in message
				//  url             - the original url attempted
				//
				failCallback: function (responseHtml, url) { },

				//
				// the HTTP method to use. Defaults to "GET".
				//
				httpMethod: "GET",

				//
				// if specified will perform a "httpMethod" request to the specified 'fileUrl' using the specified data.
				// data must be an object (which will be $.param serialized) or already a key=value param string
				//
				data: null,

				//
				//a period in milliseconds to poll to determine if a successful file download has occured or not
				//
				checkInterval: 100,

				//
				//the cookie name to indicate if a file download has occured
				//
				cookieName: "fileDownload",

				//
				//the cookie value for the above name to indicate that a file download has occured
				//
				cookieValue: "true",

				//
				//the cookie path for above name value pair
				//
				cookiePath: "/",

				//
				//if specified it will be used when attempting to clear the above name value pair
				//useful for when downloads are being served on a subdomain (e.g. downloads.example.com)
				//	
				cookieDomain: null,

				//
				//the title for the popup second window as a download is processing in the case of a mobile browser
				//
				popupWindowTitle: "Initiating file download...",

				//
				//Functionality to encode HTML entities for a POST, need this if data is an object with properties whose values contains strings with quotation marks.
				//HTML entity encoding is done by replacing all &,<,>,',",\r,\n characters.
				//Note that some browsers will POST the string htmlentity-encoded whilst others will decode it before POSTing.
				//It is recommended that on the server, htmlentity decoding is done irrespective.
				//
				encodeHTMLEntities: true

			}, options);

			var deferred = new $.Deferred();

			//Setup mobile browser detection: Partial credit: http://detectmobilebrowser.com/
			var userAgent = (navigator.userAgent || navigator.vendor || window.opera).toLowerCase();

			var isIos;                  //has full support of features in iOS 4.0+, uses a new window to accomplish this.
			var isAndroid;              //has full support of GET features in 4.0+ by using a new window. Non-GET is completely unsupported by the browser. See above for specifying a message.
			var isOtherMobileBrowser;   //there is no way to reliably guess here so all other mobile devices will GET and POST to the current window.

			if (/ip(ad|hone|od)/.test(userAgent)) {

				isIos = true;

			} else if (userAgent.indexOf('android') !== -1) {

				isAndroid = true;

			} else {

				isOtherMobileBrowser = /avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|playbook|silk|iemobile|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(userAgent) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(userAgent.substr(0, 4));

			}

			var httpMethodUpper = settings.httpMethod.toUpperCase();

			if (isAndroid && httpMethodUpper !== "GET" && settings.androidPostUnsupportedMessageHtml) {
				//the stock android browser straight up doesn't support file downloads initiated by non GET requests: http://code.google.com/p/android/issues/detail?id=1780

				if ($().dialog) {
					$("<div>").html(settings.androidPostUnsupportedMessageHtml).dialog(settings.dialogOptions);
				} else {
					alert(settings.androidPostUnsupportedMessageHtml);
				}

				return deferred.reject();
			}

			var $preparingDialog = null;

			var internalCallbacks = {

				onPrepare: function (url) {

					//wire up a jquery dialog to display the preparing message if specified
					if (settings.preparingMessageHtml) {

						$preparingDialog = $("<div>").html(settings.preparingMessageHtml).dialog(settings.dialogOptions);

					} else if (settings.prepareCallback) {

						settings.prepareCallback(url);

					}

				},

				onSuccess: function (url) {

					//remove the perparing message if it was specified
					if ($preparingDialog) {
						$preparingDialog.dialog('close');
					};

					settings.successCallback(url);

					deferred.resolve(url);
				},

				onFail: function (responseHtml, url) {

					//remove the perparing message if it was specified
					if ($preparingDialog) {
						$preparingDialog.dialog('close');
					};

					//wire up a jquery dialog to display the fail message if specified
					if (settings.failMessageHtml) {
						$("<div>").html(settings.failMessageHtml).dialog(settings.dialogOptions);
					}

					settings.failCallback(responseHtml, url);

					deferred.reject(responseHtml, url);
				}
			};

			internalCallbacks.onPrepare(fileUrl);

			//make settings.data a param string if it exists and isn't already
			if (settings.data !== null && typeof settings.data !== "string") {
				settings.data = $.param(settings.data);
			}


			var $iframe,
                downloadWindow,
                formDoc,
                $form;

			if (httpMethodUpper === "GET") {

				if (settings.data !== null) {
					//need to merge any fileUrl params with the data object

					var qsStart = fileUrl.indexOf('?');

					if (qsStart !== -1) {
						//we have a querystring in the url

						if (fileUrl.substring(fileUrl.length - 1) !== "&") {
							fileUrl = fileUrl + "&";
						}
					} else {

						fileUrl = fileUrl + "?";
					}

					fileUrl = fileUrl + settings.data;
				}

				if (isIos || isAndroid) {

					downloadWindow = window.open(fileUrl);
					downloadWindow.document.title = settings.popupWindowTitle;
					window.focus();

				} else if (isOtherMobileBrowser) {

					window.location(fileUrl);

				} else {

					//create a temporary iframe that is used to request the fileUrl as a GET request
					$iframe = $("<iframe>")
                        .hide()
                        .prop("src", fileUrl)
                        .appendTo("body");
				}

			} else {

				var formInnerHtml = "";

				if (settings.data !== null) {

					$.each(settings.data.replace(/\+/g, ' ').split("&"), function () {

						var kvp = this.split("=");

						var key = settings.encodeHTMLEntities ? htmlSpecialCharsEntityEncode(decodeURIComponent(kvp[0])) : decodeURIComponent(kvp[0]);
						if (key) {
							var value = settings.encodeHTMLEntities ? htmlSpecialCharsEntityEncode(decodeURIComponent(kvp[1])) : decodeURIComponent(kvp[1]);
							formInnerHtml += '<input type="hidden" name="' + key + '" value="' + value + '" />';
						}
					});
				}

				if (isOtherMobileBrowser) {

					$form = $("<form>").appendTo("body");
					$form.hide()
                        .prop('method', settings.httpMethod)
                        .prop('action', fileUrl)
                        .html(formInnerHtml);

				} else {

					if (isIos) {

						downloadWindow = window.open("about:blank");
						downloadWindow.document.title = settings.popupWindowTitle;
						formDoc = downloadWindow.document;
						window.focus();

					} else {

						$iframe = $("<iframe style='display: none' src='about:blank'></iframe>").appendTo("body");
						formDoc = getiframeDocument($iframe);
					}

					formDoc.write("<html><head></head><body><form method='" + settings.httpMethod + "' action='" + fileUrl + "'>" + formInnerHtml + "</form>" + settings.popupWindowTitle + "</body></html>");
					$form = $(formDoc).find('form');
				}

				$form.submit();
			}


			//check if the file download has completed every checkInterval ms
			setTimeout(checkFileDownloadComplete, settings.checkInterval);


			function checkFileDownloadComplete() {
				//has the cookie been written due to a file download occuring?
				if (document.cookie.indexOf(settings.cookieName + "=" + settings.cookieValue) != -1) {

					//execute specified callback
					internalCallbacks.onSuccess(fileUrl);

					//remove cookie
					var cookieData = settings.cookieName + "=; path=" + settings.cookiePath + "; expires=" + new Date(0).toUTCString() + ";";
					if (settings.cookieDomain) cookieData += " domain=" + settings.cookieDomain + ";";
					document.cookie = cookieData;

					//remove iframe
					cleanUp(false);

					return;
				}

				//has an error occured?
				//if neither containers exist below then the file download is occuring on the current window
				if (downloadWindow || $iframe) {

					//has an error occured?
					try {

						var formDoc = downloadWindow ? downloadWindow.document : getiframeDocument($iframe);

						if (formDoc && formDoc.body != null && formDoc.body.innerHTML.length) {

							var isFailure = true;

							if ($form && $form.length) {
								var $contents = $(formDoc.body).contents().first();

								try {
									if ($contents.length && $contents[0] === $form[0]) {
										isFailure = false;
									}
								} catch (e) {
									if (e && e.number == -2146828218) {
										// IE 8-10 throw a permission denied after the form reloads on the "$contents[0] === $form[0]" comparison
										isFailure = true;
									} else {
										throw e;
									}
								}
							}

							if (isFailure) {
								// IE 8-10 don't always have the full content available right away, they need a litle bit to finish
								setTimeout(function () {
									internalCallbacks.onFail(formDoc.body.innerHTML, fileUrl);
									cleanUp(true);
								}, 100);

								return;
							}
						}
					}
					catch (err) {

						//500 error less than IE9
						internalCallbacks.onFail('', fileUrl);

						cleanUp(true);

						return;
					}
				}


				//keep checking...
				setTimeout(checkFileDownloadComplete, settings.checkInterval);
			}

			//gets an iframes document in a cross browser compatible manner
			function getiframeDocument($iframe) {
				var iframeDoc = $iframe[0].contentWindow || $iframe[0].contentDocument;
				if (iframeDoc.document) {
					iframeDoc = iframeDoc.document;
				}
				return iframeDoc;
			}

			function cleanUp(isFailure) {

				setTimeout(function () {

					if (downloadWindow) {

						if (isAndroid) {
							downloadWindow.close();
						}

						if (isIos) {
							if (downloadWindow.focus) {
								downloadWindow.focus(); //ios safari bug doesn't allow a window to be closed unless it is focused
								if (isFailure) {
									downloadWindow.close();
								}
							}
						}
					}

					//iframe cleanup appears to randomly cause the download to fail
					//not doing it seems better than failure...
					//if ($iframe) {
					//    $iframe.remove();
					//}

				}, 0);
			}


			function htmlSpecialCharsEntityEncode(str) {
				return str.replace(htmlSpecialCharsRegEx, function (match) {
					return '&' + htmlSpecialCharsPlaceHolders[match];
				});
			}
			var promise = deferred.promise();
			promise.abort = function () {
				cleanUp();
				$iframe.remove();
			};
			return promise;
		}
	});

})(jQuery, this);

/// <reference path="config.js">
/// <reference path="log4js\log4js-lib.js">
/// <reference path="_js\jquery.min.js">
/*****************************************************************************/
/*** LORIS ***/
/*****************************************************************************/

var Loris = new function ()//namespace Loris
{
    var log = new Log4js.getLogger("Loris");
    if(DaisConfiguration.Loris.LogEnabled)
    {
        log.setLevel(Log4js.Level.ALL);
        var consoleAppender = new Log4js.ConsoleAppender(true);
        log.addAppender(consoleAppender);
    }
    log.info('Log4js in Loris started');


    function CLorisSessionStore()
    {///<summary>class CLorisSessionStore</summary>
        log.debug("CLorisSessionStore ctor");

        var m_mgr_Mvc = new CMvcLoris();
        var m_Store = new CStore();
        var m_Managers = new CManagerColection(m_Store);

        this.getManagers = function ()
        {
            ///<summary></summary>
            ///<returns type="CManagerColection" />
            return m_Managers;
        };

        this.AskServer = function ()
        {///<summary>public method to be called when we want fresh data from the server</summary>
            log.debug("AskServer enter");
            AskServerInternal("begin", null, null, null, null)
        }

        var AskServerInternal = function (
			step,
			rqHasChanges,
			rsHasChanges,
			rqGetChanges,
			rsGetChanges)
        {
            switch(step)
            {
                case "begin":
                    rqHasChanges = CreateRequestForHasChanges();
                    m_mgr_Mvc.HasChanges(rqHasChanges, function (x) { AskServerInternal("AfterHasChanges", rqHasChanges, x, null, null) });
                    break;

                case "AfterHasChanges":
                    if(rsHasChanges == null)
                    {
                        log.debug("AskServer will exit beacause m_mgr_Mvc.HasChanges returns NULL");
                        return;
                    }
                    rqGetChanges = CreateRequestForGetChanges(rsHasChanges);
                    if(rqGetChanges == null)
                    {
                        log.debug("AskServer will exit beacause there are no changes to get");
                        return;
                    }
                    m_mgr_Mvc.GetChanges(rqGetChanges, function (x) { AskServerInternal("AfterGetChanges", rqHasChanges, rsHasChanges, rqGetChanges, x) });
                    break;

                case "AfterGetChanges":
                    if(rsGetChanges == null)
                    {
                        log.debug("AskServer will exit beacause m_mgr_Mvc.GetChanges returns NULL");
                        return;
                    }

                    UpadateFromServer(rqGetChanges, rsGetChanges);
                    log.debug("AskServer exit");
                    break;

                default:
                    throw "bad step " + step;
                    break;
            }//switch(step)
        }

        ///////////////////////////////////////////////////////////////////////
        //implementation of managers
        ///////////////////////////////////////////////////////////////////////

        function CLorisModelChangeRq()
        {
            this.VersionOfEntries = new Array;
        }

        function CLorisModelUpdateRq()
        {
            this.GetLorisTrackedObjectChangesFlags = 0;
        }

        function CStore()
        {
            this.Entries = new Array;

            this.Entries[0] = new CStoreItem();
            //despatches are enum value 1 (EnumLorisTrackObjectChanges.DESPATCH_CENTER)
            this.Entries[1] = new CStoreItem();

            function CStoreItem()
            {///<summary>class CStoreItem</summary>
                this.Version = "";
            }
        }

        var CreateRequestForHasChanges = function ()
        {
            ///<summary>create CLorisModelChangeRq from CStore</summary>
            ///<returns type="CLorisModelChangeRq" />

            var rq = new CLorisModelChangeRq();
            
            for(var i = 0; i < m_Store.Entries.length; i++)
            {
                rq.VersionOfEntries[i] = m_Store.Entries[i].Version;
            }
            
            return JSON.stringify({ 'rq': rq });
        }

        var CreateRequestForGetChanges = function (rs)
        {
            ///<summary>creates CLorisModelUpdateRq from CLorisModelChangeRs</summary>
            ///<param type="CLorisModelChangeRs" name="rs" />
            ///<returns type="CLorisModelUpdateRq"> or null if update is not needed</returns>

            var rq = new CLorisModelUpdateRq();

            var needsUpdate = false;
            for(var i = 0; i < rs.AreValidEntries.length; i++)
            {
                if(!rs.AreValidEntries[i])
                {
                    needsUpdate = true;
                    rq.GetLorisTrackedObjectChangesFlags |= i;
                }
            }

            if(!needsUpdate)
                return null;

            return rq;
        }

        var UpadateFromServer = function (rq, rs)
        {
            ///<summary>process new data from server</summary>
            ///<param type="CLorisModelUpdateRq"	name="rq"/>
            ///<param type="CLorisModelUpdateRs"	name="rs"/>
            
            if(rq.GetLorisTrackedObjectChangesFlags > 0)
            {//despatches are enum value 1 (EnumLorisTrackObjectChanges.DESPATCH_CENTER)
                m_Managers.getDespatchEntriesManager().UpadateFromServer(rs.Entries[1]);
            }
        }
    }//end function CLorisSessionStore

    function CMvcLoris()
    {
        log.debug("CMvcLoris ctor");

        this.HasChanges = function (/*CLorisModelChangeRq*/ rq, fn)
        {
            if(log.isDebugEnabled())
                log.debug("HasChanges enter with " + Sys.Serialization.JavaScriptSerializer.serialize(rq));

            var url = MakeRequestToMVC("Loris", "HasChanges");
            var res = null;
            $.ajax({
                background: true,
                async: true,
                cache: false,
                type: "POST",
                url: url,
                data: rq,
                dataType: 'json', 
                contentType: 'application/json; charset=utf-8',
                success: function (data, textStatus, jqXHR)
                {
                    log.info("HasChanges mvc return " + Sys.Serialization.JavaScriptSerializer.serialize(data));
                    try
                    {
                        var rs = data;                    
                        if(rs.IsValid)
                            fn(rs);
                    }
                    catch(e)
                    {
                        log.fatal("HasChanges onsuccess error: " + e);
                    }
                },
                error: function (jqXHR, textStatus, errorThrown)
                {
                    log.fatal("HasChanges mvc error '" + textStatus + "', responseText:" + jqXHR.responseText);
                }
            });
        }

        this.GetChanges = function (/*CLorisModelUpdateRq*/ rq, fn)
        {
            if(log.isDebugEnabled())
                log.debug("GetChanges enter with " + Sys.Serialization.JavaScriptSerializer.serialize(rq));

            var url = MakeRequestToMVC("Loris", "GetChanges");
            var res = null;
            $.ajax({
                background: true,
                async: true,
                cache: false,
                type: "POST",
                url: url,
                data: rq,
                dataType: "text",
                success: function (data, textStatus, jqXHR)
                {
                    log.info("GetChanges mvc return " + data);
                    try
                    {
                        var rs = Sys.Serialization.JavaScriptSerializer.deserialize(data);
                        if(!m_HasPassedGetChangesOnce)
                        {
                            m_HasPassedGetChangesOnce = true;
                        }
                        if(rs.IsValid)
                            fn(rs);
                    }
                    catch(e)
                    {
                        log.fatal("GetChanges onsuccess error: " + e);
                    }
                },
                error: function (jqXHR, textStatus, errorThrown)
                {
                    log.fatal("GetChanges mvc error '" + textStatus + "', responseText:" + jqXHR.responseText);
                }
            });
        }
    }//end function CMvcLoris

    function CManagerColection(store)
    {///<summary>class CManagerColection</summary>
        log.debug("CManagerColection ctor");
        //despatches are enum value 1 (EnumLorisTrackObjectChanges.DESPATCH_CENTER)
        var m_mgr_DespatchEntries = new CManagerDespatchEntries(store.Entries[1]);
        this.getDespatchEntriesManager = function ()
        {
            ///<summary>gets the DespatchEntries manager</summary>
            ///<returns type="CManagerDespatchEntries"></returns>
            return m_mgr_DespatchEntries;

        }
        ///////////////////////////////////////////////////////////////////////
        //implementation of managers
        ///////////////////////////////////////////////////////////////////////

        function CManagerDespatchEntries(storeItemDespatchEntries)
        {
            ///<summary>class to manage DespatchEntries</summary>
            ///<param type="CStoreItem" name="storeItemDespatchEntries">DespatchEntries StoreItem</param>
            log.debug("CManagerDespatchEntries ctor");

            storeItemDespatchEntries.Object = '';

            this.UpadateFromServer = function (objIn)
            {
                ///<summary>process new sers</summary>
                ///<param type="CLorisModelUpdatedDespatchEntries" name="objIn"></param>

                storeItemDespatchEntries.Version = objIn.version;
                storeItemDespatchEntries.Object = objIn.Object;

                m_mgr_DespatchEntryTopToolbox.ReloadDespatchData(storeItemDespatchEntries.Object);
            }

            this.Object = function ()
            {
                return storeItemDespatchEntries.Object;
            }
        }

    }//end function CManagerColection(store)

    function CUpdater(objLorisSessionStore, objWindow)
    {///<summary>class CUpdater</summary>
        var m_LorisSessionStore = objLorisSessionStore;

        var m_Timeout = DaisConfiguration.Loris.UpdaterTimeout * 1000;
        var m_rs_setTimeout;

        var Stop = function ()
        {
            log.debug("CUpdater.Stop");
            objWindow.clearTimeout(m_rs_setTimeout);
        }

        var Update = function ()
        {
            log.debug("CUpdater.Update");

            var isActiveSeesion = !DAIS.APERSON.SECURITY.SessionCountdown.isSessionExpired();
            if(isActiveSeesion)
            {
                m_LorisSessionStore.AskServer();
                m_rs_setTimeout = objWindow.setTimeout(Update, m_Timeout);
            }
            else
            {
                log.debug("CUpdater: session expired");
                Stop();
            }
        }

        this.Start = function ()
        {
            Update();
        }

        var m_old_onload;
        var CatchOnLoad = function (wnd)
        {
            if(!DaisConfiguration.Loris.UpdaterEnabled)
                return;

            m_old_onload = wnd.onload;
            wnd.onload = function ()
            {
                var startTimeout = DaisConfiguration.Loris.StartDelay;
                if(!startTimeout)
                {
                    startTimeout = 0;
                }

                objWindow.setTimeout(m_mgr_Updater.Start, startTimeout * 1000);

                if(m_old_onload)
                    m_old_onload();
            }
        }

        CatchOnLoad(objWindow);
    }//end function CUpdater

    var CDespatchEntryTopToolboxMgr = function ()
    {
        ///<summary>class to manage Top Toolbox notifications flag</summary>
        this.ReloadDespatchData = function (data)
            ///<summary>get TopToolbox's MarkerDiv</summary>
        {
            ReloadDespatchCenter($('#pigeonDespatches'), data);
        }
    }//end func CDespatchEntryTopToolboxMgr()
    var m_mgr_DespatchEntryTopToolbox = new CDespatchEntryTopToolboxMgr();


    /*** MAIN ***/
    var m_LorisSessionStore = new CLorisSessionStore();
    var m_mgr_Updater = new CUpdater(m_LorisSessionStore, window);
    var m_HasPassedGetChangesOnce = false;

    this.getHasPassedGetChangesOnce = function ()
    {
        ///<summary>Shows whether GetChanges has completed once</summary>
        ///<returns type="bool"></returns>

        return m_HasPassedGetChangesOnce;
    }
    this.getSessionStore = function ()
    {
        ///<summary>gets the SessionStore manager</summary>
        ///<returns type="CLorisSessionStore"></returns>
        return m_LorisSessionStore;
    }

};//namespace Loris
DAIS.createNS("DAIS.Trader");

DAIS.Trader.TraderStartAmountWithConfirmationInBGN = 100000;
DAIS.Trader.IsContractualFXInEUR = 10000;


DAIS.Trader.CalcInLevaByPassingValues = function(amount, fixRate) {
    if (amount != undefined) {
        var checksum = ToFloat(amount);
        if (fixRate != undefined) {
            checksum = ToFloat(amount) * ToFloat(fixRate);
        }
        return checksum;
    }

    return 0;
}

DAIS.Trader.IsNeededContractualFX = function (totalSumInEUR, bankAccountCCY, selectedIssueCCY) {
    if (totalSumInEUR > DAIS.Trader.IsContractualFXInEUR
                     && bankAccountCCY != selectedIssueCCY
                     && bankAccountCCY != null
                     && bankAccountCCY != "") {
        return true;
    }
    else {
        return false
    };
}
/*
 ### jQuery Multiple File Selection Plugin v2.2.1 - 2015-03-23 ###
 * Home: http://www.fyneworks.com/jquery/multifile/
 * Code: http://code.google.com/p/jquery-multifile-plugin/
 *
	* Licensed under http://en.wikipedia.org/wiki/MIT_License
 ###
*/
/*# AVOID COLLISIONS #*/
;
if (window.jQuery)(function ($) {
	"use strict";
	/*# AVOID COLLISIONS #*/

	// size label function (shows kb and mb where accordingly)
	function sl(x) {
		return x > 1048576 ? (x / 1048576).toFixed(1) + 'Mb' : (x==1024?'1Mb': (x / 1024).toFixed(1) + 'Kb' )
	};
	// utility function to return an array of
	function FILE_LIST(x){
		return ((x.files&&x.files.length) ? x.files : null) || [{
			name: x.value,
			size: 0,
			type: ((x.value || '').match(/[^\.]+$/i) || [''])[0]
		}];
	};

	// plugin initialization
	$.fn.MultiFile = function (options) {
		if (this.length == 0) return this; // quick fail

		// Handle API methods
		if (typeof arguments[0] == 'string') {
			// Perform API methods on individual elements
			if (this.length > 1) {
				var args = arguments;
				return this.each(function () {
					$.fn.MultiFile.apply($(this), args);
				});
			};
			// Invoke API method handler (and return whatever it wants to return)
			return $.fn.MultiFile[arguments[0]].apply(this, $.makeArray(arguments).slice(1) || []);
		};

		// Accept number
		if (typeof options == 'number') {
			options = {max: options};
		};

		// Initialize options for this call
		var options = $.extend({} /* new object */ ,
			$.fn.MultiFile.options /* default options */ ,
			options || {} /* just-in-time options */
		);

		// Empty Element Fix!!!
		// this code will automatically intercept native form submissions
		// and disable empty file elements
		$('form')
			.not('MultiFile-intercepted')
			.addClass('MultiFile-intercepted')
			.submit($.fn.MultiFile.disableEmpty);

		//### http://plugins.jquery.com/node/1363
		// utility method to integrate this plugin with others...
		if ($.fn.MultiFile.options.autoIntercept) {
			$.fn.MultiFile.intercept($.fn.MultiFile.options.autoIntercept /* array of methods to intercept */ );
			$.fn.MultiFile.options.autoIntercept = null; /* only run this once */
		};

		// loop through each matched element
		this
			.not('.MultiFile-applied')
			.addClass('MultiFile-applied')
			.each(function () {
				//#####################################################################
				// MAIN PLUGIN FUNCTIONALITY - START
				//#####################################################################

				// BUG 1251 FIX: http://plugins.jquery.com/project/comments/add/1251
				// variable group_count would repeat itself on multiple calls to the plugin.
				// this would cause a conflict with multiple elements
				// changes scope of variable to global so id will be unique over n calls
				window.MultiFile = (window.MultiFile || 0) + 1;
				var group_count = window.MultiFile;

				// Copy parent attributes - Thanks to Jonas Wagner
				// we will use this one to create new input elements
				var MultiFile = {
					e: this,
					E: $(this),
					clone: $(this).clone()
				};

				//===

				//# USE CONFIGURATION
				var o = $.extend({},
					$.fn.MultiFile.options,
					options || {}, ($.metadata ? MultiFile.E.metadata() : ($.meta ? MultiFile.E.data() : null)) || {}, /* metadata options */ {} /* internals */
				);
				// limit number of files that can be selected?
				if (!(o.max > 0) /*IsNull(MultiFile.max)*/ ) {
					o.max = MultiFile.E.attr('maxlength');
				};
				if (!(o.max > 0) /*IsNull(MultiFile.max)*/ ) {
					o.max = (String(MultiFile.e.className.match(/\b(max|limit)\-([0-9]+)\b/gi) || ['']).match(/[0-9]+/gi) || [''])[0];
					if (!(o.max > 0)) o.max = -1;
					else o.max = String(o.max).match(/[0-9]+/gi)[0];
				};
				o.max = new Number(o.max);
				// limit extensions?
				o.accept = o.accept || MultiFile.E.attr('accept') || '';
				if (!o.accept) {
					o.accept = (MultiFile.e.className.match(/\b(accept\-[\w\|]+)\b/gi)) || '';
					o.accept = new String(o.accept).replace(/^(accept|ext)\-/i, '');
				};
				// limit total pay load size
				o.maxsize = o.maxsize>0?o.maxsize:null || MultiFile.E.data('maxsize') || 0;
				if (!(o.maxsize > 0) /*IsNull(MultiFile.maxsize)*/ ) {
					o.maxsize = (String(MultiFile.e.className.match(/\b(maxsize|maxload|size)\-([0-9]+)\b/gi) || ['']).match(/[0-9]+/gi) || [''])[0];
					if (!(o.maxsize > 0)) o.maxsize = -1;
					else o.maxsize = String(o.maxsize).match(/[0-9]+/gi)[0];
				};
				// limit individual file size
				o.maxfile = o.maxfile>0?o.maxfile:null || MultiFile.E.data('maxfile') || 0;
				if (!(o.maxfile > 0) /*IsNull(MultiFile.maxfile)*/ ) {
					o.maxfile = (String(MultiFile.e.className.match(/\b(maxfile|filemax)\-([0-9]+)\b/gi) || ['']).match(/[0-9]+/gi) || [''])[0];
					if (!(o.maxfile > 0)) o.maxfile = -1;
					else o.maxfile = String(o.maxfile).match(/[0-9]+/gi)[0];
				};

				//===

				// size options are accepted in kylobytes, so multiple them by 1024
				if(o.maxfile>1) o.maxfile = o.maxfile * 1024;
				if(o.maxsize>1) o.maxsize = o.maxsize * 1024;

				//===

				// HTML5: enforce multiple selection to be enabled
				if(o.max>1) MultiFile.E.attr('multiple','multiple').prop('multiple',true);

				//===

				// APPLY CONFIGURATION
				$.extend(MultiFile, o || {});
				MultiFile.STRING = $.extend(MultiFile.STRING || {}, $.fn.MultiFile.options.STRING, MultiFile.STRING);

				//===

				//#########################################
				// PRIVATE PROPERTIES/METHODS
				$.extend(MultiFile, {
					n: 0, // How many elements are currently selected?
					slaves: [],
					files: [],
					instanceKey: MultiFile.e.id || 'MultiFile' + String(group_count), // Instance Key?
					generateID: function (z) {
						return MultiFile.instanceKey + (z > 0 ? '_F' + String(z) : '');
					},
					trigger: function (event, element, MultiFile, files) {
						var rv, handler = MultiFile[event] || MultiFile['on'+event] ;
						if (handler){
							files = files || MultiFile.files || FILE_LIST(this);
							;
							$.each(files,function(i, file){
								// execute function in element's context, so 'this' variable is current element
								rv = handler.apply(MultiFile.wrapper, [element, file.name, MultiFile, file]);
							});
							return rv;
						};
					}
				});

				//===

				// Setup dynamic regular expression for extension validation
				// - thanks to John-Paul Bader: http://smyck.de/2006/08/11/javascript-dynamic-regular-expresions/
				if (String(MultiFile.accept).length > 1) {
					MultiFile.accept = MultiFile.accept.replace(/\W+/g, '|').replace(/^\W|\W$/g, '');
					MultiFile.rxAccept = new RegExp('\\.(' + (MultiFile.accept ? MultiFile.accept : '') + ')$', 'gi');
				};

				//===

				// Create wrapper to hold our file list
				MultiFile.wrapID = MultiFile.instanceKey;// + '_wrap'; // Wrapper ID?
				MultiFile.E.wrap('<div class="MultiFile-wrap" id="' + MultiFile.wrapID + '"></div>');
				MultiFile.wrapper = $('#' + MultiFile.wrapID + '');

				//===

				// MultiFile MUST have a name - default: file1[], file2[], file3[]
				MultiFile.e.name = MultiFile.e.name || 'file' + group_count + '[]';

				//===

				if (!MultiFile.list) {
					// Create a wrapper for the list
					// * OPERA BUG: NO_MODIFICATION_ALLOWED_ERR ('list' is a read-only property)
					// this change allows us to keep the files in the order they were selected
					MultiFile.wrapper.append('<div class="MultiFile-list" id="' + MultiFile.wrapID + '_list"></div>');
					MultiFile.list = $('#' + MultiFile.wrapID + '_list');
				};
				MultiFile.list = $(MultiFile.list);

				//===

				// Bind a new element
				MultiFile.addSlave = function (slave, slave_count) {
					//if(window.console) console.log('MultiFile.addSlave',slave_count);
					
					// Keep track of how many elements have been displayed
					MultiFile.n++;
					// Add reference to master element
					slave.MultiFile = MultiFile;

					// BUG FIX: http://plugins.jquery.com/node/1495
					// Clear identifying properties from clones
					slave.id = slave.name = '';

					// Define element's ID and name (upload components need this!)
					//slave.id = slave.id || MultiFile.generateID(slave_count);
					slave.id = MultiFile.generateID(slave_count);
					//FIX for: http://code.google.com/p/jquery-multifile-plugin/issues/detail?id=23
					//CHANGE v2.2.1 - change ID of all file elements, keep original ID in wrapper

					// 2008-Apr-29: New customizable naming convention (see url below)
					// http://groups.google.com/group/jquery-dev/browse_frm/thread/765c73e41b34f924#
					slave.name = String(MultiFile.namePattern
						/*master name*/
						.replace(/\$name/gi, $(MultiFile.clone).attr('name'))
						/*master id */
						.replace(/\$id/gi, $(MultiFile.clone).attr('id'))
						/*group count*/
						.replace(/\$g/gi, group_count) //(group_count>0?group_count:''))
						/*slave count*/
						.replace(/\$i/gi, slave_count) //(slave_count>0?slave_count:''))
					);

					// If we've reached maximum number, disable input slave
					var disable_slave;
					if ((MultiFile.max > 0) && ((MultiFile.files.length) > (MultiFile.max))) {
						slave.disabled = true;
						disable_slave = true;
					};

					// Remember most recent slave
					MultiFile.current = slave;
					
					// We'll use jQuery from now on
					slave = $(slave);

					// Clear value
					slave.val('').attr('value', '')[0].value = '';

					// Stop plugin initializing on slaves
					slave.addClass('MultiFile-applied');

					// Triggered when a file is selected
					slave.change(function (a, b, c) {
						//if(window.console) console.log('MultiFile.slave.change',slave_count);
						//if(window.console) console.log('MultiFile.slave.change',this.files);

						// Lose focus to stop IE7 firing onchange again
						$(this).blur();

						//# NEW 2014-04-14 - accept multiple file selection, HTML5
						var e = this,
								prevs = MultiFile.files || [],
								files = this.files || [{
									name: this.value,
									size: 0,
									type: ((this.value || '').match(/[^\.]+$/i) || [''])[0]
								}],
								newfs = [],
								newfs_size = 0,
								total_size = MultiFile.total_size || 0/*,
								html5_multi_mode = this.files && $(this).attr('multiple')*/
							;

						// recap
						//console.log('START '+ prevs.length + ' files @ '+ sl(total_size) +'.', prevs);

						//# Retrive value of selected file from element
						var ERROR = []; //, v = String(this.value || '');

						// make a normal array
						$.each(files, function (i, file) {
							newfs[newfs.length] = file;
						});

						//# Trigger Event! onFileSelect
						MultiFile.trigger('FileSelect', this, MultiFile, newfs);
						//# End Event!

						// validate individual files
						$.each(files, function (i, file) {

							// pop local variables out of array/file object
							var v = file.name,
									s = file.size,
									p = function(z){
										return z
											.replace('$ext', String(v.match(/[^\.]+$/i) || ''))
											.replace('$file', v.match(/[^\/\\]+$/gi))
											.replace('$size', sl(s) + ' > ' + sl(MultiFile.maxfile))
									}
							;

							// check extension
							if (MultiFile.accept && v && !v.match(MultiFile.rxAccept)) {
								ERROR[ERROR.length] = p(MultiFile.STRING.denied);
								MultiFile.trigger('FileInvalid', this, MultiFile, [file]);
							};

							// Disallow duplicates
							$(MultiFile.wrapper).find('input[type=file]').not(e).each(function(){
								// go through each file in each slave
								$.each(FILE_LIST(this), function (i, file) {
									if(file.name){
										//console.log('MultiFile.debug> Duplicate?', file.name, v);
										var x = (file.name || '').replace(/^C:\\fakepath\\/gi,'');
										if ( v == x || v == x.substr(x.length - v.length)) {
											ERROR[ERROR.length] = p(MultiFile.STRING.duplicate);
											MultiFile.trigger('FileDuplicate', e, MultiFile, [file]);
										};
									};
								});
							});

							// limit the max size of individual files selected
							if (MultiFile.maxfile>0 && s>0 && s>MultiFile.maxfile) {
								ERROR[ERROR.length] = p(MultiFile.STRING.toobig);
								MultiFile.trigger('FileTooBig', this, MultiFile, [file]);
							};

							// check extension
							var customError = MultiFile.trigger('FileValidate', this, MultiFile, [file]);
							if(customError && customError!=''){
								ERROR[ERROR.length] = p(customError);
							};
								
							// add up size of files selected
							newfs_size += file.size;

						});
						
						// add up total for all files selected (existing and new)
						total_size += newfs_size;

						// put some useful information in the file array
						newfs.size = newfs_size;
						newfs.total = total_size;
						newfs.total_length = newfs.length + prevs.length;

						// limit the number of files selected
						if (MultiFile.max>0 && prevs.length + files.length > MultiFile.max) {
							ERROR[ERROR.length] = MultiFile.STRING.toomany.replace('$max', MultiFile.max);
							MultiFile.trigger('FileTooMany', this, MultiFile, newfs);
						};

						// limit the max size of files selected
						if (MultiFile.maxsize > 0 && total_size > MultiFile.maxsize) {
							ERROR[ERROR.length] = MultiFile.STRING.toomuch.replace('$size', sl(total_size) + ' > ' + sl(MultiFile.maxsize));
							MultiFile.trigger('FileTooMuch', this, MultiFile, newfs);
						};

						// Create a new file input element
						var newEle = $(MultiFile.clone).clone(); // Copy parent attributes - Thanks to Jonas Wagner
						//# Let's remember which input we've generated so
						// we can disable the empty ones before submission
						// See: http://plugins.jquery.com/node/1495
						newEle.addClass('MultiFile');

						// Handle error
						if (ERROR.length > 0) {

							// Handle error
							MultiFile.error(ERROR.join('\n\n'));

							// 2007-06-24: BUG FIX - Thanks to Adrian Wrуbel <adrian [dot] wrobel [at] gmail.com>
							// Ditch the trouble maker and add a fresh new element
							MultiFile.n--;
							MultiFile.addSlave(newEle[0], slave_count);
							slave.parent().prepend(newEle);
							slave.remove();
							return false;

						}
						else { // if no errors have been found

							// remember total size
							MultiFile.total_size = total_size;

							// merge arrays
							files = prevs.concat(newfs);

							// put some useful information in the file array
							files.size = total_size;
							files.size_label = sl(total_size);

							// recap
							//console.log('NOW '+ files.length + ' files @ '+ sl(total_size) +'.', files);

							// remember files
							MultiFile.files = files;

							// Hide this element (NB: display:none is evil!)
							$(this).css({
								position: 'absolute',
								top: '-3000px'
							});

							// Add new element to the form
							slave.after(newEle);

							// Bind functionality
							MultiFile.addSlave(newEle[0], slave_count + 1);

							// Update list
							MultiFile.addToList(this, slave_count, newfs);

							//# Trigger Event! afterFileSelect
							MultiFile.trigger('afterFileSelect', this, MultiFile, newfs);
							//# End Event!

						}; // no errors detected

					}); // slave.change()

					// point to wrapper
					$(slave).data('MultiFile-wrap', MultiFile.wrapper);

					// store contorl's settings and file info in wrapper
					$(MultiFile.wrapper).data('MultiFile',MultiFile);

					// disable?
					if(disable_slave) $(slave).attr('disabled','disabled').prop('disabled',true);

				}; // MultiFile.addSlave
				// Bind a new element



				// Add a new file to the list
				MultiFile.addToList = function (slave, slave_count, files) {
					//if(window.console) console.log('MultiFile.addToList',slave_count);

					//# Trigger Event! onFileAppend
					MultiFile.trigger('FileAppend', slave, MultiFile, files);
					//# End Event!
					
					var names = $('<span/>');
					$.each(files, function (i, file) {
						var v = String(file.name || '' ),
								S = MultiFile.STRING,
								n = S.label || S.file || S.name,
								t = S.title || S.tooltip || S.selected,
								p = '<img class="MultiFile-preview" style="'+ MultiFile.previewCss+'"/>',
								label =	$(
										(
											'<span class="MultiFile-label" title="' + t + '">'+
												'<span class="MultiFile-title">'+ n +'</span>'+
												(MultiFile.preview || $(slave).is('.with-preview') ? p : '' )+
											'</span>'
										)
										.replace(/\$(file|name)/gi, (v.match(/[^\/\\]+$/gi)||[v])[0])
										.replace(/\$(ext|extension|type)/gi, (v.match(/[^\.]+$/gi)||[''])[0])
										.replace(/\$(size)/gi, sl(file.size || 0))
										.replace(/\$(preview)/gi, p)
										.replace(/\$(i)/gi, i)
								);
						
						// now supports preview via locale string.
						// just add an <img class='MultiFile-preview'/> anywhere within the "file" string
						label.find('img.MultiFile-preview').each(function(){
							var t = this;
							var oFReader = new FileReader();
							oFReader.readAsDataURL(file);
							oFReader.onload = function (oFREvent) {
								t.src = oFREvent.target.result;
							};
						});

						// append file label to list
						if(i>1) names.append(', ');
						names.append(label);

						var v = String(file.name || '' );
						names[names.length] =
							(
								'<span class="MultiFile-title" title="' + MultiFile.STRING.selected + '">'
									+ MultiFile.STRING.file +
								'</span>'
							)
							.replace(/\$(file|name)/gi, (v.match(/[^\/\\]+$/gi)||[v])[0])
							.replace(/\$(ext|extension|type)/gi, (v.match(/[^\.]+$/gi)||[''])[0])
							.replace(/\$(size)/gi, sl(file.size || 0))
							.replace(/\$(i)/gi, i)
						;
					});

					//$.each(files, function (i, file) {
						// Create label elements
						var
							r = $('<div class="MultiFile-label"></div>'),
							b = $('<a class="MultiFile-remove" href="#' + MultiFile.wrapID + '">' + MultiFile.STRING.remove + '</a>')
								
								// ********
								// TODO:
								// refactor this as a single event listener on the control's
								// wrapper for better performance and cleaner code
								// ********
								.click(function () {

									// get list of files being removed
									var files_being_removed = FILE_LIST(slave);
									
									//# Trigger Event! onFileRemove
									MultiFile.trigger('FileRemove', slave, MultiFile, files_being_removed);
									//# End Event!

									MultiFile.n--;
									MultiFile.current.disabled = false;

									// remove the relevant <input type="file"/> element
									$(slave).remove();

									// remove the relevant label
									$(this).parent().remove();

									// Show most current element again (move into view) and clear selection
									$(MultiFile.current).css({
										position: '',
										top: ''
									});
									$(MultiFile.current).reset().val('').attr('value', '')[0].value = '';

									// point to currently visible element (always true, not necessary)
									//MultiFile.current = MultiFile.wrapper.find('[type=file]:visible');

									// rebuild array with the files that are left.
									var files_remaining = [], remain_size = 0;
									// go through each slave
									$(MultiFile.wrapper).find('input[type=file]').each(function(){
										// go through each file in each slave
										$.each(FILE_LIST(this), function (i, file) {
											if(file.name){
												//console.log('MultiFile.debug> FileRemove> remaining file', file.size, file);
												// fresh file array
												files_remaining[files_remaining.length] = file;
												// fresh size count
												remain_size += file.size;
											};
										});
									});

									// update MultiFile object
									MultiFile.files = files_remaining;
									MultiFile.total_size = remain_size;
									MultiFile.size_label = sl(remain_size);

									// update current control's reference to MultiFile object
									$(MultiFile.wrapper).data('MultiFile', MultiFile);

									//# Trigger Event! afterFileRemove
									MultiFile.trigger('afterFileRemove', slave, MultiFile, files_being_removed);
									//# End Event!

									//# Trigger Event! onFileChange
									MultiFile.trigger('FileChange', MultiFile.current, MultiFile, files_remaining);
									//# End Event!

									return false;
								});

						// Insert label
						MultiFile.list.append(
							r.append(b, ' ', names)
						);

					//}); // each file?

					//# Trigger Event! afterFileAppend
					MultiFile.trigger('afterFileAppend', slave, MultiFile, files);
					//# End Event!

					//# Trigger Event! onFileChange
					MultiFile.trigger('FileChange', slave, MultiFile, MultiFile.files);
					//# End Event!

				}; // MultiFile.addToList
				// Add element to selected files list



				// Bind functionality to the first element
				if (!MultiFile.MultiFile) MultiFile.addSlave(MultiFile.e, 0);

				// Increment control count
				//MultiFile.I++; // using window.MultiFile
				MultiFile.n++;

				// deprecated: contorl's data now stored in wrapper because it is never removed.
				// improved performance and lower memory comsumption
				// Save control to element
				//MultiFile.E.data('MultiFile', MultiFile);


				//#####################################################################
				// MAIN PLUGIN FUNCTIONALITY - END
				//#####################################################################
			}); // each element
	};

	/*--------------------------------------------------------*/

	/*
	### Core functionality and API ###
	*/
	$.extend($.fn.MultiFile, {


		/**
		 * This method exposes the all the control's data
		 *
		 * Returns an object with various settings and properties of the selected files
		 * for this particular instance of the control. stored in the control's wrapper
		 *
		 * @name data
		 * @type Object
		 * @cat Plugins/MultiFile
		 * @author Diego A. (http://www.fyneworks.com/)
		 *
		 * @example $('#selector').MultiFile('data');
		 */
		data: function () {
			
			// analyse this element
			var e = $(this), b = e.is('.MultiFile-wrap');
			
			// get control wrapper
			var wp = b ? e : e.data('MultiFile-wrap');
			if(!wp || !wp.length)
				return !console.error('Could not find MultiFile control wrapper');
			
			// get control data from wrapper
			var mf = wp.data('MultiFile');
			if(!mf)
				return !console.error('Could not find MultiFile data in wrapper');
			
			// return data
			return mf || {};
		},


		/**
		 * This method removes all selected files
		 *
		 * Returns a jQuery collection of all affected elements.
		 *
		 * @name reset
		 * @type jQuery
		 * @cat Plugins/MultiFile
		 * @author Diego A. (http://www.fyneworks.com/)
		 *
		 * @example $.fn.MultiFile.reset();
		 */
		reset: function () {
			var mf = this.MultiFile('data');
			if (mf) $(mf.list).find('a.MultiFile-remove').click();
			return $(this);
		},


		/**
		 * This method exposes the array of selected files
		 *
		 * Returns an array of file objects
		 *
		 * @name files
		 * @type Array
		 * @cat Plugins/MultiFile
		 * @author Diego A. (http://www.fyneworks.com/)
		 *
		 * @example $('#selector').MultiFile('files');
		 */
		files: function () {
			var mf = this.MultiFile('data');
			if(!mf) return !console.log('MultiFile plugin not initialized');
			return mf.files || [];
		},


		/**
		 * This method exposes the plugin's sum of the sizes of all files selected
		 *
		 * Returns size (in bytes) of files selected
		 *
		 * @name size
		 * @type Number
		 * @cat Plugins/MultiFile
		 * @author Diego A. (http://www.fyneworks.com/)
		 *
		 * @example $('#selector').MultiFile('size');
		 */
		size: function () {
			var mf = this.MultiFile('data');
			if(!mf) return !console.log('MultiFile plugin not initialized');
			return mf.total_size || 0;
		},


		/**
		 * This method exposes the plugin's tally of how many files have been selected
		 *
		 * Returns number (a count) of files selected
		 *
		 * @name count
		 * @type Number
		 * @cat Plugins/MultiFile
		 * @author Diego A. (http://www.fyneworks.com/)
		 *
		 * @example $('#selector').MultiFile('size');
		 */
		count: function () {
			var mf = this.MultiFile('data');
			if(!mf) return !console.log('MultiFile plugin not initialized');
			return mf.files ? mf.files.length || 0 : 0;
		},


		/**
		 * This utility makes it easy to disable all 'empty' file elements in the document before submitting a form.
		 * It marks the affected elements so they can be easily re-enabled after the form submission or validation.
		 *
		 * Returns a jQuery collection of all affected elements.
		 *
		 * @name disableEmpty
		 * @type jQuery
		 * @cat Plugins/MultiFile
		 * @author Diego A. (http://www.fyneworks.com/)
		 *
		 * @example $.fn.MultiFile.disableEmpty();
		 * @param String class (optional) A string specifying a class to be applied to all affected elements - Default: 'mfD'.
		 */
		disableEmpty: function (klass) {
			klass = (typeof (klass) == 'string' ? klass : '') || 'mfD';
			var o = [];
			$('input:file.MultiFile').each(function () {
				if ($(this).val() == '') o[o.length] = this;
			});

			// automatically re-enable for novice users
			window.clearTimeout($.fn.MultiFile.reEnableTimeout);
			$.fn.MultiFile.reEnableTimeout = window.setTimeout($.fn.MultiFile.reEnableEmpty, 500);
			
			return $(o).each(function () {
				this.disabled = true
			}).addClass(klass);
		},


		/**
		 * This method re-enables 'empty' file elements that were disabled (and marked) with the $.fn.MultiFile.disableEmpty method.
		 *
		 * Returns a jQuery collection of all affected elements.
		 *
		 * @name reEnableEmpty
		 * @type jQuery
		 * @cat Plugins/MultiFile
		 * @author Diego A. (http://www.fyneworks.com/)
		 *
		 * @example $.fn.MultiFile.reEnableEmpty();
		 * @param String klass (optional) A string specifying the class that was used to mark affected elements - Default: 'mfD'.
		 */
		reEnableEmpty: function (klass) {
			klass = (typeof (klass) == 'string' ? klass : '') || 'mfD';
			return $('input:file.' + klass).removeClass(klass).each(function () {
				this.disabled = false
			});
		},


		/**
		* This method will intercept other jQuery plugins and disable empty file input elements prior to form submission
		*

		* @name intercept
		* @cat Plugins/MultiFile
		* @author Diego A. (http://www.fyneworks.com/)
		*
		* @example $.fn.MultiFile.intercept();
		* @param Array methods (optional) Array of method names to be intercepted
		*/
		intercepted: {},
		intercept: function (methods, context, args) {
			var method, value;
			args = args || [];
			if (args.constructor.toString().indexOf("Array") < 0) args = [args];
			if (typeof (methods) == 'function') {
				$.fn.MultiFile.disableEmpty();
				value = methods.apply(context || window, args);
				//SEE-http://code.google.com/p/jquery-multifile-plugin/issues/detail?id=27
				setTimeout(function () {
					$.fn.MultiFile.reEnableEmpty()
				}, 1000);
				return value;
			};
			if (methods.constructor.toString().indexOf("Array") < 0) methods = [methods];
			for (var i = 0; i < methods.length; i++) {
				method = methods[i] + ''; // make sure that we have a STRING
				if (method)(function (method) { // make sure that method is ISOLATED for the interception
					$.fn.MultiFile.intercepted[method] = $.fn[method] || function () {};
					$.fn[method] = function () {
						$.fn.MultiFile.disableEmpty();
						value = $.fn.MultiFile.intercepted[method].apply(this, arguments);
						//SEE http://code.google.com/p/jquery-multifile-plugin/issues/detail?id=27
						setTimeout(function () {
							$.fn.MultiFile.reEnableEmpty()
						}, 1000);
						return value;
					}; // interception
				})(method); // MAKE SURE THAT method IS ISOLATED for the interception
			}; // for each method
		} // $.fn.MultiFile.intercept

	});

	/*--------------------------------------------------------*/

	/*
	### Default Settings ###
	eg.: You can override default control like this:
	$.fn.MultiFile.options.accept = 'gif|jpg';
	*/
	$.fn.MultiFile.options = { //$.extend($.fn.MultiFile, { options: {
		accept: '', // accepted file extensions
		max: -1, // maximum number of selectable files
		maxfile: -1, // maximum size of a single file
		maxsize: -1, // maximum size of entire payload

		// name to use for newly created elements
		namePattern: '$name', // same name by default (which creates an array)
		/*master name*/ // use $name
		/*master id */ // use $id
		/*group count*/ // use $g
		/*slave count*/ // use $i
		/*other	 */ // use any combination of he above, eg.: $name_file$i

		// previews
		preview: false,
		previewCss: 'max-height:100px; max-width:100px;',

		// STRING: collection lets you show messages in different languages
		STRING: {
			remove: 'x',
			denied: 'You cannot select a $ext file.\nTry again...',
			file: '$file',
			selected: 'File selected: $file',
			duplicate: 'This file has already been selected:\n$file',
			toomuch: 'The files selected exceed the maximum size permited ($size)',
			toomany: 'Too many files selected (max: $max)',
			toobig: '$file is too big (max $size)'
		},

		// name of methods that should be automcatically intercepted so the plugin can disable
		// extra file elements that are empty before execution and automatically re-enable them afterwards
		autoIntercept: ['submit', 'ajaxSubmit', 'ajaxForm', 'validate', 'valid' /* array of methods to intercept */ ],

		// error handling function
		error: function (s) {

			if(typeof console != 'undefined') console.log(s);

			// TODO: add various dialog handlers here?
			alert(s);
		}
	}; //} });

	/*--------------------------------------------------------*/

	/*
	### Additional Methods ###
	Required functionality outside the plugin's scope
	*/

	// Native input reset method - because this alone doesn't always work: $(element).val('').attr('value', '')[0].value = '';
	$.fn.reset = $.fn.reset || function () {
		return this.each(function () {
			try {
				this.reset();
			} catch (e) {}
		});
	};

	/*--------------------------------------------------------*/

	/*
	### Default implementation ###
	The plugin will attach itself to file inputs
	with the class 'multi' when the page loads
	*/
	$(function () {
		//$("input:file.multi").MultiFile();
		$("input[type=file].multi").MultiFile();
	});



	/*# AVOID COLLISIONS #*/
})(jQuery);
/*# AVOID COLLISIONS #*/

//Create our namespace 
DAIS.createNS("DAIS.AUTHORIZATION");


DAIS.AUTHORIZATION.PaymentsAuth = function PaymentsAuth() {
    var GetSignAuthorization = function () {

        HideGeneralError();

        var listToSign = new Array();
        var listToSend = new Array();

        var signIds = $('input[name=m_ctrl_chb_Sign]:checked');
        signIds.each(function () {
            listToSign.push($(this).val());
        });
        var sendIds = $('input[name=m_ctrl_chb_Send]:checked');
        sendIds.each(function () {
            listToSend.push($(this).val());
        });

        var data = { toSign: listToSign, toSend: listToSend };

        signAndSendWithAuthorization(data);
    }

    var GetAuthorization4SendNow = function (id) {

        HideGeneralError();
     
        var listToSend = new Array();

        if (id == undefined) {
            var sendIds = $('input[name=m_ctrl_chb_Sign]:checked');
            sendIds.each(function () {
                listToSend.push($(this).val());
            });
        }
        else {
            listToSend.push(id);
        }
        var data = { toSign: listToSend, toSend: listToSend };

        signAndSendWithAuthorization(data);
    }

    var signAndSendWithAuthorization = function (data) {
        var newUrl = MakeRequestToMVC("ProcessPayments", "SignAndSendPreview");

        $.daisDialogLoad({
            type: "POST",
            url: newUrl,
            height: 530,
            width: 750,
            data: JSON.stringify(data),
            contentType: "application/json",
            success: function () {
                LoadAuthorization();
            },
            error: function () {
                ShowGeneralError();
            },
            loadingPanelContainer: $("#content")
        });
    }

    return {
        GetSignAuthorization: GetSignAuthorization,
        GetAuthorization4SendNow: GetAuthorization4SendNow
    }

}();
//Create our namespace 
DAIS.createNS("DAIS.AUTHORIZATION");

DAIS.AUTHORIZATION.GenericAuth = function GenericAuth() {

    var SignAndSend = function (digest, type, client) {

        var newUrl = MakeRequestToMVCWithArea("ProcessGenericAuthorization", "SignAndSendPreview", "Authorization");
        $.daisDialogLoad({
            type: "POST",
            url: newUrl,
            height: 270,
            width: 500,
            data: JSON.stringify({ digestToSign: digest, objType: type, bankClient: client }),
            contentType: "application/json",
            success: function () {
                LoadAuthorization();
            },
            error: function () {
                ShowGeneralError();
            },
            loadingPanelContainer: $("#content")
        });
    }

    return {
        SignAndSend: SignAndSend
    }

}();
//Create our namespace 
DAIS.createNS("DAIS.AUTHORIZATION");


DAIS.AUTHORIZATION.TradeFinanceAuth = function TradeFinanceAuth() {
    var GetSignAuthorization = function (url) {

        DAIS.AUTHORIZATION.CommonAuth.SignAndSend(url);   
    }
  
    return {
        GetSignAuthorization: GetSignAuthorization
    }

}();
//Create our namespace 
DAIS.createNS("DAIS.AUTHORIZATION");


DAIS.AUTHORIZATION.CommonAuth = function CommonAuth() {
    var SignAndSend = function (url) {

        HideGeneralError();
      
        var listToSign = new Array();
        var listToSend = new Array();

        var signIds = $('input[name=m_ctrl_chb_Sign]:checked');
        signIds.each(function () {
            listToSign.push($(this).val());
        });
        var sendIds = $('input[name=m_ctrl_chb_Send]:checked');
        sendIds.each(function () {
            listToSend.push($(this).val());
        });

        var data = { toSign: listToSign, toSend: listToSend };

        signAndSendWithAuthorization(data, url);
    }

    var signAndSendWithAuthorization = function (data, url) {
        
        $.daisDialogLoad({
            type: "POST",
            url: url,
            height: 530,
            width: 750,
            data: JSON.stringify(data),
            contentType: "application/json",
            success: function () {
                LoadAuthorization();
            },
            error: function () {
                ShowGeneralError();
            },
            loadingPanelContainer: $("#content")
        });
    }

    function GetDataAndReturnPromise(actionMap, action, items)
    {
        var res = new $.Deferred(function() {
            $.daisAjax({
                url: actionMap[action],
                data: $.daisJsonSerialize(items),
                type: "POST",
                background: false,
                contentType: "application/json",
                success: function (data) {
                    res.resolve(data);
                },
                error: function() {
                    res.reject();
                }
            });
        });
        return res.promise();
    }

    function AppendStatus(value, type) {
        var lblAfterSign = $get("lbl_AfterAction_" + value.ID);
        if (lblAfterSign != null) {
            lblAfterSign.innerHTML = value.Message;

            if (value.Success) {
                lblAfterSign.className = "AfterSignOK";
                if ($get("m_img_Edit_" + value.ID) != null)
                    $get("m_img_Edit_" + value.ID).style.display = "none";

                if (type == "sign") {
                    SuccessfulSignAfterAction(value.ID);
                }
                else if (type == "send") {
                    if ($get("m_img_Cancel_" + value.ID) != null)
                        $get("m_img_Cancel_" + value.ID).style.display = "none";

                    SuccessfulSendAfterAction(value.ID);
                }

                if (value.StatusText !== '' && value.StatusText !== null) {
                    var lblAfterStatus = $get("lbl_AfterSign_" + value.ID);
                    if (lblAfterStatus != null) {
                        lblAfterStatus.innerHTML = '';
                        lblAfterStatus.innerHTML = value.StatusText;
                    }
                }
            }
            else {
                lblAfterSign.className = "AfterSignError";
            }
        }
        else if (value != null && value.ID == null && value.Message != undefined) {
            return alert(value.Message);
        }
        else {
            return;
        }
    }

    return {
        SignAndSend: SignAndSend,
        GetDataAndReturnPromise: GetDataAndReturnPromise,
        AppendStatus: AppendStatus
    }

}();
//Create our namespace 
DAIS.createNS("DAIS.AUTHORIZATION");


DAIS.AUTHORIZATION.FileUploadAuth = function FileUploadAuth() {
    var GetAuthorizationForFileUpload = function (type) {

        HideGeneralError();
        ShowPleaseWaitDialog();

        var fileName = $('#orgfile').val();
        var data = { fileName: fileName, type: type };

        signWithAuthorization(data);
    }

    var signWithAuthorization = function (data) {

        var url = MakeRequestToMVCWithArea("AuthorizeFiles", "Index", "Authorization");
        
        $.daisDialogLoad({
            type: "POST",
            url: url,
            height: 240,
            width: 450,
            data: JSON.stringify(data),
            contentType: "application/json",
            success: function () {
                HidePleaseWaitDialog();
            },
            error: function () {
                HidePleaseWaitDialog();
                ShowGeneralError();
            },
            loadingPanelContainer: $("#content")
        });
    }

    return {
        GetAuthorizationForFileUpload: GetAuthorizationForFileUpload
    }

}();
//Create our namespace 
DAIS.createNS("DAIS.APERSON.CARDS");


DAIS.APERSON.CARDS.CardBlockUnblockAction = function CardBlockUnblockAction() {

    var debitCardBlockUnblock = function(cardId,domElement) {
        cardBlockUnblock(cardId, domElement, cardTypeDebit);
    }

    var creditCardBlockUnblock = function (cardId,domElement) {
        cardBlockUnblock(cardId, domElement, cardTypeCredit);
    }

    var actionTypeBlock = 1;
    var actionTypeUnblock = 2;
    var cardTypeDebit = 1;
    var cardTypeCredit = 2;

    function cardBlockUnblock(cardId,domElement,cardType){
        var options = {
            title: ID_STR_CARDLOCKTITLE,
            yes: ID_STR_CONFIRM,
            no: ID_STR_CANCEL
        };
        var shouldBlock = $(domElement).attr("data-shouldBlock") == "true";
        if(shouldBlock){
            $.daisConfirm(ID_STR_CARD_BLOCKCARDCONFIRMATION, options).done(function () {
                SendBlockCardRequest(cardId, shouldBlock,domElement, cardType);
            });
        }
        else {
            $.daisConfirm(ID_STR_CARD_UNBLOCKCARDCONFIRMATION, options).done(function () {
                SendBlockCardRequest(cardId, shouldBlock, domElement, cardType);
            });
        }
    }

    function SendBlockCardRequest(cardId, shouldBlock,domElement, cardType){
        var url = MakeRequestToMVC("CardOperations", "BlockUnblockCard");
        var actionType = shouldBlock ? actionTypeBlock : actionTypeUnblock;
        params = { cardId: cardId, cardOperation: actionType, cardType: cardType }
        $.daisAjax({
            type: "POST",
            url: url,
            success: function (result) {
                var resultDiv = $('<div id="successDiv" />').html(result);
                $("body").append(resultDiv);
                var options = {
                    width: 300,
                    close: function () {
                        $(resultDiv).dialog('destroy').remove();
                    }
                };
                ShowModalDiv("successDiv", options);
                if(result.indexOf("ErrorMessage") != -1){
                    return;
                }
                if(actionType == actionTypeUnblock){
                    var icon = $(domElement).children().first();
                    $(icon).removeClass("locked");
                    $(icon).addClass("unlocked");
                    var spanText = $(domElement).prev();
                    $(spanText).text(ID_STR_CARD_UNSUSPENDTEXT);
                    $(domElement).attr("data-shouldBlock","true");
                    $(domElement).attr("title", ID_STR_CARD_SUSPEND_TOOLTIP);
                }
                else{
                    var icon = $(domElement).children().first();
                    $(icon).removeClass("unlocked");
                    $(icon).addClass("locked");
                    var spanText = $(domElement).prev();
                    $(spanText).text(ID_STR_CARD_SUSPENDTEXT);
                    $(domElement).attr("data-shouldBlock","false");
                    $(domElement).attr("title", ID_STR_CARD_UNSUSPEND_TOOLTIP);
                }
            },
            error: function () {
                ShowGeneralError();
                return false;
            },
            dataType: "html",
            data: params
        });
    }

   

    return {
        debitCardBlockUnblock: debitCardBlockUnblock,
        creditCardBlockUnblock: creditCardBlockUnblock
    }

}();
